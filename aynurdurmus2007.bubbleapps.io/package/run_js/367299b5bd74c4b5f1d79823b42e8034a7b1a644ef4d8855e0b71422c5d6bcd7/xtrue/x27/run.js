  /*
  * Copyright Bubble Group, Inc.
  */

  window.bubble_bundle_name = 'run';

  if (!window._bubble_page_load_data) {
      window._bubble_page_load_data = {}
  }
  if (!window._bubble_page_load_data.js_execution_timings) {
    window._bubble_page_load_data.js_execution_timings = {}
  }
  window._bubble_page_load_data.js_execution_timings.run_start_execution = Date.now();
(()=>{var __create=Object.create;var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropNames=Object.getOwnPropertyNames,__getOwnPropSymbols=Object.getOwnPropertySymbols,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable;var __defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,__spreadValues=(a,b)=>{for(var prop in b||(b={}))__hasOwnProp.call(b,prop)&&__defNormalProp(a,prop,b[prop]);if(__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(b))__propIsEnum.call(b,prop)&&__defNormalProp(a,prop,b[prop]);return a},__spreadProps=(a,b)=>__defProps(a,__getOwnPropDescs(b));var __require=(x=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(x,{get:(a,b)=>(typeof require<"u"?require:a)[b]}):x)(function(x){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+x+'" is not supported')});var __esm=(fn,res)=>function(){return fn&&(res=(0,fn[__getOwnPropNames(fn)[0]])(fn=0)),res};var __commonJS=(cb,mod)=>function(){return mod||(0,cb[__getOwnPropNames(cb)[0]])((mod={exports:{}}).exports,mod),mod.exports};var __export=(target,all)=>{for(var name in all)__defProp(target,name,{get:all[name],enumerable:!0})},__copyProps=(to,from2,except,desc)=>{if(from2&&typeof from2=="object"||typeof from2=="function")for(let key of __getOwnPropNames(from2))!__hasOwnProp.call(to,key)&&key!==except&&__defProp(to,key,{get:()=>from2[key],enumerable:!(desc=__getOwnPropDesc(from2,key))||desc.enumerable});return to};var __toESM=(mod,isNodeMode,target)=>(target=mod!=null?__create(__getProtoOf(mod)):{},__copyProps(isNodeMode||!mod||!mod.__esModule?__defProp(target,"default",{value:mod,enumerable:!0}):target,mod)),__toCommonJS=mod=>__copyProps(__defProp({},"__esModule",{value:!0}),mod);var define_process_env_default,init_define_process_env=__esm({"<define:process.env>"(){define_process_env_default={}}});var require_base64_js=__commonJS({"node_modules/base64-js/index.js"(exports){"use strict";init_define_process_env();init_shim();exports.byteLength=byteLength;exports.toByteArray=toByteArray;exports.fromByteArray=fromByteArray;var lookup2=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(i=0,len=code.length;i<len;++i)lookup2[i]=code[i],revLookup[code.charCodeAt(i)]=i;var i,len;revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function getLens(b64){var len2=b64.length;if(len2%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var validLen=b64.indexOf("=");validLen===-1&&(validLen=len2);var placeHoldersLen=validLen===len2?0:4-validLen%4;return[validLen,placeHoldersLen]}function byteLength(b64){var lens=getLens(b64),validLen=lens[0],placeHoldersLen=lens[1];return(validLen+placeHoldersLen)*3/4-placeHoldersLen}function _byteLength(b64,validLen,placeHoldersLen){return(validLen+placeHoldersLen)*3/4-placeHoldersLen}function toByteArray(b64){var tmp,lens=getLens(b64),validLen=lens[0],placeHoldersLen=lens[1],arr=new Arr(_byteLength(b64,validLen,placeHoldersLen)),curByte=0,len2=placeHoldersLen>0?validLen-4:validLen,i2;for(i2=0;i2<len2;i2+=4)tmp=revLookup[b64.charCodeAt(i2)]<<18|revLookup[b64.charCodeAt(i2+1)]<<12|revLookup[b64.charCodeAt(i2+2)]<<6|revLookup[b64.charCodeAt(i2+3)],arr[curByte++]=tmp>>16&255,arr[curByte++]=tmp>>8&255,arr[curByte++]=tmp&255;return placeHoldersLen===2&&(tmp=revLookup[b64.charCodeAt(i2)]<<2|revLookup[b64.charCodeAt(i2+1)]>>4,arr[curByte++]=tmp&255),placeHoldersLen===1&&(tmp=revLookup[b64.charCodeAt(i2)]<<10|revLookup[b64.charCodeAt(i2+1)]<<4|revLookup[b64.charCodeAt(i2+2)]>>2,arr[curByte++]=tmp>>8&255,arr[curByte++]=tmp&255),arr}function tripletToBase64(num){return lookup2[num>>18&63]+lookup2[num>>12&63]+lookup2[num>>6&63]+lookup2[num&63]}function encodeChunk(uint8,start,end){for(var tmp,output=[],i2=start;i2<end;i2+=3)tmp=(uint8[i2]<<16&16711680)+(uint8[i2+1]<<8&65280)+(uint8[i2+2]&255),output.push(tripletToBase64(tmp));return output.join("")}function fromByteArray(uint8){for(var tmp,len2=uint8.length,extraBytes=len2%3,parts=[],maxChunkLength=16383,i2=0,len22=len2-extraBytes;i2<len22;i2+=maxChunkLength)parts.push(encodeChunk(uint8,i2,i2+maxChunkLength>len22?len22:i2+maxChunkLength));return extraBytes===1?(tmp=uint8[len2-1],parts.push(lookup2[tmp>>2]+lookup2[tmp<<4&63]+"==")):extraBytes===2&&(tmp=(uint8[len2-2]<<8)+uint8[len2-1],parts.push(lookup2[tmp>>10]+lookup2[tmp>>4&63]+lookup2[tmp<<2&63]+"=")),parts.join("")}}});var require_ieee754=__commonJS({"node_modules/ieee754/index.js"(exports){init_define_process_env();init_shim();exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m,eLen=nBytes*8-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,nBits=-7,i=isLE?nBytes-1:0,d=isLE?-1:1,s=buffer[offset+i];for(i+=d,e=s&(1<<-nBits)-1,s>>=-nBits,nBits+=eLen;nBits>0;e=e*256+buffer[offset+i],i+=d,nBits-=8);for(m=e&(1<<-nBits)-1,e>>=-nBits,nBits+=mLen;nBits>0;m=m*256+buffer[offset+i],i+=d,nBits-=8);if(e===0)e=1-eBias;else{if(e===eMax)return m?NaN:(s?-1:1)*(1/0);m=m+Math.pow(2,mLen),e=e-eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)};exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c,eLen=nBytes*8-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,rt=mLen===23?Math.pow(2,-24)-Math.pow(2,-77):0,i=isLE?0:nBytes-1,d=isLE?1:-1,s=value<0||value===0&&1/value<0?1:0;for(value=Math.abs(value),isNaN(value)||value===1/0?(m=isNaN(value)?1:0,e=eMax):(e=Math.floor(Math.log(value)/Math.LN2),value*(c=Math.pow(2,-e))<1&&(e--,c*=2),e+eBias>=1?value+=rt/c:value+=rt*Math.pow(2,1-eBias),value*c>=2&&(e++,c/=2),e+eBias>=eMax?(m=0,e=eMax):e+eBias>=1?(m=(value*c-1)*Math.pow(2,mLen),e=e+eBias):(m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen),e=0));mLen>=8;buffer[offset+i]=m&255,i+=d,m/=256,mLen-=8);for(e=e<<mLen|m,eLen+=mLen;eLen>0;buffer[offset+i]=e&255,i+=d,e/=256,eLen-=8);buffer[offset+i-d]|=s*128}}});var require_buffer=__commonJS({"node_modules/node-stdlib-browser/node_modules/buffer/index.js"(exports){"use strict";init_define_process_env();init_shim();var base64=require_base64_js(),ieee754=require_ieee754(),customInspectSymbol=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;exports.Buffer=Buffer3;exports.SlowBuffer=SlowBuffer;exports.INSPECT_MAX_BYTES=50;var K_MAX_LENGTH=2147483647;exports.kMaxLength=K_MAX_LENGTH;Buffer3.TYPED_ARRAY_SUPPORT=typedArraySupport();!Buffer3.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function typedArraySupport(){try{var arr=new Uint8Array(1),proto={foo:function(){return 42}};return Object.setPrototypeOf(proto,Uint8Array.prototype),Object.setPrototypeOf(arr,proto),arr.foo()===42}catch(e){return!1}}Object.defineProperty(Buffer3.prototype,"parent",{enumerable:!0,get:function(){if(Buffer3.isBuffer(this))return this.buffer}});Object.defineProperty(Buffer3.prototype,"offset",{enumerable:!0,get:function(){if(Buffer3.isBuffer(this))return this.byteOffset}});function createBuffer(length){if(length>K_MAX_LENGTH)throw new RangeError('The value "'+length+'" is invalid for option "size"');var buf=new Uint8Array(length);return Object.setPrototypeOf(buf,Buffer3.prototype),buf}function Buffer3(arg,encodingOrOffset,length){if(typeof arg=="number"){if(typeof encodingOrOffset=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return allocUnsafe(arg)}return from2(arg,encodingOrOffset,length)}Buffer3.poolSize=8192;function from2(value,encodingOrOffset,length){if(typeof value=="string")return fromString(value,encodingOrOffset);if(ArrayBuffer.isView(value))return fromArrayView(value);if(value==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof value);if(isInstance(value,ArrayBuffer)||value&&isInstance(value.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(isInstance(value,SharedArrayBuffer)||value&&isInstance(value.buffer,SharedArrayBuffer)))return fromArrayBuffer(value,encodingOrOffset,length);if(typeof value=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var valueOf=value.valueOf&&value.valueOf();if(valueOf!=null&&valueOf!==value)return Buffer3.from(valueOf,encodingOrOffset,length);var b=fromObject(value);if(b)return b;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof value[Symbol.toPrimitive]=="function")return Buffer3.from(value[Symbol.toPrimitive]("string"),encodingOrOffset,length);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof value)}Buffer3.from=function(value,encodingOrOffset,length){return from2(value,encodingOrOffset,length)};Object.setPrototypeOf(Buffer3.prototype,Uint8Array.prototype);Object.setPrototypeOf(Buffer3,Uint8Array);function assertSize(size){if(typeof size!="number")throw new TypeError('"size" argument must be of type number');if(size<0)throw new RangeError('The value "'+size+'" is invalid for option "size"')}function alloc(size,fill,encoding){return assertSize(size),size<=0?createBuffer(size):fill!==void 0?typeof encoding=="string"?createBuffer(size).fill(fill,encoding):createBuffer(size).fill(fill):createBuffer(size)}Buffer3.alloc=function(size,fill,encoding){return alloc(size,fill,encoding)};function allocUnsafe(size){return assertSize(size),createBuffer(size<0?0:checked(size)|0)}Buffer3.allocUnsafe=function(size){return allocUnsafe(size)};Buffer3.allocUnsafeSlow=function(size){return allocUnsafe(size)};function fromString(string,encoding){if((typeof encoding!="string"||encoding==="")&&(encoding="utf8"),!Buffer3.isEncoding(encoding))throw new TypeError("Unknown encoding: "+encoding);var length=byteLength(string,encoding)|0,buf=createBuffer(length),actual=buf.write(string,encoding);return actual!==length&&(buf=buf.slice(0,actual)),buf}function fromArrayLike(array){for(var length=array.length<0?0:checked(array.length)|0,buf=createBuffer(length),i=0;i<length;i+=1)buf[i]=array[i]&255;return buf}function fromArrayView(arrayView){if(isInstance(arrayView,Uint8Array)){var copy=new Uint8Array(arrayView);return fromArrayBuffer(copy.buffer,copy.byteOffset,copy.byteLength)}return fromArrayLike(arrayView)}function fromArrayBuffer(array,byteOffset,length){if(byteOffset<0||array.byteLength<byteOffset)throw new RangeError('"offset" is outside of buffer bounds');if(array.byteLength<byteOffset+(length||0))throw new RangeError('"length" is outside of buffer bounds');var buf;return byteOffset===void 0&&length===void 0?buf=new Uint8Array(array):length===void 0?buf=new Uint8Array(array,byteOffset):buf=new Uint8Array(array,byteOffset,length),Object.setPrototypeOf(buf,Buffer3.prototype),buf}function fromObject(obj){if(Buffer3.isBuffer(obj)){var len=checked(obj.length)|0,buf=createBuffer(len);return buf.length===0||obj.copy(buf,0,0,len),buf}if(obj.length!==void 0)return typeof obj.length!="number"||numberIsNaN(obj.length)?createBuffer(0):fromArrayLike(obj);if(obj.type==="Buffer"&&Array.isArray(obj.data))return fromArrayLike(obj.data)}function checked(length){if(length>=K_MAX_LENGTH)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+K_MAX_LENGTH.toString(16)+" bytes");return length|0}function SlowBuffer(length){return+length!=length&&(length=0),Buffer3.alloc(+length)}Buffer3.isBuffer=function(b){return b!=null&&b._isBuffer===!0&&b!==Buffer3.prototype};Buffer3.compare=function(a,b){if(isInstance(a,Uint8Array)&&(a=Buffer3.from(a,a.offset,a.byteLength)),isInstance(b,Uint8Array)&&(b=Buffer3.from(b,b.offset,b.byteLength)),!Buffer3.isBuffer(a)||!Buffer3.isBuffer(b))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===b)return 0;for(var x=a.length,y=b.length,i=0,len=Math.min(x,y);i<len;++i)if(a[i]!==b[i]){x=a[i],y=b[i];break}return x<y?-1:y<x?1:0};Buffer3.isEncoding=function(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};Buffer3.concat=function(list,length){if(!Array.isArray(list))throw new TypeError('"list" argument must be an Array of Buffers');if(list.length===0)return Buffer3.alloc(0);var i;if(length===void 0)for(length=0,i=0;i<list.length;++i)length+=list[i].length;var buffer=Buffer3.allocUnsafe(length),pos=0;for(i=0;i<list.length;++i){var buf=list[i];if(isInstance(buf,Uint8Array))pos+buf.length>buffer.length?Buffer3.from(buf).copy(buffer,pos):Uint8Array.prototype.set.call(buffer,buf,pos);else if(Buffer3.isBuffer(buf))buf.copy(buffer,pos);else throw new TypeError('"list" argument must be an Array of Buffers');pos+=buf.length}return buffer};function byteLength(string,encoding){if(Buffer3.isBuffer(string))return string.length;if(ArrayBuffer.isView(string)||isInstance(string,ArrayBuffer))return string.byteLength;if(typeof string!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof string);var len=string.length,mustMatch=arguments.length>2&&arguments[2]===!0;if(!mustMatch&&len===0)return 0;for(var loweredCase=!1;;)switch(encoding){case"ascii":case"latin1":case"binary":return len;case"utf8":case"utf-8":return utf8ToBytes(string).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return len*2;case"hex":return len>>>1;case"base64":return base64ToBytes(string).length;default:if(loweredCase)return mustMatch?-1:utf8ToBytes(string).length;encoding=(""+encoding).toLowerCase(),loweredCase=!0}}Buffer3.byteLength=byteLength;function slowToString(encoding,start,end){var loweredCase=!1;if((start===void 0||start<0)&&(start=0),start>this.length||((end===void 0||end>this.length)&&(end=this.length),end<=0)||(end>>>=0,start>>>=0,end<=start))return"";for(encoding||(encoding="utf8");;)switch(encoding){case"hex":return hexSlice(this,start,end);case"utf8":case"utf-8":return utf8Slice(this,start,end);case"ascii":return asciiSlice(this,start,end);case"latin1":case"binary":return latin1Slice(this,start,end);case"base64":return base64Slice(this,start,end);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(encoding+"").toLowerCase(),loweredCase=!0}}Buffer3.prototype._isBuffer=!0;function swap(b,n,m){var i=b[n];b[n]=b[m],b[m]=i}Buffer3.prototype.swap16=function(){var len=this.length;if(len%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var i=0;i<len;i+=2)swap(this,i,i+1);return this};Buffer3.prototype.swap32=function(){var len=this.length;if(len%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var i=0;i<len;i+=4)swap(this,i,i+3),swap(this,i+1,i+2);return this};Buffer3.prototype.swap64=function(){var len=this.length;if(len%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var i=0;i<len;i+=8)swap(this,i,i+7),swap(this,i+1,i+6),swap(this,i+2,i+5),swap(this,i+3,i+4);return this};Buffer3.prototype.toString=function(){var length=this.length;return length===0?"":arguments.length===0?utf8Slice(this,0,length):slowToString.apply(this,arguments)};Buffer3.prototype.toLocaleString=Buffer3.prototype.toString;Buffer3.prototype.equals=function(b){if(!Buffer3.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b?!0:Buffer3.compare(this,b)===0};Buffer3.prototype.inspect=function(){var str="",max=exports.INSPECT_MAX_BYTES;return str=this.toString("hex",0,max).replace(/(.{2})/g,"$1 ").trim(),this.length>max&&(str+=" ... "),"<Buffer "+str+">"};customInspectSymbol&&(Buffer3.prototype[customInspectSymbol]=Buffer3.prototype.inspect);Buffer3.prototype.compare=function(target,start,end,thisStart,thisEnd){if(isInstance(target,Uint8Array)&&(target=Buffer3.from(target,target.offset,target.byteLength)),!Buffer3.isBuffer(target))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof target);if(start===void 0&&(start=0),end===void 0&&(end=target?target.length:0),thisStart===void 0&&(thisStart=0),thisEnd===void 0&&(thisEnd=this.length),start<0||end>target.length||thisStart<0||thisEnd>this.length)throw new RangeError("out of range index");if(thisStart>=thisEnd&&start>=end)return 0;if(thisStart>=thisEnd)return-1;if(start>=end)return 1;if(start>>>=0,end>>>=0,thisStart>>>=0,thisEnd>>>=0,this===target)return 0;for(var x=thisEnd-thisStart,y=end-start,len=Math.min(x,y),thisCopy=this.slice(thisStart,thisEnd),targetCopy=target.slice(start,end),i=0;i<len;++i)if(thisCopy[i]!==targetCopy[i]){x=thisCopy[i],y=targetCopy[i];break}return x<y?-1:y<x?1:0};function bidirectionalIndexOf(buffer,val,byteOffset,encoding,dir){if(buffer.length===0)return-1;if(typeof byteOffset=="string"?(encoding=byteOffset,byteOffset=0):byteOffset>2147483647?byteOffset=2147483647:byteOffset<-2147483648&&(byteOffset=-2147483648),byteOffset=+byteOffset,numberIsNaN(byteOffset)&&(byteOffset=dir?0:buffer.length-1),byteOffset<0&&(byteOffset=buffer.length+byteOffset),byteOffset>=buffer.length){if(dir)return-1;byteOffset=buffer.length-1}else if(byteOffset<0)if(dir)byteOffset=0;else return-1;if(typeof val=="string"&&(val=Buffer3.from(val,encoding)),Buffer3.isBuffer(val))return val.length===0?-1:arrayIndexOf(buffer,val,byteOffset,encoding,dir);if(typeof val=="number")return val=val&255,typeof Uint8Array.prototype.indexOf=="function"?dir?Uint8Array.prototype.indexOf.call(buffer,val,byteOffset):Uint8Array.prototype.lastIndexOf.call(buffer,val,byteOffset):arrayIndexOf(buffer,[val],byteOffset,encoding,dir);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(arr,val,byteOffset,encoding,dir){var indexSize=1,arrLength=arr.length,valLength=val.length;if(encoding!==void 0&&(encoding=String(encoding).toLowerCase(),encoding==="ucs2"||encoding==="ucs-2"||encoding==="utf16le"||encoding==="utf-16le")){if(arr.length<2||val.length<2)return-1;indexSize=2,arrLength/=2,valLength/=2,byteOffset/=2}function read(buf,i2){return indexSize===1?buf[i2]:buf.readUInt16BE(i2*indexSize)}var i;if(dir){var foundIndex=-1;for(i=byteOffset;i<arrLength;i++)if(read(arr,i)===read(val,foundIndex===-1?0:i-foundIndex)){if(foundIndex===-1&&(foundIndex=i),i-foundIndex+1===valLength)return foundIndex*indexSize}else foundIndex!==-1&&(i-=i-foundIndex),foundIndex=-1}else for(byteOffset+valLength>arrLength&&(byteOffset=arrLength-valLength),i=byteOffset;i>=0;i--){for(var found=!0,j=0;j<valLength;j++)if(read(arr,i+j)!==read(val,j)){found=!1;break}if(found)return i}return-1}Buffer3.prototype.includes=function(val,byteOffset,encoding){return this.indexOf(val,byteOffset,encoding)!==-1};Buffer3.prototype.indexOf=function(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!0)};Buffer3.prototype.lastIndexOf=function(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!1)};function hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;length?(length=Number(length),length>remaining&&(length=remaining)):length=remaining;var strLen=string.length;length>strLen/2&&(length=strLen/2);for(var i=0;i<length;++i){var parsed=parseInt(string.substr(i*2,2),16);if(numberIsNaN(parsed))return i;buf[offset+i]=parsed}return i}function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length)}function asciiWrite(buf,string,offset,length){return blitBuffer(asciiToBytes(string),buf,offset,length)}function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length)}function ucs2Write(buf,string,offset,length){return blitBuffer(utf16leToBytes(string,buf.length-offset),buf,offset,length)}Buffer3.prototype.write=function(string,offset,length,encoding){if(offset===void 0)encoding="utf8",length=this.length,offset=0;else if(length===void 0&&typeof offset=="string")encoding=offset,length=this.length,offset=0;else if(isFinite(offset))offset=offset>>>0,isFinite(length)?(length=length>>>0,encoding===void 0&&(encoding="utf8")):(encoding=length,length=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var remaining=this.length-offset;if((length===void 0||length>remaining)&&(length=remaining),string.length>0&&(length<0||offset<0)||offset>this.length)throw new RangeError("Attempt to write outside buffer bounds");encoding||(encoding="utf8");for(var loweredCase=!1;;)switch(encoding){case"hex":return hexWrite(this,string,offset,length);case"utf8":case"utf-8":return utf8Write(this,string,offset,length);case"ascii":case"latin1":case"binary":return asciiWrite(this,string,offset,length);case"base64":return base64Write(this,string,offset,length);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(""+encoding).toLowerCase(),loweredCase=!0}};Buffer3.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function base64Slice(buf,start,end){return start===0&&end===buf.length?base64.fromByteArray(buf):base64.fromByteArray(buf.slice(start,end))}function utf8Slice(buf,start,end){end=Math.min(buf.length,end);for(var res=[],i=start;i<end;){var firstByte=buf[i],codePoint=null,bytesPerSequence=firstByte>239?4:firstByte>223?3:firstByte>191?2:1;if(i+bytesPerSequence<=end){var secondByte,thirdByte,fourthByte,tempCodePoint;switch(bytesPerSequence){case 1:firstByte<128&&(codePoint=firstByte);break;case 2:secondByte=buf[i+1],(secondByte&192)===128&&(tempCodePoint=(firstByte&31)<<6|secondByte&63,tempCodePoint>127&&(codePoint=tempCodePoint));break;case 3:secondByte=buf[i+1],thirdByte=buf[i+2],(secondByte&192)===128&&(thirdByte&192)===128&&(tempCodePoint=(firstByte&15)<<12|(secondByte&63)<<6|thirdByte&63,tempCodePoint>2047&&(tempCodePoint<55296||tempCodePoint>57343)&&(codePoint=tempCodePoint));break;case 4:secondByte=buf[i+1],thirdByte=buf[i+2],fourthByte=buf[i+3],(secondByte&192)===128&&(thirdByte&192)===128&&(fourthByte&192)===128&&(tempCodePoint=(firstByte&15)<<18|(secondByte&63)<<12|(thirdByte&63)<<6|fourthByte&63,tempCodePoint>65535&&tempCodePoint<1114112&&(codePoint=tempCodePoint))}}codePoint===null?(codePoint=65533,bytesPerSequence=1):codePoint>65535&&(codePoint-=65536,res.push(codePoint>>>10&1023|55296),codePoint=56320|codePoint&1023),res.push(codePoint),i+=bytesPerSequence}return decodeCodePointsArray(res)}var MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(codePoints){var len=codePoints.length;if(len<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,codePoints);for(var res="",i=0;i<len;)res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=MAX_ARGUMENTS_LENGTH));return res}function asciiSlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i)ret+=String.fromCharCode(buf[i]&127);return ret}function latin1Slice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i)ret+=String.fromCharCode(buf[i]);return ret}function hexSlice(buf,start,end){var len=buf.length;(!start||start<0)&&(start=0),(!end||end<0||end>len)&&(end=len);for(var out="",i=start;i<end;++i)out+=hexSliceLookupTable[buf[i]];return out}function utf16leSlice(buf,start,end){for(var bytes=buf.slice(start,end),res="",i=0;i<bytes.length-1;i+=2)res+=String.fromCharCode(bytes[i]+bytes[i+1]*256);return res}Buffer3.prototype.slice=function(start,end){var len=this.length;start=~~start,end=end===void 0?len:~~end,start<0?(start+=len,start<0&&(start=0)):start>len&&(start=len),end<0?(end+=len,end<0&&(end=0)):end>len&&(end=len),end<start&&(end=start);var newBuf=this.subarray(start,end);return Object.setPrototypeOf(newBuf,Buffer3.prototype),newBuf};function checkOffset(offset,ext,length){if(offset%1!==0||offset<0)throw new RangeError("offset is not uint");if(offset+ext>length)throw new RangeError("Trying to access beyond buffer length")}Buffer3.prototype.readUintLE=Buffer3.prototype.readUIntLE=function(offset,byteLength2,noAssert){offset=offset>>>0,byteLength2=byteLength2>>>0,noAssert||checkOffset(offset,byteLength2,this.length);for(var val=this[offset],mul=1,i=0;++i<byteLength2&&(mul*=256);)val+=this[offset+i]*mul;return val};Buffer3.prototype.readUintBE=Buffer3.prototype.readUIntBE=function(offset,byteLength2,noAssert){offset=offset>>>0,byteLength2=byteLength2>>>0,noAssert||checkOffset(offset,byteLength2,this.length);for(var val=this[offset+--byteLength2],mul=1;byteLength2>0&&(mul*=256);)val+=this[offset+--byteLength2]*mul;return val};Buffer3.prototype.readUint8=Buffer3.prototype.readUInt8=function(offset,noAssert){return offset=offset>>>0,noAssert||checkOffset(offset,1,this.length),this[offset]};Buffer3.prototype.readUint16LE=Buffer3.prototype.readUInt16LE=function(offset,noAssert){return offset=offset>>>0,noAssert||checkOffset(offset,2,this.length),this[offset]|this[offset+1]<<8};Buffer3.prototype.readUint16BE=Buffer3.prototype.readUInt16BE=function(offset,noAssert){return offset=offset>>>0,noAssert||checkOffset(offset,2,this.length),this[offset]<<8|this[offset+1]};Buffer3.prototype.readUint32LE=Buffer3.prototype.readUInt32LE=function(offset,noAssert){return offset=offset>>>0,noAssert||checkOffset(offset,4,this.length),(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+this[offset+3]*16777216};Buffer3.prototype.readUint32BE=Buffer3.prototype.readUInt32BE=function(offset,noAssert){return offset=offset>>>0,noAssert||checkOffset(offset,4,this.length),this[offset]*16777216+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])};Buffer3.prototype.readIntLE=function(offset,byteLength2,noAssert){offset=offset>>>0,byteLength2=byteLength2>>>0,noAssert||checkOffset(offset,byteLength2,this.length);for(var val=this[offset],mul=1,i=0;++i<byteLength2&&(mul*=256);)val+=this[offset+i]*mul;return mul*=128,val>=mul&&(val-=Math.pow(2,8*byteLength2)),val};Buffer3.prototype.readIntBE=function(offset,byteLength2,noAssert){offset=offset>>>0,byteLength2=byteLength2>>>0,noAssert||checkOffset(offset,byteLength2,this.length);for(var i=byteLength2,mul=1,val=this[offset+--i];i>0&&(mul*=256);)val+=this[offset+--i]*mul;return mul*=128,val>=mul&&(val-=Math.pow(2,8*byteLength2)),val};Buffer3.prototype.readInt8=function(offset,noAssert){return offset=offset>>>0,noAssert||checkOffset(offset,1,this.length),this[offset]&128?(255-this[offset]+1)*-1:this[offset]};Buffer3.prototype.readInt16LE=function(offset,noAssert){offset=offset>>>0,noAssert||checkOffset(offset,2,this.length);var val=this[offset]|this[offset+1]<<8;return val&32768?val|4294901760:val};Buffer3.prototype.readInt16BE=function(offset,noAssert){offset=offset>>>0,noAssert||checkOffset(offset,2,this.length);var val=this[offset+1]|this[offset]<<8;return val&32768?val|4294901760:val};Buffer3.prototype.readInt32LE=function(offset,noAssert){return offset=offset>>>0,noAssert||checkOffset(offset,4,this.length),this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24};Buffer3.prototype.readInt32BE=function(offset,noAssert){return offset=offset>>>0,noAssert||checkOffset(offset,4,this.length),this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]};Buffer3.prototype.readFloatLE=function(offset,noAssert){return offset=offset>>>0,noAssert||checkOffset(offset,4,this.length),ieee754.read(this,offset,!0,23,4)};Buffer3.prototype.readFloatBE=function(offset,noAssert){return offset=offset>>>0,noAssert||checkOffset(offset,4,this.length),ieee754.read(this,offset,!1,23,4)};Buffer3.prototype.readDoubleLE=function(offset,noAssert){return offset=offset>>>0,noAssert||checkOffset(offset,8,this.length),ieee754.read(this,offset,!0,52,8)};Buffer3.prototype.readDoubleBE=function(offset,noAssert){return offset=offset>>>0,noAssert||checkOffset(offset,8,this.length),ieee754.read(this,offset,!1,52,8)};function checkInt(buf,value,offset,ext,max,min){if(!Buffer3.isBuffer(buf))throw new TypeError('"buffer" argument must be a Buffer instance');if(value>max||value<min)throw new RangeError('"value" argument is out of bounds');if(offset+ext>buf.length)throw new RangeError("Index out of range")}Buffer3.prototype.writeUintLE=Buffer3.prototype.writeUIntLE=function(value,offset,byteLength2,noAssert){if(value=+value,offset=offset>>>0,byteLength2=byteLength2>>>0,!noAssert){var maxBytes=Math.pow(2,8*byteLength2)-1;checkInt(this,value,offset,byteLength2,maxBytes,0)}var mul=1,i=0;for(this[offset]=value&255;++i<byteLength2&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength2};Buffer3.prototype.writeUintBE=Buffer3.prototype.writeUIntBE=function(value,offset,byteLength2,noAssert){if(value=+value,offset=offset>>>0,byteLength2=byteLength2>>>0,!noAssert){var maxBytes=Math.pow(2,8*byteLength2)-1;checkInt(this,value,offset,byteLength2,maxBytes,0)}var i=byteLength2-1,mul=1;for(this[offset+i]=value&255;--i>=0&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength2};Buffer3.prototype.writeUint8=Buffer3.prototype.writeUInt8=function(value,offset,noAssert){return value=+value,offset=offset>>>0,noAssert||checkInt(this,value,offset,1,255,0),this[offset]=value&255,offset+1};Buffer3.prototype.writeUint16LE=Buffer3.prototype.writeUInt16LE=function(value,offset,noAssert){return value=+value,offset=offset>>>0,noAssert||checkInt(this,value,offset,2,65535,0),this[offset]=value&255,this[offset+1]=value>>>8,offset+2};Buffer3.prototype.writeUint16BE=Buffer3.prototype.writeUInt16BE=function(value,offset,noAssert){return value=+value,offset=offset>>>0,noAssert||checkInt(this,value,offset,2,65535,0),this[offset]=value>>>8,this[offset+1]=value&255,offset+2};Buffer3.prototype.writeUint32LE=Buffer3.prototype.writeUInt32LE=function(value,offset,noAssert){return value=+value,offset=offset>>>0,noAssert||checkInt(this,value,offset,4,4294967295,0),this[offset+3]=value>>>24,this[offset+2]=value>>>16,this[offset+1]=value>>>8,this[offset]=value&255,offset+4};Buffer3.prototype.writeUint32BE=Buffer3.prototype.writeUInt32BE=function(value,offset,noAssert){return value=+value,offset=offset>>>0,noAssert||checkInt(this,value,offset,4,4294967295,0),this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=value&255,offset+4};Buffer3.prototype.writeIntLE=function(value,offset,byteLength2,noAssert){if(value=+value,offset=offset>>>0,!noAssert){var limit=Math.pow(2,8*byteLength2-1);checkInt(this,value,offset,byteLength2,limit-1,-limit)}var i=0,mul=1,sub=0;for(this[offset]=value&255;++i<byteLength2&&(mul*=256);)value<0&&sub===0&&this[offset+i-1]!==0&&(sub=1),this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength2};Buffer3.prototype.writeIntBE=function(value,offset,byteLength2,noAssert){if(value=+value,offset=offset>>>0,!noAssert){var limit=Math.pow(2,8*byteLength2-1);checkInt(this,value,offset,byteLength2,limit-1,-limit)}var i=byteLength2-1,mul=1,sub=0;for(this[offset+i]=value&255;--i>=0&&(mul*=256);)value<0&&sub===0&&this[offset+i+1]!==0&&(sub=1),this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength2};Buffer3.prototype.writeInt8=function(value,offset,noAssert){return value=+value,offset=offset>>>0,noAssert||checkInt(this,value,offset,1,127,-128),value<0&&(value=255+value+1),this[offset]=value&255,offset+1};Buffer3.prototype.writeInt16LE=function(value,offset,noAssert){return value=+value,offset=offset>>>0,noAssert||checkInt(this,value,offset,2,32767,-32768),this[offset]=value&255,this[offset+1]=value>>>8,offset+2};Buffer3.prototype.writeInt16BE=function(value,offset,noAssert){return value=+value,offset=offset>>>0,noAssert||checkInt(this,value,offset,2,32767,-32768),this[offset]=value>>>8,this[offset+1]=value&255,offset+2};Buffer3.prototype.writeInt32LE=function(value,offset,noAssert){return value=+value,offset=offset>>>0,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),this[offset]=value&255,this[offset+1]=value>>>8,this[offset+2]=value>>>16,this[offset+3]=value>>>24,offset+4};Buffer3.prototype.writeInt32BE=function(value,offset,noAssert){return value=+value,offset=offset>>>0,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),value<0&&(value=4294967295+value+1),this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=value&255,offset+4};function checkIEEE754(buf,value,offset,ext,max,min){if(offset+ext>buf.length)throw new RangeError("Index out of range");if(offset<0)throw new RangeError("Index out of range")}function writeFloat(buf,value,offset,littleEndian,noAssert){return value=+value,offset=offset>>>0,noAssert||checkIEEE754(buf,value,offset,4,34028234663852886e22,-34028234663852886e22),ieee754.write(buf,value,offset,littleEndian,23,4),offset+4}Buffer3.prototype.writeFloatLE=function(value,offset,noAssert){return writeFloat(this,value,offset,!0,noAssert)};Buffer3.prototype.writeFloatBE=function(value,offset,noAssert){return writeFloat(this,value,offset,!1,noAssert)};function writeDouble(buf,value,offset,littleEndian,noAssert){return value=+value,offset=offset>>>0,noAssert||checkIEEE754(buf,value,offset,8,17976931348623157e292,-17976931348623157e292),ieee754.write(buf,value,offset,littleEndian,52,8),offset+8}Buffer3.prototype.writeDoubleLE=function(value,offset,noAssert){return writeDouble(this,value,offset,!0,noAssert)};Buffer3.prototype.writeDoubleBE=function(value,offset,noAssert){return writeDouble(this,value,offset,!1,noAssert)};Buffer3.prototype.copy=function(target,targetStart,start,end){if(!Buffer3.isBuffer(target))throw new TypeError("argument should be a Buffer");if(start||(start=0),!end&&end!==0&&(end=this.length),targetStart>=target.length&&(targetStart=target.length),targetStart||(targetStart=0),end>0&&end<start&&(end=start),end===start||target.length===0||this.length===0)return 0;if(targetStart<0)throw new RangeError("targetStart out of bounds");if(start<0||start>=this.length)throw new RangeError("Index out of range");if(end<0)throw new RangeError("sourceEnd out of bounds");end>this.length&&(end=this.length),target.length-targetStart<end-start&&(end=target.length-targetStart+start);var len=end-start;return this===target&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(targetStart,start,end):Uint8Array.prototype.set.call(target,this.subarray(start,end),targetStart),len};Buffer3.prototype.fill=function(val,start,end,encoding){if(typeof val=="string"){if(typeof start=="string"?(encoding=start,start=0,end=this.length):typeof end=="string"&&(encoding=end,end=this.length),encoding!==void 0&&typeof encoding!="string")throw new TypeError("encoding must be a string");if(typeof encoding=="string"&&!Buffer3.isEncoding(encoding))throw new TypeError("Unknown encoding: "+encoding);if(val.length===1){var code=val.charCodeAt(0);(encoding==="utf8"&&code<128||encoding==="latin1")&&(val=code)}}else typeof val=="number"?val=val&255:typeof val=="boolean"&&(val=Number(val));if(start<0||this.length<start||this.length<end)throw new RangeError("Out of range index");if(end<=start)return this;start=start>>>0,end=end===void 0?this.length:end>>>0,val||(val=0);var i;if(typeof val=="number")for(i=start;i<end;++i)this[i]=val;else{var bytes=Buffer3.isBuffer(val)?val:Buffer3.from(val,encoding),len=bytes.length;if(len===0)throw new TypeError('The value "'+val+'" is invalid for argument "value"');for(i=0;i<end-start;++i)this[i+start]=bytes[i%len]}return this};var INVALID_BASE64_RE=/[^+/0-9A-Za-z-_]/g;function base64clean(str){if(str=str.split("=")[0],str=str.trim().replace(INVALID_BASE64_RE,""),str.length<2)return"";for(;str.length%4!==0;)str=str+"=";return str}function utf8ToBytes(string,units){units=units||1/0;for(var codePoint,length=string.length,leadSurrogate=null,bytes=[],i=0;i<length;++i){if(codePoint=string.charCodeAt(i),codePoint>55295&&codePoint<57344){if(!leadSurrogate){if(codePoint>56319){(units-=3)>-1&&bytes.push(239,191,189);continue}else if(i+1===length){(units-=3)>-1&&bytes.push(239,191,189);continue}leadSurrogate=codePoint;continue}if(codePoint<56320){(units-=3)>-1&&bytes.push(239,191,189),leadSurrogate=codePoint;continue}codePoint=(leadSurrogate-55296<<10|codePoint-56320)+65536}else leadSurrogate&&(units-=3)>-1&&bytes.push(239,191,189);if(leadSurrogate=null,codePoint<128){if((units-=1)<0)break;bytes.push(codePoint)}else if(codePoint<2048){if((units-=2)<0)break;bytes.push(codePoint>>6|192,codePoint&63|128)}else if(codePoint<65536){if((units-=3)<0)break;bytes.push(codePoint>>12|224,codePoint>>6&63|128,codePoint&63|128)}else if(codePoint<1114112){if((units-=4)<0)break;bytes.push(codePoint>>18|240,codePoint>>12&63|128,codePoint>>6&63|128,codePoint&63|128)}else throw new Error("Invalid code point")}return bytes}function asciiToBytes(str){for(var byteArray=[],i=0;i<str.length;++i)byteArray.push(str.charCodeAt(i)&255);return byteArray}function utf16leToBytes(str,units){for(var c,hi,lo,byteArray=[],i=0;i<str.length&&!((units-=2)<0);++i)c=str.charCodeAt(i),hi=c>>8,lo=c%256,byteArray.push(lo),byteArray.push(hi);return byteArray}function base64ToBytes(str){return base64.toByteArray(base64clean(str))}function blitBuffer(src,dst,offset,length){for(var i=0;i<length&&!(i+offset>=dst.length||i>=src.length);++i)dst[i+offset]=src[i];return i}function isInstance(obj,type){return obj instanceof type||obj!=null&&obj.constructor!=null&&obj.constructor.name!=null&&obj.constructor.name===type.name}function numberIsNaN(obj){return obj!==obj}var hexSliceLookupTable=function(){for(var alphabet="0123456789abcdef",table=new Array(256),i=0;i<16;++i)for(var i16=i*16,j=0;j<16;++j)table[i16+j]=alphabet[i]+alphabet[j];return table}()}});var require_browser=__commonJS({"node_modules/node-stdlib-browser/node_modules/process/browser.js"(exports,module){init_define_process_env();init_shim();var process2=module.exports={},cachedSetTimeout,cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?cachedSetTimeout=setTimeout:cachedSetTimeout=defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{typeof clearTimeout=="function"?cachedClearTimeout=clearTimeout:cachedClearTimeout=defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e2){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e2){return cachedClearTimeout.call(this,marker)}}}var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){!draining||!currentQueue||(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,runClearTimeout(timeout)}}process2.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),queue.length===1&&!draining&&runTimeout(drainQueue)};function Item(fun,array){this.fun=fun,this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process2.title="browser";process2.browser=!0;process2.env={};process2.argv=[];process2.version="";process2.versions={};function noop(){}process2.on=noop;process2.addListener=noop;process2.once=noop;process2.off=noop;process2.removeListener=noop;process2.removeAllListeners=noop;process2.emit=noop;process2.prependListener=noop;process2.prependOnceListener=noop;process2.listeners=function(name){return[]};process2.binding=function(name){throw new Error("process.binding is not supported")};process2.cwd=function(){return"/"};process2.chdir=function(dir){throw new Error("process.chdir is not supported")};process2.umask=function(){return 0}}});var import_buffer,import_process,_globalThis,init_shim=__esm({"node_modules/node-stdlib-browser/helpers/esbuild/shim.js"(){import_buffer=__toESM(require_buffer()),import_process=__toESM(require_browser()),_globalThis=function(Object2){function get(){var _global3=this||self;return delete Object2.prototype.__magic__,_global3}if(typeof globalThis=="object")return globalThis;if(this)return get();Object2.defineProperty(Object2.prototype,"__magic__",{configurable:!0,get});var _global2=__magic__;return _global2}(Object)}});var require_global=__commonJS({"node_modules/core-js/internals/global.js"(exports,module){init_define_process_env();init_shim();var check=function(it){return it&&it.Math==Math&&it};module.exports=check(typeof globalThis=="object"&&globalThis)||check(typeof window=="object"&&window)||check(typeof self=="object"&&self)||check(typeof window=="object"&&window)||function(){return this}()||Function("return this")()}});var require_fails=__commonJS({"node_modules/core-js/internals/fails.js"(exports,module){init_define_process_env();init_shim();module.exports=function(exec){try{return!!exec()}catch(error){return!0}}}});var require_function_bind_native=__commonJS({"node_modules/core-js/internals/function-bind-native.js"(exports,module){init_define_process_env();init_shim();var fails=require_fails();module.exports=!fails(function(){var test=(function(){}).bind();return typeof test!="function"||test.hasOwnProperty("prototype")})}});var require_function_uncurry_this=__commonJS({"node_modules/core-js/internals/function-uncurry-this.js"(exports,module){init_define_process_env();init_shim();var NATIVE_BIND=require_function_bind_native(),FunctionPrototype=Function.prototype,bind=FunctionPrototype.bind,call=FunctionPrototype.call,uncurryThis=NATIVE_BIND&&bind.bind(call,call);module.exports=NATIVE_BIND?function(fn){return fn&&uncurryThis(fn)}:function(fn){return fn&&function(){return call.apply(fn,arguments)}}}});var require_classof_raw=__commonJS({"node_modules/core-js/internals/classof-raw.js"(exports,module){init_define_process_env();init_shim();var uncurryThis=require_function_uncurry_this(),toString=uncurryThis({}.toString),stringSlice=uncurryThis("".slice);module.exports=function(it){return stringSlice(toString(it),8,-1)}}});var require_indexed_object=__commonJS({"node_modules/core-js/internals/indexed-object.js"(exports,module){init_define_process_env();init_shim();var global=require_global(),uncurryThis=require_function_uncurry_this(),fails=require_fails(),classof=require_classof_raw(),Object2=global.Object,split=uncurryThis("".split);module.exports=fails(function(){return!Object2("z").propertyIsEnumerable(0)})?function(it){return classof(it)=="String"?split(it,""):Object2(it)}:Object2}});var require_require_object_coercible=__commonJS({"node_modules/core-js/internals/require-object-coercible.js"(exports,module){init_define_process_env();init_shim();var global=require_global(),TypeError2=global.TypeError;module.exports=function(it){if(it==null)throw TypeError2("Can't call method on "+it);return it}}});var require_to_indexed_object=__commonJS({"node_modules/core-js/internals/to-indexed-object.js"(exports,module){init_define_process_env();init_shim();var IndexedObject=require_indexed_object(),requireObjectCoercible=require_require_object_coercible();module.exports=function(it){return IndexedObject(requireObjectCoercible(it))}}});var require_is_pure=__commonJS({"node_modules/core-js/internals/is-pure.js"(exports,module){init_define_process_env();init_shim();module.exports=!1}});var require_set_global=__commonJS({"node_modules/core-js/internals/set-global.js"(exports,module){init_define_process_env();init_shim();var global=require_global(),defineProperty=Object.defineProperty;module.exports=function(key,value){try{defineProperty(global,key,{value,configurable:!0,writable:!0})}catch(error){global[key]=value}return value}}});var require_shared_store=__commonJS({"node_modules/core-js/internals/shared-store.js"(exports,module){init_define_process_env();init_shim();var global=require_global(),setGlobal=require_set_global(),SHARED="__core-js_shared__",store=global[SHARED]||setGlobal(SHARED,{});module.exports=store}});var require_shared=__commonJS({"node_modules/core-js/internals/shared.js"(exports,module){init_define_process_env();init_shim();var IS_PURE=require_is_pure(),store=require_shared_store();(module.exports=function(key,value){return store[key]||(store[key]=value!==void 0?value:{})})("versions",[]).push({version:"3.20.3",mode:IS_PURE?"pure":"global",copyright:"\xA9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"})}});var require_to_object=__commonJS({"node_modules/core-js/internals/to-object.js"(exports,module){init_define_process_env();init_shim();var global=require_global(),requireObjectCoercible=require_require_object_coercible(),Object2=global.Object;module.exports=function(argument){return Object2(requireObjectCoercible(argument))}}});var require_has_own_property=__commonJS({"node_modules/core-js/internals/has-own-property.js"(exports,module){init_define_process_env();init_shim();var uncurryThis=require_function_uncurry_this(),toObject=require_to_object(),hasOwnProperty2=uncurryThis({}.hasOwnProperty);module.exports=Object.hasOwn||function(it,key){return hasOwnProperty2(toObject(it),key)}}});var require_uid=__commonJS({"node_modules/core-js/internals/uid.js"(exports,module){init_define_process_env();init_shim();var uncurryThis=require_function_uncurry_this(),id=0,postfix=Math.random(),toString=uncurryThis(1 .toString);module.exports=function(key){return"Symbol("+(key===void 0?"":key)+")_"+toString(++id+postfix,36)}}});var require_is_callable=__commonJS({"node_modules/core-js/internals/is-callable.js"(exports,module){init_define_process_env();init_shim();module.exports=function(argument){return typeof argument=="function"}}});var require_get_built_in=__commonJS({"node_modules/core-js/internals/get-built-in.js"(exports,module){init_define_process_env();init_shim();var global=require_global(),isCallable=require_is_callable(),aFunction=function(argument){return isCallable(argument)?argument:void 0};module.exports=function(namespace,method){return arguments.length<2?aFunction(global[namespace]):global[namespace]&&global[namespace][method]}}});var require_engine_user_agent=__commonJS({"node_modules/core-js/internals/engine-user-agent.js"(exports,module){init_define_process_env();init_shim();var getBuiltIn=require_get_built_in();module.exports=getBuiltIn("navigator","userAgent")||""}});var require_engine_v8_version=__commonJS({"node_modules/core-js/internals/engine-v8-version.js"(exports,module){init_define_process_env();init_shim();var global=require_global(),userAgent=require_engine_user_agent(),process2=global.process,Deno=global.Deno,versions=process2&&process2.versions||Deno&&Deno.version,v8=versions&&versions.v8,match,version;v8&&(match=v8.split("."),version=match[0]>0&&match[0]<4?1:+(match[0]+match[1]));!version&&userAgent&&(match=userAgent.match(/Edge\/(\d+)/),(!match||match[1]>=74)&&(match=userAgent.match(/Chrome\/(\d+)/),match&&(version=+match[1])));module.exports=version}});var require_native_symbol=__commonJS({"node_modules/core-js/internals/native-symbol.js"(exports,module){init_define_process_env();init_shim();var V8_VERSION=require_engine_v8_version(),fails=require_fails();module.exports=!!Object.getOwnPropertySymbols&&!fails(function(){var symbol=Symbol();return!String(symbol)||!(Object(symbol)instanceof Symbol)||!Symbol.sham&&V8_VERSION&&V8_VERSION<41})}});var require_use_symbol_as_uid=__commonJS({"node_modules/core-js/internals/use-symbol-as-uid.js"(exports,module){init_define_process_env();init_shim();var NATIVE_SYMBOL=require_native_symbol();module.exports=NATIVE_SYMBOL&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}});var require_well_known_symbol=__commonJS({"node_modules/core-js/internals/well-known-symbol.js"(exports,module){init_define_process_env();init_shim();var global=require_global(),shared=require_shared(),hasOwn=require_has_own_property(),uid=require_uid(),NATIVE_SYMBOL=require_native_symbol(),USE_SYMBOL_AS_UID=require_use_symbol_as_uid(),WellKnownSymbolsStore=shared("wks"),Symbol2=global.Symbol,symbolFor=Symbol2&&Symbol2.for,createWellKnownSymbol=USE_SYMBOL_AS_UID?Symbol2:Symbol2&&Symbol2.withoutSetter||uid;module.exports=function(name){if(!hasOwn(WellKnownSymbolsStore,name)||!(NATIVE_SYMBOL||typeof WellKnownSymbolsStore[name]=="string")){var description="Symbol."+name;NATIVE_SYMBOL&&hasOwn(Symbol2,name)?WellKnownSymbolsStore[name]=Symbol2[name]:USE_SYMBOL_AS_UID&&symbolFor?WellKnownSymbolsStore[name]=symbolFor(description):WellKnownSymbolsStore[name]=createWellKnownSymbol(description)}return WellKnownSymbolsStore[name]}}});var require_is_object=__commonJS({"node_modules/core-js/internals/is-object.js"(exports,module){init_define_process_env();init_shim();var isCallable=require_is_callable();module.exports=function(it){return typeof it=="object"?it!==null:isCallable(it)}}});var require_an_object=__commonJS({"node_modules/core-js/internals/an-object.js"(exports,module){init_define_process_env();init_shim();var global=require_global(),isObject=require_is_object(),String2=global.String,TypeError2=global.TypeError;module.exports=function(argument){if(isObject(argument))return argument;throw TypeError2(String2(argument)+" is not an object")}}});var require_descriptors=__commonJS({"node_modules/core-js/internals/descriptors.js"(exports,module){init_define_process_env();init_shim();var fails=require_fails();module.exports=!fails(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})}});var require_v8_prototype_define_bug=__commonJS({"node_modules/core-js/internals/v8-prototype-define-bug.js"(exports,module){init_define_process_env();init_shim();var DESCRIPTORS=require_descriptors(),fails=require_fails();module.exports=DESCRIPTORS&&fails(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})}});var require_document_create_element=__commonJS({"node_modules/core-js/internals/document-create-element.js"(exports,module){init_define_process_env();init_shim();var global=require_global(),isObject=require_is_object(),document2=global.document,EXISTS=isObject(document2)&&isObject(document2.createElement);module.exports=function(it){return EXISTS?document2.createElement(it):{}}}});var require_ie8_dom_define=__commonJS({"node_modules/core-js/internals/ie8-dom-define.js"(exports,module){init_define_process_env();init_shim();var DESCRIPTORS=require_descriptors(),fails=require_fails(),createElement2=require_document_create_element();module.exports=!DESCRIPTORS&&!fails(function(){return Object.defineProperty(createElement2("div"),"a",{get:function(){return 7}}).a!=7})}});var require_function_call=__commonJS({"node_modules/core-js/internals/function-call.js"(exports,module){init_define_process_env();init_shim();var NATIVE_BIND=require_function_bind_native(),call=Function.prototype.call;module.exports=NATIVE_BIND?call.bind(call):function(){return call.apply(call,arguments)}}});var require_object_is_prototype_of=__commonJS({"node_modules/core-js/internals/object-is-prototype-of.js"(exports,module){init_define_process_env();init_shim();var uncurryThis=require_function_uncurry_this();module.exports=uncurryThis({}.isPrototypeOf)}});var require_is_symbol=__commonJS({"node_modules/core-js/internals/is-symbol.js"(exports,module){init_define_process_env();init_shim();var global=require_global(),getBuiltIn=require_get_built_in(),isCallable=require_is_callable(),isPrototypeOf=require_object_is_prototype_of(),USE_SYMBOL_AS_UID=require_use_symbol_as_uid(),Object2=global.Object;module.exports=USE_SYMBOL_AS_UID?function(it){return typeof it=="symbol"}:function(it){var $Symbol=getBuiltIn("Symbol");return isCallable($Symbol)&&isPrototypeOf($Symbol.prototype,Object2(it))}}});var require_try_to_string=__commonJS({"node_modules/core-js/internals/try-to-string.js"(exports,module){init_define_process_env();init_shim();var global=require_global(),String2=global.String;module.exports=function(argument){try{return String2(argument)}catch(error){return"Object"}}}});var require_a_callable=__commonJS({"node_modules/core-js/internals/a-callable.js"(exports,module){init_define_process_env();init_shim();var global=require_global(),isCallable=require_is_callable(),tryToString=require_try_to_string(),TypeError2=global.TypeError;module.exports=function(argument){if(isCallable(argument))return argument;throw TypeError2(tryToString(argument)+" is not a function")}}});var require_get_method=__commonJS({"node_modules/core-js/internals/get-method.js"(exports,module){init_define_process_env();init_shim();var aCallable=require_a_callable();module.exports=function(V,P){var func=V[P];return func==null?void 0:aCallable(func)}}});var require_ordinary_to_primitive=__commonJS({"node_modules/core-js/internals/ordinary-to-primitive.js"(exports,module){init_define_process_env();init_shim();var global=require_global(),call=require_function_call(),isCallable=require_is_callable(),isObject=require_is_object(),TypeError2=global.TypeError;module.exports=function(input,pref){var fn,val;if(pref==="string"&&isCallable(fn=input.toString)&&!isObject(val=call(fn,input))||isCallable(fn=input.valueOf)&&!isObject(val=call(fn,input))||pref!=="string"&&isCallable(fn=input.toString)&&!isObject(val=call(fn,input)))return val;throw TypeError2("Can't convert object to primitive value")}}});var require_to_primitive=__commonJS({"node_modules/core-js/internals/to-primitive.js"(exports,module){init_define_process_env();init_shim();var global=require_global(),call=require_function_call(),isObject=require_is_object(),isSymbol=require_is_symbol(),getMethod=require_get_method(),ordinaryToPrimitive=require_ordinary_to_primitive(),wellKnownSymbol=require_well_known_symbol(),TypeError2=global.TypeError,TO_PRIMITIVE=wellKnownSymbol("toPrimitive");module.exports=function(input,pref){if(!isObject(input)||isSymbol(input))return input;var exoticToPrim=getMethod(input,TO_PRIMITIVE),result;if(exoticToPrim){if(pref===void 0&&(pref="default"),result=call(exoticToPrim,input,pref),!isObject(result)||isSymbol(result))return result;throw TypeError2("Can't convert object to primitive value")}return pref===void 0&&(pref="number"),ordinaryToPrimitive(input,pref)}}});var require_to_property_key=__commonJS({"node_modules/core-js/internals/to-property-key.js"(exports,module){init_define_process_env();init_shim();var toPrimitive=require_to_primitive(),isSymbol=require_is_symbol();module.exports=function(argument){var key=toPrimitive(argument,"string");return isSymbol(key)?key:key+""}}});var require_object_define_property=__commonJS({"node_modules/core-js/internals/object-define-property.js"(exports){init_define_process_env();init_shim();var global=require_global(),DESCRIPTORS=require_descriptors(),IE8_DOM_DEFINE=require_ie8_dom_define(),V8_PROTOTYPE_DEFINE_BUG=require_v8_prototype_define_bug(),anObject=require_an_object(),toPropertyKey=require_to_property_key(),TypeError2=global.TypeError,$defineProperty=Object.defineProperty,$getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,ENUMERABLE="enumerable",CONFIGURABLE="configurable",WRITABLE="writable";exports.f=DESCRIPTORS?V8_PROTOTYPE_DEFINE_BUG?function(O,P,Attributes){if(anObject(O),P=toPropertyKey(P),anObject(Attributes),typeof O=="function"&&P==="prototype"&&"value"in Attributes&&WRITABLE in Attributes&&!Attributes[WRITABLE]){var current=$getOwnPropertyDescriptor(O,P);current&&current[WRITABLE]&&(O[P]=Attributes.value,Attributes={configurable:CONFIGURABLE in Attributes?Attributes[CONFIGURABLE]:current[CONFIGURABLE],enumerable:ENUMERABLE in Attributes?Attributes[ENUMERABLE]:current[ENUMERABLE],writable:!1})}return $defineProperty(O,P,Attributes)}:$defineProperty:function(O,P,Attributes){if(anObject(O),P=toPropertyKey(P),anObject(Attributes),IE8_DOM_DEFINE)try{return $defineProperty(O,P,Attributes)}catch(error){}if("get"in Attributes||"set"in Attributes)throw TypeError2("Accessors not supported");return"value"in Attributes&&(O[P]=Attributes.value),O}}});var require_to_integer_or_infinity=__commonJS({"node_modules/core-js/internals/to-integer-or-infinity.js"(exports,module){init_define_process_env();init_shim();var ceil=Math.ceil,floor=Math.floor;module.exports=function(argument){var number=+argument;return number!==number||number===0?0:(number>0?floor:ceil)(number)}}});var require_to_absolute_index=__commonJS({"node_modules/core-js/internals/to-absolute-index.js"(exports,module){init_define_process_env();init_shim();var toIntegerOrInfinity=require_to_integer_or_infinity(),max=Math.max,min=Math.min;module.exports=function(index,length){var integer=toIntegerOrInfinity(index);return integer<0?max(integer+length,0):min(integer,length)}}});var require_to_length=__commonJS({"node_modules/core-js/internals/to-length.js"(exports,module){init_define_process_env();init_shim();var toIntegerOrInfinity=require_to_integer_or_infinity(),min=Math.min;module.exports=function(argument){return argument>0?min(toIntegerOrInfinity(argument),9007199254740991):0}}});var require_length_of_array_like=__commonJS({"node_modules/core-js/internals/length-of-array-like.js"(exports,module){init_define_process_env();init_shim();var toLength=require_to_length();module.exports=function(obj){return toLength(obj.length)}}});var require_array_includes=__commonJS({"node_modules/core-js/internals/array-includes.js"(exports,module){init_define_process_env();init_shim();var toIndexedObject=require_to_indexed_object(),toAbsoluteIndex=require_to_absolute_index(),lengthOfArrayLike=require_length_of_array_like(),createMethod=function(IS_INCLUDES){return function($this,el,fromIndex){var O=toIndexedObject($this),length=lengthOfArrayLike(O),index=toAbsoluteIndex(fromIndex,length),value;if(IS_INCLUDES&&el!=el){for(;length>index;)if(value=O[index++],value!=value)return!0}else for(;length>index;index++)if((IS_INCLUDES||index in O)&&O[index]===el)return IS_INCLUDES||index||0;return!IS_INCLUDES&&-1}};module.exports={includes:createMethod(!0),indexOf:createMethod(!1)}}});var require_hidden_keys=__commonJS({"node_modules/core-js/internals/hidden-keys.js"(exports,module){init_define_process_env();init_shim();module.exports={}}});var require_object_keys_internal=__commonJS({"node_modules/core-js/internals/object-keys-internal.js"(exports,module){init_define_process_env();init_shim();var uncurryThis=require_function_uncurry_this(),hasOwn=require_has_own_property(),toIndexedObject=require_to_indexed_object(),indexOf=require_array_includes().indexOf,hiddenKeys=require_hidden_keys(),push=uncurryThis([].push);module.exports=function(object2,names){var O=toIndexedObject(object2),i=0,result=[],key;for(key in O)!hasOwn(hiddenKeys,key)&&hasOwn(O,key)&&push(result,key);for(;names.length>i;)hasOwn(O,key=names[i++])&&(~indexOf(result,key)||push(result,key));return result}}});var require_enum_bug_keys=__commonJS({"node_modules/core-js/internals/enum-bug-keys.js"(exports,module){init_define_process_env();init_shim();module.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]}});var require_object_keys=__commonJS({"node_modules/core-js/internals/object-keys.js"(exports,module){init_define_process_env();init_shim();var internalObjectKeys=require_object_keys_internal(),enumBugKeys=require_enum_bug_keys();module.exports=Object.keys||function(O){return internalObjectKeys(O,enumBugKeys)}}});var require_object_define_properties=__commonJS({"node_modules/core-js/internals/object-define-properties.js"(exports){init_define_process_env();init_shim();var DESCRIPTORS=require_descriptors(),V8_PROTOTYPE_DEFINE_BUG=require_v8_prototype_define_bug(),definePropertyModule=require_object_define_property(),anObject=require_an_object(),toIndexedObject=require_to_indexed_object(),objectKeys=require_object_keys();exports.f=DESCRIPTORS&&!V8_PROTOTYPE_DEFINE_BUG?Object.defineProperties:function(O,Properties2){anObject(O);for(var props=toIndexedObject(Properties2),keys=objectKeys(Properties2),length=keys.length,index=0,key;length>index;)definePropertyModule.f(O,key=keys[index++],props[key]);return O}}});var require_html=__commonJS({"node_modules/core-js/internals/html.js"(exports,module){init_define_process_env();init_shim();var getBuiltIn=require_get_built_in();module.exports=getBuiltIn("document","documentElement")}});var require_shared_key=__commonJS({"node_modules/core-js/internals/shared-key.js"(exports,module){init_define_process_env();init_shim();var shared=require_shared(),uid=require_uid(),keys=shared("keys");module.exports=function(key){return keys[key]||(keys[key]=uid(key))}}});var require_object_create=__commonJS({"node_modules/core-js/internals/object-create.js"(exports,module){init_define_process_env();init_shim();var anObject=require_an_object(),definePropertiesModule=require_object_define_properties(),enumBugKeys=require_enum_bug_keys(),hiddenKeys=require_hidden_keys(),html=require_html(),documentCreateElement=require_document_create_element(),sharedKey=require_shared_key(),GT=">",LT="<",PROTOTYPE="prototype",SCRIPT="script",IE_PROTO=sharedKey("IE_PROTO"),EmptyConstructor=function(){},scriptTag=function(content){return LT+SCRIPT+GT+content+LT+"/"+SCRIPT+GT},NullProtoObjectViaActiveX=function(activeXDocument2){activeXDocument2.write(scriptTag("")),activeXDocument2.close();var temp=activeXDocument2.parentWindow.Object;return activeXDocument2=null,temp},NullProtoObjectViaIFrame=function(){var iframe=documentCreateElement("iframe"),JS="java"+SCRIPT+":",iframeDocument;return iframe.style.display="none",html.appendChild(iframe),iframe.src=String(JS),iframeDocument=iframe.contentWindow.document,iframeDocument.open(),iframeDocument.write(scriptTag("document.F=Object")),iframeDocument.close(),iframeDocument.F},activeXDocument,NullProtoObject=function(){try{activeXDocument=new ActiveXObject("htmlfile")}catch(error){}NullProtoObject=typeof document<"u"?document.domain&&activeXDocument?NullProtoObjectViaActiveX(activeXDocument):NullProtoObjectViaIFrame():NullProtoObjectViaActiveX(activeXDocument);for(var length=enumBugKeys.length;length--;)delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];return NullProtoObject()};hiddenKeys[IE_PROTO]=!0;module.exports=Object.create||function(O,Properties2){var result;return O!==null?(EmptyConstructor[PROTOTYPE]=anObject(O),result=new EmptyConstructor,EmptyConstructor[PROTOTYPE]=null,result[IE_PROTO]=O):result=NullProtoObject(),Properties2===void 0?result:definePropertiesModule.f(result,Properties2)}}});var require_add_to_unscopables=__commonJS({"node_modules/core-js/internals/add-to-unscopables.js"(exports,module){init_define_process_env();init_shim();var wellKnownSymbol=require_well_known_symbol(),create=require_object_create(),definePropertyModule=require_object_define_property(),UNSCOPABLES=wellKnownSymbol("unscopables"),ArrayPrototype=Array.prototype;ArrayPrototype[UNSCOPABLES]==null&&definePropertyModule.f(ArrayPrototype,UNSCOPABLES,{configurable:!0,value:create(null)});module.exports=function(key){ArrayPrototype[UNSCOPABLES][key]=!0}}});var require_iterators=__commonJS({"node_modules/core-js/internals/iterators.js"(exports,module){init_define_process_env();init_shim();module.exports={}}});var require_inspect_source=__commonJS({"node_modules/core-js/internals/inspect-source.js"(exports,module){init_define_process_env();init_shim();var uncurryThis=require_function_uncurry_this(),isCallable=require_is_callable(),store=require_shared_store(),functionToString=uncurryThis(Function.toString);isCallable(store.inspectSource)||(store.inspectSource=function(it){return functionToString(it)});module.exports=store.inspectSource}});var require_native_weak_map=__commonJS({"node_modules/core-js/internals/native-weak-map.js"(exports,module){init_define_process_env();init_shim();var global=require_global(),isCallable=require_is_callable(),inspectSource=require_inspect_source(),WeakMap2=global.WeakMap;module.exports=isCallable(WeakMap2)&&/native code/.test(inspectSource(WeakMap2))}});var require_create_property_descriptor=__commonJS({"node_modules/core-js/internals/create-property-descriptor.js"(exports,module){init_define_process_env();init_shim();module.exports=function(bitmap,value){return{enumerable:!(bitmap&1),configurable:!(bitmap&2),writable:!(bitmap&4),value}}}});var require_create_non_enumerable_property=__commonJS({"node_modules/core-js/internals/create-non-enumerable-property.js"(exports,module){init_define_process_env();init_shim();var DESCRIPTORS=require_descriptors(),definePropertyModule=require_object_define_property(),createPropertyDescriptor=require_create_property_descriptor();module.exports=DESCRIPTORS?function(object2,key,value){return definePropertyModule.f(object2,key,createPropertyDescriptor(1,value))}:function(object2,key,value){return object2[key]=value,object2}}});var require_internal_state=__commonJS({"node_modules/core-js/internals/internal-state.js"(exports,module){init_define_process_env();init_shim();var NATIVE_WEAK_MAP=require_native_weak_map(),global=require_global(),uncurryThis=require_function_uncurry_this(),isObject=require_is_object(),createNonEnumerableProperty=require_create_non_enumerable_property(),hasOwn=require_has_own_property(),shared=require_shared_store(),sharedKey=require_shared_key(),hiddenKeys=require_hidden_keys(),OBJECT_ALREADY_INITIALIZED="Object already initialized",TypeError2=global.TypeError,WeakMap2=global.WeakMap,set,get,has,enforce=function(it){return has(it)?get(it):set(it,{})},getterFor=function(TYPE){return function(it){var state;if(!isObject(it)||(state=get(it)).type!==TYPE)throw TypeError2("Incompatible receiver, "+TYPE+" required");return state}};NATIVE_WEAK_MAP||shared.state?(store=shared.state||(shared.state=new WeakMap2),wmget=uncurryThis(store.get),wmhas=uncurryThis(store.has),wmset=uncurryThis(store.set),set=function(it,metadata){if(wmhas(store,it))throw new TypeError2(OBJECT_ALREADY_INITIALIZED);return metadata.facade=it,wmset(store,it,metadata),metadata},get=function(it){return wmget(store,it)||{}},has=function(it){return wmhas(store,it)}):(STATE=sharedKey("state"),hiddenKeys[STATE]=!0,set=function(it,metadata){if(hasOwn(it,STATE))throw new TypeError2(OBJECT_ALREADY_INITIALIZED);return metadata.facade=it,createNonEnumerableProperty(it,STATE,metadata),metadata},get=function(it){return hasOwn(it,STATE)?it[STATE]:{}},has=function(it){return hasOwn(it,STATE)});var store,wmget,wmhas,wmset,STATE;module.exports={set,get,has,enforce,getterFor}}});var require_object_property_is_enumerable=__commonJS({"node_modules/core-js/internals/object-property-is-enumerable.js"(exports){"use strict";init_define_process_env();init_shim();var $propertyIsEnumerable={}.propertyIsEnumerable,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,NASHORN_BUG=getOwnPropertyDescriptor&&!$propertyIsEnumerable.call({1:2},1);exports.f=NASHORN_BUG?function(V){var descriptor=getOwnPropertyDescriptor(this,V);return!!descriptor&&descriptor.enumerable}:$propertyIsEnumerable}});var require_object_get_own_property_descriptor=__commonJS({"node_modules/core-js/internals/object-get-own-property-descriptor.js"(exports){init_define_process_env();init_shim();var DESCRIPTORS=require_descriptors(),call=require_function_call(),propertyIsEnumerableModule=require_object_property_is_enumerable(),createPropertyDescriptor=require_create_property_descriptor(),toIndexedObject=require_to_indexed_object(),toPropertyKey=require_to_property_key(),hasOwn=require_has_own_property(),IE8_DOM_DEFINE=require_ie8_dom_define(),$getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;exports.f=DESCRIPTORS?$getOwnPropertyDescriptor:function(O,P){if(O=toIndexedObject(O),P=toPropertyKey(P),IE8_DOM_DEFINE)try{return $getOwnPropertyDescriptor(O,P)}catch(error){}if(hasOwn(O,P))return createPropertyDescriptor(!call(propertyIsEnumerableModule.f,O,P),O[P])}}});var require_function_name=__commonJS({"node_modules/core-js/internals/function-name.js"(exports,module){init_define_process_env();init_shim();var DESCRIPTORS=require_descriptors(),hasOwn=require_has_own_property(),FunctionPrototype=Function.prototype,getDescriptor=DESCRIPTORS&&Object.getOwnPropertyDescriptor,EXISTS=hasOwn(FunctionPrototype,"name"),PROPER=EXISTS&&(function(){}).name==="something",CONFIGURABLE=EXISTS&&(!DESCRIPTORS||DESCRIPTORS&&getDescriptor(FunctionPrototype,"name").configurable);module.exports={EXISTS,PROPER,CONFIGURABLE}}});var require_redefine=__commonJS({"node_modules/core-js/internals/redefine.js"(exports,module){init_define_process_env();init_shim();var global=require_global(),isCallable=require_is_callable(),hasOwn=require_has_own_property(),createNonEnumerableProperty=require_create_non_enumerable_property(),setGlobal=require_set_global(),inspectSource=require_inspect_source(),InternalStateModule=require_internal_state(),CONFIGURABLE_FUNCTION_NAME=require_function_name().CONFIGURABLE,getInternalState=InternalStateModule.get,enforceInternalState=InternalStateModule.enforce,TEMPLATE=String(String).split("String");(module.exports=function(O,key,value,options){var unsafe=options?!!options.unsafe:!1,simple=options?!!options.enumerable:!1,noTargetGet=options?!!options.noTargetGet:!1,name=options&&options.name!==void 0?options.name:key,state;if(isCallable(value)&&(String(name).slice(0,7)==="Symbol("&&(name="["+String(name).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!hasOwn(value,"name")||CONFIGURABLE_FUNCTION_NAME&&value.name!==name)&&createNonEnumerableProperty(value,"name",name),state=enforceInternalState(value),state.source||(state.source=TEMPLATE.join(typeof name=="string"?name:""))),O===global){simple?O[key]=value:setGlobal(key,value);return}else unsafe?!noTargetGet&&O[key]&&(simple=!0):delete O[key];simple?O[key]=value:createNonEnumerableProperty(O,key,value)})(Function.prototype,"toString",function(){return isCallable(this)&&getInternalState(this).source||inspectSource(this)})}});var require_object_get_own_property_names=__commonJS({"node_modules/core-js/internals/object-get-own-property-names.js"(exports){init_define_process_env();init_shim();var internalObjectKeys=require_object_keys_internal(),enumBugKeys=require_enum_bug_keys(),hiddenKeys=enumBugKeys.concat("length","prototype");exports.f=Object.getOwnPropertyNames||function(O){return internalObjectKeys(O,hiddenKeys)}}});var require_object_get_own_property_symbols=__commonJS({"node_modules/core-js/internals/object-get-own-property-symbols.js"(exports){init_define_process_env();init_shim();exports.f=Object.getOwnPropertySymbols}});var require_own_keys=__commonJS({"node_modules/core-js/internals/own-keys.js"(exports,module){init_define_process_env();init_shim();var getBuiltIn=require_get_built_in(),uncurryThis=require_function_uncurry_this(),getOwnPropertyNamesModule=require_object_get_own_property_names(),getOwnPropertySymbolsModule=require_object_get_own_property_symbols(),anObject=require_an_object(),concat=uncurryThis([].concat);module.exports=getBuiltIn("Reflect","ownKeys")||function(it){var keys=getOwnPropertyNamesModule.f(anObject(it)),getOwnPropertySymbols=getOwnPropertySymbolsModule.f;return getOwnPropertySymbols?concat(keys,getOwnPropertySymbols(it)):keys}}});var require_copy_constructor_properties=__commonJS({"node_modules/core-js/internals/copy-constructor-properties.js"(exports,module){init_define_process_env();init_shim();var hasOwn=require_has_own_property(),ownKeys2=require_own_keys(),getOwnPropertyDescriptorModule=require_object_get_own_property_descriptor(),definePropertyModule=require_object_define_property();module.exports=function(target,source,exceptions){for(var keys=ownKeys2(source),defineProperty=definePropertyModule.f,getOwnPropertyDescriptor=getOwnPropertyDescriptorModule.f,i=0;i<keys.length;i++){var key=keys[i];!hasOwn(target,key)&&!(exceptions&&hasOwn(exceptions,key))&&defineProperty(target,key,getOwnPropertyDescriptor(source,key))}}}});var require_is_forced=__commonJS({"node_modules/core-js/internals/is-forced.js"(exports,module){init_define_process_env();init_shim();var fails=require_fails(),isCallable=require_is_callable(),replacement=/#|\.prototype\./,isForced=function(feature,detection){var value=data[normalize(feature)];return value==POLYFILL?!0:value==NATIVE?!1:isCallable(detection)?fails(detection):!!detection},normalize=isForced.normalize=function(string){return String(string).replace(replacement,".").toLowerCase()},data=isForced.data={},NATIVE=isForced.NATIVE="N",POLYFILL=isForced.POLYFILL="P";module.exports=isForced}});var require_export=__commonJS({"node_modules/core-js/internals/export.js"(exports,module){init_define_process_env();init_shim();var global=require_global(),getOwnPropertyDescriptor=require_object_get_own_property_descriptor().f,createNonEnumerableProperty=require_create_non_enumerable_property(),redefine=require_redefine(),setGlobal=require_set_global(),copyConstructorProperties=require_copy_constructor_properties(),isForced=require_is_forced();module.exports=function(options,source){var TARGET=options.target,GLOBAL=options.global,STATIC=options.stat,FORCED,target,key,targetProperty,sourceProperty,descriptor;if(GLOBAL?target=global:STATIC?target=global[TARGET]||setGlobal(TARGET,{}):target=(global[TARGET]||{}).prototype,target)for(key in source){if(sourceProperty=source[key],options.noTargetGet?(descriptor=getOwnPropertyDescriptor(target,key),targetProperty=descriptor&&descriptor.value):targetProperty=target[key],FORCED=isForced(GLOBAL?key:TARGET+(STATIC?".":"#")+key,options.forced),!FORCED&&targetProperty!==void 0){if(typeof sourceProperty==typeof targetProperty)continue;copyConstructorProperties(sourceProperty,targetProperty)}(options.sham||targetProperty&&targetProperty.sham)&&createNonEnumerableProperty(sourceProperty,"sham",!0),redefine(target,key,sourceProperty,options)}}}});var require_correct_prototype_getter=__commonJS({"node_modules/core-js/internals/correct-prototype-getter.js"(exports,module){init_define_process_env();init_shim();var fails=require_fails();module.exports=!fails(function(){function F(){}return F.prototype.constructor=null,Object.getPrototypeOf(new F)!==F.prototype})}});var require_object_get_prototype_of=__commonJS({"node_modules/core-js/internals/object-get-prototype-of.js"(exports,module){init_define_process_env();init_shim();var global=require_global(),hasOwn=require_has_own_property(),isCallable=require_is_callable(),toObject=require_to_object(),sharedKey=require_shared_key(),CORRECT_PROTOTYPE_GETTER=require_correct_prototype_getter(),IE_PROTO=sharedKey("IE_PROTO"),Object2=global.Object,ObjectPrototype=Object2.prototype;module.exports=CORRECT_PROTOTYPE_GETTER?Object2.getPrototypeOf:function(O){var object2=toObject(O);if(hasOwn(object2,IE_PROTO))return object2[IE_PROTO];var constructor=object2.constructor;return isCallable(constructor)&&object2 instanceof constructor?constructor.prototype:object2 instanceof Object2?ObjectPrototype:null}}});var require_iterators_core=__commonJS({"node_modules/core-js/internals/iterators-core.js"(exports,module){"use strict";init_define_process_env();init_shim();var fails=require_fails(),isCallable=require_is_callable(),create=require_object_create(),getPrototypeOf=require_object_get_prototype_of(),redefine=require_redefine(),wellKnownSymbol=require_well_known_symbol(),IS_PURE=require_is_pure(),ITERATOR=wellKnownSymbol("iterator"),BUGGY_SAFARI_ITERATORS=!1,IteratorPrototype,PrototypeOfArrayIteratorPrototype,arrayIterator;[].keys&&(arrayIterator=[].keys(),"next"in arrayIterator?(PrototypeOfArrayIteratorPrototype=getPrototypeOf(getPrototypeOf(arrayIterator)),PrototypeOfArrayIteratorPrototype!==Object.prototype&&(IteratorPrototype=PrototypeOfArrayIteratorPrototype)):BUGGY_SAFARI_ITERATORS=!0);var NEW_ITERATOR_PROTOTYPE=IteratorPrototype==null||fails(function(){var test={};return IteratorPrototype[ITERATOR].call(test)!==test});NEW_ITERATOR_PROTOTYPE?IteratorPrototype={}:IS_PURE&&(IteratorPrototype=create(IteratorPrototype));isCallable(IteratorPrototype[ITERATOR])||redefine(IteratorPrototype,ITERATOR,function(){return this});module.exports={IteratorPrototype,BUGGY_SAFARI_ITERATORS}}});var require_set_to_string_tag=__commonJS({"node_modules/core-js/internals/set-to-string-tag.js"(exports,module){init_define_process_env();init_shim();var defineProperty=require_object_define_property().f,hasOwn=require_has_own_property(),wellKnownSymbol=require_well_known_symbol(),TO_STRING_TAG=wellKnownSymbol("toStringTag");module.exports=function(target,TAG,STATIC){target&&!STATIC&&(target=target.prototype),target&&!hasOwn(target,TO_STRING_TAG)&&defineProperty(target,TO_STRING_TAG,{configurable:!0,value:TAG})}}});var require_create_iterator_constructor=__commonJS({"node_modules/core-js/internals/create-iterator-constructor.js"(exports,module){"use strict";init_define_process_env();init_shim();var IteratorPrototype=require_iterators_core().IteratorPrototype,create=require_object_create(),createPropertyDescriptor=require_create_property_descriptor(),setToStringTag=require_set_to_string_tag(),Iterators=require_iterators(),returnThis=function(){return this};module.exports=function(IteratorConstructor,NAME,next,ENUMERABLE_NEXT){var TO_STRING_TAG=NAME+" Iterator";return IteratorConstructor.prototype=create(IteratorPrototype,{next:createPropertyDescriptor(+!ENUMERABLE_NEXT,next)}),setToStringTag(IteratorConstructor,TO_STRING_TAG,!1,!0),Iterators[TO_STRING_TAG]=returnThis,IteratorConstructor}}});var require_a_possible_prototype=__commonJS({"node_modules/core-js/internals/a-possible-prototype.js"(exports,module){init_define_process_env();init_shim();var global=require_global(),isCallable=require_is_callable(),String2=global.String,TypeError2=global.TypeError;module.exports=function(argument){if(typeof argument=="object"||isCallable(argument))return argument;throw TypeError2("Can't set "+String2(argument)+" as a prototype")}}});var require_object_set_prototype_of=__commonJS({"node_modules/core-js/internals/object-set-prototype-of.js"(exports,module){init_define_process_env();init_shim();var uncurryThis=require_function_uncurry_this(),anObject=require_an_object(),aPossiblePrototype=require_a_possible_prototype();module.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var CORRECT_SETTER=!1,test={},setter;try{setter=uncurryThis(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),setter(test,[]),CORRECT_SETTER=test instanceof Array}catch(error){}return function(O,proto){return anObject(O),aPossiblePrototype(proto),CORRECT_SETTER?setter(O,proto):O.__proto__=proto,O}}():void 0)}});var require_define_iterator=__commonJS({"node_modules/core-js/internals/define-iterator.js"(exports,module){"use strict";init_define_process_env();init_shim();var $2=require_export(),call=require_function_call(),IS_PURE=require_is_pure(),FunctionName=require_function_name(),isCallable=require_is_callable(),createIteratorConstructor=require_create_iterator_constructor(),getPrototypeOf=require_object_get_prototype_of(),setPrototypeOf=require_object_set_prototype_of(),setToStringTag=require_set_to_string_tag(),createNonEnumerableProperty=require_create_non_enumerable_property(),redefine=require_redefine(),wellKnownSymbol=require_well_known_symbol(),Iterators=require_iterators(),IteratorsCore=require_iterators_core(),PROPER_FUNCTION_NAME=FunctionName.PROPER,CONFIGURABLE_FUNCTION_NAME=FunctionName.CONFIGURABLE,IteratorPrototype=IteratorsCore.IteratorPrototype,BUGGY_SAFARI_ITERATORS=IteratorsCore.BUGGY_SAFARI_ITERATORS,ITERATOR=wellKnownSymbol("iterator"),KEYS="keys",VALUES="values",ENTRIES="entries",returnThis=function(){return this};module.exports=function(Iterable,NAME,IteratorConstructor,next,DEFAULT,IS_SET,FORCED){createIteratorConstructor(IteratorConstructor,NAME,next);var getIterationMethod=function(KIND){if(KIND===DEFAULT&&defaultIterator)return defaultIterator;if(!BUGGY_SAFARI_ITERATORS&&KIND in IterablePrototype)return IterablePrototype[KIND];switch(KIND){case KEYS:return function(){return new IteratorConstructor(this,KIND)};case VALUES:return function(){return new IteratorConstructor(this,KIND)};case ENTRIES:return function(){return new IteratorConstructor(this,KIND)}}return function(){return new IteratorConstructor(this)}},TO_STRING_TAG=NAME+" Iterator",INCORRECT_VALUES_NAME=!1,IterablePrototype=Iterable.prototype,nativeIterator=IterablePrototype[ITERATOR]||IterablePrototype["@@iterator"]||DEFAULT&&IterablePrototype[DEFAULT],defaultIterator=!BUGGY_SAFARI_ITERATORS&&nativeIterator||getIterationMethod(DEFAULT),anyNativeIterator=NAME=="Array"&&IterablePrototype.entries||nativeIterator,CurrentIteratorPrototype,methods,KEY;if(anyNativeIterator&&(CurrentIteratorPrototype=getPrototypeOf(anyNativeIterator.call(new Iterable)),CurrentIteratorPrototype!==Object.prototype&&CurrentIteratorPrototype.next&&(!IS_PURE&&getPrototypeOf(CurrentIteratorPrototype)!==IteratorPrototype&&(setPrototypeOf?setPrototypeOf(CurrentIteratorPrototype,IteratorPrototype):isCallable(CurrentIteratorPrototype[ITERATOR])||redefine(CurrentIteratorPrototype,ITERATOR,returnThis)),setToStringTag(CurrentIteratorPrototype,TO_STRING_TAG,!0,!0),IS_PURE&&(Iterators[TO_STRING_TAG]=returnThis))),PROPER_FUNCTION_NAME&&DEFAULT==VALUES&&nativeIterator&&nativeIterator.name!==VALUES&&(!IS_PURE&&CONFIGURABLE_FUNCTION_NAME?createNonEnumerableProperty(IterablePrototype,"name",VALUES):(INCORRECT_VALUES_NAME=!0,defaultIterator=function(){return call(nativeIterator,this)})),DEFAULT)if(methods={values:getIterationMethod(VALUES),keys:IS_SET?defaultIterator:getIterationMethod(KEYS),entries:getIterationMethod(ENTRIES)},FORCED)for(KEY in methods)(BUGGY_SAFARI_ITERATORS||INCORRECT_VALUES_NAME||!(KEY in IterablePrototype))&&redefine(IterablePrototype,KEY,methods[KEY]);else $2({target:NAME,proto:!0,forced:BUGGY_SAFARI_ITERATORS||INCORRECT_VALUES_NAME},methods);return(!IS_PURE||FORCED)&&IterablePrototype[ITERATOR]!==defaultIterator&&redefine(IterablePrototype,ITERATOR,defaultIterator,{name:DEFAULT}),Iterators[NAME]=defaultIterator,methods}}});var require_es_array_iterator=__commonJS({"node_modules/core-js/modules/es.array.iterator.js"(exports,module){"use strict";init_define_process_env();init_shim();var toIndexedObject=require_to_indexed_object(),addToUnscopables=require_add_to_unscopables(),Iterators=require_iterators(),InternalStateModule=require_internal_state(),defineProperty=require_object_define_property().f,defineIterator=require_define_iterator(),IS_PURE=require_is_pure(),DESCRIPTORS=require_descriptors(),ARRAY_ITERATOR="Array Iterator",setInternalState=InternalStateModule.set,getInternalState=InternalStateModule.getterFor(ARRAY_ITERATOR);module.exports=defineIterator(Array,"Array",function(iterated,kind){setInternalState(this,{type:ARRAY_ITERATOR,target:toIndexedObject(iterated),index:0,kind})},function(){var state=getInternalState(this),target=state.target,kind=state.kind,index=state.index++;return!target||index>=target.length?(state.target=void 0,{value:void 0,done:!0}):kind=="keys"?{value:index,done:!1}:kind=="values"?{value:target[index],done:!1}:{value:[index,target[index]],done:!1}},"values");var values=Iterators.Arguments=Iterators.Array;addToUnscopables("keys");addToUnscopables("values");addToUnscopables("entries");if(!IS_PURE&&DESCRIPTORS&&values.name!=="values")try{defineProperty(values,"name",{value:"values"})}catch(error){}}});var require_redefine_all=__commonJS({"node_modules/core-js/internals/redefine-all.js"(exports,module){init_define_process_env();init_shim();var redefine=require_redefine();module.exports=function(target,src,options){for(var key in src)redefine(target,key,src[key],options);return target}}});var require_create_property=__commonJS({"node_modules/core-js/internals/create-property.js"(exports,module){"use strict";init_define_process_env();init_shim();var toPropertyKey=require_to_property_key(),definePropertyModule=require_object_define_property(),createPropertyDescriptor=require_create_property_descriptor();module.exports=function(object2,key,value){var propertyKey=toPropertyKey(key);propertyKey in object2?definePropertyModule.f(object2,propertyKey,createPropertyDescriptor(0,value)):object2[propertyKey]=value}}});var require_array_slice_simple=__commonJS({"node_modules/core-js/internals/array-slice-simple.js"(exports,module){init_define_process_env();init_shim();var global=require_global(),toAbsoluteIndex=require_to_absolute_index(),lengthOfArrayLike=require_length_of_array_like(),createProperty=require_create_property(),Array2=global.Array,max=Math.max;module.exports=function(O,start,end){for(var length=lengthOfArrayLike(O),k=toAbsoluteIndex(start,length),fin=toAbsoluteIndex(end===void 0?length:end,length),result=Array2(max(fin-k,0)),n=0;k<fin;k++,n++)createProperty(result,n,O[k]);return result.length=n,result}}});var require_object_get_own_property_names_external=__commonJS({"node_modules/core-js/internals/object-get-own-property-names-external.js"(exports,module){init_define_process_env();init_shim();var classof=require_classof_raw(),toIndexedObject=require_to_indexed_object(),$getOwnPropertyNames=require_object_get_own_property_names().f,arraySlice=require_array_slice_simple(),windowNames=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],getWindowNames=function(it){try{return $getOwnPropertyNames(it)}catch(error){return arraySlice(windowNames)}};module.exports.f=function(it){return windowNames&&classof(it)=="Window"?getWindowNames(it):$getOwnPropertyNames(toIndexedObject(it))}}});var require_array_buffer_non_extensible=__commonJS({"node_modules/core-js/internals/array-buffer-non-extensible.js"(exports,module){init_define_process_env();init_shim();var fails=require_fails();module.exports=fails(function(){if(typeof ArrayBuffer=="function"){var buffer=new ArrayBuffer(8);Object.isExtensible(buffer)&&Object.defineProperty(buffer,"a",{value:8})}})}});var require_object_is_extensible=__commonJS({"node_modules/core-js/internals/object-is-extensible.js"(exports,module){init_define_process_env();init_shim();var fails=require_fails(),isObject=require_is_object(),classof=require_classof_raw(),ARRAY_BUFFER_NON_EXTENSIBLE=require_array_buffer_non_extensible(),$isExtensible=Object.isExtensible,FAILS_ON_PRIMITIVES=fails(function(){$isExtensible(1)});module.exports=FAILS_ON_PRIMITIVES||ARRAY_BUFFER_NON_EXTENSIBLE?function(it){return!isObject(it)||ARRAY_BUFFER_NON_EXTENSIBLE&&classof(it)=="ArrayBuffer"?!1:$isExtensible?$isExtensible(it):!0}:$isExtensible}});var require_freezing=__commonJS({"node_modules/core-js/internals/freezing.js"(exports,module){init_define_process_env();init_shim();var fails=require_fails();module.exports=!fails(function(){return Object.isExtensible(Object.preventExtensions({}))})}});var require_internal_metadata=__commonJS({"node_modules/core-js/internals/internal-metadata.js"(exports,module){init_define_process_env();init_shim();var $2=require_export(),uncurryThis=require_function_uncurry_this(),hiddenKeys=require_hidden_keys(),isObject=require_is_object(),hasOwn=require_has_own_property(),defineProperty=require_object_define_property().f,getOwnPropertyNamesModule=require_object_get_own_property_names(),getOwnPropertyNamesExternalModule=require_object_get_own_property_names_external(),isExtensible=require_object_is_extensible(),uid=require_uid(),FREEZING=require_freezing(),REQUIRED=!1,METADATA=uid("meta"),id=0,setMetadata=function(it){defineProperty(it,METADATA,{value:{objectID:"O"+id++,weakData:{}}})},fastKey=function(it,create){if(!isObject(it))return typeof it=="symbol"?it:(typeof it=="string"?"S":"P")+it;if(!hasOwn(it,METADATA)){if(!isExtensible(it))return"F";if(!create)return"E";setMetadata(it)}return it[METADATA].objectID},getWeakData=function(it,create){if(!hasOwn(it,METADATA)){if(!isExtensible(it))return!0;if(!create)return!1;setMetadata(it)}return it[METADATA].weakData},onFreeze=function(it){return FREEZING&&REQUIRED&&isExtensible(it)&&!hasOwn(it,METADATA)&&setMetadata(it),it},enable=function(){meta.enable=function(){},REQUIRED=!0;var getOwnPropertyNames=getOwnPropertyNamesModule.f,splice=uncurryThis([].splice),test={};test[METADATA]=1,getOwnPropertyNames(test).length&&(getOwnPropertyNamesModule.f=function(it){for(var result=getOwnPropertyNames(it),i=0,length=result.length;i<length;i++)if(result[i]===METADATA){splice(result,i,1);break}return result},$2({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:getOwnPropertyNamesExternalModule.f}))},meta=module.exports={enable,fastKey,getWeakData,onFreeze};hiddenKeys[METADATA]=!0}});var require_function_bind_context=__commonJS({"node_modules/core-js/internals/function-bind-context.js"(exports,module){init_define_process_env();init_shim();var uncurryThis=require_function_uncurry_this(),aCallable=require_a_callable(),NATIVE_BIND=require_function_bind_native(),bind=uncurryThis(uncurryThis.bind);module.exports=function(fn,that){return aCallable(fn),that===void 0?fn:NATIVE_BIND?bind(fn,that):function(){return fn.apply(that,arguments)}}}});var require_is_array_iterator_method=__commonJS({"node_modules/core-js/internals/is-array-iterator-method.js"(exports,module){init_define_process_env();init_shim();var wellKnownSymbol=require_well_known_symbol(),Iterators=require_iterators(),ITERATOR=wellKnownSymbol("iterator"),ArrayPrototype=Array.prototype;module.exports=function(it){return it!==void 0&&(Iterators.Array===it||ArrayPrototype[ITERATOR]===it)}}});var require_to_string_tag_support=__commonJS({"node_modules/core-js/internals/to-string-tag-support.js"(exports,module){init_define_process_env();init_shim();var wellKnownSymbol=require_well_known_symbol(),TO_STRING_TAG=wellKnownSymbol("toStringTag"),test={};test[TO_STRING_TAG]="z";module.exports=String(test)==="[object z]"}});var require_classof=__commonJS({"node_modules/core-js/internals/classof.js"(exports,module){init_define_process_env();init_shim();var global=require_global(),TO_STRING_TAG_SUPPORT=require_to_string_tag_support(),isCallable=require_is_callable(),classofRaw=require_classof_raw(),wellKnownSymbol=require_well_known_symbol(),TO_STRING_TAG=wellKnownSymbol("toStringTag"),Object2=global.Object,CORRECT_ARGUMENTS=classofRaw(function(){return arguments}())=="Arguments",tryGet=function(it,key){try{return it[key]}catch(error){}};module.exports=TO_STRING_TAG_SUPPORT?classofRaw:function(it){var O,tag,result;return it===void 0?"Undefined":it===null?"Null":typeof(tag=tryGet(O=Object2(it),TO_STRING_TAG))=="string"?tag:CORRECT_ARGUMENTS?classofRaw(O):(result=classofRaw(O))=="Object"&&isCallable(O.callee)?"Arguments":result}}});var require_get_iterator_method=__commonJS({"node_modules/core-js/internals/get-iterator-method.js"(exports,module){init_define_process_env();init_shim();var classof=require_classof(),getMethod=require_get_method(),Iterators=require_iterators(),wellKnownSymbol=require_well_known_symbol(),ITERATOR=wellKnownSymbol("iterator");module.exports=function(it){if(it!=null)return getMethod(it,ITERATOR)||getMethod(it,"@@iterator")||Iterators[classof(it)]}}});var require_get_iterator=__commonJS({"node_modules/core-js/internals/get-iterator.js"(exports,module){init_define_process_env();init_shim();var global=require_global(),call=require_function_call(),aCallable=require_a_callable(),anObject=require_an_object(),tryToString=require_try_to_string(),getIteratorMethod=require_get_iterator_method(),TypeError2=global.TypeError;module.exports=function(argument,usingIterator){var iteratorMethod=arguments.length<2?getIteratorMethod(argument):usingIterator;if(aCallable(iteratorMethod))return anObject(call(iteratorMethod,argument));throw TypeError2(tryToString(argument)+" is not iterable")}}});var require_iterator_close=__commonJS({"node_modules/core-js/internals/iterator-close.js"(exports,module){init_define_process_env();init_shim();var call=require_function_call(),anObject=require_an_object(),getMethod=require_get_method();module.exports=function(iterator,kind,value){var innerResult,innerError;anObject(iterator);try{if(innerResult=getMethod(iterator,"return"),!innerResult){if(kind==="throw")throw value;return value}innerResult=call(innerResult,iterator)}catch(error){innerError=!0,innerResult=error}if(kind==="throw")throw value;if(innerError)throw innerResult;return anObject(innerResult),value}}});var require_iterate=__commonJS({"node_modules/core-js/internals/iterate.js"(exports,module){init_define_process_env();init_shim();var global=require_global(),bind=require_function_bind_context(),call=require_function_call(),anObject=require_an_object(),tryToString=require_try_to_string(),isArrayIteratorMethod=require_is_array_iterator_method(),lengthOfArrayLike=require_length_of_array_like(),isPrototypeOf=require_object_is_prototype_of(),getIterator=require_get_iterator(),getIteratorMethod=require_get_iterator_method(),iteratorClose=require_iterator_close(),TypeError2=global.TypeError,Result=function(stopped,result){this.stopped=stopped,this.result=result},ResultPrototype=Result.prototype;module.exports=function(iterable,unboundFunction,options){var that=options&&options.that,AS_ENTRIES=!!(options&&options.AS_ENTRIES),IS_ITERATOR=!!(options&&options.IS_ITERATOR),INTERRUPTED=!!(options&&options.INTERRUPTED),fn=bind(unboundFunction,that),iterator,iterFn,index,length,result,next,step,stop=function(condition){return iterator&&iteratorClose(iterator,"normal",condition),new Result(!0,condition)},callFn=function(value){return AS_ENTRIES?(anObject(value),INTERRUPTED?fn(value[0],value[1],stop):fn(value[0],value[1])):INTERRUPTED?fn(value,stop):fn(value)};if(IS_ITERATOR)iterator=iterable;else{if(iterFn=getIteratorMethod(iterable),!iterFn)throw TypeError2(tryToString(iterable)+" is not iterable");if(isArrayIteratorMethod(iterFn)){for(index=0,length=lengthOfArrayLike(iterable);length>index;index++)if(result=callFn(iterable[index]),result&&isPrototypeOf(ResultPrototype,result))return result;return new Result(!1)}iterator=getIterator(iterable,iterFn)}for(next=iterator.next;!(step=call(next,iterator)).done;){try{result=callFn(step.value)}catch(error){iteratorClose(iterator,"throw",error)}if(typeof result=="object"&&result&&isPrototypeOf(ResultPrototype,result))return result}return new Result(!1)}}});var require_an_instance=__commonJS({"node_modules/core-js/internals/an-instance.js"(exports,module){init_define_process_env();init_shim();var global=require_global(),isPrototypeOf=require_object_is_prototype_of(),TypeError2=global.TypeError;module.exports=function(it,Prototype){if(isPrototypeOf(Prototype,it))return it;throw TypeError2("Incorrect invocation")}}});var require_check_correctness_of_iteration=__commonJS({"node_modules/core-js/internals/check-correctness-of-iteration.js"(exports,module){init_define_process_env();init_shim();var wellKnownSymbol=require_well_known_symbol(),ITERATOR=wellKnownSymbol("iterator"),SAFE_CLOSING=!1;try{called=0,iteratorWithReturn={next:function(){return{done:!!called++}},return:function(){SAFE_CLOSING=!0}},iteratorWithReturn[ITERATOR]=function(){return this},Array.from(iteratorWithReturn,function(){throw 2})}catch(error){}var called,iteratorWithReturn;module.exports=function(exec,SKIP_CLOSING){if(!SKIP_CLOSING&&!SAFE_CLOSING)return!1;var ITERATION_SUPPORT=!1;try{var object2={};object2[ITERATOR]=function(){return{next:function(){return{done:ITERATION_SUPPORT=!0}}}},exec(object2)}catch(error){}return ITERATION_SUPPORT}}});var require_inherit_if_required=__commonJS({"node_modules/core-js/internals/inherit-if-required.js"(exports,module){init_define_process_env();init_shim();var isCallable=require_is_callable(),isObject=require_is_object(),setPrototypeOf=require_object_set_prototype_of();module.exports=function($this,dummy,Wrapper){var NewTarget,NewTargetPrototype;return setPrototypeOf&&isCallable(NewTarget=dummy.constructor)&&NewTarget!==Wrapper&&isObject(NewTargetPrototype=NewTarget.prototype)&&NewTargetPrototype!==Wrapper.prototype&&setPrototypeOf($this,NewTargetPrototype),$this}}});var require_collection=__commonJS({"node_modules/core-js/internals/collection.js"(exports,module){"use strict";init_define_process_env();init_shim();var $2=require_export(),global=require_global(),uncurryThis=require_function_uncurry_this(),isForced=require_is_forced(),redefine=require_redefine(),InternalMetadataModule=require_internal_metadata(),iterate=require_iterate(),anInstance=require_an_instance(),isCallable=require_is_callable(),isObject=require_is_object(),fails=require_fails(),checkCorrectnessOfIteration=require_check_correctness_of_iteration(),setToStringTag=require_set_to_string_tag(),inheritIfRequired=require_inherit_if_required();module.exports=function(CONSTRUCTOR_NAME,wrapper,common){var IS_MAP=CONSTRUCTOR_NAME.indexOf("Map")!==-1,IS_WEAK=CONSTRUCTOR_NAME.indexOf("Weak")!==-1,ADDER=IS_MAP?"set":"add",NativeConstructor=global[CONSTRUCTOR_NAME],NativePrototype=NativeConstructor&&NativeConstructor.prototype,Constructor=NativeConstructor,exported={},fixMethod=function(KEY){var uncurriedNativeMethod=uncurryThis(NativePrototype[KEY]);redefine(NativePrototype,KEY,KEY=="add"?function(value){return uncurriedNativeMethod(this,value===0?0:value),this}:KEY=="delete"?function(key){return IS_WEAK&&!isObject(key)?!1:uncurriedNativeMethod(this,key===0?0:key)}:KEY=="get"?function(key){return IS_WEAK&&!isObject(key)?void 0:uncurriedNativeMethod(this,key===0?0:key)}:KEY=="has"?function(key){return IS_WEAK&&!isObject(key)?!1:uncurriedNativeMethod(this,key===0?0:key)}:function(key,value){return uncurriedNativeMethod(this,key===0?0:key,value),this})},REPLACE=isForced(CONSTRUCTOR_NAME,!isCallable(NativeConstructor)||!(IS_WEAK||NativePrototype.forEach&&!fails(function(){new NativeConstructor().entries().next()})));if(REPLACE)Constructor=common.getConstructor(wrapper,CONSTRUCTOR_NAME,IS_MAP,ADDER),InternalMetadataModule.enable();else if(isForced(CONSTRUCTOR_NAME,!0)){var instance=new Constructor,HASNT_CHAINING=instance[ADDER](IS_WEAK?{}:-0,1)!=instance,THROWS_ON_PRIMITIVES=fails(function(){instance.has(1)}),ACCEPT_ITERABLES=checkCorrectnessOfIteration(function(iterable){new NativeConstructor(iterable)}),BUGGY_ZERO=!IS_WEAK&&fails(function(){for(var $instance=new NativeConstructor,index=5;index--;)$instance[ADDER](index,index);return!$instance.has(-0)});ACCEPT_ITERABLES||(Constructor=wrapper(function(dummy,iterable){anInstance(dummy,NativePrototype);var that=inheritIfRequired(new NativeConstructor,dummy,Constructor);return iterable!=null&&iterate(iterable,that[ADDER],{that,AS_ENTRIES:IS_MAP}),that}),Constructor.prototype=NativePrototype,NativePrototype.constructor=Constructor),(THROWS_ON_PRIMITIVES||BUGGY_ZERO)&&(fixMethod("delete"),fixMethod("has"),IS_MAP&&fixMethod("get")),(BUGGY_ZERO||HASNT_CHAINING)&&fixMethod(ADDER),IS_WEAK&&NativePrototype.clear&&delete NativePrototype.clear}return exported[CONSTRUCTOR_NAME]=Constructor,$2({global:!0,forced:Constructor!=NativeConstructor},exported),setToStringTag(Constructor,CONSTRUCTOR_NAME),IS_WEAK||common.setStrong(Constructor,CONSTRUCTOR_NAME,IS_MAP),Constructor}}});var require_is_array=__commonJS({"node_modules/core-js/internals/is-array.js"(exports,module){init_define_process_env();init_shim();var classof=require_classof_raw();module.exports=Array.isArray||function(argument){return classof(argument)=="Array"}}});var require_is_constructor=__commonJS({"node_modules/core-js/internals/is-constructor.js"(exports,module){init_define_process_env();init_shim();var uncurryThis=require_function_uncurry_this(),fails=require_fails(),isCallable=require_is_callable(),classof=require_classof(),getBuiltIn=require_get_built_in(),inspectSource=require_inspect_source(),noop=function(){},empty=[],construct=getBuiltIn("Reflect","construct"),constructorRegExp=/^\s*(?:class|function)\b/,exec=uncurryThis(constructorRegExp.exec),INCORRECT_TO_STRING=!constructorRegExp.exec(noop),isConstructorModern=function(argument){if(!isCallable(argument))return!1;try{return construct(noop,empty,argument),!0}catch(error){return!1}},isConstructorLegacy=function(argument){if(!isCallable(argument))return!1;switch(classof(argument)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return INCORRECT_TO_STRING||!!exec(constructorRegExp,inspectSource(argument))}catch(error){return!0}};isConstructorLegacy.sham=!0;module.exports=!construct||fails(function(){var called;return isConstructorModern(isConstructorModern.call)||!isConstructorModern(Object)||!isConstructorModern(function(){called=!0})||called})?isConstructorLegacy:isConstructorModern}});var require_array_species_constructor=__commonJS({"node_modules/core-js/internals/array-species-constructor.js"(exports,module){init_define_process_env();init_shim();var global=require_global(),isArray=require_is_array(),isConstructor=require_is_constructor(),isObject=require_is_object(),wellKnownSymbol=require_well_known_symbol(),SPECIES=wellKnownSymbol("species"),Array2=global.Array;module.exports=function(originalArray){var C;return isArray(originalArray)&&(C=originalArray.constructor,isConstructor(C)&&(C===Array2||isArray(C.prototype))?C=void 0:isObject(C)&&(C=C[SPECIES],C===null&&(C=void 0))),C===void 0?Array2:C}}});var require_array_species_create=__commonJS({"node_modules/core-js/internals/array-species-create.js"(exports,module){init_define_process_env();init_shim();var arraySpeciesConstructor=require_array_species_constructor();module.exports=function(originalArray,length){return new(arraySpeciesConstructor(originalArray))(length===0?0:length)}}});var require_array_iteration=__commonJS({"node_modules/core-js/internals/array-iteration.js"(exports,module){init_define_process_env();init_shim();var bind=require_function_bind_context(),uncurryThis=require_function_uncurry_this(),IndexedObject=require_indexed_object(),toObject=require_to_object(),lengthOfArrayLike=require_length_of_array_like(),arraySpeciesCreate=require_array_species_create(),push=uncurryThis([].push),createMethod=function(TYPE){var IS_MAP=TYPE==1,IS_FILTER=TYPE==2,IS_SOME=TYPE==3,IS_EVERY=TYPE==4,IS_FIND_INDEX=TYPE==6,IS_FILTER_REJECT=TYPE==7,NO_HOLES=TYPE==5||IS_FIND_INDEX;return function($this,callbackfn,that,specificCreate){for(var O=toObject($this),self2=IndexedObject(O),boundFunction=bind(callbackfn,that),length=lengthOfArrayLike(self2),index=0,create=specificCreate||arraySpeciesCreate,target=IS_MAP?create($this,length):IS_FILTER||IS_FILTER_REJECT?create($this,0):void 0,value,result;length>index;index++)if((NO_HOLES||index in self2)&&(value=self2[index],result=boundFunction(value,index,O),TYPE))if(IS_MAP)target[index]=result;else if(result)switch(TYPE){case 3:return!0;case 5:return value;case 6:return index;case 2:push(target,value)}else switch(TYPE){case 4:return!1;case 7:push(target,value)}return IS_FIND_INDEX?-1:IS_SOME||IS_EVERY?IS_EVERY:target}};module.exports={forEach:createMethod(0),map:createMethod(1),filter:createMethod(2),some:createMethod(3),every:createMethod(4),find:createMethod(5),findIndex:createMethod(6),filterReject:createMethod(7)}}});var require_collection_weak=__commonJS({"node_modules/core-js/internals/collection-weak.js"(exports,module){"use strict";init_define_process_env();init_shim();var uncurryThis=require_function_uncurry_this(),redefineAll=require_redefine_all(),getWeakData=require_internal_metadata().getWeakData,anObject=require_an_object(),isObject=require_is_object(),anInstance=require_an_instance(),iterate=require_iterate(),ArrayIterationModule=require_array_iteration(),hasOwn=require_has_own_property(),InternalStateModule=require_internal_state(),setInternalState=InternalStateModule.set,internalStateGetterFor=InternalStateModule.getterFor,find=ArrayIterationModule.find,findIndex=ArrayIterationModule.findIndex,splice=uncurryThis([].splice),id=0,uncaughtFrozenStore=function(store){return store.frozen||(store.frozen=new UncaughtFrozenStore)},UncaughtFrozenStore=function(){this.entries=[]},findUncaughtFrozen=function(store,key){return find(store.entries,function(it){return it[0]===key})};UncaughtFrozenStore.prototype={get:function(key){var entry=findUncaughtFrozen(this,key);if(entry)return entry[1]},has:function(key){return!!findUncaughtFrozen(this,key)},set:function(key,value){var entry=findUncaughtFrozen(this,key);entry?entry[1]=value:this.entries.push([key,value])},delete:function(key){var index=findIndex(this.entries,function(it){return it[0]===key});return~index&&splice(this.entries,index,1),!!~index}};module.exports={getConstructor:function(wrapper,CONSTRUCTOR_NAME,IS_MAP,ADDER){var Constructor=wrapper(function(that,iterable){anInstance(that,Prototype),setInternalState(that,{type:CONSTRUCTOR_NAME,id:id++,frozen:void 0}),iterable!=null&&iterate(iterable,that[ADDER],{that,AS_ENTRIES:IS_MAP})}),Prototype=Constructor.prototype,getInternalState=internalStateGetterFor(CONSTRUCTOR_NAME),define2=function(that,key,value){var state=getInternalState(that),data=getWeakData(anObject(key),!0);return data===!0?uncaughtFrozenStore(state).set(key,value):data[state.id]=value,that};return redefineAll(Prototype,{delete:function(key){var state=getInternalState(this);if(!isObject(key))return!1;var data=getWeakData(key);return data===!0?uncaughtFrozenStore(state).delete(key):data&&hasOwn(data,state.id)&&delete data[state.id]},has:function(key){var state=getInternalState(this);if(!isObject(key))return!1;var data=getWeakData(key);return data===!0?uncaughtFrozenStore(state).has(key):data&&hasOwn(data,state.id)}}),redefineAll(Prototype,IS_MAP?{get:function(key){var state=getInternalState(this);if(isObject(key)){var data=getWeakData(key);return data===!0?uncaughtFrozenStore(state).get(key):data?data[state.id]:void 0}},set:function(key,value){return define2(this,key,value)}}:{add:function(value){return define2(this,value,!0)}}),Constructor}}}});var require_es_weak_map=__commonJS({"node_modules/core-js/modules/es.weak-map.js"(){"use strict";init_define_process_env();init_shim();var global=require_global(),uncurryThis=require_function_uncurry_this(),redefineAll=require_redefine_all(),InternalMetadataModule=require_internal_metadata(),collection=require_collection(),collectionWeak=require_collection_weak(),isObject=require_is_object(),isExtensible=require_object_is_extensible(),enforceInternalState=require_internal_state().enforce,NATIVE_WEAK_MAP=require_native_weak_map(),IS_IE11=!global.ActiveXObject&&"ActiveXObject"in global,InternalWeakMap,wrapper=function(init){return function(){return init(this,arguments.length?arguments[0]:void 0)}},$WeakMap=collection("WeakMap",wrapper,collectionWeak);NATIVE_WEAK_MAP&&IS_IE11&&(InternalWeakMap=collectionWeak.getConstructor(wrapper,"WeakMap",!0),InternalMetadataModule.enable(),WeakMapPrototype=$WeakMap.prototype,nativeDelete=uncurryThis(WeakMapPrototype.delete),nativeHas=uncurryThis(WeakMapPrototype.has),nativeGet=uncurryThis(WeakMapPrototype.get),nativeSet=uncurryThis(WeakMapPrototype.set),redefineAll(WeakMapPrototype,{delete:function(key){if(isObject(key)&&!isExtensible(key)){var state=enforceInternalState(this);return state.frozen||(state.frozen=new InternalWeakMap),nativeDelete(this,key)||state.frozen.delete(key)}return nativeDelete(this,key)},has:function(key){if(isObject(key)&&!isExtensible(key)){var state=enforceInternalState(this);return state.frozen||(state.frozen=new InternalWeakMap),nativeHas(this,key)||state.frozen.has(key)}return nativeHas(this,key)},get:function(key){if(isObject(key)&&!isExtensible(key)){var state=enforceInternalState(this);return state.frozen||(state.frozen=new InternalWeakMap),nativeHas(this,key)?nativeGet(this,key):state.frozen.get(key)}return nativeGet(this,key)},set:function(key,value){if(isObject(key)&&!isExtensible(key)){var state=enforceInternalState(this);state.frozen||(state.frozen=new InternalWeakMap),nativeHas(this,key)?nativeSet(this,key,value):state.frozen.set(key,value)}else nativeSet(this,key,value);return this}}));var WeakMapPrototype,nativeDelete,nativeHas,nativeGet,nativeSet}});var require_dom_iterables=__commonJS({"node_modules/core-js/internals/dom-iterables.js"(exports,module){init_define_process_env();init_shim();module.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}});var require_dom_token_list_prototype=__commonJS({"node_modules/core-js/internals/dom-token-list-prototype.js"(exports,module){init_define_process_env();init_shim();var documentCreateElement=require_document_create_element(),classList2=documentCreateElement("span").classList,DOMTokenListPrototype=classList2&&classList2.constructor&&classList2.constructor.prototype;module.exports=DOMTokenListPrototype===Object.prototype?void 0:DOMTokenListPrototype}});var require_web_dom_collections_iterator=__commonJS({"node_modules/core-js/modules/web.dom-collections.iterator.js"(){init_define_process_env();init_shim();var global=require_global(),DOMIterables=require_dom_iterables(),DOMTokenListPrototype=require_dom_token_list_prototype(),ArrayIteratorMethods=require_es_array_iterator(),createNonEnumerableProperty=require_create_non_enumerable_property(),wellKnownSymbol=require_well_known_symbol(),ITERATOR=wellKnownSymbol("iterator"),TO_STRING_TAG=wellKnownSymbol("toStringTag"),ArrayValues=ArrayIteratorMethods.values,handlePrototype=function(CollectionPrototype,COLLECTION_NAME2){if(CollectionPrototype){if(CollectionPrototype[ITERATOR]!==ArrayValues)try{createNonEnumerableProperty(CollectionPrototype,ITERATOR,ArrayValues)}catch(error){CollectionPrototype[ITERATOR]=ArrayValues}if(CollectionPrototype[TO_STRING_TAG]||createNonEnumerableProperty(CollectionPrototype,TO_STRING_TAG,COLLECTION_NAME2),DOMIterables[COLLECTION_NAME2]){for(var METHOD_NAME in ArrayIteratorMethods)if(CollectionPrototype[METHOD_NAME]!==ArrayIteratorMethods[METHOD_NAME])try{createNonEnumerableProperty(CollectionPrototype,METHOD_NAME,ArrayIteratorMethods[METHOD_NAME])}catch(error){CollectionPrototype[METHOD_NAME]=ArrayIteratorMethods[METHOD_NAME]}}}};for(COLLECTION_NAME in DOMIterables)handlePrototype(global[COLLECTION_NAME]&&global[COLLECTION_NAME].prototype,COLLECTION_NAME);var COLLECTION_NAME;handlePrototype(DOMTokenListPrototype,"DOMTokenList")}});var require_function_apply=__commonJS({"node_modules/core-js/internals/function-apply.js"(exports,module){init_define_process_env();init_shim();var NATIVE_BIND=require_function_bind_native(),FunctionPrototype=Function.prototype,apply=FunctionPrototype.apply,call=FunctionPrototype.call;module.exports=typeof Reflect=="object"&&Reflect.apply||(NATIVE_BIND?call.bind(apply):function(){return call.apply(apply,arguments)})}});var require_to_string=__commonJS({"node_modules/core-js/internals/to-string.js"(exports,module){init_define_process_env();init_shim();var global=require_global(),classof=require_classof(),String2=global.String;module.exports=function(argument){if(classof(argument)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return String2(argument)}}});var require_normalize_string_argument=__commonJS({"node_modules/core-js/internals/normalize-string-argument.js"(exports,module){init_define_process_env();init_shim();var toString=require_to_string();module.exports=function(argument,$default){return argument===void 0?arguments.length<2?"":$default:toString(argument)}}});var require_install_error_cause=__commonJS({"node_modules/core-js/internals/install-error-cause.js"(exports,module){init_define_process_env();init_shim();var isObject=require_is_object(),createNonEnumerableProperty=require_create_non_enumerable_property();module.exports=function(O,options){isObject(options)&&"cause"in options&&createNonEnumerableProperty(O,"cause",options.cause)}}});var require_clear_error_stack=__commonJS({"node_modules/core-js/internals/clear-error-stack.js"(exports,module){init_define_process_env();init_shim();var uncurryThis=require_function_uncurry_this(),replace=uncurryThis("".replace),TEST=function(arg){return String(Error(arg).stack)}("zxcasd"),V8_OR_CHAKRA_STACK_ENTRY=/\n\s*at [^:]*:[^\n]*/,IS_V8_OR_CHAKRA_STACK=V8_OR_CHAKRA_STACK_ENTRY.test(TEST);module.exports=function(stack,dropEntries){if(IS_V8_OR_CHAKRA_STACK&&typeof stack=="string")for(;dropEntries--;)stack=replace(stack,V8_OR_CHAKRA_STACK_ENTRY,"");return stack}}});var require_error_stack_installable=__commonJS({"node_modules/core-js/internals/error-stack-installable.js"(exports,module){init_define_process_env();init_shim();var fails=require_fails(),createPropertyDescriptor=require_create_property_descriptor();module.exports=!fails(function(){var error=Error("a");return"stack"in error?(Object.defineProperty(error,"stack",createPropertyDescriptor(1,7)),error.stack!==7):!0})}});var require_wrap_error_constructor_with_cause=__commonJS({"node_modules/core-js/internals/wrap-error-constructor-with-cause.js"(exports,module){"use strict";init_define_process_env();init_shim();var getBuiltIn=require_get_built_in(),hasOwn=require_has_own_property(),createNonEnumerableProperty=require_create_non_enumerable_property(),isPrototypeOf=require_object_is_prototype_of(),setPrototypeOf=require_object_set_prototype_of(),copyConstructorProperties=require_copy_constructor_properties(),inheritIfRequired=require_inherit_if_required(),normalizeStringArgument=require_normalize_string_argument(),installErrorCause=require_install_error_cause(),clearErrorStack=require_clear_error_stack(),ERROR_STACK_INSTALLABLE=require_error_stack_installable(),IS_PURE=require_is_pure();module.exports=function(FULL_NAME,wrapper,FORCED,IS_AGGREGATE_ERROR){var OPTIONS_POSITION=IS_AGGREGATE_ERROR?2:1,path=FULL_NAME.split("."),ERROR_NAME=path[path.length-1],OriginalError=getBuiltIn.apply(null,path);if(OriginalError){var OriginalErrorPrototype=OriginalError.prototype;if(!IS_PURE&&hasOwn(OriginalErrorPrototype,"cause")&&delete OriginalErrorPrototype.cause,!FORCED)return OriginalError;var BaseError=getBuiltIn("Error"),WrappedError=wrapper(function(a,b){var message=normalizeStringArgument(IS_AGGREGATE_ERROR?b:a,void 0),result=IS_AGGREGATE_ERROR?new OriginalError(a):new OriginalError;return message!==void 0&&createNonEnumerableProperty(result,"message",message),ERROR_STACK_INSTALLABLE&&createNonEnumerableProperty(result,"stack",clearErrorStack(result.stack,2)),this&&isPrototypeOf(OriginalErrorPrototype,this)&&inheritIfRequired(result,this,WrappedError),arguments.length>OPTIONS_POSITION&&installErrorCause(result,arguments[OPTIONS_POSITION]),result});if(WrappedError.prototype=OriginalErrorPrototype,ERROR_NAME!=="Error"&&(setPrototypeOf?setPrototypeOf(WrappedError,BaseError):copyConstructorProperties(WrappedError,BaseError,{name:!0})),copyConstructorProperties(WrappedError,OriginalError),!IS_PURE)try{OriginalErrorPrototype.name!==ERROR_NAME&&createNonEnumerableProperty(OriginalErrorPrototype,"name",ERROR_NAME),OriginalErrorPrototype.constructor=WrappedError}catch(error){}return WrappedError}}}});var require_es_error_cause=__commonJS({"node_modules/core-js/modules/es.error.cause.js"(){init_define_process_env();init_shim();var $2=require_export(),global=require_global(),apply=require_function_apply(),wrapErrorConstructorWithCause=require_wrap_error_constructor_with_cause(),WEB_ASSEMBLY="WebAssembly",WebAssembly=global[WEB_ASSEMBLY],FORCED=Error("e",{cause:7}).cause!==7,exportGlobalErrorCauseWrapper=function(ERROR_NAME,wrapper){var O={};O[ERROR_NAME]=wrapErrorConstructorWithCause(ERROR_NAME,wrapper,FORCED),$2({global:!0,forced:FORCED},O)},exportWebAssemblyErrorCauseWrapper=function(ERROR_NAME,wrapper){if(WebAssembly&&WebAssembly[ERROR_NAME]){var O={};O[ERROR_NAME]=wrapErrorConstructorWithCause(WEB_ASSEMBLY+"."+ERROR_NAME,wrapper,FORCED),$2({target:WEB_ASSEMBLY,stat:!0,forced:FORCED},O)}};exportGlobalErrorCauseWrapper("Error",function(init){return function(message){return apply(init,this,arguments)}});exportGlobalErrorCauseWrapper("EvalError",function(init){return function(message){return apply(init,this,arguments)}});exportGlobalErrorCauseWrapper("RangeError",function(init){return function(message){return apply(init,this,arguments)}});exportGlobalErrorCauseWrapper("ReferenceError",function(init){return function(message){return apply(init,this,arguments)}});exportGlobalErrorCauseWrapper("SyntaxError",function(init){return function(message){return apply(init,this,arguments)}});exportGlobalErrorCauseWrapper("TypeError",function(init){return function(message){return apply(init,this,arguments)}});exportGlobalErrorCauseWrapper("URIError",function(init){return function(message){return apply(init,this,arguments)}});exportWebAssemblyErrorCauseWrapper("CompileError",function(init){return function(message){return apply(init,this,arguments)}});exportWebAssemblyErrorCauseWrapper("LinkError",function(init){return function(message){return apply(init,this,arguments)}});exportWebAssemblyErrorCauseWrapper("RuntimeError",function(init){return function(message){return apply(init,this,arguments)}})}});var require_punycode=__commonJS({"node_modules/url/node_modules/punycode/punycode.js"(exports,module){init_define_process_env();init_shim();(function(root){var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=typeof module=="object"&&module&&!module.nodeType&&module,freeGlobal=typeof window=="object"&&window;(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal||freeGlobal.self===freeGlobal)&&(root=freeGlobal);var punycode,maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexPunycode=/^xn--/,regexNonASCII=/[^\x20-\x7E]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},baseMinusTMin=base-tMin,floor=Math.floor,stringFromCharCode=String.fromCharCode,key;function error(type){throw RangeError(errors[type])}function map(array,fn){for(var length=array.length,result=[];length--;)result[length]=fn(array[length]);return result}function mapDomain(string,fn){var parts=string.split("@"),result="";parts.length>1&&(result=parts[0]+"@",string=parts[1]),string=string.replace(regexSeparators,".");var labels=string.split("."),encoded=map(labels,fn).join(".");return result+encoded}function ucs2decode(string){for(var output=[],counter2=0,length=string.length,value,extra;counter2<length;)value=string.charCodeAt(counter2++),value>=55296&&value<=56319&&counter2<length?(extra=string.charCodeAt(counter2++),(extra&64512)==56320?output.push(((value&1023)<<10)+(extra&1023)+65536):(output.push(value),counter2--)):output.push(value);return output}function ucs2encode(array){return map(array,function(value){var output="";return value>65535&&(value-=65536,output+=stringFromCharCode(value>>>10&1023|55296),value=56320|value&1023),output+=stringFromCharCode(value),output}).join("")}function basicToDigit(codePoint){return codePoint-48<10?codePoint-22:codePoint-65<26?codePoint-65:codePoint-97<26?codePoint-97:base}function digitToBasic(digit,flag){return digit+22+75*(digit<26)-((flag!=0)<<5)}function adapt(delta,numPoints,firstTime){var k=0;for(delta=firstTime?floor(delta/damp):delta>>1,delta+=floor(delta/numPoints);delta>baseMinusTMin*tMax>>1;k+=base)delta=floor(delta/baseMinusTMin);return floor(k+(baseMinusTMin+1)*delta/(delta+skew))}function decode(input){var output=[],inputLength=input.length,out,i=0,n=initialN,bias=initialBias,basic,j,index,oldi,w,k,digit,t,baseMinusT;for(basic=input.lastIndexOf(delimiter),basic<0&&(basic=0),j=0;j<basic;++j)input.charCodeAt(j)>=128&&error("not-basic"),output.push(input.charCodeAt(j));for(index=basic>0?basic+1:0;index<inputLength;){for(oldi=i,w=1,k=base;index>=inputLength&&error("invalid-input"),digit=basicToDigit(input.charCodeAt(index++)),(digit>=base||digit>floor((maxInt-i)/w))&&error("overflow"),i+=digit*w,t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias,!(digit<t);k+=base)baseMinusT=base-t,w>floor(maxInt/baseMinusT)&&error("overflow"),w*=baseMinusT;out=output.length+1,bias=adapt(i-oldi,out,oldi==0),floor(i/out)>maxInt-n&&error("overflow"),n+=floor(i/out),i%=out,output.splice(i++,0,n)}return ucs2encode(output)}function encode(input){var n,delta,handledCPCount,basicLength,bias,j,m,q,k,t,currentValue,output=[],inputLength,handledCPCountPlusOne,baseMinusT,qMinusT;for(input=ucs2decode(input),inputLength=input.length,n=initialN,delta=0,bias=initialBias,j=0;j<inputLength;++j)currentValue=input[j],currentValue<128&&output.push(stringFromCharCode(currentValue));for(handledCPCount=basicLength=output.length,basicLength&&output.push(delimiter);handledCPCount<inputLength;){for(m=maxInt,j=0;j<inputLength;++j)currentValue=input[j],currentValue>=n&&currentValue<m&&(m=currentValue);for(handledCPCountPlusOne=handledCPCount+1,m-n>floor((maxInt-delta)/handledCPCountPlusOne)&&error("overflow"),delta+=(m-n)*handledCPCountPlusOne,n=m,j=0;j<inputLength;++j)if(currentValue=input[j],currentValue<n&&++delta>maxInt&&error("overflow"),currentValue==n){for(q=delta,k=base;t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias,!(q<t);k+=base)qMinusT=q-t,baseMinusT=base-t,output.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT,0))),q=floor(qMinusT/baseMinusT);output.push(stringFromCharCode(digitToBasic(q,0))),bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength),delta=0,++handledCPCount}++delta,++n}return output.join("")}function toUnicode(input){return mapDomain(input,function(string){return regexPunycode.test(string)?decode(string.slice(4).toLowerCase()):string})}function toASCII(input){return mapDomain(input,function(string){return regexNonASCII.test(string)?"xn--"+encode(string):string})}if(punycode={version:"1.3.2",ucs2:{decode:ucs2decode,encode:ucs2encode},decode,encode,toASCII,toUnicode},typeof define=="function"&&typeof define.amd=="object"&&define.amd)define("punycode",function(){return punycode});else if(freeExports&&freeModule)if(module.exports==freeExports)freeModule.exports=punycode;else for(key in punycode)punycode.hasOwnProperty(key)&&(freeExports[key]=punycode[key]);else root.punycode=punycode})(exports)}});var require_decode=__commonJS({"node_modules/querystring/decode.js"(exports,module){"use strict";init_define_process_env();init_shim();function hasOwnProperty2(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}module.exports=function(qs,sep,eq,options){sep=sep||"&",eq=eq||"=";var obj={};if(typeof qs!="string"||qs.length===0)return obj;var regexp=/\+/g;qs=qs.split(sep);var maxKeys=1e3;options&&typeof options.maxKeys=="number"&&(maxKeys=options.maxKeys);var len=qs.length;maxKeys>0&&len>maxKeys&&(len=maxKeys);for(var i=0;i<len;++i){var x=qs[i].replace(regexp,"%20"),idx=x.indexOf(eq),kstr,vstr,k,v;idx>=0?(kstr=x.substr(0,idx),vstr=x.substr(idx+1)):(kstr=x,vstr=""),k=decodeURIComponent(kstr),v=decodeURIComponent(vstr),hasOwnProperty2(obj,k)?Array.isArray(obj[k])?obj[k].push(v):obj[k]=[obj[k],v]:obj[k]=v}return obj}}});var require_encode=__commonJS({"node_modules/querystring/encode.js"(exports,module){"use strict";init_define_process_env();init_shim();var stringifyPrimitive=function(v){switch(typeof v){case"string":return v;case"boolean":return v?"true":"false";case"number":return isFinite(v)?v:"";default:return""}};module.exports=function(obj,sep,eq,name){return sep=sep||"&",eq=eq||"=",obj===null&&(obj=void 0),typeof obj=="object"?Object.keys(obj).map(function(k){var ks=encodeURIComponent(stringifyPrimitive(k))+eq;return Array.isArray(obj[k])?obj[k].map(function(v){return ks+encodeURIComponent(stringifyPrimitive(v))}).join(sep):ks+encodeURIComponent(stringifyPrimitive(obj[k]))}).join(sep):name?encodeURIComponent(stringifyPrimitive(name))+eq+encodeURIComponent(stringifyPrimitive(obj)):""}}});var require_querystring=__commonJS({"node_modules/querystring/index.js"(exports){"use strict";init_define_process_env();init_shim();exports.decode=exports.parse=require_decode();exports.encode=exports.stringify=require_encode()}});var require_url=__commonJS({"node_modules/url/url.js"(exports){init_define_process_env();init_shim();var punycode=require_punycode();exports.parse=urlParse;exports.resolve=urlResolve;exports.resolveObject=urlResolveObject;exports.format=urlFormat;exports.Url=Url;function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,delims=["<",">",'"',"`"," ","\r","\n","	"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},querystring=require_querystring();function urlParse(url,parseQueryString,slashesDenoteHost){if(url&&isObject(url)&&url instanceof Url)return url;var u=new Url;return u.parse(url,parseQueryString,slashesDenoteHost),u}Url.prototype.parse=function(url,parseQueryString,slashesDenoteHost){if(!isString(url))throw new TypeError("Parameter 'url' must be a string, not "+typeof url);var rest=url;rest=rest.trim();var proto=protocolPattern.exec(rest);if(proto){proto=proto[0];var lowerProto=proto.toLowerCase();this.protocol=lowerProto,rest=rest.substr(proto.length)}if(slashesDenoteHost||proto||rest.match(/^\/\/[^@\/]+@[^@\/]+/)){var slashes=rest.substr(0,2)==="//";slashes&&!(proto&&hostlessProtocol[proto])&&(rest=rest.substr(2),this.slashes=!0)}if(!hostlessProtocol[proto]&&(slashes||proto&&!slashedProtocol[proto])){for(var hostEnd=-1,i=0;i<hostEndingChars.length;i++){var hec=rest.indexOf(hostEndingChars[i]);hec!==-1&&(hostEnd===-1||hec<hostEnd)&&(hostEnd=hec)}var auth,atSign;hostEnd===-1?atSign=rest.lastIndexOf("@"):atSign=rest.lastIndexOf("@",hostEnd),atSign!==-1&&(auth=rest.slice(0,atSign),rest=rest.slice(atSign+1),this.auth=decodeURIComponent(auth)),hostEnd=-1;for(var i=0;i<nonHostChars.length;i++){var hec=rest.indexOf(nonHostChars[i]);hec!==-1&&(hostEnd===-1||hec<hostEnd)&&(hostEnd=hec)}hostEnd===-1&&(hostEnd=rest.length),this.host=rest.slice(0,hostEnd),rest=rest.slice(hostEnd),this.parseHost(),this.hostname=this.hostname||"";var ipv6Hostname=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!ipv6Hostname)for(var hostparts=this.hostname.split(/\./),i=0,l=hostparts.length;i<l;i++){var part=hostparts[i];if(part&&!part.match(hostnamePartPattern)){for(var newpart="",j=0,k=part.length;j<k;j++)part.charCodeAt(j)>127?newpart+="x":newpart+=part[j];if(!newpart.match(hostnamePartPattern)){var validParts=hostparts.slice(0,i),notHost=hostparts.slice(i+1),bit=part.match(hostnamePartStart);bit&&(validParts.push(bit[1]),notHost.unshift(bit[2])),notHost.length&&(rest="/"+notHost.join(".")+rest),this.hostname=validParts.join(".");break}}}if(this.hostname.length>hostnameMaxLen?this.hostname="":this.hostname=this.hostname.toLowerCase(),!ipv6Hostname){for(var domainArray=this.hostname.split("."),newOut=[],i=0;i<domainArray.length;++i){var s=domainArray[i];newOut.push(s.match(/[^A-Za-z0-9_-]/)?"xn--"+punycode.encode(s):s)}this.hostname=newOut.join(".")}var p=this.port?":"+this.port:"",h=this.hostname||"";this.host=h+p,this.href+=this.host,ipv6Hostname&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),rest[0]!=="/"&&(rest="/"+rest))}if(!unsafeProtocol[lowerProto])for(var i=0,l=autoEscape.length;i<l;i++){var ae=autoEscape[i],esc=encodeURIComponent(ae);esc===ae&&(esc=escape(ae)),rest=rest.split(ae).join(esc)}var hash=rest.indexOf("#");hash!==-1&&(this.hash=rest.substr(hash),rest=rest.slice(0,hash));var qm=rest.indexOf("?");if(qm!==-1?(this.search=rest.substr(qm),this.query=rest.substr(qm+1),parseQueryString&&(this.query=querystring.parse(this.query)),rest=rest.slice(0,qm)):parseQueryString&&(this.search="",this.query={}),rest&&(this.pathname=rest),slashedProtocol[lowerProto]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var p=this.pathname||"",s=this.search||"";this.path=p+s}return this.href=this.format(),this};function urlFormat(obj){return isString(obj)&&(obj=urlParse(obj)),obj instanceof Url?obj.format():Url.prototype.format.call(obj)}Url.prototype.format=function(){var auth=this.auth||"";auth&&(auth=encodeURIComponent(auth),auth=auth.replace(/%3A/i,":"),auth+="@");var protocol=this.protocol||"",pathname=this.pathname||"",hash=this.hash||"",host=!1,query="";this.host?host=auth+this.host:this.hostname&&(host=auth+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(host+=":"+this.port)),this.query&&isObject(this.query)&&Object.keys(this.query).length&&(query=querystring.stringify(this.query));var search=this.search||query&&"?"+query||"";return protocol&&protocol.substr(-1)!==":"&&(protocol+=":"),this.slashes||(!protocol||slashedProtocol[protocol])&&host!==!1?(host="//"+(host||""),pathname&&pathname.charAt(0)!=="/"&&(pathname="/"+pathname)):host||(host=""),hash&&hash.charAt(0)!=="#"&&(hash="#"+hash),search&&search.charAt(0)!=="?"&&(search="?"+search),pathname=pathname.replace(/[?#]/g,function(match){return encodeURIComponent(match)}),search=search.replace("#","%23"),protocol+host+pathname+search+hash};function urlResolve(source,relative){return urlParse(source,!1,!0).resolve(relative)}Url.prototype.resolve=function(relative){return this.resolveObject(urlParse(relative,!1,!0)).format()};function urlResolveObject(source,relative){return source?urlParse(source,!1,!0).resolveObject(relative):relative}Url.prototype.resolveObject=function(relative){if(isString(relative)){var rel=new Url;rel.parse(relative,!1,!0),relative=rel}var result=new Url;if(Object.keys(this).forEach(function(k){result[k]=this[k]},this),result.hash=relative.hash,relative.href==="")return result.href=result.format(),result;if(relative.slashes&&!relative.protocol)return Object.keys(relative).forEach(function(k){k!=="protocol"&&(result[k]=relative[k])}),slashedProtocol[result.protocol]&&result.hostname&&!result.pathname&&(result.path=result.pathname="/"),result.href=result.format(),result;if(relative.protocol&&relative.protocol!==result.protocol){if(!slashedProtocol[relative.protocol])return Object.keys(relative).forEach(function(k){result[k]=relative[k]}),result.href=result.format(),result;if(result.protocol=relative.protocol,!relative.host&&!hostlessProtocol[relative.protocol]){for(var relPath=(relative.pathname||"").split("/");relPath.length&&!(relative.host=relPath.shift()););relative.host||(relative.host=""),relative.hostname||(relative.hostname=""),relPath[0]!==""&&relPath.unshift(""),relPath.length<2&&relPath.unshift(""),result.pathname=relPath.join("/")}else result.pathname=relative.pathname;if(result.search=relative.search,result.query=relative.query,result.host=relative.host||"",result.auth=relative.auth,result.hostname=relative.hostname||relative.host,result.port=relative.port,result.pathname||result.search){var p=result.pathname||"",s=result.search||"";result.path=p+s}return result.slashes=result.slashes||relative.slashes,result.href=result.format(),result}var isSourceAbs=result.pathname&&result.pathname.charAt(0)==="/",isRelAbs=relative.host||relative.pathname&&relative.pathname.charAt(0)==="/",mustEndAbs=isRelAbs||isSourceAbs||result.host&&relative.pathname,removeAllDots=mustEndAbs,srcPath=result.pathname&&result.pathname.split("/")||[],relPath=relative.pathname&&relative.pathname.split("/")||[],psychotic=result.protocol&&!slashedProtocol[result.protocol];if(psychotic&&(result.hostname="",result.port=null,result.host&&(srcPath[0]===""?srcPath[0]=result.host:srcPath.unshift(result.host)),result.host="",relative.protocol&&(relative.hostname=null,relative.port=null,relative.host&&(relPath[0]===""?relPath[0]=relative.host:relPath.unshift(relative.host)),relative.host=null),mustEndAbs=mustEndAbs&&(relPath[0]===""||srcPath[0]==="")),isRelAbs)result.host=relative.host||relative.host===""?relative.host:result.host,result.hostname=relative.hostname||relative.hostname===""?relative.hostname:result.hostname,result.search=relative.search,result.query=relative.query,srcPath=relPath;else if(relPath.length)srcPath||(srcPath=[]),srcPath.pop(),srcPath=srcPath.concat(relPath),result.search=relative.search,result.query=relative.query;else if(!isNullOrUndefined(relative.search)){if(psychotic){result.hostname=result.host=srcPath.shift();var authInHost=result.host&&result.host.indexOf("@")>0?result.host.split("@"):!1;authInHost&&(result.auth=authInHost.shift(),result.host=result.hostname=authInHost.shift())}return result.search=relative.search,result.query=relative.query,(!isNull(result.pathname)||!isNull(result.search))&&(result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")),result.href=result.format(),result}if(!srcPath.length)return result.pathname=null,result.search?result.path="/"+result.search:result.path=null,result.href=result.format(),result;for(var last=srcPath.slice(-1)[0],hasTrailingSlash=(result.host||relative.host)&&(last==="."||last==="..")||last==="",up=0,i=srcPath.length;i>=0;i--)last=srcPath[i],last=="."?srcPath.splice(i,1):last===".."?(srcPath.splice(i,1),up++):up&&(srcPath.splice(i,1),up--);if(!mustEndAbs&&!removeAllDots)for(;up--;up)srcPath.unshift("..");mustEndAbs&&srcPath[0]!==""&&(!srcPath[0]||srcPath[0].charAt(0)!=="/")&&srcPath.unshift(""),hasTrailingSlash&&srcPath.join("/").substr(-1)!=="/"&&srcPath.push("");var isAbsolute=srcPath[0]===""||srcPath[0]&&srcPath[0].charAt(0)==="/";if(psychotic){result.hostname=result.host=isAbsolute?"":srcPath.length?srcPath.shift():"";var authInHost=result.host&&result.host.indexOf("@")>0?result.host.split("@"):!1;authInHost&&(result.auth=authInHost.shift(),result.host=result.hostname=authInHost.shift())}return mustEndAbs=mustEndAbs||result.host&&srcPath.length,mustEndAbs&&!isAbsolute&&srcPath.unshift(""),srcPath.length?result.pathname=srcPath.join("/"):(result.pathname=null,result.path=null),(!isNull(result.pathname)||!isNull(result.search))&&(result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")),result.auth=relative.auth||result.auth,result.slashes=result.slashes||relative.slashes,result.href=result.format(),result};Url.prototype.parseHost=function(){var host=this.host,port=portPattern.exec(host);port&&(port=port[0],port!==":"&&(this.port=port.substr(1)),host=host.substr(0,host.length-port.length)),host&&(this.hostname=host)};function isString(arg){return typeof arg=="string"}function isObject(arg){return typeof arg=="object"&&arg!==null}function isNull(arg){return arg===null}function isNullOrUndefined(arg){return arg==null}}});var require_safe_require=__commonJS({"lib-browser-old/safe_require.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();require_es_error_cause();var url=_interopRequireWildcard(require_url()),querystring=_interopRequireWildcard(require_querystring());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}module.exports={safe_require,safe_register};typeof window<"u"&&(window.safe_require={safe_require,safe_register});var _safe_require_listing={url,querystring};function safe_require(path){let already_registered=_safe_require_listing[path];if(already_registered!=null)return already_registered;let path_parts=path.split("/");if(typeof window<"u"&&path_parts[1]==="optional"){let file_name=path_parts[path_parts.length-1],optional_modules=window.optional_modules;if(file_name in optional_modules)return optional_modules[file_name];throw new Error("could not find optional module: "+path)}else return __require(path)}function safe_register(path,mod){_safe_require_listing[path]=mod}}});var require_element_optional_utils=__commonJS({"lib-browser-old/core/core_elements/core_elements_utilities/element_optional_utils.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();var safe_require=_interopRequireWildcard(require_safe_require()),_exports,_exports$optional_mod;function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}safe_require.safe_register("./core/core_elements/core_elements_utilities/element_optional_utils",exports);(_exports$optional_mod=(_exports=exports).optional_modules)!=null||(_exports.optional_modules={})}});var require_array_method_is_strict=__commonJS({"node_modules/core-js/internals/array-method-is-strict.js"(exports,module){"use strict";init_define_process_env();init_shim();var fails=require_fails();module.exports=function(METHOD_NAME,argument){var method=[][METHOD_NAME];return!!method&&fails(function(){method.call(null,argument||function(){throw 1},1)})}}});var require_array_for_each=__commonJS({"node_modules/core-js/internals/array-for-each.js"(exports,module){"use strict";init_define_process_env();init_shim();var $forEach=require_array_iteration().forEach,arrayMethodIsStrict=require_array_method_is_strict(),STRICT_METHOD=arrayMethodIsStrict("forEach");module.exports=STRICT_METHOD?[].forEach:function(callbackfn){return $forEach(this,callbackfn,arguments.length>1?arguments[1]:void 0)}}});var require_web_dom_collections_for_each=__commonJS({"node_modules/core-js/modules/web.dom-collections.for-each.js"(){init_define_process_env();init_shim();var global=require_global(),DOMIterables=require_dom_iterables(),DOMTokenListPrototype=require_dom_token_list_prototype(),forEach=require_array_for_each(),createNonEnumerableProperty=require_create_non_enumerable_property(),handlePrototype=function(CollectionPrototype){if(CollectionPrototype&&CollectionPrototype.forEach!==forEach)try{createNonEnumerableProperty(CollectionPrototype,"forEach",forEach)}catch(error){CollectionPrototype.forEach=forEach}};for(COLLECTION_NAME in DOMIterables)DOMIterables[COLLECTION_NAME]&&handlePrototype(global[COLLECTION_NAME]&&global[COLLECTION_NAME].prototype);var COLLECTION_NAME;handlePrototype(DOMTokenListPrototype)}});var require_es_array_includes=__commonJS({"node_modules/core-js/modules/es.array.includes.js"(){"use strict";init_define_process_env();init_shim();var $2=require_export(),$includes=require_array_includes().includes,addToUnscopables=require_add_to_unscopables();$2({target:"Array",proto:!0},{includes:function(el){return $includes(this,el,arguments.length>1?arguments[1]:void 0)}});addToUnscopables("includes")}});var require_is_regexp=__commonJS({"node_modules/core-js/internals/is-regexp.js"(exports,module){init_define_process_env();init_shim();var isObject=require_is_object(),classof=require_classof_raw(),wellKnownSymbol=require_well_known_symbol(),MATCH=wellKnownSymbol("match");module.exports=function(it){var isRegExp;return isObject(it)&&((isRegExp=it[MATCH])!==void 0?!!isRegExp:classof(it)=="RegExp")}}});var require_not_a_regexp=__commonJS({"node_modules/core-js/internals/not-a-regexp.js"(exports,module){init_define_process_env();init_shim();var global=require_global(),isRegExp=require_is_regexp(),TypeError2=global.TypeError;module.exports=function(it){if(isRegExp(it))throw TypeError2("The method doesn't accept regular expressions");return it}}});var require_correct_is_regexp_logic=__commonJS({"node_modules/core-js/internals/correct-is-regexp-logic.js"(exports,module){init_define_process_env();init_shim();var wellKnownSymbol=require_well_known_symbol(),MATCH=wellKnownSymbol("match");module.exports=function(METHOD_NAME){var regexp=/./;try{"/./"[METHOD_NAME](regexp)}catch(error1){try{return regexp[MATCH]=!1,"/./"[METHOD_NAME](regexp)}catch(error2){}}return!1}}});var require_es_string_includes=__commonJS({"node_modules/core-js/modules/es.string.includes.js"(){"use strict";init_define_process_env();init_shim();var $2=require_export(),uncurryThis=require_function_uncurry_this(),notARegExp=require_not_a_regexp(),requireObjectCoercible=require_require_object_coercible(),toString=require_to_string(),correctIsRegExpLogic=require_correct_is_regexp_logic(),stringIndexOf=uncurryThis("".indexOf);$2({target:"String",proto:!0,forced:!correctIsRegExpLogic("includes")},{includes:function(searchString){return!!~stringIndexOf(toString(requireObjectCoercible(this)),toString(notARegExp(searchString)),arguments.length>1?arguments[1]:void 0)}})}});var require_es_symbol_description=__commonJS({"node_modules/core-js/modules/es.symbol.description.js"(){"use strict";init_define_process_env();init_shim();var $2=require_export(),DESCRIPTORS=require_descriptors(),global=require_global(),uncurryThis=require_function_uncurry_this(),hasOwn=require_has_own_property(),isCallable=require_is_callable(),isPrototypeOf=require_object_is_prototype_of(),toString=require_to_string(),defineProperty=require_object_define_property().f,copyConstructorProperties=require_copy_constructor_properties(),NativeSymbol=global.Symbol,SymbolPrototype=NativeSymbol&&NativeSymbol.prototype;DESCRIPTORS&&isCallable(NativeSymbol)&&(!("description"in SymbolPrototype)||NativeSymbol().description!==void 0)&&(EmptyStringDescriptionStore={},SymbolWrapper=function(){var description=arguments.length<1||arguments[0]===void 0?void 0:toString(arguments[0]),result=isPrototypeOf(SymbolPrototype,this)?new NativeSymbol(description):description===void 0?NativeSymbol():NativeSymbol(description);return description===""&&(EmptyStringDescriptionStore[result]=!0),result},copyConstructorProperties(SymbolWrapper,NativeSymbol),SymbolWrapper.prototype=SymbolPrototype,SymbolPrototype.constructor=SymbolWrapper,NATIVE_SYMBOL=String(NativeSymbol("test"))=="Symbol(test)",symbolToString=uncurryThis(SymbolPrototype.toString),symbolValueOf=uncurryThis(SymbolPrototype.valueOf),regexp=/^Symbol\((.*)\)[^)]+$/,replace=uncurryThis("".replace),stringSlice=uncurryThis("".slice),defineProperty(SymbolPrototype,"description",{configurable:!0,get:function(){var symbol=symbolValueOf(this),string=symbolToString(symbol);if(hasOwn(EmptyStringDescriptionStore,symbol))return"";var desc=NATIVE_SYMBOL?stringSlice(string,7,-1):replace(string,regexp,"$1");return desc===""?void 0:desc}}),$2({global:!0,forced:!0},{Symbol:SymbolWrapper}));var EmptyStringDescriptionStore,SymbolWrapper,NATIVE_SYMBOL,symbolToString,symbolValueOf,regexp,replace,stringSlice}});var require_es_object_get_own_property_descriptors=__commonJS({"node_modules/core-js/modules/es.object.get-own-property-descriptors.js"(){init_define_process_env();init_shim();var $2=require_export(),DESCRIPTORS=require_descriptors(),ownKeys2=require_own_keys(),toIndexedObject=require_to_indexed_object(),getOwnPropertyDescriptorModule=require_object_get_own_property_descriptor(),createProperty=require_create_property();$2({target:"Object",stat:!0,sham:!DESCRIPTORS},{getOwnPropertyDescriptors:function(object2){for(var O=toIndexedObject(object2),getOwnPropertyDescriptor=getOwnPropertyDescriptorModule.f,keys=ownKeys2(O),result={},index=0,key,descriptor;keys.length>index;)descriptor=getOwnPropertyDescriptor(O,key=keys[index++]),descriptor!==void 0&&createProperty(result,key,descriptor);return result}})}});var require_regexp_flags=__commonJS({"node_modules/core-js/internals/regexp-flags.js"(exports,module){"use strict";init_define_process_env();init_shim();var anObject=require_an_object();module.exports=function(){var that=anObject(this),result="";return that.global&&(result+="g"),that.ignoreCase&&(result+="i"),that.multiline&&(result+="m"),that.dotAll&&(result+="s"),that.unicode&&(result+="u"),that.sticky&&(result+="y"),result}}});var require_es_regexp_to_string=__commonJS({"node_modules/core-js/modules/es.regexp.to-string.js"(){"use strict";init_define_process_env();init_shim();var uncurryThis=require_function_uncurry_this(),PROPER_FUNCTION_NAME=require_function_name().PROPER,redefine=require_redefine(),anObject=require_an_object(),isPrototypeOf=require_object_is_prototype_of(),$toString=require_to_string(),fails=require_fails(),regExpFlags=require_regexp_flags(),TO_STRING="toString",RegExpPrototype=RegExp.prototype,n$ToString=RegExpPrototype[TO_STRING],getFlags=uncurryThis(regExpFlags),NOT_GENERIC=fails(function(){return n$ToString.call({source:"a",flags:"b"})!="/a/b"}),INCORRECT_NAME=PROPER_FUNCTION_NAME&&n$ToString.name!=TO_STRING;(NOT_GENERIC||INCORRECT_NAME)&&redefine(RegExp.prototype,TO_STRING,function(){var R=anObject(this),p=$toString(R.source),rf=R.flags,f=$toString(rf===void 0&&isPrototypeOf(RegExpPrototype,R)&&!("flags"in RegExpPrototype)?getFlags(R):rf);return"/"+p+"/"+f},{unsafe:!0})}});var require_object_assign=__commonJS({"node_modules/core-js/internals/object-assign.js"(exports,module){"use strict";init_define_process_env();init_shim();var DESCRIPTORS=require_descriptors(),uncurryThis=require_function_uncurry_this(),call=require_function_call(),fails=require_fails(),objectKeys=require_object_keys(),getOwnPropertySymbolsModule=require_object_get_own_property_symbols(),propertyIsEnumerableModule=require_object_property_is_enumerable(),toObject=require_to_object(),IndexedObject=require_indexed_object(),$assign=Object.assign,defineProperty=Object.defineProperty,concat=uncurryThis([].concat);module.exports=!$assign||fails(function(){if(DESCRIPTORS&&$assign({b:1},$assign(defineProperty({},"a",{enumerable:!0,get:function(){defineProperty(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var A={},B={},symbol=Symbol(),alphabet="abcdefghijklmnopqrst";return A[symbol]=7,alphabet.split("").forEach(function(chr){B[chr]=chr}),$assign({},A)[symbol]!=7||objectKeys($assign({},B)).join("")!=alphabet})?function(target,source){for(var T=toObject(target),argumentsLength=arguments.length,index=1,getOwnPropertySymbols=getOwnPropertySymbolsModule.f,propertyIsEnumerable=propertyIsEnumerableModule.f;argumentsLength>index;)for(var S=IndexedObject(arguments[index++]),keys=getOwnPropertySymbols?concat(objectKeys(S),getOwnPropertySymbols(S)):objectKeys(S),length=keys.length,j=0,key;length>j;)key=keys[j++],(!DESCRIPTORS||call(propertyIsEnumerable,S,key))&&(T[key]=S[key]);return T}:$assign}});var require_es_object_assign=__commonJS({"node_modules/core-js/modules/es.object.assign.js"(){init_define_process_env();init_shim();var $2=require_export(),assign2=require_object_assign();$2({target:"Object",stat:!0,forced:Object.assign!==assign2},{assign:assign2})}});var require_regexp_sticky_helpers=__commonJS({"node_modules/core-js/internals/regexp-sticky-helpers.js"(exports,module){init_define_process_env();init_shim();var fails=require_fails(),global=require_global(),$RegExp=global.RegExp,UNSUPPORTED_Y=fails(function(){var re=$RegExp("a","y");return re.lastIndex=2,re.exec("abcd")!=null}),MISSED_STICKY=UNSUPPORTED_Y||fails(function(){return!$RegExp("a","y").sticky}),BROKEN_CARET=UNSUPPORTED_Y||fails(function(){var re=$RegExp("^r","gy");return re.lastIndex=2,re.exec("str")!=null});module.exports={BROKEN_CARET,MISSED_STICKY,UNSUPPORTED_Y}}});var require_regexp_unsupported_dot_all=__commonJS({"node_modules/core-js/internals/regexp-unsupported-dot-all.js"(exports,module){init_define_process_env();init_shim();var fails=require_fails(),global=require_global(),$RegExp=global.RegExp;module.exports=fails(function(){var re=$RegExp(".","s");return!(re.dotAll&&re.exec("\n")&&re.flags==="s")})}});var require_regexp_unsupported_ncg=__commonJS({"node_modules/core-js/internals/regexp-unsupported-ncg.js"(exports,module){init_define_process_env();init_shim();var fails=require_fails(),global=require_global(),$RegExp=global.RegExp;module.exports=fails(function(){var re=$RegExp("(?<a>b)","g");return re.exec("b").groups.a!=="b"||"b".replace(re,"$<a>c")!=="bc"})}});var require_regexp_exec=__commonJS({"node_modules/core-js/internals/regexp-exec.js"(exports,module){"use strict";init_define_process_env();init_shim();var call=require_function_call(),uncurryThis=require_function_uncurry_this(),toString=require_to_string(),regexpFlags=require_regexp_flags(),stickyHelpers=require_regexp_sticky_helpers(),shared=require_shared(),create=require_object_create(),getInternalState=require_internal_state().get,UNSUPPORTED_DOT_ALL=require_regexp_unsupported_dot_all(),UNSUPPORTED_NCG=require_regexp_unsupported_ncg(),nativeReplace=shared("native-string-replace",String.prototype.replace),nativeExec=RegExp.prototype.exec,patchedExec=nativeExec,charAt=uncurryThis("".charAt),indexOf=uncurryThis("".indexOf),replace=uncurryThis("".replace),stringSlice=uncurryThis("".slice),UPDATES_LAST_INDEX_WRONG=function(){var re1=/a/,re2=/b*/g;return call(nativeExec,re1,"a"),call(nativeExec,re2,"a"),re1.lastIndex!==0||re2.lastIndex!==0}(),UNSUPPORTED_Y=stickyHelpers.BROKEN_CARET,NPCG_INCLUDED=/()??/.exec("")[1]!==void 0,PATCH=UPDATES_LAST_INDEX_WRONG||NPCG_INCLUDED||UNSUPPORTED_Y||UNSUPPORTED_DOT_ALL||UNSUPPORTED_NCG;PATCH&&(patchedExec=function(string){var re=this,state=getInternalState(re),str=toString(string),raw=state.raw,result,reCopy,lastIndex,match,i,object2,group;if(raw)return raw.lastIndex=re.lastIndex,result=call(patchedExec,raw,str),re.lastIndex=raw.lastIndex,result;var groups=state.groups,sticky=UNSUPPORTED_Y&&re.sticky,flags=call(regexpFlags,re),source=re.source,charsAdded=0,strCopy=str;if(sticky&&(flags=replace(flags,"y",""),indexOf(flags,"g")===-1&&(flags+="g"),strCopy=stringSlice(str,re.lastIndex),re.lastIndex>0&&(!re.multiline||re.multiline&&charAt(str,re.lastIndex-1)!=="\n")&&(source="(?: "+source+")",strCopy=" "+strCopy,charsAdded++),reCopy=new RegExp("^(?:"+source+")",flags)),NPCG_INCLUDED&&(reCopy=new RegExp("^"+source+"$(?!\\s)",flags)),UPDATES_LAST_INDEX_WRONG&&(lastIndex=re.lastIndex),match=call(nativeExec,sticky?reCopy:re,strCopy),sticky?match?(match.input=stringSlice(match.input,charsAdded),match[0]=stringSlice(match[0],charsAdded),match.index=re.lastIndex,re.lastIndex+=match[0].length):re.lastIndex=0:UPDATES_LAST_INDEX_WRONG&&match&&(re.lastIndex=re.global?match.index+match[0].length:lastIndex),NPCG_INCLUDED&&match&&match.length>1&&call(nativeReplace,match[0],reCopy,function(){for(i=1;i<arguments.length-2;i++)arguments[i]===void 0&&(match[i]=void 0)}),match&&groups)for(match.groups=object2=create(null),i=0;i<groups.length;i++)group=groups[i],object2[group[0]]=match[group[1]];return match});module.exports=patchedExec}});var require_es_regexp_exec=__commonJS({"node_modules/core-js/modules/es.regexp.exec.js"(){"use strict";init_define_process_env();init_shim();var $2=require_export(),exec=require_regexp_exec();$2({target:"RegExp",proto:!0,forced:/./.exec!==exec},{exec})}});var require_es_regexp_test=__commonJS({"node_modules/core-js/modules/es.regexp.test.js"(){"use strict";init_define_process_env();init_shim();require_es_regexp_exec();var $2=require_export(),global=require_global(),call=require_function_call(),uncurryThis=require_function_uncurry_this(),isCallable=require_is_callable(),isObject=require_is_object(),DELEGATES_TO_EXEC=function(){var execCalled=!1,re=/[ac]/;return re.exec=function(){return execCalled=!0,/./.exec.apply(this,arguments)},re.test("abc")===!0&&execCalled}(),Error2=global.Error,un$Test=uncurryThis(/./.test);$2({target:"RegExp",proto:!0,forced:!DELEGATES_TO_EXEC},{test:function(str){var exec=this.exec;if(!isCallable(exec))return un$Test(this,str);var result=call(exec,this,str);if(result!==null&&!isObject(result))throw new Error2("RegExp exec method returned something other than an Object or null");return!!result}})}});var require_isBufferBrowser=__commonJS({"node_modules/util/support/isBufferBrowser.js"(exports,module){init_define_process_env();init_shim();module.exports=function(arg){return arg&&typeof arg=="object"&&typeof arg.copy=="function"&&typeof arg.fill=="function"&&typeof arg.readUInt8=="function"}}});var require_inherits_browser=__commonJS({"node_modules/util/node_modules/inherits/inherits_browser.js"(exports,module){init_define_process_env();init_shim();typeof Object.create=="function"?module.exports=function(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype,ctor.prototype=new TempCtor,ctor.prototype.constructor=ctor}}});var require_util=__commonJS({"node_modules/util/util.js"(exports){init_define_process_env();init_shim();var formatRegExp=/%[sdj%]/g;exports.format=function(f){if(!isString(f)){for(var objects=[],i=0;i<arguments.length;i++)objects.push(inspect(arguments[i]));return objects.join(" ")}for(var i=1,args=arguments,len=args.length,str=String(f).replace(formatRegExp,function(x2){if(x2==="%%")return"%";if(i>=len)return x2;switch(x2){case"%s":return String(args[i++]);case"%d":return Number(args[i++]);case"%j":try{return JSON.stringify(args[i++])}catch(_){return"[Circular]"}default:return x2}}),x=args[i];i<len;x=args[++i])isNull(x)||!isObject(x)?str+=" "+x:str+=" "+inspect(x);return str};exports.deprecate=function(fn,msg){if(isUndefined(window.process))return function(){return exports.deprecate(fn,msg).apply(this,arguments)};if(import_process.default.noDeprecation===!0)return fn;var warned=!1;function deprecated(){if(!warned){if(import_process.default.throwDeprecation)throw new Error(msg);import_process.default.traceDeprecation?console.trace(msg):console.error(msg),warned=!0}return fn.apply(this,arguments)}return deprecated};var debugs={},debugEnviron;exports.debuglog=function(set){if(isUndefined(debugEnviron)&&(debugEnviron=define_process_env_default.NODE_DEBUG||""),set=set.toUpperCase(),!debugs[set])if(new RegExp("\\b"+set+"\\b","i").test(debugEnviron)){var pid=import_process.default.pid;debugs[set]=function(){var msg=exports.format.apply(exports,arguments);console.error("%s %d: %s",set,pid,msg)}}else debugs[set]=function(){};return debugs[set]};function inspect(obj,opts){var ctx={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(ctx.depth=arguments[2]),arguments.length>=4&&(ctx.colors=arguments[3]),isBoolean(opts)?ctx.showHidden=opts:opts&&exports._extend(ctx,opts),isUndefined(ctx.showHidden)&&(ctx.showHidden=!1),isUndefined(ctx.depth)&&(ctx.depth=2),isUndefined(ctx.colors)&&(ctx.colors=!1),isUndefined(ctx.customInspect)&&(ctx.customInspect=!0),ctx.colors&&(ctx.stylize=stylizeWithColor),formatValue(ctx,obj,ctx.depth)}exports.inspect=inspect;inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function stylizeWithColor(str,styleType){var style2=inspect.styles[styleType];return style2?"\x1B["+inspect.colors[style2][0]+"m"+str+"\x1B["+inspect.colors[style2][1]+"m":str}function stylizeNoColor(str,styleType){return str}function arrayToHash(array){var hash={};return array.forEach(function(val,idx){hash[val]=!0}),hash}function formatValue(ctx,value,recurseTimes){if(ctx.customInspect&&value&&isFunction(value.inspect)&&value.inspect!==exports.inspect&&!(value.constructor&&value.constructor.prototype===value)){var ret=value.inspect(recurseTimes,ctx);return isString(ret)||(ret=formatValue(ctx,ret,recurseTimes)),ret}var primitive=formatPrimitive(ctx,value);if(primitive)return primitive;var keys=Object.keys(value),visibleKeys=arrayToHash(keys);if(ctx.showHidden&&(keys=Object.getOwnPropertyNames(value)),isError(value)&&(keys.indexOf("message")>=0||keys.indexOf("description")>=0))return formatError(value);if(keys.length===0){if(isFunction(value)){var name=value.name?": "+value.name:"";return ctx.stylize("[Function"+name+"]","special")}if(isRegExp(value))return ctx.stylize(RegExp.prototype.toString.call(value),"regexp");if(isDate(value))return ctx.stylize(Date.prototype.toString.call(value),"date");if(isError(value))return formatError(value)}var base="",array=!1,braces=["{","}"];if(isArray(value)&&(array=!0,braces=["[","]"]),isFunction(value)){var n=value.name?": "+value.name:"";base=" [Function"+n+"]"}if(isRegExp(value)&&(base=" "+RegExp.prototype.toString.call(value)),isDate(value)&&(base=" "+Date.prototype.toUTCString.call(value)),isError(value)&&(base=" "+formatError(value)),keys.length===0&&(!array||value.length==0))return braces[0]+base+braces[1];if(recurseTimes<0)return isRegExp(value)?ctx.stylize(RegExp.prototype.toString.call(value),"regexp"):ctx.stylize("[Object]","special");ctx.seen.push(value);var output;return array?output=formatArray(ctx,value,recurseTimes,visibleKeys,keys):output=keys.map(function(key){return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array)}),ctx.seen.pop(),reduceToSingleString(output,base,braces)}function formatPrimitive(ctx,value){if(isUndefined(value))return ctx.stylize("undefined","undefined");if(isString(value)){var simple="'"+JSON.stringify(value).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ctx.stylize(simple,"string")}if(isNumber(value))return ctx.stylize(""+value,"number");if(isBoolean(value))return ctx.stylize(""+value,"boolean");if(isNull(value))return ctx.stylize("null","null")}function formatError(value){return"["+Error.prototype.toString.call(value)+"]"}function formatArray(ctx,value,recurseTimes,visibleKeys,keys){for(var output=[],i=0,l=value.length;i<l;++i)hasOwnProperty2(value,String(i))?output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,String(i),!0)):output.push("");return keys.forEach(function(key){key.match(/^\d+$/)||output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,!0))}),output}function formatProperty(ctx,value,recurseTimes,visibleKeys,key,array){var name,str,desc;if(desc=Object.getOwnPropertyDescriptor(value,key)||{value:value[key]},desc.get?desc.set?str=ctx.stylize("[Getter/Setter]","special"):str=ctx.stylize("[Getter]","special"):desc.set&&(str=ctx.stylize("[Setter]","special")),hasOwnProperty2(visibleKeys,key)||(name="["+key+"]"),str||(ctx.seen.indexOf(desc.value)<0?(isNull(recurseTimes)?str=formatValue(ctx,desc.value,null):str=formatValue(ctx,desc.value,recurseTimes-1),str.indexOf("\n")>-1&&(array?str=str.split("\n").map(function(line){return"  "+line}).join("\n").substr(2):str="\n"+str.split("\n").map(function(line){return"   "+line}).join("\n"))):str=ctx.stylize("[Circular]","special")),isUndefined(name)){if(array&&key.match(/^\d+$/))return str;name=JSON.stringify(""+key),name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(name=name.substr(1,name.length-2),name=ctx.stylize(name,"name")):(name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),name=ctx.stylize(name,"string"))}return name+": "+str}function reduceToSingleString(output,base,braces){var numLinesEst=0,length=output.reduce(function(prev,cur){return numLinesEst++,cur.indexOf("\n")>=0&&numLinesEst++,prev+cur.replace(/\u001b\[\d\d?m/g,"").length+1},0);return length>60?braces[0]+(base===""?"":base+"\n ")+" "+output.join(",\n  ")+" "+braces[1]:braces[0]+base+" "+output.join(", ")+" "+braces[1]}function isArray(ar){return Array.isArray(ar)}exports.isArray=isArray;function isBoolean(arg){return typeof arg=="boolean"}exports.isBoolean=isBoolean;function isNull(arg){return arg===null}exports.isNull=isNull;function isNullOrUndefined(arg){return arg==null}exports.isNullOrUndefined=isNullOrUndefined;function isNumber(arg){return typeof arg=="number"}exports.isNumber=isNumber;function isString(arg){return typeof arg=="string"}exports.isString=isString;function isSymbol(arg){return typeof arg=="symbol"}exports.isSymbol=isSymbol;function isUndefined(arg){return arg===void 0}exports.isUndefined=isUndefined;function isRegExp(re){return isObject(re)&&objectToString(re)==="[object RegExp]"}exports.isRegExp=isRegExp;function isObject(arg){return typeof arg=="object"&&arg!==null}exports.isObject=isObject;function isDate(d){return isObject(d)&&objectToString(d)==="[object Date]"}exports.isDate=isDate;function isError(e){return isObject(e)&&(objectToString(e)==="[object Error]"||e instanceof Error)}exports.isError=isError;function isFunction(arg){return typeof arg=="function"}exports.isFunction=isFunction;function isPrimitive(arg){return arg===null||typeof arg=="boolean"||typeof arg=="number"||typeof arg=="string"||typeof arg=="symbol"||typeof arg>"u"}exports.isPrimitive=isPrimitive;exports.isBuffer=require_isBufferBrowser();function objectToString(o){return Object.prototype.toString.call(o)}function pad(n){return n<10?"0"+n.toString(10):n.toString(10)}var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function timestamp(){var d=new Date,time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(":");return[d.getDate(),months[d.getMonth()],time].join(" ")}exports.log=function(){console.log("%s - %s",timestamp(),exports.format.apply(exports,arguments))};exports.inherits=require_inherits_browser();exports._extend=function(origin,add){if(!add||!isObject(add))return origin;for(var keys=Object.keys(add),i=keys.length;i--;)origin[keys[i]]=add[keys[i]];return origin};function hasOwnProperty2(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}}});var require_postgres_pool=__commonJS({"lib-browser-old/constants/postgres_pool.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.mapping_error_regex=exports.ZERO_CLIENTS_NO_SLOTS_MSG=exports.USER_REQUESTED_CANCEL_CODE=exports.USERDB_NAME=exports.TIMEOUT_QUERY_MSG=exports.TIMEOUT_MSG=exports.STRING_TOO_LONG_FOR_TSVECTOR=exports.SOURCE_DOES_NOT_EXIST=exports.RELATION_DOES_NOT_EXIST=exports.QUERY_TIMEOUTS=exports.POOL_QUERY_OVER_THRESHOLD_MSG=exports.PLV8_EXECUTION_ERROR_CODE=exports.PG_CLIENT_ERR_PROPAGATED_MSG=exports.PG_CLIENT_ERR_MSG=exports.PG_CLIENT_DESTRUCTION_ERR=exports.PG_CLIENT_CANNOT_CONNECT_ERR=exports.PERCOLATE_NAME=exports.MULTI_UPSERT_RETRY_WARN_THRESHOLD=exports.MULTI_UPSERT_RETRY_SPEND_TIME_MS=exports.MULTI_UPSERT_MIN_EXP_BACKOFF_MS=exports.MULTI_UPSERT_MAX_EXP_BACKOFF_MS=exports.MAGIC_POOL_READY_STRING=exports.DEFAULT_QUERY_NAME=exports.CONCURRENT_TRANSACTION_ERROR_CODE=exports.APP_ALREADY_EXISTS=exports.APPSERVER_NAME=void 0;var QUERY_TIMEOUTS={upsert:1e4,get:1e4,search:1e4,group_by:1e4,aggregate:1e4,aggregate_sql:1e4,percolate:1e4,watch_search:1e4,set_ttl:1e4,mget:1e4,evaluate_search:1e4,check_next_run:1e4,get_next_task:3e4,check_operation_state:6e4,delete_app:6e4,add_mapping:6e4,build_concurrent_index:6e4,clear_expired:6e4,clear_searches:6e4,clean_app_references:6e4,clean_deletions:6e4,last_snapshot_time:5e3,get_restore_history:5e3,add_new_annotation:5e3,get_id_counter:5e3,delete_metadata2:5e3,list_apps_by_plugin:5e3,get_plugin_count:1e4,list_plugins_by_count:5e3,read_keys:5e3,read_path:5e3,read_paths:5e3,write_changes2:5e3,snapshot:3e4,delete_app_version:3e4,restore_to:3e4,find_unowned_apps:3e4,copy_app_version:3e4,remove_old_history:3e4,get_indexes:2e4,list_changes:2e4};exports.QUERY_TIMEOUTS=QUERY_TIMEOUTS;var MULTI_UPSERT_MIN_EXP_BACKOFF_MS=250;exports.MULTI_UPSERT_MIN_EXP_BACKOFF_MS=MULTI_UPSERT_MIN_EXP_BACKOFF_MS;var MULTI_UPSERT_MAX_EXP_BACKOFF_MS=4e3;exports.MULTI_UPSERT_MAX_EXP_BACKOFF_MS=MULTI_UPSERT_MAX_EXP_BACKOFF_MS;var MULTI_UPSERT_RETRY_WARN_THRESHOLD=30;exports.MULTI_UPSERT_RETRY_WARN_THRESHOLD=MULTI_UPSERT_RETRY_WARN_THRESHOLD;var MULTI_UPSERT_RETRY_SPEND_TIME_MS=10;exports.MULTI_UPSERT_RETRY_SPEND_TIME_MS=MULTI_UPSERT_RETRY_SPEND_TIME_MS;var POOL_QUERY_OVER_THRESHOLD_MSG="Pool query over threshold";exports.POOL_QUERY_OVER_THRESHOLD_MSG=POOL_QUERY_OVER_THRESHOLD_MSG;var ZERO_CLIENTS_NO_SLOTS_MSG="postgres_pool.coffee: ready clients and empty clients at 0";exports.ZERO_CLIENTS_NO_SLOTS_MSG=ZERO_CLIENTS_NO_SLOTS_MSG;var TIMEOUT_MSG="postgres_pool.coffee: query exceeded timeout";exports.TIMEOUT_MSG=TIMEOUT_MSG;var TIMEOUT_QUERY_MSG="postgres_pool.coffee: timing out query";exports.TIMEOUT_QUERY_MSG=TIMEOUT_QUERY_MSG;var PG_CLIENT_ERR_MSG="Postgres pool: client got an unhandled error";exports.PG_CLIENT_ERR_MSG=PG_CLIENT_ERR_MSG;var PG_CLIENT_ERR_PROPAGATED_MSG="destroying client that had an unhandled error";exports.PG_CLIENT_ERR_PROPAGATED_MSG=PG_CLIENT_ERR_PROPAGATED_MSG;var PG_CLIENT_DESTRUCTION_ERR="Destroying client due to unexpected error";exports.PG_CLIENT_DESTRUCTION_ERR=PG_CLIENT_DESTRUCTION_ERR;var PG_CLIENT_CANNOT_CONNECT_ERR="Postgres pool: unable to connect";exports.PG_CLIENT_CANNOT_CONNECT_ERR=PG_CLIENT_CANNOT_CONNECT_ERR;var RELATION_DOES_NOT_EXIST="42P01";exports.RELATION_DOES_NOT_EXIST=RELATION_DOES_NOT_EXIST;var USER_REQUESTED_CANCEL_CODE="57014";exports.USER_REQUESTED_CANCEL_CODE=USER_REQUESTED_CANCEL_CODE;var APP_ALREADY_EXISTS="App already exists, cannot copy";exports.APP_ALREADY_EXISTS=APP_ALREADY_EXISTS;var SOURCE_DOES_NOT_EXIST="Source app does not exist";exports.SOURCE_DOES_NOT_EXIST=SOURCE_DOES_NOT_EXIST;var mapping_error_regex=/MAPPING:([^\n]+)/;exports.mapping_error_regex=mapping_error_regex;var PLV8_EXECUTION_ERROR_CODE="XX000";exports.PLV8_EXECUTION_ERROR_CODE=PLV8_EXECUTION_ERROR_CODE;var CONCURRENT_TRANSACTION_ERROR_CODE="40001";exports.CONCURRENT_TRANSACTION_ERROR_CODE=CONCURRENT_TRANSACTION_ERROR_CODE;var STRING_TOO_LONG_FOR_TSVECTOR="54000";exports.STRING_TOO_LONG_FOR_TSVECTOR=STRING_TOO_LONG_FOR_TSVECTOR;var PERCOLATE_NAME="percolatedb";exports.PERCOLATE_NAME=PERCOLATE_NAME;var USERDB_NAME="userdb";exports.USERDB_NAME=USERDB_NAME;var APPSERVER_NAME="appserver";exports.APPSERVER_NAME=APPSERVER_NAME;var MAGIC_POOL_READY_STRING="POOL_READY";exports.MAGIC_POOL_READY_STRING=MAGIC_POOL_READY_STRING;var DEFAULT_QUERY_NAME="unnamed_query";exports.DEFAULT_QUERY_NAME=DEFAULT_QUERY_NAME}});var require_loggable=__commonJS({"lib-browser-old/u/shared/loggable.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.to_loggable=to_loggable;function to_loggable(data){return data}}});var require_errors=__commonJS({"lib-browser-old/u/shared/errors.js"(exports){"use strict";init_define_process_env();init_shim();require_es_symbol_description();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.UserError=exports.UsageLimitError=exports.UsageLimitAction=exports.UnexpectedPostgresError=exports.UnexpectedError=exports.UnauthorizedEmployee=exports.Unauthorized=exports.StripePaymentRequiresAction=exports.OwnerError=exports.NotReadyError=exports.ExpectedError=exports.ERROR_LEVELS=exports.BubbleError=void 0;exports.capture_stack=capture_stack;exports.clean_args=clean_args;exports.ensure_bubble_error=ensure_bubble_error;exports.error_append=error_append;exports.error_append_args=error_append_args;exports.format_data_for_logging=format_data_for_logging;exports.format_for_logging=format_for_logging;exports.from_json_client=from_json_client;exports.get_status_code=get_status_code;exports.is_mapping_error=is_mapping_error;exports.set_error_hook=set_error_hook;exports.throw_test_error=throw_test_error;exports.to_owner_display=to_owner_display;require_es_error_cause();require_es_array_iterator();require_web_dom_collections_iterator();require_es_regexp_to_string();require_es_object_assign();require_es_array_includes();require_es_string_includes();require_es_regexp_exec();require_es_regexp_test();var util=_interopRequireWildcard(require_util()),postgres_pool_consts=_interopRequireWildcard(require_postgres_pool()),_loggable=require_loggable();function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var LAST_RESORT_ERROR_MESSAGE="Sorry, we ran into a temporary bug and can't complete your request.  We'll fix it as soon as we can; please try again in a bit!",ERROR_LEVELS=["error","owner_error","user_error"];exports.ERROR_LEVELS=ERROR_LEVELS;function isErrorLike(err){return typeof err=="object"&&err!=null&&(err instanceof Error||"stack"in err&&"message"in err)}var hooks={default_display(){},localize_message(plugin,name){},get_client_args(all_args){}};function set_error_hook(name,fn){if(name in hooks)hooks[name]=fn;else throw new UnexpectedError("attempt to set invalid error hook",{name})}function default_display(){var _hooks$default_displa;return(_hooks$default_displa=hooks.default_display())!=null?_hooks$default_displa:LAST_RESORT_ERROR_MESSAGE}function localize_message(plugin,name){var _hooks$localize_messa;return(_hooks$localize_messa=hooks.localize_message(plugin,name))!=null?_hooks$localize_messa:"".concat(plugin,": ").concat(name)}function get_client_args(args){var _hooks$get_client_arg,_args$code;return(_hooks$get_client_arg=hooks.get_client_args(args))!=null?_hooks$get_client_arg:{code:(_args$code=args.code)!=null?_args$code:"no code found"}}function ensure_bubble_error(err){if(err instanceof BubbleError)return err;if(err instanceof NotReadyError)return new UnexpectedError("not ready",{not_ready_key_id:err.not_ready_key._id,not_ready_key_turned:err.not_ready_key.is_turned(),not_ready_key_listener_count:err.not_ready_key._listener_count});if(isErrorLike(err)){let args=_objectSpread({origin:"native error"},err),ret=new UnexpectedError(err.message,args);return err.stack!=null&&(ret.stack=err.stack),ret}return typeof err=="string"?new UnexpectedError(err):new UnexpectedError("object thrown as error",{original:(0,_loggable.to_loggable)(err)})}function capture_stack(message){let cut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=new Error,{stack}=e;return typeof stack!="string"&&(stack="(no stack)"),stack=stack.split("\n").slice(3+cut).join("\n"),message+"\n"+stack}var MAX_OBJECT_NODES=1e4,MAX_OBJECT_KEYS=1e3,FN_SOURCE_CHARS_TO_RETAIN=50;function clean_args(to_clean){let{args,path=[],to_client=!1,visited_objects=new Map}=to_clean;if(typeof args=="function")return args.toString().slice(0,FN_SOURCE_CHARS_TO_RETAIN);if(typeof args!="object"||args==null)return args;let seen_path=visited_objects.get(args);if(seen_path){let pretty_path=["root",...seen_path].join(".");return"recursion or repeated property: ".concat(pretty_path)}if(visited_objects.set(args,path),path.length>10)return"hit recursion depth > 10 when processing args";if(visited_objects.size>MAX_OBJECT_NODES)return"hit max object nodes when processing args";if(args instanceof Error)return ensure_bubble_error(args).to_json({to_client,path,visited_objects});if(typeof args.id=="function")try{return args.id()}catch(e){return"hit error trying to get args.id"}if(typeof args.toUniqueString=="function")try{return args.toUniqueString()}catch(e){return"hit error trying to get args.toUniqueString"}if(Array.isArray(args)){let new_obj=args.slice(0,MAX_OBJECT_KEYS).map((v,i)=>clean_args({args:v,path:path.concat(String(i)),visited_objects}));return new_obj.length<args.length&&new_obj.push("hit max keys when processing args"),new_obj}else{let new_obj={},key_count=0;for(let k in args){if(key_count+=1,key_count>MAX_OBJECT_KEYS){new_obj[k]="hit max keys when processing args";break}let v=args[k];new_obj[k]=clean_args({args:v,path:path.concat(k),visited_objects})}return new_obj}}var BubbleError=class extends Error{constructor(message,args){var _this$stack;super(message),this.args=void 0,this.statusCode=void 0,this.message=message,(_this$stack=this.stack)!=null||(this.stack=capture_stack(this.error_class+" "+this.message,1)),args!=null&&typeof args=="object"?this.args=args:this.args={}}static from(message,args){return new this(message,args)}display(){return default_display()}toString(){return this.error_class+" "+this.message}to_json(){let options=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{to_client=!1,path=[],visited_objects=new Map}=options,cleaned=clean_args({args:this.args,path,to_client,visited_objects}),data={error_class:this.error_class,args:cleaned!=null?cleaned:{}};return to_client?_objectSpread(_objectSpread({},data),{},{args:get_client_args(data.args),message:this.display()}):_objectSpread(_objectSpread({},data),{},{stack:this.stack,message:this.message})}extend(data){return Object.assign(this.args,data),this}};exports.BubbleError=BubbleError;BubbleError.prototype.error_class="BubbleError",BubbleError.prototype.suggested_level="error";var NotReadyError=class{constructor(not_ready_key){this.not_ready_key=void 0,this.suppress_dependency_error=void 0,this.not_ready_key=not_ready_key}};exports.NotReadyError=NotReadyError;var UnexpectedError=class extends BubbleError{};exports.UnexpectedError=UnexpectedError;UnexpectedError.prototype.error_class="UnexpectedError";var ExpectedError=class extends BubbleError{};exports.ExpectedError=ExpectedError;ExpectedError.prototype.error_class="ExpectedError";var OwnerError=class extends ExpectedError{display(){var _this$args$display;return(_this$args$display=this.args.display)!=null?_this$args$display:this.message}};exports.OwnerError=OwnerError;OwnerError.prototype.error_class="OwnerError",OwnerError.prototype.suggested_level="owner_error";var UsageLimitAction=function(UsageLimitAction2){return UsageLimitAction2.UsingDataAPI="using Data API",UsageLimitAction2.UsingWorkflowAPI="using Workflow API",UsageLimitAction2.SavingData="saving data",UsageLimitAction2}({});exports.UsageLimitAction=UsageLimitAction;var UsageLimitError=class extends OwnerError{constructor(action){super("This application is at its usage limit. Please upgrade your application to continue ".concat(action))}};exports.UsageLimitError=UsageLimitError;UsageLimitError.prototype.error_class="UsageLimitError";var UserError=class extends ExpectedError{constructor(app_message,translation,data){let message=app_message!=null?app_message:translation;if(message)super(message,data),this.translation=void 0;else throw new UnexpectedError("must have message or translation");translation&&(this.translation=translation),app_message||(this.message=null)}display(){if(!this.translation){let[plugin,name]=this.message.split(".");name||(name=plugin,plugin="CORE"),this.translation=localize_message(plugin,name)}return this.translation}to_json(){let options=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{to_client=!1}=options,data=super.to_json(options);return to_client&&(data.message=this.message,data.translation=this.display()),data}};exports.UserError=UserError;UserError.prototype.error_class="UserError",UserError.prototype.suggested_level="user_error";var Unauthorized=class extends UserError{};exports.Unauthorized=Unauthorized;Unauthorized.prototype.error_class="Unauthorized";var StripePaymentRequiresAction=class extends UserError{};exports.StripePaymentRequiresAction=StripePaymentRequiresAction;StripePaymentRequiresAction.prototype.error_class="StripePaymentRequiresAction";var UnauthorizedEmployee=class extends Unauthorized{};exports.UnauthorizedEmployee=UnauthorizedEmployee;UnauthorizedEmployee.prototype.error_class="UnauthorizedEmployee";var UnexpectedPostgresError=class extends UnexpectedError{};exports.UnexpectedPostgresError=UnexpectedPostgresError;UnexpectedPostgresError.prototype.error_class="UnexpectedPostgresError";function from_json_client(json){var _json$args;switch((_json$args=json.args)!=null||(json.args={}),json.args.server_generated=!0,json.error_class){case"OwnerError":case"UsageLimitError":return new OwnerError(json.message,json.args);case"StripePaymentRequiresAction":return new StripePaymentRequiresAction(json.message,json.translation,json.args);case"UserError":return new UserError(json.message,json.translation,json.args);case"Unauthorized":return new Unauthorized(json.message,json.translation,json.args);case"UnauthorizedEmployee":return new UnauthorizedEmployee(json.message,json.translation,json.args);case"ClientError":return new UnexpectedError("bad request from client",json.args);default:return new UnexpectedError("Unexpected server error: please report the code parameter to the team",json.args)}}function format_for_logging(error){var _err$stack;let indent=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",err=ensure_bubble_error(error),ret=indent_string((_err$stack=err.stack)!=null?_err$stack:"",indent);return err.args!=null&&Object.keys(err.args).length>0&&(ret+=format_data_for_logging(err.args,indent+"    ")+"\n"),ret}function format_data_for_logging(data){let indent=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"    ";function format_value(v){return v instanceof Error?"\n"+format_for_logging(v,indent+"    "):typeof v=="string"&&v.includes("\n")?"\n"+indent_string(v,indent):" "+util.inspect(v,{depth:4})}let ret="";for(let k in data){let v=data[k];["stack"].includes(k)||(ret+="\n"+indent+k+":"+format_value(v))}return ret}function indent_string(v,indent){return v.split("\n").map(line=>indent+line).join("\n")}function get_status_code(err){return err.statusCode}function error_append(context,fn){try{return fn()}catch(e){throw e instanceof Error&&(typeof e.message=="string"?e.message+="\n	".concat(context):e.message=context),e}}function error_append_args(args,fn){try{return fn()}catch(e){throw e instanceof BubbleError&&(e.args=Object.assign({},e.args,args)),e}}function throw_test_error(){throw new UnexpectedError("This is a test error")}function is_mapping_error(err){return"message"in err&&typeof err.message=="string"?postgres_pool_consts.mapping_error_regex.test(err.message):!1}function to_owner_display(err,fallback_display){let bubble_error=ensure_bubble_error(err);return bubble_error instanceof OwnerError||bubble_error instanceof UserError?bubble_error.display():fallback_display}}});var require_bundle=__commonJS({"lib-browser-old/constants/bundle.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.META_APPNAME_FOR_OWN_CDN=exports.META_APPNAME_FOR_FILE_CDN=exports.DISTINCT_BV_BUNDLES=exports.BUNDLE_NAMES=exports.BASE_BUNDLES=void 0;var BUNDLE_NAMES=["edit","run","run_debug","plugin"];exports.BUNDLE_NAMES=BUNDLE_NAMES;var BASE_BUNDLES={edit:{entrypoint:"editor.js",is_edit_mode:!0},run:{entrypoint:"server/assets/runmode/entrypoints/run.js",is_run:!0},run_debug:{entrypoint:"server/assets/runmode/entrypoints/run_debug.js",is_run:!0,is_debug_mode:!0},plugin:{entrypoint:"editor_plugin.js",is_edit_mode:!0,is_plugin_edit_mode:!0}};exports.BASE_BUNDLES=BASE_BUNDLES;var DISTINCT_BV_BUNDLES=4;exports.DISTINCT_BV_BUNDLES=DISTINCT_BV_BUNDLES;var META_APPNAME_FOR_FILE_CDN="meta-p";exports.META_APPNAME_FOR_FILE_CDN=META_APPNAME_FOR_FILE_CDN;var META_APPNAME_FOR_OWN_CDN="meta-q";exports.META_APPNAME_FOR_OWN_CDN=META_APPNAME_FOR_OWN_CDN}});var require_mode_check=__commonJS({"lib-browser-old/u/shared/mode_check.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.edit_mode_only=edit_mode_only;exports.is_debug_mode=is_debug_mode;exports.is_edit_mode=is_edit_mode;exports.is_maison=is_maison;exports.is_plugin_edit_mode=is_plugin_edit_mode;exports.on_client=on_client;exports.on_phonegap=on_phonegap;exports.on_react_native=on_react_native;exports.on_server=on_server;exports.on_worker=on_worker;exports.running_server=running_server;exports.running_test=running_test;exports.set_running_server=set_running_server;require_es_array_includes();require_es_string_includes();var errors=_interopRequireWildcard(require_errors()),bundle_consts=_interopRequireWildcard(require_bundle()),_window,_document;function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var _is_on_client=typeof window<"u",_is_on_worker=typeof window>"u"&&typeof postMessage<"u",_bundle_name=(_window=window)==null?void 0:_window.bubble_bundle_name,_active_bundle=bundle_consts.BASE_BUNDLES[_bundle_name];function on_client(){return _is_on_client&&!_is_on_worker}function on_server(){return!_is_on_client&&!_is_on_worker}function on_react_native(){return!!window.isReactNative}var _is_on_phonegap=((_document=document)==null?void 0:_document.URL)!=null&&document.URL.includes("file://");function on_phonegap(){return _is_on_phonegap}function running_test(){return!1}var _is_running_server=!1;function set_running_server(running){_is_running_server=running}function running_server(){return _is_running_server}function on_worker(){return _is_on_worker}function is_edit_mode(){var _active_bundle$is_edi;return(_active_bundle$is_edi=_active_bundle==null?void 0:_active_bundle.is_edit_mode)!=null?_active_bundle$is_edi:!1}function is_plugin_edit_mode(){var _active_bundle$is_plu;return(_active_bundle$is_plu=_active_bundle==null?void 0:_active_bundle.is_plugin_edit_mode)!=null?_active_bundle$is_plu:!1}function is_debug_mode(){var _active_bundle$is_deb;return(_active_bundle$is_deb=_active_bundle==null?void 0:_active_bundle.is_debug_mode)!=null?_active_bundle$is_deb:!1}function is_maison(){var _active_bundle$is_mai;return(_active_bundle$is_mai=_active_bundle==null?void 0:_active_bundle.is_maison_editor)!=null?_active_bundle$is_mai:!1}function edit_mode_only(){if(on_client()&&!is_edit_mode()&&!is_debug_mode())throw new errors.UnexpectedError("Oops, looks like we are in run-mode, but have required edit-mode code.  Look at the stack trace to see who is requiring this...")}}});var require_whitespaces=__commonJS({"node_modules/core-js/internals/whitespaces.js"(exports,module){init_define_process_env();init_shim();module.exports="	\n\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF"}});var require_string_trim=__commonJS({"node_modules/core-js/internals/string-trim.js"(exports,module){init_define_process_env();init_shim();var uncurryThis=require_function_uncurry_this(),requireObjectCoercible=require_require_object_coercible(),toString=require_to_string(),whitespaces=require_whitespaces(),replace=uncurryThis("".replace),whitespace="["+whitespaces+"]",ltrim=RegExp("^"+whitespace+whitespace+"*"),rtrim=RegExp(whitespace+whitespace+"*$"),createMethod=function(TYPE){return function($this){var string=toString(requireObjectCoercible($this));return TYPE&1&&(string=replace(string,ltrim,"")),TYPE&2&&(string=replace(string,rtrim,"")),string}};module.exports={start:createMethod(1),end:createMethod(2),trim:createMethod(3)}}});var require_number_parse_float=__commonJS({"node_modules/core-js/internals/number-parse-float.js"(exports,module){init_define_process_env();init_shim();var global=require_global(),fails=require_fails(),uncurryThis=require_function_uncurry_this(),toString=require_to_string(),trim=require_string_trim().trim,whitespaces=require_whitespaces(),charAt=uncurryThis("".charAt),n$ParseFloat=global.parseFloat,Symbol2=global.Symbol,ITERATOR=Symbol2&&Symbol2.iterator,FORCED=1/n$ParseFloat(whitespaces+"-0")!==-1/0||ITERATOR&&!fails(function(){n$ParseFloat(Object(ITERATOR))});module.exports=FORCED?function(string){var trimmedString=trim(toString(string)),result=n$ParseFloat(trimmedString);return result===0&&charAt(trimmedString,0)=="-"?-0:result}:n$ParseFloat}});var require_es_parse_float=__commonJS({"node_modules/core-js/modules/es.parse-float.js"(){init_define_process_env();init_shim();var $2=require_export(),$parseFloat=require_number_parse_float();$2({global:!0,forced:parseFloat!=$parseFloat},{parseFloat:$parseFloat})}});var require_customVelocityAnimations=__commonJS({"lib-browser-old/u/client/customVelocityAnimations.js"(exports,module){"use strict";init_define_process_env();init_shim();require_web_dom_collections_for_each();var noBounceTransitions={"transition.noBounceUpIn":{defaultDuration:800,calls:[[{opacity:[1,0],translateY:[0,1e3]},.6,{easing:"easeOutCirc"}]]},"transition.noBounceUpOut":{defaultDuration:1e3,calls:[[{opacity:[0,"easeInCirc",1],translateY:-1e3},.8]],reset:{translateY:0}},"transition.noBounceDownIn":{defaultDuration:800,calls:[[{opacity:[1,0],translateY:[0,-1e3]},.6,{easing:"easeOutCirc"}]]},"transition.noBounceDownOut":{defaultDuration:1e3,calls:[[{opacity:[0,"easeInCirc",1],translateY:1e3},.8]],reset:{translateY:0}},"transition.noBounceLeftIn":{defaultDuration:750,calls:[[{opacity:[1,0],translateX:[0,-1250]},.6,{easing:"easeOutCirc"}]]},"transition.noBounceLeftOut":{defaultDuration:750,calls:[[{opacity:[0,"easeInCirc",1],translateX:-1250},.8]],reset:{translateX:0}},"transition.noBounceRightIn":{defaultDuration:750,calls:[[{opacity:[1,0],translateX:[0,1250]},.6,{easing:"easeOutCirc"}]]},"transition.noBounceRightOut":{defaultDuration:750,calls:[[{opacity:[0,"easeInCirc",1],translateX:1250},.8]],reset:{translateX:0}}},stockTransitionNames=["callout.bounce","callout.shake","callout.flash","callout.pulse","callout.swing","callout.tada","transition.fadeIn","transition.fadeOut","transition.flipXIn","transition.flipXOut","transition.flipYIn","transition.flipYOut","transition.flipBounceXIn","transition.flipBounceXOut","transition.flipBounceYIn","transition.flipBounceYOut","transition.swoopIn","transition.swoopOut","transition.whirlIn","transition.whirlOut","transition.shrinkIn","transition.shrinkOut","transition.expandIn","transition.expandOut","transition.bounceIn","transition.bounceOut","transition.bounceUpIn","transition.bounceUpOut","transition.bounceDownIn","transition.bounceDownOut","transition.bounceLeftIn","transition.bounceLeftOut","transition.bounceRightIn","transition.bounceRightOut","transition.slideUpIn","transition.slideUpOut","transition.slideDownIn","transition.slideDownOut","transition.slideLeftIn","transition.slideLeftOut","transition.slideRightIn","transition.slideRightOut","transition.slideUpBigIn","transition.slideUpBigOut","transition.slideDownBigIn","transition.slideDownBigOut","transition.slideLeftBigIn","transition.slideLeftBigOut","transition.slideRightBigIn","transition.slideRightBigOut","transition.perspectiveUpIn","transition.perspectiveUpOut","transition.perspectiveDownIn","transition.perspectiveDownOut","transition.perspectiveLeftIn","transition.perspectiveLeftOut","transition.perspectiveRightIn","transition.perspectiveRightOut"],injectTransitions=function(){if(typeof window>"u"||typeof window.$>"u"||typeof window.$.Velocity>"u"||typeof window.$.Velocity.RegisterEffect>"u"){console.log("Cannot load extra transitions before window, jQuery, Velocity or VelocityUI");return}Object.keys(noBounceTransitions).forEach(function(transitionName){window.$.Velocity.RegisterEffect(transitionName,noBounceTransitions[transitionName])})};module.exports={injectTransitions,customTransitions:noBounceTransitions,allTransitionNames:stockTransitionNames.concat(Object.keys(noBounceTransitions))}}});var require_base64=__commonJS({"node_modules/js-base64/base64.js"(exports,module){init_define_process_env();init_shim();(function(global,factory){typeof exports=="object"&&typeof module<"u"?module.exports=factory(global):typeof define=="function"&&define.amd?define(factory):factory(global)})(typeof self<"u"?self:typeof window<"u"||typeof window<"u"?window:exports,function(global){"use strict";global=global||{};var _Base64=global.Base64,version="2.6.4",b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64tab=function(bin){for(var t={},i=0,l=bin.length;i<l;i++)t[bin.charAt(i)]=i;return t}(b64chars),fromCharCode=String.fromCharCode,cb_utob=function(c){if(c.length<2){var cc=c.charCodeAt(0);return cc<128?c:cc<2048?fromCharCode(192|cc>>>6)+fromCharCode(128|cc&63):fromCharCode(224|cc>>>12&15)+fromCharCode(128|cc>>>6&63)+fromCharCode(128|cc&63)}else{var cc=65536+(c.charCodeAt(0)-55296)*1024+(c.charCodeAt(1)-56320);return fromCharCode(240|cc>>>18&7)+fromCharCode(128|cc>>>12&63)+fromCharCode(128|cc>>>6&63)+fromCharCode(128|cc&63)}},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=function(u){return u.replace(re_utob,cb_utob)},cb_encode=function(ccc){var padlen=[0,2,1][ccc.length%3],ord=ccc.charCodeAt(0)<<16|(ccc.length>1?ccc.charCodeAt(1):0)<<8|(ccc.length>2?ccc.charCodeAt(2):0),chars=[b64chars.charAt(ord>>>18),b64chars.charAt(ord>>>12&63),padlen>=2?"=":b64chars.charAt(ord>>>6&63),padlen>=1?"=":b64chars.charAt(ord&63)];return chars.join("")},btoa=global.btoa&&typeof global.btoa=="function"?function(b){return global.btoa(b)}:function(b){if(b.match(/[^\x00-\xFF]/))throw new RangeError("The string contains invalid characters.");return b.replace(/[\s\S]{1,3}/g,cb_encode)},_encode=function(u){return btoa(utob(String(u)))},mkUriSafe=function(b64){return b64.replace(/[+\/]/g,function(m0){return m0=="+"?"-":"_"}).replace(/=/g,"")},encode=function(u,urisafe){return urisafe?mkUriSafe(_encode(u)):_encode(u)},encodeURI2=function(u){return encode(u,!0)},fromUint8Array;global.Uint8Array&&(fromUint8Array=function(a,urisafe){for(var b64="",i=0,l=a.length;i<l;i+=3){var a0=a[i],a1=a[i+1],a2=a[i+2],ord=a0<<16|a1<<8|a2;b64+=b64chars.charAt(ord>>>18)+b64chars.charAt(ord>>>12&63)+(typeof a1<"u"?b64chars.charAt(ord>>>6&63):"=")+(typeof a2<"u"?b64chars.charAt(ord&63):"=")}return urisafe?mkUriSafe(b64):b64});var re_btou=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,cb_btou=function(cccc){switch(cccc.length){case 4:var cp=(7&cccc.charCodeAt(0))<<18|(63&cccc.charCodeAt(1))<<12|(63&cccc.charCodeAt(2))<<6|63&cccc.charCodeAt(3),offset=cp-65536;return fromCharCode((offset>>>10)+55296)+fromCharCode((offset&1023)+56320);case 3:return fromCharCode((15&cccc.charCodeAt(0))<<12|(63&cccc.charCodeAt(1))<<6|63&cccc.charCodeAt(2));default:return fromCharCode((31&cccc.charCodeAt(0))<<6|63&cccc.charCodeAt(1))}},btou=function(b){return b.replace(re_btou,cb_btou)},cb_decode=function(cccc){var len=cccc.length,padlen=len%4,n=(len>0?b64tab[cccc.charAt(0)]<<18:0)|(len>1?b64tab[cccc.charAt(1)]<<12:0)|(len>2?b64tab[cccc.charAt(2)]<<6:0)|(len>3?b64tab[cccc.charAt(3)]:0),chars=[fromCharCode(n>>>16),fromCharCode(n>>>8&255),fromCharCode(n&255)];return chars.length-=[0,0,2,1][padlen],chars.join("")},_atob=global.atob&&typeof global.atob=="function"?function(a){return global.atob(a)}:function(a){return a.replace(/\S{1,4}/g,cb_decode)},atob=function(a){return _atob(String(a).replace(/[^A-Za-z0-9\+\/]/g,""))},_decode=function(a){return btou(_atob(a))},_fromURI=function(a){return String(a).replace(/[-_]/g,function(m0){return m0=="-"?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,"")},decode=function(a){return _decode(_fromURI(a))},toUint8Array;global.Uint8Array&&(toUint8Array=function(a){return Uint8Array.from(atob(_fromURI(a)),function(c){return c.charCodeAt(0)})});var noConflict=function(){var Base642=global.Base64;return global.Base64=_Base64,Base642};if(global.Base64={VERSION:version,atob,btoa,fromBase64:decode,toBase64:encode,utob,encode,encodeURI:encodeURI2,btou,decode,noConflict,fromUint8Array,toUint8Array},typeof Object.defineProperty=="function"){var noEnum=function(v){return{value:v,enumerable:!1,writable:!0,configurable:!0}};global.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",noEnum(function(){return decode(this)})),Object.defineProperty(String.prototype,"toBase64",noEnum(function(urisafe){return encode(this,urisafe)})),Object.defineProperty(String.prototype,"toBase64URI",noEnum(function(){return encode(this,!0)}))}}return global.Meteor&&(Base64=global.Base64),typeof module<"u"&&module.exports?module.exports.Base64=global.Base64:typeof define=="function"&&define.amd&&define([],function(){return global.Base64}),{Base64:global.Base64}})}});var require_jquery_dotdotdot_1_5_6=__commonJS({"vendor/jquery_plugins/jquery.dotdotdot-1.5.6.js"(){"use strict";init_define_process_env();init_shim();(function($2){if($2.fn.dotdotdot)return;$2.fn.dotdotdot=function(o){if(this.length==0)return debug(!0,'No element found for "'+this.selector+'".'),this;if(this.length>1)return this.each(function(){$2(this).dotdotdot(o)});var $dot=this;$dot.data("dotdotdot")&&$dot.trigger("destroy.dot"),$dot.bind_events=function(){return $dot.bind("update.dot",function(e,c){e.preventDefault(),e.stopPropagation(),opts.maxHeight=typeof opts.height=="number"?opts.height:getTrueInnerHeight($dot),opts.maxHeight+=opts.tolerance,typeof c<"u"&&((typeof c=="string"||c instanceof HTMLElement)&&(c=$2("<div />").append(c).contents()),c instanceof $2&&(orgContent=c)),$inr=$dot.wrapInner('<div class="dotdotdot" />').children(),$inr.empty().append(orgContent.clone(!0)).css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var after=!1,trunc=!1;return conf.afterElement&&(after=conf.afterElement.clone(!0),conf.afterElement.remove()),test($inr,opts)&&(opts.wrap=="children"?trunc=children2($inr,opts,after):trunc=ellipsis($inr,$dot,$inr,opts,after)),$inr.replaceWith($inr.contents()),$inr=null,$2.isFunction(opts.callback)&&opts.callback.call($dot[0],trunc,orgContent),conf.isTruncated=trunc,trunc}).bind("isTruncated.dot",function(e,fn){return e.preventDefault(),e.stopPropagation(),typeof fn=="function"&&fn.call($dot[0],conf.isTruncated),conf.isTruncated}).bind("originalContent.dot",function(e,fn){return e.preventDefault(),e.stopPropagation(),typeof fn=="function"&&fn.call($dot[0],orgContent),orgContent}).bind("destroy.dot",function(e){e.preventDefault(),e.stopPropagation(),$dot.unwatch().unbind_events().empty().append(orgContent).data("dotdotdot",!1)}),$dot},$dot.unbind_events=function(){return $dot.unbind(".dot"),$dot},$dot.watch=function(){if($dot.unwatch(),opts.watch=="window"){var $window=$2(window),_wWidth=$window.width(),_wHeight=$window.height();$window.bind("resize.dot"+conf.dotId,function(){(_wWidth!=$window.width()||_wHeight!=$window.height()||!opts.windowResizeFix)&&(_wWidth=$window.width(),_wHeight=$window.height(),watchInt&&clearInterval(watchInt),watchInt=setTimeout(function(){$dot.trigger("update.dot")},10))})}else watchOrg=getSizes($dot),watchInt=setInterval(function(){var watchNew=getSizes($dot);(watchOrg.width!=watchNew.width||watchOrg.height!=watchNew.height)&&($dot.trigger("update.dot"),watchOrg=getSizes($dot))},100);return $dot},$dot.unwatch=function(){return $2(window).unbind("resize.dot"+conf.dotId),watchInt&&clearInterval(watchInt),$dot};var orgContent=$dot.contents(),opts=$2.extend(!0,{},$2.fn.dotdotdot.defaults,o),conf={},watchOrg={},watchInt=null,$inr=null;return conf.afterElement=getElement(opts.after,$dot),conf.isTruncated=!1,conf.dotId=dotId++,$dot.data("dotdotdot",!0).bind_events().trigger("update.dot"),opts.watch&&$dot.watch(),$dot},$2.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",lastCharacter:{remove:[" ",",",";",".","!","?"],noEllipsis:[]},tolerance:0,callback:null,after:null,height:null,watch:!1,windowResizeFix:!0,debug:!1};var dotId=1;function children2($elem,o,after){var $elements=$elem.children(),isTruncated=!1;$elem.empty();for(var a=0,l=$elements.length;a<l;a++){var $e=$elements.eq(a);if($elem.append($e),after&&$elem.append(after),test($elem,o)){$e.remove(),isTruncated=!0;break}else after&&after.remove()}return isTruncated}function ellipsis($elem,$d,$i,o,after){var $elements=$elem.contents(),isTruncated=!1;if($elem.empty(),test($i,o)){for(var $w=$elem.prev().contents(),$contents=$w.contents();$contents.size()!=0;)$w=$contents.eq(-1),$contents=$w.contents();var e=$w[0];if(typeof e<"u"){var txt=addEllipsis(getTextContent(e),o);setTextContent(e,txt)}return $elem.remove(),!0}for(var notx="table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, select, optgroup, option, textarea, script, style",a=0,l=$elements.length;a<l&&!isTruncated;a++){var e=$elements[a],$e=$2(e);typeof e>"u"||($elem.append($e),after&&$elem[$elem.is(notx)?"after":"append"](after),e.nodeType==3?test($i,o)&&(isTruncated=ellipsisElement($e,$d,$i,o,after)):isTruncated=ellipsis($e,$d,$i,o,after),isTruncated||after&&after.remove())}return isTruncated}function ellipsisElement($e,$d,$i,o,after){var isTruncated=!1,e=$e[0];if(typeof e>"u")return!1;for(var seporator=o.wrap=="letter"?"":" ",textArr=getTextContent(e).split(seporator),position=-1,midPos=-1,startPos=0,endPos=textArr.length-1;startPos<=endPos;){var m=Math.floor((startPos+endPos)/2);if(m==midPos)break;midPos=m,setTextContent(e,textArr.slice(0,midPos+1).join(seporator)+o.ellipsis),test($i,o)?endPos=midPos:(position=midPos,startPos=midPos)}if(position!=-1&&!(textArr.length==1&&textArr[0].length==0)){var txt=addEllipsis(textArr.slice(0,position+1).join(seporator),o);isTruncated=!0,setTextContent(e,txt)}else{var $w=$e.parent();$e.remove();var afterLength=after?after.length:0;if($w.contents().size()>afterLength){var $n=$w.contents().eq(-1-afterLength);isTruncated=ellipsisElement($n,$d,$i,o,after)}else{var e=$w.prev().contents().eq(-1)[0];if(typeof e<"u"){var txt=addEllipsis(getTextContent(e),o);setTextContent(e,txt),$w.remove(),isTruncated=!0}}}return isTruncated}function test($i,o){return $i.innerHeight()>o.maxHeight}function addEllipsis(txt,o){for(;$2.inArray(txt.slice(-1),o.lastCharacter.remove)>-1;)txt=txt.slice(0,-1);return $2.inArray(txt.slice(-1),o.lastCharacter.noEllipsis)<0&&(txt+=o.ellipsis),txt}function getSizes($d){return{width:$d.innerWidth(),height:$d.innerHeight()}}function setTextContent(e,content){e.innerText?e.innerText=content:e.nodeValue?e.nodeValue=content:e.textContent&&(e.textContent=content)}function getTextContent(e){return e.innerText?e.innerText:e.nodeValue?e.nodeValue:e.textContent?e.textContent:""}function getElement(e,$i){return typeof e>"u"||!e?!1:typeof e=="string"?(e=$2(e,$i),e.length?e:!1):typeof e=="object"?typeof e.jquery>"u"?!1:e:!1}function getTrueInnerHeight($el){for(var h=$el.innerHeight(),a=["paddingTop","paddingBottom"],z=0,l=a.length;z<l;z++){var m=parseInt($el.css(a[z]),10);isNaN(m)&&(m=0),h-=m}return h}function debug(d,m){return d&&(typeof m=="string"?m="dotdotdot: "+m:m=["dotdotdot:",m],typeof window.console<"u"&&typeof window.console.log<"u"&&window.console.log(m)),!1}var _orgHtml=$2.fn.html;$2.fn.html=function(str){return typeof str<"u"?this.data("dotdotdot")&&typeof str!="function"?(_orgHtml.call(this,str),this.trigger("update",[str])):_orgHtml.call(this,str):_orgHtml.call(this)};var _orgText=$2.fn.text;$2.fn.text=function(str){if(typeof str<"u"){if(this.data("dotdotdot")){_orgText.call(this,str);var temp=$2("<div />");return temp.text(str),str=temp.html(),temp.remove(),this.trigger("update",[str])}return _orgText.call(this,str)}return _orgText.call(this)}})(jQuery)}});var require_jquery_velocity_min=__commonJS({"vendor/jquery_plugins/jquery.velocity.min.js"(exports,module){"use strict";init_define_process_env();init_shim();(function(a){"use strict";function b(a2){var b2=a2.length,d2=c.type(a2);return d2!=="function"&&!c.isWindow(a2)&&(!(a2.nodeType!==1||!b2)||d2==="array"||b2===0||typeof b2=="number"&&b2>0&&b2-1 in a2)}if(!a.jQuery){var c=function(a2,b2){return new c.fn.init(a2,b2)};c.isWindow=function(a2){return a2&&a2===a2.window},c.type=function(a2){return a2?typeof a2=="object"||typeof a2=="function"?e[g.call(a2)]||"object":typeof a2:a2+""},c.isArray=Array.isArray||function(a2){return c.type(a2)==="array"},c.isPlainObject=function(a2){var b2;if(!a2||c.type(a2)!=="object"||a2.nodeType||c.isWindow(a2))return!1;try{if(a2.constructor&&!f.call(a2,"constructor")&&!f.call(a2.constructor.prototype,"isPrototypeOf"))return!1}catch(d2){return!1}for(b2 in a2);return b2===void 0||f.call(a2,b2)},c.each=function(a2,c2,d2){var e2,f2=0,g2=a2.length,h2=b(a2);if(d2){if(h2)for(;f2<g2&&(e2=c2.apply(a2[f2],d2),e2!==!1);f2++);else for(f2 in a2)if(a2.hasOwnProperty(f2)&&(e2=c2.apply(a2[f2],d2),e2===!1))break}else if(h2)for(;f2<g2&&(e2=c2.call(a2[f2],f2,a2[f2]),e2!==!1);f2++);else for(f2 in a2)if(a2.hasOwnProperty(f2)&&(e2=c2.call(a2[f2],f2,a2[f2]),e2===!1))break;return a2},c.data=function(a2,b2,e2){if(e2===void 0){var f2=a2[c.expando],g2=f2&&d[f2];if(b2===void 0)return g2;if(g2&&b2 in g2)return g2[b2]}else if(b2!==void 0){var h2=a2[c.expando]||(a2[c.expando]=++c.uuid);return d[h2]=d[h2]||{},d[h2][b2]=e2,e2}},c.removeData=function(a2,b2){var e2=a2[c.expando],f2=e2&&d[e2];f2&&(b2?c.each(b2,function(a3,b3){delete f2[b3]}):delete d[e2])},c.extend=function(){var a2,b2,d2,e2,f2,g2,h2=arguments[0]||{},i2=1,j=arguments.length,k=!1;for(typeof h2=="boolean"&&(k=h2,h2=arguments[i2]||{},i2++),typeof h2!="object"&&c.type(h2)!=="function"&&(h2={}),i2===j&&(h2=this,i2--);i2<j;i2++)if(f2=arguments[i2])for(e2 in f2)f2.hasOwnProperty(e2)&&(a2=h2[e2],d2=f2[e2],h2!==d2&&(k&&d2&&(c.isPlainObject(d2)||(b2=c.isArray(d2)))?(b2?(b2=!1,g2=a2&&c.isArray(a2)?a2:[]):g2=a2&&c.isPlainObject(a2)?a2:{},h2[e2]=c.extend(k,g2,d2)):d2!==void 0&&(h2[e2]=d2)));return h2},c.queue=function(a2,d2,e2){function f2(a3,c2){var d3=c2||[];return a3&&(b(Object(a3))?function(a4,b2){for(var c3=+b2.length,d4=0,e3=a4.length;d4<c3;)a4[e3++]=b2[d4++];if(c3!==c3)for(;b2[d4]!==void 0;)a4[e3++]=b2[d4++];return a4.length=e3,a4}(d3,typeof a3=="string"?[a3]:a3):[].push.call(d3,a3)),d3}if(a2){d2=(d2||"fx")+"queue";var g2=c.data(a2,d2);return e2?(!g2||c.isArray(e2)?g2=c.data(a2,d2,f2(e2)):g2.push(e2),g2):g2||[]}},c.dequeue=function(a2,b2){c.each(a2.nodeType?[a2]:a2,function(a3,d2){b2=b2||"fx";var e2=c.queue(d2,b2),f2=e2.shift();f2==="inprogress"&&(f2=e2.shift()),f2&&(b2==="fx"&&e2.unshift("inprogress"),f2.call(d2,function(){c.dequeue(d2,b2)}))})},c.fn=c.prototype={init:function(a2){if(a2.nodeType)return this[0]=a2,this;throw new Error("Not a DOM node.")},offset:function(){var b2=this[0].getBoundingClientRect?this[0].getBoundingClientRect():{top:0,left:0};return{top:b2.top+(a.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:b2.left+(a.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)}},position:function(){function a2(a3){for(var b3=a3.offsetParent;b3&&b3.nodeName.toLowerCase()!=="html"&&b3.style&&b3.style.position==="static";)b3=b3.offsetParent;return b3||document}var b2=this[0],d2=a2(b2),e2=this.offset(),f2=/^(?:body|html)$/i.test(d2.nodeName)?{top:0,left:0}:c(d2).offset();return e2.top-=parseFloat(b2.style.marginTop)||0,e2.left-=parseFloat(b2.style.marginLeft)||0,d2.style&&(f2.top+=parseFloat(d2.style.borderTopWidth)||0,f2.left+=parseFloat(d2.style.borderLeftWidth)||0),{top:e2.top-f2.top,left:e2.left-f2.left}}};var d={};c.expando="velocity"+new Date().getTime(),c.uuid=0;for(var e={},f=e.hasOwnProperty,g=e.toString,h="Boolean Number String Function Array Date RegExp Object Error".split(" "),i=0;i<h.length;i++)e["[object "+h[i]+"]"]=h[i].toLowerCase();c.fn.init.prototype=c.fn,a.Velocity={Utilities:c}}})(window),function(a){"use strict";typeof module=="object"&&typeof module.exports=="object"?module.exports=a():typeof define=="function"&&define.amd?define(a):a()}(function(){"use strict";return function(a,b,c,d){function e(a2){for(var b2=-1,c2=a2?a2.length:0,d2=[];++b2<c2;){var e2=a2[b2];e2&&d2.push(e2)}return d2}function f(a2){return s.isWrapped(a2)?a2=[].slice.call(a2):s.isNode(a2)&&(a2=[a2]),a2}function g(a2){var b2=o.data(a2,"velocity");return b2===null?d:b2}function h(a2,b2){var c2=g(a2);c2&&c2.delayTimer&&!c2.delayPaused&&(c2.delayRemaining=c2.delay-b2+c2.delayBegin,c2.delayPaused=!0,clearTimeout(c2.delayTimer.setTimeout))}function i(a2,b2){var c2=g(a2);c2&&c2.delayTimer&&c2.delayPaused&&(c2.delayPaused=!1,c2.delayTimer.setTimeout=setTimeout(c2.delayTimer.next,c2.delayRemaining))}function j(a2){return function(b2){return Math.round(b2*a2)*(1/a2)}}function k(a2,c2,d2,e2){function f2(a3,b2){return 1-3*b2+3*a3}function g2(a3,b2){return 3*b2-6*a3}function h2(a3){return 3*a3}function i2(a3,b2,c3){return((f2(b2,c3)*a3+g2(b2,c3))*a3+h2(b2))*a3}function j2(a3,b2,c3){return 3*f2(b2,c3)*a3*a3+2*g2(b2,c3)*a3+h2(b2)}function k2(b2,c3){for(var e3=0;e3<p2;++e3){var f3=j2(c3,a2,d2);if(f3===0)return c3;var g3=i2(c3,a2,d2)-b2;c3-=g3/f3}return c3}function l2(){for(var b2=0;b2<t2;++b2)x2[b2]=i2(b2*u2,a2,d2)}function m2(b2,c3,e3){var f3,g3,h3=0;do g3=c3+(e3-c3)/2,f3=i2(g3,a2,d2)-b2,f3>0?e3=g3:c3=g3;while(Math.abs(f3)>r2&&++h3<s2);return g3}function n2(b2){for(var c3=0,e3=1,f3=t2-1;e3!==f3&&x2[e3]<=b2;++e3)c3+=u2;--e3;var g3=(b2-x2[e3])/(x2[e3+1]-x2[e3]),h3=c3+g3*u2,i3=j2(h3,a2,d2);return i3>=q2?k2(b2,h3):i3===0?h3:m2(b2,c3,c3+u2)}function o2(){y2=!0,a2===c2&&d2===e2||l2()}var p2=4,q2=.001,r2=1e-7,s2=10,t2=11,u2=1/(t2-1),v2="Float32Array"in b;if(arguments.length!==4)return!1;for(var w2=0;w2<4;++w2)if(typeof arguments[w2]!="number"||isNaN(arguments[w2])||!isFinite(arguments[w2]))return!1;a2=Math.min(a2,1),d2=Math.min(d2,1),a2=Math.max(a2,0),d2=Math.max(d2,0);var x2=v2?new Float32Array(t2):new Array(t2),y2=!1,z2=function(b2){return y2||o2(),a2===c2&&d2===e2?b2:b2===0?0:b2===1?1:i2(n2(b2),c2,e2)};z2.getControlPoints=function(){return[{x:a2,y:c2},{x:d2,y:e2}]};var A2="generateBezier("+[a2,c2,d2,e2]+")";return z2.toString=function(){return A2},z2}function l(a2,b2){var c2=a2;return s.isString(a2)?w.Easings[a2]||(c2=!1):c2=s.isArray(a2)&&a2.length===1?j.apply(null,a2):s.isArray(a2)&&a2.length===2?x.apply(null,a2.concat([b2])):!(!s.isArray(a2)||a2.length!==4)&&k.apply(null,a2),c2===!1&&(c2=w.Easings[w.defaults.easing]?w.defaults.easing:v),c2}function m(a2){if(a2){var b2=w.timestamp&&a2!==!0?a2:r.now(),c2=w.State.calls.length;c2>1e4&&(w.State.calls=e(w.State.calls),c2=w.State.calls.length);for(var f2=0;f2<c2;f2++)if(w.State.calls[f2]){var h2=w.State.calls[f2],i2=h2[0],j2=h2[2],k2=h2[3],l2=!!k2,q2=null,t2=h2[5],u2=h2[6];if(k2||(k2=w.State.calls[f2][3]=b2-16),t2){if(t2.resume!==!0)continue;k2=h2[3]=Math.round(b2-u2-16),h2[5]=null}u2=h2[6]=b2-k2;for(var v2=Math.min(u2/j2.duration,1),x2=0,z2=i2.length;x2<z2;x2++){var B2=i2[x2],C=B2.element;if(g(C)){var D=!1;if(j2.display!==d&&j2.display!==null&&j2.display!=="none"){if(j2.display==="flex"){var E=["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"];o.each(E,function(a3,b3){y.setPropertyValue(C,"display",b3)})}y.setPropertyValue(C,"display",j2.display)}j2.visibility!==d&&j2.visibility!=="hidden"&&y.setPropertyValue(C,"visibility",j2.visibility);for(var F in B2)if(B2.hasOwnProperty(F)&&F!=="element"){var G,H=B2[F],I=s.isString(H.easing)?w.Easings[H.easing]:H.easing;if(s.isString(H.pattern)){var J=v2===1?function(a3,b3,c3){var d2=H.endValue[b3];return c3?Math.round(d2):d2}:function(a3,b3,c3){var d2=H.startValue[b3],e2=H.endValue[b3]-d2,f3=d2+e2*I(v2,j2,e2);return c3?Math.round(f3):f3};G=H.pattern.replace(/{(\d+)(!)?}/g,J)}else if(v2===1)G=H.endValue;else{var K=H.endValue-H.startValue;G=H.startValue+K*I(v2,j2,K)}if(!l2&&G===H.currentValue)continue;if(H.currentValue=G,F==="tween")q2=G;else{var L;if(y.Hooks.registered[F]){L=y.Hooks.getRoot(F);var M=g(C).rootPropertyValueCache[L];M&&(H.rootPropertyValue=M)}var N=y.setPropertyValue(C,F,H.currentValue+(p<9&&parseFloat(G)===0?"":H.unitType),H.rootPropertyValue,H.scrollData);y.Hooks.registered[F]&&(y.Normalizations.registered[L]?g(C).rootPropertyValueCache[L]=y.Normalizations.registered[L]("extract",null,N[1]):g(C).rootPropertyValueCache[L]=N[1]),N[0]==="transform"&&(D=!0)}}j2.mobileHA&&g(C).transformCache.translate3d===d&&(g(C).transformCache.translate3d="(0px, 0px, 0px)",D=!0),D&&y.flushTransformCache(C)}}j2.display!==d&&j2.display!=="none"&&(w.State.calls[f2][2].display=!1),j2.visibility!==d&&j2.visibility!=="hidden"&&(w.State.calls[f2][2].visibility=!1),j2.progress&&j2.progress.call(h2[1],h2[1],v2,Math.max(0,k2+j2.duration-b2),k2,q2),v2===1&&n(f2)}}w.State.isTicking&&A(m)}function n(a2,b2){if(!w.State.calls[a2])return!1;for(var c2=w.State.calls[a2][0],e2=w.State.calls[a2][1],f2=w.State.calls[a2][2],h2=w.State.calls[a2][4],i2=!1,j2=0,k2=c2.length;j2<k2;j2++){var l2=c2[j2].element;b2||f2.loop||(f2.display==="none"&&y.setPropertyValue(l2,"display",f2.display),f2.visibility==="hidden"&&y.setPropertyValue(l2,"visibility",f2.visibility));var m2=g(l2);if(f2.loop!==!0&&(o.queue(l2)[1]===d||!/\.velocityQueueEntryFlag/i.test(o.queue(l2)[1]))&&m2){m2.isAnimating=!1,m2.rootPropertyValueCache={};var n2=!1;o.each(y.Lists.transforms3D,function(a3,b3){var c3=/^scale/.test(b3)?1:0,e3=m2.transformCache[b3];m2.transformCache[b3]!==d&&new RegExp("^\\("+c3+"[^.]").test(e3)&&(n2=!0,delete m2.transformCache[b3])}),f2.mobileHA&&(n2=!0,delete m2.transformCache.translate3d),n2&&y.flushTransformCache(l2),y.Values.removeClass(l2,"velocity-animating")}if(!b2&&f2.complete&&!f2.loop&&j2===k2-1)try{f2.complete.call(e2,e2)}catch(p2){setTimeout(function(){throw p2},1)}h2&&f2.loop!==!0&&h2(e2),m2&&f2.loop===!0&&!b2&&(o.each(m2.tweensContainer,function(a3,b3){if(/^rotate/.test(a3)&&(parseFloat(b3.startValue)-parseFloat(b3.endValue))%360===0){var c3=b3.startValue;b3.startValue=b3.endValue,b3.endValue=c3}/^backgroundPosition/.test(a3)&&parseFloat(b3.endValue)===100&&b3.unitType==="%"&&(b3.endValue=0,b3.startValue=100)}),w(l2,"reverse",{loop:!0,delay:f2.delay})),f2.queue!==!1&&o.dequeue(l2,f2.queue)}w.State.calls[a2]=!1;for(var q2=0,r2=w.State.calls.length;q2<r2;q2++)if(w.State.calls[q2]!==!1){i2=!0;break}i2===!1&&(w.State.isTicking=!1,delete w.State.calls,w.State.calls=[])}var o,p=function(){if(c.documentMode)return c.documentMode;for(var a2=7;a2>4;a2--){var b2=c.createElement("div");if(b2.innerHTML="<!--[if IE "+a2+"]><span></span><![endif]-->",b2.getElementsByTagName("span").length)return b2=null,a2}return d}(),q=function(){var a2=0;return b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame||function(b2){var c2,d2=new Date().getTime();return c2=Math.max(0,16-(d2-a2)),a2=d2+c2,setTimeout(function(){b2(d2+c2)},c2)}}(),r=function(){var a2=b.performance||{};if(!a2.hasOwnProperty("now")){var c2=a2.timing&&a2.timing.domComplete?a2.timing.domComplete:new Date().getTime();a2.now=function(){return new Date().getTime()-c2}}return a2}(),s={isNumber:function(a2){return typeof a2=="number"},isString:function(a2){return typeof a2=="string"},isArray:Array.isArray||function(a2){return Object.prototype.toString.call(a2)==="[object Array]"},isFunction:function(a2){return Object.prototype.toString.call(a2)==="[object Function]"},isNode:function(a2){return a2&&a2.nodeType},isNodeList:function(a2){return typeof a2=="object"&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(a2))&&a2.length!==d&&(a2.length===0||typeof a2[0]=="object"&&a2[0].nodeType>0)},isWrapped:function(a2){return a2&&(s.isArray(a2)||s.isNumber(a2.length)&&!s.isString(a2)&&!s.isFunction(a2))},isSVG:function(a2){return b.SVGElement&&a2 instanceof b.SVGElement},isEmptyObject:function(a2){for(var b2 in a2)if(a2.hasOwnProperty(b2))return!1;return!0}},t=!1;if(a.fn&&a.fn.jquery?(o=a,t=!0):o=b.Velocity.Utilities,p<=8&&!t)throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");if(p<=7)return void(jQuery.fn.velocity=jQuery.fn.animate);var u=400,v="swing",w={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),isChrome:b.chrome,isFirefox:/Firefox/i.test(navigator.userAgent),prefixElement:c.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[],delayedElements:{count:0}},CSS:{},Utilities:o,Redirects:{},Easings:{},Promise:b.Promise,defaults:{queue:"",duration:u,easing:v,begin:d,complete:d,progress:d,display:d,visibility:d,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0,promiseRejectEmpty:!0},init:function(a2){o.data(a2,"velocity",{isSVG:s.isSVG(a2),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},hook:null,mock:!1,version:{major:1,minor:4,patch:0},debug:!1,timestamp:!0,pauseAll:function(a2){var b2=new Date().getTime();o.each(w.State.calls,function(b3,c2){if(c2){if(a2!==d&&(c2[2].queue!==a2||c2[2].queue===!1))return!0;c2[5]={resume:!1}}}),o.each(w.State.delayedElements,function(a3,c2){c2&&h(c2,b2)})},resumeAll:function(a2){var b2=new Date().getTime();o.each(w.State.calls,function(b3,c2){if(c2){if(a2!==d&&(c2[2].queue!==a2||c2[2].queue===!1))return!0;c2[5]&&(c2[5].resume=!0)}}),o.each(w.State.delayedElements,function(a3,c2){c2&&i(c2,b2)})}};b.pageYOffset!==d?(w.State.scrollAnchor=b,w.State.scrollPropertyLeft="pageXOffset",w.State.scrollPropertyTop="pageYOffset"):(w.State.scrollAnchor=c.documentElement||c.body.parentNode||c.body,w.State.scrollPropertyLeft="scrollLeft",w.State.scrollPropertyTop="scrollTop");var x=function(){function a2(a3){return-a3.tension*a3.x-a3.friction*a3.v}function b2(b3,c3,d2){var e2={x:b3.x+d2.dx*c3,v:b3.v+d2.dv*c3,tension:b3.tension,friction:b3.friction};return{dx:e2.v,dv:a2(e2)}}function c2(c3,d2){var e2={dx:c3.v,dv:a2(c3)},f2=b2(c3,.5*d2,e2),g2=b2(c3,.5*d2,f2),h2=b2(c3,d2,g2),i2=1/6*(e2.dx+2*(f2.dx+g2.dx)+h2.dx),j2=1/6*(e2.dv+2*(f2.dv+g2.dv)+h2.dv);return c3.x=c3.x+i2*d2,c3.v=c3.v+j2*d2,c3}return function d2(a3,b3,e2){var f2,g2,h2,i2={x:-1,v:0,tension:null,friction:null},j2=[0],k2=0,l2=1e-4,m2=.016;for(a3=parseFloat(a3)||500,b3=parseFloat(b3)||20,e2=e2||null,i2.tension=a3,i2.friction=b3,f2=e2!==null,f2?(k2=d2(a3,b3),g2=k2/e2*m2):g2=m2;h2=c2(h2||i2,g2),j2.push(1+h2.x),k2+=16,Math.abs(h2.x)>l2&&Math.abs(h2.v)>l2;);return f2?function(a4){return j2[a4*(j2.length-1)|0]}:k2}}();w.Easings={linear:function(a2){return a2},swing:function(a2){return .5-Math.cos(a2*Math.PI)/2},spring:function(a2){return 1-Math.cos(4.5*a2*Math.PI)*Math.exp(6*-a2)}},o.each([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]],["easeInSine",[.47,0,.745,.715]],["easeOutSine",[.39,.575,.565,1]],["easeInOutSine",[.445,.05,.55,.95]],["easeInQuad",[.55,.085,.68,.53]],["easeOutQuad",[.25,.46,.45,.94]],["easeInOutQuad",[.455,.03,.515,.955]],["easeInCubic",[.55,.055,.675,.19]],["easeOutCubic",[.215,.61,.355,1]],["easeInOutCubic",[.645,.045,.355,1]],["easeInQuart",[.895,.03,.685,.22]],["easeOutQuart",[.165,.84,.44,1]],["easeInOutQuart",[.77,0,.175,1]],["easeInQuint",[.755,.05,.855,.06]],["easeOutQuint",[.23,1,.32,1]],["easeInOutQuint",[.86,0,.07,1]],["easeInExpo",[.95,.05,.795,.035]],["easeOutExpo",[.19,1,.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[.6,.04,.98,.335]],["easeOutCirc",[.075,.82,.165,1]],["easeInOutCirc",[.785,.135,.15,.86]]],function(a2,b2){w.Easings[b2[0]]=k.apply(null,b2[1])});var y=w.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"],units:["%","em","ex","ch","rem","vw","vh","vmin","vmax","cm","mm","Q","in","pc","pt","px","deg","grad","rad","turn","s","ms"],colorNames:{aliceblue:"240,248,255",antiquewhite:"250,235,215",aquamarine:"127,255,212",aqua:"0,255,255",azure:"240,255,255",beige:"245,245,220",bisque:"255,228,196",black:"0,0,0",blanchedalmond:"255,235,205",blueviolet:"138,43,226",blue:"0,0,255",brown:"165,42,42",burlywood:"222,184,135",cadetblue:"95,158,160",chartreuse:"127,255,0",chocolate:"210,105,30",coral:"255,127,80",cornflowerblue:"100,149,237",cornsilk:"255,248,220",crimson:"220,20,60",cyan:"0,255,255",darkblue:"0,0,139",darkcyan:"0,139,139",darkgoldenrod:"184,134,11",darkgray:"169,169,169",darkgrey:"169,169,169",darkgreen:"0,100,0",darkkhaki:"189,183,107",darkmagenta:"139,0,139",darkolivegreen:"85,107,47",darkorange:"255,140,0",darkorchid:"153,50,204",darkred:"139,0,0",darksalmon:"233,150,122",darkseagreen:"143,188,143",darkslateblue:"72,61,139",darkslategray:"47,79,79",darkturquoise:"0,206,209",darkviolet:"148,0,211",deeppink:"255,20,147",deepskyblue:"0,191,255",dimgray:"105,105,105",dimgrey:"105,105,105",dodgerblue:"30,144,255",firebrick:"178,34,34",floralwhite:"255,250,240",forestgreen:"34,139,34",fuchsia:"255,0,255",gainsboro:"220,220,220",ghostwhite:"248,248,255",gold:"255,215,0",goldenrod:"218,165,32",gray:"128,128,128",grey:"128,128,128",greenyellow:"173,255,47",green:"0,128,0",honeydew:"240,255,240",hotpink:"255,105,180",indianred:"205,92,92",indigo:"75,0,130",ivory:"255,255,240",khaki:"240,230,140",lavenderblush:"255,240,245",lavender:"230,230,250",lawngreen:"124,252,0",lemonchiffon:"255,250,205",lightblue:"173,216,230",lightcoral:"240,128,128",lightcyan:"224,255,255",lightgoldenrodyellow:"250,250,210",lightgray:"211,211,211",lightgrey:"211,211,211",lightgreen:"144,238,144",lightpink:"255,182,193",lightsalmon:"255,160,122",lightseagreen:"32,178,170",lightskyblue:"135,206,250",lightslategray:"119,136,153",lightsteelblue:"176,196,222",lightyellow:"255,255,224",limegreen:"50,205,50",lime:"0,255,0",linen:"250,240,230",magenta:"255,0,255",maroon:"128,0,0",mediumaquamarine:"102,205,170",mediumblue:"0,0,205",mediumorchid:"186,85,211",mediumpurple:"147,112,219",mediumseagreen:"60,179,113",mediumslateblue:"123,104,238",mediumspringgreen:"0,250,154",mediumturquoise:"72,209,204",mediumvioletred:"199,21,133",midnightblue:"25,25,112",mintcream:"245,255,250",mistyrose:"255,228,225",moccasin:"255,228,181",navajowhite:"255,222,173",navy:"0,0,128",oldlace:"253,245,230",olivedrab:"107,142,35",olive:"128,128,0",orangered:"255,69,0",orange:"255,165,0",orchid:"218,112,214",palegoldenrod:"238,232,170",palegreen:"152,251,152",paleturquoise:"175,238,238",palevioletred:"219,112,147",papayawhip:"255,239,213",peachpuff:"255,218,185",peru:"205,133,63",pink:"255,192,203",plum:"221,160,221",powderblue:"176,224,230",purple:"128,0,128",red:"255,0,0",rosybrown:"188,143,143",royalblue:"65,105,225",saddlebrown:"139,69,19",salmon:"250,128,114",sandybrown:"244,164,96",seagreen:"46,139,87",seashell:"255,245,238",sienna:"160,82,45",silver:"192,192,192",skyblue:"135,206,235",slateblue:"106,90,205",slategray:"112,128,144",snow:"255,250,250",springgreen:"0,255,127",steelblue:"70,130,180",tan:"210,180,140",teal:"0,128,128",thistle:"216,191,216",tomato:"255,99,71",turquoise:"64,224,208",violet:"238,130,238",wheat:"245,222,179",whitesmoke:"245,245,245",white:"255,255,255",yellowgreen:"154,205,50",yellow:"255,255,0"}},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){for(var a2=0;a2<y.Lists.colors.length;a2++){var b2=y.Lists.colors[a2]==="color"?"0 0 0 1":"255 255 255 1";y.Hooks.templates[y.Lists.colors[a2]]=["Red Green Blue Alpha",b2]}var c2,d2,e2;if(p){for(c2 in y.Hooks.templates)if(y.Hooks.templates.hasOwnProperty(c2)){d2=y.Hooks.templates[c2],e2=d2[0].split(" ");var f2=d2[1].match(y.RegEx.valueSplit);e2[0]==="Color"&&(e2.push(e2.shift()),f2.push(f2.shift()),y.Hooks.templates[c2]=[e2.join(" "),f2.join(" ")])}}for(c2 in y.Hooks.templates)if(y.Hooks.templates.hasOwnProperty(c2)){d2=y.Hooks.templates[c2],e2=d2[0].split(" ");for(var g2 in e2)if(e2.hasOwnProperty(g2)){var h2=c2+e2[g2],i2=g2;y.Hooks.registered[h2]=[c2,i2]}}},getRoot:function(a2){var b2=y.Hooks.registered[a2];return b2?b2[0]:a2},getUnit:function(a2,b2){var c2=(a2.substr(b2||0,5).match(/^[a-z%]+/)||[])[0]||"";return c2&&y.Lists.units.indexOf(c2)>=0?c2:""},fixColors:function(a2){return a2.replace(/(rgba?\(\s*)?(\b[a-z]+\b)/g,function(a3,b2,c2){return y.Lists.colorNames.hasOwnProperty(c2)?(b2||"rgba(")+y.Lists.colorNames[c2]+(b2?"":",1)"):b2+c2})},cleanRootPropertyValue:function(a2,b2){return y.RegEx.valueUnwrap.test(b2)&&(b2=b2.match(y.RegEx.valueUnwrap)[1]),y.Values.isCSSNullValue(b2)&&(b2=y.Hooks.templates[a2][1]),b2},extractValue:function(a2,b2){var c2=y.Hooks.registered[a2];if(c2){var d2=c2[0],e2=c2[1];return b2=y.Hooks.cleanRootPropertyValue(d2,b2),b2.toString().match(y.RegEx.valueSplit)[e2]}return b2},injectValue:function(a2,b2,c2){var d2=y.Hooks.registered[a2];if(d2){var e2,f2,g2=d2[0],h2=d2[1];return c2=y.Hooks.cleanRootPropertyValue(g2,c2),e2=c2.toString().match(y.RegEx.valueSplit),e2[h2]=b2,f2=e2.join(" ")}return c2}},Normalizations:{registered:{clip:function(a2,b2,c2){switch(a2){case"name":return"clip";case"extract":var d2;return y.RegEx.wrappedValueAlreadyExtracted.test(c2)?d2=c2:(d2=c2.toString().match(y.RegEx.valueUnwrap),d2=d2?d2[1].replace(/,(\s+)?/g," "):c2),d2;case"inject":return"rect("+c2+")"}},blur:function(a2,b2,c2){switch(a2){case"name":return w.State.isFirefox?"filter":"-webkit-filter";case"extract":var d2=parseFloat(c2);if(!d2&&d2!==0){var e2=c2.toString().match(/blur\(([0-9]+[A-z]+)\)/i);d2=e2?e2[1]:0}return d2;case"inject":return parseFloat(c2)?"blur("+c2+")":"none"}},opacity:function(a2,b2,c2){if(p<=8)switch(a2){case"name":return"filter";case"extract":var d2=c2.toString().match(/alpha\(opacity=(.*)\)/i);return c2=d2?d2[1]/100:1;case"inject":return b2.style.zoom=1,parseFloat(c2)>=1?"":"alpha(opacity="+parseInt(100*parseFloat(c2),10)+")"}else switch(a2){case"name":return"opacity";case"extract":return c2;case"inject":return c2}}},register:function(){function a2(a3,b3,c3){var d2=y.getPropertyValue(b3,"boxSizing").toString().toLowerCase()==="border-box";if(d2===(c3||!1)){var e3,f2,g2=0,h2=a3==="width"?["Left","Right"]:["Top","Bottom"],i2=["padding"+h2[0],"padding"+h2[1],"border"+h2[0]+"Width","border"+h2[1]+"Width"];for(e3=0;e3<i2.length;e3++)f2=parseFloat(y.getPropertyValue(b3,i2[e3])),isNaN(f2)||(g2+=f2);return c3?-g2:g2}return 0}function b2(b3,c3){return function(d2,e3,f2){switch(d2){case"name":return b3;case"extract":return parseFloat(f2)+a2(b3,e3,c3);case"inject":return parseFloat(f2)-a2(b3,e3,c3)+"px"}}}p&&!(p>9)||w.State.isGingerbread||(y.Lists.transformsBase=y.Lists.transformsBase.concat(y.Lists.transforms3D));for(var c2=0;c2<y.Lists.transformsBase.length;c2++)(function(){var a3=y.Lists.transformsBase[c2];y.Normalizations.registered[a3]=function(b3,c3,e3){switch(b3){case"name":return"transform";case"extract":return g(c3)===d||g(c3).transformCache[a3]===d?/^scale/i.test(a3)?1:0:g(c3).transformCache[a3].replace(/[()]/g,"");case"inject":var f2=!1;switch(a3.substr(0,a3.length-1)){case"translate":f2=!/(%|px|em|rem|vw|vh|\d)$/i.test(e3);break;case"scal":case"scale":w.State.isAndroid&&g(c3).transformCache[a3]===d&&e3<1&&(e3=1),f2=!/(\d)$/i.test(e3);break;case"skew":f2=!/(deg|\d)$/i.test(e3);break;case"rotate":f2=!/(deg|\d)$/i.test(e3)}return f2||(g(c3).transformCache[a3]="("+e3+")"),g(c3).transformCache[a3]}}})();for(var e2=0;e2<y.Lists.colors.length;e2++)(function(){var a3=y.Lists.colors[e2];y.Normalizations.registered[a3]=function(b3,c3,e3){switch(b3){case"name":return a3;case"extract":var f2;if(y.RegEx.wrappedValueAlreadyExtracted.test(e3))f2=e3;else{var g2,h2={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"};/^[A-z]+$/i.test(e3)?g2=h2[e3]!==d?h2[e3]:h2.black:y.RegEx.isHex.test(e3)?g2="rgb("+y.Values.hexToRgb(e3).join(" ")+")":/^rgba?\(/i.test(e3)||(g2=h2.black),f2=(g2||e3).toString().match(y.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ")}return(!p||p>8)&&f2.split(" ").length===3&&(f2+=" 1"),f2;case"inject":return/^rgb/.test(e3)?e3:(p<=8?e3.split(" ").length===4&&(e3=e3.split(/\s+/).slice(0,3).join(" ")):e3.split(" ").length===3&&(e3+=" 1"),(p<=8?"rgb":"rgba")+"("+e3.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")")}}})();y.Normalizations.registered.innerWidth=b2("width",!0),y.Normalizations.registered.innerHeight=b2("height",!0),y.Normalizations.registered.outerWidth=b2("width"),y.Normalizations.registered.outerHeight=b2("height")}},Names:{camelCase:function(a2){return a2.replace(/-(\w)/g,function(a3,b2){return b2.toUpperCase()})},SVGAttribute:function(a2){var b2="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";return(p||w.State.isAndroid&&!w.State.isChrome)&&(b2+="|transform"),new RegExp("^("+b2+")$","i").test(a2)},prefixCheck:function(a2){if(w.State.prefixMatches[a2])return[w.State.prefixMatches[a2],!0];for(var b2=["","Webkit","Moz","ms","O"],c2=0,d2=b2.length;c2<d2;c2++){var e2;if(e2=c2===0?a2:b2[c2]+a2.replace(/^\w/,function(a3){return a3.toUpperCase()}),s.isString(w.State.prefixElement.style[e2]))return w.State.prefixMatches[a2]=e2,[e2,!0]}return[a2,!1]}},Values:{hexToRgb:function(a2){var b2,c2=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,d2=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;return a2=a2.replace(c2,function(a3,b3,c3,d3){return b3+b3+c3+c3+d3+d3}),b2=d2.exec(a2),b2?[parseInt(b2[1],16),parseInt(b2[2],16),parseInt(b2[3],16)]:[0,0,0]},isCSSNullValue:function(a2){return!a2||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(a2)},getUnitType:function(a2){return/^(rotate|skew)/i.test(a2)?"deg":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(a2)?"":"px"},getDisplayType:function(a2){var b2=a2&&a2.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(b2)?"inline":/^(li)$/i.test(b2)?"list-item":/^(tr)$/i.test(b2)?"table-row":/^(table)$/i.test(b2)?"table":/^(tbody)$/i.test(b2)?"table-row-group":"block"},addClass:function(a2,b2){if(a2)if(a2.classList)a2.classList.add(b2);else if(s.isString(a2.className))a2.className+=(a2.className.length?" ":"")+b2;else{var c2=a2.getAttribute(p<=7?"className":"class")||"";a2.setAttribute("class",c2+(c2?" ":"")+b2)}},removeClass:function(a2,b2){if(a2)if(a2.classList)a2.classList.remove(b2);else if(s.isString(a2.className))a2.className=a2.className.toString().replace(new RegExp("(^|\\s)"+b2.split(" ").join("|")+"(\\s|$)","gi")," ");else{var c2=a2.getAttribute(p<=7?"className":"class")||"";a2.setAttribute("class",c2.replace(new RegExp("(^|s)"+b2.split(" ").join("|")+"(s|$)","gi")," "))}}},getPropertyValue:function(a2,c2,e2,f2){function h2(a3,c3){var e3=0;if(p<=8)e3=o.css(a3,c3);else{var i3=!1;/^(width|height)$/.test(c3)&&y.getPropertyValue(a3,"display")===0&&(i3=!0,y.setPropertyValue(a3,"display",y.Values.getDisplayType(a3)));var j3=function(){i3&&y.setPropertyValue(a3,"display","none")};if(!f2){if(c3==="height"&&y.getPropertyValue(a3,"boxSizing").toString().toLowerCase()!=="border-box"){var k3=a3.offsetHeight-(parseFloat(y.getPropertyValue(a3,"borderTopWidth"))||0)-(parseFloat(y.getPropertyValue(a3,"borderBottomWidth"))||0)-(parseFloat(y.getPropertyValue(a3,"paddingTop"))||0)-(parseFloat(y.getPropertyValue(a3,"paddingBottom"))||0);return j3(),k3}if(c3==="width"&&y.getPropertyValue(a3,"boxSizing").toString().toLowerCase()!=="border-box"){var l3=a3.offsetWidth-(parseFloat(y.getPropertyValue(a3,"borderLeftWidth"))||0)-(parseFloat(y.getPropertyValue(a3,"borderRightWidth"))||0)-(parseFloat(y.getPropertyValue(a3,"paddingLeft"))||0)-(parseFloat(y.getPropertyValue(a3,"paddingRight"))||0);return j3(),l3}}var m3;m3=g(a3)===d?b.getComputedStyle(a3,null):g(a3).computedStyle?g(a3).computedStyle:g(a3).computedStyle=b.getComputedStyle(a3,null),c3==="borderColor"&&(c3="borderTopColor"),e3=p===9&&c3==="filter"?m3.getPropertyValue(c3):m3[c3],e3!==""&&e3!==null||(e3=a3.style[c3]),j3()}if(e3==="auto"&&/^(top|right|bottom|left)$/i.test(c3)){var n3=h2(a3,"position");(n3==="fixed"||n3==="absolute"&&/top|left/i.test(c3))&&(e3=o(a3).position()[c3]+"px")}return e3}var i2;if(y.Hooks.registered[c2]){var j2=c2,k2=y.Hooks.getRoot(j2);e2===d&&(e2=y.getPropertyValue(a2,y.Names.prefixCheck(k2)[0])),y.Normalizations.registered[k2]&&(e2=y.Normalizations.registered[k2]("extract",a2,e2)),i2=y.Hooks.extractValue(j2,e2)}else if(y.Normalizations.registered[c2]){var l2,m2;l2=y.Normalizations.registered[c2]("name",a2),l2!=="transform"&&(m2=h2(a2,y.Names.prefixCheck(l2)[0]),y.Values.isCSSNullValue(m2)&&y.Hooks.templates[c2]&&(m2=y.Hooks.templates[c2][1])),i2=y.Normalizations.registered[c2]("extract",a2,m2)}if(!/^[\d-]/.test(i2)){var n2=g(a2);if(n2&&n2.isSVG&&y.Names.SVGAttribute(c2))if(/^(height|width)$/i.test(c2))try{i2=a2.getBBox()[c2]}catch(q2){i2=0}else i2=a2.getAttribute(c2);else i2=h2(a2,y.Names.prefixCheck(c2)[0])}return y.Values.isCSSNullValue(i2)&&(i2=0),w.debug>=2&&console.log("Get "+c2+": "+i2),i2},setPropertyValue:function(a2,c2,d2,e2,f2){var h2=c2;if(c2==="scroll")f2.container?f2.container["scroll"+f2.direction]=d2:f2.direction==="Left"?b.scrollTo(d2,f2.alternateValue):b.scrollTo(f2.alternateValue,d2);else if(y.Normalizations.registered[c2]&&y.Normalizations.registered[c2]("name",a2)==="transform")y.Normalizations.registered[c2]("inject",a2,d2),h2="transform",d2=g(a2).transformCache[c2];else{if(y.Hooks.registered[c2]){var i2=c2,j2=y.Hooks.getRoot(c2);e2=e2||y.getPropertyValue(a2,j2),d2=y.Hooks.injectValue(i2,d2,e2),c2=j2}if(y.Normalizations.registered[c2]&&(d2=y.Normalizations.registered[c2]("inject",a2,d2),c2=y.Normalizations.registered[c2]("name",a2)),h2=y.Names.prefixCheck(c2)[0],p<=8)try{a2.style[h2]=d2}catch(k2){w.debug&&console.log("Browser does not support ["+d2+"] for ["+h2+"]")}else{var l2=g(a2);l2&&l2.isSVG&&y.Names.SVGAttribute(c2)?a2.setAttribute(c2,d2):a2.style[h2]=d2}w.debug>=2&&console.log("Set "+c2+" ("+h2+"): "+d2)}return[h2,d2]},flushTransformCache:function(a2){var b2="",c2=g(a2);if((p||w.State.isAndroid&&!w.State.isChrome)&&c2&&c2.isSVG){var d2=function(b3){return parseFloat(y.getPropertyValue(a2,b3))},e2={translate:[d2("translateX"),d2("translateY")],skewX:[d2("skewX")],skewY:[d2("skewY")],scale:d2("scale")!==1?[d2("scale"),d2("scale")]:[d2("scaleX"),d2("scaleY")],rotate:[d2("rotateZ"),0,0]};o.each(g(a2).transformCache,function(a3){/^translate/i.test(a3)?a3="translate":/^scale/i.test(a3)?a3="scale":/^rotate/i.test(a3)&&(a3="rotate"),e2[a3]&&(b2+=a3+"("+e2[a3].join(" ")+") ",delete e2[a3])})}else{var f2,h2;o.each(g(a2).transformCache,function(c3){return f2=g(a2).transformCache[c3],c3==="transformPerspective"?(h2=f2,!0):(p===9&&c3==="rotateZ"&&(c3="rotate"),void(b2+=c3+f2+" "))}),h2&&(b2="perspective"+h2+" "+b2)}y.setPropertyValue(a2,"transform",b2)}};y.Hooks.register(),y.Normalizations.register(),w.hook=function(a2,b2,c2){var e2;return a2=f(a2),o.each(a2,function(a3,f2){if(g(f2)===d&&w.init(f2),c2===d)e2===d&&(e2=y.getPropertyValue(f2,b2));else{var h2=y.setPropertyValue(f2,b2,c2);h2[0]==="transform"&&w.CSS.flushTransformCache(f2),e2=h2}}),e2};var z=function(){function a2(){return k2?A2.promise||null:p2}function e2(a3,e3){function f2(f3){var k4,n3;if(i2.begin&&C===0)try{i2.begin.call(r2,r2)}catch(p3){setTimeout(function(){throw p3},1)}if(F==="scroll"){var q3,u2,x3,z2=/^x$/i.test(i2.axis)?"Left":"Top",D2=parseFloat(i2.offset)||0;i2.container?s.isWrapped(i2.container)||s.isNode(i2.container)?(i2.container=i2.container[0]||i2.container,q3=i2.container["scroll"+z2],x3=q3+o(a3).position()[z2.toLowerCase()]+D2):i2.container=null:(q3=w.State.scrollAnchor[w.State["scrollProperty"+z2]],u2=w.State.scrollAnchor[w.State["scrollProperty"+(z2==="Left"?"Top":"Left")]],x3=o(a3).offset()[z2.toLowerCase()]+D2),j3={scroll:{rootPropertyValue:!1,startValue:q3,currentValue:q3,endValue:x3,unitType:"",easing:i2.easing,scrollData:{container:i2.container,direction:z2,alternateValue:u2}},element:a3},w.debug&&console.log("tweensContainer (scroll): ",j3.scroll,a3)}else if(F==="reverse"){if(k4=g(a3),!k4)return;if(!k4.tweensContainer)return void o.dequeue(a3,i2.queue);k4.opts.display==="none"&&(k4.opts.display="auto"),k4.opts.visibility==="hidden"&&(k4.opts.visibility="visible"),k4.opts.loop=!1,k4.opts.begin=null,k4.opts.complete=null,v2.easing||delete i2.easing,v2.duration||delete i2.duration,i2=o.extend({},k4.opts,i2),n3=o.extend(!0,{},k4?k4.tweensContainer:null);for(var E2 in n3)if(n3.hasOwnProperty(E2)&&E2!=="element"){var G2=n3[E2].startValue;n3[E2].startValue=n3[E2].currentValue=n3[E2].endValue,n3[E2].endValue=G2,s.isEmptyObject(v2)||(n3[E2].easing=i2.easing),w.debug&&console.log("reverse tweensContainer ("+E2+"): "+JSON.stringify(n3[E2]),a3)}j3=n3}else if(F==="start"){k4=g(a3),k4&&k4.tweensContainer&&k4.isAnimating===!0&&(n3=k4.tweensContainer);var H2=function(b2,c2){var d2,f4,g2;return s.isFunction(b2)&&(b2=b2.call(a3,e3,B2)),s.isArray(b2)?(d2=b2[0],!s.isArray(b2[1])&&/^[\d-]/.test(b2[1])||s.isFunction(b2[1])||y.RegEx.isHex.test(b2[1])?g2=b2[1]:s.isString(b2[1])&&!y.RegEx.isHex.test(b2[1])&&w.Easings[b2[1]]||s.isArray(b2[1])?(f4=c2?b2[1]:l(b2[1],i2.duration),g2=b2[2]):g2=b2[1]||b2[2]):d2=b2,c2||(f4=f4||i2.easing),s.isFunction(d2)&&(d2=d2.call(a3,e3,B2)),s.isFunction(g2)&&(g2=g2.call(a3,e3,B2)),[d2||0,f4,g2]},I2=function(e4,f4){var g2,l2=y.Hooks.getRoot(e4),m2=!1,p3=f4[0],q4=f4[1],r3=f4[2];if(!(k4&&k4.isSVG||l2==="tween"||y.Names.prefixCheck(l2)[1]!==!1||y.Normalizations.registered[l2]!==d))return void(w.debug&&console.log("Skipping ["+l2+"] due to a lack of browser support."));(i2.display!==d&&i2.display!==null&&i2.display!=="none"||i2.visibility!==d&&i2.visibility!=="hidden")&&/opacity|filter/.test(e4)&&!r3&&p3!==0&&(r3=0),i2._cacheValues&&n3&&n3[e4]?(r3===d&&(r3=n3[e4].endValue+n3[e4].unitType),m2=k4.rootPropertyValueCache[l2]):y.Hooks.registered[e4]?r3===d?(m2=y.getPropertyValue(a3,l2),r3=y.getPropertyValue(a3,e4,m2)):m2=y.Hooks.templates[l2][1]:r3===d&&(r3=y.getPropertyValue(a3,e4));var t3,u3,v3,x4=!1,z3=function(a4,b2){var c2,d2;return d2=(b2||"0").toString().toLowerCase().replace(/[%A-z]+$/,function(a5){return c2=a5,""}),c2||(c2=y.Values.getUnitType(a4)),[d2,c2]};if(r3!==p3&&s.isString(r3)&&s.isString(p3)){g2="";var A3=0,B3=0,C2=[],D3=[],E3=0,F2=0,G3=0;for(r3=y.Hooks.fixColors(r3),p3=y.Hooks.fixColors(p3);A3<r3.length&&B3<p3.length;){var H3=r3[A3],I3=p3[B3];if(/[\d\.]/.test(H3)&&/[\d\.]/.test(I3)){for(var J3=H3,K3=I3,M2=".",N3=".";++A3<r3.length;){if(H3=r3[A3],H3===M2)M2="..";else if(!/\d/.test(H3))break;J3+=H3}for(;++B3<p3.length;){if(I3=p3[B3],I3===N3)N3="..";else if(!/\d/.test(I3))break;K3+=I3}var O3=y.Hooks.getUnit(r3,A3),P3=y.Hooks.getUnit(p3,B3);if(A3+=O3.length,B3+=P3.length,O3===P3)J3===K3?g2+=J3+O3:(g2+="{"+C2.length+(F2?"!":"")+"}"+O3,C2.push(parseFloat(J3)),D3.push(parseFloat(K3)));else{var Q2=parseFloat(J3),R2=parseFloat(K3);g2+=(E3<5?"calc":"")+"("+(Q2?"{"+C2.length+(F2?"!":"")+"}":"0")+O3+" + "+(R2?"{"+(C2.length+1)+(F2?"!":"")+"}":"0")+P3+")",Q2&&(C2.push(parseFloat(J3)),C2.push(parseFloat(0))),R2&&(D3.push(parseFloat(0)),D3.push(parseFloat(K3)))}}else{if(H3!==I3){E3=0;break}g2+=H3,A3++,B3++,E3===0&&H3==="c"||E3===1&&H3==="a"||E3===2&&H3==="l"||E3===3&&H3==="c"||E3>=4&&H3==="("?E3++:(E3&&E3<5||E3>=4&&H3===")"&&--E3<5)&&(E3=0),F2===0&&H3==="r"||F2===1&&H3==="g"||F2===2&&H3==="b"||F2===3&&H3==="a"||F2>=3&&H3==="("?(F2===3&&H3==="a"&&(G3=1),F2++):G3&&H3===","?++G3>3&&(F2=G3=0):(G3&&F2<(G3?5:4)||F2>=(G3?4:3)&&H3===")"&&--F2<(G3?5:4))&&(F2=G3=0)}}A3===r3.length&&B3===p3.length||(w.debug&&console.error('Trying to pattern match mis-matched strings ["'+p3+'", "'+r3+'"]'),g2=d),g2&&(C2.length?(w.debug&&console.log('Pattern found "'+g2+'" -> ',C2,D3,"["+r3+","+p3+"]"),r3=C2,p3=D3,u3=v3=""):g2=d)}g2||(t3=z3(e4,r3),r3=t3[0],v3=t3[1],t3=z3(e4,p3),p3=t3[0].replace(/^([+-\/*])=/,function(a4,b2){return x4=b2,""}),u3=t3[1],r3=parseFloat(r3)||0,p3=parseFloat(p3)||0,u3==="%"&&(/^(fontSize|lineHeight)$/.test(e4)?(p3/=100,u3="em"):/^scale/.test(e4)?(p3/=100,u3=""):/(Red|Green|Blue)$/i.test(e4)&&(p3=p3/100*255,u3="")));var S2=function(){var d2={myParent:a3.parentNode||c.body,position:y.getPropertyValue(a3,"position"),fontSize:y.getPropertyValue(a3,"fontSize")},e5=d2.position===L.lastPosition&&d2.myParent===L.lastParent,f5=d2.fontSize===L.lastFontSize;L.lastParent=d2.myParent,L.lastPosition=d2.position,L.lastFontSize=d2.fontSize;var g3=100,h3={};if(f5&&e5)h3.emToPx=L.lastEmToPx,h3.percentToPxWidth=L.lastPercentToPxWidth,h3.percentToPxHeight=L.lastPercentToPxHeight;else{var i3=k4&&k4.isSVG?c.createElementNS("http://www.w3.org/2000/svg","rect"):c.createElement("div");w.init(i3),d2.myParent.appendChild(i3),o.each(["overflow","overflowX","overflowY"],function(a4,b2){w.CSS.setPropertyValue(i3,b2,"hidden")}),w.CSS.setPropertyValue(i3,"position",d2.position),w.CSS.setPropertyValue(i3,"fontSize",d2.fontSize),w.CSS.setPropertyValue(i3,"boxSizing","content-box"),o.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],function(a4,b2){w.CSS.setPropertyValue(i3,b2,g3+"%")}),w.CSS.setPropertyValue(i3,"paddingLeft",g3+"em"),h3.percentToPxWidth=L.lastPercentToPxWidth=(parseFloat(y.getPropertyValue(i3,"width",null,!0))||1)/g3,h3.percentToPxHeight=L.lastPercentToPxHeight=(parseFloat(y.getPropertyValue(i3,"height",null,!0))||1)/g3,h3.emToPx=L.lastEmToPx=(parseFloat(y.getPropertyValue(i3,"paddingLeft"))||1)/g3,d2.myParent.removeChild(i3)}return L.remToPx===null&&(L.remToPx=parseFloat(y.getPropertyValue(c.body,"fontSize"))||16),L.vwToPx===null&&(L.vwToPx=parseFloat(b.innerWidth)/100,L.vhToPx=parseFloat(b.innerHeight)/100),h3.remToPx=L.remToPx,h3.vwToPx=L.vwToPx,h3.vhToPx=L.vhToPx,w.debug>=1&&console.log("Unit ratios: "+JSON.stringify(h3),a3),h3};if(/[\/*]/.test(x4))u3=v3;else if(v3!==u3&&r3!==0)if(p3===0)u3=v3;else{h2=h2||S2();var T2=/margin|padding|left|right|width|text|word|letter/i.test(e4)||/X$/.test(e4)||e4==="x"?"x":"y";switch(v3){case"%":r3*=T2==="x"?h2.percentToPxWidth:h2.percentToPxHeight;break;case"px":break;default:r3*=h2[v3+"ToPx"]}switch(u3){case"%":r3*=1/(T2==="x"?h2.percentToPxWidth:h2.percentToPxHeight);break;case"px":break;default:r3*=1/h2[u3+"ToPx"]}}switch(x4){case"+":p3=r3+p3;break;case"-":p3=r3-p3;break;case"*":p3=r3*p3;break;case"/":p3=r3/p3}j3[e4]={rootPropertyValue:m2,startValue:r3,currentValue:r3,endValue:p3,unitType:u3,easing:q4},g2&&(j3[e4].pattern=g2),w.debug&&console.log("tweensContainer ("+e4+"): "+JSON.stringify(j3[e4]),a3)};for(var J2 in t2)if(t2.hasOwnProperty(J2)){var K2=y.Names.camelCase(J2),N2=H2(t2[J2]);if(y.Lists.colors.indexOf(K2)>=0){var O2=N2[0],P2=N2[1],Q=N2[2];if(y.RegEx.isHex.test(O2)){for(var R=["Red","Green","Blue"],S=y.Values.hexToRgb(O2),T=Q?y.Values.hexToRgb(Q):d,U=0;U<R.length;U++){var V=[S[U]];P2&&V.push(P2),T!==d&&V.push(T[U]),I2(K2+R[U],V)}continue}}I2(K2,N2)}j3.element=a3}j3.element&&(y.Values.addClass(a3,"velocity-animating"),M.push(j3),k4=g(a3),k4&&(i2.queue===""&&(k4.tweensContainer=j3,k4.opts=i2),k4.isAnimating=!0),C===B2-1?(w.State.calls.push([M,r2,i2,null,A2.resolver,null,0]),w.State.isTicking===!1&&(w.State.isTicking=!0,m())):C++)}var h2,i2=o.extend({},w.defaults,v2),j3={};switch(g(a3)===d&&w.init(a3),parseFloat(i2.delay)&&i2.queue!==!1&&o.queue(a3,i2.queue,function(b2){w.velocityQueueEntryFlag=!0;var c2=w.State.delayedElements.count++;w.State.delayedElements[c2]=a3;var d2=function(a4){return function(){w.State.delayedElements[a4]=!1,b2()}}(c2);g(a3).delayBegin=new Date().getTime(),g(a3).delay=parseFloat(i2.delay),g(a3).delayTimer={setTimeout:setTimeout(b2,parseFloat(i2.delay)),next:d2}}),i2.duration.toString().toLowerCase()){case"fast":i2.duration=200;break;case"normal":i2.duration=u;break;case"slow":i2.duration=600;break;default:i2.duration=parseFloat(i2.duration)||1}if(w.mock!==!1&&(w.mock===!0?i2.duration=i2.delay=1:(i2.duration*=parseFloat(w.mock)||1,i2.delay*=parseFloat(w.mock)||1)),i2.easing=l(i2.easing,i2.duration),i2.begin&&!s.isFunction(i2.begin)&&(i2.begin=null),i2.progress&&!s.isFunction(i2.progress)&&(i2.progress=null),i2.complete&&!s.isFunction(i2.complete)&&(i2.complete=null),i2.display!==d&&i2.display!==null&&(i2.display=i2.display.toString().toLowerCase(),i2.display==="auto"&&(i2.display=w.CSS.Values.getDisplayType(a3))),i2.visibility!==d&&i2.visibility!==null&&(i2.visibility=i2.visibility.toString().toLowerCase()),i2.mobileHA=i2.mobileHA&&w.State.isMobile&&!w.State.isGingerbread,i2.queue===!1)if(i2.delay){var k3=w.State.delayedElements.count++;w.State.delayedElements[k3]=a3;var n2=function(a4){return function(){w.State.delayedElements[a4]=!1,f2()}}(k3);g(a3).delayBegin=new Date().getTime(),g(a3).delay=parseFloat(i2.delay),g(a3).delayTimer={setTimeout:setTimeout(f2,parseFloat(i2.delay)),next:n2}}else f2();else o.queue(a3,i2.queue,function(a4,b2){return b2===!0?(A2.promise&&A2.resolver(r2),!0):(w.velocityQueueEntryFlag=!0,void f2(a4))});i2.queue!==""&&i2.queue!=="fx"||o.queue(a3)[0]==="inprogress"||o.dequeue(a3)}var j2,k2,p2,q2,r2,t2,v2,x2=arguments[0]&&(arguments[0].p||o.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||s.isString(arguments[0].properties));s.isWrapped(this)?(k2=!1,q2=0,r2=this,p2=this):(k2=!0,q2=1,r2=x2?arguments[0].elements||arguments[0].e:arguments[0]);var A2={promise:null,resolver:null,rejecter:null};if(k2&&w.Promise&&(A2.promise=new w.Promise(function(a3,b2){A2.resolver=a3,A2.rejecter=b2})),x2?(t2=arguments[0].properties||arguments[0].p,v2=arguments[0].options||arguments[0].o):(t2=arguments[q2],v2=arguments[q2+1]),r2=f(r2),!r2)return void(A2.promise&&(t2&&v2&&v2.promiseRejectEmpty===!1?A2.resolver():A2.rejecter()));var B2=r2.length,C=0;if(!/^(stop|finish|finishAll|pause|resume)$/i.test(t2)&&!o.isPlainObject(v2)){var D=q2+1;v2={};for(var E=D;E<arguments.length;E++)s.isArray(arguments[E])||!/^(fast|normal|slow)$/i.test(arguments[E])&&!/^\d/.test(arguments[E])?s.isString(arguments[E])||s.isArray(arguments[E])?v2.easing=arguments[E]:s.isFunction(arguments[E])&&(v2.complete=arguments[E]):v2.duration=arguments[E]}var F;switch(t2){case"scroll":F="scroll";break;case"reverse":F="reverse";break;case"pause":var G=new Date().getTime();return o.each(r2,function(a3,b2){h(b2,G)}),o.each(w.State.calls,function(a3,b2){var c2=!1;b2&&o.each(b2[1],function(a4,e3){var f2=v2===d?"":v2;return f2!==!0&&b2[2].queue!==f2&&(v2!==d||b2[2].queue!==!1)||(o.each(r2,function(a5,d2){if(d2===e3)return b2[5]={resume:!1},c2=!0,!1}),!c2&&void 0)})}),a2();case"resume":return o.each(r2,function(a3,b2){i(b2,G)}),o.each(w.State.calls,function(a3,b2){var c2=!1;b2&&o.each(b2[1],function(a4,e3){var f2=v2===d?"":v2;return f2!==!0&&b2[2].queue!==f2&&(v2!==d||b2[2].queue!==!1)||!b2[5]||(o.each(r2,function(a5,d2){if(d2===e3)return b2[5].resume=!0,c2=!0,!1}),!c2&&void 0)})}),a2();case"finish":case"finishAll":case"stop":o.each(r2,function(a3,b2){g(b2)&&g(b2).delayTimer&&(clearTimeout(g(b2).delayTimer.setTimeout),g(b2).delayTimer.next&&g(b2).delayTimer.next(),delete g(b2).delayTimer),t2!=="finishAll"||v2!==!0&&!s.isString(v2)||(o.each(o.queue(b2,s.isString(v2)?v2:""),function(a4,b3){s.isFunction(b3)&&b3()}),o.queue(b2,s.isString(v2)?v2:"",[]))});var H=[];return o.each(w.State.calls,function(a3,b2){b2&&o.each(b2[1],function(c2,e3){var f2=v2===d?"":v2;return f2!==!0&&b2[2].queue!==f2&&(v2!==d||b2[2].queue!==!1)||void o.each(r2,function(c3,d2){if(d2===e3)if((v2===!0||s.isString(v2))&&(o.each(o.queue(d2,s.isString(v2)?v2:""),function(a4,b3){s.isFunction(b3)&&b3(null,!0)}),o.queue(d2,s.isString(v2)?v2:"",[])),t2==="stop"){var h2=g(d2);h2&&h2.tweensContainer&&f2!==!1&&o.each(h2.tweensContainer,function(a4,b3){b3.endValue=b3.currentValue}),H.push(a3)}else t2!=="finish"&&t2!=="finishAll"||(b2[2].duration=1)})})}),t2==="stop"&&(o.each(H,function(a3,b2){n(b2,!0)}),A2.promise&&A2.resolver(r2)),a2();default:if(!o.isPlainObject(t2)||s.isEmptyObject(t2)){if(s.isString(t2)&&w.Redirects[t2]){j2=o.extend({},v2);var I=j2.duration,J=j2.delay||0;return j2.backwards===!0&&(r2=o.extend(!0,[],r2).reverse()),o.each(r2,function(a3,b2){parseFloat(j2.stagger)?j2.delay=J+parseFloat(j2.stagger)*a3:s.isFunction(j2.stagger)&&(j2.delay=J+j2.stagger.call(b2,a3,B2)),j2.drag&&(j2.duration=parseFloat(I)||(/^(callout|transition)/.test(t2)?1e3:u),j2.duration=Math.max(j2.duration*(j2.backwards?1-a3/B2:(a3+1)/B2),.75*j2.duration,200)),w.Redirects[t2].call(b2,b2,j2||{},a3,B2,r2,A2.promise?A2:d)}),a2()}var K="Velocity: First argument ("+t2+") was not a property map, a known action, or a registered redirect. Aborting.";return A2.promise?A2.rejecter(new Error(K)):console.log(K),a2()}F="start"}var L={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},M=[];o.each(r2,function(a3,b2){s.isNode(b2)&&e2(b2,a3)}),j2=o.extend({},w.defaults,v2),j2.loop=parseInt(j2.loop,10);var N=2*j2.loop-1;if(j2.loop)for(var O=0;O<N;O++){var P={delay:j2.delay,progress:j2.progress};O===N-1&&(P.display=j2.display,P.visibility=j2.visibility,P.complete=j2.complete),z(r2,"reverse",P)}return a2()};w=o.extend(z,w),w.animate=z;var A=b.requestAnimationFrame||q;if(!w.State.isMobile&&c.hidden!==d){var B=function(){c.hidden?(A=function(a2){return setTimeout(function(){a2(!0)},16)},m()):A=b.requestAnimationFrame||q};B(),c.addEventListener("visibilitychange",B)}return a.Velocity=w,a!==b&&(a.fn.velocity=z,a.fn.velocity.defaults=w.defaults),o.each(["Down","Up"],function(a2,b2){w.Redirects["slide"+b2]=function(a3,c2,e2,f2,g2,h2){var i2=o.extend({},c2),j2=i2.begin,k2=i2.complete,l2={},m2={height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""};i2.display===d&&(i2.display=b2==="Down"?w.CSS.Values.getDisplayType(a3)==="inline"?"inline-block":"block":"none"),i2.begin=function(){e2===0&&j2&&j2.call(g2,g2);for(var c3 in m2)if(m2.hasOwnProperty(c3)){l2[c3]=a3.style[c3];var d2=y.getPropertyValue(a3,c3);m2[c3]=b2==="Down"?[d2,0]:[0,d2]}l2.overflow=a3.style.overflow,a3.style.overflow="hidden"},i2.complete=function(){for(var b3 in l2)l2.hasOwnProperty(b3)&&(a3.style[b3]=l2[b3]);e2===f2-1&&(k2&&k2.call(g2,g2),h2&&h2.resolver(g2))},w(a3,m2,i2)}}),o.each(["In","Out"],function(a2,b2){w.Redirects["fade"+b2]=function(a3,c2,e2,f2,g2,h2){var i2=o.extend({},c2),j2=i2.complete,k2={opacity:b2==="In"?1:0};e2!==0&&(i2.begin=null),e2!==f2-1?i2.complete=null:i2.complete=function(){j2&&j2.call(g2,g2),h2&&h2.resolver(g2)},i2.display===d&&(i2.display=b2==="In"?"auto":"none"),w(this,k2,i2)}}),w}(window.jQuery||window.Zepto||window,window,window?window.document:void 0)})}});var require_jquery_velocity_ui_min=__commonJS({"vendor/jquery_plugins/jquery.velocity.ui.min.js"(exports,module){"use strict";init_define_process_env();init_shim();(function(a){"use strict";typeof __require=="function"&&typeof exports=="object"?module.exports=a():typeof define=="function"&&define.amd?define(["velocity"],a):a()})(function(){"use strict";return function(a,b,c,d){function e(a2,b2){var c2=[];return!(!a2||!b2)&&(g.each([a2,b2],function(a3,b3){var d2=[];g.each(b3,function(a4,b4){for(;b4.toString().length<5;)b4="0"+b4;d2.push(b4)}),c2.push(d2.join(""))}),parseFloat(c2[0])>parseFloat(c2[1]))}var f=a.Velocity;if(!f||!f.Utilities)return void(b.console&&console.log("Velocity UI Pack: Velocity must be loaded first. Aborting."));var g=f.Utilities,h=f.version,i={major:1,minor:1,patch:0};if(e(i,h)){var j="Velocity UI Pack: You need to update Velocity (velocity.js) to a newer version. Visit http://github.com/julianshapiro/velocity.";throw alert(j),new Error(j)}f.RegisterEffect=f.RegisterUI=function(a2,b2){function c2(a3,b3,c3,d2){var e2,h2=0;g.each(a3.nodeType?[a3]:a3,function(a4,b4){d2&&(c3+=a4*d2),e2=b4.parentNode;var i2=["height","paddingTop","paddingBottom","marginTop","marginBottom"];f.CSS.getPropertyValue(b4,"boxSizing").toString().toLowerCase()==="border-box"&&(i2=["height"]),g.each(i2,function(a5,c4){h2+=parseFloat(f.CSS.getPropertyValue(b4,c4))})}),f.animate(e2,{height:(b3==="In"?"+":"-")+"="+h2},{queue:!1,easing:"ease-in-out",duration:c3*(b3==="In"?.6:1)})}return f.Redirects[a2]=function(e2,h2,i2,j2,k2,l,m){var n=i2===j2-1;m=m||b2.loop,typeof b2.defaultDuration=="function"?b2.defaultDuration=b2.defaultDuration.call(k2,k2):b2.defaultDuration=parseFloat(b2.defaultDuration);for(var o=0;o<b2.calls.length;o++){var p=b2.calls[o],q=p[0],r=1e3,s=p[1],t=p[2]||{},u={};if(h2.duration!==d?r=h2.duration:b2.defaultDuration!==d&&(r=b2.defaultDuration),u.duration=r*(s||1),u.queue=h2.queue||"",u.easing=t.easing||"ease",u.delay=parseFloat(t.delay)||0,u.loop=!b2.loop&&t.loop,u._cacheValues=t._cacheValues||!0,o===0){if(u.delay+=parseFloat(h2.delay)||0,i2===0&&(u.begin=function(){h2.begin&&h2.begin.call(k2,k2);var b3=a2.match(/(In|Out)$/);b3&&b3[0]==="In"&&q.opacity!==d&&g.each(k2.nodeType?[k2]:k2,function(a3,b4){f.CSS.setPropertyValue(b4,"opacity",0)}),h2.animateParentHeight&&b3&&c2(k2,b3[0],r+u.delay,h2.stagger)}),h2.display!==null){if(h2.display!==d&&h2.display!=="none")u.display=h2.display;else if(/In$/.test(a2)){var v=f.CSS.Values.getDisplayType(e2);u.display=v==="inline"?"inline-block":v}}h2.visibility&&h2.visibility!=="hidden"&&(u.visibility=h2.visibility)}if(o===b2.calls.length-1){var w=function(){h2.display!==d&&h2.display!=="none"||!/Out$/.test(a2)||g.each(k2.nodeType?[k2]:k2,function(a3,b3){f.CSS.setPropertyValue(b3,"display","none")}),h2.complete&&h2.complete.call(k2,k2),l&&l.resolver(k2||e2)};u.complete=function(){if(m&&f.Redirects[a2](e2,h2,i2,j2,k2,l,m===!0||Math.max(0,m-1)),b2.reset){for(var c3 in b2.reset)if(b2.reset.hasOwnProperty(c3)){var g2=b2.reset[c3];f.CSS.Hooks.registered[c3]!==d||typeof g2!="string"&&typeof g2!="number"||(b2.reset[c3]=[b2.reset[c3],b2.reset[c3]])}var o2={duration:0,queue:!1};n&&(o2.complete=w),f.animate(e2,b2.reset,o2)}else n&&w()},h2.visibility==="hidden"&&(u.visibility=h2.visibility)}f.animate(e2,q,u)}},f},f.RegisterEffect.packagedEffects={"callout.bounce":{defaultDuration:550,calls:[[{translateY:-30},.25],[{translateY:0},.125],[{translateY:-15},.125],[{translateY:0},.25]]},"callout.shake":{defaultDuration:800,calls:[[{translateX:-11},.125],[{translateX:11},.125],[{translateX:-11},.125],[{translateX:11},.125],[{translateX:-11},.125],[{translateX:11},.125],[{translateX:-11},.125],[{translateX:0},.125]]},"callout.flash":{defaultDuration:1100,calls:[[{opacity:[0,"easeInOutQuad",1]},.25],[{opacity:[1,"easeInOutQuad"]},.25],[{opacity:[0,"easeInOutQuad"]},.25],[{opacity:[1,"easeInOutQuad"]},.25]]},"callout.pulse":{defaultDuration:825,calls:[[{scaleX:1.1,scaleY:1.1},.5,{easing:"easeInExpo"}],[{scaleX:1,scaleY:1},.5]]},"callout.swing":{defaultDuration:950,calls:[[{rotateZ:15},.2],[{rotateZ:-10},.2],[{rotateZ:5},.2],[{rotateZ:-5},.2],[{rotateZ:0},.2]]},"callout.tada":{defaultDuration:1e3,calls:[[{scaleX:.9,scaleY:.9,rotateZ:-3},.1],[{scaleX:1.1,scaleY:1.1,rotateZ:3},.1],[{scaleX:1.1,scaleY:1.1,rotateZ:-3},.1],["reverse",.125],["reverse",.125],["reverse",.125],["reverse",.125],["reverse",.125],[{scaleX:1,scaleY:1,rotateZ:0},.2]]},"transition.fadeIn":{defaultDuration:500,calls:[[{opacity:[1,0]}]]},"transition.fadeOut":{defaultDuration:500,calls:[[{opacity:[0,1]}]]},"transition.flipXIn":{defaultDuration:700,calls:[[{opacity:[1,0],transformPerspective:[800,800],rotateY:[0,-55]}]],reset:{transformPerspective:0}},"transition.flipXOut":{defaultDuration:700,calls:[[{opacity:[0,1],transformPerspective:[800,800],rotateY:55}]],reset:{transformPerspective:0,rotateY:0}},"transition.flipYIn":{defaultDuration:800,calls:[[{opacity:[1,0],transformPerspective:[800,800],rotateX:[0,-45]}]],reset:{transformPerspective:0}},"transition.flipYOut":{defaultDuration:800,calls:[[{opacity:[0,1],transformPerspective:[800,800],rotateX:25}]],reset:{transformPerspective:0,rotateX:0}},"transition.flipBounceXIn":{defaultDuration:900,calls:[[{opacity:[.725,0],transformPerspective:[400,400],rotateY:[-10,90]},.5],[{opacity:.8,rotateY:10},.25],[{opacity:1,rotateY:0},.25]],reset:{transformPerspective:0}},"transition.flipBounceXOut":{defaultDuration:800,calls:[[{opacity:[.9,1],transformPerspective:[400,400],rotateY:-10},.5],[{opacity:0,rotateY:90},.5]],reset:{transformPerspective:0,rotateY:0}},"transition.flipBounceYIn":{defaultDuration:850,calls:[[{opacity:[.725,0],transformPerspective:[400,400],rotateX:[-10,90]},.5],[{opacity:.8,rotateX:10},.25],[{opacity:1,rotateX:0},.25]],reset:{transformPerspective:0}},"transition.flipBounceYOut":{defaultDuration:800,calls:[[{opacity:[.9,1],transformPerspective:[400,400],rotateX:-15},.5],[{opacity:0,rotateX:90},.5]],reset:{transformPerspective:0,rotateX:0}},"transition.swoopIn":{defaultDuration:850,calls:[[{opacity:[1,0],transformOriginX:["100%","50%"],transformOriginY:["100%","100%"],scaleX:[1,0],scaleY:[1,0],translateX:[0,-700],translateZ:0}]],reset:{transformOriginX:"50%",transformOriginY:"50%"}},"transition.swoopOut":{defaultDuration:850,calls:[[{opacity:[0,1],transformOriginX:["50%","100%"],transformOriginY:["100%","100%"],scaleX:0,scaleY:0,translateX:-700,translateZ:0}]],reset:{transformOriginX:"50%",transformOriginY:"50%",scaleX:1,scaleY:1,translateX:0}},"transition.whirlIn":{defaultDuration:850,calls:[[{opacity:[1,0],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:[1,0],scaleY:[1,0],rotateY:[0,160]},1,{easing:"easeInOutSine"}]]},"transition.whirlOut":{defaultDuration:750,calls:[[{opacity:[0,"easeInOutQuint",1],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:0,scaleY:0,rotateY:160},1,{easing:"swing"}]],reset:{scaleX:1,scaleY:1,rotateY:0}},"transition.shrinkIn":{defaultDuration:750,calls:[[{opacity:[1,0],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:[1,1.5],scaleY:[1,1.5],translateZ:0}]]},"transition.shrinkOut":{defaultDuration:600,calls:[[{opacity:[0,1],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:1.3,scaleY:1.3,translateZ:0}]],reset:{scaleX:1,scaleY:1}},"transition.expandIn":{defaultDuration:700,calls:[[{opacity:[1,0],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:[1,.625],scaleY:[1,.625],translateZ:0}]]},"transition.expandOut":{defaultDuration:700,calls:[[{opacity:[0,1],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:.5,scaleY:.5,translateZ:0}]],reset:{scaleX:1,scaleY:1}},"transition.bounceIn":{defaultDuration:800,calls:[[{opacity:[1,0],scaleX:[1.05,.3],scaleY:[1.05,.3]},.4],[{scaleX:.9,scaleY:.9,translateZ:0},.2],[{scaleX:1,scaleY:1},.5]]},"transition.bounceOut":{defaultDuration:800,calls:[[{scaleX:.95,scaleY:.95},.35],[{scaleX:1.1,scaleY:1.1,translateZ:0},.35],[{opacity:[0,1],scaleX:.3,scaleY:.3},.3]],reset:{scaleX:1,scaleY:1}},"transition.bounceUpIn":{defaultDuration:800,calls:[[{opacity:[1,0],translateY:[-30,1e3]},.6,{easing:"easeOutCirc"}],[{translateY:10},.2],[{translateY:0},.2]]},"transition.bounceUpOut":{defaultDuration:1e3,calls:[[{translateY:20},.2],[{opacity:[0,"easeInCirc",1],translateY:-1e3},.8]],reset:{translateY:0}},"transition.bounceDownIn":{defaultDuration:800,calls:[[{opacity:[1,0],translateY:[30,-1e3]},.6,{easing:"easeOutCirc"}],[{translateY:-10},.2],[{translateY:0},.2]]},"transition.bounceDownOut":{defaultDuration:1e3,calls:[[{translateY:-20},.2],[{opacity:[0,"easeInCirc",1],translateY:1e3},.8]],reset:{translateY:0}},"transition.bounceLeftIn":{defaultDuration:750,calls:[[{opacity:[1,0],translateX:[30,-1250]},.6,{easing:"easeOutCirc"}],[{translateX:-10},.2],[{translateX:0},.2]]},"transition.bounceLeftOut":{defaultDuration:750,calls:[[{translateX:30},.2],[{opacity:[0,"easeInCirc",1],translateX:-1250},.8]],reset:{translateX:0}},"transition.bounceRightIn":{defaultDuration:750,calls:[[{opacity:[1,0],translateX:[-30,1250]},.6,{easing:"easeOutCirc"}],[{translateX:10},.2],[{translateX:0},.2]]},"transition.bounceRightOut":{defaultDuration:750,calls:[[{translateX:-30},.2],[{opacity:[0,"easeInCirc",1],translateX:1250},.8]],reset:{translateX:0}},"transition.slideUpIn":{defaultDuration:900,calls:[[{opacity:[1,0],translateY:[0,20],translateZ:0}]]},"transition.slideUpOut":{defaultDuration:900,calls:[[{opacity:[0,1],translateY:-20,translateZ:0}]],reset:{translateY:0}},"transition.slideDownIn":{defaultDuration:900,calls:[[{opacity:[1,0],translateY:[0,-20],translateZ:0}]]},"transition.slideDownOut":{defaultDuration:900,calls:[[{opacity:[0,1],translateY:20,translateZ:0}]],reset:{translateY:0}},"transition.slideLeftIn":{defaultDuration:1e3,calls:[[{opacity:[1,0],translateX:[0,-20],translateZ:0}]]},"transition.slideLeftOut":{defaultDuration:1050,calls:[[{opacity:[0,1],translateX:-20,translateZ:0}]],reset:{translateX:0}},"transition.slideRightIn":{defaultDuration:1e3,calls:[[{opacity:[1,0],translateX:[0,20],translateZ:0}]]},"transition.slideRightOut":{defaultDuration:1050,calls:[[{opacity:[0,1],translateX:20,translateZ:0}]],reset:{translateX:0}},"transition.slideUpBigIn":{defaultDuration:850,calls:[[{opacity:[1,0],translateY:[0,75],translateZ:0}]]},"transition.slideUpBigOut":{defaultDuration:800,calls:[[{opacity:[0,1],translateY:-75,translateZ:0}]],reset:{translateY:0}},"transition.slideDownBigIn":{defaultDuration:850,calls:[[{opacity:[1,0],translateY:[0,-75],translateZ:0}]]},"transition.slideDownBigOut":{defaultDuration:800,calls:[[{opacity:[0,1],translateY:75,translateZ:0}]],reset:{translateY:0}},"transition.slideLeftBigIn":{defaultDuration:800,calls:[[{opacity:[1,0],translateX:[0,-75],translateZ:0}]]},"transition.slideLeftBigOut":{defaultDuration:750,calls:[[{opacity:[0,1],translateX:-75,translateZ:0}]],reset:{translateX:0}},"transition.slideRightBigIn":{defaultDuration:800,calls:[[{opacity:[1,0],translateX:[0,75],translateZ:0}]]},"transition.slideRightBigOut":{defaultDuration:750,calls:[[{opacity:[0,1],translateX:75,translateZ:0}]],reset:{translateX:0}},"transition.perspectiveUpIn":{defaultDuration:800,calls:[[{opacity:[1,0],transformPerspective:[800,800],transformOriginX:[0,0],transformOriginY:["100%","100%"],rotateX:[0,-180]}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%"}},"transition.perspectiveUpOut":{defaultDuration:850,calls:[[{opacity:[0,1],transformPerspective:[800,800],transformOriginX:[0,0],transformOriginY:["100%","100%"],rotateX:-180}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%",rotateX:0}},"transition.perspectiveDownIn":{defaultDuration:800,calls:[[{opacity:[1,0],transformPerspective:[800,800],transformOriginX:[0,0],transformOriginY:[0,0],rotateX:[0,180]}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%"}},"transition.perspectiveDownOut":{defaultDuration:850,calls:[[{opacity:[0,1],transformPerspective:[800,800],transformOriginX:[0,0],transformOriginY:[0,0],rotateX:180}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%",rotateX:0}},"transition.perspectiveLeftIn":{defaultDuration:950,calls:[[{opacity:[1,0],transformPerspective:[2e3,2e3],transformOriginX:[0,0],transformOriginY:[0,0],rotateY:[0,-180]}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%"}},"transition.perspectiveLeftOut":{defaultDuration:950,calls:[[{opacity:[0,1],transformPerspective:[2e3,2e3],transformOriginX:[0,0],transformOriginY:[0,0],rotateY:-180}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%",rotateY:0}},"transition.perspectiveRightIn":{defaultDuration:950,calls:[[{opacity:[1,0],transformPerspective:[2e3,2e3],transformOriginX:["100%","100%"],transformOriginY:[0,0],rotateY:[0,180]}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%"}},"transition.perspectiveRightOut":{defaultDuration:950,calls:[[{opacity:[0,1],transformPerspective:[2e3,2e3],transformOriginX:["100%","100%"],transformOriginY:[0,0],rotateY:180}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%",rotateY:0}}};for(var k in f.RegisterEffect.packagedEffects)f.RegisterEffect.packagedEffects.hasOwnProperty(k)&&f.RegisterEffect(k,f.RegisterEffect.packagedEffects[k]);f.RunSequence=function(a2){var b2=g.extend(!0,[],a2);b2.length>1&&(g.each(b2.reverse(),function(a3,c2){var d2=b2[a3+1];if(d2){var e2=c2.o||c2.options,h2=d2.o||d2.options,i2=e2&&e2.sequenceQueue===!1?"begin":"complete",j2=h2&&h2[i2],k2={};k2[i2]=function(){var a4=d2.e||d2.elements,b3=a4.nodeType?[a4]:a4;j2&&j2.call(b3,b3),f(c2)},d2.o?d2.o=g.extend({},h2,k2):d2.options=g.extend({},h2,k2)}}),b2.reverse()),f(b2[0])}}(window.jQuery||window.Zepto||window,window,window?window.document:void 0)})}});var require_b_window=__commonJS({"lib-browser-old/u/client/b_window.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.get_source_appname_from_data=exports.base64decode=exports.base64=exports.add_source_appname_tracker_to_change_args=exports.add_source_appname_tracker=void 0;exports.is_android=is_android;exports.is_fullscreen=is_fullscreen;exports.is_on_mobile_or_tablet=is_on_mobile_or_tablet;exports.maybe_add_source_appname_to_object=void 0;require_es_regexp_exec();require_es_regexp_test();require_es_array_includes();require_es_string_includes();require_es_parse_float();var _customVelocityAnimations=_interopRequireDefault(require_customVelocityAnimations()),_jsBase=require_base64(),_Number$isNaN;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}typeof window<"u"&&!window.isReactNative&&(require_jquery_dotdotdot_1_5_6(),require_jquery_velocity_min(),require_jquery_velocity_ui_min(),_customVelocityAnimations.default.injectTransitions());(_Number$isNaN=Number.isNaN)!=null||(Number.isNaN=val=>typeof val=="number"&&isNaN(val));var android=!1,mobile_or_tablet=!1;function initialize_navigator_checks(){if(typeof window<"u"&&typeof navigator<"u"&&!window.isReactNative){mobile_or_tablet=function(){let a=navigator.userAgent||navigator.vendor;return!!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ipad|playbook|silk|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(a.substr(0,4))||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)}();let ua=navigator.userAgent,iemobile=/iemobile/i.test(ua);android=/android/i.test(ua)&&!iemobile}}initialize_navigator_checks();function is_android(){return android}function is_on_mobile_or_tablet(){return mobile_or_tablet}function is_fullscreen(){return!!(typeof document<"u"&&(document.fullscreenElement!=null||document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement))}function doBrowserDetect(){window.BrowserDetect={browser:"",version:0,OS:"",versionSearchString:"",init(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version",this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString(data){for(let i=0;i<data.length;i++){let dataString=data[i].string,dataProp=data[i].prop;if(this.versionSearchString=data[i].versionSearch||data[i].identity,dataString){if(dataString.includes(data[i].subString))return data[i].identity}else if(dataProp)return data[i].identity}},searchVersion(dataString){let index=dataString.indexOf(this.versionSearchString);if(index!==-1)return parseFloat(dataString.substring(index+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]},window.BrowserDetect.init()}typeof window<"u"&&!window.isReactNative&&doBrowserDetect();var base64;exports.base64=base64;var base64decode;exports.base64decode=base64decode;var add_source_appname_tracker;exports.add_source_appname_tracker=add_source_appname_tracker;var maybe_add_source_appname_to_object;exports.maybe_add_source_appname_to_object=maybe_add_source_appname_to_object;var get_source_appname_from_data;exports.get_source_appname_from_data=get_source_appname_from_data;var add_source_appname_tracker_to_change_args;exports.add_source_appname_tracker_to_change_args=add_source_appname_tracker_to_change_args;if(typeof window<"u"){exports.base64=base64=data=>_jsBase.Base64.encode(data),exports.base64decode=base64decode=data=>_jsBase.Base64.decode(data),exports.add_source_appname_tracker=add_source_appname_tracker=(data,appname)=>{data&&(data.said=base64(appname))},exports.maybe_add_source_appname_to_object=maybe_add_source_appname_to_object=(data,current_appname,source_appname)=>{!data||!source_appname||source_appname!==current_appname&&(data.source_appname=source_appname)};let remove_source_appname=data=>{data&&delete data.said};exports.get_source_appname_from_data=get_source_appname_from_data=data=>data!=null&&data.said?base64decode(data.said):void 0,exports.add_source_appname_tracker_to_change_args=add_source_appname_tracker_to_change_args=(data,change_args,current_appname)=>{let source_appname=get_source_appname_from_data(data);maybe_add_source_appname_to_object(change_args,current_appname,source_appname),remove_source_appname(data)}}}});var require_es_json_stringify=__commonJS({"node_modules/core-js/modules/es.json.stringify.js"(){init_define_process_env();init_shim();var $2=require_export(),global=require_global(),getBuiltIn=require_get_built_in(),apply=require_function_apply(),uncurryThis=require_function_uncurry_this(),fails=require_fails(),Array2=global.Array,$stringify=getBuiltIn("JSON","stringify"),exec=uncurryThis(/./.exec),charAt=uncurryThis("".charAt),charCodeAt=uncurryThis("".charCodeAt),replace=uncurryThis("".replace),numberToString=uncurryThis(1 .toString),tester=/[\uD800-\uDFFF]/g,low=/^[\uD800-\uDBFF]$/,hi=/^[\uDC00-\uDFFF]$/,fix=function(match,offset,string){var prev=charAt(string,offset-1),next=charAt(string,offset+1);return exec(low,match)&&!exec(hi,next)||exec(hi,match)&&!exec(low,prev)?"\\u"+numberToString(charCodeAt(match,0),16):match},FORCED=fails(function(){return $stringify("\uDF06\uD834")!=='"\\udf06\\ud834"'||$stringify("\uDEAD")!=='"\\udead"'});$stringify&&$2({target:"JSON",stat:!0,forced:FORCED},{stringify:function(it,replacer,space){for(var i=0,l=arguments.length,args=Array2(l);i<l;i++)args[i]=arguments[i];var result=apply($stringify,null,args);return typeof result=="string"?replace(result,tester,fix):result}})}});var require_object_to_array=__commonJS({"node_modules/core-js/internals/object-to-array.js"(exports,module){init_define_process_env();init_shim();var DESCRIPTORS=require_descriptors(),uncurryThis=require_function_uncurry_this(),objectKeys=require_object_keys(),toIndexedObject=require_to_indexed_object(),$propertyIsEnumerable=require_object_property_is_enumerable().f,propertyIsEnumerable=uncurryThis($propertyIsEnumerable),push=uncurryThis([].push),createMethod=function(TO_ENTRIES){return function(it){for(var O=toIndexedObject(it),keys=objectKeys(O),length=keys.length,i=0,result=[],key;length>i;)key=keys[i++],(!DESCRIPTORS||propertyIsEnumerable(O,key))&&push(result,TO_ENTRIES?[key,O[key]]:O[key]);return result}};module.exports={entries:createMethod(!0),values:createMethod(!1)}}});var require_es_object_values=__commonJS({"node_modules/core-js/modules/es.object.values.js"(){init_define_process_env();init_shim();var $2=require_export(),$values=require_object_to_array().values;$2({target:"Object",stat:!0},{values:function(O){return $values(O)}})}});var require_array_sort=__commonJS({"node_modules/core-js/internals/array-sort.js"(exports,module){init_define_process_env();init_shim();var arraySlice=require_array_slice_simple(),floor=Math.floor,mergeSort=function(array,comparefn){var length=array.length,middle=floor(length/2);return length<8?insertionSort(array,comparefn):merge(array,mergeSort(arraySlice(array,0,middle),comparefn),mergeSort(arraySlice(array,middle),comparefn),comparefn)},insertionSort=function(array,comparefn){for(var length=array.length,i=1,element,j;i<length;){for(j=i,element=array[i];j&&comparefn(array[j-1],element)>0;)array[j]=array[--j];j!==i++&&(array[j]=element)}return array},merge=function(array,left,right,comparefn){for(var llength=left.length,rlength=right.length,lindex=0,rindex=0;lindex<llength||rindex<rlength;)array[lindex+rindex]=lindex<llength&&rindex<rlength?comparefn(left[lindex],right[rindex])<=0?left[lindex++]:right[rindex++]:lindex<llength?left[lindex++]:right[rindex++];return array};module.exports=mergeSort}});var require_engine_ff_version=__commonJS({"node_modules/core-js/internals/engine-ff-version.js"(exports,module){init_define_process_env();init_shim();var userAgent=require_engine_user_agent(),firefox=userAgent.match(/firefox\/(\d+)/i);module.exports=!!firefox&&+firefox[1]}});var require_engine_is_ie_or_edge=__commonJS({"node_modules/core-js/internals/engine-is-ie-or-edge.js"(exports,module){init_define_process_env();init_shim();var UA=require_engine_user_agent();module.exports=/MSIE|Trident/.test(UA)}});var require_engine_webkit_version=__commonJS({"node_modules/core-js/internals/engine-webkit-version.js"(exports,module){init_define_process_env();init_shim();var userAgent=require_engine_user_agent(),webkit=userAgent.match(/AppleWebKit\/(\d+)\./);module.exports=!!webkit&&+webkit[1]}});var require_es_array_sort=__commonJS({"node_modules/core-js/modules/es.array.sort.js"(){"use strict";init_define_process_env();init_shim();var $2=require_export(),uncurryThis=require_function_uncurry_this(),aCallable=require_a_callable(),toObject=require_to_object(),lengthOfArrayLike=require_length_of_array_like(),toString=require_to_string(),fails=require_fails(),internalSort=require_array_sort(),arrayMethodIsStrict=require_array_method_is_strict(),FF=require_engine_ff_version(),IE_OR_EDGE=require_engine_is_ie_or_edge(),V8=require_engine_v8_version(),WEBKIT=require_engine_webkit_version(),test=[],un$Sort=uncurryThis(test.sort),push=uncurryThis(test.push),FAILS_ON_UNDEFINED=fails(function(){test.sort(void 0)}),FAILS_ON_NULL=fails(function(){test.sort(null)}),STRICT_METHOD=arrayMethodIsStrict("sort"),STABLE_SORT=!fails(function(){if(V8)return V8<70;if(!(FF&&FF>3)){if(IE_OR_EDGE)return!0;if(WEBKIT)return WEBKIT<603;var result="",code,chr,value,index;for(code=65;code<76;code++){switch(chr=String.fromCharCode(code),code){case 66:case 69:case 70:case 72:value=3;break;case 68:case 71:value=4;break;default:value=2}for(index=0;index<47;index++)test.push({k:chr+index,v:value})}for(test.sort(function(a,b){return b.v-a.v}),index=0;index<test.length;index++)chr=test[index].k.charAt(0),result.charAt(result.length-1)!==chr&&(result+=chr);return result!=="DGBEFHACIJK"}}),FORCED=FAILS_ON_UNDEFINED||!FAILS_ON_NULL||!STRICT_METHOD||!STABLE_SORT,getSortCompare=function(comparefn){return function(x,y){return y===void 0?-1:x===void 0?1:comparefn!==void 0?+comparefn(x,y)||0:toString(x)>toString(y)?1:-1}};$2({target:"Array",proto:!0,forced:FORCED},{sort:function(comparefn){comparefn!==void 0&&aCallable(comparefn);var array=toObject(this);if(STABLE_SORT)return comparefn===void 0?un$Sort(array):un$Sort(array,comparefn);var items=[],arrayLength=lengthOfArrayLike(array),itemsLength,index;for(index=0;index<arrayLength;index++)index in array&&push(items,array[index]);for(internalSort(items,getSortCompare(comparefn)),itemsLength=items.length,index=0;index<itemsLength;)array[index]=items[index++];for(;index<arrayLength;)delete array[index++];return array}})}});var require_es_object_from_entries=__commonJS({"node_modules/core-js/modules/es.object.from-entries.js"(){init_define_process_env();init_shim();var $2=require_export(),iterate=require_iterate(),createProperty=require_create_property();$2({target:"Object",stat:!0},{fromEntries:function(iterable){var obj={};return iterate(iterable,function(k,v){createProperty(obj,k,v)},{AS_ENTRIES:!0}),obj}})}});var require_es_object_entries=__commonJS({"node_modules/core-js/modules/es.object.entries.js"(){init_define_process_env();init_shim();var $2=require_export(),$entries=require_object_to_array().entries;$2({target:"Object",stat:!0},{entries:function(O){return $entries(O)}})}});var require_security=__commonJS({"lib-browser-old/constants/security.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.USER_FIELDS=exports.SOCIAL=exports.SECURABLE_PREFIX=exports.EMAIL=exports.DATE_FIELDS=exports.CREATOR_FIELD=exports.BUILTIN_FIELDS=exports.BUILTIN_CUSTOM_FIELDS=void 0;require_es_array_iterator();require_web_dom_collections_iterator();var EMAIL="email";exports.EMAIL=EMAIL;var SOCIAL="_social_networks";exports.SOCIAL=SOCIAL;var USER_FIELDS=[{display:"email",value:EMAIL},{display:"Social Networks",value:SOCIAL}];exports.USER_FIELDS=USER_FIELDS;var DATE_FIELDS=[{display:"Created Date",value:"Created Date"},{display:"Modified Date",value:"Modified Date"}];exports.DATE_FIELDS=DATE_FIELDS;var CREATOR_FIELD=[{display:"Created By",value:"Created By"}];exports.CREATOR_FIELD=CREATOR_FIELD;var SECURABLE_PREFIX="securable_";exports.SECURABLE_PREFIX=SECURABLE_PREFIX;var BUILTIN_CUSTOM_FIELDS=["Created Date","Modified Date","Created By","Slug"];exports.BUILTIN_CUSTOM_FIELDS=BUILTIN_CUSTOM_FIELDS;var BUILTIN_FIELDS=[...BUILTIN_CUSTOM_FIELDS,EMAIL,SOCIAL];exports.BUILTIN_FIELDS=BUILTIN_FIELDS}});var require_alea=__commonJS({"node_modules/seedrandom/lib/alea.js"(exports,module){init_define_process_env();init_shim();(function(global,module2,define2){function Alea(seed){var me=this,mash=Mash();me.next=function(){var t=2091639*me.s0+me.c*23283064365386963e-26;return me.s0=me.s1,me.s1=me.s2,me.s2=t-(me.c=t|0)},me.c=1,me.s0=mash(" "),me.s1=mash(" "),me.s2=mash(" "),me.s0-=mash(seed),me.s0<0&&(me.s0+=1),me.s1-=mash(seed),me.s1<0&&(me.s1+=1),me.s2-=mash(seed),me.s2<0&&(me.s2+=1),mash=null}function copy(f,t){return t.c=f.c,t.s0=f.s0,t.s1=f.s1,t.s2=f.s2,t}function impl(seed,opts){var xg=new Alea(seed),state=opts&&opts.state,prng=xg.next;return prng.int32=function(){return xg.next()*4294967296|0},prng.double=function(){return prng()+(prng()*2097152|0)*11102230246251565e-32},prng.quick=prng,state&&(typeof state=="object"&&copy(state,xg),prng.state=function(){return copy(xg,{})}),prng}function Mash(){var n=4022871197,mash=function(data){data=String(data);for(var i=0;i<data.length;i++){n+=data.charCodeAt(i);var h=.02519603282416938*n;n=h>>>0,h-=n,h*=n,n=h>>>0,h-=n,n+=h*4294967296}return(n>>>0)*23283064365386963e-26};return mash}module2&&module2.exports?module2.exports=impl:define2&&define2.amd?define2(function(){return impl}):this.alea=impl})(exports,typeof module=="object"&&module,typeof define=="function"&&define)}});var require_xor128=__commonJS({"node_modules/seedrandom/lib/xor128.js"(exports,module){init_define_process_env();init_shim();(function(global,module2,define2){function XorGen(seed){var me=this,strseed="";me.x=0,me.y=0,me.z=0,me.w=0,me.next=function(){var t=me.x^me.x<<11;return me.x=me.y,me.y=me.z,me.z=me.w,me.w^=me.w>>>19^t^t>>>8},seed===(seed|0)?me.x=seed:strseed+=seed;for(var k=0;k<strseed.length+64;k++)me.x^=strseed.charCodeAt(k)|0,me.next()}function copy(f,t){return t.x=f.x,t.y=f.y,t.z=f.z,t.w=f.w,t}function impl(seed,opts){var xg=new XorGen(seed),state=opts&&opts.state,prng=function(){return(xg.next()>>>0)/4294967296};return prng.double=function(){do var top=xg.next()>>>11,bot=(xg.next()>>>0)/4294967296,result=(top+bot)/(1<<21);while(result===0);return result},prng.int32=xg.next,prng.quick=prng,state&&(typeof state=="object"&&copy(state,xg),prng.state=function(){return copy(xg,{})}),prng}module2&&module2.exports?module2.exports=impl:define2&&define2.amd?define2(function(){return impl}):this.xor128=impl})(exports,typeof module=="object"&&module,typeof define=="function"&&define)}});var require_xorwow=__commonJS({"node_modules/seedrandom/lib/xorwow.js"(exports,module){init_define_process_env();init_shim();(function(global,module2,define2){function XorGen(seed){var me=this,strseed="";me.next=function(){var t=me.x^me.x>>>2;return me.x=me.y,me.y=me.z,me.z=me.w,me.w=me.v,(me.d=me.d+362437|0)+(me.v=me.v^me.v<<4^(t^t<<1))|0},me.x=0,me.y=0,me.z=0,me.w=0,me.v=0,seed===(seed|0)?me.x=seed:strseed+=seed;for(var k=0;k<strseed.length+64;k++)me.x^=strseed.charCodeAt(k)|0,k==strseed.length&&(me.d=me.x<<10^me.x>>>4),me.next()}function copy(f,t){return t.x=f.x,t.y=f.y,t.z=f.z,t.w=f.w,t.v=f.v,t.d=f.d,t}function impl(seed,opts){var xg=new XorGen(seed),state=opts&&opts.state,prng=function(){return(xg.next()>>>0)/4294967296};return prng.double=function(){do var top=xg.next()>>>11,bot=(xg.next()>>>0)/4294967296,result=(top+bot)/(1<<21);while(result===0);return result},prng.int32=xg.next,prng.quick=prng,state&&(typeof state=="object"&&copy(state,xg),prng.state=function(){return copy(xg,{})}),prng}module2&&module2.exports?module2.exports=impl:define2&&define2.amd?define2(function(){return impl}):this.xorwow=impl})(exports,typeof module=="object"&&module,typeof define=="function"&&define)}});var require_xorshift7=__commonJS({"node_modules/seedrandom/lib/xorshift7.js"(exports,module){init_define_process_env();init_shim();(function(global,module2,define2){function XorGen(seed){var me=this;me.next=function(){var X=me.x,i=me.i,t,v,w;return t=X[i],t^=t>>>7,v=t^t<<24,t=X[i+1&7],v^=t^t>>>10,t=X[i+3&7],v^=t^t>>>3,t=X[i+4&7],v^=t^t<<7,t=X[i+7&7],t=t^t<<13,v^=t^t<<9,X[i]=v,me.i=i+1&7,v};function init(me2,seed2){var j,w,X=[];if(seed2===(seed2|0))w=X[0]=seed2;else for(seed2=""+seed2,j=0;j<seed2.length;++j)X[j&7]=X[j&7]<<15^seed2.charCodeAt(j)+X[j+1&7]<<13;for(;X.length<8;)X.push(0);for(j=0;j<8&&X[j]===0;++j);for(j==8?w=X[7]=-1:w=X[j],me2.x=X,me2.i=0,j=256;j>0;--j)me2.next()}init(me,seed)}function copy(f,t){return t.x=f.x.slice(),t.i=f.i,t}function impl(seed,opts){seed==null&&(seed=+new Date);var xg=new XorGen(seed),state=opts&&opts.state,prng=function(){return(xg.next()>>>0)/4294967296};return prng.double=function(){do var top=xg.next()>>>11,bot=(xg.next()>>>0)/4294967296,result=(top+bot)/(1<<21);while(result===0);return result},prng.int32=xg.next,prng.quick=prng,state&&(state.x&&copy(state,xg),prng.state=function(){return copy(xg,{})}),prng}module2&&module2.exports?module2.exports=impl:define2&&define2.amd?define2(function(){return impl}):this.xorshift7=impl})(exports,typeof module=="object"&&module,typeof define=="function"&&define)}});var require_xor4096=__commonJS({"node_modules/seedrandom/lib/xor4096.js"(exports,module){init_define_process_env();init_shim();(function(global,module2,define2){function XorGen(seed){var me=this;me.next=function(){var w=me.w,X=me.X,i=me.i,t,v;return me.w=w=w+1640531527|0,v=X[i+34&127],t=X[i=i+1&127],v^=v<<13,t^=t<<17,v^=v>>>15,t^=t>>>12,v=X[i]=v^t,me.i=i,v+(w^w>>>16)|0};function init(me2,seed2){var t,v,i,j,w,X=[],limit=128;for(seed2===(seed2|0)?(v=seed2,seed2=null):(seed2=seed2+"\0",v=0,limit=Math.max(limit,seed2.length)),i=0,j=-32;j<limit;++j)seed2&&(v^=seed2.charCodeAt((j+32)%seed2.length)),j===0&&(w=v),v^=v<<10,v^=v>>>15,v^=v<<4,v^=v>>>13,j>=0&&(w=w+1640531527|0,t=X[j&127]^=v+w,i=t==0?i+1:0);for(i>=128&&(X[(seed2&&seed2.length||0)&127]=-1),i=127,j=4*128;j>0;--j)v=X[i+34&127],t=X[i=i+1&127],v^=v<<13,t^=t<<17,v^=v>>>15,t^=t>>>12,X[i]=v^t;me2.w=w,me2.X=X,me2.i=i}init(me,seed)}function copy(f,t){return t.i=f.i,t.w=f.w,t.X=f.X.slice(),t}function impl(seed,opts){seed==null&&(seed=+new Date);var xg=new XorGen(seed),state=opts&&opts.state,prng=function(){return(xg.next()>>>0)/4294967296};return prng.double=function(){do var top=xg.next()>>>11,bot=(xg.next()>>>0)/4294967296,result=(top+bot)/(1<<21);while(result===0);return result},prng.int32=xg.next,prng.quick=prng,state&&(state.X&&copy(state,xg),prng.state=function(){return copy(xg,{})}),prng}module2&&module2.exports?module2.exports=impl:define2&&define2.amd?define2(function(){return impl}):this.xor4096=impl})(exports,typeof module=="object"&&module,typeof define=="function"&&define)}});var require_tychei=__commonJS({"node_modules/seedrandom/lib/tychei.js"(exports,module){init_define_process_env();init_shim();(function(global,module2,define2){function XorGen(seed){var me=this,strseed="";me.next=function(){var b=me.b,c=me.c,d=me.d,a=me.a;return b=b<<25^b>>>7^c,c=c-d|0,d=d<<24^d>>>8^a,a=a-b|0,me.b=b=b<<20^b>>>12^c,me.c=c=c-d|0,me.d=d<<16^c>>>16^a,me.a=a-b|0},me.a=0,me.b=0,me.c=-1640531527,me.d=1367130551,seed===Math.floor(seed)?(me.a=seed/4294967296|0,me.b=seed|0):strseed+=seed;for(var k=0;k<strseed.length+20;k++)me.b^=strseed.charCodeAt(k)|0,me.next()}function copy(f,t){return t.a=f.a,t.b=f.b,t.c=f.c,t.d=f.d,t}function impl(seed,opts){var xg=new XorGen(seed),state=opts&&opts.state,prng=function(){return(xg.next()>>>0)/4294967296};return prng.double=function(){do var top=xg.next()>>>11,bot=(xg.next()>>>0)/4294967296,result=(top+bot)/(1<<21);while(result===0);return result},prng.int32=xg.next,prng.quick=prng,state&&(typeof state=="object"&&copy(state,xg),prng.state=function(){return copy(xg,{})}),prng}module2&&module2.exports?module2.exports=impl:define2&&define2.amd?define2(function(){return impl}):this.tychei=impl})(exports,typeof module=="object"&&module,typeof define=="function"&&define)}});var require_crypto=__commonJS({"(disabled):crypto"(){init_define_process_env();init_shim()}});var require_seedrandom=__commonJS({"node_modules/seedrandom/seedrandom.js"(exports,module){init_define_process_env();init_shim();(function(global,pool,math){var width=256,chunks=6,digits=52,rngname="random",startdenom=math.pow(width,chunks),significance=math.pow(2,digits),overflow=significance*2,mask=width-1,nodecrypto;function seedrandom(seed,options,callback){var key=[];options=options==!0?{entropy:!0}:options||{};var shortseed=mixkey(flatten(options.entropy?[seed,tostring(pool)]:seed==null?autoseed():seed,3),key),arc4=new ARC4(key),prng=function(){for(var n=arc4.g(chunks),d=startdenom,x=0;n<significance;)n=(n+x)*width,d*=width,x=arc4.g(1);for(;n>=overflow;)n/=2,d/=2,x>>>=1;return(n+x)/d};return prng.int32=function(){return arc4.g(4)|0},prng.quick=function(){return arc4.g(4)/4294967296},prng.double=prng,mixkey(tostring(arc4.S),pool),(options.pass||callback||function(prng2,seed2,is_math_call,state){return state&&(state.S&&copy(state,arc4),prng2.state=function(){return copy(arc4,{})}),is_math_call?(math[rngname]=prng2,seed2):prng2})(prng,shortseed,"global"in options?options.global:this==math,options.state)}function ARC4(key){var t,keylen=key.length,me=this,i=0,j=me.i=me.j=0,s=me.S=[];for(keylen||(key=[keylen++]);i<width;)s[i]=i++;for(i=0;i<width;i++)s[i]=s[j=mask&j+key[i%keylen]+(t=s[i])],s[j]=t;(me.g=function(count){for(var t2,r=0,i2=me.i,j2=me.j,s2=me.S;count--;)t2=s2[i2=mask&i2+1],r=r*width+s2[mask&(s2[i2]=s2[j2=mask&j2+t2])+(s2[j2]=t2)];return me.i=i2,me.j=j2,r})(width)}function copy(f,t){return t.i=f.i,t.j=f.j,t.S=f.S.slice(),t}function flatten(obj,depth){var result=[],typ=typeof obj,prop;if(depth&&typ=="object")for(prop in obj)try{result.push(flatten(obj[prop],depth-1))}catch(e){}return result.length?result:typ=="string"?obj:obj+"\0"}function mixkey(seed,key){for(var stringseed=seed+"",smear,j=0;j<stringseed.length;)key[mask&j]=mask&(smear^=key[mask&j]*19)+stringseed.charCodeAt(j++);return tostring(key)}function autoseed(){try{var out;return nodecrypto&&(out=nodecrypto.randomBytes)?out=out(width):(out=new Uint8Array(width),(global.crypto||global.msCrypto).getRandomValues(out)),tostring(out)}catch(e){var browser=global.navigator,plugins=browser&&browser.plugins;return[+new Date,global,plugins,global.screen,tostring(pool)]}}function tostring(a){return String.fromCharCode.apply(0,a)}if(mixkey(math.random(),pool),typeof module=="object"&&module.exports){module.exports=seedrandom;try{nodecrypto=require_crypto()}catch(ex){}}else typeof define=="function"&&define.amd?define(function(){return seedrandom}):math["seed"+rngname]=seedrandom})(typeof self<"u"?self:exports,[],Math)}});var require_seedrandom2=__commonJS({"node_modules/seedrandom/index.js"(exports,module){init_define_process_env();init_shim();var alea=require_alea(),xor128=require_xor128(),xorwow=require_xorwow(),xorshift7=require_xorshift7(),xor4096=require_xor4096(),tychei=require_tychei(),sr=require_seedrandom();sr.alea=alea;sr.xor128=xor128;sr.xorwow=xorwow;sr.xorshift7=xorshift7;sr.xor4096=xor4096;sr.tychei=tychei;module.exports=sr}});var require_es_string_starts_with=__commonJS({"node_modules/core-js/modules/es.string.starts-with.js"(){"use strict";init_define_process_env();init_shim();var $2=require_export(),uncurryThis=require_function_uncurry_this(),getOwnPropertyDescriptor=require_object_get_own_property_descriptor().f,toLength=require_to_length(),toString=require_to_string(),notARegExp=require_not_a_regexp(),requireObjectCoercible=require_require_object_coercible(),correctIsRegExpLogic=require_correct_is_regexp_logic(),IS_PURE=require_is_pure(),un$StartsWith=uncurryThis("".startsWith),stringSlice=uncurryThis("".slice),min=Math.min,CORRECT_IS_REGEXP_LOGIC=correctIsRegExpLogic("startsWith"),MDN_POLYFILL_BUG=!IS_PURE&&!CORRECT_IS_REGEXP_LOGIC&&!!function(){var descriptor=getOwnPropertyDescriptor(String.prototype,"startsWith");return descriptor&&!descriptor.writable}();$2({target:"String",proto:!0,forced:!MDN_POLYFILL_BUG&&!CORRECT_IS_REGEXP_LOGIC},{startsWith:function(searchString){var that=toString(requireObjectCoercible(this));notARegExp(searchString);var index=toLength(min(arguments.length>1?arguments[1]:void 0,that.length)),search=toString(searchString);return un$StartsWith?un$StartsWith(that,search,index):stringSlice(that,index,index+search.length)===search}})}});var require_fix_regexp_well_known_symbol_logic=__commonJS({"node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_regexp_exec();var uncurryThis=require_function_uncurry_this(),redefine=require_redefine(),regexpExec=require_regexp_exec(),fails=require_fails(),wellKnownSymbol=require_well_known_symbol(),createNonEnumerableProperty=require_create_non_enumerable_property(),SPECIES=wellKnownSymbol("species"),RegExpPrototype=RegExp.prototype;module.exports=function(KEY,exec,FORCED,SHAM){var SYMBOL=wellKnownSymbol(KEY),DELEGATES_TO_SYMBOL=!fails(function(){var O={};return O[SYMBOL]=function(){return 7},""[KEY](O)!=7}),DELEGATES_TO_EXEC=DELEGATES_TO_SYMBOL&&!fails(function(){var execCalled=!1,re=/a/;return KEY==="split"&&(re={},re.constructor={},re.constructor[SPECIES]=function(){return re},re.flags="",re[SYMBOL]=/./[SYMBOL]),re.exec=function(){return execCalled=!0,null},re[SYMBOL](""),!execCalled});if(!DELEGATES_TO_SYMBOL||!DELEGATES_TO_EXEC||FORCED){var uncurriedNativeRegExpMethod=uncurryThis(/./[SYMBOL]),methods=exec(SYMBOL,""[KEY],function(nativeMethod,regexp,str,arg2,forceStringMethod){var uncurriedNativeMethod=uncurryThis(nativeMethod),$exec=regexp.exec;return $exec===regexpExec||$exec===RegExpPrototype.exec?DELEGATES_TO_SYMBOL&&!forceStringMethod?{done:!0,value:uncurriedNativeRegExpMethod(regexp,str,arg2)}:{done:!0,value:uncurriedNativeMethod(str,regexp,arg2)}:{done:!1}});redefine(String.prototype,KEY,methods[0]),redefine(RegExpPrototype,SYMBOL,methods[1])}SHAM&&createNonEnumerableProperty(RegExpPrototype[SYMBOL],"sham",!0)}}});var require_string_multibyte=__commonJS({"node_modules/core-js/internals/string-multibyte.js"(exports,module){init_define_process_env();init_shim();var uncurryThis=require_function_uncurry_this(),toIntegerOrInfinity=require_to_integer_or_infinity(),toString=require_to_string(),requireObjectCoercible=require_require_object_coercible(),charAt=uncurryThis("".charAt),charCodeAt=uncurryThis("".charCodeAt),stringSlice=uncurryThis("".slice),createMethod=function(CONVERT_TO_STRING){return function($this,pos){var S=toString(requireObjectCoercible($this)),position=toIntegerOrInfinity(pos),size=S.length,first,second;return position<0||position>=size?CONVERT_TO_STRING?"":void 0:(first=charCodeAt(S,position),first<55296||first>56319||position+1===size||(second=charCodeAt(S,position+1))<56320||second>57343?CONVERT_TO_STRING?charAt(S,position):first:CONVERT_TO_STRING?stringSlice(S,position,position+2):(first-55296<<10)+(second-56320)+65536)}};module.exports={codeAt:createMethod(!1),charAt:createMethod(!0)}}});var require_advance_string_index=__commonJS({"node_modules/core-js/internals/advance-string-index.js"(exports,module){"use strict";init_define_process_env();init_shim();var charAt=require_string_multibyte().charAt;module.exports=function(S,index,unicode){return index+(unicode?charAt(S,index).length:1)}}});var require_regexp_exec_abstract=__commonJS({"node_modules/core-js/internals/regexp-exec-abstract.js"(exports,module){init_define_process_env();init_shim();var global=require_global(),call=require_function_call(),anObject=require_an_object(),isCallable=require_is_callable(),classof=require_classof_raw(),regexpExec=require_regexp_exec(),TypeError2=global.TypeError;module.exports=function(R,S){var exec=R.exec;if(isCallable(exec)){var result=call(exec,R,S);return result!==null&&anObject(result),result}if(classof(R)==="RegExp")return call(regexpExec,R,S);throw TypeError2("RegExp#exec called on incompatible receiver")}}});var require_es_string_match=__commonJS({"node_modules/core-js/modules/es.string.match.js"(){"use strict";init_define_process_env();init_shim();var call=require_function_call(),fixRegExpWellKnownSymbolLogic=require_fix_regexp_well_known_symbol_logic(),anObject=require_an_object(),toLength=require_to_length(),toString=require_to_string(),requireObjectCoercible=require_require_object_coercible(),getMethod=require_get_method(),advanceStringIndex=require_advance_string_index(),regExpExec=require_regexp_exec_abstract();fixRegExpWellKnownSymbolLogic("match",function(MATCH,nativeMatch,maybeCallNative){return[function(regexp){var O=requireObjectCoercible(this),matcher=regexp==null?void 0:getMethod(regexp,MATCH);return matcher?call(matcher,regexp,O):new RegExp(regexp)[MATCH](toString(O))},function(string){var rx=anObject(this),S=toString(string),res=maybeCallNative(nativeMatch,rx,S);if(res.done)return res.value;if(!rx.global)return regExpExec(rx,S);var fullUnicode=rx.unicode;rx.lastIndex=0;for(var A=[],n=0,result;(result=regExpExec(rx,S))!==null;){var matchStr=toString(result[0]);A[n]=matchStr,matchStr===""&&(rx.lastIndex=advanceStringIndex(S,toLength(rx.lastIndex),fullUnicode)),n++}return n===0?null:A}]})}});var require_number_parse_int=__commonJS({"node_modules/core-js/internals/number-parse-int.js"(exports,module){init_define_process_env();init_shim();var global=require_global(),fails=require_fails(),uncurryThis=require_function_uncurry_this(),toString=require_to_string(),trim=require_string_trim().trim,whitespaces=require_whitespaces(),$parseInt=global.parseInt,Symbol2=global.Symbol,ITERATOR=Symbol2&&Symbol2.iterator,hex=/^[+-]?0x/i,exec=uncurryThis(hex.exec),FORCED=$parseInt(whitespaces+"08")!==8||$parseInt(whitespaces+"0x16")!==22||ITERATOR&&!fails(function(){$parseInt(Object(ITERATOR))});module.exports=FORCED?function(string,radix){var S=trim(toString(string));return $parseInt(S,radix>>>0||(exec(hex,S)?16:10))}:$parseInt}});var require_es_parse_int=__commonJS({"node_modules/core-js/modules/es.parse-int.js"(){init_define_process_env();init_shim();var $2=require_export(),$parseInt=require_number_parse_int();$2({global:!0,forced:parseInt!=$parseInt},{parseInt:$parseInt})}});var require_redis=__commonJS({"lib-browser-old/constants/redis.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.STATES=exports.SLOW_LOG_MSG=exports.SLOW_CALL_MSG=exports.INSTANCE_NAMES=exports.GEOCACHE_PREFIX=void 0;var INSTANCE_NAMES=function(INSTANCE_NAMES2){return INSTANCE_NAMES2.SMALL="small",INSTANCE_NAMES2.WORKFLOW="workflow",INSTANCE_NAMES2.BIG="big",INSTANCE_NAMES2.ELASTICSEARCH="elasticsearch",INSTANCE_NAMES2.CACHE="cache",INSTANCE_NAMES2}({});exports.INSTANCE_NAMES=INSTANCE_NAMES;var SLOW_CALL_MSG="redis slow call";exports.SLOW_CALL_MSG=SLOW_CALL_MSG;var SLOW_LOG_MSG="redis log call";exports.SLOW_LOG_MSG=SLOW_LOG_MSG;var STATES=function(STATES2){return STATES2.STARTING="starting",STATES2.AVAILABLE="available",STATES2.IN_USE="in_use",STATES2.TERMINATING="terminating",STATES2.EMPTY="empty",STATES2}({});exports.STATES=STATES;var GEOCACHE_PREFIX="geo_cache_";exports.GEOCACHE_PREFIX=GEOCACHE_PREFIX}});var require_logging=__commonJS({"lib-browser-old/constants/logging.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.UPCOMING_BREAKING_CHANGE_MSG=exports.STACK_OMITTED=exports.SPECIAL_LOGGING_PROCS=exports.PLUGIN_PAGE_HEADER_PREFIX=exports.PLUGIN_MAIN_HEADER_PREFIX=exports.LOG_LARGE_UPSERTS_TEXT_THRESHOLD=exports.LOG_LARGE_UPSERTS_LIST_THRESHOLD=exports.LEVEL_SEVERITY=exports.CUSTOM_PAGE_HEADER_TAG=exports.CUSTOM_APP_HEADER_TAG=exports.AREAS=exports.ALL_LEVELS=exports.ALLOWED_ERRORS_IN_TESTS=void 0;var redis_consts=_interopRequireWildcard(require_redis()),postgres_pool_consts=_interopRequireWildcard(require_postgres_pool());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var ALL_LEVELS=["debug","verbose","info","warn","error","fatal"];exports.ALL_LEVELS=ALL_LEVELS;var LEVEL_SEVERITY={debug:0,verbose:1,info:2,warn:3,error:4,fatal:5};exports.LEVEL_SEVERITY=LEVEL_SEVERITY;var LOG_LARGE_UPSERTS_TEXT_THRESHOLD=512*1024;exports.LOG_LARGE_UPSERTS_TEXT_THRESHOLD=LOG_LARGE_UPSERTS_TEXT_THRESHOLD;var LOG_LARGE_UPSERTS_LIST_THRESHOLD=5e3;exports.LOG_LARGE_UPSERTS_LIST_THRESHOLD=LOG_LARGE_UPSERTS_LIST_THRESHOLD;var AREAS=function(AREAS2){return AREAS2.certificates="certificates",AREAS2.cloudflare="cloudflare",AREAS2.cron="cron",AREAS2.fibers="fibers",AREAS2.logging="logging",AREAS2.metrics="metrics",AREAS2.notifier="notifier",AREAS2.percolator="percolator",AREAS2.postgres="postgres",AREAS2.pregenerate="pregenerate",AREAS2.redis="redis",AREAS2.scheduler="scheduler",AREAS2.server="server",AREAS2.threads="threads",AREAS2.workflow="workflow",AREAS2}({});exports.AREAS=AREAS;var SPECIAL_LOGGING_PROCS={add_mapping:!0,cancel_all_tasks:!0,delete:!0,delete_app:!0,finish_task:!0,multi_upsert:!0,rewind_app:!0,schedule_task:!0,schedule_tasks:!0,upsert:!0};exports.SPECIAL_LOGGING_PROCS=SPECIAL_LOGGING_PROCS;var UPCOMING_BREAKING_CHANGE_MSG="app affected by breaking change";exports.UPCOMING_BREAKING_CHANGE_MSG=UPCOMING_BREAKING_CHANGE_MSG;var ALLOWED_ERRORS_IN_TESTS=[redis_consts.SLOW_CALL_MSG,redis_consts.SLOW_LOG_MSG,postgres_pool_consts.POOL_QUERY_OVER_THRESHOLD_MSG,postgres_pool_consts.ZERO_CLIENTS_NO_SLOTS_MSG,postgres_pool_consts.TIMEOUT_QUERY_MSG,postgres_pool_consts.PG_CLIENT_ERR_MSG,postgres_pool_consts.PG_CLIENT_DESTRUCTION_ERR,postgres_pool_consts.PG_CLIENT_CANNOT_CONNECT_ERR];exports.ALLOWED_ERRORS_IN_TESTS=ALLOWED_ERRORS_IN_TESTS;var PLUGIN_MAIN_HEADER_PREFIX="plugin_main_headers_";exports.PLUGIN_MAIN_HEADER_PREFIX=PLUGIN_MAIN_HEADER_PREFIX;var PLUGIN_PAGE_HEADER_PREFIX="plugin_page_headers_";exports.PLUGIN_PAGE_HEADER_PREFIX=PLUGIN_PAGE_HEADER_PREFIX;var CUSTOM_PAGE_HEADER_TAG="custom_page_header";exports.CUSTOM_PAGE_HEADER_TAG=CUSTOM_PAGE_HEADER_TAG;var CUSTOM_APP_HEADER_TAG="custom_app_header";exports.CUSTOM_APP_HEADER_TAG=CUSTOM_APP_HEADER_TAG;var STACK_OMITTED="stack omitted";exports.STACK_OMITTED=STACK_OMITTED}});var require_byte=__commonJS({"lib-browser-old/constants/byte.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.STORAGE_UNITS=exports.MEBIBYTE=exports.KIBIBYTE=exports.GIBIBYTE=void 0;var KIBIBYTE=1024;exports.KIBIBYTE=KIBIBYTE;var MEBIBYTE=KIBIBYTE*KIBIBYTE;exports.MEBIBYTE=MEBIBYTE;var GIBIBYTE=KIBIBYTE*MEBIBYTE;exports.GIBIBYTE=GIBIBYTE;var STORAGE_UNITS=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];exports.STORAGE_UNITS=STORAGE_UNITS}});var require_plugin=__commonJS({"lib-browser-old/constants/plugin.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.TYPES_TAG_TYPE=exports.TYPES=exports.THIRD_PARTY_TAG_NAME=exports.TAG_TYPE_TO_NAMES=exports.PRICE_NUMBER_PROPERTY=exports.PREMIUM_TAG_TYPE=exports.PREMIUM_TAG_NAME=exports.PLUGIN_TAGS=exports.PLUGIN_SEPARATOR=exports.PLUGIN_FUNCTION_REGEX=exports.PLUGIN_DOCUMENTATION_TEMPLATE_LINK=exports.PLUGIN_CODE_SRC_PREFIX=exports.OFFICIAL_TAG_NAME=exports.OBFUSCATION_SCHEMA=exports.NO_CREATOR_NAME=exports.MAX_SIZE_FOR_PROCESSING=exports.MAX_FUNCTION_PAYLOAD_LENGTH=exports.LICENSE_PRIVATE=exports.LICENSE_OPEN_SOURCE=exports.LICENSE_COMMERCIAL=exports.LEGAL_NODE_VERSIONS=exports.LEGACY_NO_CREATOR_NAME=exports.KEYS_THAT_CONTAIN_IDS=exports.JS_OBFUSCATOR_SEED=exports.FREE_TAG_NAME=exports.CATEGORIES_TAG_TYPE=exports.CATEGORIES=exports.BUILT_BY_TAG_TYPE=exports.BUBBLE_TEAM_MEMBER_IDS=exports.BREADCRUMB_HEXID=exports.ALLOWED_DEPENDENCIES=void 0;var _safe_require=_interopRequireDefault(require_safe_require()),_byte=require_byte();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_safe_require.default.safe_register("./constants/plugin",exports);var BUILT_BY_TAG_TYPE="built_by";exports.BUILT_BY_TAG_TYPE=BUILT_BY_TAG_TYPE;var PREMIUM_TAG_TYPE="premium";exports.PREMIUM_TAG_TYPE=PREMIUM_TAG_TYPE;var TYPES_TAG_TYPE="types";exports.TYPES_TAG_TYPE=TYPES_TAG_TYPE;var CATEGORIES_TAG_TYPE="categories";exports.CATEGORIES_TAG_TYPE=CATEGORIES_TAG_TYPE;var PLUGIN_DOCUMENTATION_TEMPLATE_LINK="https://future-polyanthus-10e.notion.site/Bubble-Plugin-Documentation-Template-replace-with-plugin-name-b919a7428cbb4b5f9a37885d32cf9225?pvs=25";exports.PLUGIN_DOCUMENTATION_TEMPLATE_LINK=PLUGIN_DOCUMENTATION_TEMPLATE_LINK;var OFFICIAL_TAG_NAME="Official";exports.OFFICIAL_TAG_NAME=OFFICIAL_TAG_NAME;var THIRD_PARTY_TAG_NAME="Third-party developers";exports.THIRD_PARTY_TAG_NAME=THIRD_PARTY_TAG_NAME;var FREE_TAG_NAME="free";exports.FREE_TAG_NAME=FREE_TAG_NAME;var PREMIUM_TAG_NAME="premium";exports.PREMIUM_TAG_NAME=PREMIUM_TAG_NAME;var CATEGORIES={Analytics:"analytics",ArtificialIntelligence:"artificial intelligence (AI)",Blog:"blog",Compliance:"compliance",Containers:"containers",CustomerSupport:"customer support",DataThings:"data (things)",Ecommerce:"ecommerce",Email:"email",HealthAndFitness:"health & fitness",InputForms:"input forms",Internationalization:"internationalization",Location:"location",Media:"media",Mobile:"mobile",News:"news",Payment:"payment",Productivity:"productivity",SmallBusiness:"small business",SocialNetwork:"social network",Technical:"technical",Testing:"testing",Video:"video",VisualElements:"visual elements",WebScraping:"web scraping"};exports.CATEGORIES=CATEGORIES;var TYPES={Action:"action",Api:"api",BackgroundServices:"background services",Element:"element",Event:"event",LoginService:"login service",Storage:"storage"};exports.TYPES=TYPES;var TAG_TYPE_TO_NAMES={[BUILT_BY_TAG_TYPE]:[OFFICIAL_TAG_NAME,THIRD_PARTY_TAG_NAME],[PREMIUM_TAG_TYPE]:[FREE_TAG_NAME,PREMIUM_TAG_NAME]};exports.TAG_TYPE_TO_NAMES=TAG_TYPE_TO_NAMES;var PLUGIN_TAGS={[TYPES_TAG_TYPE]:TYPES,[CATEGORIES_TAG_TYPE]:CATEGORIES,[BUILT_BY_TAG_TYPE]:TAG_TYPE_TO_NAMES[BUILT_BY_TAG_TYPE],[PREMIUM_TAG_TYPE]:TAG_TYPE_TO_NAMES[PREMIUM_TAG_TYPE]};exports.PLUGIN_TAGS=PLUGIN_TAGS;var PLUGIN_SEPARATOR="-";exports.PLUGIN_SEPARATOR=PLUGIN_SEPARATOR;var BUBBLE_TEAM_MEMBER_IDS=["1339510945575x284965680912137020","bubble-1571682061136x385876099972947800"];exports.BUBBLE_TEAM_MEMBER_IDS=BUBBLE_TEAM_MEMBER_IDS;var KEYS_THAT_CONTAIN_IDS=["actions","actions.fields","events","fields","states"];exports.KEYS_THAT_CONTAIN_IDS=KEYS_THAT_CONTAIN_IDS;var ALLOWED_DEPENDENCIES=["use_jquery","plugin_api_version"];exports.ALLOWED_DEPENDENCIES=ALLOWED_DEPENDENCIES;var MAX_FUNCTION_PAYLOAD_LENGTH=6*_byte.MEBIBYTE;exports.MAX_FUNCTION_PAYLOAD_LENGTH=MAX_FUNCTION_PAYLOAD_LENGTH;var NO_CREATOR_NAME="(no name provided)";exports.NO_CREATOR_NAME=NO_CREATOR_NAME;var LEGACY_NO_CREATOR_NAME="Bubble user";exports.LEGACY_NO_CREATOR_NAME=LEGACY_NO_CREATOR_NAME;var PLUGIN_CODE_SRC_PREFIX="PLUGIN_";exports.PLUGIN_CODE_SRC_PREFIX=PLUGIN_CODE_SRC_PREFIX;var LICENSE_COMMERCIAL="commercial";exports.LICENSE_COMMERCIAL=LICENSE_COMMERCIAL;var LICENSE_PRIVATE="private";exports.LICENSE_PRIVATE=LICENSE_PRIVATE;var LICENSE_OPEN_SOURCE="open_source";exports.LICENSE_OPEN_SOURCE=LICENSE_OPEN_SOURCE;var LEGAL_NODE_VERSIONS=[14,18];exports.LEGAL_NODE_VERSIONS=LEGAL_NODE_VERSIONS;var PRICE_NUMBER_PROPERTY="price_number";exports.PRICE_NUMBER_PROPERTY=PRICE_NUMBER_PROPERTY;var MAX_SIZE_FOR_PROCESSING=_byte.MEBIBYTE;exports.MAX_SIZE_FOR_PROCESSING=MAX_SIZE_FOR_PROCESSING;var JS_OBFUSCATOR_SEED=0;exports.JS_OBFUSCATOR_SEED=JS_OBFUSCATOR_SEED;var BREADCRUMB_HEXID="_0x474242";exports.BREADCRUMB_HEXID=BREADCRUMB_HEXID;var PLUGIN_FUNCTION_REGEX=/function\(([\w,\s?]*)\)/;exports.PLUGIN_FUNCTION_REGEX=PLUGIN_FUNCTION_REGEX;var OBFUSCATION_SCHEMA={plugin_actions:{any:{type:"client_side",code:{client:{fn:!0}}}},plugin_elements:{any:{actions:{any:{code:{fn:!0}}},code:{initialize:{fn:!0},reset:{fn:!0},update:{fn:!0}},states:{any:{initialization_code:{fn:!0}}}}}};exports.OBFUSCATION_SCHEMA=OBFUSCATION_SCHEMA}});var require_get_substitution=__commonJS({"node_modules/core-js/internals/get-substitution.js"(exports,module){init_define_process_env();init_shim();var uncurryThis=require_function_uncurry_this(),toObject=require_to_object(),floor=Math.floor,charAt=uncurryThis("".charAt),replace=uncurryThis("".replace),stringSlice=uncurryThis("".slice),SUBSTITUTION_SYMBOLS=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,SUBSTITUTION_SYMBOLS_NO_NAMED=/\$([$&'`]|\d{1,2})/g;module.exports=function(matched,str,position,captures,namedCaptures,replacement){var tailPos=position+matched.length,m=captures.length,symbols=SUBSTITUTION_SYMBOLS_NO_NAMED;return namedCaptures!==void 0&&(namedCaptures=toObject(namedCaptures),symbols=SUBSTITUTION_SYMBOLS),replace(replacement,symbols,function(match,ch){var capture;switch(charAt(ch,0)){case"$":return"$";case"&":return matched;case"`":return stringSlice(str,0,position);case"'":return stringSlice(str,tailPos);case"<":capture=namedCaptures[stringSlice(ch,1,-1)];break;default:var n=+ch;if(n===0)return match;if(n>m){var f=floor(n/10);return f===0?match:f<=m?captures[f-1]===void 0?charAt(ch,1):captures[f-1]+charAt(ch,1):match}capture=captures[n-1]}return capture===void 0?"":capture})}}});var require_es_string_replace=__commonJS({"node_modules/core-js/modules/es.string.replace.js"(){"use strict";init_define_process_env();init_shim();var apply=require_function_apply(),call=require_function_call(),uncurryThis=require_function_uncurry_this(),fixRegExpWellKnownSymbolLogic=require_fix_regexp_well_known_symbol_logic(),fails=require_fails(),anObject=require_an_object(),isCallable=require_is_callable(),toIntegerOrInfinity=require_to_integer_or_infinity(),toLength=require_to_length(),toString=require_to_string(),requireObjectCoercible=require_require_object_coercible(),advanceStringIndex=require_advance_string_index(),getMethod=require_get_method(),getSubstitution=require_get_substitution(),regExpExec=require_regexp_exec_abstract(),wellKnownSymbol=require_well_known_symbol(),REPLACE=wellKnownSymbol("replace"),max=Math.max,min=Math.min,concat=uncurryThis([].concat),push=uncurryThis([].push),stringIndexOf=uncurryThis("".indexOf),stringSlice=uncurryThis("".slice),maybeToString=function(it){return it===void 0?it:String(it)},REPLACE_KEEPS_$0=function(){return"a".replace(/./,"$0")==="$0"}(),REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE=function(){return/./[REPLACE]?/./[REPLACE]("a","$0")==="":!1}(),REPLACE_SUPPORTS_NAMED_GROUPS=!fails(function(){var re=/./;return re.exec=function(){var result=[];return result.groups={a:"7"},result},"".replace(re,"$<a>")!=="7"});fixRegExpWellKnownSymbolLogic("replace",function(_,nativeReplace,maybeCallNative){var UNSAFE_SUBSTITUTE=REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE?"$":"$0";return[function(searchValue,replaceValue){var O=requireObjectCoercible(this),replacer=searchValue==null?void 0:getMethod(searchValue,REPLACE);return replacer?call(replacer,searchValue,O,replaceValue):call(nativeReplace,toString(O),searchValue,replaceValue)},function(string,replaceValue){var rx=anObject(this),S=toString(string);if(typeof replaceValue=="string"&&stringIndexOf(replaceValue,UNSAFE_SUBSTITUTE)===-1&&stringIndexOf(replaceValue,"$<")===-1){var res=maybeCallNative(nativeReplace,rx,S,replaceValue);if(res.done)return res.value}var functionalReplace=isCallable(replaceValue);functionalReplace||(replaceValue=toString(replaceValue));var global=rx.global;if(global){var fullUnicode=rx.unicode;rx.lastIndex=0}for(var results=[];;){var result=regExpExec(rx,S);if(result===null||(push(results,result),!global))break;var matchStr=toString(result[0]);matchStr===""&&(rx.lastIndex=advanceStringIndex(S,toLength(rx.lastIndex),fullUnicode))}for(var accumulatedResult="",nextSourcePosition=0,i=0;i<results.length;i++){result=results[i];for(var matched=toString(result[0]),position=max(min(toIntegerOrInfinity(result.index),S.length),0),captures=[],j=1;j<result.length;j++)push(captures,maybeToString(result[j]));var namedCaptures=result.groups;if(functionalReplace){var replacerArgs=concat([matched],captures,position,S);namedCaptures!==void 0&&push(replacerArgs,namedCaptures);var replacement=toString(apply(replaceValue,void 0,replacerArgs))}else replacement=getSubstitution(matched,S,position,captures,namedCaptures,replaceValue);position>=nextSourcePosition&&(accumulatedResult+=stringSlice(S,nextSourcePosition,position)+replacement,nextSourcePosition=position+matched.length)}return accumulatedResult+stringSlice(S,nextSourcePosition)}]},!REPLACE_SUPPORTS_NAMED_GROUPS||!REPLACE_KEEPS_$0||REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE)}});var require_logging2=__commonJS({"lib-browser-old/u/shared/logging.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_json_stringify();require_es_regexp_exec();require_es_string_replace();var util=require_util(),errors=require_errors(),logging_consts=require_logging(),logging=exports,MAX_LIST_LENGTH=100,MAX_OBJECT_LENGTH=100,MAX_STRING_LENGTH=1e4;logging.UNLOGGABLE_KEYS=new Set(["authorization","x-auth-token","x-api-key","cookie","ssn","password","password2","account","old_password","new_password","new_password_again","token"]);logging.level_gte=function(l1,l2){return logging_consts.LEVEL_SEVERITY[l1]>=logging_consts.LEVEL_SEVERITY[l2]};logging.preprocess=(message,bad_values)=>{let truncated=truncate(message);return sanitize(truncated,bad_values)};logging.extract_bad_values=function(body){let bad_values=[];if(Array.isArray(body==null?void 0:body.calls))for(let call of body.calls){var _call$client_state$ot,_call$client_state,_call$client_state$ot2;bad_values=bad_values.concat((_call$client_state$ot=(_call$client_state=call.client_state)==null||(_call$client_state$ot2=_call$client_state.other_data)==null?void 0:_call$client_state$ot2.secure_list)!=null?_call$client_state$ot:[])}return typeof(body==null?void 0:body.password)=="string"&&body.password.length>3&&bad_values.push(body.password),bad_values};function truncate(message){let ret;if(message!=null){if(Array.isArray(message)){ret=[];for(let index=0;index<message.length;index++){let element=message[index];if(ret.push(truncate(element)),index===MAX_LIST_LENGTH)break}message.length>MAX_LIST_LENGTH&&ret.push("Truncated list of ".concat(message.length," to ").concat(MAX_LIST_LENGTH," items"))}else if(typeof message=="object"){ret={};let keys=Object.keys(message);for(let index=0;index<keys.length;index++){let key=keys[index];if(ret[key]=truncate(message[key]),index===MAX_OBJECT_LENGTH)break}keys.length>MAX_OBJECT_LENGTH&&(ret.truncation_message="Truncated object of ".concat(keys.length," to ").concat(MAX_OBJECT_LENGTH," items"))}else typeof message=="string"&&message.length>MAX_STRING_LENGTH?ret="".concat(message.slice(0,MAX_STRING_LENGTH)," [truncated, was ").concat(message.length,"]"):ret=message;return ret}}function sanitize(message,bad_values){return check_sanitize(message),sanitize_helper(message,bad_values)}function check_sanitize(message){try{return JSON.stringify(message)}catch(error){let err_msg="could not sanitize message not JSON stringifyable";throw new errors.UnexpectedError(err_msg,{message:util.inspect(message)})}}function sanitize_helper(message,bad_values){let ret;if(message==null)return message;if(typeof message=="string"&&bad_values){ret=message;for(let val of bad_values)ret=message.replace(val,"sanitized ".concat(val.length))}else if(Array.isArray(message)){ret=[];for(let element of message)ret.push(sanitize_helper(element,bad_values))}else if(typeof message=="object"){ret={};for(let key in message){let val=message[key];logging.UNLOGGABLE_KEYS.has(key)?ret[key]=val!=null?"sanitized ".concat(val.length):val:ret[key]=sanitize_helper(val,bad_values)}}else ret=message;return ret}}});var require_environment=__commonJS({"lib-browser-old/constants/environment.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.QA=exports.PROD=exports.LOCAL=exports.DEV=exports.ALL=void 0;var PROD="prod";exports.PROD=PROD;var LOCAL="local";exports.LOCAL=LOCAL;var QA="qa";exports.QA=QA;var DEV3="dev";exports.DEV=DEV3;var ALL=[PROD,LOCAL,QA,DEV3];exports.ALL=ALL}});var require_client_config=__commonJS({"client_config.json"(exports,module){module.exports={ADMIN_EMAIL:"admin@bubble.io",ADMIN_NO_REPLY:"admin-no-reply@bubbleapps.io",MAX_ALLOWED_REQUEST:5e4,MAX_LIST_LENGTH:1e4,PROD_DOMAINS:{main:"bubble.io",old:"bubble.is"},REQUEST_TTL:36e5,SUPPORT_EMAIL:"support@bubble.io",SUPPORT_NAME:"Bubble Support",a_record_ip:"54.203.28.28",amplitude_experiment_key:"client-mzmGCQlKvIat72aRwurU9POklOVWqQYc",amplitude_experiments_enabled:!0,apps_domain:"bubbleapps.io",braintree_partner_code:"Bubble_SP",breaking_revision:5,browser_console_log_level:"error",cdn_host:"d3dqmih97rcqmh.cloudfront.net",commit_sha:"59313fac696bf19f52ea42a0574020562adff52c",commit_timestamp:1699109605e3,database_query_limit:200,env:"prod",environment_name:"main",firebase_app_config:{apiKey:"AIzaSyDVlyff9gf_eG2kq_OTfhUytinKJ619FrM",appId:"1:380032246750:web:50d6f5f804d7ce281e334f",authDomain:"bubble-workflow.firebaseapp.com",databaseURL:"https://bubble-workflow.firebaseio.com",messagingSenderId:"380032246750",projectId:"bubble-workflow",storageBucket:"bubble-workflow.appspot.com"},hide_export_bulk_operation:!0,image_optimization_service:"d1muf25xaso8hp.cloudfront.net",is_clustered:!0,max_api_bulk_post:1e3,max_new_list_length:100,meta_billing_api_endpoint:"https://bubble.io/api/1.1/",meta_upload_tracking_api_endpoint:"https://bubble.io/api/1.1/",notifier_domain:"main",notifier_host:"notify.bubble.io",otel_log_events_flag:!0,page_speed_metrics_on:!0,paid_features:!0,plugin_commission:.75,plugins_live_here:!0,private_version_prefix:"p_",use_analytics:!0,use_cloudflare:!0,user_file_bucket:"appforest_uf",user_file_cdn:"a3f482aa37473c68f97b76bd2e4a3782.cdn.bubble.io/",user_file_url:"s3.amazonaws.com/appforest_uf/"}}});var require_client_config2=__commonJS({"lib-browser-old/client_config.js"(exports,module){"use strict";init_define_process_env();init_shim();var _safe_require=_interopRequireDefault(require_safe_require()),_client_config=_interopRequireDefault(require_client_config());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var client_config=_client_config.default;module.exports=client_config;_safe_require.default.safe_register("./client_config",client_config)}});var require_environment_utilities=__commonJS({"lib-browser-old/shared/environment_utilities.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.is_development=is_development;exports.is_local=is_local;exports.is_production=is_production;exports.is_production_not_dedicated=is_production_not_dedicated;exports.is_test=is_test;var environment_consts=_interopRequireWildcard(require_environment()),configuration=_interopRequireWildcard(require_client_config2()),_safe_require=_interopRequireDefault(require_safe_require());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}_safe_require.default.safe_register("./shared/environment_utilities",exports);function is_production(){return configuration.env===environment_consts.PROD}function is_test(){return configuration.env===environment_consts.QA}function is_development(){return configuration.env===environment_consts.DEV||configuration.env===environment_consts.LOCAL}function is_local(){return configuration.env===environment_consts.LOCAL}function is_production_not_dedicated(){return is_production()&&!configuration.is_dedicated}}});var require_logger=__commonJS({"lib-browser-old/logger.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_symbol_description();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.STACK_OMITTED=exports.LOG_MESSAGE=exports.AREAS=void 0;exports.debug=debug;exports.error=error;exports.fatal=fatal;exports.get_log_tags=get_log_tags;exports.human_friendly=human_friendly;exports.info=info;exports.install_browser_error_handler=install_browser_error_handler;exports.log=void 0;exports.owner_error=owner_error;exports.owner_only_error=owner_only_error;exports.owner_warn=owner_warn;exports.propagated_error=propagated_error;exports.register_logger=register_logger;exports.user_error=user_error;exports.verbose=verbose;exports.warn=warn;exports.with_user_level=with_user_level;require_es_array_iterator();require_web_dom_collections_iterator();require_es_json_stringify();require_es_array_includes();require_es_string_includes();require_es_error_cause();require_es_string_starts_with();require_es_regexp_exec();require_es_string_match();require_es_parse_int();var util=_interopRequireWildcard(require_util()),logging_consts=_interopRequireWildcard(require_logging()),plugin_consts=_interopRequireWildcard(require_plugin()),mode_check=_interopRequireWildcard(require_mode_check()),errors=_interopRequireWildcard(require_errors()),logging_utilities=_interopRequireWildcard(require_logging2()),_safe_require=_interopRequireDefault(require_safe_require()),_loggable=require_loggable(),environment_utilities=_interopRequireWildcard(require_environment_utilities());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}_safe_require.default.safe_register("./logger",module.exports);var reported_errors=new WeakSet,_early_logger=(level,message,data)=>{var _data;(_data=data)!=null||(data={}),data.level=level,data.message=message!=null?message:"",console.log(JSON.stringify(data))},default_logging_medium={fiber_wrapper(fn){return fn},log(level,message,data){_early_logger("error","Logging Error: must call logger.register_logger before logging",{}),_early_logger(level,message,data)}},logging_medium=default_logging_medium;function register_logger(logger_instance){logging_medium=logger_instance}var LOG_MESSAGE="log message";exports.LOG_MESSAGE=LOG_MESSAGE;var AREAS=logging_consts.AREAS;exports.AREAS=AREAS;var STACK_OMITTED=logging_consts.STACK_OMITTED;exports.STACK_OMITTED=STACK_OMITTED;var NO_MESSAGE="NO_MESSAGE";function is_not_ready_error(level){return level instanceof errors.NotReadyError}function has_suggested_level(obj){return obj!=null&&typeof obj=="object"&&typeof obj.suggested_level=="string"}function is_log_level(level){return logging_consts.ALL_LEVELS.includes(level)}function is_user_level(level){return[...errors.ERROR_LEVELS,"owner_warn"].includes(level)}function get_suggested_level_logger(level){if(has_suggested_level(level)){let new_level=level.suggested_level;if(is_log_level(new_level))return LOG_LEVELS[new_level];if(is_user_level(new_level))return USER_LEVELS[new_level]}return error}var log=logging_medium.fiber_wrapper((level,message,data)=>{if(level instanceof Error||is_not_ready_error(level))return get_suggested_level_logger(level)(errors.ensure_bubble_error(level));if(level==null&&message==null)return debug(NO_MESSAGE);if(typeof level!="string")throw new errors.UnexpectedError("Expected logger.log(err) or logger.log(level, message, data), but got a non-string level",{level});if(data==null?data={}:typeof data=="string"&&(data={data}),!is_log_level(level))throw new errors.UnexpectedError("unknown level",{level});let original_message=message;if(message instanceof errors.NotReadyError&&(message=errors.ensure_bubble_error(message)),message instanceof Error){var _message$args,_data2,_data2$tags;if(reported_errors.has(message))return;reported_errors.add(message);let object2=(_message$args=message.args)!=null?_message$args:{};for(let k in object2){let v=object2[k];typeof v=="function"?data[k]=v():data[k]=(0,_loggable.to_loggable)(v)}data.stack=message.stack,(_data2$tags=(_data2=data).tags)!=null||(_data2.tags={}),data.tags.error_class=message.error_class,data.tags.user_level&&!data.display&&(data.display=message.display()),data.display&&typeof data.display!="string"&&(data.display=String(data.display)),message=message.message}else if(typeof message=="string"){var _data3,_data3$stack,_data4,_data4$tags;(_data3$stack=(_data3=data).stack)!=null||(_data3.stack=errors.capture_stack(message,1)),(_data4$tags=(_data4=data).tags)!=null||(_data4.tags={}),data.tags.error_class=LOG_MESSAGE}else if(message==null)message=NO_MESSAGE;else throw new errors.UnexpectedError("invalid message format, must be error or string",{message:util.inspect(message)});if(data!=null&&typeof data!="object")throw new errors.UnexpectedError("invalid data format, object, error, or undefined",{data:util.inspect(data)});logging_medium.log(level,message,data);function is_test_failure(message2,level2){return mode_check.running_test()&&logging_utilities.level_gte(level2,"error")&&(message2 instanceof Error||typeof message2=="string"&&!logging_consts.ALLOWED_ERRORS_IN_TESTS.includes(message2))}if(original_message!==void 0&&is_test_failure(original_message,level))throw console.log(message,data),new errors.UnexpectedError("log with level >= error while running test",{level,original:message,data:(0,_loggable.to_loggable)(data)})});exports.log=log;function get_custom_code_section(line_no){if(!window.headers_source_maps)return null;for(let[tag_name,start_line,end_line]of window.headers_source_maps)if(line_no>Number(start_line)&&line_no<=Number(end_line))return tag_name;return null}function install_browser_error_handler(_ref){let{Lib}=_ref;window.onerror=(msg,error_url,line,col,caught_err_any)=>{var _caught_err$stack,_error_url$startsWith,_Lib$location$get_ser,_Lib;if(!caught_err_any)return;let caught_err=errors.ensure_bubble_error(caught_err_any),root_stack="\n    at root (".concat(error_url!=null?error_url:"",":").concat(line!=null?line:-1,":").concat(col!=null?col:-1,")");caught_err.stack=((_caught_err$stack=caught_err.stack)!=null?_caught_err$stack:"")+root_stack;let is_html_error=(_error_url$startsWith=error_url==null?void 0:error_url.startsWith((_Lib$location$get_ser=(_Lib=Lib())==null?void 0:_Lib.location.get_server_base())!=null?_Lib$location$get_ser:""))!=null?_error_url$startsWith:!1,html_section=line?get_custom_code_section(line):null,is_custom_header_code=!1,is_plugin_header_code=!1;is_html_error&&html_section&&(is_custom_header_code=[logging_consts.CUSTOM_PAGE_HEADER_TAG,logging_consts.CUSTOM_APP_HEADER_TAG].includes(html_section),is_plugin_header_code=html_section.startsWith(logging_consts.PLUGIN_MAIN_HEADER_PREFIX)||html_section.startsWith(logging_consts.PLUGIN_PAGE_HEADER_PREFIX),caught_err instanceof errors.BubbleError&&caught_err.extend({html_section}));let is_plugin_code=is_plugin_header_code||caught_err.stack.includes(plugin_consts.PLUGIN_CODE_SRC_PREFIX),JQUERY_MIN_LINE_COUNT=10,is_outside_package=!mode_check.is_edit_mode()&&!mode_check.is_plugin_edit_mode()&&!environment_utilities.is_local()&&!caught_err.stack.split("\n").filter(line2=>{var _line$match$,_line$match;return line2=(_line$match$=(_line$match=line2.match(/\/package\/.+(?:run|run_debug)\.js:(\d+):/))==null?void 0:_line$match[1])!=null?_line$match$:"",parseInt(line2)>JQUERY_MIN_LINE_COUNT}).join("\n").includes("/package/"),jquery_error=is_outside_package&&caught_err.stack.includes("/package/"),is_custom_html_error=is_custom_header_code||caught_err.stack.includes("UNMANGLED_html_wrap"),is_extension=caught_err.stack.includes("chrome-extension://");if(caught_err instanceof errors.BubbleError&&caught_err.extend({UNCAUGHT:"caught by window.onerror",is_plugin_code,is_3rd_party_code:is_plugin_code||is_custom_html_error,is_outside_package}),is_custom_html_error)owner_only_error("html bug",{display:"Bug in custom html:\n"+caught_err.stack});else{if(!error_url||is_extension)return;is_plugin_code||is_outside_package?jquery_error?owner_error("Error in jQuery code -- likely a plugin",{display:"Bug in custom code "+caught_err.stack,original:caught_err}):owner_error("Error in custom code",{display:"Bug in custom code "+caught_err.stack,original:caught_err}):error(caught_err)}return!0}}function debug(message,data){log("debug",message,data)}function verbose(message,data){log("verbose",message,data)}function info(message,data){log("info",message,data)}function warn(message,data){log("warn",message,data)}function error(message,data){log("error",message,data)}function fatal(message,data){log("debug",message,data)}var LOG_LEVELS={debug,verbose,info,warn,error,fatal};function owner_error(message,data){var _data5;(_data5=data)!=null||(data={}),data=with_user_level(data,"owner_error"),info(message,data)}function owner_warn(message,data){var _data6;(_data6=data)!=null||(data={}),data=with_user_level(data,"owner_warn"),info(message,data)}function owner_only_error(message,data){var _data7;(_data7=data)!=null||(data={}),data=with_user_level(data,"owner_error"),verbose(message,data)}function user_error(message,data){var _data8;(_data8=data)!=null||(data={}),data=with_user_level(data,"user_error"),info(message,data)}var USER_LEVELS={owner_error,owner_warn,user_error,error};function propagated_error(message,inner_error){let extra_data=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};get_suggested_level_logger(inner_error)(message,_objectSpread({inner_error},extra_data))}function with_user_level(data,user_level){return data=_objectSpread({},data),typeof data.tags=="object"?data.tags=_objectSpread({},data.tags):data.tags={},data.tags.user_level=user_level,data}function human_friendly(err){return err==null?"":(log(err),errors.ensure_bubble_error(err).display())}function get_log_tags(){var _logging_medium$get_l,_logging_medium$get_l2,_logging_medium;return(_logging_medium$get_l=(_logging_medium$get_l2=(_logging_medium=logging_medium).get_log_tags)==null?void 0:_logging_medium$get_l2.call(_logging_medium))!=null?_logging_medium$get_l:{}}}});var require_core=__commonJS({"lib-browser-old/constants/core.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.SLOW_RANDOM_LENGTH=exports.LEGACY_PARAM_ID=exports.DROPDOWN_DESCRIPTION_CONTEXT=void 0;var _safe_require=_interopRequireDefault(require_safe_require());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_safe_require.default.safe_register("./constants/core",exports);var DROPDOWN_DESCRIPTION_CONTEXT="DROPDOWN_OPTIONS";exports.DROPDOWN_DESCRIPTION_CONTEXT=DROPDOWN_DESCRIPTION_CONTEXT;var LEGACY_PARAM_ID="_LEGACY_";exports.LEGACY_PARAM_ID=LEGACY_PARAM_ID;var SLOW_RANDOM_LENGTH=1e5;exports.SLOW_RANDOM_LENGTH=SLOW_RANDOM_LENGTH}});var require_uuid=__commonJS({"lib-browser-old/u/shared/uuid.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.Random=exports.LUID=void 0;exports.UUID=UUID;exports.UUID_SEED=void 0;exports.count=count;exports.get_random_seed=get_random_seed;exports.get_uuid_seed=get_uuid_seed;exports.is_UUID=is_UUID;exports.short_uid=short_uid;exports.start_count=start_count;exports.stop_count=stop_count;exports.uuid_regexp=void 0;require_es_regexp_exec();require_es_regexp_test();require_es_object_entries();require_es_array_sort();require_es_array_iterator();require_web_dom_collections_iterator();var _seedrandom=_interopRequireDefault(require_seedrandom2()),logger=_interopRequireWildcard(require_logger()),core_consts=_interopRequireWildcard(require_core());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var UUID_LENGTH=1e18;function UUID(){let rand=Math.round(Math.random()*UUID_LENGTH);return"".concat(Date.now(),"x").concat(pad(rand,18))}var uuid_regexp=/\d{13}x\d{18}/;exports.uuid_regexp=uuid_regexp;function is_UUID(val){return typeof val=="string"&&uuid_regexp.test(val)}function pad(base,num){let str_base=String(base);return str_base+new Array(num+1-str_base.length).join("0")}var LUID=function(){let counter2=1;return()=>(counter2++,"".concat(Date.now(),"x").concat(counter2))}();exports.LUID=LUID;function get_uuid_seed(_ref){let{seed,timestamp,iterations}=_ref;return new UUID_SEED(seed,timestamp,iterations)}var MODULO=UUID_LENGTH,MULTIPLIER=1664525,OFFSET=1013904223;function get_random_seed(){return Math.round(Math.random()*UUID_LENGTH)%MODULO}var UUID_SEED=class{constructor(seed,timestamp,iterations){var _iterations;this.seed=void 0,this.timestamp=void 0,this.iterations=void 0,this.seed=seed,this.timestamp=timestamp,(_iterations=iterations)!=null||(iterations=0),this.iterations=iterations;for(let i=0;i<iterations;i++)this.randn()}randn(){return this.seed=(MULTIPLIER*this.seed+OFFSET)%MODULO,this.iterations++,this.seed}UUID(){return"".concat(this.timestamp,"x").concat(pad(this.randn(),18))}};exports.UUID_SEED=UUID_SEED;var Random=class{constructor(seed){let iterations=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.seed=void 0,this.iterations=void 0,iterations>core_consts.SLOW_RANDOM_LENGTH&&logger.warn("dangerously high random initialization iterations",{iterations}),this.seed=seed,this.iterations=0;for(let i=0;i<iterations;i++)this.next()}next(){return this.seed=(0,_seedrandom.default)("".concat(this.seed))(),this.iterations++,this.seed}random(x,y){return this.next(),Math.floor(this.seed*(y-x)+x)}};exports.Random=Random;var ALPHABET="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function short_uid(counter2,editor_id){let digits;if(counter2<70304)digits=3;else if(counter2<175478784)digits=5,counter2+=190102016;else if(counter2<1e14)digits=10,counter2+=0x1edcf7bcf280000;else return UUID();let result=new Array(digits);for(let i=digits-1;i>=0;i--)result[i]=ALPHABET.charAt(counter2%52),counter2=Math.floor(counter2/52);return result.join("")+(String(editor_id)==="-1"?"":String(editor_id))}var _cur_count=null;function start_count(){_cur_count={}}function count(name){if(_cur_count){var _cur_count2,_cur_count2$name;(_cur_count2$name=(_cur_count2=_cur_count)[name])!=null||(_cur_count2[name]=0),_cur_count[name]++}}function stop_count(){if(_cur_count){let counts=Object.entries(_cur_count);counts.sort((a,b)=>b[1]-a[1]);for(let[k,v]of counts)console.log("".concat(k,": ").concat(v))}}}});var require_b_object=__commonJS({"lib-browser-old/u/shared/b_object.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.all_keys=all_keys;exports.compare=compare;exports.deep_copy=deep_copy;exports.deep_freeze=deep_freeze;exports.extend=extend;exports.extract_from_object=extract_from_object;exports.flatten=flatten;exports.get_sorted_object_by_values=get_sorted_object_by_values;exports.has_a_key=has_a_key;exports.has_unique_string=has_unique_string;exports.is_empty=is_empty;exports.is_json=is_json;exports.is_record=is_record;exports.json_deep_copy=json_deep_copy;exports.json_parse=json_parse;exports.json_stringify=json_stringify;exports.make_new=make_new;exports.map_values=map_values;exports.not_empty=not_empty;exports.remove_circular_references=remove_circular_references;exports.smush=smush;exports.sort_data_fields=sort_data_fields;exports.sort_obj=sort_obj;exports.stableSort=stableSort;exports.stableSortLanguages=stableSortLanguages;exports.stripFalsy=stripFalsy;exports.to_object=to_object;exports.walk=walk;require_es_array_iterator();require_web_dom_collections_iterator();require_es_json_stringify();require_es_object_values();require_es_array_includes();require_es_array_sort();require_es_string_includes();require_es_object_from_entries();require_es_object_entries();require_web_dom_collections_for_each();var errors=_interopRequireWildcard(require_errors()),security_consts=_interopRequireWildcard(require_security()),uuid=_interopRequireWildcard(require_uuid()),_loggable=require_loggable();function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function to_object(arr){let ret={};for(let x of arr)ret[x[0]]=x[1];return ret}function is_record(obj){return obj!=null&&typeof obj=="object"}function extend(dest,arg1,arg2,arg3,arg4,arg5){if(arg5!=null)throw console.log(arg5),new errors.UnexpectedError("b_object.extend using more than 4 args!!!!");if(arg1!=null)for(let key in arg1){let value=arg1[key];value!==void 0&&(dest[key]=value)}if(arg2!=null)for(let key in arg2){let value=arg2[key];value!==void 0&&(dest[key]=value)}if(arg3!=null)for(let key in arg3){let value=arg3[key];value!==void 0&&(dest[key]=value)}if(arg4!=null)for(let key in arg4){let value=arg4[key];value!==void 0&&(dest[key]=value)}return dest}function flatten(lists){return[].concat(...lists!=null?lists:[])}function deep_copy(dest){for(var _len=arguments.length,srcs=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)srcs[_key-1]=arguments[_key];return dc(null,dest,...srcs)}function is_json(obj){try{return JSON.stringify(obj),!0}catch(error){return!1}}function deep_freeze(data){Object.freeze(data);for(let val of Object.values(data))typeof val=="object"&&val!=null&&deep_freeze(val)}function json_deep_copy(data){return typeof data=="object"&&data!=null?JSON.parse(JSON.stringify(data)):data}function json_stringify(data,indent,fail_okay){var _fail_okay;(_fail_okay=fail_okay)!=null||(fail_okay=!1);try{return JSON.stringify(data,null,indent)}catch(err){if(fail_okay)return require_util().inspect(data);let msg;throw typeof err=="object"&&err&&"message"in err?msg=String(err.message):msg=String(err),msg+=".  Data was "+data.constructor.name+", with fields: "+Object.keys(data).join(", "),new errors.UnexpectedError(msg)}}function json_parse(string,fail_okay){try{return JSON.parse(string)}catch(err){if(fail_okay)return string;let msg="json_parse failure: ";throw typeof err=="object"&&err&&"message"in err?msg+=String(err.message):msg+=String(err),new errors.UnexpectedError(msg,{string})}}function _deep_copy(new_ids,dest,key,value){if(dest==null)throw new errors.UnexpectedError("Trying to _deep_copy onto mising value",{dest,key:(0,_loggable.to_loggable)(key),value:(0,_loggable.to_loggable)(value)});if(typeof value=="object"&&value!==null)dest[key]==null&&(Array.isArray(value)?dest[key]=[]:dest[key]={}),dc(new_ids,dest[key],value);else if(value!==void 0)if(new_ids&&(key==="id"||key==="_id")){let old=dest[key],new_id=uuid.LUID();dest[key]=new_id,new_ids[old]=new_id}else dest[key]=value}function dc(new_ids,dest){if(dest==null)throw new errors.UnexpectedError("Trying to dc onto mising value",{dest:(0,_loggable.to_loggable)(dest)});for(var _len2=arguments.length,srcs=new Array(_len2>2?_len2-2:0),_key2=2;_key2<_len2;_key2++)srcs[_key2-2]=arguments[_key2];if(Array.isArray(dest))for(let src of srcs){if(!Array.isArray(src))throw new errors.UnexpectedError("can only extend an array with another array");for(let i=0;i<src.length;i++)_deep_copy(new_ids,dest,i,src[i])}else for(let src of srcs)for(let key in src){let value=src[key];_deep_copy(new_ids,dest,key,value)}return dest}function walk(obj,fn,path){var _path;if((_path=path)!=null||(path=""),fn(obj,path),obj!=null&&typeof obj=="object")for(let k in obj){let v=obj[k];walk(v,fn,path+"."+k)}}function smush(){for(var _len3=arguments.length,things=new Array(_len3),_key3=0;_key3<_len3;_key3++)things[_key3]=arguments[_key3];return _smush(things)}function has_unique_string(thing){return typeof thing!="object"||!thing?!1:typeof thing.toUniqueString=="function"}function _smush(things){return things=things.map(thing=>{if(thing==null||["string","number"].includes(typeof thing)||thing instanceof Date)return thing;if(Array.isArray(thing))return _smush(thing);if(has_unique_string(thing)&&thing.toUniqueString()!=="")return thing.toUniqueString();throw new errors.UnexpectedError("bad smush: "+String(thing))}),JSON.stringify(things)}function is_empty(obj){return!(obj==null||typeof obj!="object"||Object.keys(obj).length>0)}function not_empty(obj){return typeof obj=="object"&&obj!=null&&!is_empty(obj)}function has_a_key(obj){if(obj==null||typeof obj!="object")return!1;for(let key in obj)return!0;return!1}function make_new(Cls){return function(){for(var _len4=arguments.length,args=new Array(_len4),_key4=0;_key4<_len4;_key4++)args[_key4]=arguments[_key4];return new Cls(...args)}}function has_is_equal_to(thing){return typeof thing!="object"||!thing?!1:typeof thing.is_equal_to=="function"}function compare(a,b){if(a===b)return!0;if(has_is_equal_to(a))return a.is_equal_to(b);if(has_unique_string(a)&&has_unique_string(b))return a.toUniqueString()===b.toUniqueString();if(Array.isArray(a)&&Array.isArray(b)){if(a.length!==b.length)return!1;for(let i=0;i<a.length;i++){let e=a[i];if(!compare(e,b[i]))return!1}return!0}return a instanceof Date&&b instanceof Date?a.getTime()===b.getTime():!1}function extract_from_object(object2,path){let temp=object2;for(let path_element of path)if(is_record(temp)&&temp[path_element]!=null)temp=temp[path_element];else return null;return temp}function sort_obj(obj){let mapping={},lowercase_keys=[];for(let k in obj){let lowercase_key=k.toLowerCase();mapping[lowercase_key]=k,lowercase_keys.push(lowercase_key)}lowercase_keys.sort();let sorted_obj={};for(let lowercase_key of lowercase_keys){let key=mapping[lowercase_key];sorted_obj[key]=obj[key]}return sorted_obj}function remove_circular_references(object2){try{let cache=new Set,safe_stringified=JSON.stringify(object2,function(_,value){if(value!=null&&typeof value=="object"){if(cache.has(value))return null;cache.add(value)}return value});return JSON.parse(safe_stringified)}catch(error){return"failed to remove circular references"}}function sort_data_fields(fields){let built_in_fields=[],custom_fields=[],all_builtins=security_consts.BUILTIN_FIELDS;for(let field of fields)all_builtins.includes(field.value)||field.value==="_id"?built_in_fields.push(field):custom_fields.push(field);return custom_fields=custom_fields.sort((a,b)=>a.display.toLowerCase()>=b.display.toLowerCase()?1:-1),custom_fields.concat(built_in_fields)}function all_keys(object2){let stop_at_prototype=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Object.prototype,keys=[],current=object2;for(;current!=null&&current!==stop_at_prototype;)keys.push(...Object.getOwnPropertyNames(current)),current=Object.getPrototypeOf(current);return keys}function get_sorted_object_by_values(obj){let key_value_list=[];for(let k in obj){let v=obj[k];key_value_list.push({id:k,value:v})}key_value_list.sort((a,b)=>a.value!=null||b.value!=null?a.value==null?1:b.value==null?-1:typeof a.value=="string"&&typeof b.value=="string"?a.value.toLowerCase()<b.value.toLowerCase()?-1:1:typeof b.value=="string"?1:-1:1);let sorted_set={};for(let item of key_value_list)sorted_set[item.id]=item.value;return sorted_set}function stripFalsy(obj,deep){return Object.fromEntries(Object.entries(obj).filter(_ref=>{let[_,v]=_ref;return!!v}).map(_ref2=>{let[k,v]=_ref2;return[k,v===Object(v)&&deep?stripFalsy(v,deep):v]}))}function stableSort(target){if(Array.isArray(target))return target.map(stableSort);if(target!=null&&typeof target=="object"){let result={};return Object.keys(target).sort().forEach(key=>result[key]=stableSort(target[key])),result}return target}function stableSortLanguages(target){if(Array.isArray(target))return target;if(target!=null&&typeof target=="object"){let result={};return Object.keys(target).sort().forEach(key=>result[key]=stableSortLanguages(target[key])),result}return target}function map_values(obj,mapFn){let result={};for(let key in obj)result[key]=mapFn(obj[key],key);return result}}});var require_fast_deep_equal=__commonJS({"node_modules/fast-deep-equal/index.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports=function equal(a,b){if(a===b)return!0;if(a&&b&&typeof a=="object"&&typeof b=="object"){if(a.constructor!==b.constructor)return!1;var length,i,keys;if(Array.isArray(a)){if(length=a.length,length!=b.length)return!1;for(i=length;i--!==0;)if(!equal(a[i],b[i]))return!1;return!0}if(a.constructor===RegExp)return a.source===b.source&&a.flags===b.flags;if(a.valueOf!==Object.prototype.valueOf)return a.valueOf()===b.valueOf();if(a.toString!==Object.prototype.toString)return a.toString()===b.toString();if(keys=Object.keys(a),length=keys.length,length!==Object.keys(b).length)return!1;for(i=length;i--!==0;)if(!Object.prototype.hasOwnProperty.call(b,keys[i]))return!1;for(i=length;i--!==0;){var key=keys[i];if(!equal(a[key],b[key]))return!1}return!0}return a!==a&&b!==b}}});var require_b_array=__commonJS({"lib-browser-old/u/shared/b_array.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.TimeoutLinkedList=exports.LinkedList=void 0;exports.array_remove=array_remove;exports.array_replace=array_replace;exports.groupBy=groupBy;exports.isArrayLike=isArrayLike;exports.join_into_human_readable_list=join_into_human_readable_list;exports.partition=partition;exports.range=range;exports.range_right=range_right;exports.shuffle_array=shuffle_array;exports.sort_array=sort_array;exports.unique=unique;exports.zip=zip;require_es_object_values();require_es_error_cause();require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_includes();require_es_string_includes();require_es_object_from_entries();require_es_object_entries();var _fastDeepEqual=_interopRequireDefault(require_fast_deep_equal());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function array_remove(array,val){let idx;if(array)for(;(idx=array.indexOf(val))!==-1;)array.splice(idx,1)}function array_replace(array,old_val,new_val){return array.map(a=>a===old_val?new_val:a)}function unique(array){let output={};for(let key=0;key<array.length;key++)output[array[key]]=array[key];return Object.values(output)}function shuffle_array(a){let i=a.length;for(;--i>0;){let j=~~(Math.random()*(i+1)),t=a[j];a[j]=a[i],a[i]=t}return a}function zip(left_array,right_array,combine){if(left_array.length!==right_array.length)throw new Error("zip: left array size ".concat(left_array.length,"; right array size ").concat(right_array.length));return[...Array(left_array.length)].map((_,i)=>combine(left_array[i],right_array[i]))}function sort_array(array,order){let sorted_array=[];for(let entry of order)array.includes(entry)&&sorted_array.push(entry);for(let entry of array)!sorted_array.includes(entry)&&!order.includes(entry)&&sorted_array.push(entry);return sorted_array}function partition(arr){let half_idx=Math.ceil(arr.length/2),left_half=arr.slice(0,half_idx),right_half=arr.slice(half_idx);return[left_half,right_half]}function join_into_human_readable_list(values){if(values.length<2)return values[0]||"";{let comma_separated_heads=values.slice(0,-1).join(", "),tail=values.slice(-1)[0];return[comma_separated_heads,tail].join(" and ")}}var LinkedList=class{constructor(){this.length=void 0,this.links=void 0,this.length=0,this.links=null}push(item){if(this.links)this.links.tail.next={item},this.links.tail=this.links.tail.next;else{let head_link={item};this.links={head:head_link,tail:head_link}}return this.length++,this.length}shift(){if(this.links===null)return;let{item}=this.links.head;return this.links.head.next?this.links.head=this.links.head.next:this.links=null,this.length--,item}shift_while(predicate,body){for(;this.links!==null&&predicate(this.links.head.item);){let elem=this.links.head.item;this.shift(),body(elem)}}peek(){var _this$links;return(_this$links=this.links)==null?void 0:_this$links.head.item}peek_each(fn){var _this$links2;let item=(_this$links2=this.links)==null?void 0:_this$links2.head;for(;item!=null;)fn(item.item),item=item.next}};exports.LinkedList=LinkedList;var TimeoutLinkedList=class{constructor(timeout,timeout_cb){this.timeout=void 0,this.timeout_cb=void 0,this._timeout_started=!1,this.list=void 0,this.list=new LinkedList,this.timeout=timeout,this.timeout_cb=timeout_cb}get length(){return this.list.length}push(item){let start_time=Date.now();return this._timeout_started||this.start_timeout(start_time),this.list.push({item,start_time})}shift(){var _this$list$shift;return(_this$list$shift=this.list.shift())==null?void 0:_this$list$shift.item}start_timeout(start_time){this._timeout_started=!0,setTimeout(()=>{this._timeout_started=!1,this.list.shift_while(item2=>item2.start_time+this.timeout<=Date.now(),item2=>{this.timeout_cb(item2.item)});let item=this.list.peek();item&&this.start_timeout(item.start_time)},start_time+this.timeout-Date.now())}};exports.TimeoutLinkedList=TimeoutLinkedList;function range(start,end){end===void 0&&(end=start,start=0);let range2=[];for(let i=start;i<end;i++)range2.push(i);return range2}function range_right(start,end){end===void 0&&(end=start,start=0);let range2=[];for(let i=1;i<=end-start;i++)range2.push(end-i);return range2}function isArrayLike(value){return(0,_fastDeepEqual.default)(Object.fromEntries(Object.entries(Object.values(value))),value)}function groupBy(array,fn){let groups={};for(let item of array){var _groups$key;let key=fn(item);((_groups$key=groups[key])!=null?_groups$key:groups[key]=[]).push(item)}return groups}}});var require_moment=__commonJS({"node_modules/moment/moment.js"(exports,module){init_define_process_env();init_shim();(function(global,factory){typeof exports=="object"&&typeof module<"u"?module.exports=factory():typeof define=="function"&&define.amd?define(factory):global.moment=factory()})(exports,function(){"use strict";var hookCallback;function hooks(){return hookCallback.apply(null,arguments)}function setHookCallback(callback){hookCallback=callback}function isArray(input){return input instanceof Array||Object.prototype.toString.call(input)==="[object Array]"}function isObject(input){return input!=null&&Object.prototype.toString.call(input)==="[object Object]"}function hasOwnProp(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function isObjectEmpty(obj){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(obj).length===0;var k;for(k in obj)if(hasOwnProp(obj,k))return!1;return!0}function isUndefined(input){return input===void 0}function isNumber(input){return typeof input=="number"||Object.prototype.toString.call(input)==="[object Number]"}function isDate(input){return input instanceof Date||Object.prototype.toString.call(input)==="[object Date]"}function map(arr,fn){var res=[],i,arrLen=arr.length;for(i=0;i<arrLen;++i)res.push(fn(arr[i],i));return res}function extend(a,b){for(var i in b)hasOwnProp(b,i)&&(a[i]=b[i]);return hasOwnProp(b,"toString")&&(a.toString=b.toString),hasOwnProp(b,"valueOf")&&(a.valueOf=b.valueOf),a}function createUTC(input,format2,locale2,strict){return createLocalOrUTC(input,format2,locale2,strict,!0).utc()}function defaultParsingFlags(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function getParsingFlags(m){return m._pf==null&&(m._pf=defaultParsingFlags()),m._pf}var some;Array.prototype.some?some=Array.prototype.some:some=function(fun){var t=Object(this),len=t.length>>>0,i;for(i=0;i<len;i++)if(i in t&&fun.call(this,t[i],i,t))return!0;return!1};function isValid(m){if(m._isValid==null){var flags=getParsingFlags(m),parsedParts=some.call(flags.parsedDateParts,function(i){return i!=null}),isNowValid=!isNaN(m._d.getTime())&&flags.overflow<0&&!flags.empty&&!flags.invalidEra&&!flags.invalidMonth&&!flags.invalidWeekday&&!flags.weekdayMismatch&&!flags.nullInput&&!flags.invalidFormat&&!flags.userInvalidated&&(!flags.meridiem||flags.meridiem&&parsedParts);if(m._strict&&(isNowValid=isNowValid&&flags.charsLeftOver===0&&flags.unusedTokens.length===0&&flags.bigHour===void 0),Object.isFrozen==null||!Object.isFrozen(m))m._isValid=isNowValid;else return isNowValid}return m._isValid}function createInvalid(flags){var m=createUTC(NaN);return flags!=null?extend(getParsingFlags(m),flags):getParsingFlags(m).userInvalidated=!0,m}var momentProperties=hooks.momentProperties=[],updateInProgress=!1;function copyConfig(to2,from3){var i,prop,val,momentPropertiesLen=momentProperties.length;if(isUndefined(from3._isAMomentObject)||(to2._isAMomentObject=from3._isAMomentObject),isUndefined(from3._i)||(to2._i=from3._i),isUndefined(from3._f)||(to2._f=from3._f),isUndefined(from3._l)||(to2._l=from3._l),isUndefined(from3._strict)||(to2._strict=from3._strict),isUndefined(from3._tzm)||(to2._tzm=from3._tzm),isUndefined(from3._isUTC)||(to2._isUTC=from3._isUTC),isUndefined(from3._offset)||(to2._offset=from3._offset),isUndefined(from3._pf)||(to2._pf=getParsingFlags(from3)),isUndefined(from3._locale)||(to2._locale=from3._locale),momentPropertiesLen>0)for(i=0;i<momentPropertiesLen;i++)prop=momentProperties[i],val=from3[prop],isUndefined(val)||(to2[prop]=val);return to2}function Moment(config){copyConfig(this,config),this._d=new Date(config._d!=null?config._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),updateInProgress===!1&&(updateInProgress=!0,hooks.updateOffset(this),updateInProgress=!1)}function isMoment(obj){return obj instanceof Moment||obj!=null&&obj._isAMomentObject!=null}function warn(msg){hooks.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+msg)}function deprecate(msg,fn){var firstTime=!0;return extend(function(){if(hooks.deprecationHandler!=null&&hooks.deprecationHandler(null,msg),firstTime){var args=[],arg,i,key,argLen=arguments.length;for(i=0;i<argLen;i++){if(arg="",typeof arguments[i]=="object"){arg+="\n["+i+"] ";for(key in arguments[0])hasOwnProp(arguments[0],key)&&(arg+=key+": "+arguments[0][key]+", ");arg=arg.slice(0,-2)}else arg=arguments[i];args.push(arg)}warn(msg+"\nArguments: "+Array.prototype.slice.call(args).join("")+"\n"+new Error().stack),firstTime=!1}return fn.apply(this,arguments)},fn)}var deprecations={};function deprecateSimple(name,msg){hooks.deprecationHandler!=null&&hooks.deprecationHandler(name,msg),deprecations[name]||(warn(msg),deprecations[name]=!0)}hooks.suppressDeprecationWarnings=!1,hooks.deprecationHandler=null;function isFunction(input){return typeof Function<"u"&&input instanceof Function||Object.prototype.toString.call(input)==="[object Function]"}function set(config){var prop,i;for(i in config)hasOwnProp(config,i)&&(prop=config[i],isFunction(prop)?this[i]=prop:this["_"+i]=prop);this._config=config,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function mergeConfigs(parentConfig,childConfig){var res=extend({},parentConfig),prop;for(prop in childConfig)hasOwnProp(childConfig,prop)&&(isObject(parentConfig[prop])&&isObject(childConfig[prop])?(res[prop]={},extend(res[prop],parentConfig[prop]),extend(res[prop],childConfig[prop])):childConfig[prop]!=null?res[prop]=childConfig[prop]:delete res[prop]);for(prop in parentConfig)hasOwnProp(parentConfig,prop)&&!hasOwnProp(childConfig,prop)&&isObject(parentConfig[prop])&&(res[prop]=extend({},res[prop]));return res}function Locale(config){config!=null&&this.set(config)}var keys;Object.keys?keys=Object.keys:keys=function(obj){var i,res=[];for(i in obj)hasOwnProp(obj,i)&&res.push(i);return res};var defaultCalendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function calendar(key,mom,now2){var output=this._calendar[key]||this._calendar.sameElse;return isFunction(output)?output.call(mom,now2):output}function zeroFill(number,targetLength,forceSign){var absNumber=""+Math.abs(number),zerosToFill=targetLength-absNumber.length,sign2=number>=0;return(sign2?forceSign?"+":"":"-")+Math.pow(10,Math.max(0,zerosToFill)).toString().substr(1)+absNumber}var formattingTokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,localFormattingTokens=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,formatFunctions={},formatTokenFunctions={};function addFormatToken(token2,padded,ordinal2,callback){var func=callback;typeof callback=="string"&&(func=function(){return this[callback]()}),token2&&(formatTokenFunctions[token2]=func),padded&&(formatTokenFunctions[padded[0]]=function(){return zeroFill(func.apply(this,arguments),padded[1],padded[2])}),ordinal2&&(formatTokenFunctions[ordinal2]=function(){return this.localeData().ordinal(func.apply(this,arguments),token2)})}function removeFormattingTokens(input){return input.match(/\[[\s\S]/)?input.replace(/^\[|\]$/g,""):input.replace(/\\/g,"")}function makeFormatFunction(format2){var array=format2.match(formattingTokens),i,length;for(i=0,length=array.length;i<length;i++)formatTokenFunctions[array[i]]?array[i]=formatTokenFunctions[array[i]]:array[i]=removeFormattingTokens(array[i]);return function(mom){var output="",i2;for(i2=0;i2<length;i2++)output+=isFunction(array[i2])?array[i2].call(mom,format2):array[i2];return output}}function formatMoment(m,format2){return m.isValid()?(format2=expandFormat(format2,m.localeData()),formatFunctions[format2]=formatFunctions[format2]||makeFormatFunction(format2),formatFunctions[format2](m)):m.localeData().invalidDate()}function expandFormat(format2,locale2){var i=5;function replaceLongDateFormatTokens(input){return locale2.longDateFormat(input)||input}for(localFormattingTokens.lastIndex=0;i>=0&&localFormattingTokens.test(format2);)format2=format2.replace(localFormattingTokens,replaceLongDateFormatTokens),localFormattingTokens.lastIndex=0,i-=1;return format2}var defaultLongDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function longDateFormat(key){var format2=this._longDateFormat[key],formatUpper=this._longDateFormat[key.toUpperCase()];return format2||!formatUpper?format2:(this._longDateFormat[key]=formatUpper.match(formattingTokens).map(function(tok){return tok==="MMMM"||tok==="MM"||tok==="DD"||tok==="dddd"?tok.slice(1):tok}).join(""),this._longDateFormat[key])}var defaultInvalidDate="Invalid date";function invalidDate(){return this._invalidDate}var defaultOrdinal="%d",defaultDayOfMonthOrdinalParse=/\d{1,2}/;function ordinal(number){return this._ordinal.replace("%d",number)}var defaultRelativeTime={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function relativeTime(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return isFunction(output)?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number)}function pastFuture(diff2,output){var format2=this._relativeTime[diff2>0?"future":"past"];return isFunction(format2)?format2(output):format2.replace(/%s/i,output)}var aliases={};function addUnitAlias(unit,shorthand){var lowerCase=unit.toLowerCase();aliases[lowerCase]=aliases[lowerCase+"s"]=aliases[shorthand]=unit}function normalizeUnits(units){return typeof units=="string"?aliases[units]||aliases[units.toLowerCase()]:void 0}function normalizeObjectUnits(inputObject){var normalizedInput={},normalizedProp,prop;for(prop in inputObject)hasOwnProp(inputObject,prop)&&(normalizedProp=normalizeUnits(prop),normalizedProp&&(normalizedInput[normalizedProp]=inputObject[prop]));return normalizedInput}var priorities={};function addUnitPriority(unit,priority){priorities[unit]=priority}function getPrioritizedUnits(unitsObj){var units=[],u;for(u in unitsObj)hasOwnProp(unitsObj,u)&&units.push({unit:u,priority:priorities[u]});return units.sort(function(a,b){return a.priority-b.priority}),units}function isLeapYear(year){return year%4===0&&year%100!==0||year%400===0}function absFloor(number){return number<0?Math.ceil(number)||0:Math.floor(number)}function toInt(argumentForCoercion){var coercedNumber=+argumentForCoercion,value=0;return coercedNumber!==0&&isFinite(coercedNumber)&&(value=absFloor(coercedNumber)),value}function makeGetSet(unit,keepTime){return function(value){return value!=null?(set$1(this,unit,value),hooks.updateOffset(this,keepTime),this):get(this,unit)}}function get(mom,unit){return mom.isValid()?mom._d["get"+(mom._isUTC?"UTC":"")+unit]():NaN}function set$1(mom,unit,value){mom.isValid()&&!isNaN(value)&&(unit==="FullYear"&&isLeapYear(mom.year())&&mom.month()===1&&mom.date()===29?(value=toInt(value),mom._d["set"+(mom._isUTC?"UTC":"")+unit](value,mom.month(),daysInMonth(value,mom.month()))):mom._d["set"+(mom._isUTC?"UTC":"")+unit](value))}function stringGet(units){return units=normalizeUnits(units),isFunction(this[units])?this[units]():this}function stringSet(units,value){if(typeof units=="object"){units=normalizeObjectUnits(units);var prioritized=getPrioritizedUnits(units),i,prioritizedLen=prioritized.length;for(i=0;i<prioritizedLen;i++)this[prioritized[i].unit](units[prioritized[i].unit])}else if(units=normalizeUnits(units),isFunction(this[units]))return this[units](value);return this}var match1=/\d/,match2=/\d\d/,match3=/\d{3}/,match4=/\d{4}/,match6=/[+-]?\d{6}/,match1to2=/\d\d?/,match3to4=/\d\d\d\d?/,match5to6=/\d\d\d\d\d\d?/,match1to3=/\d{1,3}/,match1to4=/\d{1,4}/,match1to6=/[+-]?\d{1,6}/,matchUnsigned=/\d+/,matchSigned=/[+-]?\d+/,matchOffset=/Z|[+-]\d\d:?\d\d/gi,matchShortOffset=/Z|[+-]\d\d(?::?\d\d)?/gi,matchTimestamp=/[+-]?\d+(\.\d{1,3})?/,matchWord=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,regexes;regexes={};function addRegexToken(token2,regex,strictRegex){regexes[token2]=isFunction(regex)?regex:function(isStrict,localeData2){return isStrict&&strictRegex?strictRegex:regex}}function getParseRegexForToken(token2,config){return hasOwnProp(regexes,token2)?regexes[token2](config._strict,config._locale):new RegExp(unescapeFormat(token2))}function unescapeFormat(s){return regexEscape(s.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(matched,p1,p2,p3,p4){return p1||p2||p3||p4}))}function regexEscape(s){return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var tokens={};function addParseToken(token2,callback){var i,func=callback,tokenLen;for(typeof token2=="string"&&(token2=[token2]),isNumber(callback)&&(func=function(input,array){array[callback]=toInt(input)}),tokenLen=token2.length,i=0;i<tokenLen;i++)tokens[token2[i]]=func}function addWeekParseToken(token2,callback){addParseToken(token2,function(input,array,config,token3){config._w=config._w||{},callback(input,config._w,config,token3)})}function addTimeToArrayFromToken(token2,input,config){input!=null&&hasOwnProp(tokens,token2)&&tokens[token2](input,config._a,config,token2)}var YEAR=0,MONTH=1,DATE=2,HOUR=3,MINUTE=4,SECOND=5,MILLISECOND=6,WEEK=7,WEEKDAY=8;function mod(n,x){return(n%x+x)%x}var indexOf;Array.prototype.indexOf?indexOf=Array.prototype.indexOf:indexOf=function(o){var i;for(i=0;i<this.length;++i)if(this[i]===o)return i;return-1};function daysInMonth(year,month){if(isNaN(year)||isNaN(month))return NaN;var modMonth=mod(month,12);return year+=(month-modMonth)/12,modMonth===1?isLeapYear(year)?29:28:31-modMonth%7%2}addFormatToken("M",["MM",2],"Mo",function(){return this.month()+1}),addFormatToken("MMM",0,0,function(format2){return this.localeData().monthsShort(this,format2)}),addFormatToken("MMMM",0,0,function(format2){return this.localeData().months(this,format2)}),addUnitAlias("month","M"),addUnitPriority("month",8),addRegexToken("M",match1to2),addRegexToken("MM",match1to2,match2),addRegexToken("MMM",function(isStrict,locale2){return locale2.monthsShortRegex(isStrict)}),addRegexToken("MMMM",function(isStrict,locale2){return locale2.monthsRegex(isStrict)}),addParseToken(["M","MM"],function(input,array){array[MONTH]=toInt(input)-1}),addParseToken(["MMM","MMMM"],function(input,array,config,token2){var month=config._locale.monthsParse(input,token2,config._strict);month!=null?array[MONTH]=month:getParsingFlags(config).invalidMonth=input});var defaultLocaleMonths="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),defaultLocaleMonthsShort="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),MONTHS_IN_FORMAT=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,defaultMonthsShortRegex=matchWord,defaultMonthsRegex=matchWord;function localeMonths(m,format2){return m?isArray(this._months)?this._months[m.month()]:this._months[(this._months.isFormat||MONTHS_IN_FORMAT).test(format2)?"format":"standalone"][m.month()]:isArray(this._months)?this._months:this._months.standalone}function localeMonthsShort(m,format2){return m?isArray(this._monthsShort)?this._monthsShort[m.month()]:this._monthsShort[MONTHS_IN_FORMAT.test(format2)?"format":"standalone"][m.month()]:isArray(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function handleStrictParse(monthName,format2,strict){var i,ii,mom,llc=monthName.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)mom=createUTC([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(mom,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(mom,"").toLocaleLowerCase();return strict?format2==="MMM"?(ii=indexOf.call(this._shortMonthsParse,llc),ii!==-1?ii:null):(ii=indexOf.call(this._longMonthsParse,llc),ii!==-1?ii:null):format2==="MMM"?(ii=indexOf.call(this._shortMonthsParse,llc),ii!==-1?ii:(ii=indexOf.call(this._longMonthsParse,llc),ii!==-1?ii:null)):(ii=indexOf.call(this._longMonthsParse,llc),ii!==-1?ii:(ii=indexOf.call(this._shortMonthsParse,llc),ii!==-1?ii:null))}function localeMonthsParse(monthName,format2,strict){var i,mom,regex;if(this._monthsParseExact)return handleStrictParse.call(this,monthName,format2,strict);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(mom=createUTC([2e3,i]),strict&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(mom,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(mom,"").replace(".","")+"$","i")),!strict&&!this._monthsParse[i]&&(regex="^"+this.months(mom,"")+"|^"+this.monthsShort(mom,""),this._monthsParse[i]=new RegExp(regex.replace(".",""),"i")),strict&&format2==="MMMM"&&this._longMonthsParse[i].test(monthName))return i;if(strict&&format2==="MMM"&&this._shortMonthsParse[i].test(monthName))return i;if(!strict&&this._monthsParse[i].test(monthName))return i}}function setMonth(mom,value){var dayOfMonth;if(!mom.isValid())return mom;if(typeof value=="string"){if(/^\d+$/.test(value))value=toInt(value);else if(value=mom.localeData().monthsParse(value),!isNumber(value))return mom}return dayOfMonth=Math.min(mom.date(),daysInMonth(mom.year(),value)),mom._d["set"+(mom._isUTC?"UTC":"")+"Month"](value,dayOfMonth),mom}function getSetMonth(value){return value!=null?(setMonth(this,value),hooks.updateOffset(this,!0),this):get(this,"Month")}function getDaysInMonth(){return daysInMonth(this.year(),this.month())}function monthsShortRegex(isStrict){return this._monthsParseExact?(hasOwnProp(this,"_monthsRegex")||computeMonthsParse.call(this),isStrict?this._monthsShortStrictRegex:this._monthsShortRegex):(hasOwnProp(this,"_monthsShortRegex")||(this._monthsShortRegex=defaultMonthsShortRegex),this._monthsShortStrictRegex&&isStrict?this._monthsShortStrictRegex:this._monthsShortRegex)}function monthsRegex(isStrict){return this._monthsParseExact?(hasOwnProp(this,"_monthsRegex")||computeMonthsParse.call(this),isStrict?this._monthsStrictRegex:this._monthsRegex):(hasOwnProp(this,"_monthsRegex")||(this._monthsRegex=defaultMonthsRegex),this._monthsStrictRegex&&isStrict?this._monthsStrictRegex:this._monthsRegex)}function computeMonthsParse(){function cmpLenRev(a,b){return b.length-a.length}var shortPieces=[],longPieces=[],mixedPieces=[],i,mom;for(i=0;i<12;i++)mom=createUTC([2e3,i]),shortPieces.push(this.monthsShort(mom,"")),longPieces.push(this.months(mom,"")),mixedPieces.push(this.months(mom,"")),mixedPieces.push(this.monthsShort(mom,""));for(shortPieces.sort(cmpLenRev),longPieces.sort(cmpLenRev),mixedPieces.sort(cmpLenRev),i=0;i<12;i++)shortPieces[i]=regexEscape(shortPieces[i]),longPieces[i]=regexEscape(longPieces[i]);for(i=0;i<24;i++)mixedPieces[i]=regexEscape(mixedPieces[i]);this._monthsRegex=new RegExp("^("+mixedPieces.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+longPieces.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+shortPieces.join("|")+")","i")}addFormatToken("Y",0,0,function(){var y=this.year();return y<=9999?zeroFill(y,4):"+"+y}),addFormatToken(0,["YY",2],0,function(){return this.year()%100}),addFormatToken(0,["YYYY",4],0,"year"),addFormatToken(0,["YYYYY",5],0,"year"),addFormatToken(0,["YYYYYY",6,!0],0,"year"),addUnitAlias("year","y"),addUnitPriority("year",1),addRegexToken("Y",matchSigned),addRegexToken("YY",match1to2,match2),addRegexToken("YYYY",match1to4,match4),addRegexToken("YYYYY",match1to6,match6),addRegexToken("YYYYYY",match1to6,match6),addParseToken(["YYYYY","YYYYYY"],YEAR),addParseToken("YYYY",function(input,array){array[YEAR]=input.length===2?hooks.parseTwoDigitYear(input):toInt(input)}),addParseToken("YY",function(input,array){array[YEAR]=hooks.parseTwoDigitYear(input)}),addParseToken("Y",function(input,array){array[YEAR]=parseInt(input,10)});function daysInYear(year){return isLeapYear(year)?366:365}hooks.parseTwoDigitYear=function(input){return toInt(input)+(toInt(input)>68?1900:2e3)};var getSetYear=makeGetSet("FullYear",!0);function getIsLeapYear(){return isLeapYear(this.year())}function createDate(y,m,d,h,M,s,ms){var date;return y<100&&y>=0?(date=new Date(y+400,m,d,h,M,s,ms),isFinite(date.getFullYear())&&date.setFullYear(y)):date=new Date(y,m,d,h,M,s,ms),date}function createUTCDate(y){var date,args;return y<100&&y>=0?(args=Array.prototype.slice.call(arguments),args[0]=y+400,date=new Date(Date.UTC.apply(null,args)),isFinite(date.getUTCFullYear())&&date.setUTCFullYear(y)):date=new Date(Date.UTC.apply(null,arguments)),date}function firstWeekOffset(year,dow,doy){var fwd=7+dow-doy,fwdlw=(7+createUTCDate(year,0,fwd).getUTCDay()-dow)%7;return-fwdlw+fwd-1}function dayOfYearFromWeeks(year,week,weekday,dow,doy){var localWeekday=(7+weekday-dow)%7,weekOffset=firstWeekOffset(year,dow,doy),dayOfYear=1+7*(week-1)+localWeekday+weekOffset,resYear,resDayOfYear;return dayOfYear<=0?(resYear=year-1,resDayOfYear=daysInYear(resYear)+dayOfYear):dayOfYear>daysInYear(year)?(resYear=year+1,resDayOfYear=dayOfYear-daysInYear(year)):(resYear=year,resDayOfYear=dayOfYear),{year:resYear,dayOfYear:resDayOfYear}}function weekOfYear(mom,dow,doy){var weekOffset=firstWeekOffset(mom.year(),dow,doy),week=Math.floor((mom.dayOfYear()-weekOffset-1)/7)+1,resWeek,resYear;return week<1?(resYear=mom.year()-1,resWeek=week+weeksInYear(resYear,dow,doy)):week>weeksInYear(mom.year(),dow,doy)?(resWeek=week-weeksInYear(mom.year(),dow,doy),resYear=mom.year()+1):(resYear=mom.year(),resWeek=week),{week:resWeek,year:resYear}}function weeksInYear(year,dow,doy){var weekOffset=firstWeekOffset(year,dow,doy),weekOffsetNext=firstWeekOffset(year+1,dow,doy);return(daysInYear(year)-weekOffset+weekOffsetNext)/7}addFormatToken("w",["ww",2],"wo","week"),addFormatToken("W",["WW",2],"Wo","isoWeek"),addUnitAlias("week","w"),addUnitAlias("isoWeek","W"),addUnitPriority("week",5),addUnitPriority("isoWeek",5),addRegexToken("w",match1to2),addRegexToken("ww",match1to2,match2),addRegexToken("W",match1to2),addRegexToken("WW",match1to2,match2),addWeekParseToken(["w","ww","W","WW"],function(input,week,config,token2){week[token2.substr(0,1)]=toInt(input)});function localeWeek(mom){return weekOfYear(mom,this._week.dow,this._week.doy).week}var defaultLocaleWeek={dow:0,doy:6};function localeFirstDayOfWeek(){return this._week.dow}function localeFirstDayOfYear(){return this._week.doy}function getSetWeek(input){var week=this.localeData().week(this);return input==null?week:this.add((input-week)*7,"d")}function getSetISOWeek(input){var week=weekOfYear(this,1,4).week;return input==null?week:this.add((input-week)*7,"d")}addFormatToken("d",0,"do","day"),addFormatToken("dd",0,0,function(format2){return this.localeData().weekdaysMin(this,format2)}),addFormatToken("ddd",0,0,function(format2){return this.localeData().weekdaysShort(this,format2)}),addFormatToken("dddd",0,0,function(format2){return this.localeData().weekdays(this,format2)}),addFormatToken("e",0,0,"weekday"),addFormatToken("E",0,0,"isoWeekday"),addUnitAlias("day","d"),addUnitAlias("weekday","e"),addUnitAlias("isoWeekday","E"),addUnitPriority("day",11),addUnitPriority("weekday",11),addUnitPriority("isoWeekday",11),addRegexToken("d",match1to2),addRegexToken("e",match1to2),addRegexToken("E",match1to2),addRegexToken("dd",function(isStrict,locale2){return locale2.weekdaysMinRegex(isStrict)}),addRegexToken("ddd",function(isStrict,locale2){return locale2.weekdaysShortRegex(isStrict)}),addRegexToken("dddd",function(isStrict,locale2){return locale2.weekdaysRegex(isStrict)}),addWeekParseToken(["dd","ddd","dddd"],function(input,week,config,token2){var weekday=config._locale.weekdaysParse(input,token2,config._strict);weekday!=null?week.d=weekday:getParsingFlags(config).invalidWeekday=input}),addWeekParseToken(["d","e","E"],function(input,week,config,token2){week[token2]=toInt(input)});function parseWeekday(input,locale2){return typeof input!="string"?input:isNaN(input)?(input=locale2.weekdaysParse(input),typeof input=="number"?input:null):parseInt(input,10)}function parseIsoWeekday(input,locale2){return typeof input=="string"?locale2.weekdaysParse(input)%7||7:isNaN(input)?null:input}function shiftWeekdays(ws,n){return ws.slice(n,7).concat(ws.slice(0,n))}var defaultLocaleWeekdays="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),defaultLocaleWeekdaysShort="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),defaultLocaleWeekdaysMin="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),defaultWeekdaysRegex=matchWord,defaultWeekdaysShortRegex=matchWord,defaultWeekdaysMinRegex=matchWord;function localeWeekdays(m,format2){var weekdays=isArray(this._weekdays)?this._weekdays:this._weekdays[m&&m!==!0&&this._weekdays.isFormat.test(format2)?"format":"standalone"];return m===!0?shiftWeekdays(weekdays,this._week.dow):m?weekdays[m.day()]:weekdays}function localeWeekdaysShort(m){return m===!0?shiftWeekdays(this._weekdaysShort,this._week.dow):m?this._weekdaysShort[m.day()]:this._weekdaysShort}function localeWeekdaysMin(m){return m===!0?shiftWeekdays(this._weekdaysMin,this._week.dow):m?this._weekdaysMin[m.day()]:this._weekdaysMin}function handleStrictParse$1(weekdayName,format2,strict){var i,ii,mom,llc=weekdayName.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)mom=createUTC([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(mom,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(mom,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(mom,"").toLocaleLowerCase();return strict?format2==="dddd"?(ii=indexOf.call(this._weekdaysParse,llc),ii!==-1?ii:null):format2==="ddd"?(ii=indexOf.call(this._shortWeekdaysParse,llc),ii!==-1?ii:null):(ii=indexOf.call(this._minWeekdaysParse,llc),ii!==-1?ii:null):format2==="dddd"?(ii=indexOf.call(this._weekdaysParse,llc),ii!==-1||(ii=indexOf.call(this._shortWeekdaysParse,llc),ii!==-1)?ii:(ii=indexOf.call(this._minWeekdaysParse,llc),ii!==-1?ii:null)):format2==="ddd"?(ii=indexOf.call(this._shortWeekdaysParse,llc),ii!==-1||(ii=indexOf.call(this._weekdaysParse,llc),ii!==-1)?ii:(ii=indexOf.call(this._minWeekdaysParse,llc),ii!==-1?ii:null)):(ii=indexOf.call(this._minWeekdaysParse,llc),ii!==-1||(ii=indexOf.call(this._weekdaysParse,llc),ii!==-1)?ii:(ii=indexOf.call(this._shortWeekdaysParse,llc),ii!==-1?ii:null))}function localeWeekdaysParse(weekdayName,format2,strict){var i,mom,regex;if(this._weekdaysParseExact)return handleStrictParse$1.call(this,weekdayName,format2,strict);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(mom=createUTC([2e3,1]).day(i),strict&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(mom,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(mom,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(mom,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(regex="^"+this.weekdays(mom,"")+"|^"+this.weekdaysShort(mom,"")+"|^"+this.weekdaysMin(mom,""),this._weekdaysParse[i]=new RegExp(regex.replace(".",""),"i")),strict&&format2==="dddd"&&this._fullWeekdaysParse[i].test(weekdayName))return i;if(strict&&format2==="ddd"&&this._shortWeekdaysParse[i].test(weekdayName))return i;if(strict&&format2==="dd"&&this._minWeekdaysParse[i].test(weekdayName))return i;if(!strict&&this._weekdaysParse[i].test(weekdayName))return i}}function getSetDayOfWeek(input){if(!this.isValid())return input!=null?this:NaN;var day=this._isUTC?this._d.getUTCDay():this._d.getDay();return input!=null?(input=parseWeekday(input,this.localeData()),this.add(input-day,"d")):day}function getSetLocaleDayOfWeek(input){if(!this.isValid())return input!=null?this:NaN;var weekday=(this.day()+7-this.localeData()._week.dow)%7;return input==null?weekday:this.add(input-weekday,"d")}function getSetISODayOfWeek(input){if(!this.isValid())return input!=null?this:NaN;if(input!=null){var weekday=parseIsoWeekday(input,this.localeData());return this.day(this.day()%7?weekday:weekday-7)}else return this.day()||7}function weekdaysRegex(isStrict){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),isStrict?this._weekdaysStrictRegex:this._weekdaysRegex):(hasOwnProp(this,"_weekdaysRegex")||(this._weekdaysRegex=defaultWeekdaysRegex),this._weekdaysStrictRegex&&isStrict?this._weekdaysStrictRegex:this._weekdaysRegex)}function weekdaysShortRegex(isStrict){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),isStrict?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(hasOwnProp(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=defaultWeekdaysShortRegex),this._weekdaysShortStrictRegex&&isStrict?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function weekdaysMinRegex(isStrict){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),isStrict?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(hasOwnProp(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=defaultWeekdaysMinRegex),this._weekdaysMinStrictRegex&&isStrict?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function computeWeekdaysParse(){function cmpLenRev(a,b){return b.length-a.length}var minPieces=[],shortPieces=[],longPieces=[],mixedPieces=[],i,mom,minp,shortp,longp;for(i=0;i<7;i++)mom=createUTC([2e3,1]).day(i),minp=regexEscape(this.weekdaysMin(mom,"")),shortp=regexEscape(this.weekdaysShort(mom,"")),longp=regexEscape(this.weekdays(mom,"")),minPieces.push(minp),shortPieces.push(shortp),longPieces.push(longp),mixedPieces.push(minp),mixedPieces.push(shortp),mixedPieces.push(longp);minPieces.sort(cmpLenRev),shortPieces.sort(cmpLenRev),longPieces.sort(cmpLenRev),mixedPieces.sort(cmpLenRev),this._weekdaysRegex=new RegExp("^("+mixedPieces.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+longPieces.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+shortPieces.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+minPieces.join("|")+")","i")}function hFormat(){return this.hours()%12||12}function kFormat(){return this.hours()||24}addFormatToken("H",["HH",2],0,"hour"),addFormatToken("h",["hh",2],0,hFormat),addFormatToken("k",["kk",2],0,kFormat),addFormatToken("hmm",0,0,function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)}),addFormatToken("hmmss",0,0,function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)}),addFormatToken("Hmm",0,0,function(){return""+this.hours()+zeroFill(this.minutes(),2)}),addFormatToken("Hmmss",0,0,function(){return""+this.hours()+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)});function meridiem(token2,lowercase){addFormatToken(token2,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),lowercase)})}meridiem("a",!0),meridiem("A",!1),addUnitAlias("hour","h"),addUnitPriority("hour",13);function matchMeridiem(isStrict,locale2){return locale2._meridiemParse}addRegexToken("a",matchMeridiem),addRegexToken("A",matchMeridiem),addRegexToken("H",match1to2),addRegexToken("h",match1to2),addRegexToken("k",match1to2),addRegexToken("HH",match1to2,match2),addRegexToken("hh",match1to2,match2),addRegexToken("kk",match1to2,match2),addRegexToken("hmm",match3to4),addRegexToken("hmmss",match5to6),addRegexToken("Hmm",match3to4),addRegexToken("Hmmss",match5to6),addParseToken(["H","HH"],HOUR),addParseToken(["k","kk"],function(input,array,config){var kInput=toInt(input);array[HOUR]=kInput===24?0:kInput}),addParseToken(["a","A"],function(input,array,config){config._isPm=config._locale.isPM(input),config._meridiem=input}),addParseToken(["h","hh"],function(input,array,config){array[HOUR]=toInt(input),getParsingFlags(config).bigHour=!0}),addParseToken("hmm",function(input,array,config){var pos=input.length-2;array[HOUR]=toInt(input.substr(0,pos)),array[MINUTE]=toInt(input.substr(pos)),getParsingFlags(config).bigHour=!0}),addParseToken("hmmss",function(input,array,config){var pos1=input.length-4,pos2=input.length-2;array[HOUR]=toInt(input.substr(0,pos1)),array[MINUTE]=toInt(input.substr(pos1,2)),array[SECOND]=toInt(input.substr(pos2)),getParsingFlags(config).bigHour=!0}),addParseToken("Hmm",function(input,array,config){var pos=input.length-2;array[HOUR]=toInt(input.substr(0,pos)),array[MINUTE]=toInt(input.substr(pos))}),addParseToken("Hmmss",function(input,array,config){var pos1=input.length-4,pos2=input.length-2;array[HOUR]=toInt(input.substr(0,pos1)),array[MINUTE]=toInt(input.substr(pos1,2)),array[SECOND]=toInt(input.substr(pos2))});function localeIsPM(input){return(input+"").toLowerCase().charAt(0)==="p"}var defaultLocaleMeridiemParse=/[ap]\.?m?\.?/i,getSetHour=makeGetSet("Hours",!0);function localeMeridiem(hours2,minutes2,isLower){return hours2>11?isLower?"pm":"PM":isLower?"am":"AM"}var baseConfig={calendar:defaultCalendar,longDateFormat:defaultLongDateFormat,invalidDate:defaultInvalidDate,ordinal:defaultOrdinal,dayOfMonthOrdinalParse:defaultDayOfMonthOrdinalParse,relativeTime:defaultRelativeTime,months:defaultLocaleMonths,monthsShort:defaultLocaleMonthsShort,week:defaultLocaleWeek,weekdays:defaultLocaleWeekdays,weekdaysMin:defaultLocaleWeekdaysMin,weekdaysShort:defaultLocaleWeekdaysShort,meridiemParse:defaultLocaleMeridiemParse},locales={},localeFamilies={},globalLocale;function commonPrefix(arr1,arr2){var i,minl=Math.min(arr1.length,arr2.length);for(i=0;i<minl;i+=1)if(arr1[i]!==arr2[i])return i;return minl}function normalizeLocale(key){return key&&key.toLowerCase().replace("_","-")}function chooseLocale(names){for(var i=0,j,next,locale2,split;i<names.length;){for(split=normalizeLocale(names[i]).split("-"),j=split.length,next=normalizeLocale(names[i+1]),next=next?next.split("-"):null;j>0;){if(locale2=loadLocale(split.slice(0,j).join("-")),locale2)return locale2;if(next&&next.length>=j&&commonPrefix(split,next)>=j-1)break;j--}i++}return globalLocale}function isLocaleNameSane(name){return name.match("^[^/\\\\]*$")!=null}function loadLocale(name){var oldLocale=null,aliasedRequire;if(locales[name]===void 0&&typeof module<"u"&&module&&module.exports&&isLocaleNameSane(name))try{oldLocale=globalLocale._abbr,aliasedRequire=__require,aliasedRequire("./locale/"+name),getSetGlobalLocale(oldLocale)}catch(e){locales[name]=null}return locales[name]}function getSetGlobalLocale(key,values){var data;return key&&(isUndefined(values)?data=getLocale(key):data=defineLocale(key,values),data?globalLocale=data:typeof console<"u"&&console.warn&&console.warn("Locale "+key+" not found. Did you forget to load it?")),globalLocale._abbr}function defineLocale(name,config){if(config!==null){var locale2,parentConfig=baseConfig;if(config.abbr=name,locales[name]!=null)deprecateSimple("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),parentConfig=locales[name]._config;else if(config.parentLocale!=null)if(locales[config.parentLocale]!=null)parentConfig=locales[config.parentLocale]._config;else if(locale2=loadLocale(config.parentLocale),locale2!=null)parentConfig=locale2._config;else return localeFamilies[config.parentLocale]||(localeFamilies[config.parentLocale]=[]),localeFamilies[config.parentLocale].push({name,config}),null;return locales[name]=new Locale(mergeConfigs(parentConfig,config)),localeFamilies[name]&&localeFamilies[name].forEach(function(x){defineLocale(x.name,x.config)}),getSetGlobalLocale(name),locales[name]}else return delete locales[name],null}function updateLocale(name,config){if(config!=null){var locale2,tmpLocale,parentConfig=baseConfig;locales[name]!=null&&locales[name].parentLocale!=null?locales[name].set(mergeConfigs(locales[name]._config,config)):(tmpLocale=loadLocale(name),tmpLocale!=null&&(parentConfig=tmpLocale._config),config=mergeConfigs(parentConfig,config),tmpLocale==null&&(config.abbr=name),locale2=new Locale(config),locale2.parentLocale=locales[name],locales[name]=locale2),getSetGlobalLocale(name)}else locales[name]!=null&&(locales[name].parentLocale!=null?(locales[name]=locales[name].parentLocale,name===getSetGlobalLocale()&&getSetGlobalLocale(name)):locales[name]!=null&&delete locales[name]);return locales[name]}function getLocale(key){var locale2;if(key&&key._locale&&key._locale._abbr&&(key=key._locale._abbr),!key)return globalLocale;if(!isArray(key)){if(locale2=loadLocale(key),locale2)return locale2;key=[key]}return chooseLocale(key)}function listLocales(){return keys(locales)}function checkOverflow(m){var overflow,a=m._a;return a&&getParsingFlags(m).overflow===-2&&(overflow=a[MONTH]<0||a[MONTH]>11?MONTH:a[DATE]<1||a[DATE]>daysInMonth(a[YEAR],a[MONTH])?DATE:a[HOUR]<0||a[HOUR]>24||a[HOUR]===24&&(a[MINUTE]!==0||a[SECOND]!==0||a[MILLISECOND]!==0)?HOUR:a[MINUTE]<0||a[MINUTE]>59?MINUTE:a[SECOND]<0||a[SECOND]>59?SECOND:a[MILLISECOND]<0||a[MILLISECOND]>999?MILLISECOND:-1,getParsingFlags(m)._overflowDayOfYear&&(overflow<YEAR||overflow>DATE)&&(overflow=DATE),getParsingFlags(m)._overflowWeeks&&overflow===-1&&(overflow=WEEK),getParsingFlags(m)._overflowWeekday&&overflow===-1&&(overflow=WEEKDAY),getParsingFlags(m).overflow=overflow),m}var extendedIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,basicIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,tzRegex=/Z|[+-]\d\d(?::?\d\d)?/,isoDates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],isoTimes=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],aspNetJsonRegex=/^\/?Date\((-?\d+)/i,rfc2822=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,obsOffsets={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function configFromISO(config){var i,l,string=config._i,match=extendedIsoRegex.exec(string)||basicIsoRegex.exec(string),allowTime,dateFormat,timeFormat,tzFormat,isoDatesLen=isoDates.length,isoTimesLen=isoTimes.length;if(match){for(getParsingFlags(config).iso=!0,i=0,l=isoDatesLen;i<l;i++)if(isoDates[i][1].exec(match[1])){dateFormat=isoDates[i][0],allowTime=isoDates[i][2]!==!1;break}if(dateFormat==null){config._isValid=!1;return}if(match[3]){for(i=0,l=isoTimesLen;i<l;i++)if(isoTimes[i][1].exec(match[3])){timeFormat=(match[2]||" ")+isoTimes[i][0];break}if(timeFormat==null){config._isValid=!1;return}}if(!allowTime&&timeFormat!=null){config._isValid=!1;return}if(match[4])if(tzRegex.exec(match[4]))tzFormat="Z";else{config._isValid=!1;return}config._f=dateFormat+(timeFormat||"")+(tzFormat||""),configFromStringAndFormat(config)}else config._isValid=!1}function extractFromRFC2822Strings(yearStr,monthStr,dayStr,hourStr,minuteStr,secondStr){var result=[untruncateYear(yearStr),defaultLocaleMonthsShort.indexOf(monthStr),parseInt(dayStr,10),parseInt(hourStr,10),parseInt(minuteStr,10)];return secondStr&&result.push(parseInt(secondStr,10)),result}function untruncateYear(yearStr){var year=parseInt(yearStr,10);return year<=49?2e3+year:year<=999?1900+year:year}function preprocessRFC2822(s){return s.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function checkWeekday(weekdayStr,parsedInput,config){if(weekdayStr){var weekdayProvided=defaultLocaleWeekdaysShort.indexOf(weekdayStr),weekdayActual=new Date(parsedInput[0],parsedInput[1],parsedInput[2]).getDay();if(weekdayProvided!==weekdayActual)return getParsingFlags(config).weekdayMismatch=!0,config._isValid=!1,!1}return!0}function calculateOffset(obsOffset,militaryOffset,numOffset){if(obsOffset)return obsOffsets[obsOffset];if(militaryOffset)return 0;var hm=parseInt(numOffset,10),m=hm%100,h=(hm-m)/100;return h*60+m}function configFromRFC2822(config){var match=rfc2822.exec(preprocessRFC2822(config._i)),parsedArray;if(match){if(parsedArray=extractFromRFC2822Strings(match[4],match[3],match[2],match[5],match[6],match[7]),!checkWeekday(match[1],parsedArray,config))return;config._a=parsedArray,config._tzm=calculateOffset(match[8],match[9],match[10]),config._d=createUTCDate.apply(null,config._a),config._d.setUTCMinutes(config._d.getUTCMinutes()-config._tzm),getParsingFlags(config).rfc2822=!0}else config._isValid=!1}function configFromString(config){var matched=aspNetJsonRegex.exec(config._i);if(matched!==null){config._d=new Date(+matched[1]);return}if(configFromISO(config),config._isValid===!1)delete config._isValid;else return;if(configFromRFC2822(config),config._isValid===!1)delete config._isValid;else return;config._strict?config._isValid=!1:hooks.createFromInputFallback(config)}hooks.createFromInputFallback=deprecate("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(config){config._d=new Date(config._i+(config._useUTC?" UTC":""))});function defaults(a,b,c){return a!=null?a:b!=null?b:c}function currentDateArray(config){var nowValue=new Date(hooks.now());return config._useUTC?[nowValue.getUTCFullYear(),nowValue.getUTCMonth(),nowValue.getUTCDate()]:[nowValue.getFullYear(),nowValue.getMonth(),nowValue.getDate()]}function configFromArray(config){var i,date,input=[],currentDate,expectedWeekday,yearToUse;if(!config._d){for(currentDate=currentDateArray(config),config._w&&config._a[DATE]==null&&config._a[MONTH]==null&&dayOfYearFromWeekInfo(config),config._dayOfYear!=null&&(yearToUse=defaults(config._a[YEAR],currentDate[YEAR]),(config._dayOfYear>daysInYear(yearToUse)||config._dayOfYear===0)&&(getParsingFlags(config)._overflowDayOfYear=!0),date=createUTCDate(yearToUse,0,config._dayOfYear),config._a[MONTH]=date.getUTCMonth(),config._a[DATE]=date.getUTCDate()),i=0;i<3&&config._a[i]==null;++i)config._a[i]=input[i]=currentDate[i];for(;i<7;i++)config._a[i]=input[i]=config._a[i]==null?i===2?1:0:config._a[i];config._a[HOUR]===24&&config._a[MINUTE]===0&&config._a[SECOND]===0&&config._a[MILLISECOND]===0&&(config._nextDay=!0,config._a[HOUR]=0),config._d=(config._useUTC?createUTCDate:createDate).apply(null,input),expectedWeekday=config._useUTC?config._d.getUTCDay():config._d.getDay(),config._tzm!=null&&config._d.setUTCMinutes(config._d.getUTCMinutes()-config._tzm),config._nextDay&&(config._a[HOUR]=24),config._w&&typeof config._w.d<"u"&&config._w.d!==expectedWeekday&&(getParsingFlags(config).weekdayMismatch=!0)}}function dayOfYearFromWeekInfo(config){var w,weekYear,week,weekday,dow,doy,temp,weekdayOverflow,curWeek;w=config._w,w.GG!=null||w.W!=null||w.E!=null?(dow=1,doy=4,weekYear=defaults(w.GG,config._a[YEAR],weekOfYear(createLocal(),1,4).year),week=defaults(w.W,1),weekday=defaults(w.E,1),(weekday<1||weekday>7)&&(weekdayOverflow=!0)):(dow=config._locale._week.dow,doy=config._locale._week.doy,curWeek=weekOfYear(createLocal(),dow,doy),weekYear=defaults(w.gg,config._a[YEAR],curWeek.year),week=defaults(w.w,curWeek.week),w.d!=null?(weekday=w.d,(weekday<0||weekday>6)&&(weekdayOverflow=!0)):w.e!=null?(weekday=w.e+dow,(w.e<0||w.e>6)&&(weekdayOverflow=!0)):weekday=dow),week<1||week>weeksInYear(weekYear,dow,doy)?getParsingFlags(config)._overflowWeeks=!0:weekdayOverflow!=null?getParsingFlags(config)._overflowWeekday=!0:(temp=dayOfYearFromWeeks(weekYear,week,weekday,dow,doy),config._a[YEAR]=temp.year,config._dayOfYear=temp.dayOfYear)}hooks.ISO_8601=function(){},hooks.RFC_2822=function(){};function configFromStringAndFormat(config){if(config._f===hooks.ISO_8601){configFromISO(config);return}if(config._f===hooks.RFC_2822){configFromRFC2822(config);return}config._a=[],getParsingFlags(config).empty=!0;var string=""+config._i,i,parsedInput,tokens2,token2,skipped,stringLength=string.length,totalParsedInputLength=0,era,tokenLen;for(tokens2=expandFormat(config._f,config._locale).match(formattingTokens)||[],tokenLen=tokens2.length,i=0;i<tokenLen;i++)token2=tokens2[i],parsedInput=(string.match(getParseRegexForToken(token2,config))||[])[0],parsedInput&&(skipped=string.substr(0,string.indexOf(parsedInput)),skipped.length>0&&getParsingFlags(config).unusedInput.push(skipped),string=string.slice(string.indexOf(parsedInput)+parsedInput.length),totalParsedInputLength+=parsedInput.length),formatTokenFunctions[token2]?(parsedInput?getParsingFlags(config).empty=!1:getParsingFlags(config).unusedTokens.push(token2),addTimeToArrayFromToken(token2,parsedInput,config)):config._strict&&!parsedInput&&getParsingFlags(config).unusedTokens.push(token2);getParsingFlags(config).charsLeftOver=stringLength-totalParsedInputLength,string.length>0&&getParsingFlags(config).unusedInput.push(string),config._a[HOUR]<=12&&getParsingFlags(config).bigHour===!0&&config._a[HOUR]>0&&(getParsingFlags(config).bigHour=void 0),getParsingFlags(config).parsedDateParts=config._a.slice(0),getParsingFlags(config).meridiem=config._meridiem,config._a[HOUR]=meridiemFixWrap(config._locale,config._a[HOUR],config._meridiem),era=getParsingFlags(config).era,era!==null&&(config._a[YEAR]=config._locale.erasConvertYear(era,config._a[YEAR])),configFromArray(config),checkOverflow(config)}function meridiemFixWrap(locale2,hour,meridiem2){var isPm;return meridiem2==null?hour:locale2.meridiemHour!=null?locale2.meridiemHour(hour,meridiem2):(locale2.isPM!=null&&(isPm=locale2.isPM(meridiem2),isPm&&hour<12&&(hour+=12),!isPm&&hour===12&&(hour=0)),hour)}function configFromStringAndArray(config){var tempConfig,bestMoment,scoreToBeat,i,currentScore,validFormatFound,bestFormatIsValid=!1,configfLen=config._f.length;if(configfLen===0){getParsingFlags(config).invalidFormat=!0,config._d=new Date(NaN);return}for(i=0;i<configfLen;i++)currentScore=0,validFormatFound=!1,tempConfig=copyConfig({},config),config._useUTC!=null&&(tempConfig._useUTC=config._useUTC),tempConfig._f=config._f[i],configFromStringAndFormat(tempConfig),isValid(tempConfig)&&(validFormatFound=!0),currentScore+=getParsingFlags(tempConfig).charsLeftOver,currentScore+=getParsingFlags(tempConfig).unusedTokens.length*10,getParsingFlags(tempConfig).score=currentScore,bestFormatIsValid?currentScore<scoreToBeat&&(scoreToBeat=currentScore,bestMoment=tempConfig):(scoreToBeat==null||currentScore<scoreToBeat||validFormatFound)&&(scoreToBeat=currentScore,bestMoment=tempConfig,validFormatFound&&(bestFormatIsValid=!0));extend(config,bestMoment||tempConfig)}function configFromObject(config){if(!config._d){var i=normalizeObjectUnits(config._i),dayOrDate=i.day===void 0?i.date:i.day;config._a=map([i.year,i.month,dayOrDate,i.hour,i.minute,i.second,i.millisecond],function(obj){return obj&&parseInt(obj,10)}),configFromArray(config)}}function createFromConfig(config){var res=new Moment(checkOverflow(prepareConfig(config)));return res._nextDay&&(res.add(1,"d"),res._nextDay=void 0),res}function prepareConfig(config){var input=config._i,format2=config._f;return config._locale=config._locale||getLocale(config._l),input===null||format2===void 0&&input===""?createInvalid({nullInput:!0}):(typeof input=="string"&&(config._i=input=config._locale.preparse(input)),isMoment(input)?new Moment(checkOverflow(input)):(isDate(input)?config._d=input:isArray(format2)?configFromStringAndArray(config):format2?configFromStringAndFormat(config):configFromInput(config),isValid(config)||(config._d=null),config))}function configFromInput(config){var input=config._i;isUndefined(input)?config._d=new Date(hooks.now()):isDate(input)?config._d=new Date(input.valueOf()):typeof input=="string"?configFromString(config):isArray(input)?(config._a=map(input.slice(0),function(obj){return parseInt(obj,10)}),configFromArray(config)):isObject(input)?configFromObject(config):isNumber(input)?config._d=new Date(input):hooks.createFromInputFallback(config)}function createLocalOrUTC(input,format2,locale2,strict,isUTC){var c={};return(format2===!0||format2===!1)&&(strict=format2,format2=void 0),(locale2===!0||locale2===!1)&&(strict=locale2,locale2=void 0),(isObject(input)&&isObjectEmpty(input)||isArray(input)&&input.length===0)&&(input=void 0),c._isAMomentObject=!0,c._useUTC=c._isUTC=isUTC,c._l=locale2,c._i=input,c._f=format2,c._strict=strict,createFromConfig(c)}function createLocal(input,format2,locale2,strict){return createLocalOrUTC(input,format2,locale2,strict,!1)}var prototypeMin=deprecate("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var other=createLocal.apply(null,arguments);return this.isValid()&&other.isValid()?other<this?this:other:createInvalid()}),prototypeMax=deprecate("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var other=createLocal.apply(null,arguments);return this.isValid()&&other.isValid()?other>this?this:other:createInvalid()});function pickBy(fn,moments){var res,i;if(moments.length===1&&isArray(moments[0])&&(moments=moments[0]),!moments.length)return createLocal();for(res=moments[0],i=1;i<moments.length;++i)(!moments[i].isValid()||moments[i][fn](res))&&(res=moments[i]);return res}function min(){var args=[].slice.call(arguments,0);return pickBy("isBefore",args)}function max(){var args=[].slice.call(arguments,0);return pickBy("isAfter",args)}var now=function(){return Date.now?Date.now():+new Date},ordering=["year","quarter","month","week","day","hour","minute","second","millisecond"];function isDurationValid(m){var key,unitHasDecimal=!1,i,orderLen=ordering.length;for(key in m)if(hasOwnProp(m,key)&&!(indexOf.call(ordering,key)!==-1&&(m[key]==null||!isNaN(m[key]))))return!1;for(i=0;i<orderLen;++i)if(m[ordering[i]]){if(unitHasDecimal)return!1;parseFloat(m[ordering[i]])!==toInt(m[ordering[i]])&&(unitHasDecimal=!0)}return!0}function isValid$1(){return this._isValid}function createInvalid$1(){return createDuration(NaN)}function Duration(duration){var normalizedInput=normalizeObjectUnits(duration),years2=normalizedInput.year||0,quarters=normalizedInput.quarter||0,months2=normalizedInput.month||0,weeks2=normalizedInput.week||normalizedInput.isoWeek||0,days2=normalizedInput.day||0,hours2=normalizedInput.hour||0,minutes2=normalizedInput.minute||0,seconds2=normalizedInput.second||0,milliseconds2=normalizedInput.millisecond||0;this._isValid=isDurationValid(normalizedInput),this._milliseconds=+milliseconds2+seconds2*1e3+minutes2*6e4+hours2*1e3*60*60,this._days=+days2+weeks2*7,this._months=+months2+quarters*3+years2*12,this._data={},this._locale=getLocale(),this._bubble()}function isDuration(obj){return obj instanceof Duration}function absRound(number){return number<0?Math.round(-1*number)*-1:Math.round(number)}function compareArrays(array1,array2,dontConvert){var len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0,i;for(i=0;i<len;i++)(dontConvert&&array1[i]!==array2[i]||!dontConvert&&toInt(array1[i])!==toInt(array2[i]))&&diffs++;return diffs+lengthDiff}function offset(token2,separator){addFormatToken(token2,0,0,function(){var offset2=this.utcOffset(),sign2="+";return offset2<0&&(offset2=-offset2,sign2="-"),sign2+zeroFill(~~(offset2/60),2)+separator+zeroFill(~~offset2%60,2)})}offset("Z",":"),offset("ZZ",""),addRegexToken("Z",matchShortOffset),addRegexToken("ZZ",matchShortOffset),addParseToken(["Z","ZZ"],function(input,array,config){config._useUTC=!0,config._tzm=offsetFromString(matchShortOffset,input)});var chunkOffset=/([\+\-]|\d\d)/gi;function offsetFromString(matcher,string){var matches=(string||"").match(matcher),chunk,parts,minutes2;return matches===null?null:(chunk=matches[matches.length-1]||[],parts=(chunk+"").match(chunkOffset)||["-",0,0],minutes2=+(parts[1]*60)+toInt(parts[2]),minutes2===0?0:parts[0]==="+"?minutes2:-minutes2)}function cloneWithOffset(input,model){var res,diff2;return model._isUTC?(res=model.clone(),diff2=(isMoment(input)||isDate(input)?input.valueOf():createLocal(input).valueOf())-res.valueOf(),res._d.setTime(res._d.valueOf()+diff2),hooks.updateOffset(res,!1),res):createLocal(input).local()}function getDateOffset(m){return-Math.round(m._d.getTimezoneOffset())}hooks.updateOffset=function(){};function getSetOffset(input,keepLocalTime,keepMinutes){var offset2=this._offset||0,localAdjust;if(!this.isValid())return input!=null?this:NaN;if(input!=null){if(typeof input=="string"){if(input=offsetFromString(matchShortOffset,input),input===null)return this}else Math.abs(input)<16&&!keepMinutes&&(input=input*60);return!this._isUTC&&keepLocalTime&&(localAdjust=getDateOffset(this)),this._offset=input,this._isUTC=!0,localAdjust!=null&&this.add(localAdjust,"m"),offset2!==input&&(!keepLocalTime||this._changeInProgress?addSubtract(this,createDuration(input-offset2,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,hooks.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?offset2:getDateOffset(this)}function getSetZone(input,keepLocalTime){return input!=null?(typeof input!="string"&&(input=-input),this.utcOffset(input,keepLocalTime),this):-this.utcOffset()}function setOffsetToUTC(keepLocalTime){return this.utcOffset(0,keepLocalTime)}function setOffsetToLocal(keepLocalTime){return this._isUTC&&(this.utcOffset(0,keepLocalTime),this._isUTC=!1,keepLocalTime&&this.subtract(getDateOffset(this),"m")),this}function setOffsetToParsedOffset(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var tZone=offsetFromString(matchOffset,this._i);tZone!=null?this.utcOffset(tZone):this.utcOffset(0,!0)}return this}function hasAlignedHourOffset(input){return this.isValid()?(input=input?createLocal(input).utcOffset():0,(this.utcOffset()-input)%60===0):!1}function isDaylightSavingTime(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function isDaylightSavingTimeShifted(){if(!isUndefined(this._isDSTShifted))return this._isDSTShifted;var c={},other;return copyConfig(c,this),c=prepareConfig(c),c._a?(other=c._isUTC?createUTC(c._a):createLocal(c._a),this._isDSTShifted=this.isValid()&&compareArrays(c._a,other.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function isLocal(){return this.isValid()?!this._isUTC:!1}function isUtcOffset(){return this.isValid()?this._isUTC:!1}function isUtc(){return this.isValid()?this._isUTC&&this._offset===0:!1}var aspNetRegex=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,isoRegex=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function createDuration(input,key){var duration=input,match=null,sign2,ret,diffRes;return isDuration(input)?duration={ms:input._milliseconds,d:input._days,M:input._months}:isNumber(input)||!isNaN(+input)?(duration={},key?duration[key]=+input:duration.milliseconds=+input):(match=aspNetRegex.exec(input))?(sign2=match[1]==="-"?-1:1,duration={y:0,d:toInt(match[DATE])*sign2,h:toInt(match[HOUR])*sign2,m:toInt(match[MINUTE])*sign2,s:toInt(match[SECOND])*sign2,ms:toInt(absRound(match[MILLISECOND]*1e3))*sign2}):(match=isoRegex.exec(input))?(sign2=match[1]==="-"?-1:1,duration={y:parseIso(match[2],sign2),M:parseIso(match[3],sign2),w:parseIso(match[4],sign2),d:parseIso(match[5],sign2),h:parseIso(match[6],sign2),m:parseIso(match[7],sign2),s:parseIso(match[8],sign2)}):duration==null?duration={}:typeof duration=="object"&&("from"in duration||"to"in duration)&&(diffRes=momentsDifference(createLocal(duration.from),createLocal(duration.to)),duration={},duration.ms=diffRes.milliseconds,duration.M=diffRes.months),ret=new Duration(duration),isDuration(input)&&hasOwnProp(input,"_locale")&&(ret._locale=input._locale),isDuration(input)&&hasOwnProp(input,"_isValid")&&(ret._isValid=input._isValid),ret}createDuration.fn=Duration.prototype,createDuration.invalid=createInvalid$1;function parseIso(inp,sign2){var res=inp&&parseFloat(inp.replace(",","."));return(isNaN(res)?0:res)*sign2}function positiveMomentsDifference(base,other){var res={};return res.months=other.month()-base.month()+(other.year()-base.year())*12,base.clone().add(res.months,"M").isAfter(other)&&--res.months,res.milliseconds=+other-+base.clone().add(res.months,"M"),res}function momentsDifference(base,other){var res;return base.isValid()&&other.isValid()?(other=cloneWithOffset(other,base),base.isBefore(other)?res=positiveMomentsDifference(base,other):(res=positiveMomentsDifference(other,base),res.milliseconds=-res.milliseconds,res.months=-res.months),res):{milliseconds:0,months:0}}function createAdder(direction,name){return function(val,period){var dur,tmp;return period!==null&&!isNaN(+period)&&(deprecateSimple(name,"moment()."+name+"(period, number) is deprecated. Please use moment()."+name+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),tmp=val,val=period,period=tmp),dur=createDuration(val,period),addSubtract(this,dur,direction),this}}function addSubtract(mom,duration,isAdding,updateOffset){var milliseconds2=duration._milliseconds,days2=absRound(duration._days),months2=absRound(duration._months);mom.isValid()&&(updateOffset=updateOffset==null?!0:updateOffset,months2&&setMonth(mom,get(mom,"Month")+months2*isAdding),days2&&set$1(mom,"Date",get(mom,"Date")+days2*isAdding),milliseconds2&&mom._d.setTime(mom._d.valueOf()+milliseconds2*isAdding),updateOffset&&hooks.updateOffset(mom,days2||months2))}var add=createAdder(1,"add"),subtract=createAdder(-1,"subtract");function isString(input){return typeof input=="string"||input instanceof String}function isMomentInput(input){return isMoment(input)||isDate(input)||isString(input)||isNumber(input)||isNumberOrStringArray(input)||isMomentInputObject(input)||input===null||input===void 0}function isMomentInputObject(input){var objectTest=isObject(input)&&!isObjectEmpty(input),propertyTest=!1,properties=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],i,property,propertyLen=properties.length;for(i=0;i<propertyLen;i+=1)property=properties[i],propertyTest=propertyTest||hasOwnProp(input,property);return objectTest&&propertyTest}function isNumberOrStringArray(input){var arrayTest=isArray(input),dataTypeTest=!1;return arrayTest&&(dataTypeTest=input.filter(function(item){return!isNumber(item)&&isString(input)}).length===0),arrayTest&&dataTypeTest}function isCalendarSpec(input){var objectTest=isObject(input)&&!isObjectEmpty(input),propertyTest=!1,properties=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],i,property;for(i=0;i<properties.length;i+=1)property=properties[i],propertyTest=propertyTest||hasOwnProp(input,property);return objectTest&&propertyTest}function getCalendarFormat(myMoment,now2){var diff2=myMoment.diff(now2,"days",!0);return diff2<-6?"sameElse":diff2<-1?"lastWeek":diff2<0?"lastDay":diff2<1?"sameDay":diff2<2?"nextDay":diff2<7?"nextWeek":"sameElse"}function calendar$1(time,formats){arguments.length===1&&(arguments[0]?isMomentInput(arguments[0])?(time=arguments[0],formats=void 0):isCalendarSpec(arguments[0])&&(formats=arguments[0],time=void 0):(time=void 0,formats=void 0));var now2=time||createLocal(),sod=cloneWithOffset(now2,this).startOf("day"),format2=hooks.calendarFormat(this,sod)||"sameElse",output=formats&&(isFunction(formats[format2])?formats[format2].call(this,now2):formats[format2]);return this.format(output||this.localeData().calendar(format2,this,createLocal(now2)))}function clone(){return new Moment(this)}function isAfter(input,units){var localInput=isMoment(input)?input:createLocal(input);return this.isValid()&&localInput.isValid()?(units=normalizeUnits(units)||"millisecond",units==="millisecond"?this.valueOf()>localInput.valueOf():localInput.valueOf()<this.clone().startOf(units).valueOf()):!1}function isBefore(input,units){var localInput=isMoment(input)?input:createLocal(input);return this.isValid()&&localInput.isValid()?(units=normalizeUnits(units)||"millisecond",units==="millisecond"?this.valueOf()<localInput.valueOf():this.clone().endOf(units).valueOf()<localInput.valueOf()):!1}function isBetween(from3,to2,units,inclusivity){var localFrom=isMoment(from3)?from3:createLocal(from3),localTo=isMoment(to2)?to2:createLocal(to2);return this.isValid()&&localFrom.isValid()&&localTo.isValid()?(inclusivity=inclusivity||"()",(inclusivity[0]==="("?this.isAfter(localFrom,units):!this.isBefore(localFrom,units))&&(inclusivity[1]===")"?this.isBefore(localTo,units):!this.isAfter(localTo,units))):!1}function isSame(input,units){var localInput=isMoment(input)?input:createLocal(input),inputMs;return this.isValid()&&localInput.isValid()?(units=normalizeUnits(units)||"millisecond",units==="millisecond"?this.valueOf()===localInput.valueOf():(inputMs=localInput.valueOf(),this.clone().startOf(units).valueOf()<=inputMs&&inputMs<=this.clone().endOf(units).valueOf())):!1}function isSameOrAfter(input,units){return this.isSame(input,units)||this.isAfter(input,units)}function isSameOrBefore(input,units){return this.isSame(input,units)||this.isBefore(input,units)}function diff(input,units,asFloat){var that,zoneDelta,output;if(!this.isValid())return NaN;if(that=cloneWithOffset(input,this),!that.isValid())return NaN;switch(zoneDelta=(that.utcOffset()-this.utcOffset())*6e4,units=normalizeUnits(units),units){case"year":output=monthDiff(this,that)/12;break;case"month":output=monthDiff(this,that);break;case"quarter":output=monthDiff(this,that)/3;break;case"second":output=(this-that)/1e3;break;case"minute":output=(this-that)/6e4;break;case"hour":output=(this-that)/36e5;break;case"day":output=(this-that-zoneDelta)/864e5;break;case"week":output=(this-that-zoneDelta)/6048e5;break;default:output=this-that}return asFloat?output:absFloor(output)}function monthDiff(a,b){if(a.date()<b.date())return-monthDiff(b,a);var wholeMonthDiff=(b.year()-a.year())*12+(b.month()-a.month()),anchor=a.clone().add(wholeMonthDiff,"months"),anchor2,adjust;return b-anchor<0?(anchor2=a.clone().add(wholeMonthDiff-1,"months"),adjust=(b-anchor)/(anchor-anchor2)):(anchor2=a.clone().add(wholeMonthDiff+1,"months"),adjust=(b-anchor)/(anchor2-anchor)),-(wholeMonthDiff+adjust)||0}hooks.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",hooks.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function toString(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function toISOString(keepOffset){if(!this.isValid())return null;var utc=keepOffset!==!0,m=utc?this.clone().utc():this;return m.year()<0||m.year()>9999?formatMoment(m,utc?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):isFunction(Date.prototype.toISOString)?utc?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",formatMoment(m,"Z")):formatMoment(m,utc?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function inspect(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var func="moment",zone="",prefix,year,datetime,suffix;return this.isLocal()||(func=this.utcOffset()===0?"moment.utc":"moment.parseZone",zone="Z"),prefix="["+func+'("]',year=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",datetime="-MM-DD[T]HH:mm:ss.SSS",suffix=zone+'[")]',this.format(prefix+year+datetime+suffix)}function format(inputString){inputString||(inputString=this.isUtc()?hooks.defaultFormatUtc:hooks.defaultFormat);var output=formatMoment(this,inputString);return this.localeData().postformat(output)}function from2(time,withoutSuffix){return this.isValid()&&(isMoment(time)&&time.isValid()||createLocal(time).isValid())?createDuration({to:this,from:time}).locale(this.locale()).humanize(!withoutSuffix):this.localeData().invalidDate()}function fromNow(withoutSuffix){return this.from(createLocal(),withoutSuffix)}function to(time,withoutSuffix){return this.isValid()&&(isMoment(time)&&time.isValid()||createLocal(time).isValid())?createDuration({from:this,to:time}).locale(this.locale()).humanize(!withoutSuffix):this.localeData().invalidDate()}function toNow(withoutSuffix){return this.to(createLocal(),withoutSuffix)}function locale(key){var newLocaleData;return key===void 0?this._locale._abbr:(newLocaleData=getLocale(key),newLocaleData!=null&&(this._locale=newLocaleData),this)}var lang=deprecate("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(key){return key===void 0?this.localeData():this.locale(key)});function localeData(){return this._locale}var MS_PER_SECOND=1e3,MS_PER_MINUTE=60*MS_PER_SECOND,MS_PER_HOUR=60*MS_PER_MINUTE,MS_PER_400_YEARS=(365*400+97)*24*MS_PER_HOUR;function mod$1(dividend,divisor){return(dividend%divisor+divisor)%divisor}function localStartOfDate(y,m,d){return y<100&&y>=0?new Date(y+400,m,d)-MS_PER_400_YEARS:new Date(y,m,d).valueOf()}function utcStartOfDate(y,m,d){return y<100&&y>=0?Date.UTC(y+400,m,d)-MS_PER_400_YEARS:Date.UTC(y,m,d)}function startOf(units){var time,startOfDate;if(units=normalizeUnits(units),units===void 0||units==="millisecond"||!this.isValid())return this;switch(startOfDate=this._isUTC?utcStartOfDate:localStartOfDate,units){case"year":time=startOfDate(this.year(),0,1);break;case"quarter":time=startOfDate(this.year(),this.month()-this.month()%3,1);break;case"month":time=startOfDate(this.year(),this.month(),1);break;case"week":time=startOfDate(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":time=startOfDate(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":time=startOfDate(this.year(),this.month(),this.date());break;case"hour":time=this._d.valueOf(),time-=mod$1(time+(this._isUTC?0:this.utcOffset()*MS_PER_MINUTE),MS_PER_HOUR);break;case"minute":time=this._d.valueOf(),time-=mod$1(time,MS_PER_MINUTE);break;case"second":time=this._d.valueOf(),time-=mod$1(time,MS_PER_SECOND);break}return this._d.setTime(time),hooks.updateOffset(this,!0),this}function endOf(units){var time,startOfDate;if(units=normalizeUnits(units),units===void 0||units==="millisecond"||!this.isValid())return this;switch(startOfDate=this._isUTC?utcStartOfDate:localStartOfDate,units){case"year":time=startOfDate(this.year()+1,0,1)-1;break;case"quarter":time=startOfDate(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":time=startOfDate(this.year(),this.month()+1,1)-1;break;case"week":time=startOfDate(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":time=startOfDate(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":time=startOfDate(this.year(),this.month(),this.date()+1)-1;break;case"hour":time=this._d.valueOf(),time+=MS_PER_HOUR-mod$1(time+(this._isUTC?0:this.utcOffset()*MS_PER_MINUTE),MS_PER_HOUR)-1;break;case"minute":time=this._d.valueOf(),time+=MS_PER_MINUTE-mod$1(time,MS_PER_MINUTE)-1;break;case"second":time=this._d.valueOf(),time+=MS_PER_SECOND-mod$1(time,MS_PER_SECOND)-1;break}return this._d.setTime(time),hooks.updateOffset(this,!0),this}function valueOf(){return this._d.valueOf()-(this._offset||0)*6e4}function unix(){return Math.floor(this.valueOf()/1e3)}function toDate(){return new Date(this.valueOf())}function toArray(){var m=this;return[m.year(),m.month(),m.date(),m.hour(),m.minute(),m.second(),m.millisecond()]}function toObject(){var m=this;return{years:m.year(),months:m.month(),date:m.date(),hours:m.hours(),minutes:m.minutes(),seconds:m.seconds(),milliseconds:m.milliseconds()}}function toJSON(){return this.isValid()?this.toISOString():null}function isValid$2(){return isValid(this)}function parsingFlags(){return extend({},getParsingFlags(this))}function invalidAt(){return getParsingFlags(this).overflow}function creationData(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}addFormatToken("N",0,0,"eraAbbr"),addFormatToken("NN",0,0,"eraAbbr"),addFormatToken("NNN",0,0,"eraAbbr"),addFormatToken("NNNN",0,0,"eraName"),addFormatToken("NNNNN",0,0,"eraNarrow"),addFormatToken("y",["y",1],"yo","eraYear"),addFormatToken("y",["yy",2],0,"eraYear"),addFormatToken("y",["yyy",3],0,"eraYear"),addFormatToken("y",["yyyy",4],0,"eraYear"),addRegexToken("N",matchEraAbbr),addRegexToken("NN",matchEraAbbr),addRegexToken("NNN",matchEraAbbr),addRegexToken("NNNN",matchEraName),addRegexToken("NNNNN",matchEraNarrow),addParseToken(["N","NN","NNN","NNNN","NNNNN"],function(input,array,config,token2){var era=config._locale.erasParse(input,token2,config._strict);era?getParsingFlags(config).era=era:getParsingFlags(config).invalidEra=input}),addRegexToken("y",matchUnsigned),addRegexToken("yy",matchUnsigned),addRegexToken("yyy",matchUnsigned),addRegexToken("yyyy",matchUnsigned),addRegexToken("yo",matchEraYearOrdinal),addParseToken(["y","yy","yyy","yyyy"],YEAR),addParseToken(["yo"],function(input,array,config,token2){var match;config._locale._eraYearOrdinalRegex&&(match=input.match(config._locale._eraYearOrdinalRegex)),config._locale.eraYearOrdinalParse?array[YEAR]=config._locale.eraYearOrdinalParse(input,match):array[YEAR]=parseInt(input,10)});function localeEras(m,format2){var i,l,date,eras=this._eras||getLocale("en")._eras;for(i=0,l=eras.length;i<l;++i){switch(typeof eras[i].since){case"string":date=hooks(eras[i].since).startOf("day"),eras[i].since=date.valueOf();break}switch(typeof eras[i].until){case"undefined":eras[i].until=1/0;break;case"string":date=hooks(eras[i].until).startOf("day").valueOf(),eras[i].until=date.valueOf();break}}return eras}function localeErasParse(eraName,format2,strict){var i,l,eras=this.eras(),name,abbr,narrow;for(eraName=eraName.toUpperCase(),i=0,l=eras.length;i<l;++i)if(name=eras[i].name.toUpperCase(),abbr=eras[i].abbr.toUpperCase(),narrow=eras[i].narrow.toUpperCase(),strict)switch(format2){case"N":case"NN":case"NNN":if(abbr===eraName)return eras[i];break;case"NNNN":if(name===eraName)return eras[i];break;case"NNNNN":if(narrow===eraName)return eras[i];break}else if([name,abbr,narrow].indexOf(eraName)>=0)return eras[i]}function localeErasConvertYear(era,year){var dir=era.since<=era.until?1:-1;return year===void 0?hooks(era.since).year():hooks(era.since).year()+(year-era.offset)*dir}function getEraName(){var i,l,val,eras=this.localeData().eras();for(i=0,l=eras.length;i<l;++i)if(val=this.clone().startOf("day").valueOf(),eras[i].since<=val&&val<=eras[i].until||eras[i].until<=val&&val<=eras[i].since)return eras[i].name;return""}function getEraNarrow(){var i,l,val,eras=this.localeData().eras();for(i=0,l=eras.length;i<l;++i)if(val=this.clone().startOf("day").valueOf(),eras[i].since<=val&&val<=eras[i].until||eras[i].until<=val&&val<=eras[i].since)return eras[i].narrow;return""}function getEraAbbr(){var i,l,val,eras=this.localeData().eras();for(i=0,l=eras.length;i<l;++i)if(val=this.clone().startOf("day").valueOf(),eras[i].since<=val&&val<=eras[i].until||eras[i].until<=val&&val<=eras[i].since)return eras[i].abbr;return""}function getEraYear(){var i,l,dir,val,eras=this.localeData().eras();for(i=0,l=eras.length;i<l;++i)if(dir=eras[i].since<=eras[i].until?1:-1,val=this.clone().startOf("day").valueOf(),eras[i].since<=val&&val<=eras[i].until||eras[i].until<=val&&val<=eras[i].since)return(this.year()-hooks(eras[i].since).year())*dir+eras[i].offset;return this.year()}function erasNameRegex(isStrict){return hasOwnProp(this,"_erasNameRegex")||computeErasParse.call(this),isStrict?this._erasNameRegex:this._erasRegex}function erasAbbrRegex(isStrict){return hasOwnProp(this,"_erasAbbrRegex")||computeErasParse.call(this),isStrict?this._erasAbbrRegex:this._erasRegex}function erasNarrowRegex(isStrict){return hasOwnProp(this,"_erasNarrowRegex")||computeErasParse.call(this),isStrict?this._erasNarrowRegex:this._erasRegex}function matchEraAbbr(isStrict,locale2){return locale2.erasAbbrRegex(isStrict)}function matchEraName(isStrict,locale2){return locale2.erasNameRegex(isStrict)}function matchEraNarrow(isStrict,locale2){return locale2.erasNarrowRegex(isStrict)}function matchEraYearOrdinal(isStrict,locale2){return locale2._eraYearOrdinalRegex||matchUnsigned}function computeErasParse(){var abbrPieces=[],namePieces=[],narrowPieces=[],mixedPieces=[],i,l,eras=this.eras();for(i=0,l=eras.length;i<l;++i)namePieces.push(regexEscape(eras[i].name)),abbrPieces.push(regexEscape(eras[i].abbr)),narrowPieces.push(regexEscape(eras[i].narrow)),mixedPieces.push(regexEscape(eras[i].name)),mixedPieces.push(regexEscape(eras[i].abbr)),mixedPieces.push(regexEscape(eras[i].narrow));this._erasRegex=new RegExp("^("+mixedPieces.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+namePieces.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+abbrPieces.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+narrowPieces.join("|")+")","i")}addFormatToken(0,["gg",2],0,function(){return this.weekYear()%100}),addFormatToken(0,["GG",2],0,function(){return this.isoWeekYear()%100});function addWeekYearFormatToken(token2,getter){addFormatToken(0,[token2,token2.length],0,getter)}addWeekYearFormatToken("gggg","weekYear"),addWeekYearFormatToken("ggggg","weekYear"),addWeekYearFormatToken("GGGG","isoWeekYear"),addWeekYearFormatToken("GGGGG","isoWeekYear"),addUnitAlias("weekYear","gg"),addUnitAlias("isoWeekYear","GG"),addUnitPriority("weekYear",1),addUnitPriority("isoWeekYear",1),addRegexToken("G",matchSigned),addRegexToken("g",matchSigned),addRegexToken("GG",match1to2,match2),addRegexToken("gg",match1to2,match2),addRegexToken("GGGG",match1to4,match4),addRegexToken("gggg",match1to4,match4),addRegexToken("GGGGG",match1to6,match6),addRegexToken("ggggg",match1to6,match6),addWeekParseToken(["gggg","ggggg","GGGG","GGGGG"],function(input,week,config,token2){week[token2.substr(0,2)]=toInt(input)}),addWeekParseToken(["gg","GG"],function(input,week,config,token2){week[token2]=hooks.parseTwoDigitYear(input)});function getSetWeekYear(input){return getSetWeekYearHelper.call(this,input,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function getSetISOWeekYear(input){return getSetWeekYearHelper.call(this,input,this.isoWeek(),this.isoWeekday(),1,4)}function getISOWeeksInYear(){return weeksInYear(this.year(),1,4)}function getISOWeeksInISOWeekYear(){return weeksInYear(this.isoWeekYear(),1,4)}function getWeeksInYear(){var weekInfo=this.localeData()._week;return weeksInYear(this.year(),weekInfo.dow,weekInfo.doy)}function getWeeksInWeekYear(){var weekInfo=this.localeData()._week;return weeksInYear(this.weekYear(),weekInfo.dow,weekInfo.doy)}function getSetWeekYearHelper(input,week,weekday,dow,doy){var weeksTarget;return input==null?weekOfYear(this,dow,doy).year:(weeksTarget=weeksInYear(input,dow,doy),week>weeksTarget&&(week=weeksTarget),setWeekAll.call(this,input,week,weekday,dow,doy))}function setWeekAll(weekYear,week,weekday,dow,doy){var dayOfYearData=dayOfYearFromWeeks(weekYear,week,weekday,dow,doy),date=createUTCDate(dayOfYearData.year,0,dayOfYearData.dayOfYear);return this.year(date.getUTCFullYear()),this.month(date.getUTCMonth()),this.date(date.getUTCDate()),this}addFormatToken("Q",0,"Qo","quarter"),addUnitAlias("quarter","Q"),addUnitPriority("quarter",7),addRegexToken("Q",match1),addParseToken("Q",function(input,array){array[MONTH]=(toInt(input)-1)*3});function getSetQuarter(input){return input==null?Math.ceil((this.month()+1)/3):this.month((input-1)*3+this.month()%3)}addFormatToken("D",["DD",2],"Do","date"),addUnitAlias("date","D"),addUnitPriority("date",9),addRegexToken("D",match1to2),addRegexToken("DD",match1to2,match2),addRegexToken("Do",function(isStrict,locale2){return isStrict?locale2._dayOfMonthOrdinalParse||locale2._ordinalParse:locale2._dayOfMonthOrdinalParseLenient}),addParseToken(["D","DD"],DATE),addParseToken("Do",function(input,array){array[DATE]=toInt(input.match(match1to2)[0])});var getSetDayOfMonth=makeGetSet("Date",!0);addFormatToken("DDD",["DDDD",3],"DDDo","dayOfYear"),addUnitAlias("dayOfYear","DDD"),addUnitPriority("dayOfYear",4),addRegexToken("DDD",match1to3),addRegexToken("DDDD",match3),addParseToken(["DDD","DDDD"],function(input,array,config){config._dayOfYear=toInt(input)});function getSetDayOfYear(input){var dayOfYear=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return input==null?dayOfYear:this.add(input-dayOfYear,"d")}addFormatToken("m",["mm",2],0,"minute"),addUnitAlias("minute","m"),addUnitPriority("minute",14),addRegexToken("m",match1to2),addRegexToken("mm",match1to2,match2),addParseToken(["m","mm"],MINUTE);var getSetMinute=makeGetSet("Minutes",!1);addFormatToken("s",["ss",2],0,"second"),addUnitAlias("second","s"),addUnitPriority("second",15),addRegexToken("s",match1to2),addRegexToken("ss",match1to2,match2),addParseToken(["s","ss"],SECOND);var getSetSecond=makeGetSet("Seconds",!1);addFormatToken("S",0,0,function(){return~~(this.millisecond()/100)}),addFormatToken(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),addFormatToken(0,["SSS",3],0,"millisecond"),addFormatToken(0,["SSSS",4],0,function(){return this.millisecond()*10}),addFormatToken(0,["SSSSS",5],0,function(){return this.millisecond()*100}),addFormatToken(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),addFormatToken(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),addFormatToken(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),addFormatToken(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),addUnitAlias("millisecond","ms"),addUnitPriority("millisecond",16),addRegexToken("S",match1to3,match1),addRegexToken("SS",match1to3,match2),addRegexToken("SSS",match1to3,match3);var token,getSetMillisecond;for(token="SSSS";token.length<=9;token+="S")addRegexToken(token,matchUnsigned);function parseMs(input,array){array[MILLISECOND]=toInt(("0."+input)*1e3)}for(token="S";token.length<=9;token+="S")addParseToken(token,parseMs);getSetMillisecond=makeGetSet("Milliseconds",!1),addFormatToken("z",0,0,"zoneAbbr"),addFormatToken("zz",0,0,"zoneName");function getZoneAbbr(){return this._isUTC?"UTC":""}function getZoneName(){return this._isUTC?"Coordinated Universal Time":""}var proto=Moment.prototype;proto.add=add,proto.calendar=calendar$1,proto.clone=clone,proto.diff=diff,proto.endOf=endOf,proto.format=format,proto.from=from2,proto.fromNow=fromNow,proto.to=to,proto.toNow=toNow,proto.get=stringGet,proto.invalidAt=invalidAt,proto.isAfter=isAfter,proto.isBefore=isBefore,proto.isBetween=isBetween,proto.isSame=isSame,proto.isSameOrAfter=isSameOrAfter,proto.isSameOrBefore=isSameOrBefore,proto.isValid=isValid$2,proto.lang=lang,proto.locale=locale,proto.localeData=localeData,proto.max=prototypeMax,proto.min=prototypeMin,proto.parsingFlags=parsingFlags,proto.set=stringSet,proto.startOf=startOf,proto.subtract=subtract,proto.toArray=toArray,proto.toObject=toObject,proto.toDate=toDate,proto.toISOString=toISOString,proto.inspect=inspect,typeof Symbol<"u"&&Symbol.for!=null&&(proto[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),proto.toJSON=toJSON,proto.toString=toString,proto.unix=unix,proto.valueOf=valueOf,proto.creationData=creationData,proto.eraName=getEraName,proto.eraNarrow=getEraNarrow,proto.eraAbbr=getEraAbbr,proto.eraYear=getEraYear,proto.year=getSetYear,proto.isLeapYear=getIsLeapYear,proto.weekYear=getSetWeekYear,proto.isoWeekYear=getSetISOWeekYear,proto.quarter=proto.quarters=getSetQuarter,proto.month=getSetMonth,proto.daysInMonth=getDaysInMonth,proto.week=proto.weeks=getSetWeek,proto.isoWeek=proto.isoWeeks=getSetISOWeek,proto.weeksInYear=getWeeksInYear,proto.weeksInWeekYear=getWeeksInWeekYear,proto.isoWeeksInYear=getISOWeeksInYear,proto.isoWeeksInISOWeekYear=getISOWeeksInISOWeekYear,proto.date=getSetDayOfMonth,proto.day=proto.days=getSetDayOfWeek,proto.weekday=getSetLocaleDayOfWeek,proto.isoWeekday=getSetISODayOfWeek,proto.dayOfYear=getSetDayOfYear,proto.hour=proto.hours=getSetHour,proto.minute=proto.minutes=getSetMinute,proto.second=proto.seconds=getSetSecond,proto.millisecond=proto.milliseconds=getSetMillisecond,proto.utcOffset=getSetOffset,proto.utc=setOffsetToUTC,proto.local=setOffsetToLocal,proto.parseZone=setOffsetToParsedOffset,proto.hasAlignedHourOffset=hasAlignedHourOffset,proto.isDST=isDaylightSavingTime,proto.isLocal=isLocal,proto.isUtcOffset=isUtcOffset,proto.isUtc=isUtc,proto.isUTC=isUtc,proto.zoneAbbr=getZoneAbbr,proto.zoneName=getZoneName,proto.dates=deprecate("dates accessor is deprecated. Use date instead.",getSetDayOfMonth),proto.months=deprecate("months accessor is deprecated. Use month instead",getSetMonth),proto.years=deprecate("years accessor is deprecated. Use year instead",getSetYear),proto.zone=deprecate("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",getSetZone),proto.isDSTShifted=deprecate("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",isDaylightSavingTimeShifted);function createUnix(input){return createLocal(input*1e3)}function createInZone(){return createLocal.apply(null,arguments).parseZone()}function preParsePostFormat(string){return string}var proto$1=Locale.prototype;proto$1.calendar=calendar,proto$1.longDateFormat=longDateFormat,proto$1.invalidDate=invalidDate,proto$1.ordinal=ordinal,proto$1.preparse=preParsePostFormat,proto$1.postformat=preParsePostFormat,proto$1.relativeTime=relativeTime,proto$1.pastFuture=pastFuture,proto$1.set=set,proto$1.eras=localeEras,proto$1.erasParse=localeErasParse,proto$1.erasConvertYear=localeErasConvertYear,proto$1.erasAbbrRegex=erasAbbrRegex,proto$1.erasNameRegex=erasNameRegex,proto$1.erasNarrowRegex=erasNarrowRegex,proto$1.months=localeMonths,proto$1.monthsShort=localeMonthsShort,proto$1.monthsParse=localeMonthsParse,proto$1.monthsRegex=monthsRegex,proto$1.monthsShortRegex=monthsShortRegex,proto$1.week=localeWeek,proto$1.firstDayOfYear=localeFirstDayOfYear,proto$1.firstDayOfWeek=localeFirstDayOfWeek,proto$1.weekdays=localeWeekdays,proto$1.weekdaysMin=localeWeekdaysMin,proto$1.weekdaysShort=localeWeekdaysShort,proto$1.weekdaysParse=localeWeekdaysParse,proto$1.weekdaysRegex=weekdaysRegex,proto$1.weekdaysShortRegex=weekdaysShortRegex,proto$1.weekdaysMinRegex=weekdaysMinRegex,proto$1.isPM=localeIsPM,proto$1.meridiem=localeMeridiem;function get$1(format2,index,field,setter){var locale2=getLocale(),utc=createUTC().set(setter,index);return locale2[field](utc,format2)}function listMonthsImpl(format2,index,field){if(isNumber(format2)&&(index=format2,format2=void 0),format2=format2||"",index!=null)return get$1(format2,index,field,"month");var i,out=[];for(i=0;i<12;i++)out[i]=get$1(format2,i,field,"month");return out}function listWeekdaysImpl(localeSorted,format2,index,field){typeof localeSorted=="boolean"?(isNumber(format2)&&(index=format2,format2=void 0),format2=format2||""):(format2=localeSorted,index=format2,localeSorted=!1,isNumber(format2)&&(index=format2,format2=void 0),format2=format2||"");var locale2=getLocale(),shift=localeSorted?locale2._week.dow:0,i,out=[];if(index!=null)return get$1(format2,(index+shift)%7,field,"day");for(i=0;i<7;i++)out[i]=get$1(format2,(i+shift)%7,field,"day");return out}function listMonths(format2,index){return listMonthsImpl(format2,index,"months")}function listMonthsShort(format2,index){return listMonthsImpl(format2,index,"monthsShort")}function listWeekdays(localeSorted,format2,index){return listWeekdaysImpl(localeSorted,format2,index,"weekdays")}function listWeekdaysShort(localeSorted,format2,index){return listWeekdaysImpl(localeSorted,format2,index,"weekdaysShort")}function listWeekdaysMin(localeSorted,format2,index){return listWeekdaysImpl(localeSorted,format2,index,"weekdaysMin")}getSetGlobalLocale("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(number){var b=number%10,output=toInt(number%100/10)===1?"th":b===1?"st":b===2?"nd":b===3?"rd":"th";return number+output}}),hooks.lang=deprecate("moment.lang is deprecated. Use moment.locale instead.",getSetGlobalLocale),hooks.langData=deprecate("moment.langData is deprecated. Use moment.localeData instead.",getLocale);var mathAbs=Math.abs;function abs(){var data=this._data;return this._milliseconds=mathAbs(this._milliseconds),this._days=mathAbs(this._days),this._months=mathAbs(this._months),data.milliseconds=mathAbs(data.milliseconds),data.seconds=mathAbs(data.seconds),data.minutes=mathAbs(data.minutes),data.hours=mathAbs(data.hours),data.months=mathAbs(data.months),data.years=mathAbs(data.years),this}function addSubtract$1(duration,input,value,direction){var other=createDuration(input,value);return duration._milliseconds+=direction*other._milliseconds,duration._days+=direction*other._days,duration._months+=direction*other._months,duration._bubble()}function add$1(input,value){return addSubtract$1(this,input,value,1)}function subtract$1(input,value){return addSubtract$1(this,input,value,-1)}function absCeil(number){return number<0?Math.floor(number):Math.ceil(number)}function bubble(){var milliseconds2=this._milliseconds,days2=this._days,months2=this._months,data=this._data,seconds2,minutes2,hours2,years2,monthsFromDays;return milliseconds2>=0&&days2>=0&&months2>=0||milliseconds2<=0&&days2<=0&&months2<=0||(milliseconds2+=absCeil(monthsToDays(months2)+days2)*864e5,days2=0,months2=0),data.milliseconds=milliseconds2%1e3,seconds2=absFloor(milliseconds2/1e3),data.seconds=seconds2%60,minutes2=absFloor(seconds2/60),data.minutes=minutes2%60,hours2=absFloor(minutes2/60),data.hours=hours2%24,days2+=absFloor(hours2/24),monthsFromDays=absFloor(daysToMonths(days2)),months2+=monthsFromDays,days2-=absCeil(monthsToDays(monthsFromDays)),years2=absFloor(months2/12),months2%=12,data.days=days2,data.months=months2,data.years=years2,this}function daysToMonths(days2){return days2*4800/146097}function monthsToDays(months2){return months2*146097/4800}function as(units){if(!this.isValid())return NaN;var days2,months2,milliseconds2=this._milliseconds;if(units=normalizeUnits(units),units==="month"||units==="quarter"||units==="year")switch(days2=this._days+milliseconds2/864e5,months2=this._months+daysToMonths(days2),units){case"month":return months2;case"quarter":return months2/3;case"year":return months2/12}else switch(days2=this._days+Math.round(monthsToDays(this._months)),units){case"week":return days2/7+milliseconds2/6048e5;case"day":return days2+milliseconds2/864e5;case"hour":return days2*24+milliseconds2/36e5;case"minute":return days2*1440+milliseconds2/6e4;case"second":return days2*86400+milliseconds2/1e3;case"millisecond":return Math.floor(days2*864e5)+milliseconds2;default:throw new Error("Unknown unit "+units)}}function valueOf$1(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+toInt(this._months/12)*31536e6:NaN}function makeAs(alias){return function(){return this.as(alias)}}var asMilliseconds=makeAs("ms"),asSeconds=makeAs("s"),asMinutes=makeAs("m"),asHours=makeAs("h"),asDays=makeAs("d"),asWeeks=makeAs("w"),asMonths=makeAs("M"),asQuarters=makeAs("Q"),asYears=makeAs("y");function clone$1(){return createDuration(this)}function get$2(units){return units=normalizeUnits(units),this.isValid()?this[units+"s"]():NaN}function makeGetter(name){return function(){return this.isValid()?this._data[name]:NaN}}var milliseconds=makeGetter("milliseconds"),seconds=makeGetter("seconds"),minutes=makeGetter("minutes"),hours=makeGetter("hours"),days=makeGetter("days"),months=makeGetter("months"),years=makeGetter("years");function weeks(){return absFloor(this.days()/7)}var round=Math.round,thresholds={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function substituteTimeAgo(string,number,withoutSuffix,isFuture,locale2){return locale2.relativeTime(number||1,!!withoutSuffix,string,isFuture)}function relativeTime$1(posNegDuration,withoutSuffix,thresholds2,locale2){var duration=createDuration(posNegDuration).abs(),seconds2=round(duration.as("s")),minutes2=round(duration.as("m")),hours2=round(duration.as("h")),days2=round(duration.as("d")),months2=round(duration.as("M")),weeks2=round(duration.as("w")),years2=round(duration.as("y")),a=seconds2<=thresholds2.ss&&["s",seconds2]||seconds2<thresholds2.s&&["ss",seconds2]||minutes2<=1&&["m"]||minutes2<thresholds2.m&&["mm",minutes2]||hours2<=1&&["h"]||hours2<thresholds2.h&&["hh",hours2]||days2<=1&&["d"]||days2<thresholds2.d&&["dd",days2];return thresholds2.w!=null&&(a=a||weeks2<=1&&["w"]||weeks2<thresholds2.w&&["ww",weeks2]),a=a||months2<=1&&["M"]||months2<thresholds2.M&&["MM",months2]||years2<=1&&["y"]||["yy",years2],a[2]=withoutSuffix,a[3]=+posNegDuration>0,a[4]=locale2,substituteTimeAgo.apply(null,a)}function getSetRelativeTimeRounding(roundingFunction){return roundingFunction===void 0?round:typeof roundingFunction=="function"?(round=roundingFunction,!0):!1}function getSetRelativeTimeThreshold(threshold,limit){return thresholds[threshold]===void 0?!1:limit===void 0?thresholds[threshold]:(thresholds[threshold]=limit,threshold==="s"&&(thresholds.ss=limit-1),!0)}function humanize(argWithSuffix,argThresholds){if(!this.isValid())return this.localeData().invalidDate();var withSuffix=!1,th=thresholds,locale2,output;return typeof argWithSuffix=="object"&&(argThresholds=argWithSuffix,argWithSuffix=!1),typeof argWithSuffix=="boolean"&&(withSuffix=argWithSuffix),typeof argThresholds=="object"&&(th=Object.assign({},thresholds,argThresholds),argThresholds.s!=null&&argThresholds.ss==null&&(th.ss=argThresholds.s-1)),locale2=this.localeData(),output=relativeTime$1(this,!withSuffix,th,locale2),withSuffix&&(output=locale2.pastFuture(+this,output)),locale2.postformat(output)}var abs$1=Math.abs;function sign(x){return(x>0)-(x<0)||+x}function toISOString$1(){if(!this.isValid())return this.localeData().invalidDate();var seconds2=abs$1(this._milliseconds)/1e3,days2=abs$1(this._days),months2=abs$1(this._months),minutes2,hours2,years2,s,total=this.asSeconds(),totalSign,ymSign,daysSign,hmsSign;return total?(minutes2=absFloor(seconds2/60),hours2=absFloor(minutes2/60),seconds2%=60,minutes2%=60,years2=absFloor(months2/12),months2%=12,s=seconds2?seconds2.toFixed(3).replace(/\.?0+$/,""):"",totalSign=total<0?"-":"",ymSign=sign(this._months)!==sign(total)?"-":"",daysSign=sign(this._days)!==sign(total)?"-":"",hmsSign=sign(this._milliseconds)!==sign(total)?"-":"",totalSign+"P"+(years2?ymSign+years2+"Y":"")+(months2?ymSign+months2+"M":"")+(days2?daysSign+days2+"D":"")+(hours2||minutes2||seconds2?"T":"")+(hours2?hmsSign+hours2+"H":"")+(minutes2?hmsSign+minutes2+"M":"")+(seconds2?hmsSign+s+"S":"")):"P0D"}var proto$2=Duration.prototype;proto$2.isValid=isValid$1,proto$2.abs=abs,proto$2.add=add$1,proto$2.subtract=subtract$1,proto$2.as=as,proto$2.asMilliseconds=asMilliseconds,proto$2.asSeconds=asSeconds,proto$2.asMinutes=asMinutes,proto$2.asHours=asHours,proto$2.asDays=asDays,proto$2.asWeeks=asWeeks,proto$2.asMonths=asMonths,proto$2.asQuarters=asQuarters,proto$2.asYears=asYears,proto$2.valueOf=valueOf$1,proto$2._bubble=bubble,proto$2.clone=clone$1,proto$2.get=get$2,proto$2.milliseconds=milliseconds,proto$2.seconds=seconds,proto$2.minutes=minutes,proto$2.hours=hours,proto$2.days=days,proto$2.weeks=weeks,proto$2.months=months,proto$2.years=years,proto$2.humanize=humanize,proto$2.toISOString=toISOString$1,proto$2.toString=toISOString$1,proto$2.toJSON=toISOString$1,proto$2.locale=locale,proto$2.localeData=localeData,proto$2.toIsoString=deprecate("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",toISOString$1),proto$2.lang=lang,addFormatToken("X",0,0,"unix"),addFormatToken("x",0,0,"valueOf"),addRegexToken("x",matchSigned),addRegexToken("X",matchTimestamp),addParseToken("X",function(input,array,config){config._d=new Date(parseFloat(input)*1e3)}),addParseToken("x",function(input,array,config){config._d=new Date(toInt(input))});return hooks.version="2.29.4",setHookCallback(createLocal),hooks.fn=proto,hooks.min=min,hooks.max=max,hooks.now=now,hooks.utc=createUTC,hooks.unix=createUnix,hooks.months=listMonths,hooks.isDate=isDate,hooks.locale=getSetGlobalLocale,hooks.invalid=createInvalid,hooks.duration=createDuration,hooks.isMoment=isMoment,hooks.weekdays=listWeekdays,hooks.parseZone=createInZone,hooks.localeData=getLocale,hooks.isDuration=isDuration,hooks.monthsShort=listMonthsShort,hooks.weekdaysMin=listWeekdaysMin,hooks.defineLocale=defineLocale,hooks.updateLocale=updateLocale,hooks.locales=listLocales,hooks.weekdaysShort=listWeekdaysShort,hooks.normalizeUnits=normalizeUnits,hooks.relativeTimeRounding=getSetRelativeTimeRounding,hooks.relativeTimeThreshold=getSetRelativeTimeThreshold,hooks.calendarFormat=getCalendarFormat,hooks.prototype=proto,hooks.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},hooks})}});var require_native_url=__commonJS({"node_modules/core-js/internals/native-url.js"(exports,module){init_define_process_env();init_shim();var fails=require_fails(),wellKnownSymbol=require_well_known_symbol(),IS_PURE=require_is_pure(),ITERATOR=wellKnownSymbol("iterator");module.exports=!fails(function(){var url=new URL("b?a=1&b=2&c=3","http://a"),searchParams=url.searchParams,result="";return url.pathname="c%20d",searchParams.forEach(function(value,key){searchParams.delete("b"),result+=key+value}),IS_PURE&&!url.toJSON||!searchParams.sort||url.href!=="http://a/c%20d?a=1&c=3"||searchParams.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!searchParams[ITERATOR]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("http://a#\u0431").hash!=="#%D0%B1"||result!=="a1c3"||new URL("http://x",void 0).host!=="x"})}});var require_validate_arguments_length=__commonJS({"node_modules/core-js/internals/validate-arguments-length.js"(exports,module){init_define_process_env();init_shim();var global=require_global(),TypeError2=global.TypeError;module.exports=function(passed,required){if(passed<required)throw TypeError2("Not enough arguments");return passed}}});var require_web_url_search_params=__commonJS({"node_modules/core-js/modules/web.url-search-params.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();var $2=require_export(),global=require_global(),getBuiltIn=require_get_built_in(),call=require_function_call(),uncurryThis=require_function_uncurry_this(),USE_NATIVE_URL=require_native_url(),redefine=require_redefine(),redefineAll=require_redefine_all(),setToStringTag=require_set_to_string_tag(),createIteratorConstructor=require_create_iterator_constructor(),InternalStateModule=require_internal_state(),anInstance=require_an_instance(),isCallable=require_is_callable(),hasOwn=require_has_own_property(),bind=require_function_bind_context(),classof=require_classof(),anObject=require_an_object(),isObject=require_is_object(),$toString=require_to_string(),create=require_object_create(),createPropertyDescriptor=require_create_property_descriptor(),getIterator=require_get_iterator(),getIteratorMethod=require_get_iterator_method(),validateArgumentsLength=require_validate_arguments_length(),wellKnownSymbol=require_well_known_symbol(),arraySort=require_array_sort(),ITERATOR=wellKnownSymbol("iterator"),URL_SEARCH_PARAMS="URLSearchParams",URL_SEARCH_PARAMS_ITERATOR=URL_SEARCH_PARAMS+"Iterator",setInternalState=InternalStateModule.set,getInternalParamsState=InternalStateModule.getterFor(URL_SEARCH_PARAMS),getInternalIteratorState=InternalStateModule.getterFor(URL_SEARCH_PARAMS_ITERATOR),n$Fetch=getBuiltIn("fetch"),N$Request=getBuiltIn("Request"),Headers=getBuiltIn("Headers"),RequestPrototype=N$Request&&N$Request.prototype,HeadersPrototype=Headers&&Headers.prototype,RegExp2=global.RegExp,TypeError2=global.TypeError,decodeURIComponent2=global.decodeURIComponent,encodeURIComponent2=global.encodeURIComponent,charAt=uncurryThis("".charAt),join=uncurryThis([].join),push=uncurryThis([].push),replace=uncurryThis("".replace),shift=uncurryThis([].shift),splice=uncurryThis([].splice),split=uncurryThis("".split),stringSlice=uncurryThis("".slice),plus=/\+/g,sequences=Array(4),percentSequence=function(bytes){return sequences[bytes-1]||(sequences[bytes-1]=RegExp2("((?:%[\\da-f]{2}){"+bytes+"})","gi"))},percentDecode=function(sequence){try{return decodeURIComponent2(sequence)}catch(error){return sequence}},deserialize=function(it){var result=replace(it,plus," "),bytes=4;try{return decodeURIComponent2(result)}catch(error){for(;bytes;)result=replace(result,percentSequence(bytes--),percentDecode);return result}},find=/[!'()~]|%20/g,replacements={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},replacer=function(match){return replacements[match]},serialize=function(it){return replace(encodeURIComponent2(it),find,replacer)},URLSearchParamsIterator=createIteratorConstructor(function(params,kind){setInternalState(this,{type:URL_SEARCH_PARAMS_ITERATOR,iterator:getIterator(getInternalParamsState(params).entries),kind})},"Iterator",function(){var state=getInternalIteratorState(this),kind=state.kind,step=state.iterator.next(),entry=step.value;return step.done||(step.value=kind==="keys"?entry.key:kind==="values"?entry.value:[entry.key,entry.value]),step},!0),URLSearchParamsState=function(init){this.entries=[],this.url=null,init!==void 0&&(isObject(init)?this.parseObject(init):this.parseQuery(typeof init=="string"?charAt(init,0)==="?"?stringSlice(init,1):init:$toString(init)))};URLSearchParamsState.prototype={type:URL_SEARCH_PARAMS,bindURL:function(url){this.url=url,this.update()},parseObject:function(object2){var iteratorMethod=getIteratorMethod(object2),iterator,next,step,entryIterator,entryNext,first,second;if(iteratorMethod)for(iterator=getIterator(object2,iteratorMethod),next=iterator.next;!(step=call(next,iterator)).done;){if(entryIterator=getIterator(anObject(step.value)),entryNext=entryIterator.next,(first=call(entryNext,entryIterator)).done||(second=call(entryNext,entryIterator)).done||!call(entryNext,entryIterator).done)throw TypeError2("Expected sequence with length 2");push(this.entries,{key:$toString(first.value),value:$toString(second.value)})}else for(var key in object2)hasOwn(object2,key)&&push(this.entries,{key,value:$toString(object2[key])})},parseQuery:function(query){if(query)for(var attributes=split(query,"&"),index=0,attribute,entry;index<attributes.length;)attribute=attributes[index++],attribute.length&&(entry=split(attribute,"="),push(this.entries,{key:deserialize(shift(entry)),value:deserialize(join(entry,"="))}))},serialize:function(){for(var entries=this.entries,result=[],index=0,entry;index<entries.length;)entry=entries[index++],push(result,serialize(entry.key)+"="+serialize(entry.value));return join(result,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var URLSearchParamsConstructor=function(){anInstance(this,URLSearchParamsPrototype);var init=arguments.length>0?arguments[0]:void 0;setInternalState(this,new URLSearchParamsState(init))},URLSearchParamsPrototype=URLSearchParamsConstructor.prototype;redefineAll(URLSearchParamsPrototype,{append:function(name,value){validateArgumentsLength(arguments.length,2);var state=getInternalParamsState(this);push(state.entries,{key:$toString(name),value:$toString(value)}),state.updateURL()},delete:function(name){validateArgumentsLength(arguments.length,1);for(var state=getInternalParamsState(this),entries=state.entries,key=$toString(name),index=0;index<entries.length;)entries[index].key===key?splice(entries,index,1):index++;state.updateURL()},get:function(name){validateArgumentsLength(arguments.length,1);for(var entries=getInternalParamsState(this).entries,key=$toString(name),index=0;index<entries.length;index++)if(entries[index].key===key)return entries[index].value;return null},getAll:function(name){validateArgumentsLength(arguments.length,1);for(var entries=getInternalParamsState(this).entries,key=$toString(name),result=[],index=0;index<entries.length;index++)entries[index].key===key&&push(result,entries[index].value);return result},has:function(name){validateArgumentsLength(arguments.length,1);for(var entries=getInternalParamsState(this).entries,key=$toString(name),index=0;index<entries.length;)if(entries[index++].key===key)return!0;return!1},set:function(name,value){validateArgumentsLength(arguments.length,1);for(var state=getInternalParamsState(this),entries=state.entries,found=!1,key=$toString(name),val=$toString(value),index=0,entry;index<entries.length;index++)entry=entries[index],entry.key===key&&(found?splice(entries,index--,1):(found=!0,entry.value=val));found||push(entries,{key,value:val}),state.updateURL()},sort:function(){var state=getInternalParamsState(this);arraySort(state.entries,function(a,b){return a.key>b.key?1:-1}),state.updateURL()},forEach:function(callback){for(var entries=getInternalParamsState(this).entries,boundFunction=bind(callback,arguments.length>1?arguments[1]:void 0),index=0,entry;index<entries.length;)entry=entries[index++],boundFunction(entry.value,entry.key,this)},keys:function(){return new URLSearchParamsIterator(this,"keys")},values:function(){return new URLSearchParamsIterator(this,"values")},entries:function(){return new URLSearchParamsIterator(this,"entries")}},{enumerable:!0});redefine(URLSearchParamsPrototype,ITERATOR,URLSearchParamsPrototype.entries,{name:"entries"});redefine(URLSearchParamsPrototype,"toString",function(){return getInternalParamsState(this).serialize()},{enumerable:!0});setToStringTag(URLSearchParamsConstructor,URL_SEARCH_PARAMS);$2({global:!0,forced:!USE_NATIVE_URL},{URLSearchParams:URLSearchParamsConstructor});!USE_NATIVE_URL&&isCallable(Headers)&&(headersHas=uncurryThis(HeadersPrototype.has),headersSet=uncurryThis(HeadersPrototype.set),wrapRequestOptions=function(init){if(isObject(init)){var body=init.body,headers;if(classof(body)===URL_SEARCH_PARAMS)return headers=init.headers?new Headers(init.headers):new Headers,headersHas(headers,"content-type")||headersSet(headers,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),create(init,{body:createPropertyDescriptor(0,$toString(body)),headers:createPropertyDescriptor(0,headers)})}return init},isCallable(n$Fetch)&&$2({global:!0,enumerable:!0,forced:!0},{fetch:function(input){return n$Fetch(input,arguments.length>1?wrapRequestOptions(arguments[1]):{})}}),isCallable(N$Request)&&(RequestConstructor=function(input){return anInstance(this,RequestPrototype),new N$Request(input,arguments.length>1?wrapRequestOptions(arguments[1]):{})},RequestPrototype.constructor=RequestConstructor,RequestConstructor.prototype=RequestPrototype,$2({global:!0,forced:!0},{Request:RequestConstructor})));var headersHas,headersSet,wrapRequestOptions,RequestConstructor;module.exports={URLSearchParams:URLSearchParamsConstructor,getState:getInternalParamsState}}});var require_same_value=__commonJS({"node_modules/core-js/internals/same-value.js"(exports,module){init_define_process_env();init_shim();module.exports=Object.is||function(x,y){return x===y?x!==0||1/x===1/y:x!=x&&y!=y}}});var require_es_string_search=__commonJS({"node_modules/core-js/modules/es.string.search.js"(){"use strict";init_define_process_env();init_shim();var call=require_function_call(),fixRegExpWellKnownSymbolLogic=require_fix_regexp_well_known_symbol_logic(),anObject=require_an_object(),requireObjectCoercible=require_require_object_coercible(),sameValue=require_same_value(),toString=require_to_string(),getMethod=require_get_method(),regExpExec=require_regexp_exec_abstract();fixRegExpWellKnownSymbolLogic("search",function(SEARCH,nativeSearch,maybeCallNative){return[function(regexp){var O=requireObjectCoercible(this),searcher=regexp==null?void 0:getMethod(regexp,SEARCH);return searcher?call(searcher,regexp,O):new RegExp(regexp)[SEARCH](toString(O))},function(string){var rx=anObject(this),S=toString(string),res=maybeCallNative(nativeSearch,rx,S);if(res.done)return res.value;var previousLastIndex=rx.lastIndex;sameValue(previousLastIndex,0)||(rx.lastIndex=0);var result=regExpExec(rx,S);return sameValue(rx.lastIndex,previousLastIndex)||(rx.lastIndex=previousLastIndex),result===null?-1:result.index}]})}});var require_flatten_into_array=__commonJS({"node_modules/core-js/internals/flatten-into-array.js"(exports,module){"use strict";init_define_process_env();init_shim();var global=require_global(),isArray=require_is_array(),lengthOfArrayLike=require_length_of_array_like(),bind=require_function_bind_context(),TypeError2=global.TypeError,flattenIntoArray=function(target,original,source,sourceLen,start,depth,mapper,thisArg){for(var targetIndex=start,sourceIndex=0,mapFn=mapper?bind(mapper,thisArg):!1,element,elementLen;sourceIndex<sourceLen;){if(sourceIndex in source){if(element=mapFn?mapFn(source[sourceIndex],sourceIndex,original):source[sourceIndex],depth>0&&isArray(element))elementLen=lengthOfArrayLike(element),targetIndex=flattenIntoArray(target,original,element,elementLen,targetIndex,depth-1)-1;else{if(targetIndex>=9007199254740991)throw TypeError2("Exceed the acceptable array length");target[targetIndex]=element}targetIndex++}sourceIndex++}return targetIndex};module.exports=flattenIntoArray}});var require_es_array_flat=__commonJS({"node_modules/core-js/modules/es.array.flat.js"(){"use strict";init_define_process_env();init_shim();var $2=require_export(),flattenIntoArray=require_flatten_into_array(),toObject=require_to_object(),lengthOfArrayLike=require_length_of_array_like(),toIntegerOrInfinity=require_to_integer_or_infinity(),arraySpeciesCreate=require_array_species_create();$2({target:"Array",proto:!0},{flat:function(){var depthArg=arguments.length?arguments[0]:void 0,O=toObject(this),sourceLen=lengthOfArrayLike(O),A=arraySpeciesCreate(O,0);return A.length=flattenIntoArray(A,O,O,sourceLen,0,depthArg===void 0?1:toIntegerOrInfinity(depthArg)),A}})}});var require_es_array_unscopables_flat=__commonJS({"node_modules/core-js/modules/es.array.unscopables.flat.js"(){init_define_process_env();init_shim();var addToUnscopables=require_add_to_unscopables();addToUnscopables("flat")}});var require_async_state=__commonJS({"lib-browser-old/u/shared/async/new/async_state.js"(exports,module){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});var state={CurrentAutoRun:null,NewSources:null,NewSourcesIndex:0,CurrentNotReadyCatcher:null,server_connection_problems:!1,batch:fn=>fn()};module.exports=state}});var require_backoff=__commonJS({"lib-browser-old/u/shared/backoff.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.jitter=jitter;exports.jitterFloat=jitterFloat;function jitterFloat(base){let factor=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.1,bias=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;factor>1?factor=1:factor<0&&(factor=0);let randomBase;return bias<0?randomBase=Math.random()*-1:bias>0?randomBase=Math.random():randomBase=(Math.random()-.5)*2,base+base*randomBase*factor}function jitter(base,factor,bias){return Math.round(jitterFloat(base,factor,bias))}}});var require_a_constructor=__commonJS({"node_modules/core-js/internals/a-constructor.js"(exports,module){init_define_process_env();init_shim();var global=require_global(),isConstructor=require_is_constructor(),tryToString=require_try_to_string(),TypeError2=global.TypeError;module.exports=function(argument){if(isConstructor(argument))return argument;throw TypeError2(tryToString(argument)+" is not a constructor")}}});var require_species_constructor=__commonJS({"node_modules/core-js/internals/species-constructor.js"(exports,module){init_define_process_env();init_shim();var anObject=require_an_object(),aConstructor=require_a_constructor(),wellKnownSymbol=require_well_known_symbol(),SPECIES=wellKnownSymbol("species");module.exports=function(O,defaultConstructor){var C=anObject(O).constructor,S;return C===void 0||(S=anObject(C)[SPECIES])==null?defaultConstructor:aConstructor(S)}}});var require_es_string_split=__commonJS({"node_modules/core-js/modules/es.string.split.js"(){"use strict";init_define_process_env();init_shim();var apply=require_function_apply(),call=require_function_call(),uncurryThis=require_function_uncurry_this(),fixRegExpWellKnownSymbolLogic=require_fix_regexp_well_known_symbol_logic(),isRegExp=require_is_regexp(),anObject=require_an_object(),requireObjectCoercible=require_require_object_coercible(),speciesConstructor=require_species_constructor(),advanceStringIndex=require_advance_string_index(),toLength=require_to_length(),toString=require_to_string(),getMethod=require_get_method(),arraySlice=require_array_slice_simple(),callRegExpExec=require_regexp_exec_abstract(),regexpExec=require_regexp_exec(),stickyHelpers=require_regexp_sticky_helpers(),fails=require_fails(),UNSUPPORTED_Y=stickyHelpers.UNSUPPORTED_Y,MAX_UINT32=4294967295,min=Math.min,$push=[].push,exec=uncurryThis(/./.exec),push=uncurryThis($push),stringSlice=uncurryThis("".slice),SPLIT_WORKS_WITH_OVERWRITTEN_EXEC=!fails(function(){var re=/(?:)/,originalExec=re.exec;re.exec=function(){return originalExec.apply(this,arguments)};var result="ab".split(re);return result.length!==2||result[0]!=="a"||result[1]!=="b"});fixRegExpWellKnownSymbolLogic("split",function(SPLIT,nativeSplit,maybeCallNative){var internalSplit;return"abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length?internalSplit=function(separator,limit){var string=toString(requireObjectCoercible(this)),lim=limit===void 0?MAX_UINT32:limit>>>0;if(lim===0)return[];if(separator===void 0)return[string];if(!isRegExp(separator))return call(nativeSplit,string,separator,lim);for(var output=[],flags=(separator.ignoreCase?"i":"")+(separator.multiline?"m":"")+(separator.unicode?"u":"")+(separator.sticky?"y":""),lastLastIndex=0,separatorCopy=new RegExp(separator.source,flags+"g"),match,lastIndex,lastLength;(match=call(regexpExec,separatorCopy,string))&&(lastIndex=separatorCopy.lastIndex,!(lastIndex>lastLastIndex&&(push(output,stringSlice(string,lastLastIndex,match.index)),match.length>1&&match.index<string.length&&apply($push,output,arraySlice(match,1)),lastLength=match[0].length,lastLastIndex=lastIndex,output.length>=lim)));)separatorCopy.lastIndex===match.index&&separatorCopy.lastIndex++;return lastLastIndex===string.length?(lastLength||!exec(separatorCopy,""))&&push(output,""):push(output,stringSlice(string,lastLastIndex)),output.length>lim?arraySlice(output,0,lim):output}:"0".split(void 0,0).length?internalSplit=function(separator,limit){return separator===void 0&&limit===0?[]:call(nativeSplit,this,separator,limit)}:internalSplit=nativeSplit,[function(separator,limit){var O=requireObjectCoercible(this),splitter=separator==null?void 0:getMethod(separator,SPLIT);return splitter?call(splitter,separator,O,limit):call(internalSplit,toString(O),separator,limit)},function(string,limit){var rx=anObject(this),S=toString(string),res=maybeCallNative(internalSplit,rx,S,limit,internalSplit!==nativeSplit);if(res.done)return res.value;var C=speciesConstructor(rx,RegExp),unicodeMatching=rx.unicode,flags=(rx.ignoreCase?"i":"")+(rx.multiline?"m":"")+(rx.unicode?"u":"")+(UNSUPPORTED_Y?"g":"y"),splitter=new C(UNSUPPORTED_Y?"^(?:"+rx.source+")":rx,flags),lim=limit===void 0?MAX_UINT32:limit>>>0;if(lim===0)return[];if(S.length===0)return callRegExpExec(splitter,S)===null?[S]:[];for(var p=0,q=0,A=[];q<S.length;){splitter.lastIndex=UNSUPPORTED_Y?0:q;var z=callRegExpExec(splitter,UNSUPPORTED_Y?stringSlice(S,q):S),e;if(z===null||(e=min(toLength(splitter.lastIndex+(UNSUPPORTED_Y?q:0)),S.length))===p)q=advanceStringIndex(S,q,unicodeMatching);else{if(push(A,stringSlice(S,p,q)),A.length===lim)return A;for(var i=1;i<=z.length-1;i++)if(push(A,z[i]),A.length===lim)return A;q=p=e}}return push(A,stringSlice(S,p)),A}]},!SPLIT_WORKS_WITH_OVERWRITTEN_EXEC,UNSUPPORTED_Y)}});var require_string_trim_forced=__commonJS({"node_modules/core-js/internals/string-trim-forced.js"(exports,module){init_define_process_env();init_shim();var PROPER_FUNCTION_NAME=require_function_name().PROPER,fails=require_fails(),whitespaces=require_whitespaces(),non="\u200B\x85\u180E";module.exports=function(METHOD_NAME){return fails(function(){return!!whitespaces[METHOD_NAME]()||non[METHOD_NAME]()!==non||PROPER_FUNCTION_NAME&&whitespaces[METHOD_NAME].name!==METHOD_NAME})}}});var require_es_string_trim=__commonJS({"node_modules/core-js/modules/es.string.trim.js"(){"use strict";init_define_process_env();init_shim();var $2=require_export(),$trim=require_string_trim().trim,forcedStringTrimMethod=require_string_trim_forced();$2({target:"String",proto:!0,forced:forcedStringTrimMethod("trim")},{trim:function(){return $trim(this)}})}});var require_es_string_iterator=__commonJS({"node_modules/core-js/modules/es.string.iterator.js"(){"use strict";init_define_process_env();init_shim();var charAt=require_string_multibyte().charAt,toString=require_to_string(),InternalStateModule=require_internal_state(),defineIterator=require_define_iterator(),STRING_ITERATOR="String Iterator",setInternalState=InternalStateModule.set,getInternalState=InternalStateModule.getterFor(STRING_ITERATOR);defineIterator(String,"String",function(iterated){setInternalState(this,{type:STRING_ITERATOR,string:toString(iterated),index:0})},function(){var state=getInternalState(this),string=state.string,index=state.index,point;return index>=string.length?{value:void 0,done:!0}:(point=charAt(string,index),state.index+=point.length,{value:point,done:!1})})}});var require_call_with_safe_iteration_closing=__commonJS({"node_modules/core-js/internals/call-with-safe-iteration-closing.js"(exports,module){init_define_process_env();init_shim();var anObject=require_an_object(),iteratorClose=require_iterator_close();module.exports=function(iterator,fn,value,ENTRIES){try{return ENTRIES?fn(anObject(value)[0],value[1]):fn(value)}catch(error){iteratorClose(iterator,"throw",error)}}}});var require_array_from=__commonJS({"node_modules/core-js/internals/array-from.js"(exports,module){"use strict";init_define_process_env();init_shim();var global=require_global(),bind=require_function_bind_context(),call=require_function_call(),toObject=require_to_object(),callWithSafeIterationClosing=require_call_with_safe_iteration_closing(),isArrayIteratorMethod=require_is_array_iterator_method(),isConstructor=require_is_constructor(),lengthOfArrayLike=require_length_of_array_like(),createProperty=require_create_property(),getIterator=require_get_iterator(),getIteratorMethod=require_get_iterator_method(),Array2=global.Array;module.exports=function(arrayLike){var O=toObject(arrayLike),IS_CONSTRUCTOR=isConstructor(this),argumentsLength=arguments.length,mapfn=argumentsLength>1?arguments[1]:void 0,mapping=mapfn!==void 0;mapping&&(mapfn=bind(mapfn,argumentsLength>2?arguments[2]:void 0));var iteratorMethod=getIteratorMethod(O),index=0,length,result,step,iterator,next,value;if(iteratorMethod&&!(this==Array2&&isArrayIteratorMethod(iteratorMethod)))for(iterator=getIterator(O,iteratorMethod),next=iterator.next,result=IS_CONSTRUCTOR?new this:[];!(step=call(next,iterator)).done;index++)value=mapping?callWithSafeIterationClosing(iterator,mapfn,[step.value,index],!0):step.value,createProperty(result,index,value);else for(length=lengthOfArrayLike(O),result=IS_CONSTRUCTOR?new this(length):Array2(length);length>index;index++)value=mapping?mapfn(O[index],index):O[index],createProperty(result,index,value);return result.length=index,result}}});var require_string_punycode_to_ascii=__commonJS({"node_modules/core-js/internals/string-punycode-to-ascii.js"(exports,module){"use strict";init_define_process_env();init_shim();var global=require_global(),uncurryThis=require_function_uncurry_this(),maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexNonASCII=/[^\0-\u007E]/,regexSeparators=/[.\u3002\uFF0E\uFF61]/g,OVERFLOW_ERROR="Overflow: input needs wider integers to process",baseMinusTMin=base-tMin,RangeError2=global.RangeError,exec=uncurryThis(regexSeparators.exec),floor=Math.floor,fromCharCode=String.fromCharCode,charCodeAt=uncurryThis("".charCodeAt),join=uncurryThis([].join),push=uncurryThis([].push),replace=uncurryThis("".replace),split=uncurryThis("".split),toLowerCase=uncurryThis("".toLowerCase),ucs2decode=function(string){for(var output=[],counter2=0,length=string.length;counter2<length;){var value=charCodeAt(string,counter2++);if(value>=55296&&value<=56319&&counter2<length){var extra=charCodeAt(string,counter2++);(extra&64512)==56320?push(output,((value&1023)<<10)+(extra&1023)+65536):(push(output,value),counter2--)}else push(output,value)}return output},digitToBasic=function(digit){return digit+22+75*(digit<26)},adapt=function(delta,numPoints,firstTime){var k=0;for(delta=firstTime?floor(delta/damp):delta>>1,delta+=floor(delta/numPoints);delta>baseMinusTMin*tMax>>1;)delta=floor(delta/baseMinusTMin),k+=base;return floor(k+(baseMinusTMin+1)*delta/(delta+skew))},encode=function(input){var output=[];input=ucs2decode(input);var inputLength=input.length,n=initialN,delta=0,bias=initialBias,i,currentValue;for(i=0;i<input.length;i++)currentValue=input[i],currentValue<128&&push(output,fromCharCode(currentValue));var basicLength=output.length,handledCPCount=basicLength;for(basicLength&&push(output,delimiter);handledCPCount<inputLength;){var m=maxInt;for(i=0;i<input.length;i++)currentValue=input[i],currentValue>=n&&currentValue<m&&(m=currentValue);var handledCPCountPlusOne=handledCPCount+1;if(m-n>floor((maxInt-delta)/handledCPCountPlusOne))throw RangeError2(OVERFLOW_ERROR);for(delta+=(m-n)*handledCPCountPlusOne,n=m,i=0;i<input.length;i++){if(currentValue=input[i],currentValue<n&&++delta>maxInt)throw RangeError2(OVERFLOW_ERROR);if(currentValue==n){for(var q=delta,k=base;;){var t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(q<t)break;var qMinusT=q-t,baseMinusT=base-t;push(output,fromCharCode(digitToBasic(t+qMinusT%baseMinusT))),q=floor(qMinusT/baseMinusT),k+=base}push(output,fromCharCode(digitToBasic(q))),bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength),delta=0,handledCPCount++}}delta++,n++}return join(output,"")};module.exports=function(input){var encoded=[],labels=split(replace(toLowerCase(input),regexSeparators,"."),"."),i,label;for(i=0;i<labels.length;i++)label=labels[i],push(encoded,exec(regexNonASCII,label)?"xn--"+encode(label):label);return join(encoded,".")}}});var require_web_url=__commonJS({"node_modules/core-js/modules/web.url.js"(){"use strict";init_define_process_env();init_shim();require_es_string_iterator();var $2=require_export(),DESCRIPTORS=require_descriptors(),USE_NATIVE_URL=require_native_url(),global=require_global(),bind=require_function_bind_context(),uncurryThis=require_function_uncurry_this(),defineProperties=require_object_define_properties().f,redefine=require_redefine(),anInstance=require_an_instance(),hasOwn=require_has_own_property(),assign2=require_object_assign(),arrayFrom=require_array_from(),arraySlice=require_array_slice_simple(),codeAt=require_string_multibyte().codeAt,toASCII=require_string_punycode_to_ascii(),$toString=require_to_string(),setToStringTag=require_set_to_string_tag(),URLSearchParamsModule=require_web_url_search_params(),InternalStateModule=require_internal_state(),setInternalState=InternalStateModule.set,getInternalURLState=InternalStateModule.getterFor("URL"),URLSearchParams2=URLSearchParamsModule.URLSearchParams,getInternalSearchParamsState=URLSearchParamsModule.getState,NativeURL=global.URL,TypeError2=global.TypeError,parseInt2=global.parseInt,floor=Math.floor,pow=Math.pow,charAt=uncurryThis("".charAt),exec=uncurryThis(/./.exec),join=uncurryThis([].join),numberToString=uncurryThis(1 .toString),pop=uncurryThis([].pop),push=uncurryThis([].push),replace=uncurryThis("".replace),shift=uncurryThis([].shift),split=uncurryThis("".split),stringSlice=uncurryThis("".slice),toLowerCase=uncurryThis("".toLowerCase),unshift=uncurryThis([].unshift),INVALID_AUTHORITY="Invalid authority",INVALID_SCHEME="Invalid scheme",INVALID_HOST="Invalid host",INVALID_PORT="Invalid port",ALPHA=/[a-z]/i,ALPHANUMERIC=/[\d+-.a-z]/i,DIGIT=/\d/,HEX_START=/^0x/i,OCT=/^[0-7]+$/,DEC=/^\d+$/,HEX=/^[\da-f]+$/i,FORBIDDEN_HOST_CODE_POINT=/[\0\t\n\r #%/:<>?@[\\\]^|]/,FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT=/[\0\t\n\r #/:<>?@[\\\]^|]/,LEADING_AND_TRAILING_C0_CONTROL_OR_SPACE=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,TAB_AND_NEW_LINE=/[\t\n\r]/g,EOF,parseIPv4=function(input){var parts=split(input,"."),partsLength,numbers,index,part,radix,number,ipv4;if(parts.length&&parts[parts.length-1]==""&&parts.length--,partsLength=parts.length,partsLength>4)return input;for(numbers=[],index=0;index<partsLength;index++){if(part=parts[index],part=="")return input;if(radix=10,part.length>1&&charAt(part,0)=="0"&&(radix=exec(HEX_START,part)?16:8,part=stringSlice(part,radix==8?1:2)),part==="")number=0;else{if(!exec(radix==10?DEC:radix==8?OCT:HEX,part))return input;number=parseInt2(part,radix)}push(numbers,number)}for(index=0;index<partsLength;index++)if(number=numbers[index],index==partsLength-1){if(number>=pow(256,5-partsLength))return null}else if(number>255)return null;for(ipv4=pop(numbers),index=0;index<numbers.length;index++)ipv4+=numbers[index]*pow(256,3-index);return ipv4},parseIPv6=function(input){var address=[0,0,0,0,0,0,0,0],pieceIndex=0,compress=null,pointer=0,value,length,numbersSeen,ipv4Piece,number,swaps,swap,chr=function(){return charAt(input,pointer)};if(chr()==":"){if(charAt(input,1)!=":")return;pointer+=2,pieceIndex++,compress=pieceIndex}for(;chr();){if(pieceIndex==8)return;if(chr()==":"){if(compress!==null)return;pointer++,pieceIndex++,compress=pieceIndex;continue}for(value=length=0;length<4&&exec(HEX,chr());)value=value*16+parseInt2(chr(),16),pointer++,length++;if(chr()=="."){if(length==0||(pointer-=length,pieceIndex>6))return;for(numbersSeen=0;chr();){if(ipv4Piece=null,numbersSeen>0)if(chr()=="."&&numbersSeen<4)pointer++;else return;if(!exec(DIGIT,chr()))return;for(;exec(DIGIT,chr());){if(number=parseInt2(chr(),10),ipv4Piece===null)ipv4Piece=number;else{if(ipv4Piece==0)return;ipv4Piece=ipv4Piece*10+number}if(ipv4Piece>255)return;pointer++}address[pieceIndex]=address[pieceIndex]*256+ipv4Piece,numbersSeen++,(numbersSeen==2||numbersSeen==4)&&pieceIndex++}if(numbersSeen!=4)return;break}else if(chr()==":"){if(pointer++,!chr())return}else if(chr())return;address[pieceIndex++]=value}if(compress!==null)for(swaps=pieceIndex-compress,pieceIndex=7;pieceIndex!=0&&swaps>0;)swap=address[pieceIndex],address[pieceIndex--]=address[compress+swaps-1],address[compress+--swaps]=swap;else if(pieceIndex!=8)return;return address},findLongestZeroSequence=function(ipv6){for(var maxIndex=null,maxLength=1,currStart=null,currLength=0,index=0;index<8;index++)ipv6[index]!==0?(currLength>maxLength&&(maxIndex=currStart,maxLength=currLength),currStart=null,currLength=0):(currStart===null&&(currStart=index),++currLength);return currLength>maxLength&&(maxIndex=currStart,maxLength=currLength),maxIndex},serializeHost=function(host){var result,index,compress,ignore0;if(typeof host=="number"){for(result=[],index=0;index<4;index++)unshift(result,host%256),host=floor(host/256);return join(result,".")}else if(typeof host=="object"){for(result="",compress=findLongestZeroSequence(host),index=0;index<8;index++)ignore0&&host[index]===0||(ignore0&&(ignore0=!1),compress===index?(result+=index?":":"::",ignore0=!0):(result+=numberToString(host[index],16),index<7&&(result+=":")));return"["+result+"]"}return host},C0ControlPercentEncodeSet={},fragmentPercentEncodeSet=assign2({},C0ControlPercentEncodeSet,{" ":1,'"':1,"<":1,">":1,"`":1}),pathPercentEncodeSet=assign2({},fragmentPercentEncodeSet,{"#":1,"?":1,"{":1,"}":1}),userinfoPercentEncodeSet=assign2({},pathPercentEncodeSet,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),percentEncode=function(chr,set){var code=codeAt(chr,0);return code>32&&code<127&&!hasOwn(set,chr)?chr:encodeURIComponent(chr)},specialSchemes={ftp:21,file:null,http:80,https:443,ws:80,wss:443},isWindowsDriveLetter=function(string,normalized){var second;return string.length==2&&exec(ALPHA,charAt(string,0))&&((second=charAt(string,1))==":"||!normalized&&second=="|")},startsWithWindowsDriveLetter=function(string){var third;return string.length>1&&isWindowsDriveLetter(stringSlice(string,0,2))&&(string.length==2||(third=charAt(string,2))==="/"||third==="\\"||third==="?"||third==="#")},isSingleDot=function(segment){return segment==="."||toLowerCase(segment)==="%2e"},isDoubleDot=function(segment){return segment=toLowerCase(segment),segment===".."||segment==="%2e."||segment===".%2e"||segment==="%2e%2e"},SCHEME_START={},SCHEME={},NO_SCHEME={},SPECIAL_RELATIVE_OR_AUTHORITY={},PATH_OR_AUTHORITY={},RELATIVE={},RELATIVE_SLASH={},SPECIAL_AUTHORITY_SLASHES={},SPECIAL_AUTHORITY_IGNORE_SLASHES={},AUTHORITY={},HOST={},HOSTNAME={},PORT={},FILE={},FILE_SLASH={},FILE_HOST={},PATH_START={},PATH={},CANNOT_BE_A_BASE_URL_PATH={},QUERY={},FRAGMENT={},URLState=function(url,isBase,base){var urlString=$toString(url),baseState,failure,searchParams;if(isBase){if(failure=this.parse(urlString),failure)throw TypeError2(failure);this.searchParams=null}else{if(base!==void 0&&(baseState=new URLState(base,!0)),failure=this.parse(urlString,null,baseState),failure)throw TypeError2(failure);searchParams=getInternalSearchParamsState(new URLSearchParams2),searchParams.bindURL(this),this.searchParams=searchParams}};URLState.prototype={type:"URL",parse:function(input,stateOverride,base){var url=this,state=stateOverride||SCHEME_START,pointer=0,buffer="",seenAt=!1,seenBracket=!1,seenPasswordToken=!1,codePoints,chr,bufferCodePoints,failure;for(input=$toString(input),stateOverride||(url.scheme="",url.username="",url.password="",url.host=null,url.port=null,url.path=[],url.query=null,url.fragment=null,url.cannotBeABaseURL=!1,input=replace(input,LEADING_AND_TRAILING_C0_CONTROL_OR_SPACE,"")),input=replace(input,TAB_AND_NEW_LINE,""),codePoints=arrayFrom(input);pointer<=codePoints.length;){switch(chr=codePoints[pointer],state){case SCHEME_START:if(chr&&exec(ALPHA,chr))buffer+=toLowerCase(chr),state=SCHEME;else{if(stateOverride)return INVALID_SCHEME;state=NO_SCHEME;continue}break;case SCHEME:if(chr&&(exec(ALPHANUMERIC,chr)||chr=="+"||chr=="-"||chr=="."))buffer+=toLowerCase(chr);else if(chr==":"){if(stateOverride&&(url.isSpecial()!=hasOwn(specialSchemes,buffer)||buffer=="file"&&(url.includesCredentials()||url.port!==null)||url.scheme=="file"&&!url.host))return;if(url.scheme=buffer,stateOverride){url.isSpecial()&&specialSchemes[url.scheme]==url.port&&(url.port=null);return}buffer="",url.scheme=="file"?state=FILE:url.isSpecial()&&base&&base.scheme==url.scheme?state=SPECIAL_RELATIVE_OR_AUTHORITY:url.isSpecial()?state=SPECIAL_AUTHORITY_SLASHES:codePoints[pointer+1]=="/"?(state=PATH_OR_AUTHORITY,pointer++):(url.cannotBeABaseURL=!0,push(url.path,""),state=CANNOT_BE_A_BASE_URL_PATH)}else{if(stateOverride)return INVALID_SCHEME;buffer="",state=NO_SCHEME,pointer=0;continue}break;case NO_SCHEME:if(!base||base.cannotBeABaseURL&&chr!="#")return INVALID_SCHEME;if(base.cannotBeABaseURL&&chr=="#"){url.scheme=base.scheme,url.path=arraySlice(base.path),url.query=base.query,url.fragment="",url.cannotBeABaseURL=!0,state=FRAGMENT;break}state=base.scheme=="file"?FILE:RELATIVE;continue;case SPECIAL_RELATIVE_OR_AUTHORITY:if(chr=="/"&&codePoints[pointer+1]=="/")state=SPECIAL_AUTHORITY_IGNORE_SLASHES,pointer++;else{state=RELATIVE;continue}break;case PATH_OR_AUTHORITY:if(chr=="/"){state=AUTHORITY;break}else{state=PATH;continue}case RELATIVE:if(url.scheme=base.scheme,chr==EOF)url.username=base.username,url.password=base.password,url.host=base.host,url.port=base.port,url.path=arraySlice(base.path),url.query=base.query;else if(chr=="/"||chr=="\\"&&url.isSpecial())state=RELATIVE_SLASH;else if(chr=="?")url.username=base.username,url.password=base.password,url.host=base.host,url.port=base.port,url.path=arraySlice(base.path),url.query="",state=QUERY;else if(chr=="#")url.username=base.username,url.password=base.password,url.host=base.host,url.port=base.port,url.path=arraySlice(base.path),url.query=base.query,url.fragment="",state=FRAGMENT;else{url.username=base.username,url.password=base.password,url.host=base.host,url.port=base.port,url.path=arraySlice(base.path),url.path.length--,state=PATH;continue}break;case RELATIVE_SLASH:if(url.isSpecial()&&(chr=="/"||chr=="\\"))state=SPECIAL_AUTHORITY_IGNORE_SLASHES;else if(chr=="/")state=AUTHORITY;else{url.username=base.username,url.password=base.password,url.host=base.host,url.port=base.port,state=PATH;continue}break;case SPECIAL_AUTHORITY_SLASHES:if(state=SPECIAL_AUTHORITY_IGNORE_SLASHES,chr!="/"||charAt(buffer,pointer+1)!="/")continue;pointer++;break;case SPECIAL_AUTHORITY_IGNORE_SLASHES:if(chr!="/"&&chr!="\\"){state=AUTHORITY;continue}break;case AUTHORITY:if(chr=="@"){seenAt&&(buffer="%40"+buffer),seenAt=!0,bufferCodePoints=arrayFrom(buffer);for(var i=0;i<bufferCodePoints.length;i++){var codePoint=bufferCodePoints[i];if(codePoint==":"&&!seenPasswordToken){seenPasswordToken=!0;continue}var encodedCodePoints=percentEncode(codePoint,userinfoPercentEncodeSet);seenPasswordToken?url.password+=encodedCodePoints:url.username+=encodedCodePoints}buffer=""}else if(chr==EOF||chr=="/"||chr=="?"||chr=="#"||chr=="\\"&&url.isSpecial()){if(seenAt&&buffer=="")return INVALID_AUTHORITY;pointer-=arrayFrom(buffer).length+1,buffer="",state=HOST}else buffer+=chr;break;case HOST:case HOSTNAME:if(stateOverride&&url.scheme=="file"){state=FILE_HOST;continue}else if(chr==":"&&!seenBracket){if(buffer=="")return INVALID_HOST;if(failure=url.parseHost(buffer),failure)return failure;if(buffer="",state=PORT,stateOverride==HOSTNAME)return}else if(chr==EOF||chr=="/"||chr=="?"||chr=="#"||chr=="\\"&&url.isSpecial()){if(url.isSpecial()&&buffer=="")return INVALID_HOST;if(stateOverride&&buffer==""&&(url.includesCredentials()||url.port!==null))return;if(failure=url.parseHost(buffer),failure)return failure;if(buffer="",state=PATH_START,stateOverride)return;continue}else chr=="["?seenBracket=!0:chr=="]"&&(seenBracket=!1),buffer+=chr;break;case PORT:if(exec(DIGIT,chr))buffer+=chr;else if(chr==EOF||chr=="/"||chr=="?"||chr=="#"||chr=="\\"&&url.isSpecial()||stateOverride){if(buffer!=""){var port=parseInt2(buffer,10);if(port>65535)return INVALID_PORT;url.port=url.isSpecial()&&port===specialSchemes[url.scheme]?null:port,buffer=""}if(stateOverride)return;state=PATH_START;continue}else return INVALID_PORT;break;case FILE:if(url.scheme="file",chr=="/"||chr=="\\")state=FILE_SLASH;else if(base&&base.scheme=="file")if(chr==EOF)url.host=base.host,url.path=arraySlice(base.path),url.query=base.query;else if(chr=="?")url.host=base.host,url.path=arraySlice(base.path),url.query="",state=QUERY;else if(chr=="#")url.host=base.host,url.path=arraySlice(base.path),url.query=base.query,url.fragment="",state=FRAGMENT;else{startsWithWindowsDriveLetter(join(arraySlice(codePoints,pointer),""))||(url.host=base.host,url.path=arraySlice(base.path),url.shortenPath()),state=PATH;continue}else{state=PATH;continue}break;case FILE_SLASH:if(chr=="/"||chr=="\\"){state=FILE_HOST;break}base&&base.scheme=="file"&&!startsWithWindowsDriveLetter(join(arraySlice(codePoints,pointer),""))&&(isWindowsDriveLetter(base.path[0],!0)?push(url.path,base.path[0]):url.host=base.host),state=PATH;continue;case FILE_HOST:if(chr==EOF||chr=="/"||chr=="\\"||chr=="?"||chr=="#"){if(!stateOverride&&isWindowsDriveLetter(buffer))state=PATH;else if(buffer==""){if(url.host="",stateOverride)return;state=PATH_START}else{if(failure=url.parseHost(buffer),failure)return failure;if(url.host=="localhost"&&(url.host=""),stateOverride)return;buffer="",state=PATH_START}continue}else buffer+=chr;break;case PATH_START:if(url.isSpecial()){if(state=PATH,chr!="/"&&chr!="\\")continue}else if(!stateOverride&&chr=="?")url.query="",state=QUERY;else if(!stateOverride&&chr=="#")url.fragment="",state=FRAGMENT;else if(chr!=EOF&&(state=PATH,chr!="/"))continue;break;case PATH:if(chr==EOF||chr=="/"||chr=="\\"&&url.isSpecial()||!stateOverride&&(chr=="?"||chr=="#")){if(isDoubleDot(buffer)?(url.shortenPath(),chr!="/"&&!(chr=="\\"&&url.isSpecial())&&push(url.path,"")):isSingleDot(buffer)?chr!="/"&&!(chr=="\\"&&url.isSpecial())&&push(url.path,""):(url.scheme=="file"&&!url.path.length&&isWindowsDriveLetter(buffer)&&(url.host&&(url.host=""),buffer=charAt(buffer,0)+":"),push(url.path,buffer)),buffer="",url.scheme=="file"&&(chr==EOF||chr=="?"||chr=="#"))for(;url.path.length>1&&url.path[0]==="";)shift(url.path);chr=="?"?(url.query="",state=QUERY):chr=="#"&&(url.fragment="",state=FRAGMENT)}else buffer+=percentEncode(chr,pathPercentEncodeSet);break;case CANNOT_BE_A_BASE_URL_PATH:chr=="?"?(url.query="",state=QUERY):chr=="#"?(url.fragment="",state=FRAGMENT):chr!=EOF&&(url.path[0]+=percentEncode(chr,C0ControlPercentEncodeSet));break;case QUERY:!stateOverride&&chr=="#"?(url.fragment="",state=FRAGMENT):chr!=EOF&&(chr=="'"&&url.isSpecial()?url.query+="%27":chr=="#"?url.query+="%23":url.query+=percentEncode(chr,C0ControlPercentEncodeSet));break;case FRAGMENT:chr!=EOF&&(url.fragment+=percentEncode(chr,fragmentPercentEncodeSet));break}pointer++}},parseHost:function(input){var result,codePoints,index;if(charAt(input,0)=="["){if(charAt(input,input.length-1)!="]"||(result=parseIPv6(stringSlice(input,1,-1)),!result))return INVALID_HOST;this.host=result}else if(this.isSpecial()){if(input=toASCII(input),exec(FORBIDDEN_HOST_CODE_POINT,input)||(result=parseIPv4(input),result===null))return INVALID_HOST;this.host=result}else{if(exec(FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT,input))return INVALID_HOST;for(result="",codePoints=arrayFrom(input),index=0;index<codePoints.length;index++)result+=percentEncode(codePoints[index],C0ControlPercentEncodeSet);this.host=result}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme=="file"},includesCredentials:function(){return this.username!=""||this.password!=""},isSpecial:function(){return hasOwn(specialSchemes,this.scheme)},shortenPath:function(){var path=this.path,pathSize=path.length;pathSize&&(this.scheme!="file"||pathSize!=1||!isWindowsDriveLetter(path[0],!0))&&path.length--},serialize:function(){var url=this,scheme=url.scheme,username=url.username,password=url.password,host=url.host,port=url.port,path=url.path,query=url.query,fragment=url.fragment,output=scheme+":";return host!==null?(output+="//",url.includesCredentials()&&(output+=username+(password?":"+password:"")+"@"),output+=serializeHost(host),port!==null&&(output+=":"+port)):scheme=="file"&&(output+="//"),output+=url.cannotBeABaseURL?path[0]:path.length?"/"+join(path,"/"):"",query!==null&&(output+="?"+query),fragment!==null&&(output+="#"+fragment),output},setHref:function(href){var failure=this.parse(href);if(failure)throw TypeError2(failure);this.searchParams.update()},getOrigin:function(){var scheme=this.scheme,port=this.port;if(scheme=="blob")try{return new URLConstructor(scheme.path[0]).origin}catch(error){return"null"}return scheme=="file"||!this.isSpecial()?"null":scheme+"://"+serializeHost(this.host)+(port!==null?":"+port:"")},getProtocol:function(){return this.scheme+":"},setProtocol:function(protocol){this.parse($toString(protocol)+":",SCHEME_START)},getUsername:function(){return this.username},setUsername:function(username){var codePoints=arrayFrom($toString(username));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var i=0;i<codePoints.length;i++)this.username+=percentEncode(codePoints[i],userinfoPercentEncodeSet)}},getPassword:function(){return this.password},setPassword:function(password){var codePoints=arrayFrom($toString(password));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var i=0;i<codePoints.length;i++)this.password+=percentEncode(codePoints[i],userinfoPercentEncodeSet)}},getHost:function(){var host=this.host,port=this.port;return host===null?"":port===null?serializeHost(host):serializeHost(host)+":"+port},setHost:function(host){this.cannotBeABaseURL||this.parse(host,HOST)},getHostname:function(){var host=this.host;return host===null?"":serializeHost(host)},setHostname:function(hostname){this.cannotBeABaseURL||this.parse(hostname,HOSTNAME)},getPort:function(){var port=this.port;return port===null?"":$toString(port)},setPort:function(port){this.cannotHaveUsernamePasswordPort()||(port=$toString(port),port==""?this.port=null:this.parse(port,PORT))},getPathname:function(){var path=this.path;return this.cannotBeABaseURL?path[0]:path.length?"/"+join(path,"/"):""},setPathname:function(pathname){this.cannotBeABaseURL||(this.path=[],this.parse(pathname,PATH_START))},getSearch:function(){var query=this.query;return query?"?"+query:""},setSearch:function(search){search=$toString(search),search==""?this.query=null:(charAt(search,0)=="?"&&(search=stringSlice(search,1)),this.query="",this.parse(search,QUERY)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var fragment=this.fragment;return fragment?"#"+fragment:""},setHash:function(hash){if(hash=$toString(hash),hash==""){this.fragment=null;return}charAt(hash,0)=="#"&&(hash=stringSlice(hash,1)),this.fragment="",this.parse(hash,FRAGMENT)},update:function(){this.query=this.searchParams.serialize()||null}};var URLConstructor=function(url){var that=anInstance(this,URLPrototype),base=arguments.length>1?arguments[1]:void 0,state=setInternalState(that,new URLState(url,!1,base));DESCRIPTORS||(that.href=state.serialize(),that.origin=state.getOrigin(),that.protocol=state.getProtocol(),that.username=state.getUsername(),that.password=state.getPassword(),that.host=state.getHost(),that.hostname=state.getHostname(),that.port=state.getPort(),that.pathname=state.getPathname(),that.search=state.getSearch(),that.searchParams=state.getSearchParams(),that.hash=state.getHash())},URLPrototype=URLConstructor.prototype,accessorDescriptor=function(getter,setter){return{get:function(){return getInternalURLState(this)[getter]()},set:setter&&function(value){return getInternalURLState(this)[setter](value)},configurable:!0,enumerable:!0}};DESCRIPTORS&&defineProperties(URLPrototype,{href:accessorDescriptor("serialize","setHref"),origin:accessorDescriptor("getOrigin"),protocol:accessorDescriptor("getProtocol","setProtocol"),username:accessorDescriptor("getUsername","setUsername"),password:accessorDescriptor("getPassword","setPassword"),host:accessorDescriptor("getHost","setHost"),hostname:accessorDescriptor("getHostname","setHostname"),port:accessorDescriptor("getPort","setPort"),pathname:accessorDescriptor("getPathname","setPathname"),search:accessorDescriptor("getSearch","setSearch"),searchParams:accessorDescriptor("getSearchParams"),hash:accessorDescriptor("getHash","setHash")});redefine(URLPrototype,"toJSON",function(){return getInternalURLState(this).serialize()},{enumerable:!0});redefine(URLPrototype,"toString",function(){return getInternalURLState(this).serialize()},{enumerable:!0});NativeURL&&(nativeCreateObjectURL=NativeURL.createObjectURL,nativeRevokeObjectURL=NativeURL.revokeObjectURL,nativeCreateObjectURL&&redefine(URLConstructor,"createObjectURL",bind(nativeCreateObjectURL,NativeURL)),nativeRevokeObjectURL&&redefine(URLConstructor,"revokeObjectURL",bind(nativeRevokeObjectURL,NativeURL)));var nativeCreateObjectURL,nativeRevokeObjectURL;setToStringTag(URLConstructor,"URL");$2({global:!0,forced:!USE_NATIVE_URL,sham:!DESCRIPTORS},{URL:URLConstructor})}});var require_set_species=__commonJS({"node_modules/core-js/internals/set-species.js"(exports,module){"use strict";init_define_process_env();init_shim();var getBuiltIn=require_get_built_in(),definePropertyModule=require_object_define_property(),wellKnownSymbol=require_well_known_symbol(),DESCRIPTORS=require_descriptors(),SPECIES=wellKnownSymbol("species");module.exports=function(CONSTRUCTOR_NAME){var Constructor=getBuiltIn(CONSTRUCTOR_NAME),defineProperty=definePropertyModule.f;DESCRIPTORS&&Constructor&&!Constructor[SPECIES]&&defineProperty(Constructor,SPECIES,{configurable:!0,get:function(){return this}})}}});var require_es_regexp_constructor=__commonJS({"node_modules/core-js/modules/es.regexp.constructor.js"(){init_define_process_env();init_shim();var DESCRIPTORS=require_descriptors(),global=require_global(),uncurryThis=require_function_uncurry_this(),isForced=require_is_forced(),inheritIfRequired=require_inherit_if_required(),createNonEnumerableProperty=require_create_non_enumerable_property(),defineProperty=require_object_define_property().f,getOwnPropertyNames=require_object_get_own_property_names().f,isPrototypeOf=require_object_is_prototype_of(),isRegExp=require_is_regexp(),toString=require_to_string(),regExpFlags=require_regexp_flags(),stickyHelpers=require_regexp_sticky_helpers(),redefine=require_redefine(),fails=require_fails(),hasOwn=require_has_own_property(),enforceInternalState=require_internal_state().enforce,setSpecies=require_set_species(),wellKnownSymbol=require_well_known_symbol(),UNSUPPORTED_DOT_ALL=require_regexp_unsupported_dot_all(),UNSUPPORTED_NCG=require_regexp_unsupported_ncg(),MATCH=wellKnownSymbol("match"),NativeRegExp=global.RegExp,RegExpPrototype=NativeRegExp.prototype,SyntaxError=global.SyntaxError,getFlags=uncurryThis(regExpFlags),exec=uncurryThis(RegExpPrototype.exec),charAt=uncurryThis("".charAt),replace=uncurryThis("".replace),stringIndexOf=uncurryThis("".indexOf),stringSlice=uncurryThis("".slice),IS_NCG=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,re1=/a/g,re2=/a/g,CORRECT_NEW=new NativeRegExp(re1)!==re1,MISSED_STICKY=stickyHelpers.MISSED_STICKY,UNSUPPORTED_Y=stickyHelpers.UNSUPPORTED_Y,BASE_FORCED=DESCRIPTORS&&(!CORRECT_NEW||MISSED_STICKY||UNSUPPORTED_DOT_ALL||UNSUPPORTED_NCG||fails(function(){return re2[MATCH]=!1,NativeRegExp(re1)!=re1||NativeRegExp(re2)==re2||NativeRegExp(re1,"i")!="/a/i"})),handleDotAll=function(string){for(var length=string.length,index2=0,result="",brackets=!1,chr;index2<=length;index2++){if(chr=charAt(string,index2),chr==="\\"){result+=chr+charAt(string,++index2);continue}!brackets&&chr==="."?result+="[\\s\\S]":(chr==="["?brackets=!0:chr==="]"&&(brackets=!1),result+=chr)}return result},handleNCG=function(string){for(var length=string.length,index2=0,result="",named=[],names={},brackets=!1,ncg=!1,groupid=0,groupname="",chr;index2<=length;index2++){if(chr=charAt(string,index2),chr==="\\")chr=chr+charAt(string,++index2);else if(chr==="]")brackets=!1;else if(!brackets)switch(!0){case chr==="[":brackets=!0;break;case chr==="(":exec(IS_NCG,stringSlice(string,index2+1))&&(index2+=2,ncg=!0),result+=chr,groupid++;continue;case(chr===">"&&ncg):if(groupname===""||hasOwn(names,groupname))throw new SyntaxError("Invalid capture group name");names[groupname]=!0,named[named.length]=[groupname,groupid],ncg=!1,groupname="";continue}ncg?groupname+=chr:result+=chr}return[result,named]};if(isForced("RegExp",BASE_FORCED)){for(RegExpWrapper=function(pattern,flags){var thisIsRegExp=isPrototypeOf(RegExpPrototype,this),patternIsRegExp=isRegExp(pattern),flagsAreUndefined=flags===void 0,groups=[],rawPattern=pattern,rawFlags,dotAll,sticky,handled,result,state;if(!thisIsRegExp&&patternIsRegExp&&flagsAreUndefined&&pattern.constructor===RegExpWrapper)return pattern;if((patternIsRegExp||isPrototypeOf(RegExpPrototype,pattern))&&(pattern=pattern.source,flagsAreUndefined&&(flags="flags"in rawPattern?rawPattern.flags:getFlags(rawPattern))),pattern=pattern===void 0?"":toString(pattern),flags=flags===void 0?"":toString(flags),rawPattern=pattern,UNSUPPORTED_DOT_ALL&&"dotAll"in re1&&(dotAll=!!flags&&stringIndexOf(flags,"s")>-1,dotAll&&(flags=replace(flags,/s/g,""))),rawFlags=flags,MISSED_STICKY&&"sticky"in re1&&(sticky=!!flags&&stringIndexOf(flags,"y")>-1,sticky&&UNSUPPORTED_Y&&(flags=replace(flags,/y/g,""))),UNSUPPORTED_NCG&&(handled=handleNCG(pattern),pattern=handled[0],groups=handled[1]),result=inheritIfRequired(NativeRegExp(pattern,flags),thisIsRegExp?this:RegExpPrototype,RegExpWrapper),(dotAll||sticky||groups.length)&&(state=enforceInternalState(result),dotAll&&(state.dotAll=!0,state.raw=RegExpWrapper(handleDotAll(pattern),rawFlags)),sticky&&(state.sticky=!0),groups.length&&(state.groups=groups)),pattern!==rawPattern)try{createNonEnumerableProperty(result,"source",rawPattern===""?"(?:)":rawPattern)}catch(error){}return result},proxy=function(key){key in RegExpWrapper||defineProperty(RegExpWrapper,key,{configurable:!0,get:function(){return NativeRegExp[key]},set:function(it){NativeRegExp[key]=it}})},keys=getOwnPropertyNames(NativeRegExp),index=0;keys.length>index;)proxy(keys[index++]);RegExpPrototype.constructor=RegExpWrapper,RegExpWrapper.prototype=RegExpPrototype,redefine(global,"RegExp",RegExpWrapper)}var RegExpWrapper,proxy,keys,index;setSpecies("RegExp")}});var require_es_regexp_dot_all=__commonJS({"node_modules/core-js/modules/es.regexp.dot-all.js"(){init_define_process_env();init_shim();var global=require_global(),DESCRIPTORS=require_descriptors(),UNSUPPORTED_DOT_ALL=require_regexp_unsupported_dot_all(),classof=require_classof_raw(),defineProperty=require_object_define_property().f,getInternalState=require_internal_state().get,RegExpPrototype=RegExp.prototype,TypeError2=global.TypeError;DESCRIPTORS&&UNSUPPORTED_DOT_ALL&&defineProperty(RegExpPrototype,"dotAll",{configurable:!0,get:function(){if(this!==RegExpPrototype){if(classof(this)==="RegExp")return!!getInternalState(this).dotAll;throw TypeError2("Incompatible receiver, RegExp required")}}})}});var require_this_number_value=__commonJS({"node_modules/core-js/internals/this-number-value.js"(exports,module){init_define_process_env();init_shim();var uncurryThis=require_function_uncurry_this();module.exports=uncurryThis(1 .valueOf)}});var require_string_repeat=__commonJS({"node_modules/core-js/internals/string-repeat.js"(exports,module){"use strict";init_define_process_env();init_shim();var global=require_global(),toIntegerOrInfinity=require_to_integer_or_infinity(),toString=require_to_string(),requireObjectCoercible=require_require_object_coercible(),RangeError2=global.RangeError;module.exports=function(count){var str=toString(requireObjectCoercible(this)),result="",n=toIntegerOrInfinity(count);if(n<0||n==1/0)throw RangeError2("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(str+=str))n&1&&(result+=str);return result}}});var require_es_number_to_fixed=__commonJS({"node_modules/core-js/modules/es.number.to-fixed.js"(){"use strict";init_define_process_env();init_shim();var $2=require_export(),global=require_global(),uncurryThis=require_function_uncurry_this(),toIntegerOrInfinity=require_to_integer_or_infinity(),thisNumberValue=require_this_number_value(),$repeat=require_string_repeat(),fails=require_fails(),RangeError2=global.RangeError,String2=global.String,floor=Math.floor,repeat=uncurryThis($repeat),stringSlice=uncurryThis("".slice),un$ToFixed=uncurryThis(1 .toFixed),pow=function(x,n,acc){return n===0?acc:n%2===1?pow(x,n-1,acc*x):pow(x*x,n/2,acc)},log=function(x){for(var n=0,x2=x;x2>=4096;)n+=12,x2/=4096;for(;x2>=2;)n+=1,x2/=2;return n},multiply=function(data,n,c){for(var index=-1,c2=c;++index<6;)c2+=n*data[index],data[index]=c2%1e7,c2=floor(c2/1e7)},divide=function(data,n){for(var index=6,c=0;--index>=0;)c+=data[index],data[index]=floor(c/n),c=c%n*1e7},dataToString=function(data){for(var index=6,s="";--index>=0;)if(s!==""||index===0||data[index]!==0){var t=String2(data[index]);s=s===""?t:s+repeat("0",7-t.length)+t}return s},FORCED=fails(function(){return un$ToFixed(8e-5,3)!=="0.000"||un$ToFixed(.9,0)!=="1"||un$ToFixed(1.255,2)!=="1.25"||un$ToFixed(0xde0b6b3a7640080,0)!=="1000000000000000128"})||!fails(function(){un$ToFixed({})});$2({target:"Number",proto:!0,forced:FORCED},{toFixed:function(fractionDigits){var number=thisNumberValue(this),fractDigits=toIntegerOrInfinity(fractionDigits),data=[0,0,0,0,0,0],sign="",result="0",e,z,j,k;if(fractDigits<0||fractDigits>20)throw RangeError2("Incorrect fraction digits");if(number!=number)return"NaN";if(number<=-1e21||number>=1e21)return String2(number);if(number<0&&(sign="-",number=-number),number>1e-21)if(e=log(number*pow(2,69,1))-69,z=e<0?number*pow(2,-e,1):number/pow(2,e,1),z*=4503599627370496,e=52-e,e>0){for(multiply(data,0,z),j=fractDigits;j>=7;)multiply(data,1e7,0),j-=7;for(multiply(data,pow(10,j,1),0),j=e-1;j>=23;)divide(data,1<<23),j-=23;divide(data,1<<j),multiply(data,1,1),divide(data,2),result=dataToString(data)}else multiply(data,0,z),multiply(data,1<<-e,0),result=dataToString(data)+repeat("0",fractDigits);return fractDigits>0?(k=result.length,result=sign+(k<=fractDigits?"0."+repeat("0",fractDigits-k)+result:stringSlice(result,0,k-fractDigits)+"."+stringSlice(result,k-fractDigits))):result=sign+result,result}})}});var require_array_reduce=__commonJS({"node_modules/core-js/internals/array-reduce.js"(exports,module){init_define_process_env();init_shim();var global=require_global(),aCallable=require_a_callable(),toObject=require_to_object(),IndexedObject=require_indexed_object(),lengthOfArrayLike=require_length_of_array_like(),TypeError2=global.TypeError,createMethod=function(IS_RIGHT){return function(that,callbackfn,argumentsLength,memo){aCallable(callbackfn);var O=toObject(that),self2=IndexedObject(O),length=lengthOfArrayLike(O),index=IS_RIGHT?length-1:0,i=IS_RIGHT?-1:1;if(argumentsLength<2)for(;;){if(index in self2){memo=self2[index],index+=i;break}if(index+=i,IS_RIGHT?index<0:length<=index)throw TypeError2("Reduce of empty array with no initial value")}for(;IS_RIGHT?index>=0:length>index;index+=i)index in self2&&(memo=callbackfn(memo,self2[index],index,O));return memo}};module.exports={left:createMethod(!1),right:createMethod(!0)}}});var require_engine_is_node=__commonJS({"node_modules/core-js/internals/engine-is-node.js"(exports,module){init_define_process_env();init_shim();var classof=require_classof_raw(),global=require_global();module.exports=classof(global.process)=="process"}});var require_es_array_reduce=__commonJS({"node_modules/core-js/modules/es.array.reduce.js"(){"use strict";init_define_process_env();init_shim();var $2=require_export(),$reduce=require_array_reduce().left,arrayMethodIsStrict=require_array_method_is_strict(),CHROME_VERSION=require_engine_v8_version(),IS_NODE=require_engine_is_node(),STRICT_METHOD=arrayMethodIsStrict("reduce"),CHROME_BUG=!IS_NODE&&CHROME_VERSION>79&&CHROME_VERSION<83;$2({target:"Array",proto:!0,forced:!STRICT_METHOD||CHROME_BUG},{reduce:function(callbackfn){var length=arguments.length;return $reduce(this,callbackfn,length,length>1?arguments[1]:void 0)}})}});var require_btype_ids=__commonJS({"lib-browser-old/lang/btype_ids.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.api_type=api_type;exports.api_type_inner=api_type_inner;exports.bubble_null=void 0;exports.custom_type=custom_type;exports.custom_type_name=custom_type_name;exports.is_api_type=is_api_type;exports.is_custom_type=is_custom_type;exports.is_list=is_list;exports.is_option_set=is_option_set;exports.list_element_type=list_element_type;exports.list_type=list_type;exports.option_set_name=option_set_name;exports.option_set_type=option_set_type;require_es_string_starts_with();var _safe_require=_interopRequireDefault(require_safe_require()),_logger=require_logger();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_safe_require.default.safe_register("./lang/btype_ids",exports);var list_prefix="list.";function is_list(id){var _id$startsWith;return(_id$startsWith=id==null?void 0:id.startsWith(list_prefix))!=null?_id$startsWith:!1}function list_type(id){return"".concat(list_prefix).concat(id)}function list_element_type(id){return is_list(id)||(0,_logger.warn)("btype_ids assertion failure!",{function:"list",btype_id:id}),id.slice(list_prefix.length)}var custom_prefix="custom.";function is_custom_type(id){var _id$startsWith2;return(_id$startsWith2=id==null?void 0:id.startsWith(custom_prefix))!=null?_id$startsWith2:!1}function custom_type(name){return"".concat(custom_prefix).concat(name)}function custom_type_name(id){return id==="user"?"user":(is_custom_type(id)||(0,_logger.warn)("btype_ids assertion failure!",{function:"custom",btype_id:id}),id.slice(custom_prefix.length))}var api_prefix="api.";function is_api_type(id){var _id$startsWith3;return(_id$startsWith3=id==null?void 0:id.startsWith(api_prefix))!=null?_id$startsWith3:!1}function api_type(id){return"".concat(api_prefix).concat(id)}function api_type_inner(id){return is_api_type(id)||(0,_logger.warn)("btype_ids assertion failure!",{function:"api",btype_id:id}),id.slice(api_prefix.length)}var option_prefix="option.";function is_option_set(id){var _id$startsWith4;return(_id$startsWith4=id==null?void 0:id.startsWith(option_prefix))!=null?_id$startsWith4:!1}function option_set_type(name){return"".concat(option_prefix).concat(name)}function option_set_name(id){return is_option_set(id)||(0,_logger.warn)("btype_ids assertion failure!",{function:"option_set",btype_id:id}),id.slice(option_prefix.length)}var bubble_null="null";exports.bubble_null=bubble_null}});var require_time=__commonJS({"lib-browser-old/constants/time.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.YEAR_S=exports.YEAR_MS=exports.YEAR_MONTH=exports.YEAR_H=exports.WEEK_S=exports.WEEK_MS=exports.WEEK_H=exports.TimeUnit=exports.THIRTY_DAY_S=exports.THIRTY_DAY_H=exports.SECOND_MS=exports.MINUTE_S=exports.MINUTE_MS=exports.MILLISECONDS_US=exports.MILLISECONDS_NS=exports.MICROSECONDS_NS=exports.HOUR_S=exports.HOUR_MS=exports.DAY_S=exports.DAY_MS=exports.DAY_H=void 0;var _safe_require=_interopRequireDefault(require_safe_require());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_safe_require.default.safe_register("./constants/time",exports);var YEAR_MONTH=12;exports.YEAR_MONTH=YEAR_MONTH;var DAY_H=24;exports.DAY_H=DAY_H;var WEEK_H=7*DAY_H;exports.WEEK_H=WEEK_H;var THIRTY_DAY_H=30*DAY_H;exports.THIRTY_DAY_H=THIRTY_DAY_H;var YEAR_H=365*DAY_H;exports.YEAR_H=YEAR_H;var MINUTE_S=60;exports.MINUTE_S=MINUTE_S;var HOUR_S=60*MINUTE_S;exports.HOUR_S=HOUR_S;var DAY_S=DAY_H*HOUR_S;exports.DAY_S=DAY_S;var WEEK_S=WEEK_H*HOUR_S;exports.WEEK_S=WEEK_S;var THIRTY_DAY_S=THIRTY_DAY_H*HOUR_S;exports.THIRTY_DAY_S=THIRTY_DAY_S;var YEAR_S=YEAR_H*HOUR_S;exports.YEAR_S=YEAR_S;var SECOND_MS=1e3;exports.SECOND_MS=SECOND_MS;var MINUTE_MS=MINUTE_S*SECOND_MS;exports.MINUTE_MS=MINUTE_MS;var HOUR_MS=HOUR_S*SECOND_MS;exports.HOUR_MS=HOUR_MS;var DAY_MS=DAY_S*SECOND_MS;exports.DAY_MS=DAY_MS;var WEEK_MS=WEEK_S*SECOND_MS;exports.WEEK_MS=WEEK_MS;var YEAR_MS=YEAR_S*SECOND_MS;exports.YEAR_MS=YEAR_MS;var MILLISECONDS_US=1e3;exports.MILLISECONDS_US=MILLISECONDS_US;var MILLISECONDS_NS=1e6;exports.MILLISECONDS_NS=MILLISECONDS_NS;var MICROSECONDS_NS=1e3;exports.MICROSECONDS_NS=MICROSECONDS_NS;var TimeUnit=function(TimeUnit2){return TimeUnit2.MINUTE="minute",TimeUnit2.HOUR="hour",TimeUnit2.DAY="day",TimeUnit2}({});exports.TimeUnit=TimeUnit}});var require_pluralize=__commonJS({"node_modules/pluralize/pluralize.js"(exports,module){init_define_process_env();init_shim();(function(root,pluralize){typeof __require=="function"&&typeof exports=="object"&&typeof module=="object"?module.exports=pluralize():typeof define=="function"&&define.amd?define(function(){return pluralize()}):root.pluralize=pluralize()})(exports,function(){var pluralRules=[],singularRules=[],uncountables={},irregularPlurals={},irregularSingles={};function sanitizeRule(rule){return typeof rule=="string"?new RegExp("^"+rule+"$","i"):rule}function restoreCase(word,token){return word===token?token:word===word.toLowerCase()?token.toLowerCase():word===word.toUpperCase()?token.toUpperCase():word[0]===word[0].toUpperCase()?token.charAt(0).toUpperCase()+token.substr(1).toLowerCase():token.toLowerCase()}function interpolate(str,args){return str.replace(/\$(\d{1,2})/g,function(match,index){return args[index]||""})}function replace(word,rule){return word.replace(rule[0],function(match,index){var result=interpolate(rule[1],arguments);return restoreCase(match===""?word[index-1]:match,result)})}function sanitizeWord(token,word,rules){if(!token.length||uncountables.hasOwnProperty(token))return word;for(var len=rules.length;len--;){var rule=rules[len];if(rule[0].test(word))return replace(word,rule)}return word}function replaceWord(replaceMap,keepMap,rules){return function(word){var token=word.toLowerCase();return keepMap.hasOwnProperty(token)?restoreCase(word,token):replaceMap.hasOwnProperty(token)?restoreCase(word,replaceMap[token]):sanitizeWord(token,word,rules)}}function checkWord(replaceMap,keepMap,rules,bool){return function(word){var token=word.toLowerCase();return keepMap.hasOwnProperty(token)?!0:replaceMap.hasOwnProperty(token)?!1:sanitizeWord(token,token,rules)===token}}function pluralize(word,count,inclusive){var pluralized=count===1?pluralize.singular(word):pluralize.plural(word);return(inclusive?count+" ":"")+pluralized}return pluralize.plural=replaceWord(irregularSingles,irregularPlurals,pluralRules),pluralize.isPlural=checkWord(irregularSingles,irregularPlurals,pluralRules),pluralize.singular=replaceWord(irregularPlurals,irregularSingles,singularRules),pluralize.isSingular=checkWord(irregularPlurals,irregularSingles,singularRules),pluralize.addPluralRule=function(rule,replacement){pluralRules.push([sanitizeRule(rule),replacement])},pluralize.addSingularRule=function(rule,replacement){singularRules.push([sanitizeRule(rule),replacement])},pluralize.addUncountableRule=function(word){if(typeof word=="string"){uncountables[word.toLowerCase()]=!0;return}pluralize.addPluralRule(word,"$0"),pluralize.addSingularRule(word,"$0")},pluralize.addIrregularRule=function(single,plural){plural=plural.toLowerCase(),single=single.toLowerCase(),irregularSingles[single]=plural,irregularPlurals[plural]=single},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["passerby","passersby"]].forEach(function(rule){return pluralize.addIrregularRule(rule[0],rule[1])}),[[/s?$/i,"s"],[/[^\u0000-\u007F]$/i,"$0"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|t[lm]as|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[ejzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/\b((?:tit)?m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach(function(rule){return pluralize.addPluralRule(rule[0],rule[1])}),[[/s$/i,""],[/(ss)$/i,"$1"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/\b((?:tit)?m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|t[lm]as|gas|(?:her|at|gr)o|[aeiou]ris)(?:es)?$/i,"$1"],[/(analy|diagno|parenthe|progno|synop|the|empha|cri|ne)(?:sis|ses)$/i,"$1sis"],[/(movie|twelve|abuse|e[mn]u)s$/i,"$1"],[/(test)(?:is|es)$/i,"$1is"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach(function(rule){return pluralize.addSingularRule(rule[0],rule[1])}),["adulthood","advice","agenda","aid","aircraft","alcohol","ammo","analytics","anime","athletics","audio","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","cod","commerce","cooperation","corps","debris","diabetes","digestion","elk","energy","equipment","excretion","expertise","firmware","flounder","fun","gallows","garbage","graffiti","hardware","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","mud","manga","news","only","personnel","pike","plankton","pliers","police","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","software","species","staff","swine","tennis","traffic","transportation","trout","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/pok[eé]mon$/i,/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach(pluralize.addUncountableRule),pluralize})}});var require_b_string=__commonJS({"lib-browser-old/u/shared/b_string.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.FirstLetterCapitalize=FirstLetterCapitalize;exports.add_thousand_sep=add_thousand_sep;exports.add_thousand_sep_locale=add_thousand_sep_locale;exports.cast_to_string=cast_to_string;exports.charCode=charCode;exports.compact_hours=void 0;exports.compact_number=compact_number;exports.create_compound_key=void 0;exports.create_css_class_from_label=create_css_class_from_label;exports.csv_to_downloadable_file=csv_to_downloadable_file;exports.custom_type_name=custom_type_name;exports.decode_key=decode_key;exports.eager_first_sentence_cut=eager_first_sentence_cut;exports.encode_key=encode_key;exports.ends_with=ends_with;exports.firebase_illegal=void 0;exports.firebase_remove_illegal=firebase_remove_illegal;exports.fixedEncodeURIComponent=fixedEncodeURIComponent;exports.format_bytes=format_bytes;exports.get_columns_header=get_columns_header;exports.hash_code=void 0;exports.id_safe=id_safe;exports.increment_filename=increment_filename;exports.is_email=is_email;exports.is_url=void 0;exports.is_url_safe=is_url_safe;exports.remove_invalid_from_num=remove_invalid_from_num;exports.replace_all=replace_all;exports.replace_spaces_with_hyphens=replace_spaces_with_hyphens;exports.safe_contains=void 0;exports.starts_with=starts_with;exports.starts_with_number=starts_with_number;exports.starts_with_vowel=starts_with_vowel;exports.string_contains=string_contains;exports.string_replace_range=string_replace_range;exports.text_contains=text_contains;exports.toTitleCase=toTitleCase;exports.to_num=to_num;exports.truncate_text=truncate_text;require_es_array_includes();require_es_string_includes();require_es_regexp_exec();require_es_string_split();require_es_string_replace();require_es_string_trim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_parse_float();require_web_url();require_web_url_search_params();require_es_string_match();require_es_regexp_test();require_es_regexp_to_string();require_es_regexp_constructor();require_es_regexp_dot_all();require_es_number_to_fixed();require_es_parse_int();require_es_object_values();require_es_object_entries();require_es_array_reduce();var url=_interopRequireWildcard(require_url()),errors=_interopRequireWildcard(require_errors()),logger=_interopRequireWildcard(require_logger()),_loggable=require_loggable(),_byte=require_byte(),_btype_ids=require_btype_ids(),_time=require_time(),_pluralize=_interopRequireDefault(require_pluralize());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function string_contains(str,target){return typeof str!="string"?(str!=null&&typeof str=="object"&&str.indexOf!=null&&logger.info("string contains called incorrectly on something vaguely like a string",{str:(0,_loggable.to_loggable)(str)}),!1):str.includes(target)}var safe_contains=string_contains;exports.safe_contains=safe_contains;function replace_all(original,find,replace){return original.split(find).join(replace!=null?replace:"")}function _remove_quote(str){return str.replace(/"/g,"")}function get_columns_header(str,separator,have_quotes){var _separator,_have_quotes;if((_separator=separator)!=null||(separator=","),(_have_quotes=have_quotes)!=null||(have_quotes=!1),!str||str.trim()==="")return;str=str.trim();let entries=str.split("\n"),res=[];for(let entry of entries[0].split(separator))have_quotes?res.push(_remove_quote(entry)):res.push(entry);return res}function to_num(n){let ret=typeof n=="string"?parseFloat(n):n;return isFinite(ret)?ret:null}function csv_to_downloadable_file(filename,str){if(typeof navigator>"u")return;let blob=new Blob([str],{type:"text/csv"});filename.slice(-4)!==".csv"&&(filename+=".csv");let maybe_IE_navigator=navigator;if(maybe_IE_navigator.msSaveOrOpenBlob){let blob_saver=maybe_IE_navigator.msSaveOrOpenBlob;setTimeout(()=>{blob_saver(blob,filename)},1e3)}else{let download_url=window.URL.createObjectURL(blob),a=document.createElement("a");a.className="fake-link-to-trigger-a-download",a.rel="noopener",a.download=filename,a.href=download_url,document.body.appendChild(a),a.click(),document.body.removeChild(a),setTimeout(()=>{window.URL.revokeObjectURL(download_url)},5e3)}}function truncate_text(str,n,no_break_words){if(typeof str!="string"||str.length<=n)return str;let sub_str=str.substr(0,n-1);return no_break_words?sub_str.substr(0,sub_str.lastIndexOf(" ")):sub_str+"\u2026"}function toTitleCase(str){let ignore_bbcode=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(typeof str!="string")return str;let regex=/(?:^|\s)./g;return ignore_bbcode&&(regex=/(?:^|\s)(?:\[.*?\])?./g),str.replace(regex,match=>{let len=match.length;return match.slice(0,len-1)+match[len-1].toUpperCase()})}function FirstLetterCapitalize(str){return typeof str!="string"||str.length===0?str:str[0].toUpperCase()+str.slice(1)}function is_email(val){if(typeof val!="string")return!1;let lowercase=val.toLowerCase(),match=lowercase.match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/);return!(!match||match[0]!==lowercase)}var is_url=function(val,allowed_protocols){if(typeof val!="string")return!1;let parsed;return val.slice(0,2)==="//"?(parsed=url.parse("http:"+val),parsed.protocol="//"):parsed=url.parse(val),!(!parsed.protocol||allowed_protocols&&!allowed_protocols.includes(parsed.protocol)||!parsed.host)};exports.is_url=is_url;function charCode(str){return str.charCodeAt(0)}function string_replace_range(str,start,end,replacement){return str.substring(0,start)+replacement+str.substring(end)}function text_contains(str,target){var _str$toLowerCase$inde,_str$toLowerCase$inde2,_str$toLowerCase,_target$toLowerCase;return(_str$toLowerCase$inde=str==null||(_str$toLowerCase$inde2=(_str$toLowerCase=str.toLowerCase()).indexOf)==null?void 0:_str$toLowerCase$inde2.call(_str$toLowerCase,(_target$toLowerCase=target==null?void 0:target.toLowerCase())!=null?_target$toLowerCase:""))!=null?_str$toLowerCase$inde:-1}function starts_with_vowel(str){return/^[aeiou]/i.test(str)}function ends_with(str,target){if(typeof str!="string")return!1;let idx=str.lastIndexOf(target);return idx===-1?!1:idx+target.length===str.length}function starts_with(str,target){return typeof str!="string"||typeof target!="string"?!1:str.slice(0,target.length)===target}function starts_with_number(str){return/^\d/.test(str)}function remove_invalid_from_num(n){let is_negative=n[0]==="-",valid=/[^0-9., ]+/g,ret=n.replace(valid,"");return is_negative&&(ret="-"+ret),ret}function fixedEncodeURIComponent(str){return encodeURIComponent(str).replace(/[!'()*]/g,c=>"%"+c.charCodeAt(0).toString(16))}var url_unsafe_regex_string="[^a-z0-9\\-]",url_unsafe_regex=new RegExp(url_unsafe_regex_string),url_unsafe_regex_g=new RegExp(url_unsafe_regex_string,"g");function is_url_safe(str){return!url_unsafe_regex.test(str)}function replace_spaces_with_hyphens(str){return(str!=null?str:"").toLowerCase().replace(/\s/g,"-").replace(url_unsafe_regex_g,"")}function format_bytes(bytes,decimals){var _decimals;if((_decimals=decimals)!=null||(decimals=0),bytes===0)return"0 Bytes";let i=Math.floor(Math.log(bytes)/Math.log(_byte.KIBIBYTE));return i===0&&(decimals=0),"".concat(parseFloat((bytes/Math.pow(_byte.KIBIBYTE,i)).toFixed(decimals))," ").concat(_byte.STORAGE_UNITS[i])}function increment_filename(filename){let regex=/\(([0-9]+)\)/,match=regex.exec(filename);if(match){let new_num=parseInt(match[1])+1;return filename.replace(regex,"(".concat(new_num,")"))}else{let pieces=filename.split(".");return pieces.slice(0,pieces.length-1).join(".")+" (1)."+pieces[pieces.length-1]}}function custom_type_name(type){return type!=="user"&&(type=(0,_btype_ids.custom_type)(type)),type}var escaping_char="&",illegal_key_mapping={1:".",2:"$",3:"#",4:"[",5:"]",6:"/"},firebase_illegal_regex_string="[".concat(Object.values(illegal_key_mapping).map(v=>"\\"+v).join(""),"]"),firebase_illegal_regex=new RegExp(firebase_illegal_regex_string),global_firebase_illegal_regex=new RegExp(firebase_illegal_regex_string,"g"),firebase_illegal=str=>firebase_illegal_regex.test(str);exports.firebase_illegal=firebase_illegal;function firebase_remove_illegal(str){return str.replace(global_firebase_illegal_regex,"_")}var reverse_key_mapping={};for(let[encoded,char]of Object.entries(illegal_key_mapping))reverse_key_mapping[char]=encoded;function _replace(str,char,encoded){let split=str.split(char);return split.length===1?str:split.join(encoded)}function encode_key(str){if(!firebase_illegal(str))return str;let r=_replace(str,escaping_char,escaping_char+escaping_char);for(let char in reverse_key_mapping){let encoded=reverse_key_mapping[char];r=_replace(r,char,escaping_char+encoded)}return r}function decode_key(str){let r=_replace(str,escaping_char+escaping_char,escaping_char);for(let[encoded,char]of Object.entries(illegal_key_mapping))r=_replace(r,escaping_char+encoded,char);return r}function add_thousand_sep(n,separator){var _separator2;return(_separator2=separator)!=null||(separator=","),n==null?"":n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,separator)}function add_thousand_sep_locale(n,locale){let number=Number(n);return n==null||Number.isNaN(number)?"":number.toLocaleString(locale)}var _id_safe_regex=/[.#$[\]/]/g;function id_safe(id){if(!id)throw new errors.UnexpectedError("bad id: falsy value ",{id_as_string:String(id)});return id.replace(_id_safe_regex,"__")}function create_css_class_from_label(text){return text.replace(/ /g,"_").replace(/'/g,"_").replace(/\.\.\./g,"_").replace(/\./g,"_").toLowerCase()}function compact_number(numeric_value){return Intl.NumberFormat("en",{notation:"compact"}).format(numeric_value)}var compact_hours=hours=>{if(hours<_time.DAY_H)return"".concat(hours," ").concat((0,_pluralize.default)("hour",hours));let days=hours/_time.DAY_H;return"".concat(days," ").concat((0,_pluralize.default)("day",days))};exports.compact_hours=compact_hours;function cast_to_string(val){return val==null?"":String(val)}function eager_first_sentence_cut(initial_string,max_length){}var create_compound_key=elements=>elements.map(element=>encodeURIComponent(element)).join("/");exports.create_compound_key=create_compound_key;var hash_code=value=>[...value].reduce((hash,char)=>Math.imul(hash,31)+char.charCodeAt(0)|0,0);exports.hash_code=hash_code}});var require_dependency=__commonJS({"lib-browser-old/u/shared/async/new/dependency.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.Dependency=Dependency;exports.DependencyClass=void 0;exports.register_dependency=register_dependency;require_es_array_iterator();require_web_dom_collections_iterator();var _async_state=_interopRequireDefault(require_async_state());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function register_dependency(computation){let currentObserver=_async_state.default.CurrentAutoRun;currentObserver&&(!_async_state.default.NewSources&&currentObserver._sources&&currentObserver._sources[_async_state.default.NewSourcesIndex]===computation?_async_state.default.NewSourcesIndex++:_async_state.default.NewSources?computation!==_async_state.default.NewSources[_async_state.default.NewSources.length-1]&&_async_state.default.NewSources.push(computation):_async_state.default.NewSources=[computation])}var DependencyClass=class{constructor(){this._observers=[]}register(){register_dependency(this)}updateIfNecessary(){}needed(){return this._observers.length>0}once_invalidate(fn){let fn2={_sources:[this],_invalidate:()=>{let myIndex=this._observers.indexOf(fn2);myIndex>=0&&(this._observers[myIndex]=this._observers[this._observers.length-1],this._observers.pop()),fn()}};this._observers.push(fn2)}invalidate(){_async_state.default.batch(()=>{for(let run of this._observers)run._invalidate(3)})}};exports.DependencyClass=DependencyClass;function Dependency(){return new DependencyClass}}});var require_routes=__commonJS({"lib-browser-old/constants/routes.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.WORKFLOW_ROUTE=exports.USER_ROUTE=exports.TEST_CREATION_ROUTE=exports.STATIC_ROUTE=exports.PLUGIN_ROUTE=exports.PAGE_ROUTE=exports.PACKAGER_ROUTE=exports.ILLEGAL_PAGE_NAMES=exports.FILEUPLOAD_ROUTE=exports.DCV_ROUTE=exports.DATA_ROUTE=exports.BUG_ROUTE=exports.APP_EDITOR_ROUTE=exports.API_SERVICE_ROUTE=exports.API_ROUTE=void 0;var API_ROUTE="api";exports.API_ROUTE=API_ROUTE;var API_SERVICE_ROUTE="apiservice";exports.API_SERVICE_ROUTE=API_SERVICE_ROUTE;var APP_EDITOR_ROUTE="appeditor";exports.APP_EDITOR_ROUTE=APP_EDITOR_ROUTE;var BUG_ROUTE="bug";exports.BUG_ROUTE=BUG_ROUTE;var DATA_ROUTE="elasticsearch";exports.DATA_ROUTE=DATA_ROUTE;var DCV_ROUTE=".well-known";exports.DCV_ROUTE=DCV_ROUTE;var FILEUPLOAD_ROUTE="fileupload";exports.FILEUPLOAD_ROUTE=FILEUPLOAD_ROUTE;var PACKAGER_ROUTE="package";exports.PACKAGER_ROUTE=PACKAGER_ROUTE;var PAGE_ROUTE="";exports.PAGE_ROUTE=PAGE_ROUTE;var PLUGIN_ROUTE="pluginserver";exports.PLUGIN_ROUTE=PLUGIN_ROUTE;var STATIC_ROUTE="static";exports.STATIC_ROUTE=STATIC_ROUTE;var TEST_CREATION_ROUTE="versioncontrol";exports.TEST_CREATION_ROUTE=TEST_CREATION_ROUTE;var USER_ROUTE="user";exports.USER_ROUTE=USER_ROUTE;var WORKFLOW_ROUTE="workflow";exports.WORKFLOW_ROUTE=WORKFLOW_ROUTE;var ILLEGAL_PAGE_NAMES=[API_ROUTE,API_SERVICE_ROUTE,APP_EDITOR_ROUTE,BUG_ROUTE,DATA_ROUTE,DCV_ROUTE,FILEUPLOAD_ROUTE,PACKAGER_ROUTE,PAGE_ROUTE,PLUGIN_ROUTE,STATIC_ROUTE,TEST_CREATION_ROUTE,USER_ROUTE,WORKFLOW_ROUTE];exports.ILLEGAL_PAGE_NAMES=ILLEGAL_PAGE_NAMES}});var require_fibers=__commonJS({"lib-browser-old/constants/fibers.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.WORKFLOW=exports.SYSTEM_FIBER=exports.SERVICEHOSTER=exports.RUN_DATA_TRIGGER_WORKFLOW=exports.RUNNING_TASK=exports.QUEUE_TIMEOUT=exports.PERCOLATE_FIBER=exports.PAGE=exports.PACKAGE=exports.FiberTag=exports.FILE_UPLOAD=exports.ELASTICSEARCH=exports.API_SERVICE=exports.API=void 0;var _routes=require_routes(),QUEUE_TIMEOUT="Operation timed out -- app too busy";exports.QUEUE_TIMEOUT=QUEUE_TIMEOUT;var SYSTEM_FIBER="SYSTEM_FIBER";exports.SYSTEM_FIBER=SYSTEM_FIBER;var SERVICEHOSTER="servicehoster";exports.SERVICEHOSTER=SERVICEHOSTER;var RUNNING_TASK="running_task";exports.RUNNING_TASK=RUNNING_TASK;var RUN_DATA_TRIGGER_WORKFLOW="run_data_trigger_workflow";exports.RUN_DATA_TRIGGER_WORKFLOW=RUN_DATA_TRIGGER_WORKFLOW;var PERCOLATE_FIBER="percolate_fiber";exports.PERCOLATE_FIBER=PERCOLATE_FIBER;var FiberTag=function(FiberTag2){return FiberTag2.Appname="appname",FiberTag2.AppVersion="app_version",FiberTag2.APIEndpoint="api_endpoint",FiberTag2.AppEditorPath="appeditor_path",FiberTag2.CSVFileName="csv_file_name",FiberTag2.EServiceCommand="eservice_command",FiberTag2.ExternalAPIID="external_api_id",FiberTag2.PageName="page_name",FiberTag2.Path="path",FiberTag2.SearchPath="search_path",FiberTag2.Service="service",FiberTag2.SchedulerName="scheduler_name",FiberTag2.SyncRun="syncrun",FiberTag2.UserAppname="user_appname",FiberTag2.UserAppVersion="user_app_version",FiberTag2.WorkflowItem="workflow_item",FiberTag2.WorkflowID="workflow_id",FiberTag2.WorkflowActionID="workflow_action_id",FiberTag2.WorkflowConditionEvaluation="workflow_condition_evaluation",FiberTag2.APINetworkOperation="api_network_operation",FiberTag2}({});exports.FiberTag=FiberTag;var PAGE="page";exports.PAGE=PAGE;var PACKAGE=_routes.PACKAGER_ROUTE;exports.PACKAGE=PACKAGE;var FILE_UPLOAD=_routes.FILEUPLOAD_ROUTE;exports.FILE_UPLOAD=FILE_UPLOAD;var WORKFLOW=_routes.WORKFLOW_ROUTE;exports.WORKFLOW=WORKFLOW;var ELASTICSEARCH=_routes.DATA_ROUTE;exports.ELASTICSEARCH=ELASTICSEARCH;var API_SERVICE=_routes.API_SERVICE_ROUTE;exports.API_SERVICE=API_SERVICE;var API=_routes.API_ROUTE;exports.API=API}});var require_b_fiber=__commonJS({"lib-browser-old/u/shared/async/b_fiber/index.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.Parallel=exports.GetFiberTimeout=exports.FiberTimeout=exports.Fiber=exports.Block=void 0;Object.defineProperty(exports,"QUEUE_TIMEOUT",{enumerable:!0,get:function(){return _fibers.QUEUE_TIMEOUT}});Object.defineProperty(exports,"SYSTEM_FIBER",{enumerable:!0,get:function(){return _fibers.SYSTEM_FIBER}});exports.time_left_ns_for_each_tier=exports.tag_fiber=exports.tabulate_metrics=exports.suspend_fiber_timeout=exports.state=exports.spend_time=exports.set_running_app=exports.set_global_fiber_timeout=exports.set_fiber_queue=exports.pause=exports.optional_pause=exports.on_post_fiber_run=exports.on_fiber_created=exports.next_request_allowed_at=exports.kill_fiber=exports.initialize_fiber_metrics=exports.increment_fiber_sampling_with_timer=exports.increment_fiber_sampling=exports.has_time_left_for_new_request=exports.has_time_left=exports.handlers=exports.get_tabulated_metrics=exports.get_current_fiber_workload_used_units=exports.get_current_fiber_activity=exports.get_capacity_units_as_number_display=exports.get_capacity_units=exports.fiber_queue_soft_clean=exports.fiber_queue_shutdown=exports.fiber_lock=exports.fiber_finalize=exports.fiber_elapsed_time_ns=exports.await=exports.assign_fiber_ownership=exports.appnames_that_currently_cannot_take_new_request=exports.add_metrics_headers=exports.SyncRun=exports.Sync=void 0;var _errors=require_errors(),mode_check=_interopRequireWildcard(require_mode_check()),_safe_require=_interopRequireDefault(require_safe_require()),_fibers=require_fibers(),_server_b_fibers,_server_b_fibers$fibe,_server_b_fibers2,_server_b_fibers$tag_,_server_b_fibers3,_server_b_fibers$incr,_server_b_fibers4,_server_b_fibers$incr2,_server_b_fibers5,_server_b_fibers$init,_server_b_fibers6,_server_b_fibers$fibe2,_server_b_fibers7,_server_b_fibers$tabu,_server_b_fibers8,_server_b_fibers$get_,_server_b_fibers9,_server_b_fibers$add_,_server_b_fibers10,_server_b_fibers$hand,_server_b_fibers11,_server_b_fibers$set_,_server_b_fibers12,_server_b_fibers$assi,_server_b_fibers13,_server_b_fibers$has_,_server_b_fibers14,_server_b_fibers$time,_server_b_fibers15,_server_b_fibers$has_2,_server_b_fibers16,_server_b_fibers$next,_server_b_fibers17,_server_b_fibers$appn,_server_b_fibers18,_server_b_fibers$spen,_server_b_fibers19,_server_b_fibers$get_2,_server_b_fibers20,_server_b_fibers$get_3,_server_b_fibers21,_server_b_fibers$on_p,_server_b_fibers22,_server_b_fibers$on_f,_server_b_fibers23,_server_b_fibers$set_2,_server_b_fibers24,_server_b_fibers$fibe3,_server_b_fibers25,_server_b_fibers$fibe4,_server_b_fibers26,_server_b_fibers$opti,_server_b_fibers27,_server_b_fibers$stat,_server_b_fibers28,_server_b_fibers$kill,_server_b_fibers29,_server_b_fibers$Sync,_server_b_fibers30,_server_b_fibers$set_3,_server_b_fibers31,_server_b_fibers$fibe5,_server_b_fibers32,_server_b_fibers$Sync2,_server_b_fibers33,_server_b_fibers$Para,_server_b_fibers34,_server_b_fibers$awai,_server_b_fibers35,_server_b_fibers$Fibe,_server_b_fibers36,_server_b_fibers$GetF,_server_b_fibers37,_server_b_fibers$susp,_server_b_fibers38,_server_b_fibers$Bloc,_server_b_fibers39,_server_b_fibers$paus,_server_b_fibers40,_server_b_fibers$get_4,_server_b_fibers41,_server_b_fibers$get_5,_server_b_fibers42;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}_safe_require.default.safe_register("./u/shared/async/b_fiber",exports);var r=__require,server_b_fibers;mode_check.on_server()&&(server_b_fibers=r("./server"));function throw_on_client(){throw new _errors.UnexpectedError("Function should only be called on the server")}function no_op_on_client(){}var Fiber=(_server_b_fibers=server_b_fibers)==null?void 0:_server_b_fibers.Fiber;exports.Fiber=Fiber;var fiber_lock=(_server_b_fibers$fibe=(_server_b_fibers2=server_b_fibers)==null?void 0:_server_b_fibers2.fiber_lock)!=null?_server_b_fibers$fibe:throw_on_client;exports.fiber_lock=fiber_lock;var tag_fiber=(_server_b_fibers$tag_=(_server_b_fibers3=server_b_fibers)==null?void 0:_server_b_fibers3.tag_fiber)!=null?_server_b_fibers$tag_:throw_on_client;exports.tag_fiber=tag_fiber;var increment_fiber_sampling_with_timer=(_server_b_fibers$incr=(_server_b_fibers4=server_b_fibers)==null?void 0:_server_b_fibers4.increment_fiber_sampling_with_timer)!=null?_server_b_fibers$incr:no_op_on_client;exports.increment_fiber_sampling_with_timer=increment_fiber_sampling_with_timer;var increment_fiber_sampling=(_server_b_fibers$incr2=(_server_b_fibers5=server_b_fibers)==null?void 0:_server_b_fibers5.increment_fiber_sampling)!=null?_server_b_fibers$incr2:no_op_on_client;exports.increment_fiber_sampling=increment_fiber_sampling;var initialize_fiber_metrics=(_server_b_fibers$init=(_server_b_fibers6=server_b_fibers)==null?void 0:_server_b_fibers6.initialize_fiber_metrics)!=null?_server_b_fibers$init:throw_on_client;exports.initialize_fiber_metrics=initialize_fiber_metrics;var fiber_elapsed_time_ns=(_server_b_fibers$fibe2=(_server_b_fibers7=server_b_fibers)==null?void 0:_server_b_fibers7.fiber_elapsed_time_ns)!=null?_server_b_fibers$fibe2:throw_on_client;exports.fiber_elapsed_time_ns=fiber_elapsed_time_ns;var tabulate_metrics=(_server_b_fibers$tabu=(_server_b_fibers8=server_b_fibers)==null?void 0:_server_b_fibers8.tabulate_metrics)!=null?_server_b_fibers$tabu:throw_on_client;exports.tabulate_metrics=tabulate_metrics;var get_tabulated_metrics=(_server_b_fibers$get_=(_server_b_fibers9=server_b_fibers)==null?void 0:_server_b_fibers9.get_tabulated_metrics)!=null?_server_b_fibers$get_:throw_on_client;exports.get_tabulated_metrics=get_tabulated_metrics;var add_metrics_headers=(_server_b_fibers$add_=(_server_b_fibers10=server_b_fibers)==null?void 0:_server_b_fibers10.add_metrics_headers)!=null?_server_b_fibers$add_:no_op_on_client;exports.add_metrics_headers=add_metrics_headers;var handlers=(_server_b_fibers$hand=(_server_b_fibers11=server_b_fibers)==null?void 0:_server_b_fibers11.handlers)!=null?_server_b_fibers$hand:{};exports.handlers=handlers;var set_running_app=(_server_b_fibers$set_=(_server_b_fibers12=server_b_fibers)==null?void 0:_server_b_fibers12.set_running_app)!=null?_server_b_fibers$set_:throw_on_client;exports.set_running_app=set_running_app;var assign_fiber_ownership=(_server_b_fibers$assi=(_server_b_fibers13=server_b_fibers)==null?void 0:_server_b_fibers13.assign_fiber_ownership)!=null?_server_b_fibers$assi:throw_on_client;exports.assign_fiber_ownership=assign_fiber_ownership;var has_time_left=(_server_b_fibers$has_=(_server_b_fibers14=server_b_fibers)==null?void 0:_server_b_fibers14.has_time_left)!=null?_server_b_fibers$has_:throw_on_client;exports.has_time_left=has_time_left;var time_left_ns_for_each_tier=(_server_b_fibers$time=(_server_b_fibers15=server_b_fibers)==null?void 0:_server_b_fibers15.time_left_ns_for_each_tier)!=null?_server_b_fibers$time:throw_on_client;exports.time_left_ns_for_each_tier=time_left_ns_for_each_tier;var has_time_left_for_new_request=(_server_b_fibers$has_2=(_server_b_fibers16=server_b_fibers)==null?void 0:_server_b_fibers16.has_time_left_for_new_request)!=null?_server_b_fibers$has_2:throw_on_client;exports.has_time_left_for_new_request=has_time_left_for_new_request;var next_request_allowed_at=(_server_b_fibers$next=(_server_b_fibers17=server_b_fibers)==null?void 0:_server_b_fibers17.next_request_allowed_at)!=null?_server_b_fibers$next:throw_on_client;exports.next_request_allowed_at=next_request_allowed_at;var appnames_that_currently_cannot_take_new_request=(_server_b_fibers$appn=(_server_b_fibers18=server_b_fibers)==null?void 0:_server_b_fibers18.appnames_that_currently_cannot_take_new_request)!=null?_server_b_fibers$appn:throw_on_client;exports.appnames_that_currently_cannot_take_new_request=appnames_that_currently_cannot_take_new_request;var spend_time=(_server_b_fibers$spen=(_server_b_fibers19=server_b_fibers)==null?void 0:_server_b_fibers19.spend_time)!=null?_server_b_fibers$spen:throw_on_client;exports.spend_time=spend_time;var get_capacity_units=(_server_b_fibers$get_2=(_server_b_fibers20=server_b_fibers)==null?void 0:_server_b_fibers20.get_capacity_units)!=null?_server_b_fibers$get_2:throw_on_client;exports.get_capacity_units=get_capacity_units;var get_capacity_units_as_number_display=(_server_b_fibers$get_3=(_server_b_fibers21=server_b_fibers)==null?void 0:_server_b_fibers21.get_capacity_units_as_number_display)!=null?_server_b_fibers$get_3:throw_on_client;exports.get_capacity_units_as_number_display=get_capacity_units_as_number_display;var on_post_fiber_run=(_server_b_fibers$on_p=(_server_b_fibers22=server_b_fibers)==null?void 0:_server_b_fibers22.on_post_fiber_run)!=null?_server_b_fibers$on_p:throw_on_client;exports.on_post_fiber_run=on_post_fiber_run;var on_fiber_created=(_server_b_fibers$on_f=(_server_b_fibers23=server_b_fibers)==null?void 0:_server_b_fibers23.on_fiber_created)!=null?_server_b_fibers$on_f:throw_on_client;exports.on_fiber_created=on_fiber_created;var set_fiber_queue=(_server_b_fibers$set_2=(_server_b_fibers24=server_b_fibers)==null?void 0:_server_b_fibers24.set_fiber_queue)!=null?_server_b_fibers$set_2:throw_on_client;exports.set_fiber_queue=set_fiber_queue;var fiber_queue_soft_clean=(_server_b_fibers$fibe3=(_server_b_fibers25=server_b_fibers)==null?void 0:_server_b_fibers25.fiber_queue_soft_clean)!=null?_server_b_fibers$fibe3:throw_on_client;exports.fiber_queue_soft_clean=fiber_queue_soft_clean;var fiber_queue_shutdown=(_server_b_fibers$fibe4=(_server_b_fibers26=server_b_fibers)==null?void 0:_server_b_fibers26.fiber_queue_shutdown)!=null?_server_b_fibers$fibe4:throw_on_client;exports.fiber_queue_shutdown=fiber_queue_shutdown;var optional_pause=(_server_b_fibers$opti=(_server_b_fibers27=server_b_fibers)==null?void 0:_server_b_fibers27.optional_pause)!=null?_server_b_fibers$opti:no_op_on_client;exports.optional_pause=optional_pause;var state=(_server_b_fibers$stat=(_server_b_fibers28=server_b_fibers)==null?void 0:_server_b_fibers28.state)!=null?_server_b_fibers$stat:{open_fibers:0};exports.state=state;var kill_fiber=(_server_b_fibers$kill=(_server_b_fibers29=server_b_fibers)==null?void 0:_server_b_fibers29.kill_fiber)!=null?_server_b_fibers$kill:throw_on_client;exports.kill_fiber=kill_fiber;var SyncRun=(_server_b_fibers$Sync=(_server_b_fibers30=server_b_fibers)==null?void 0:_server_b_fibers30.SyncRun)!=null?_server_b_fibers$Sync:throw_on_client;exports.SyncRun=SyncRun;var set_global_fiber_timeout=(_server_b_fibers$set_3=(_server_b_fibers31=server_b_fibers)==null?void 0:_server_b_fibers31.set_global_fiber_timeout)!=null?_server_b_fibers$set_3:throw_on_client;exports.set_global_fiber_timeout=set_global_fiber_timeout;var fiber_finalize=(_server_b_fibers$fibe5=(_server_b_fibers32=server_b_fibers)==null?void 0:_server_b_fibers32.fiber_finalize)!=null?_server_b_fibers$fibe5:throw_on_client;exports.fiber_finalize=fiber_finalize;var Sync=(_server_b_fibers$Sync2=(_server_b_fibers33=server_b_fibers)==null?void 0:_server_b_fibers33.Sync)!=null?_server_b_fibers$Sync2:throw_on_client;exports.Sync=Sync;var Parallel=(_server_b_fibers$Para=(_server_b_fibers34=server_b_fibers)==null?void 0:_server_b_fibers34.Parallel)!=null?_server_b_fibers$Para:throw_on_client;exports.Parallel=Parallel;var es6_await=(_server_b_fibers$awai=(_server_b_fibers35=server_b_fibers)==null?void 0:_server_b_fibers35.await)!=null?_server_b_fibers$awai:throw_on_client;exports.await=es6_await;var FiberTimeout=(_server_b_fibers$Fibe=(_server_b_fibers36=server_b_fibers)==null?void 0:_server_b_fibers36.FiberTimeout)!=null?_server_b_fibers$Fibe:throw_on_client;exports.FiberTimeout=FiberTimeout;var GetFiberTimeout=(_server_b_fibers$GetF=(_server_b_fibers37=server_b_fibers)==null?void 0:_server_b_fibers37.GetFiberTimeout)!=null?_server_b_fibers$GetF:throw_on_client;exports.GetFiberTimeout=GetFiberTimeout;var suspend_fiber_timeout=(_server_b_fibers$susp=(_server_b_fibers38=server_b_fibers)==null?void 0:_server_b_fibers38.suspend_fiber_timeout)!=null?_server_b_fibers$susp:throw_on_client;exports.suspend_fiber_timeout=suspend_fiber_timeout;var Block=(_server_b_fibers$Bloc=(_server_b_fibers39=server_b_fibers)==null?void 0:_server_b_fibers39.Block)!=null?_server_b_fibers$Bloc:throw_on_client;exports.Block=Block;var pause=(_server_b_fibers$paus=(_server_b_fibers40=server_b_fibers)==null?void 0:_server_b_fibers40.pause)!=null?_server_b_fibers$paus:throw_on_client;exports.pause=pause;var get_current_fiber_activity=(_server_b_fibers$get_4=(_server_b_fibers41=server_b_fibers)==null?void 0:_server_b_fibers41.get_current_fiber_activity)!=null?_server_b_fibers$get_4:throw_on_client;exports.get_current_fiber_activity=get_current_fiber_activity;var get_current_fiber_workload_used_units=(_server_b_fibers$get_5=(_server_b_fibers42=server_b_fibers)==null?void 0:_server_b_fibers42.get_current_fiber_workload_used_units)!=null?_server_b_fibers$get_5:throw_on_client;exports.get_current_fiber_workload_used_units=get_current_fiber_workload_used_units}});var require_b_async=__commonJS({"lib-browser-old/u/shared/async/new/b_async.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.FakeKey=FakeKey;exports.KeyList=exports.KeyBase=exports.Key=void 0;exports.MakeKey=MakeKey;exports.MakeKeyList=MakeKeyList;exports.MakeSwitch=MakeSwitch;exports.Promise=Promise2;exports.Switch=exports.PromiseClass=void 0;exports.SyncWait=SyncWait;exports.TransientKeyList=TransientKeyList;exports.WaitFor=WaitFor;exports.ensure_ready=ensure_ready;exports.promise_array=promise_array;exports.retry=retry;exports.retry_on_match=retry_on_match;exports.run_without_catching_not_ready=run_without_catching_not_ready;exports.throw_not_ready=throw_not_ready;exports.timeout_promise=timeout_promise;exports.timeout_warning=timeout_warning;require_es_array_iterator();require_web_dom_collections_iterator();require_es_regexp_to_string();require_es_error_cause();require_es_array_flat();require_es_array_unscopables_flat();require_es_object_values();var _async_state=_interopRequireDefault(require_async_state()),_backoff=require_backoff(),b_string=_interopRequireWildcard(require_b_string()),b_array=_interopRequireWildcard(require_b_array()),_dependency=require_dependency(),_errors=require_errors(),b_fiber=_interopRequireWildcard(require_b_fiber()),mode_check=_interopRequireWildcard(require_mode_check()),logger=_interopRequireWildcard(require_logger()),_safe_require=_interopRequireDefault(require_safe_require());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_safe_require.default.safe_register("./u/shared/async/b_async",module.exports);function identity(x){return x}function Promise2(data,name){return data!=null&&(data instanceof PromiseClass||typeof data.then=="function")?data:new PromiseClass(data,name)}var PromiseClass=class _PromiseClass{constructor(data,name){if(this._fails=void 0,this._dones=void 0,this._done=void 0,this._waiting_on=void 0,this.prefetching=!1,this._error=void 0,this._value=void 0,this._handled_error=!1,this._ready_key=void 0,this._fails=[],this._dones=[],this._done=!1,name)this._waiting_on=name;else if(typeof data=="function"){let val;try{val=data()}catch(err){this.reject(err);return}this.resolve(val)}else this.resolve(data)}get_prefetching(){return this.prefetching?this.prefetching:this._waiting_on instanceof _PromiseClass?this._waiting_on.get_prefetching():!1}toString(){if(this._done){var _this$_error;return"Promise(".concat(String((_this$_error=this._error)!=null?_this$_error:this._value),")")}else return this._waiting_on instanceof _PromiseClass?String(this._waiting_on):"Promise(waiting on ".concat(String(this._waiting_on),")")}reject(err){if(!this._done)if(err instanceof _errors.NotReadyError&&logger.warn("Promise rejected with a not-ready key: use a autorun.run_once!"),this._done=!0,this._waiting_on=void 0,this._error=err,this._fails.length>0)for(let cb of this._fails)cb(err);else mode_check.on_client()&&setTimeout(()=>{if(!this._handled_error)throw err},100)}resolve(val){if(!this._done)if(val instanceof _PromiseClass)this._waiting_on=val,val._attach_success(new_val=>this.resolve(new_val)),val._attach_failure(err=>this.reject(err));else{this._done=!0,this._waiting_on=void 0,this._value=val;for(let cb of this._dones)cb(val)}}_attach_success(cb){if(typeof cb!="function")throw new _errors.UnexpectedError("not a function");this._done?this._error==null&&cb(this._value):this._dones.push(cb)}_attach_failure(cb){if(typeof cb!="function")throw new _errors.UnexpectedError("not a function");this._done?this._error!=null&&(cb(this._error),this._handled_error=!0):this._fails.push(cb)}then(done_filter,fail_filter){let done_fn=done_filter!=null?done_filter:identity,error_fn=fail_filter!=null?fail_filter:identity,promise=Promise2(null,this);return this._attach_success(val=>{let new_val;try{new_val=done_fn(val)}catch(err){promise.reject(err);return}promise.resolve(new_val)}),this._attach_failure(err=>{let new_err;try{new_err=error_fn(err)}catch(e){new_err=e}new_err!=null?promise.reject(new_err):promise.resolve(void 0)}),promise}callback(cb){this.then(res=>{cb(null,res)},err=>(cb(err),null))}done(cb){var _cb;(_cb=cb)!=null||(cb=identity),this._attach_success(cb),this._attach_failure(err=>{err!=null&&setTimeout(()=>{throw err},1)})}block(){let block=b_fiber.Block(this.toString(),this.get_prefetching());return this.callback((err,value)=>{err!=null?block.fail(err):block.success(value)}),block.wait()}block_promise(timeout){return mode_check.on_server()&&b_fiber.suspend_fiber_timeout(timeout,()=>this.block()),this}sync(){if(mode_check.on_server())return this.block();if(ensure_ready(this.ready_key(),!1),this._error!=null)throw this._error;return this._value}ready_key(){if(!this._ready_key){let key=MakeKey(void 0,()=>this.toString());this._ready_key=key,this._attach_success(()=>key.turn()),this._attach_failure(()=>key.turn())}return this._ready_key}inspect(){return this._done?this._error!=null?{state:"rejected",reason:this._error}:{state:"fulfilled",value:this._value}:{state:"pending"}}make_cb(){return(err,res)=>err!=null?this.reject(err):this.resolve(res)}};exports.PromiseClass=PromiseClass;function promise_array(promises){if(promises.length===0)return Promise2([]);if(promises.length===1)return promises[0].then(res=>[res]);let[left_half,right_half]=b_array.partition(promises);return promise_array(left_half).then(left_results=>promise_array(right_half).then(right_results=>left_results.concat(right_results)))}function timeout_promise(timeout){let promise=Promise2(null,"b_async.timeout_promise:".concat(timeout));return setTimeout(promise.resolve.bind(promise),timeout),promise}var NeverCatchNotReady=!1;function throw_not_ready(key,can_catch){var _can_catch;if((_can_catch=can_catch)!=null||(can_catch=!0),can_catch&&_async_state.default.CurrentNotReadyCatcher&&!NeverCatchNotReady)_async_state.default.CurrentNotReadyCatcher.push(key);else throw new _errors.NotReadyError(key)}function run_without_catching_not_ready(fn){let old_not_ready_status=NeverCatchNotReady;try{NeverCatchNotReady=!0,fn();return}finally{NeverCatchNotReady=old_not_ready_status}}function ensure_ready(key,can_catch){var _can_catch2,_b_fiber$Fiber;return(_can_catch2=can_catch)!=null||(can_catch=!0),key.is_turned()?!0:((_b_fiber$Fiber=b_fiber.Fiber)==null?void 0:_b_fiber$Fiber.current)!=null&&!mode_check.running_test()?(SyncWait(key),!0):(throw_not_ready(key,can_catch),!1)}function retry_on_match(_ref){let{retries,delay,try_fn,match_fn,before_retry_fn}=_ref;if(typeof retries!="number")throw new _errors.UnexpectedError("b_async.retry bad retries");if(typeof try_fn!="function")throw new _errors.UnexpectedError("b_async.retry bad function param");try{return try_fn()}catch(err){if(match_fn&&!match_fn(err)||err instanceof Error&&b_string.safe_contains(err.message,b_fiber.QUEUE_TIMEOUT)||!(retries>0))throw err;return delay&&b_fiber.pause((0,_backoff.jitter)(delay),"retry on match delay"),before_retry_fn==null||before_retry_fn(err),retry_on_match({retries:retries-1,delay,try_fn,match_fn,before_retry_fn})}}function retry(retries,delay,try_fn){return retry_on_match({retries,delay,try_fn})}function SyncWait(){for(var _len=arguments.length,keys=new Array(_len),_key=0;_key<_len;_key++)keys[_key]=arguments[_key];let key_set=TransientKeyList(keys);if(key_set.is_turned())return;let block=b_fiber.Block(key_set.toString());WaitFor(key_set,block.success.bind(block)),block.wait()}function MakeKey(timeout,name,timeout_cb){return name||logger.error("anonymous key created: please name it: b_async.MakeKey(null, 'my name') or b_async.MakeKey(timeout, 'my name')"),new Key(timeout,name,timeout_cb)}var __fake_key=null;function FakeKey(){return __fake_key||(__fake_key=MakeKey(void 0,"fake_key"),__fake_key.turn()),__fake_key}var _simple_listener_id=0,KeyBase=class{constructor(){this._id=void 0,this._listeners=void 0,this._listener_count=0,this._turned_dependency=void 0}id(){return this._id||(this._id=_simple_listener_id,_simple_listener_id++),this._id}listen(listener){var _this$_listeners;(_this$_listeners=this._listeners)!=null||(this._listeners={});let id=listener.id();if(this._listeners[id]==null&&(this._listeners[id]=listener,this._listener_count++,this._listener_count===1e4)){var _window;(!mode_check.is_edit_mode()||(_window=window)!=null&&_window.current_user_is_admin)&&logger.warn("Listener count at 10000",{key:String(this)})}}unlisten(key){var _this$_listeners2;let id=key.id();((_this$_listeners2=this._listeners)==null?void 0:_this$_listeners2[id])!=null&&(delete this._listeners[id],this._listener_count--)}turned_dependency(){var _this$_turned_depende;return(_this$_turned_depende=this._turned_dependency)!=null||(this._turned_dependency=(0,_dependency.Dependency)()),this._turned_dependency}_was_updated(){var _this$_listeners3;let object2=(_this$_listeners3=this._listeners)!=null?_this$_listeners3:{};for(let id in object2)object2[id].notify(this);if(this.is_turned()){var _this$_turned_depende2;(_this$_turned_depende2=this._turned_dependency)==null||_this$_turned_depende2.invalidate()}this.is_dead()&&(this._listeners=void 0,this._turned_dependency=void 0)}_update_dead(){var _this$_listeners4;if(!this.is_dead())throw new _errors.UnexpectedError("not dead");let object2=(_this$_listeners4=this._listeners)!=null?_this$_listeners4:{};for(let id in object2)object2[id].notify_dead(this);this._listeners=void 0,this._turned_dependency=void 0}to_promise(){let promise=Promise2(null,this);return WaitFor(this,()=>promise.resolve()),promise}toString(){return"KeyBase of type ".concat(this.constructor.name)}};exports.KeyBase=KeyBase;function WaitFor(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];let adjustedLength=Math.max(args.length,1),keys=args.slice(0,adjustedLength-1),func=args[adjustedLength-1];if(func==null)return;let flattened_keys=keys.flat(),keylist=TransientKeyList(flattened_keys);keylist.is_turned()?func():keylist.listen(new Waiter(func))}var Waiter=class extends KeyBase{constructor(fn){super(),this.fn=void 0,this.fn=fn}is_dead(){return this.fn!=null}is_turned(){return this.fn!=null}max_expected_time(){return null}notify(keylist){if(keylist.is_turned()){var _this$fn;(_this$fn=this.fn)==null||_this$fn.call(this),this.fn=null,this._was_updated()}}notify_dead(){}toString(){var _this$fn2;return"Waiter {".concat(String((_this$fn2=this.fn)==null?void 0:_this$fn2.toString().slice(0,100)),"...}")}};function timeout_warning(name,seconds,cb){let wait_seconds=seconds!=null?seconds:40,timeout=setTimeout(function(){typeof name=="function"&&(name=name()),logger.info("Key failed to return after timeout",{wait_seconds,name}),cb==null||cb()},wait_seconds*1e3);return()=>clearTimeout(timeout)}var Key=class extends KeyBase{constructor(timeout_length,name,timeout_cb){super(),this.timeout_length=void 0,this.name=void 0,this.end_time=void 0,this.timeout=void 0,this._turned=void 0,this.timeout_length=timeout_length,this.name=name,this.timeout_length&&this.timeout_length!==1/0&&(this.end_time=Date.now()+1e3*this.timeout_length,this.timeout=timeout_warning(this.name,this.timeout_length,timeout_cb)),this._turned=!1}is_turned(){return this._turned}is_dead(){return this._turned}max_expected_time(){return this.is_turned()||!this.end_time?null:this.timeout_length===1/0?1/0:this.end_time-Date.now()}turn(){var _this$timeout;this._turned||(this._turned=!0,this._was_updated(),(_this$timeout=this.timeout)==null||_this$timeout.call(this))}toString(){return this.name!=null?"Key "+(typeof this.name=="function"?this.name():this.name):"Anonymous Key"}};exports.Key=Key;function MakeSwitch(timeout,name){if(name||logger.error("anonymous switch created: please name it"),timeout)throw new _errors.UnexpectedError("switch timeout not implemented");return new Switch2(name)}var Switch2=class extends KeyBase{constructor(name){super(),this.name=void 0,this._turned=void 0,this._destroyed=void 0,this.name=name,this._turned=!1,this._destroyed=!1}is_turned(){return this._turned}is_dead(){return this._destroyed}max_expected_time(){return null}turn_off(){if(this._turned){if(this._destroyed)throw new _errors.UnexpectedError("cannot turn off a destroyed switch");this._turned=!1,this._was_updated()}}turn_on(){this._turned||(this._turned=!0,this._was_updated())}destroy(){this._destroyed=!0,this._turned?this._update_dead():this.turn_on()}toString(){return this.name?"Switch "+this.name:"Anonymous Switch"}};exports.Switch=Switch2;function MakeKeyList(keys){return new KeyList(keys)}function TransientKeyList(keys){return new KeyList(keys,!0)}var KeyList=class extends KeyBase{constructor(keys){let transient=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;super(),this.transient=void 0,this._keys=void 0,this._unturned=void 0,this._destroyed=void 0,this.transient=transient,this._keys={},this._unturned=0;for(let key of keys!=null?keys:[])this.add_key(key)}is_turned(){return this._unturned===0}is_dead(){var _this$_destroyed;return(_this$_destroyed=this._destroyed)!=null?_this$_destroyed:!1}make_transient(){return TransientKeyList(Object.values(this._keys))}remove_all(){let notify=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,was_turned=this.is_turned();for(let id in this._keys){let key=this._keys[id];this._remove(key)}this._unturned=0,notify&&!was_turned&&this._was_updated()}_inc(){this._unturned++,this._unturned===1&&this._was_updated()}_dec(){this._unturned--,this._unturned===0&&this._was_updated()}max_expected_time(){let expected=Object.values(this._keys).map(key=>key.max_expected_time()).filter(t=>!!t);return expected.length?Math.min(...expected):null}add_key(key){if(this._destroyed===!0)throw new _errors.UnexpectedError("cannot add key to a destroyed list");if(!key.is_dead()&&this._keys[key.id()]==null){if(!key.is_turned())this._inc();else if(this.transient)return;this._keys[key.id()]=key,key.listen(this)}}notify(key){key.is_turned()?this._dec():this._inc(),(key.is_dead()||this.transient)&&this._remove(key)}notify_dead(key){this._remove(key)}_remove(key){delete this._keys[key.id()],key.unlisten(this)}add_promise(promise){return this.add_key(promise.ready_key())}make(timeout,name,timeout_cb){let key=MakeKey(timeout,name,timeout_cb);return this.add_key(key),key}get(){return Object.values(this._keys)}toString(){let my_keys=this.get(),unturned_key_strings=my_keys.filter(key=>key.is_turned!=null&&!key.is_turned()).map(key=>key.toString());return"[KeyList(".concat(my_keys.length,") ").concat(unturned_key_strings.join(", ")," ]")}destroy(){this._destroyed=!0;for(let id in this._keys)this._keys[id].unlisten(this);this._keys={},this._unturned===0?this._update_dead():(this._unturned=0,this._was_updated())}};exports.KeyList=KeyList}});var require_async_state2=__commonJS({"lib-browser-old/u/shared/async/old/async_state.js"(exports,module){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});var state={CurrentAutoRun:null,CurrentNotReadyCatcher:null,server_connection_problems:!1};module.exports=state}});var require_dependency2=__commonJS({"lib-browser-old/u/shared/async/old/dependency.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.Dependency=Dependency;exports.DependencyClass=void 0;require_es_object_values();require_es_array_iterator();require_web_dom_collections_iterator();var _async_state=_interopRequireDefault(require_async_state2()),_uuid=require_uuid();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DependencyClass=class{constructor(){this.runs=void 0,this.count=void 0,this.no_scheduled_collection=void 0,this.runs={},this.count=0,this.no_scheduled_collection=!0}register(curAuto){var _curAuto;(_curAuto=curAuto)!=null||(curAuto=_async_state.default.CurrentAutoRun),curAuto!=null&&(this.runs[curAuto.id]=curAuto,this.count++,curAuto._has_dependency=!0,this.no_scheduled_collection&&this.count>50&&(this.no_scheduled_collection=!1,this.schedule_collection()))}is_registered(curAuto){var _curAuto2;return(_curAuto2=curAuto)!=null||(curAuto=_async_state.default.CurrentAutoRun),curAuto!=null&&this.runs[curAuto.id]!=null}needed(){return this.count===0?!1:(this.garbage_collect(),this.count>0)}garbage_collect(){let old=this.runs;this.runs={},this.count=0;for(let k in old){let v=old[k];v._is_destroyed!==!0&&(this.runs[k]=v,this.count++)}}schedule_collection(){setTimeout(()=>{this.no_scheduled_collection=!0,this.garbage_collect()},3e4)}once_invalidate(fn){this.runs[(0,_uuid.LUID)()]={invalidate:fn}}invalidate(){let to_invalidate=Object.values(this.runs);this.runs={},this.count=0;for(let run of to_invalidate)run.invalidate()}};exports.DependencyClass=DependencyClass;function Dependency(){return new DependencyClass}}});var require_b_async2=__commonJS({"lib-browser-old/u/shared/async/old/b_async.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.FakeKey=FakeKey;exports.KeyList=exports.KeyBase=exports.Key=void 0;exports.MakeKey=MakeKey;exports.MakeKeyList=MakeKeyList;exports.MakeSwitch=MakeSwitch;exports.Promise=Promise2;exports.Switch=exports.PromiseClass=void 0;exports.SyncWait=SyncWait;exports.TransientKeyList=TransientKeyList;exports.WaitFor=WaitFor;exports.ensure_ready=ensure_ready;exports.promise_array=promise_array;exports.retry=retry;exports.retry_on_match=retry_on_match;exports.run_without_catching_not_ready=run_without_catching_not_ready;exports.throw_not_ready=throw_not_ready;exports.timeout_promise=timeout_promise;exports.timeout_warning=timeout_warning;require_es_array_iterator();require_web_dom_collections_iterator();require_es_regexp_to_string();require_es_error_cause();require_es_array_flat();require_es_array_unscopables_flat();require_es_object_values();var _async_state=_interopRequireDefault(require_async_state2()),_backoff=require_backoff(),b_string=_interopRequireWildcard(require_b_string()),b_array=_interopRequireWildcard(require_b_array()),_dependency=require_dependency2(),_errors=require_errors(),b_fiber=_interopRequireWildcard(require_b_fiber()),mode_check=_interopRequireWildcard(require_mode_check()),logger=_interopRequireWildcard(require_logger()),_safe_require=_interopRequireDefault(require_safe_require());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_safe_require.default.safe_register("./u/shared/async/b_async",module.exports);function identity(x){return x}function Promise2(data,name){return data!=null&&(data instanceof PromiseClass||typeof data.then=="function")?data:new PromiseClass(data,name)}var PromiseClass=class _PromiseClass{constructor(data,name){if(this._fails=void 0,this._dones=void 0,this._done=void 0,this._waiting_on=void 0,this.prefetching=!1,this._error=void 0,this._value=void 0,this._handled_error=!1,this._ready_key=void 0,this._fails=[],this._dones=[],this._done=!1,name)this._waiting_on=name;else if(typeof data=="function"){let val;try{val=data()}catch(err){this.reject(err);return}this.resolve(val)}else this.resolve(data)}get_prefetching(){return this.prefetching?this.prefetching:this._waiting_on instanceof _PromiseClass?this._waiting_on.get_prefetching():!1}toString(){if(this._done){var _this$_error;return"Promise(".concat(String((_this$_error=this._error)!=null?_this$_error:this._value),")")}else return this._waiting_on instanceof _PromiseClass?String(this._waiting_on):"Promise(waiting on ".concat(String(this._waiting_on),")")}reject(err){if(!this._done)if(err instanceof _errors.NotReadyError&&logger.warn("Promise rejected with a not-ready key: use a autorun.run_once!"),this._done=!0,this._waiting_on=void 0,this._error=err,this._fails.length>0)for(let cb of this._fails)cb(err);else mode_check.on_client()&&setTimeout(()=>{if(!this._handled_error)throw err},100)}resolve(val){if(!this._done)if(val instanceof _PromiseClass)this._waiting_on=val,val._attach_success(new_val=>this.resolve(new_val)),val._attach_failure(err=>this.reject(err));else{this._done=!0,this._waiting_on=void 0,this._value=val;for(let cb of this._dones)cb(val)}}_attach_success(cb){if(typeof cb!="function")throw new _errors.UnexpectedError("not a function");this._done?this._error==null&&cb(this._value):this._dones.push(cb)}_attach_failure(cb){if(typeof cb!="function")throw new _errors.UnexpectedError("not a function");this._done?this._error!=null&&(cb(this._error),this._handled_error=!0):this._fails.push(cb)}then(done_filter,fail_filter){let done_fn=done_filter!=null?done_filter:identity,error_fn=fail_filter!=null?fail_filter:identity,promise=Promise2(null,this);return this._attach_success(val=>{let new_val;try{new_val=done_fn(val)}catch(err){promise.reject(err);return}promise.resolve(new_val)}),this._attach_failure(err=>{let new_err;try{new_err=error_fn(err)}catch(e){new_err=e}new_err!=null?promise.reject(new_err):promise.resolve(void 0)}),promise}callback(cb){this.then(res=>{cb(null,res)},err=>(cb(err),null))}done(cb){var _cb;(_cb=cb)!=null||(cb=identity),this._attach_success(cb),this._attach_failure(err=>{err!=null&&setTimeout(()=>{throw err},1)})}block(){let block=b_fiber.Block(this.toString(),this.get_prefetching());return this.callback((err,value)=>{err!=null?block.fail(err):block.success(value)}),block.wait()}block_promise(timeout){return mode_check.on_server()&&b_fiber.suspend_fiber_timeout(timeout,()=>this.block()),this}sync(){if(mode_check.on_server())return this.block();if(ensure_ready(this.ready_key(),!1),this._error!=null)throw this._error;return this._value}ready_key(){if(!this._ready_key){let key=MakeKey(void 0,()=>this.toString());this._ready_key=key,this._attach_success(()=>key.turn()),this._attach_failure(()=>key.turn())}return this._ready_key}inspect(){return this._done?this._error!=null?{state:"rejected",reason:this._error}:{state:"fulfilled",value:this._value}:{state:"pending"}}make_cb(){return(err,res)=>err!=null?this.reject(err):this.resolve(res)}};exports.PromiseClass=PromiseClass;function promise_array(promises){if(promises.length===0)return Promise2([]);if(promises.length===1)return promises[0].then(res=>[res]);let[left_half,right_half]=b_array.partition(promises);return promise_array(left_half).then(left_results=>promise_array(right_half).then(right_results=>left_results.concat(right_results)))}function timeout_promise(timeout){let promise=Promise2(null,"b_async.timeout_promise:".concat(timeout));return setTimeout(promise.resolve.bind(promise),timeout),promise}var NeverCatchNotReady=!1;function throw_not_ready(key,can_catch){var _can_catch;if((_can_catch=can_catch)!=null||(can_catch=!0),key.turned_dependency().register(),can_catch&&_async_state.default.CurrentNotReadyCatcher&&!NeverCatchNotReady)_async_state.default.CurrentNotReadyCatcher.push(key);else throw new _errors.NotReadyError(key)}function run_without_catching_not_ready(fn){let old_not_ready_status=NeverCatchNotReady;try{NeverCatchNotReady=!0,fn();return}finally{NeverCatchNotReady=old_not_ready_status}}function ensure_ready(key,can_catch){var _can_catch2,_b_fiber$Fiber;return(_can_catch2=can_catch)!=null||(can_catch=!0),key.is_turned()?!0:((_b_fiber$Fiber=b_fiber.Fiber)==null?void 0:_b_fiber$Fiber.current)!=null&&!mode_check.running_test()?(SyncWait(key),!0):(throw_not_ready(key,can_catch),!1)}function retry_on_match(_ref){let{retries,delay,try_fn,match_fn,before_retry_fn}=_ref;if(typeof retries!="number")throw new _errors.UnexpectedError("b_async.retry bad retries");if(typeof try_fn!="function")throw new _errors.UnexpectedError("b_async.retry bad function param");try{return try_fn()}catch(err){if(match_fn&&!match_fn(err)||err instanceof Error&&b_string.safe_contains(err.message,b_fiber.QUEUE_TIMEOUT)||!(retries>0))throw err;return delay&&b_fiber.pause((0,_backoff.jitter)(delay),"retry on match delay"),before_retry_fn==null||before_retry_fn(err),retry_on_match({retries:retries-1,delay,try_fn,match_fn,before_retry_fn})}}function retry(retries,delay,try_fn){return retry_on_match({retries,delay,try_fn})}function SyncWait(){for(var _len=arguments.length,keys=new Array(_len),_key=0;_key<_len;_key++)keys[_key]=arguments[_key];let key_set=TransientKeyList(keys);if(key_set.is_turned())return;let block=b_fiber.Block(key_set.toString());WaitFor(key_set,block.success.bind(block)),block.wait()}function MakeKey(timeout,name,timeout_cb){return name||logger.error("anonymous key created: please name it: b_async.MakeKey(null, 'my name') or b_async.MakeKey(timeout, 'my name')"),new Key(timeout,name,timeout_cb)}var __fake_key=null;function FakeKey(){return __fake_key||(__fake_key=MakeKey(void 0,"fake_key"),__fake_key.turn()),__fake_key}var _simple_listener_id=0,KeyBase=class{constructor(){this._id=void 0,this._listeners=void 0,this._listener_count=0,this._turned_dependency=void 0}id(){return this._id||(this._id=_simple_listener_id,_simple_listener_id++),this._id}listen(listener){var _this$_listeners;(_this$_listeners=this._listeners)!=null||(this._listeners={});let id=listener.id();if(this._listeners[id]==null&&(this._listeners[id]=listener,this._listener_count++,this._listener_count===1e4)){var _window;(!mode_check.is_edit_mode()||(_window=window)!=null&&_window.current_user_is_admin)&&logger.warn("Listener count at 10000",{key:String(this)})}}unlisten(key){var _this$_listeners2;let id=key.id();((_this$_listeners2=this._listeners)==null?void 0:_this$_listeners2[id])!=null&&(delete this._listeners[id],this._listener_count--)}turned_dependency(){var _this$_turned_depende;return(_this$_turned_depende=this._turned_dependency)!=null||(this._turned_dependency=(0,_dependency.Dependency)()),this._turned_dependency}is_registered(curAuto){return this.turned_dependency().is_registered(curAuto)}_was_updated(){var _this$_listeners3;let object2=(_this$_listeners3=this._listeners)!=null?_this$_listeners3:{};for(let id in object2)object2[id].notify(this);if(this.is_turned()){var _this$_turned_depende2;(_this$_turned_depende2=this._turned_dependency)==null||_this$_turned_depende2.invalidate()}this.is_dead()&&(delete this._listeners,delete this._turned_dependency)}_update_dead(){var _this$_listeners4;if(!this.is_dead())throw new _errors.UnexpectedError("not dead");let object2=(_this$_listeners4=this._listeners)!=null?_this$_listeners4:{};for(let id in object2)object2[id].notify_dead(this);delete this._listeners,delete this._turned_dependency}to_promise(){let promise=Promise2(null,this);return WaitFor(this,()=>promise.resolve()),promise}toString(){return"KeyBase of type ".concat(this.constructor.name)}};exports.KeyBase=KeyBase;function WaitFor(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];let adjustedLength=Math.max(args.length,1),keys=args.slice(0,adjustedLength-1),func=args[adjustedLength-1];if(func==null)return;let flattened_keys=keys.flat(),keylist=TransientKeyList(flattened_keys);keylist.is_turned()?func():keylist.listen(new Waiter(func))}var Waiter=class extends KeyBase{constructor(fn){super(),this.fn=void 0,this.fn=fn}is_dead(){return this.fn!=null}is_turned(){return this.fn!=null}max_expected_time(){return null}notify(keylist){if(keylist.is_turned()){var _this$fn;(_this$fn=this.fn)==null||_this$fn.call(this),this.fn=null,this._was_updated()}}notify_dead(){}toString(){var _this$fn2;return"Waiter {".concat(String((_this$fn2=this.fn)==null?void 0:_this$fn2.toString().slice(0,100)),"...}")}};function timeout_warning(name,seconds,cb){let wait_seconds=seconds!=null?seconds:40,timeout=setTimeout(function(){typeof name=="function"&&(name=name()),logger.info("Key failed to return after timeout",{wait_seconds,name}),cb==null||cb()},wait_seconds*1e3);return()=>clearTimeout(timeout)}var Key=class extends KeyBase{constructor(timeout_length,name,timeout_cb){super(),this.timeout_length=void 0,this.name=void 0,this.end_time=void 0,this.timeout=void 0,this._turned=void 0,this.timeout_length=timeout_length,this.name=name,this.timeout_length&&this.timeout_length!==1/0&&(this.end_time=Date.now()+1e3*this.timeout_length,this.timeout=timeout_warning(this.name,this.timeout_length,timeout_cb)),this._turned=!1}is_turned(){return this._turned}is_dead(){return this._turned}max_expected_time(){return this.is_turned()||!this.end_time?null:this.timeout_length===1/0?1/0:this.end_time-Date.now()}turn(){var _this$timeout;this._turned||(this._turned=!0,this._was_updated(),(_this$timeout=this.timeout)==null||_this$timeout.call(this))}toString(){return this.name!=null?"Key "+(typeof this.name=="function"?this.name():this.name):"Anonymous Key"}};exports.Key=Key;function MakeSwitch(timeout,name){if(name||logger.error("anonymous switch created: please name it"),timeout)throw new _errors.UnexpectedError("switch timeout not implemented");return new Switch2(name)}var Switch2=class extends KeyBase{constructor(name){super(),this.name=void 0,this._turned=void 0,this._destroyed=void 0,this.name=name,this._turned=!1,this._destroyed=!1}is_turned(){return this._turned}is_dead(){return this._destroyed}max_expected_time(){return null}turn_off(){if(this._turned){if(this._destroyed)throw new _errors.UnexpectedError("cannot turn off a destroyed switch");this._turned=!1,this._was_updated()}}turn_on(){this._turned||(this._turned=!0,this._was_updated())}destroy(){this._destroyed=!0,this._turned?this._update_dead():this.turn_on()}toString(){return this.name?"Switch "+this.name:"Anonymous Switch"}};exports.Switch=Switch2;function MakeKeyList(keys){return new KeyList(keys)}function TransientKeyList(keys){return new KeyList(keys,!0)}var KeyList=class extends KeyBase{constructor(keys){let transient=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;super(),this.transient=void 0,this._keys=void 0,this._unturned=void 0,this._destroyed=void 0,this.transient=transient,this._keys={},this._unturned=0;for(let key of keys!=null?keys:[])this.add_key(key)}is_turned(){return this._unturned===0}is_dead(){var _this$_destroyed;return(_this$_destroyed=this._destroyed)!=null?_this$_destroyed:!1}make_transient(){return TransientKeyList(Object.values(this._keys))}remove_all(){let was_turned=this.is_turned();for(let id in this._keys){let key=this._keys[id];this._remove(key)}this._unturned=0,was_turned||this._was_updated()}_inc(){this._unturned++,this._unturned===1&&this._was_updated()}_dec(){this._unturned--,this._unturned===0&&this._was_updated()}max_expected_time(){let expected=Object.values(this._keys).map(key=>key.max_expected_time()).filter(t=>!!t);return expected.length?Math.min(...expected):null}add_key(key){if(this._destroyed===!0)throw new _errors.UnexpectedError("cannot add key to a destroyed list");if(!key.is_dead()&&this._keys[key.id()]==null){if(!key.is_turned())this._inc();else if(this.transient)return;this._keys[key.id()]=key,key.listen(this)}}notify(key){key.is_turned()?this._dec():this._inc(),(key.is_dead()||this.transient)&&this._remove(key)}notify_dead(key){this._remove(key)}_remove(key){delete this._keys[key.id()],key.unlisten(this)}add_promise(promise){return this.add_key(promise.ready_key())}make(timeout,name,timeout_cb){let key=MakeKey(timeout,name,timeout_cb);return this.add_key(key),key}get(){return Object.values(this._keys)}toString(){let my_keys=this.get(),unturned_key_strings=my_keys.filter(key=>key.is_turned!=null&&!key.is_turned()).map(key=>key.toString());return"[KeyList(".concat(my_keys.length,") ").concat(unturned_key_strings.join(", ")," ]")}destroy(){this._destroyed=!0;for(let id in this._keys)this._keys[id].unlisten(this);this._keys={},this._unturned===0?this._update_dead():(this._unturned=0,this._was_updated())}};exports.KeyList=KeyList}});var require_b_async3=__commonJS({"lib-browser-old/u/shared/async/b_async.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_web_url_search_params();require_es_regexp_exec();require_es_string_search();var mode_check=require_mode_check();window&&!mode_check.on_react_native()&&new URLSearchParams(location.search).get("newautorun")==="true"?module.exports=require_b_async():module.exports=require_b_async2()}});var require_clientApm=__commonJS({"lib-browser-old/monitoring/apm/clientApm.js"(exports){"use strict";init_define_process_env();init_shim();require_es_object_assign();var _otel$getBaggageEntry,_otel$withBaggageEntr,_otel$getActiveSpan,_otel$getActiveContex,_otel$withContext,_otel$getActiveSpanCo,_otel$withSpanContext,logger=require_logger(),apm=exports,otel,transactionState={currentTransaction:null,completedTransactions:[]},Span=class{constructor(name){let labels=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},sync=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.name=name,this.labels=labels,this.sync=sync,this.start=Date.now()}end(){this.end=Date.now()}setStart(start){this.start=start}},Transaction=class extends Span{constructor(name,labels){super(name,labels),this.spans=[]}startSpan(name){let labels=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},sync=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,span=new Span(name,labels,sync);return this.spans.push(span),span}end(){super.end(),transactionState.completedTransactions.push(transactionState.currentTransaction),transactionState.currentTransaction=null}};apm.startTransaction=function(name,labels){if(transactionState.currentTransaction){logger.warn("APM: Only one transaction can exist at a time");return}return transactionState.currentTransaction=new Transaction(name,labels),transactionState.currentTransaction};apm.endTransaction=function(transaction){transaction&&transaction.end()};apm.addTransactionLabels=function(labels){transactionState.currentTransaction&&Object.assign(transactionState.currentTransaction.labels,labels)};otel!=null&&otel.trace&&(apm.addTransactionLabels=otel.addSpanAttributes);apm.startSpan=function(name){let labels=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},sync=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(transactionState.currentTransaction)return transactionState.currentTransaction.startSpan(name,labels,sync)};apm.endSpan=function(span){span&&span.end()};apm._traceSpanCb=function(name,labels,fn){let span=apm.startSpan(name,labels,!0);try{return fn()}finally{apm.endSpan(span)}};apm.createSpan=()=>({end:()=>{}});apm.traceSpan=apm._traceSpanCb;apm.traceSpanCallback=(name,labels,fn)=>fn({cb:()=>{}});otel!=null&&otel.trace&&(apm.createSpan=otel.createSpan,apm.traceSpan=otel.trace,apm.traceSpanCallback=otel.traceCallback);apm.getCompletedTransactions=()=>transactionState.completedTransactions;apm.clearCompletedTransactions=()=>transactionState.completedTransactions=[];apm.getBaggageEntry=(_otel$getBaggageEntry=otel==null?void 0:otel.getBaggageEntry)!=null?_otel$getBaggageEntry:()=>{};apm.withBaggageEntries=(_otel$withBaggageEntr=otel==null?void 0:otel.withBaggageEntries)!=null?_otel$withBaggageEntr:(entries,fn)=>fn();apm.getActiveSpan=(_otel$getActiveSpan=otel==null?void 0:otel.getActiveSpan)!=null?_otel$getActiveSpan:()=>{};apm.getActiveContext=(_otel$getActiveContex=otel==null?void 0:otel.getActiveContext)!=null?_otel$getActiveContex:()=>{};apm.withContext=(_otel$withContext=otel==null?void 0:otel.withContext)!=null?_otel$withContext:(context,fn)=>fn();apm.getActiveSpanContext=(_otel$getActiveSpanCo=otel==null?void 0:otel.getActiveSpanContext)!=null?_otel$getActiveSpanCo:()=>{};apm.withSpanContext=(_otel$withSpanContext=otel==null?void 0:otel.withSpanContext)!=null?_otel$withSpanContext:(spanContext,fn)=>fn()}});var require_apm=__commonJS({"lib-browser-old/monitoring/apm/index.js"(exports,module){"use strict";init_define_process_env();init_shim();var mode_check=require_mode_check(),safe_require=require_safe_require(),r=__require;mode_check.on_server()?module.exports=r("./serverApm"):module.exports=require_clientApm();safe_require.safe_register("./monitoring/apm",module.exports)}});var require_lib=__commonJS({"lib-browser-old/lib/index.js"(exports,module){"use strict";init_define_process_env();init_shim();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_array_iterator();require_web_dom_collections_iterator();require_es_regexp_to_string();require_es_array_includes();require_es_object_entries();require_es_object_assign();require_es_symbol_description();require_es_error_cause();function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var mode_check=require_mode_check(),errors=require_errors(),b_object=require_b_object(),b_async=require_b_async3(),b_fiber=require_b_fiber(),apm=require_apm(),logger=require_logger(),CONTENTS={app:"wrap",load_plugin:"function",plugin_prefixes:"object",load_custom:"function",bubble_version:"function",bv:"function",appname:"wrap",app_version:"wrap",db_instance:"wrap",current_user:"wrap",current_user_id:"wrap",current_timezone:"wrap",scope:"wrap",is_edit_mode:"wrap",test_prod:"wrap",http_request:"function",app_domain:"function",app_plan:"function",derived:"function",derived_name:"wrap",experiment:"function",location:"object",element:"object",workflow:"object",pageparam:"object",user:"object",phonegap:"object",app_language:"function",get_text:"function",locale:"wrap",browser_locale:"wrap",ddg:"function",visual_edit:"object",edit_canvas:"object",action_editor:"object",action_canvas:"object",data_editor:"object",data_canvas:"object",styles_editor:"object",styles_canvas:"object",logs_editor:"object",app_owners:"function",plugin_editor:"object",plugin_canvas:"object",settings_editor:"object",settings_canvas:"object",property_editor:"object",undostack:"object",clipboard:"object",comment_panel:"object",property_instance_container:"object",exhaustive_composer_canvas:"object",type_editor:"object",option_set_editor:"object",composer:"object",GlobalComposerFocusTracker:"object",SlidablePalette:"function",slidable_palette:"object",ImagePalette:"function",appchange:"object",getChecker:"function",changes:"object",sets:"object",get_session_id:"function",current_user_rights:"function",apptests:"object",visual_edit_is_ready:"object",add_plugin:"object",subscription:"object",app_indicator:"function",request:"object",history:"object",bubble_hostname:"wrap",full_url:"wrap",canonical_uri:"wrap",protocol:"wrap",hostname:"wrap",temp_db:"wrap",ignore_privacy_rules:"wrap",is_api:"function",api_version:"function",request_cache:"object",KeyValueDB:"function",emailservice:"object",task_manager:"object",fileupload:"object",ip:"wrap",speakeasy:"object",log_context:"object",bad_values_in_logs:"object",set_log_tag:"function",log:"function",fiber_id:"function",editor_vendor:"object",force_responsive_version:"object"};function lib_to_string(){let res=["Lib Object {"];res.push(""),res.push("Settings:");function add_fn(name){var _this$name;res.push("    "+name+": "+((_this$name=this[name])==null?void 0:_this$name.call(this)))}add_fn("is_edit_mode"),add_fn("appname"),add_fn("app_version");let all_keys=_objectSpread({},CONTENTS);return res.push(""),res.push("Available:"),res.push(...Object.keys(this).map(key=>(delete all_keys[key],"    "+key))),res.push(""),res.push("Missing:"),res.push(...Object.keys(all_keys).map(k=>"    "+k)),res.push(""),res.push("}"),res.join("\n")}function wrap2(v){return()=>v}function validate_and_wrap(l){var _l$toString;(_l$toString=l.toString)!=null||(l.toString=lib_to_string);for(let k in l){let v=l[k];if(!["toString","running_with_lib"].includes(k)&&v!==void 0)switch(CONTENTS[k]){case"function":if(typeof v!="function")throw new errors.UnexpectedError("expected function for "+k+" but got "+v);break;case"wrap":typeof v!="function"&&(l[k]=wrap2(v));break;case"object":if(typeof v!="object")throw new errors.UnexpectedError("expected object for "+k+" but got "+v);break;default:throw CONTENTS[k]==null?new errors.UnexpectedError("Trying to validate a lib and found an invalid key: "+k):new errors.UnexpectedError("Unrecognized contents entry for "+k+": "+CONTENTS[k])}}}var get_lib_or_undef;typeof window>"u"||window===null?get_lib_or_undef=()=>{var _b_fiber$Fiber$curren;return(_b_fiber$Fiber$curren=b_fiber.Fiber.current)==null?void 0:_b_fiber$Fiber$curren._running_lib}:get_lib_or_undef=()=>_global_lib;module.exports=get_lib_or_undef;var Lib=module.exports,safe_require=require_safe_require();safe_require.safe_register("./lib",Lib);Lib.if_any=get_lib_or_undef;Lib.or_throw=function(){let cur_lib=get_lib_or_undef();if(cur_lib==null)throw new errors.UnexpectedError("Missing Lib!");return cur_lib};safe_require.safe_register("./lib",Lib);Lib.register_watcher=register_watcher;var ENTER="enter",EXIT="exit",EXTEND="extend",RETRACT="retract",watchers={[ENTER]:[],[EXIT]:[],[EXTEND]:[],[RETRACT]:[]};function register_watcher(event,fn){!(event in watchers)||typeof fn!="function"||watchers[event].push(fn)}function call_change_watcher(event,incoming,previous){for(let watcher of(_watchers$event=watchers[event])!=null?_watchers$event:[]){var _watchers$event;watcher(incoming,previous)}}function on_lib_change(incoming,previous,reason){track_running_app(incoming,previous),reason===ENTER&&previous==null&&set_error_hooks(),call_change_watcher(reason,incoming,previous),[ENTER,EXTEND].includes(reason)&&track_fiber_owner(incoming,previous)}function set_error_hooks(){mode_check.is_edit_mode()||errors.set_error_hook("default_display",()=>{var _Lib;return(_Lib=Lib())==null?void 0:_Lib.get_text("CORE","TEMPORARY_BUG")}),errors.set_error_hook("localize_message",(plugin,name)=>{var _Lib2;return(_Lib2=Lib())==null?void 0:_Lib2.get_text(plugin,name)}),errors.set_error_hook("get_client_args",args=>{var _ref,_args$code,_Lib3;return{code:(_ref=(_args$code=args.code)!=null?_args$code:(_Lib3=Lib())==null?void 0:_Lib3.fiber_id())!=null?_ref:"no code found"}})}function track_running_app(incoming){var _b_fiber$Fiber,_incoming$appname,_incoming$app_version;if((incoming==null?void 0:incoming.appname)==null||((_b_fiber$Fiber=b_fiber.Fiber)==null?void 0:_b_fiber$Fiber.current)==null)return;let new_appname=(_incoming$appname=incoming.appname)==null?void 0:_incoming$appname.call(incoming),new_app_version=(_incoming$app_version=incoming.app_version)==null?void 0:_incoming$app_version.call(incoming);new_appname!=null&&b_fiber.set_running_app(new_appname,new_app_version)}function track_fiber_owner(incoming){var _b_fiber$Fiber2,_incoming$appname2,_incoming$app_version2;if((incoming==null?void 0:incoming.appname)==null||((_b_fiber$Fiber2=b_fiber.Fiber)==null?void 0:_b_fiber$Fiber2.current)==null)return;let new_appname=(_incoming$appname2=incoming.appname)==null?void 0:_incoming$appname2.call(incoming),new_app_version=(_incoming$app_version2=incoming.app_version)==null?void 0:_incoming$app_version2.call(incoming),{fiber_appname}=b_fiber.Fiber.current;new_appname==null?fiber_appname!=null&&(logger.log("warn","overwriting fiber appname with null",{fiber_appname}),b_fiber.Fiber.current.fiber_appname=null):new_appname==="meta"?fiber_appname==null&&b_fiber.assign_fiber_ownership(new_appname,new_app_version):(fiber_appname==null||fiber_appname==="meta"||fiber_appname===new_appname||logger.log("warn","transmuting fiber between non-meta apps",{fiber_appname,new_appname}),b_fiber.assign_fiber_ownership(new_appname,new_app_version))}var lib_ready_key=null,get_lib_ready_key=Lib.get_lib_ready_key=()=>{var _lib_ready_key;return(_lib_ready_key=lib_ready_key)!=null||(lib_ready_key=b_async.MakeKey(null,"lib_ready_key")),lib_ready_key},_global_lib;Lib.set_global_lib=function(l){validate_and_wrap(l),on_lib_change(l,_global_lib,ENTER),_global_lib=l,get_lib_ready_key().turn()};Lib.extend_global=function(settings){let cur_lib=Lib(),new_l=b_object.extend({},cur_lib,settings);return on_lib_change(new_l,cur_lib,EXTEND),Lib.set_global_lib(new_l)};Lib.wait_for_lib=cb=>b_async.WaitFor(get_lib_ready_key(),cb);Lib.with_lib=function(l,fn){validate_and_wrap(l),l.running_with_lib?l=_objectSpread({},l):l.running_with_lib=!0;let old_lib=b_fiber.Fiber.current._running_lib;on_lib_change(l,old_lib,ENTER),b_fiber.Fiber.current._running_lib=l,typeof l.fiber_id=="function"&&apm.addTransactionLabels({fiber_id:l.fiber_id()});try{return fn()}finally{on_lib_change(old_lib,l,EXIT),b_fiber.Fiber.current._running_lib=old_lib}};typeof window<"u"&&window!==null?Lib.extend=function(settings,fn){if(!_global_lib)throw new errors.UnexpectedError("can only call Lib.extend if you have already called Lib.set_global_lib");validate_and_wrap(settings);let originals={};for(let[k,v]of Object.entries(settings))v!==void 0&&(originals[k]=_global_lib[k],_global_lib[k]=v);on_lib_change(_global_lib,originals,EXTEND);try{return fn()}finally{on_lib_change(originals,_global_lib,RETRACT),Object.assign(_global_lib,originals)}}:Lib.extend=function(settings,fn){if(!b_fiber.Fiber.current._running_lib)throw new errors.UnexpectedError("can only call Lib.extend if you are already in a Lib.with_lib");validate_and_wrap(settings);let originals={};for(let[k,v]of Object.entries(settings))v!==void 0&&(originals[k]=b_fiber.Fiber.current._running_lib[k],b_fiber.Fiber.current._running_lib[k]=v);on_lib_change(b_fiber.Fiber.current._running_lib,originals,EXTEND);try{return fn()}finally{on_lib_change(originals,b_fiber.Fiber.current._running_lib,RETRACT),Object.assign(b_fiber.Fiber.current._running_lib,originals)}}}});var require_regexUtilities=__commonJS({"lib-browser-old/u/shared/regexUtilities.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.asRegexSource=asRegexSource;exports.atomic=atomic;exports.capture=capture;exports.concat=concat;exports.escapeString=escapeString;exports.negativeLookahead=negativeLookahead;exports.oneOf=oneOf;exports.re=re;exports.regexTemplate=regexTemplate;exports.unescapeLiteral=unescapeLiteral;exports.withFlags=withFlags;require_es_regexp_constructor();require_es_regexp_dot_all();require_es_regexp_exec();require_es_regexp_to_string();require_es_array_iterator();require_web_dom_collections_iterator();require_es_error_cause();require_es_string_replace();function re(flagsOrLiterals){if(typeof flagsOrLiterals=="string")return function(){return new RegExp(regexTemplate(...arguments),flagsOrLiterals)};for(var _len=arguments.length,rest=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)rest[_key-1]=arguments[_key];return regexTemplate(flagsOrLiterals,...rest)}function oneOf(){for(var _len2=arguments.length,parts=new Array(_len2),_key2=0;_key2<_len2;_key2++)parts[_key2]=arguments[_key2];return parts.length===0?/^\b$/:new RegExp(parts.map(asRegexSource).join("|"))}function concat(){for(var _len3=arguments.length,parts=new Array(_len3),_key3=0;_key3<_len3;_key3++)parts[_key3]=arguments[_key3];return new RegExp(parts.map(asRegexSource).join(""))}function capture(name,part){return new RegExp("(?<".concat(name,">").concat(asRegexSource(part),")"))}function negativeLookahead(part){return new RegExp("(?!".concat(asRegexSource(part),")"))}function withFlags(flags,rx){return new RegExp(rx,flags)}function regexTemplate(literalParts){let source=unescapeLiteral(literalParts.raw[0]);for(var _len4=arguments.length,injectedParts=new Array(_len4>1?_len4-1:0),_key4=1;_key4<_len4;_key4++)injectedParts[_key4-1]=arguments[_key4];for(let[i,part]of injectedParts.entries())source+=asRegexSource(part),source+=unescapeLiteral(literalParts.raw[i+1]);return new RegExp(source)}function asRegexSource(part){if(part instanceof RegExp)return atomic(part.source);if(typeof part=="string")return atomic(escapeString(part));throw new Error("Illegal value used as regex part")}function atomic(str){return"(?:".concat(str,")")}function unescapeLiteral(str){return str.replace(/\\`/g,"`")}var specials=Array.from(["\\",".[]^-{}","()<>?!=:","^$","{}*+?|"].join("")),escapedSpecials=specials.map(c=>"\\".concat(c)),regexSpecials=new RegExp("[".concat(escapedSpecials.join(""),"]"),"g");function escapeString(str){return str.replace(regexSpecials,"\\$&")}}});var require_moment_timezone_min=__commonJS({"vendor/jquery_plugins/moment.timezone.min.js"(exports,module){"use strict";init_define_process_env();init_shim();(function(c,M){"use strict";typeof module=="object"&&module.exports?module.exports=M(require_moment()):typeof define=="function"&&define.amd?define(["moment"],M):M(c.moment)})(exports,function(o){"use strict";o.version===void 0&&o.default&&(o=o.default);var M,z={},i={},b={},e={},r={},c=(o&&typeof o.version=="string"||S("Moment Timezone requires Moment.js. See https://momentjs.com/timezone/docs/#/use-it/browser/"),o.version.split(".")),a=+c[0],A=+c[1];function n(c2){return 96<c2?c2-87:64<c2?c2-29:c2-48}function p(c2){var M2=0,a2=c2.split("."),A2=a2[0],o2=a2[1]||"",i2=1,b2=0,a2=1;for(c2.charCodeAt(0)===45&&(a2=-(M2=1));M2<A2.length;M2++)b2=60*b2+n(A2.charCodeAt(M2));for(M2=0;M2<o2.length;M2++)i2/=60,b2+=n(o2.charCodeAt(M2))*i2;return b2*a2}function q(c2){for(var M2=0;M2<c2.length;M2++)c2[M2]=p(c2[M2])}function O(c2,M2){for(var a2=[],A2=0;A2<M2.length;A2++)a2[A2]=c2[M2[A2]];return a2}function d(c2){for(var c2=c2.split("|"),M2=c2[2].split(" "),a2=c2[3].split(""),A2=c2[4].split(" "),o2=(q(M2),q(a2),q(A2),A2),i2=a2.length,b2=0;b2<i2;b2++)o2[b2]=Math.round((o2[b2-1]||0)+6e4*o2[b2]);return o2[i2-1]=1/0,{name:c2[0],abbrs:O(c2[1].split(" "),a2),offsets:O(M2,a2),untils:A2,population:0|c2[5]}}function f(c2){c2&&this._set(d(c2))}function t(c2,M2){this.name=c2,this.zones=M2}function N(c2){var M2=c2.toTimeString(),a2=M2.match(/\([a-z ]+\)/i);(a2=a2&&a2[0]?(a2=a2[0].match(/[A-Z]/g))?a2.join(""):void 0:(a2=M2.match(/[A-Z]{3,5}/g))?a2[0]:void 0)==="GMT"&&(a2=void 0),this.at=+c2,this.abbr=a2,this.offset=c2.getTimezoneOffset()}function u(c2){this.zone=c2,this.offsetScore=0,this.abbrScore=0}function L(){for(var c2,M2,a2=new Date().getFullYear()-2,A2=new N(new Date(a2,0,1)),o2=[A2],i2=1;i2<48;i2++)(M2=new N(new Date(a2,i2,1))).offset!==A2.offset&&(c2=function(c3,M3){for(var a3;a3=6e4*((M3.at-c3.at)/12e4|0);)(a3=new N(new Date(c3.at+a3))).offset===c3.offset?c3=a3:M3=a3;return c3}(A2,M2),o2.push(c2),o2.push(new N(new Date(c2.at+6e4)))),A2=M2;for(i2=0;i2<4;i2++)o2.push(new N(new Date(a2+i2,0,1))),o2.push(new N(new Date(a2+i2,6,1)));return o2}function l(c2,M2){return c2.offsetScore!==M2.offsetScore?c2.offsetScore-M2.offsetScore:c2.abbrScore!==M2.abbrScore?c2.abbrScore-M2.abbrScore:c2.zone.population!==M2.zone.population?M2.zone.population-c2.zone.population:M2.zone.name.localeCompare(c2.zone.name)}function W(){try{var c2=Intl.DateTimeFormat().resolvedOptions().timeZone;if(c2&&3<c2.length){var M2=e[B(c2)];if(M2)return M2;S("Moment Timezone found "+c2+" from the Intl api, but did not have that data loaded.")}}catch(c3){}for(var a2,A2,o2=L(),i2=o2.length,b2=function(c3){for(var M3,a3,A3=c3.length,o3={},i3=[],b3=0;b3<A3;b3++)for(M3 in a3=r[c3[b3].offset]||{})a3.hasOwnProperty(M3)&&(o3[M3]=!0);for(b3 in o3)o3.hasOwnProperty(b3)&&i3.push(e[b3]);return i3}(o2),n2=[],p2=0;p2<b2.length;p2++){for(a2=new u(X(b2[p2])),A2=0;A2<i2;A2++)a2.scoreOffsetAt(o2[A2]);n2.push(a2)}return n2.sort(l),0<n2.length?n2[0].zone.name:void 0}function B(c2){return(c2||"").toLowerCase().replace(/\//g,"_")}function s(c2){var M2,a2,A2,o2;for(typeof c2=="string"&&(c2=[c2]),M2=0;M2<c2.length;M2++){o2=B(a2=(A2=c2[M2].split("|"))[0]),z[o2]=c2[M2],e[o2]=a2,b2=i2=p2=n2=void 0;var i2,b2,n2=o2,p2=A2[2].split(" ");for(q(p2),i2=0;i2<p2.length;i2++)b2=p2[i2],r[b2]=r[b2]||{},r[b2][n2]=!0}}function X(c2,M2){c2=B(c2);var a2=z[c2];return a2 instanceof f?a2:typeof a2=="string"?(a2=new f(a2),z[c2]=a2):i[c2]&&M2!==X&&(M2=X(i[c2],X))?((a2=z[c2]=new f)._set(M2),a2.name=e[c2],a2):null}function m(c2){var M2,a2,A2,o2;for(typeof c2=="string"&&(c2=[c2]),M2=0;M2<c2.length;M2++)A2=B((a2=c2[M2].split("|"))[0]),o2=B(a2[1]),i[A2]=o2,e[A2]=a2[0],i[o2]=A2,e[o2]=a2[1]}function T(c2){s(c2.zones),m(c2.links);var M2,a2,A2,o2=c2.countries;if(o2&&o2.length)for(M2=0;M2<o2.length;M2++)a2=(A2=o2[M2].split("|"))[0].toUpperCase(),A2=A2[1].split(" "),b[a2]=new t(a2,A2);C.dataVersion=c2.version}function E(c2){return E.didShowError||(E.didShowError=!0,S("moment.tz.zoneExists('"+c2+"') has been deprecated in favor of !moment.tz.zone('"+c2+"')")),!!X(c2)}function R(c2){var M2=c2._f==="X"||c2._f==="x";return!(!c2._a||c2._tzm!==void 0||M2)}function S(c2){typeof console<"u"&&typeof console.error=="function"&&console.error(c2)}function C(c2){var M2=Array.prototype.slice.call(arguments,0,-1),a2=arguments[arguments.length-1],A2=X(a2),M2=o.utc.apply(null,M2);return A2&&!o.isMoment(c2)&&R(M2)&&M2.add(A2.parse(M2),"minutes"),M2.tz(a2),M2}(a<2||a==2&&A<6)&&S("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+o.version+". See momentjs.com"),f.prototype={_set:function(c2){this.name=c2.name,this.abbrs=c2.abbrs,this.untils=c2.untils,this.offsets=c2.offsets,this.population=c2.population},_index:function(c2){for(var M2=+c2,a2=this.untils,A2=0;A2<a2.length;A2++)if(M2<a2[A2])return A2},countries:function(){var M2=this.name;return Object.keys(b).filter(function(c2){return b[c2].zones.indexOf(M2)!==-1})},parse:function(c2){for(var M2,a2,A2,o2=+c2,i2=this.offsets,b2=this.untils,n2=b2.length-1,p2=0;p2<n2;p2++)if(M2=i2[p2],a2=i2[p2+1],A2=i2[p2&&p2-1],M2<a2&&C.moveAmbiguousForward?M2=a2:A2<M2&&C.moveInvalidForward&&(M2=A2),o2<b2[p2]-6e4*M2)return i2[p2];return i2[n2]},abbr:function(c2){return this.abbrs[this._index(c2)]},offset:function(c2){return S("zone.offset has been deprecated in favor of zone.utcOffset"),this.offsets[this._index(c2)]},utcOffset:function(c2){return this.offsets[this._index(c2)]}},u.prototype.scoreOffsetAt=function(c2){this.offsetScore+=Math.abs(this.zone.utcOffset(c2.at)-c2.offset),this.zone.abbr(c2.at).replace(/[^A-Z]/g,"")!==c2.abbr&&this.abbrScore++},C.version="0.5.43",C.dataVersion="",C._zones=z,C._links=i,C._names=e,C._countries=b,C.add=s,C.link=m,C.load=T,C.zone=X,C.zoneExists=E,C.guess=function(c2){return M=M&&!c2?M:W()},C.names=function(){var c2,M2=[];for(c2 in e)e.hasOwnProperty(c2)&&(z[c2]||z[i[c2]])&&e[c2]&&M2.push(e[c2]);return M2.sort()},C.Zone=f,C.unpack=d,C.unpackBase60=p,C.needsOffset=R,C.moveInvalidForward=!0,C.moveAmbiguousForward=!1,C.countries=function(){return Object.keys(b)},C.zonesForCountry=function(c2,M2){var a2;return a2=(a2=c2).toUpperCase(),(c2=b[a2]||null)?(a2=c2.zones.sort(),M2?a2.map(function(c3){return{name:c3,offset:X(c3).utcOffset(new Date)}}):a2):null};var h,c=o.fn;function P(c2){return function(){return this._z?this._z.abbr(this):c2.call(this)}}function g(c2){return function(){return this._z=null,c2.apply(this,arguments)}}return o.tz=C,o.defaultZone=null,o.updateOffset=function(c2,M2){var a2,A2=o.defaultZone;c2._z===void 0&&(A2&&R(c2)&&!c2._isUTC&&(c2._d=o.utc(c2._a)._d,c2.utc().add(A2.parse(c2),"minutes")),c2._z=A2),c2._z&&(A2=c2._z.utcOffset(c2),Math.abs(A2)<16&&(A2/=60),c2.utcOffset!==void 0?(a2=c2._z,c2.utcOffset(-A2,M2),c2._z=a2):c2.zone(A2,M2))},c.tz=function(c2,M2){if(c2){if(typeof c2!="string")throw new Error("Time zone name must be a string, got "+c2+" ["+typeof c2+"]");return this._z=X(c2),this._z?o.updateOffset(this,M2):S("Moment Timezone has no data for "+c2+". See http://momentjs.com/timezone/docs/#/data-loading/."),this}if(this._z)return this._z.name},c.zoneName=P(c.zoneName),c.zoneAbbr=P(c.zoneAbbr),c.utc=g(c.utc),c.local=g(c.local),c.utcOffset=(h=c.utcOffset,function(){return 0<arguments.length&&(this._z=null),h.apply(this,arguments)}),o.tz.setDefault=function(c2){return(a<2||a==2&&A<9)&&S("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js "+o.version+"."),o.defaultZone=c2?X(c2):null,o},c=o.momentProperties,Object.prototype.toString.call(c)==="[object Array]"?(c.push("_z"),c.push("_a")):c&&(c._z=null),T({version:"2023c",zones:["Africa/Abidjan|GMT|0|0||48e5","Africa/Nairobi|EAT|-30|0||47e5","Africa/Algiers|WET WEST CET CEST|0 -10 -10 -20|01012320102|3bX0 11A0 dDd0 17b0 11B0 1cN0 2Dy0 1cN0 1fB0 1cL0|26e5","Africa/Lagos|WAT|-10|0||17e6","Africa/Bissau|-01 GMT|10 0|01|cap0|39e4","Africa/Maputo|CAT|-20|0||26e5","Africa/Cairo|EET EEST|-20 -30|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|LX0 11d0 1oL0 11d0 1pb0 11d0 1oL0 11d0 1oL0 11d0 1oL0 11d0 1pb0 11d0 1oL0 11d0 1oL0 11d0 1oL0 11d0 1pb0 11d0 1oL0 11d0 1WL0 rd0 1Rz0 wp0 1pb0 11d0 1oL0 11d0 1oL0 11d0 1oL0 11d0 1pb0 11d0 1qL0 Xd0 1oL0 11d0 1oL0 11d0 1pb0 11d0 1oL0 11d0 1oL0 11d0 1ny0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 WL0 1qN0 Rb0 1wp0 On0 1zd0 Lz0 1EN0 Fb0 c10 8n0 8Nd0 gL0 e10 mn0 kSp0 1cL0 1cN0 1fz0 1a10 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0|15e6","Africa/Casablanca|+00 +01|0 -10|01010101010101010101010101010101010101010101010101010101010101010101010|aS00 rz0 43d0 AL0 1Nd0 XX0 1Cp0 pz0 dEp0 4mn0 SyN0 AL0 1Nd0 wn0 1FB0 Db0 1zd0 Lz0 1Nf0 wM0 co0 go0 1o00 s00 dA0 vc0 11A0 A00 e00 y00 11A0 uM0 e00 Dc0 11A0 s00 e00 IM0 WM0 mo0 gM0 LA0 WM0 jA0 e00 28M0 e00 2600 gM0 2600 e00 2600 gM0 2600 e00 28M0 e00 2600 gM0 2600 e00 28M0 e00 2600 gM0 2600 e00 2600 gM0 2600|32e5","Africa/Ceuta|WET WEST CET CEST|0 -10 -10 -20|0101010102323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232|aS00 rz0 43d0 AL0 1Nd0 XX0 1Cp0 pz0 dEp0 4VB0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|85e3","Africa/El_Aaiun|-01 +00 +01|10 0 -10|01212121212121212121212121212121212121212121212121212121212121212121|fi10 6L0 AL0 1Nd0 XX0 1Cp0 pz0 1cBB0 AL0 1Nd0 wn0 1FB0 Db0 1zd0 Lz0 1Nf0 wM0 co0 go0 1o00 s00 dA0 vc0 11A0 A00 e00 y00 11A0 uM0 e00 Dc0 11A0 s00 e00 IM0 WM0 mo0 gM0 LA0 WM0 jA0 e00 28M0 e00 2600 gM0 2600 e00 2600 gM0 2600 e00 28M0 e00 2600 gM0 2600 e00 28M0 e00 2600 gM0 2600 e00 2600 gM0 2600|20e4","Africa/Johannesburg|SAST|-20|0||84e5","Africa/Juba|CAT CAST EAT|-20 -30 -30|01010101010101010101010101010101020|LW0 16L0 1iN0 17b0 1jd0 17b0 1ip0 17z0 1i10 17X0 1hB0 18n0 1hd0 19b0 1gp0 19z0 1iN0 17b0 1ip0 17z0 1i10 18n0 1hd0 18L0 1gN0 19b0 1gp0 19z0 1iN0 17z0 1i10 17X0 yGd0 PeX0|","Africa/Khartoum|CAT CAST EAT|-20 -30 -30|01010101010101010101010101010101020|LW0 16L0 1iN0 17b0 1jd0 17b0 1ip0 17z0 1i10 17X0 1hB0 18n0 1hd0 19b0 1gp0 19z0 1iN0 17b0 1ip0 17z0 1i10 18n0 1hd0 18L0 1gN0 19b0 1gp0 19z0 1iN0 17z0 1i10 17X0 yGd0 HjL0|51e5","Africa/Monrovia|MMT GMT|I.u 0|01|4SoI.u|11e5","Africa/Ndjamena|WAT WAST|-10 -20|010|nNb0 Wn0|13e5","Africa/Sao_Tome|GMT WAT|0 -10|010|1UQN0 2q00|","Africa/Tripoli|EET CET CEST|-20 -10 -20|0121212121212121210120120|tda0 A10 1db0 1cN0 1db0 1dd0 1db0 1eN0 1bb0 1e10 1cL0 1c10 1db0 1dd0 1db0 1cN0 1db0 1q10 fAn0 1ep0 1db0 AKq0 TA0 1o00|11e5","Africa/Tunis|CET CEST|-10 -20|0101010101010101010|hOn0 WM0 1rA0 11c0 nwo0 Ko0 1cM0 1cM0 1rA0 10M0 zuM0 10N0 1aN0 1qM0 WM0 1qM0 11A0 1o00|20e5","Africa/Windhoek|SAST CAT WAT|-20 -20 -10|01212121212121212121212121212121212121212121212121|Ndy0 9Io0 16P0 1nX0 11B0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0|32e4","America/Adak|BST BDT AHST HST HDT|b0 a0 a0 a0 90|0101010101010101010101010101234343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343|Kd0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 cm0 10q0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|326","America/Anchorage|AHST AHDT YST AKST AKDT|a0 90 90 90 80|0101010101010101010101010101234343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343|Kc0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 cm0 10q0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|30e4","America/Puerto_Rico|AST|40|0||24e5","America/Araguaina|-03 -02|30 20|01010101010101010101010101010|CxD0 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 dMN0 Lz0 1zd0 Rb0 1wN0 Wn0 1tB0 Rb0 1tB0 WL0 1tB0 Rb0 1zd0 On0 1HB0 FX0 ny10 Lz0|14e4","America/Argentina/Buenos_Aires|-03 -02|30 20|01010101010101010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wp0 Rb0 1wp0 TX0 A4p0 uL0 1qN0 WL0|","America/Argentina/Catamarca|-03 -02 -04|30 20 40|01010101210102010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wq0 Ra0 1wp0 TX0 rlB0 7B0 8zb0 uL0|","America/Argentina/Cordoba|-03 -02 -04|30 20 40|01010101210101010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wq0 Ra0 1wp0 TX0 A4p0 uL0 1qN0 WL0|","America/Argentina/Jujuy|-03 -02 -04|30 20 40|010101202101010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1ze0 TX0 1ld0 WK0 1wp0 TX0 A4p0 uL0|","America/Argentina/La_Rioja|-03 -02 -04|30 20 40|010101012010102010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Qn0 qO0 16n0 Rb0 1wp0 TX0 rlB0 7B0 8zb0 uL0|","America/Argentina/Mendoza|-03 -02 -04|30 20 40|01010120202102010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1u20 SL0 1vd0 Tb0 1wp0 TW0 ri10 Op0 7TX0 uL0|","America/Argentina/Rio_Gallegos|-03 -02 -04|30 20 40|01010101010102010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wp0 Rb0 1wp0 TX0 rlB0 7B0 8zb0 uL0|","America/Argentina/Salta|-03 -02 -04|30 20 40|010101012101010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wq0 Ra0 1wp0 TX0 A4p0 uL0|","America/Argentina/San_Juan|-03 -02 -04|30 20 40|010101012010102010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Qn0 qO0 16n0 Rb0 1wp0 TX0 rld0 m10 8lb0 uL0|","America/Argentina/San_Luis|-03 -02 -04|30 20 40|010101202020102020|9Rf0 Db0 zvd0 Bz0 1tB0 XX0 1q20 SL0 AN0 vDb0 m10 8lb0 8L0 jd0 1qN0 WL0 1qN0|","America/Argentina/Tucuman|-03 -02 -04|30 20 40|0101010121010201010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wq0 Ra0 1wp0 TX0 rlB0 4N0 8BX0 uL0 1qN0 WL0|","America/Argentina/Ushuaia|-03 -02 -04|30 20 40|01010101010102010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wp0 Rb0 1wp0 TX0 rkN0 8p0 8zb0 uL0|","America/Asuncion|-04 -03|40 30|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|6FE0 3CL0 3Dd0 10L0 1pB0 10n0 1pB0 10n0 1pB0 1cL0 1dd0 1db0 1dd0 1cL0 1dd0 1cL0 1dd0 1cL0 1dd0 1db0 1dd0 1cL0 1dd0 1cL0 1dd0 1cL0 1dd0 1db0 1dd0 1cL0 1lB0 14n0 1dd0 1cL0 1fd0 WL0 1rd0 1aL0 1dB0 Xz0 1qp0 Xb0 1qN0 10L0 1rB0 TX0 1tB0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 1cL0 WN0 1qL0 11B0 1nX0 1ip0 WL0 1qN0 WL0 1qN0 WL0 1tB0 TX0 1tB0 TX0 1tB0 19X0 1a10 1fz0 1a10 1fz0 1cN0 17b0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0|28e5","America/Panama|EST|50|0||15e5","America/Bahia_Banderas|PST MST MDT CDT CST|80 70 60 50 60|01212121212121212121212121212134343434343434343434343434|80 13Vd0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nW0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0|84e3","America/Bahia|-03 -02|30 20|010101010101010101010101010101010101010|CxD0 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 1EN0 Lz0 1C10 IL0 1HB0 Db0 1HB0 On0 1zd0 On0 1zd0 Lz0 1zd0 Rb0 1wN0 Wn0 1tB0 Rb0 1tB0 WL0 1tB0 Rb0 1zd0 On0 1HB0 FX0 l5B0 Rb0|27e5","America/Barbados|AST ADT|40 30|010101010|i7G0 IL0 1ip0 17b0 1ip0 17b0 1ld0 13b0|28e4","America/Belem|-03 -02|30 20|0101010|CxD0 Rb0 1tB0 IL0 1Fd0 FX0|20e5","America/Belize|CST CDT|60 50|01010|9xG0 qn0 lxB0 mn0|57e3","America/Boa_Vista|-04 -03|40 30|01010101010|CxE0 Rb0 1tB0 IL0 1Fd0 FX0 smp0 WL0 1tB0 2L0|62e2","America/Bogota|-05 -04|50 40|010|Snh0 1PX0|90e5","America/Boise|MST MDT|70 60|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K90 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 Dd0 1Kn0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|21e4","America/Cambridge_Bay|MST MDT CST CDT EST|70 60 60 50 50|010101010101010101010101010101010101010101010101010101012342101010101010101010101010101010101010101010101010101010101010|5E90 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11A0 1nX0 2K0 WQ0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|15e2","America/Campo_Grande|-04 -03|40 30|010101010101010101010101010101010101010101010101010101010101010101010|CxE0 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 1EN0 Lz0 1C10 IL0 1HB0 Db0 1HB0 On0 1zd0 On0 1zd0 Lz0 1zd0 Rb0 1wN0 Wn0 1tB0 Rb0 1tB0 WL0 1tB0 Rb0 1zd0 On0 1HB0 FX0 1C10 Lz0 1Ip0 HX0 1zd0 On0 1HB0 IL0 1wp0 On0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 Rb0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1HB0 FX0|77e4","America/Cancun|CST EST EDT CDT|60 50 40 50|012121230303030303030303030303030303030301|t9G0 yLB0 1lb0 14p0 1lb0 14p0 Lz0 xB0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 Dd0|63e4","America/Caracas|-04 -0430|40 4u|010|1wmv0 kqo0|29e5","America/Cayenne|-03|30|0||58e3","America/Chicago|CST CDT|60 50|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K80 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|92e5","America/Chihuahua|CST CDT MDT MST|60 50 60 70|0101023232323232323232323232323232323232323232323232320|13Vk0 1lb0 14p0 1lb0 14q0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0|81e4","America/Ciudad_Juarez|CST CDT MDT MST|60 50 60 70|010102323232323232323232323232323232323232323232323232032323232323232323|13Vk0 1lb0 14p0 1lb0 14q0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 U10 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1wn0 cm0 EP0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|","America/Costa_Rica|CST CDT|60 50|010101010|mgS0 Db0 1Kp0 Db0 pRB0 15b0 1kp0 mL0|12e5","America/Phoenix|MST|70|0||42e5","America/Cuiaba|-04 -03|40 30|0101010101010101010101010101010101010101010101010101010101010101010|CxE0 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 1EN0 Lz0 1C10 IL0 1HB0 Db0 1HB0 On0 1zd0 On0 1zd0 Lz0 1zd0 Rb0 1wN0 Wn0 1tB0 Rb0 1tB0 WL0 1tB0 Rb0 1zd0 On0 1HB0 FX0 4a10 HX0 1zd0 On0 1HB0 IL0 1wp0 On0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 Rb0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1HB0 FX0|54e4","America/Danmarkshavn|-03 -02 GMT|30 20 0|0101010101010101010101010101010102|oXh0 19U0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 DC0|8","America/Dawson_Creek|PST PDT MST|80 70 70|0101012|Ka0 1cL0 1cN0 1fz0 1cN0 ML0|12e3","America/Dawson|YST PST PDT MST|90 80 70 70|012121212121212121212121212121212121212121212121212121212121212121212121212121212123|9ix0 fNd0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1z90|13e2","America/Denver|MST MDT|70 60|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K90 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|26e5","America/Detroit|EST EDT|50 40|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|85H0 1cL0 s10 1Vz0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|37e5","America/Edmonton|MST MDT|70 60|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|5E90 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|10e5","America/Eirunepe|-05 -04|50 40|01010101010|CxF0 Rb0 1tB0 IL0 1Fd0 FX0 dPB0 On0 yTd0 d5X0|31e3","America/El_Salvador|CST CDT|60 50|01010|Gcu0 WL0 1qN0 WL0|11e5","America/Tijuana|PST PDT|80 70|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|fmy0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 U10 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|20e5","America/Fort_Nelson|PST PDT MST|80 70 70|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010102|Ka0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0|39e2","America/Fort_Wayne|EST EDT|50 40|01010101010101010101010101010101010101010101010101010|K70 1cL0 1qhd0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|","America/Fortaleza|-03 -02|30 20|01010101010101010|CxD0 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 nsp0 WL0 1tB0 5z0 2mN0 On0|34e5","America/Glace_Bay|AST ADT|40 30|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|5E60 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|19e3","America/Godthab|-03 -02 -01|30 20 10|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010121212121212121|oXh0 19U0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 2so0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|17e3","America/Goose_Bay|AST ADT ADDT|40 30 20|010101010101010101010101010101010101020101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K60 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14n1 1lb0 14p0 1nW0 11C0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zcX Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|76e2","America/Grand_Turk|EST EDT AST|50 40 40|0101010101010101010101010101010101010101010101010101010101010101010101010210101010101010101010101010|mG70 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 7jA0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|37e2","America/Guatemala|CST CDT|60 50|010101010|9tG0 An0 mtd0 Nz0 ifB0 17b0 zDB0 11z0|13e5","America/Guayaquil|-05 -04|50 40|010|TKR0 rz0|27e5","America/Guyana|-0345 -03 -04|3J 30 40|012|dzfJ Ey0f|80e4","America/Halifax|AST ADT|40 30|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K60 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|39e4","America/Havana|CST CDT|50 40|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K50 1cL0 1cN0 1fz0 1cN0 14n0 1ld0 14L0 1kN0 15b0 1kp0 1cL0 1cN0 1fz0 1a10 1fz0 1fB0 11z0 14p0 1nX0 11B0 1nX0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 14n0 1ld0 14n0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 1a10 1in0 1a10 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 17c0 1o00 11A0 1qM0 11A0 1o00 11A0 1o00 14o0 1lc0 14o0 1lc0 11A0 6i00 Rc0 1wo0 U00 1tA0 Rc0 1wo0 U00 1wo0 U00 1zc0 U00 1qM0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0|21e5","America/Hermosillo|PST MST MDT|80 70 60|01212121|80 13Vd0 1lb0 14p0 1lb0 14p0 1lb0|64e4","America/Indiana/Knox|CST CDT EST|60 50 50|01010101010101010101010101010101010101010101210101010101010101010101010101010101010101010101010|K80 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 z8o0 1o00 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|","America/Indiana/Marengo|EST EDT CDT|50 40 50|010101010201010101010101010101010101010101010101010101010101010|K70 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1VA0 LA0 1BX0 1e6p0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|","America/Indiana/Petersburg|CST CDT EST EDT|60 50 50 40|0101010101010101210123232323232323232323232323232323232323232323232|K80 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 19co0 1o00 Rd0 1zb0 Oo0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|","America/Indiana/Tell_City|EST EDT CDT CST|50 40 50 60|01023232323232323232323232323232323232323232323232323|K70 1cL0 1qhd0 1o00 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|","America/Indiana/Vevay|EST EDT|50 40|010101010101010101010101010101010101010101010101010101010|K70 1cL0 1cN0 1fz0 1cN0 1cL0 1lnd0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|","America/Indiana/Vincennes|EST EDT CDT CST|50 40 50 60|01023201010101010101010101010101010101010101010101010|K70 1cL0 1qhd0 1o00 Rd0 1zb0 Oo0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|","America/Indiana/Winamac|EST EDT CDT CST|50 40 50 60|01023101010101010101010101010101010101010101010101010|K70 1cL0 1qhd0 1o00 Rd0 1za0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|","America/Inuvik|PST PDT MDT MST|80 70 60 70|01010101010101023232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323|5Ea0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cK0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|35e2","America/Iqaluit|EST EDT CST CDT|50 40 60 50|01010101010101010101010101010101010101010101010101010101230101010101010101010101010101010101010101010101010101010101010|5E70 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11C0 1nX0 11A0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|67e2","America/Jamaica|EST EDT|50 40|010101010101010101010|9Kv0 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0|94e4","America/Juneau|PST PDT YDT YST AKST AKDT|80 70 80 90 90 80|0101010101010101010102010101345454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454|Ka0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cM0 1cM0 1cL0 1cN0 1fz0 1a10 1fz0 co0 10q0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|33e3","America/Kentucky/Louisville|EST EDT CDT|50 40 50|010101010201010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K70 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1VA0 LA0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|","America/Kentucky/Monticello|CST CDT EST EDT|60 50 50 40|010101010101010101010101010101010101010101010101010101010101012323232323232323232323232323232323232323232323232323232323232|K80 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11A0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|","America/La_Paz|-04|40|0||19e5","America/Lima|-05 -04|50 40|010101010|CVF0 zX0 1O10 zX0 6Gp0 zX0 98p0 zX0|11e6","America/Los_Angeles|PST PDT|80 70|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|Ka0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|15e6","America/Maceio|-03 -02|30 20|0101010101010101010|CxD0 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 dMN0 Lz0 8Q10 WL0 1tB0 5z0 2mN0 On0|93e4","America/Managua|CST EST CDT|60 50 50|010202010102020|86u0 4mn0 9Up0 Dz0 1K10 Dz0 s3F0 1KH0 DB0 9In0 k8p0 19X0 1o30 11y0|22e5","America/Manaus|-04 -03|40 30|010101010|CxE0 Rb0 1tB0 IL0 1Fd0 FX0 dPB0 On0|19e5","America/Martinique|AST ADT|40 30|010|oXg0 19X0|39e4","America/Matamoros|CST CDT|60 50|0101010101010101010101010101010101010101010101010101010101010101010101010|IqU0 1nX0 i6p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 U10 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|45e4","America/Mazatlan|PST MST MDT|80 70 60|01212121212121212121212121212121212121212121212121212121|80 13Vd0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0|44e4","America/Menominee|EST CDT CST|50 50 60|012121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212|85H0 1cM0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|85e2","America/Merida|CST EST CDT|60 50 50|010202020202020202020202020202020202020202020202020202020|t9G0 2hz0 wu30 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0|11e5","America/Metlakatla|PST PDT AKST AKDT|80 70 90 80|0101010101010101010101010101023232302323232323232323232323232|Ka0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1hU10 Rd0 1zb0 Op0 1zb0 Op0 1zb0 uM0 jB0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|14e2","America/Mexico_City|CST CDT|60 50|0101010101010101010101010101010101010101010101010101010|13Vk0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0|20e6","America/Miquelon|AST -03 -02|40 30 20|012121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|p9g0 gQ10 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|61e2","America/Moncton|AST ADT|40 30|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K60 1cL0 1cN0 1fz0 1cN0 1cL0 3Cp0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14n1 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 ReX 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|64e3","America/Monterrey|CST CDT|60 50|010101010101010101010101010101010101010101010101010101010|IqU0 1nX0 i6p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0|41e5","America/Montevideo|-03 -02 -0130 -0230|30 20 1u 2u|0101023010101010101010101010101010101010101010101010|JD0 jX0 4vB0 xz0 3Cp0 mmu 1a10 IMu Db0 4c10 uL0 1Nd0 An0 1SN0 uL0 mp0 28L0 iPB0 un0 1SN0 xz0 1zd0 Lz0 1zd0 Rb0 1zd0 On0 1wp0 Rb0 s8p0 1fB0 1ip0 11z0 1ld0 14n0 1o10 11z0 1o10 11z0 1o10 14n0 1ld0 14n0 1ld0 14n0 1o10 11z0 1o10 11z0 1o10 11z0|17e5","America/Toronto|EST EDT|50 40|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K70 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|65e5","America/New_York|EST EDT|50 40|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K70 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|21e6","America/Nome|BST BDT YST AKST AKDT|b0 a0 90 90 80|0101010101010101010101010101234343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343|Kd0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 cl0 10q0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|38e2","America/Noronha|-02 -01|20 10|01010101010101010|CxC0 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 nsp0 WL0 1tB0 2L0 2pB0 On0|30e2","America/North_Dakota/Beulah|MST MDT CST CDT|70 60 60 50|010101010101010101010101010101010101010101010101010101010101010101010101010101010123232323232323232323232323232323232323232|K90 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Oo0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|","America/North_Dakota/Center|MST MDT CST CDT|70 60 60 50|010101010101010101010101010101010101010101010123232323232323232323232323232323232323232323232323232323232323232323232323232|K90 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14o0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|","America/North_Dakota/New_Salem|MST MDT CST CDT|70 60 60 50|010101010101010101010101010101010101010101010101010101010101010101012323232323232323232323232323232323232323232323232323232|K90 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14o0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|","America/Ojinaga|CST CDT MDT MST|60 50 60 70|01010232323232323232323232323232323232323232323232323201010101010101010|13Vk0 1lb0 14p0 1lb0 14q0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 U10 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1wn0 Rc0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|23e3","America/Paramaribo|-0330 -03|3u 30|01|zSPu|24e4","America/Port-au-Prince|EST EDT|50 40|01010101010101010101010101010101010101010101010101010101010101010101010|wu50 19X0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14q0 1o00 11A0 1o00 11A0 1o00 14o0 1lc0 14o0 1lc0 14o0 1o00 11A0 1o00 11A0 1o00 14o0 1lc0 14o0 1lc0 i6n0 1nX0 11B0 1nX0 d430 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 3iN0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|23e5","America/Rio_Branco|-05 -04|50 40|010101010|CxF0 Rb0 1tB0 IL0 1Fd0 FX0 NBd0 d5X0|31e4","America/Porto_Velho|-04 -03|40 30|0101010|CxE0 Rb0 1tB0 IL0 1Fd0 FX0|37e4","America/Punta_Arenas|-03 -04|30 40|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|yP0 1ip0 11z0 1o10 11z0 1qN0 WL0 1ld0 14n0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 1cL0 1cN0 11z0 1o10 11z0 1qN0 WL0 1fB0 19X0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1ip0 1fz0 1fB0 11z0 1qN0 WL0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1o10 19X0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 46n0 Ap0|","America/Winnipeg|CST CDT|60 50|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K80 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1a00 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1a00 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 14o0 1lc0 14o0 1o00 11A0 1o00 11A0 1o00 14o0 1lc0 14o0 1lc0 14o0 1o00 11A0 1o00 11A0 1o00 14o0 1lc0 14o0 1lc0 14o0 1lc0 14o0 1o00 11A0 1o00 11A0 1o00 14o0 1lc0 14o0 1lc0 14o0 1o00 11A0 1o00 11A0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|66e4","America/Rankin_Inlet|CST CDT EST|60 50 50|01010101010101010101010101010101010101010101010101010101012101010101010101010101010101010101010101010101010101010101010|5E80 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|26e2","America/Recife|-03 -02|30 20|01010101010101010|CxD0 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 nsp0 WL0 1tB0 2L0 2pB0 On0|33e5","America/Regina|CST|60|0||19e4","America/Resolute|CST CDT EST|60 50 50|01010101010101010101010101010101010101010101010101010101012101010101012101010101010101010101010101010101010101010101010|5E80 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|229","America/Santarem|-04 -03|40 30|01010101|CxE0 Rb0 1tB0 IL0 1Fd0 FX0 NBd0|21e4","America/Santiago|-03 -04|30 40|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|yP0 1ip0 11z0 1o10 11z0 1qN0 WL0 1ld0 14n0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 1cL0 1cN0 11z0 1o10 11z0 1qN0 WL0 1fB0 19X0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1ip0 1fz0 1fB0 11z0 1qN0 WL0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1o10 19X0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 46n0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1zb0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 11B0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0|62e5","America/Santo_Domingo|-0430 EST AST|4u 50 40|0101010101212|ksu 1Cou yLu 1RAu wLu 1QMu xzu 1Q0u xXu 1PAu 13jB0 e00|29e5","America/Sao_Paulo|-03 -02|30 20|010101010101010101010101010101010101010101010101010101010101010101010|CxD0 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 1EN0 Lz0 1C10 IL0 1HB0 Db0 1HB0 On0 1zd0 On0 1zd0 Lz0 1zd0 Rb0 1wN0 Wn0 1tB0 Rb0 1tB0 WL0 1tB0 Rb0 1zd0 On0 1HB0 FX0 1C10 Lz0 1Ip0 HX0 1zd0 On0 1HB0 IL0 1wp0 On0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 Rb0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1HB0 FX0|20e6","America/Scoresbysund|-02 -01 +00|20 10 0|0102121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|oXg0 1a00 1cK0 1cL0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|452","America/Sitka|PST PDT YST AKST AKDT|80 70 90 90 80|0101010101010101010101010101234343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343|Ka0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 co0 10q0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|90e2","America/St_Johns|NST NDT NDDT|3u 2u 1u|010101010101010101010101010101010101020101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K5u 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14n1 1lb0 14p0 1nW0 11C0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zcX Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|11e4","America/Swift_Current|MST CST|70 60|01|5E90|16e3","America/Tegucigalpa|CST CDT|60 50|0101010|Gcu0 WL0 1qN0 WL0 GRd0 AL0|11e5","America/Thule|AST ADT|40 30|010101010101010101010101010101010101010101010101010101010101010101010101010101010|PHG0 1cL0 1cN0 1cL0 1fB0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|656","America/Vancouver|PST PDT|80 70|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|Ka0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|23e5","America/Whitehorse|PST PDT MST|80 70 70|01010101010101010101010101010101010101010101010101010101010101010101010101010101012|p7K0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1z90|23e3","America/Yakutat|YST YDT AKST AKDT|90 80 90 80|0101010101010101010101010101023232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232|Kb0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 cn0 10q0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|642","Antarctica/Casey|+08 +11|-80 -b0|010101010101|1ARS0 T90 40P0 KL0 blz0 3m10 1o30 14k0 1kr0 12l0 1o01|10","Antarctica/Davis|+07 +05|-70 -50|01010|1ART0 VB0 3Wn0 KN0|70","Pacific/Port_Moresby|+10|-a0|0||25e4","Antarctica/Macquarie|AEDT AEST|-b0 -a0|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|qg0 1wo0 U00 1wo0 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 11A0 1qM0 WM0 1qM0 Oo0 1zc0 Oo0 1zc0 Oo0 1wo0 WM0 1tA0 WM0 1tA0 U00 1tA0 U00 1tA0 11A0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 11A0 1o00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1cM0 1a00 1io0 1cM0 1cM0 1cM0 1cM0 3Co0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0|1","Antarctica/Mawson|+06 +05|-60 -50|01|1ARU0|60","Pacific/Auckland|NZST NZDT|-c0 -d0|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|bKC0 IM0 1C00 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1qM0 14o0 1lc0 14o0 1lc0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1io0 17c0 1lc0 14o0 1lc0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1lc0 14o0 1lc0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1io0 17c0 1io0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00|14e5","Antarctica/Palmer|-03 -02 -04|30 20 40|01020202020202020202020202020202020202020202020202020202020202020202020|9Rf0 Db0 jsN0 14N0 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 1cL0 1cN0 11z0 1o10 11z0 1qN0 WL0 1fB0 19X0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1ip0 1fz0 1fB0 11z0 1qN0 WL0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1o10 19X0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 46n0 Ap0|40","Antarctica/Rothera|-00 -03|0 30|01|gOo0|130","Asia/Riyadh|+03|-30|0||57e5","Antarctica/Troll|-00 +00 +02|0 0 -20|012121212121212121212121212121212121212121212121212121|1puo0 hd0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|40","Asia/Urumqi|+06|-60|0||32e5","Europe/Berlin|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|oXd0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|41e5","Asia/Almaty|+06 +07 +05|-60 -70 -50|0101010101010101010102010101010101010101010101010|rn60 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0|15e5","Asia/Amman|EET EEST +03|-20 -30 -30|010101010101010101010101010101010101010101010101010101010101010101010101010101010101012|8kK0 KL0 1oN0 11b0 1oN0 11b0 1pd0 1dz0 1cp0 11b0 1op0 11b0 fO10 1db0 1e10 1cL0 1cN0 1cL0 1cN0 1fz0 1pd0 10n0 1ld0 14n0 1hB0 15b0 1ip0 19X0 1cN0 1cL0 1cN0 17b0 1ld0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1So0 y00 1fc0 1dc0 1co0 1dc0 1cM0 1cM0 1cM0 1o00 11A0 1lc0 17c0 1cM0 1cM0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 4bX0 Dd0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 LA0 1C00|25e5","Asia/Anadyr|+13 +14 +12 +11|-d0 -e0 -c0 -b0|010202020202020202023202020202020202020202020202020202020232|rmX0 1db0 2q10 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 2sp0 WM0|13e3","Asia/Aqtau|+05 +06 +04|-50 -60 -40|0101010101010101010201010120202020202020202020|sAj0 2pX0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0|15e4","Asia/Aqtobe|+05 +06 +04|-50 -60 -40|01010101010101010102010101010101010101010101010|rn70 3Db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0|27e4","Asia/Ashgabat|+05 +06 +04|-50 -60 -40|01010101010101010101020|rn70 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0|41e4","Asia/Atyrau|+05 +06 +04|-50 -60 -40|010101010101010101020101010101010102020202020|sAj0 2pX0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 2sp0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0|","Asia/Baghdad|+03 +04|-30 -40|01010101010101010101010101010101010101010101010101010|u190 11b0 1cp0 1dz0 1dd0 1db0 1cN0 1cp0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1de0 1dc0 1dc0 1dc0 1cM0 1dc0 1cM0 1dc0 1cM0 1dc0 1dc0 1dc0 1cM0 1dc0 1cM0 1dc0 1cM0 1dc0 1dc0 1dc0 1cM0 1dc0 1cM0 1dc0 1cM0 1dc0 1dc0 1dc0 1cM0 1dc0 1cM0 1dc0 1cM0 1dc0|66e5","Asia/Qatar|+04 +03|-40 -30|01|5QI0|96e4","Asia/Baku|+04 +05 +03|-40 -50 -30|010101010101010101010201010101010101010101010101010101010101010|rn80 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 1cM0 9Je0 1o00 11z0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00|27e5","Asia/Bangkok|+07|-70|0||15e6","Asia/Barnaul|+07 +08 +06|-70 -80 -60|01010101010101010101020101010102020202020202020202020202020202020|rn50 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 p90 LE0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 3rd0|","Asia/Beirut|EET EEST|-20 -30|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|61a0 En0 1oN0 11b0 1oN0 11b0 1oN0 11b0 1pd0 11b0 1oN0 11b0 1op0 11b0 dA10 17b0 1iN0 17b0 1iN0 17b0 1iN0 17b0 1vB0 SL0 1mp0 13z0 1iN0 17b0 1iN0 17b0 1jd0 12n0 1a10 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0|22e5","Asia/Bishkek|+06 +07 +05|-60 -70 -50|0101010101010101010102020202020202020202020202020|rn60 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2e00 1tX0 17b0 1ip0 17b0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1cPu 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0|87e4","Asia/Brunei|+08|-80|0||42e4","Asia/Kolkata|IST|-5u|0||15e6","Asia/Chita|+09 +10 +08|-90 -a0 -80|0101010101010101010102010101010101010101010101010101010101010120|rn30 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 3re0|33e4","Asia/Choibalsan|+07 +08 +10 +09|-70 -80 -a0 -90|012323232323232323232323232323232323232323232313131|jsF0 cKn0 1da0 1dd0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 6hD0 11z0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 3Db0 h1f0 1cJ0 1cP0 1cJ0|38e3","Asia/Shanghai|CST CDT|-80 -90|0101010101010|DKG0 Rb0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0|23e6","Asia/Colombo|+0530 +0630 +06|-5u -6u -60|0120|14giu 11zu n3cu|22e5","Asia/Dhaka|+06 +07|-60 -70|010|1A5R0 1i00|16e6","Asia/Damascus|EET EEST +03|-20 -30 -30|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101012|M00 11b0 1oN0 11b0 1pd0 11b0 1oN0 11b0 1oN0 11b0 1oN0 11b0 1pd0 11b0 1oN0 Nb0 1AN0 Nb0 bcp0 19X0 1gp0 19X0 3ld0 1xX0 Vd0 1Bz0 Sp0 1vX0 10p0 1dz0 1cN0 1cL0 1db0 1db0 1g10 1an0 1ap0 1db0 1fd0 1db0 1cN0 1db0 1dd0 1db0 1cp0 1dz0 1c10 1dX0 1cN0 1db0 1dd0 1db0 1cN0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1db0 1cN0 1db0 1cN0 19z0 1fB0 1qL0 11B0 1on0 Wp0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0|26e5","Asia/Dili|+09 +08|-90 -80|010|fpr0 Xld0|19e4","Asia/Dubai|+04|-40|0||39e5","Asia/Dushanbe|+06 +07 +05|-60 -70 -50|0101010101010101010102|rn60 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2hB0|76e4","Asia/Famagusta|EET EEST +03|-20 -30 -30|0101010101010101010101010101010101010101010101010101010101010101010101010101010101012010101010101010101010101010|cPa0 1cL0 1qp0 Xz0 19B0 19X0 1fB0 1db0 1cp0 1cL0 1fB0 19X0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1o30 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 15U0 2Ks0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|","Asia/Gaza|IST IDT EET EEST|-20 -30 -20 -30|010101010101010101010101010101023232323232323232323232323232323232323232323232323232323232323232323232|aXa0 Db0 1fB0 Rb0 bXB0 gM0 8Q00 IM0 1wo0 TX0 1HB0 IL0 1s10 10n0 1o10 WL0 1zd0 On0 1ld0 11z0 1o10 14n0 1o10 14n0 1nd0 12n0 1nd0 Xz0 1q10 12n0 M10 C00 17c0 1io0 17c0 1io0 17c0 1o00 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 17c0 1io0 18N0 1bz0 19z0 1gp0 1610 1iL0 11z0 1o10 14o0 1lA1 SKX 1xd1 MKX 1AN0 1a00 1fA0 1cL0 1cN0 1nX0 1210 1nA0 1210 1qL0 WN0 1qL0 WN0 1qL0 11c0 1on0 11B0 1o00 11A0 1qo0 XA0 1qp0 1cN0 1cL0 17d0 1in0 14p0 1lb0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0|18e5","Asia/Hebron|IST IDT EET EEST|-20 -30 -20 -30|01010101010101010101010101010102323232323232323232323232323232323232323232323232323232323232323232323232|aXa0 Db0 1fB0 Rb0 bXB0 gM0 8Q00 IM0 1wo0 TX0 1HB0 IL0 1s10 10n0 1o10 WL0 1zd0 On0 1ld0 11z0 1o10 14n0 1o10 14n0 1nd0 12n0 1nd0 Xz0 1q10 12n0 M10 C00 17c0 1io0 17c0 1io0 17c0 1o00 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 17c0 1io0 18N0 1bz0 19z0 1gp0 1610 1iL0 12L0 1mN0 14o0 1lc0 Tb0 1xd1 MKX bB0 cn0 1cN0 1a00 1fA0 1cL0 1cN0 1nX0 1210 1nA0 1210 1qL0 WN0 1qL0 WN0 1qL0 11c0 1on0 11B0 1o00 11A0 1qo0 XA0 1qp0 1cN0 1cL0 17d0 1in0 14p0 1lb0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0|25e4","Asia/Ho_Chi_Minh|+08 +07|-80 -70|01|dfs0|90e5","Asia/Hong_Kong|HKT HKST|-80 -90|01010101010101010|H7u 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 s10 1Vz0 1cN0 1cL0 1cN0 1cL0 6fd0 14n0|73e5","Asia/Hovd|+06 +07 +08|-60 -70 -80|01212121212121212121212121212121212121212121212121|jsG0 cKn0 1db0 1dd0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 6hD0 11z0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 kEp0 1cJ0 1cP0 1cJ0|81e3","Asia/Irkutsk|+08 +09 +07|-80 -90 -70|010101010101010101010201010101010101010101010101010101010101010|rn40 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|60e4","Europe/Istanbul|EET EEST +03 +04|-20 -30 -30 -40|01010101010123201010101010101010101010101010101010101010101010101010101010101012|8jz0 11A0 WN0 1qL0 TB0 1tX0 U10 1tz0 11B0 1in0 17d0 z90 cne0 pb0 2Cp0 1800 14o0 1dc0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1a00 1fA0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WO0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 Xc0 1qo0 WM0 1qM0 11A0 1o00 1200 1nA0 11A0 1tA0 U00 15w0|13e6","Asia/Jakarta|WIB|-70|0||31e6","Asia/Jayapura|WIT|-90|0||26e4","Asia/Jerusalem|IST IDT|-20 -30|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|aXa0 Db0 1fB0 Rb0 bXB0 gM0 8Q00 IM0 1wo0 TX0 1HB0 IL0 1s10 10n0 1o10 WL0 1zd0 On0 1ld0 11z0 1o10 14n0 1o10 14n0 1nd0 12n0 1nd0 Xz0 1q10 12n0 1hB0 1dX0 1ep0 1aL0 1eN0 17X0 1nf0 11z0 1tB0 19W0 1e10 17b0 1ep0 1gL0 18N0 1fz0 1eN0 17b0 1gq0 1gn0 19d0 1dz0 1c10 17X0 1hB0 1gn0 19d0 1dz0 1c10 17X0 1kp0 1dz0 1c10 1aL0 1eN0 1oL0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0|81e4","Asia/Kabul|+0430|-4u|0||46e5","Asia/Kamchatka|+12 +13 +11|-c0 -d0 -b0|0101010101010101010102010101010101010101010101010101010101020|rn00 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 2sp0 WM0|18e4","Asia/Karachi|+05 PKT PKST|-50 -50 -60|01212121|2Xv0 1fy00 1cL0 dK10 11b0 1610 1jX0|24e6","Asia/Kathmandu|+0530 +0545|-5u -5J|01|CVuu|12e5","Asia/Khandyga|+09 +10 +08 +11|-90 -a0 -80 -b0|01010101010101010101020101010101010101010101010131313131313131310|rn30 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 qK0 yN0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 17V0 7zD0|66e2","Asia/Krasnoyarsk|+07 +08 +06|-70 -80 -60|010101010101010101010201010101010101010101010101010101010101010|rn50 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|10e5","Asia/Kuala_Lumpur|+0730 +08|-7u -80|01|td40|71e5","Asia/Macau|CST CDT|-80 -90|01010101010101010|H7u 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 s10 1Vz0 1cN0 1cL0 1cN0 1cL0 6fd0 14n0|57e4","Asia/Magadan|+11 +12 +10|-b0 -c0 -a0|0101010101010101010102010101010101010101010101010101010101010120|rn10 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 3Cq0|95e3","Asia/Makassar|WITA|-80|0||15e5","Asia/Manila|PST PDT|-80 -90|010|k0E0 1db0|24e6","Asia/Nicosia|EET EEST|-20 -30|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|cPa0 1cL0 1qp0 Xz0 19B0 19X0 1fB0 1db0 1cp0 1cL0 1fB0 19X0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1o30 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|32e4","Asia/Novokuznetsk|+07 +08 +06|-70 -80 -60|0101010101010101010102010101010101010101010101010101010101020|rn50 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 2sp0 WM0|55e4","Asia/Novosibirsk|+07 +08 +06|-70 -80 -60|01010101010101010101020101020202020202020202020202020202020202020|rn50 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 ml0 Os0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 4eN0|15e5","Asia/Omsk|+06 +07 +05|-60 -70 -50|010101010101010101010201010101010101010101010101010101010101010|rn60 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|12e5","Asia/Oral|+05 +06 +04|-50 -60 -40|010101010101010202020202020202020202020202020|rn70 3Db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 2pB0 1cM0 1fA0 1cM0 1cM0 IM0 1EM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0|27e4","Asia/Pontianak|WITA WIB|-80 -70|01|HNs0|23e4","Asia/Pyongyang|KST KST|-90 -8u|010|1P4D0 6BA0|29e5","Asia/Qostanay|+05 +06 +04|-50 -60 -40|0101010101010101010201010101010101010101010101|rn70 3Db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0|","Asia/Qyzylorda|+05 +06|-50 -60|010101010101010101010101010101010101010101010|rn70 3Db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 3ao0 1EM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 zQl0|73e4","Asia/Rangoon|+0630|-6u|0||48e5","Asia/Sakhalin|+11 +12 +10|-b0 -c0 -a0|010101010101010101010201010101010202020202020202020202020202020|rn10 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 2pB0 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 3rd0|58e4","Asia/Samarkand|+05 +06|-50 -60|010101010101010101010|rn70 3Db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0|36e4","Asia/Seoul|KST KDT|-90 -a0|01010|Gf50 11A0 1o00 11A0|23e6","Asia/Srednekolymsk|+11 +12 +10|-b0 -c0 -a0|010101010101010101010201010101010101010101010101010101010101010|rn10 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|35e2","Asia/Taipei|CST CDT|-80 -90|0101010|akg0 1db0 1cN0 1db0 97B0 AL0|74e5","Asia/Tashkent|+06 +07 +05|-60 -70 -50|0101010101010101010102|rn60 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0|23e5","Asia/Tbilisi|+04 +05 +03|-40 -50 -30|01010101010101010101020202010101010101010101020|rn80 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 1cK0 1cL0 1cN0 1cL0 1cN0 2pz0 1cL0 1fB0 3Nz0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 An0 Os0 WM0|11e5","Asia/Tehran|+0330 +0430 +04 +05|-3u -4u -40 -50|0123201010101010101010101010101010101010101010101010101010101010101010|hyHu 1pc0 120u Rc0 XA0 Wou JX0 1dB0 1en0 pNB0 UL0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 64p0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0|14e6","Asia/Thimphu|+0530 +06|-5u -60|01|HcGu|79e3","Asia/Tokyo|JST|-90|0||38e6","Asia/Tomsk|+07 +08 +06|-70 -80 -60|01010101010101010101020101010101010101010101020202020202020202020|rn50 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 co0 1bB0 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 3Qp0|10e5","Asia/Ulaanbaatar|+07 +08 +09|-70 -80 -90|01212121212121212121212121212121212121212121212121|jsF0 cKn0 1db0 1dd0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 6hD0 11z0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 kEp0 1cJ0 1cP0 1cJ0|12e5","Asia/Ust-Nera|+09 +12 +11 +10|-90 -c0 -b0 -a0|0121212121212121212123212121212121212121212121212121212121212123|rn30 1d90 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 17V0 7zD0|65e2","Asia/Vladivostok|+10 +11 +09|-a0 -b0 -90|010101010101010101010201010101010101010101010101010101010101010|rn20 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|60e4","Asia/Yakutsk|+09 +10 +08|-90 -a0 -80|010101010101010101010201010101010101010101010101010101010101010|rn30 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|28e4","Asia/Yekaterinburg|+05 +06 +04|-50 -60 -40|010101010101010101010201010101010101010101010101010101010101010|rn70 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|14e5","Asia/Yerevan|+04 +05 +03|-40 -50 -30|01010101010101010101020202020101010101010101010101010101010|rn80 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 4RX0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|13e5","Atlantic/Azores|-01 +00 WET|10 0 0|0101010101010101010101010101010121010101010101010101010101010101010101010101010101010101010101010101010101010|hAN0 1cM0 1fA0 1cM0 1cM0 1cN0 1cL0 1cN0 1cM0 1cM0 1cM0 1cM0 1cN0 1cL0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cL0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|25e4","Atlantic/Bermuda|AST ADT|40 30|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|avi0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|65e3","Atlantic/Canary|WET WEST|0 -10|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|oXc0 1a10 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|54e4","Atlantic/Cape_Verde|-02 -01|20 10|01|elE0|50e4","Atlantic/Faroe|WET WEST|0 -10|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|rm10 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|49e3","Atlantic/Madeira|WET WEST|0 -10|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|hAM0 1cM0 1fA0 1cM0 1cM0 1cN0 1cL0 1cN0 1cM0 1cM0 1cM0 1cM0 1cN0 1cL0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|27e4","Atlantic/South_Georgia|-02|20|0||30","Atlantic/Stanley|-04 -03 -02|40 30 20|01212101010101010101010101010101010101010101010101010101|wrg0 WL0 1qL0 U10 1tz0 2mN0 WN0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1tz0 U10 1tz0 WN0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1tz0 WN0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qN0 U10 1wn0 Rd0 1wn0 U10 1tz0 U10 1tz0 U10 1tz0 U10 1tz0 U10 1wn0 U10 1tz0 U10 1tz0 U10|21e2","Australia/Sydney|AEST AEDT|-a0 -b0|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|4r40 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 14o0 1o00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 U00 1qM0 WM0 1tA0 WM0 1tA0 U00 1tA0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 11A0 1o00 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 WM0 1qM0 14o0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0|40e5","Australia/Adelaide|ACST ACDT|-9u -au|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|4r4u LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 U00 1qM0 WM0 1tA0 WM0 1tA0 U00 1tA0 U00 1tA0 Oo0 1zc0 WM0 1qM0 Rc0 1zc0 U00 1tA0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 WM0 1qM0 14o0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0|11e5","Australia/Brisbane|AEST AEDT|-a0 -b0|010101010|4r40 LA0 H1A0 Oo0 1zc0 Oo0 1zc0 Oo0|20e5","Australia/Broken_Hill|ACST ACDT|-9u -au|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|4r4u LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 14o0 1o00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 U00 1qM0 WM0 1tA0 WM0 1tA0 U00 1tA0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 WM0 1qM0 14o0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0|18e3","Australia/Hobart|AEDT AEST|-b0 -a0|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|qg0 1wo0 U00 1wo0 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 11A0 1qM0 WM0 1qM0 Oo0 1zc0 Oo0 1zc0 Oo0 1wo0 WM0 1tA0 WM0 1tA0 U00 1tA0 U00 1tA0 11A0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 11A0 1o00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1cM0 1a00 1io0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0|21e4","Australia/Darwin|ACST|-9u|0||12e4","Australia/Eucla|+0845 +0945|-8J -9J|0101010101010|bHRf Oo0 l5A0 Oo0 iJA0 G00 zU00 IM0 1qM0 11A0 1o00 11A0|368","Australia/Lord_Howe|AEST +1030 +1130 +11|-a0 -au -bu -b0|01212121213131313131313131313131313131313131313131313131313131313131313131313131313131313131313131313|raC0 1zdu Rb0 1zd0 On0 1zd0 On0 1zd0 On0 1zd0 TXu 1qMu WLu 1tAu WLu 1tAu TXu 1tAu Onu 1zcu Onu 1zcu Onu 1zcu Rbu 1zcu Onu 1zcu Onu 1zcu 11zu 1o0u 11zu 1o0u 11zu 1o0u 11zu 1qMu WLu 11Au 1nXu 1qMu 11zu 1o0u 11zu 1o0u 11zu 1qMu WLu 1qMu 11zu 1o0u WLu 1qMu 14nu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1fzu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu|347","Australia/Lindeman|AEST AEDT|-a0 -b0|0101010101010|4r40 LA0 H1A0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0|10","Australia/Melbourne|AEST AEDT|-a0 -b0|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|4r40 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 U00 1qM0 WM0 1qM0 11A0 1tA0 U00 1tA0 U00 1tA0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 11A0 1o00 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 WM0 1qM0 14o0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0|39e5","Australia/Perth|AWST AWDT|-80 -90|0101010101010|bHS0 Oo0 l5A0 Oo0 iJA0 G00 zU00 IM0 1qM0 11A0 1o00 11A0|18e5","Europe/Brussels|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|hDB0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|21e5","Pacific/Easter|-06 -07 -05|60 70 50|010101010101010101010101020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202|yP0 1ip0 11z0 1o10 11z0 1qN0 WL0 1ld0 14n0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 2pA0 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 1cL0 1cN0 11z0 1o10 11z0 1qN0 WL0 1fB0 19X0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1ip0 1fz0 1fB0 11z0 1qN0 WL0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1o10 19X0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 46n0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1zb0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 11B0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0|30e2","EET|EET EEST|-20 -30|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|hDB0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|","Europe/Dublin|IST GMT|-10 0|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|4re0 U00 1tA0 U00 1tA0 U00 1tA0 U00 1tA0 WM0 1qM0 WM0 1qM0 WM0 1tA0 U00 1tA0 U00 1tA0 11z0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 14o0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|12e5","Etc/GMT-1|+01|-10|0||","Pacific/Guadalcanal|+11|-b0|0||11e4","Pacific/Tarawa|+12|-c0|0||29e3","Etc/GMT-13|+13|-d0|0||","Etc/GMT-14|+14|-e0|0||","Etc/GMT-2|+02|-20|0||","Indian/Maldives|+05|-50|0||35e4","Pacific/Palau|+09|-90|0||21e3","Etc/GMT+1|-01|10|0||","Pacific/Tahiti|-10|a0|0||18e4","Pacific/Niue|-11|b0|0||12e2","Etc/GMT+12|-12|c0|0||","Etc/GMT+5|-05|50|0||","Etc/GMT+6|-06|60|0||","Etc/GMT+7|-07|70|0||","Etc/GMT+8|-08|80|0||","Pacific/Gambier|-09|90|0||125","Etc/UTC|UTC|0|0||","Europe/Andorra|CET CEST|-10 -20|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|B7d0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|79e3","Europe/Astrakhan|+04 +05 +03|-40 -50 -30|0101010101010101020202020202020202020202020202020202020202020|rn80 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 2pB0 1cM0 1fA0 1cM0 3Co0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 3rd0|10e5","Europe/Athens|EET EEST|-20 -30|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|cOK0 1vc0 SO0 1cM0 1a00 1ao0 1fc0 1a10 1fG0 1cg0 1dX0 1bX0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|35e5","Europe/London|BST GMT|-10 0|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|4re0 U00 1tA0 U00 1tA0 U00 1tA0 U00 1tA0 WM0 1qM0 WM0 1qM0 WM0 1tA0 U00 1tA0 U00 1tA0 11z0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 14o0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|10e6","Europe/Belgrade|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|wdd0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|12e5","Europe/Prague|CET CEST|-10 -20|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|muN0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|13e5","Europe/Bucharest|EET EEST|-20 -30|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|mRa0 On0 1fA0 1a10 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cK0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cL0 1cN0 1cL0 1fB0 1nX0 11E0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|19e5","Europe/Budapest|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|oXb0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cO0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|17e5","Europe/Zurich|CET CEST|-10 -20|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|rm10 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|38e4","Europe/Chisinau|MSK MSD EEST EET|-30 -40 -30 -20|010101010101010101012323232323232323232323232323232323232323232323232323232323232323232323232323232323|rn90 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 gL0 WO0 1cM0 1cM0 1cK0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1nX0 11D0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|67e4","Europe/Gibraltar|CET CEST|-10 -20|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|tLB0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|30e3","Europe/Helsinki|EET EEST|-20 -30|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|rm00 1cM0 1cM0 1cM0 1cN0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|12e5","Europe/Kaliningrad|MSK MSD EEST EET +03|-30 -40 -30 -20 -30|010101010101010102323232323232323232323232323232323232323232343|rn90 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|44e4","Europe/Kiev|MSK MSD EEST EET|-30 -40 -30 -20|0101010101010101010123232323232323232323232323232323232323232323232323232323232323232323232323232323|rn90 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 Db0 3220 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o10 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|34e5","Europe/Kirov|+04 +05 MSD MSK MSK|-40 -50 -40 -30 -40|01010101010101010232302323232323232323232323232323232323232343|rn80 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1fA0 1cM0 2pz0 1cN0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|48e4","Europe/Lisbon|CET WET WEST CEST|-10 0 -10 -20|01212121212121212121212121212121203030302121212121212121212121212121212121212121212121212121212121212121212121|go00 1cM0 1cM0 1fA0 1cM0 1cM0 1cN0 1cL0 1cN0 1cM0 1cM0 1cM0 1cM0 1cN0 1cL0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|27e5","Europe/Madrid|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|apy0 1a10 1fz0 1a10 19X0 1cN0 1fz0 1a10 1fC0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|62e5","Europe/Malta|CET CEST|-10 -20|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|XX0 LA0 1zc0 Oo0 1C00 Oo0 1co0 1cM0 1lA0 Xc0 1qq0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1iN0 19z0 1fB0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|42e4","Europe/Minsk|MSK MSD EEST EET +03|-30 -40 -30 -20 -30|010101010101010101023232323232323232323232323232323232323234|rn90 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 3Fc0 1cN0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0|19e5","Europe/Paris|CET CEST|-10 -20|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|fbc0 1cL0 1fC0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|11e6","Europe/Moscow|MSK MSD EEST EET MSK|-30 -40 -30 -20 -40|0101010101010101010102301010101010101010101010101010101010101040|rn90 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|16e6","Europe/Riga|MSK MSD EEST EET|-30 -40 -30 -20|010101010101010102323232323232323232323232323232323232323232323232323232323232323232323232323232323|rn90 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 1o00 11A0 1o00 11A0 1qM0 3oo0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|64e4","Europe/Rome|CET CEST|-10 -20|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|XX0 LA0 1zc0 Oo0 1C00 Oo0 1C00 LA0 1zc0 Oo0 1C00 LA0 1C00 LA0 1zc0 Oo0 1C00 Oo0 1zc0 Oo0 1fC0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|39e5","Europe/Samara|+04 +05 +03|-40 -50 -30|01010101010101010202010101010101010101010101010101010101020|rn80 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 2pB0 1cM0 1fA0 2y10 14m0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 2sp0 WM0|12e5","Europe/Saratov|+04 +05 +03|-40 -50 -30|0101010101010102020202020202020202020202020202020202020202020|rn80 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 2pB0 1cM0 1cM0 1cM0 1fA0 1cM0 3Co0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 5810|","Europe/Simferopol|MSK MSD EET EEST MSK|-30 -40 -20 -30 -40|0101010101010101010232323101010323232323232323232323232323232323240|rn90 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1Q00 4eN0 1cM0 1cM0 1cM0 1cM0 dV0 WO0 1cM0 1cM0 1fy0 1o30 11B0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11z0 1nW0|33e4","Europe/Sofia|EET EEST|-20 -30|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|muJ0 1dd0 1fb0 1ap0 1fb0 1a20 1fy0 1a30 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cK0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1nX0 11E0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|12e5","Europe/Tallinn|MSK MSD EEST EET|-30 -40 -30 -20|0101010101010101023232323232323232323232323232323232323232323232323232323232323232323232323232323|rn90 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o10 11A0 1qM0 5QM0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|41e4","Europe/Tirane|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|axz0 10n0 1op0 11z0 1pd0 11z0 1qN0 WL0 1qp0 Xb0 1qp0 Xb0 1qp0 11z0 1lB0 11z0 1qN0 11z0 1iN0 16n0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|42e4","Europe/Ulyanovsk|+04 +05 +03 +02|-40 -50 -30 -20|010101010101010102023202020202020202020202020202020202020202020|rn80 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 2pB0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 3rd0|13e5","Europe/Vienna|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|oXb0 19X0 1cP0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|18e5","Europe/Vilnius|MSK MSD EEST EET CEST CET|-30 -40 -30 -20 -20 -10|01010101010101010232323232323232323454323232323232323232323232323232323232323232323232323232323|rn90 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11B0 1o00 11A0 1qM0 8io0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|54e4","Europe/Volgograd|+04 +05 MSD MSK MSK|-40 -50 -40 -30 -40|0101010101010102323230232323232323232323232323232323232323234303|rn80 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1cM0 1cM0 1fA0 1cM0 2pz0 1cN0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 9Jd0 5gn0|10e5","Europe/Warsaw|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|hDA0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|17e5","Pacific/Honolulu|HST|a0|0||37e4","Indian/Chagos|+05 +06|-50 -60|01|13ij0|30e2","Indian/Mauritius|+04 +05|-40 -50|01010|v5U0 14L0 12kr0 11z0|15e4","Pacific/Kwajalein|-12 +12|c0 -c0|01|Vxo0|14e3","MET|MET MEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|hDB0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|","Pacific/Chatham|+1245 +1345|-cJ -dJ|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|bKC0 IM0 1C00 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1qM0 14o0 1lc0 14o0 1lc0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1io0 17c0 1lc0 14o0 1lc0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1lc0 14o0 1lc0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1io0 17c0 1io0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00|600","Pacific/Apia|-11 -10 +14 +13|b0 a0 -e0 -d0|010123232323232323232323|1Dbn0 1ff0 1a00 CI0 AQ0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0|37e3","Pacific/Bougainville|+10 +11|-a0 -b0|01|1NwE0|18e4","Pacific/Efate|+11 +12|-b0 -c0|01010101010101010101010|9EA0 Dc0 n610 1cL0 1cN0 1cL0 1fB0 19X0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 Lz0 1Nd0 An0|66e3","Pacific/Enderbury|-12 -11 +13|c0 b0 -d0|012|nIc0 B7X0|1","Pacific/Fakaofo|-11 +13|b0 -d0|01|1Gfn0|483","Pacific/Fiji|+12 +13|-c0 -d0|01010101010101010101010101010|1ace0 LA0 1EM0 IM0 nJc0 LA0 1o00 Rc0 1wo0 Ao0 1Nc0 Ao0 1Q00 xz0 1SN0 uM0 1SM0 uM0 1VA0 s00 1VA0 s00 1VA0 s00 20o0 pc0 2hc0 bc0|88e4","Pacific/Galapagos|-05 -06|50 60|0101|CVF0 gNd0 rz0|25e3","Pacific/Guam|GST GDT ChST|-a0 -b0 -a0|010101010102|JQ0 Rb0 1wp0 Rb0 5xd0 rX0 5sN0 zb1 1C0X On0 ULb0|17e4","Pacific/Kiritimati|-1040 -10 +14|aE a0 -e0|012|nIaE B7Xk|51e2","Pacific/Kosrae|+12 +11|-c0 -b0|01|1aAA0|66e2","Pacific/Marquesas|-0930|9u|0||86e2","Pacific/Pago_Pago|SST|b0|0||37e2","Pacific/Nauru|+1130 +12|-bu -c0|01|maCu|10e3","Pacific/Norfolk|+1130 +1230 +11 +12|-bu -cu -b0 -c0|010232323232323232323232323|bHOu Oo0 1COo0 9Jcu 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0|25e4","Pacific/Noumea|+11 +12|-b0 -c0|0101010|jhp0 xX0 1PB0 yn0 HeP0 Ao0|98e3","Pacific/Pitcairn|-0830 -08|8u 80|01|18Vku|56","Pacific/Rarotonga|-1030 -0930 -10|au 9u a0|012121212121212121212121212|lyWu IL0 1zcu Onu 1zcu Onu 1zcu Rbu 1zcu Onu 1zcu Onu 1zcu Onu 1zcu Onu 1zcu Onu 1zcu Rbu 1zcu Onu 1zcu Onu 1zcu Onu|13e3","Pacific/Tongatapu|+13 +14|-d0 -e0|010101010|1csd0 15A0 1wo0 xz0 1Q10 xz0 zWN0 s00|75e3","WET|WET WEST|0 -10|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|hDB0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|"],links:["Africa/Abidjan|Africa/Accra","Africa/Abidjan|Africa/Bamako","Africa/Abidjan|Africa/Banjul","Africa/Abidjan|Africa/Conakry","Africa/Abidjan|Africa/Dakar","Africa/Abidjan|Africa/Freetown","Africa/Abidjan|Africa/Lome","Africa/Abidjan|Africa/Nouakchott","Africa/Abidjan|Africa/Ouagadougou","Africa/Abidjan|Africa/Timbuktu","Africa/Abidjan|Atlantic/Reykjavik","Africa/Abidjan|Atlantic/St_Helena","Africa/Abidjan|Etc/GMT","Africa/Abidjan|Etc/GMT+0","Africa/Abidjan|Etc/GMT-0","Africa/Abidjan|Etc/GMT0","Africa/Abidjan|Etc/Greenwich","Africa/Abidjan|GMT","Africa/Abidjan|GMT+0","Africa/Abidjan|GMT-0","Africa/Abidjan|GMT0","Africa/Abidjan|Greenwich","Africa/Abidjan|Iceland","Africa/Cairo|Egypt","Africa/Johannesburg|Africa/Maseru","Africa/Johannesburg|Africa/Mbabane","Africa/Lagos|Africa/Bangui","Africa/Lagos|Africa/Brazzaville","Africa/Lagos|Africa/Douala","Africa/Lagos|Africa/Kinshasa","Africa/Lagos|Africa/Libreville","Africa/Lagos|Africa/Luanda","Africa/Lagos|Africa/Malabo","Africa/Lagos|Africa/Niamey","Africa/Lagos|Africa/Porto-Novo","Africa/Maputo|Africa/Blantyre","Africa/Maputo|Africa/Bujumbura","Africa/Maputo|Africa/Gaborone","Africa/Maputo|Africa/Harare","Africa/Maputo|Africa/Kigali","Africa/Maputo|Africa/Lubumbashi","Africa/Maputo|Africa/Lusaka","Africa/Nairobi|Africa/Addis_Ababa","Africa/Nairobi|Africa/Asmara","Africa/Nairobi|Africa/Asmera","Africa/Nairobi|Africa/Dar_es_Salaam","Africa/Nairobi|Africa/Djibouti","Africa/Nairobi|Africa/Kampala","Africa/Nairobi|Africa/Mogadishu","Africa/Nairobi|Indian/Antananarivo","Africa/Nairobi|Indian/Comoro","Africa/Nairobi|Indian/Mayotte","Africa/Tripoli|Libya","America/Adak|America/Atka","America/Adak|US/Aleutian","America/Anchorage|US/Alaska","America/Argentina/Buenos_Aires|America/Buenos_Aires","America/Argentina/Catamarca|America/Argentina/ComodRivadavia","America/Argentina/Catamarca|America/Catamarca","America/Argentina/Cordoba|America/Cordoba","America/Argentina/Cordoba|America/Rosario","America/Argentina/Jujuy|America/Jujuy","America/Argentina/Mendoza|America/Mendoza","America/Cayenne|Etc/GMT+3","America/Chicago|CST6CDT","America/Chicago|US/Central","America/Denver|America/Shiprock","America/Denver|MST7MDT","America/Denver|Navajo","America/Denver|US/Mountain","America/Detroit|US/Michigan","America/Edmonton|America/Yellowknife","America/Edmonton|Canada/Mountain","America/Fort_Wayne|America/Indiana/Indianapolis","America/Fort_Wayne|America/Indianapolis","America/Fort_Wayne|US/East-Indiana","America/Godthab|America/Nuuk","America/Halifax|Canada/Atlantic","America/Havana|Cuba","America/Indiana/Knox|America/Knox_IN","America/Indiana/Knox|US/Indiana-Starke","America/Iqaluit|America/Pangnirtung","America/Jamaica|Jamaica","America/Kentucky/Louisville|America/Louisville","America/La_Paz|Etc/GMT+4","America/Los_Angeles|PST8PDT","America/Los_Angeles|US/Pacific","America/Manaus|Brazil/West","America/Mazatlan|Mexico/BajaSur","America/Mexico_City|Mexico/General","America/New_York|EST5EDT","America/New_York|US/Eastern","America/Noronha|Brazil/DeNoronha","America/Panama|America/Atikokan","America/Panama|America/Cayman","America/Panama|America/Coral_Harbour","America/Panama|EST","America/Phoenix|America/Creston","America/Phoenix|MST","America/Phoenix|US/Arizona","America/Puerto_Rico|America/Anguilla","America/Puerto_Rico|America/Antigua","America/Puerto_Rico|America/Aruba","America/Puerto_Rico|America/Blanc-Sablon","America/Puerto_Rico|America/Curacao","America/Puerto_Rico|America/Dominica","America/Puerto_Rico|America/Grenada","America/Puerto_Rico|America/Guadeloupe","America/Puerto_Rico|America/Kralendijk","America/Puerto_Rico|America/Lower_Princes","America/Puerto_Rico|America/Marigot","America/Puerto_Rico|America/Montserrat","America/Puerto_Rico|America/Port_of_Spain","America/Puerto_Rico|America/St_Barthelemy","America/Puerto_Rico|America/St_Kitts","America/Puerto_Rico|America/St_Lucia","America/Puerto_Rico|America/St_Thomas","America/Puerto_Rico|America/St_Vincent","America/Puerto_Rico|America/Tortola","America/Puerto_Rico|America/Virgin","America/Regina|Canada/Saskatchewan","America/Rio_Branco|America/Porto_Acre","America/Rio_Branco|Brazil/Acre","America/Santiago|Chile/Continental","America/Sao_Paulo|Brazil/East","America/St_Johns|Canada/Newfoundland","America/Tijuana|America/Ensenada","America/Tijuana|America/Santa_Isabel","America/Tijuana|Mexico/BajaNorte","America/Toronto|America/Montreal","America/Toronto|America/Nassau","America/Toronto|America/Nipigon","America/Toronto|America/Thunder_Bay","America/Toronto|Canada/Eastern","America/Vancouver|Canada/Pacific","America/Whitehorse|Canada/Yukon","America/Winnipeg|America/Rainy_River","America/Winnipeg|Canada/Central","Asia/Ashgabat|Asia/Ashkhabad","Asia/Bangkok|Asia/Phnom_Penh","Asia/Bangkok|Asia/Vientiane","Asia/Bangkok|Etc/GMT-7","Asia/Bangkok|Indian/Christmas","Asia/Brunei|Asia/Kuching","Asia/Brunei|Etc/GMT-8","Asia/Dhaka|Asia/Dacca","Asia/Dubai|Asia/Muscat","Asia/Dubai|Etc/GMT-4","Asia/Dubai|Indian/Mahe","Asia/Dubai|Indian/Reunion","Asia/Ho_Chi_Minh|Asia/Saigon","Asia/Hong_Kong|Hongkong","Asia/Jerusalem|Asia/Tel_Aviv","Asia/Jerusalem|Israel","Asia/Kathmandu|Asia/Katmandu","Asia/Kolkata|Asia/Calcutta","Asia/Kuala_Lumpur|Asia/Singapore","Asia/Kuala_Lumpur|Singapore","Asia/Macau|Asia/Macao","Asia/Makassar|Asia/Ujung_Pandang","Asia/Nicosia|Europe/Nicosia","Asia/Qatar|Asia/Bahrain","Asia/Rangoon|Asia/Yangon","Asia/Rangoon|Indian/Cocos","Asia/Riyadh|Antarctica/Syowa","Asia/Riyadh|Asia/Aden","Asia/Riyadh|Asia/Kuwait","Asia/Riyadh|Etc/GMT-3","Asia/Seoul|ROK","Asia/Shanghai|Asia/Chongqing","Asia/Shanghai|Asia/Chungking","Asia/Shanghai|Asia/Harbin","Asia/Shanghai|PRC","Asia/Taipei|ROC","Asia/Tehran|Iran","Asia/Thimphu|Asia/Thimbu","Asia/Tokyo|Japan","Asia/Ulaanbaatar|Asia/Ulan_Bator","Asia/Urumqi|Antarctica/Vostok","Asia/Urumqi|Asia/Kashgar","Asia/Urumqi|Etc/GMT-6","Atlantic/Faroe|Atlantic/Faeroe","Atlantic/South_Georgia|Etc/GMT+2","Australia/Adelaide|Australia/South","Australia/Brisbane|Australia/Queensland","Australia/Broken_Hill|Australia/Yancowinna","Australia/Darwin|Australia/North","Australia/Hobart|Australia/Currie","Australia/Hobart|Australia/Tasmania","Australia/Lord_Howe|Australia/LHI","Australia/Melbourne|Australia/Victoria","Australia/Perth|Australia/West","Australia/Sydney|Australia/ACT","Australia/Sydney|Australia/Canberra","Australia/Sydney|Australia/NSW","Etc/UTC|Etc/UCT","Etc/UTC|Etc/Universal","Etc/UTC|Etc/Zulu","Etc/UTC|UCT","Etc/UTC|UTC","Etc/UTC|Universal","Etc/UTC|Zulu","Europe/Belgrade|Europe/Ljubljana","Europe/Belgrade|Europe/Podgorica","Europe/Belgrade|Europe/Sarajevo","Europe/Belgrade|Europe/Skopje","Europe/Belgrade|Europe/Zagreb","Europe/Berlin|Arctic/Longyearbyen","Europe/Berlin|Atlantic/Jan_Mayen","Europe/Berlin|Europe/Copenhagen","Europe/Berlin|Europe/Oslo","Europe/Berlin|Europe/Stockholm","Europe/Brussels|CET","Europe/Brussels|Europe/Amsterdam","Europe/Brussels|Europe/Luxembourg","Europe/Chisinau|Europe/Tiraspol","Europe/Dublin|Eire","Europe/Helsinki|Europe/Mariehamn","Europe/Istanbul|Asia/Istanbul","Europe/Istanbul|Turkey","Europe/Kiev|Europe/Kyiv","Europe/Kiev|Europe/Uzhgorod","Europe/Kiev|Europe/Zaporozhye","Europe/Lisbon|Portugal","Europe/London|Europe/Belfast","Europe/London|Europe/Guernsey","Europe/London|Europe/Isle_of_Man","Europe/London|Europe/Jersey","Europe/London|GB","Europe/London|GB-Eire","Europe/Moscow|W-SU","Europe/Paris|Europe/Monaco","Europe/Prague|Europe/Bratislava","Europe/Rome|Europe/San_Marino","Europe/Rome|Europe/Vatican","Europe/Warsaw|Poland","Europe/Zurich|Europe/Busingen","Europe/Zurich|Europe/Vaduz","Indian/Maldives|Etc/GMT-5","Indian/Maldives|Indian/Kerguelen","Pacific/Auckland|Antarctica/McMurdo","Pacific/Auckland|Antarctica/South_Pole","Pacific/Auckland|NZ","Pacific/Chatham|NZ-CHAT","Pacific/Easter|Chile/EasterIsland","Pacific/Enderbury|Pacific/Kanton","Pacific/Gambier|Etc/GMT+9","Pacific/Guadalcanal|Etc/GMT-11","Pacific/Guadalcanal|Pacific/Pohnpei","Pacific/Guadalcanal|Pacific/Ponape","Pacific/Guam|Pacific/Saipan","Pacific/Honolulu|HST","Pacific/Honolulu|Pacific/Johnston","Pacific/Honolulu|US/Hawaii","Pacific/Kwajalein|Kwajalein","Pacific/Niue|Etc/GMT+11","Pacific/Pago_Pago|Pacific/Midway","Pacific/Pago_Pago|Pacific/Samoa","Pacific/Pago_Pago|US/Samoa","Pacific/Palau|Etc/GMT-9","Pacific/Port_Moresby|Antarctica/DumontDUrville","Pacific/Port_Moresby|Etc/GMT-10","Pacific/Port_Moresby|Pacific/Chuuk","Pacific/Port_Moresby|Pacific/Truk","Pacific/Port_Moresby|Pacific/Yap","Pacific/Tahiti|Etc/GMT+10","Pacific/Tarawa|Etc/GMT-12","Pacific/Tarawa|Pacific/Funafuti","Pacific/Tarawa|Pacific/Majuro","Pacific/Tarawa|Pacific/Wake","Pacific/Tarawa|Pacific/Wallis"],countries:["AD|Europe/Andorra","AE|Asia/Dubai","AF|Asia/Kabul","AG|America/Puerto_Rico America/Antigua","AI|America/Puerto_Rico America/Anguilla","AL|Europe/Tirane","AM|Asia/Yerevan","AO|Africa/Lagos Africa/Luanda","AQ|Antarctica/Casey Antarctica/Davis Antarctica/Mawson Antarctica/Palmer Antarctica/Rothera Antarctica/Troll Asia/Urumqi Pacific/Auckland Pacific/Port_Moresby Asia/Riyadh Antarctica/McMurdo Antarctica/DumontDUrville Antarctica/Syowa Antarctica/Vostok","AR|America/Argentina/Buenos_Aires America/Argentina/Cordoba America/Argentina/Salta America/Argentina/Jujuy America/Argentina/Tucuman America/Argentina/Catamarca America/Argentina/La_Rioja America/Argentina/San_Juan America/Argentina/Mendoza America/Argentina/San_Luis America/Argentina/Rio_Gallegos America/Argentina/Ushuaia","AS|Pacific/Pago_Pago","AT|Europe/Vienna","AU|Australia/Lord_Howe Antarctica/Macquarie Australia/Hobart Australia/Melbourne Australia/Sydney Australia/Broken_Hill Australia/Brisbane Australia/Lindeman Australia/Adelaide Australia/Darwin Australia/Perth Australia/Eucla","AW|America/Puerto_Rico America/Aruba","AX|Europe/Helsinki Europe/Mariehamn","AZ|Asia/Baku","BA|Europe/Belgrade Europe/Sarajevo","BB|America/Barbados","BD|Asia/Dhaka","BE|Europe/Brussels","BF|Africa/Abidjan Africa/Ouagadougou","BG|Europe/Sofia","BH|Asia/Qatar Asia/Bahrain","BI|Africa/Maputo Africa/Bujumbura","BJ|Africa/Lagos Africa/Porto-Novo","BL|America/Puerto_Rico America/St_Barthelemy","BM|Atlantic/Bermuda","BN|Asia/Kuching Asia/Brunei","BO|America/La_Paz","BQ|America/Puerto_Rico America/Kralendijk","BR|America/Noronha America/Belem America/Fortaleza America/Recife America/Araguaina America/Maceio America/Bahia America/Sao_Paulo America/Campo_Grande America/Cuiaba America/Santarem America/Porto_Velho America/Boa_Vista America/Manaus America/Eirunepe America/Rio_Branco","BS|America/Toronto America/Nassau","BT|Asia/Thimphu","BW|Africa/Maputo Africa/Gaborone","BY|Europe/Minsk","BZ|America/Belize","CA|America/St_Johns America/Halifax America/Glace_Bay America/Moncton America/Goose_Bay America/Toronto America/Iqaluit America/Winnipeg America/Resolute America/Rankin_Inlet America/Regina America/Swift_Current America/Edmonton America/Cambridge_Bay America/Inuvik America/Dawson_Creek America/Fort_Nelson America/Whitehorse America/Dawson America/Vancouver America/Panama America/Puerto_Rico America/Phoenix America/Blanc-Sablon America/Atikokan America/Creston","CC|Asia/Yangon Indian/Cocos","CD|Africa/Maputo Africa/Lagos Africa/Kinshasa Africa/Lubumbashi","CF|Africa/Lagos Africa/Bangui","CG|Africa/Lagos Africa/Brazzaville","CH|Europe/Zurich","CI|Africa/Abidjan","CK|Pacific/Rarotonga","CL|America/Santiago America/Punta_Arenas Pacific/Easter","CM|Africa/Lagos Africa/Douala","CN|Asia/Shanghai Asia/Urumqi","CO|America/Bogota","CR|America/Costa_Rica","CU|America/Havana","CV|Atlantic/Cape_Verde","CW|America/Puerto_Rico America/Curacao","CX|Asia/Bangkok Indian/Christmas","CY|Asia/Nicosia Asia/Famagusta","CZ|Europe/Prague","DE|Europe/Zurich Europe/Berlin Europe/Busingen","DJ|Africa/Nairobi Africa/Djibouti","DK|Europe/Berlin Europe/Copenhagen","DM|America/Puerto_Rico America/Dominica","DO|America/Santo_Domingo","DZ|Africa/Algiers","EC|America/Guayaquil Pacific/Galapagos","EE|Europe/Tallinn","EG|Africa/Cairo","EH|Africa/El_Aaiun","ER|Africa/Nairobi Africa/Asmara","ES|Europe/Madrid Africa/Ceuta Atlantic/Canary","ET|Africa/Nairobi Africa/Addis_Ababa","FI|Europe/Helsinki","FJ|Pacific/Fiji","FK|Atlantic/Stanley","FM|Pacific/Kosrae Pacific/Port_Moresby Pacific/Guadalcanal Pacific/Chuuk Pacific/Pohnpei","FO|Atlantic/Faroe","FR|Europe/Paris","GA|Africa/Lagos Africa/Libreville","GB|Europe/London","GD|America/Puerto_Rico America/Grenada","GE|Asia/Tbilisi","GF|America/Cayenne","GG|Europe/London Europe/Guernsey","GH|Africa/Abidjan Africa/Accra","GI|Europe/Gibraltar","GL|America/Nuuk America/Danmarkshavn America/Scoresbysund America/Thule","GM|Africa/Abidjan Africa/Banjul","GN|Africa/Abidjan Africa/Conakry","GP|America/Puerto_Rico America/Guadeloupe","GQ|Africa/Lagos Africa/Malabo","GR|Europe/Athens","GS|Atlantic/South_Georgia","GT|America/Guatemala","GU|Pacific/Guam","GW|Africa/Bissau","GY|America/Guyana","HK|Asia/Hong_Kong","HN|America/Tegucigalpa","HR|Europe/Belgrade Europe/Zagreb","HT|America/Port-au-Prince","HU|Europe/Budapest","ID|Asia/Jakarta Asia/Pontianak Asia/Makassar Asia/Jayapura","IE|Europe/Dublin","IL|Asia/Jerusalem","IM|Europe/London Europe/Isle_of_Man","IN|Asia/Kolkata","IO|Indian/Chagos","IQ|Asia/Baghdad","IR|Asia/Tehran","IS|Africa/Abidjan Atlantic/Reykjavik","IT|Europe/Rome","JE|Europe/London Europe/Jersey","JM|America/Jamaica","JO|Asia/Amman","JP|Asia/Tokyo","KE|Africa/Nairobi","KG|Asia/Bishkek","KH|Asia/Bangkok Asia/Phnom_Penh","KI|Pacific/Tarawa Pacific/Kanton Pacific/Kiritimati","KM|Africa/Nairobi Indian/Comoro","KN|America/Puerto_Rico America/St_Kitts","KP|Asia/Pyongyang","KR|Asia/Seoul","KW|Asia/Riyadh Asia/Kuwait","KY|America/Panama America/Cayman","KZ|Asia/Almaty Asia/Qyzylorda Asia/Qostanay Asia/Aqtobe Asia/Aqtau Asia/Atyrau Asia/Oral","LA|Asia/Bangkok Asia/Vientiane","LB|Asia/Beirut","LC|America/Puerto_Rico America/St_Lucia","LI|Europe/Zurich Europe/Vaduz","LK|Asia/Colombo","LR|Africa/Monrovia","LS|Africa/Johannesburg Africa/Maseru","LT|Europe/Vilnius","LU|Europe/Brussels Europe/Luxembourg","LV|Europe/Riga","LY|Africa/Tripoli","MA|Africa/Casablanca","MC|Europe/Paris Europe/Monaco","MD|Europe/Chisinau","ME|Europe/Belgrade Europe/Podgorica","MF|America/Puerto_Rico America/Marigot","MG|Africa/Nairobi Indian/Antananarivo","MH|Pacific/Tarawa Pacific/Kwajalein Pacific/Majuro","MK|Europe/Belgrade Europe/Skopje","ML|Africa/Abidjan Africa/Bamako","MM|Asia/Yangon","MN|Asia/Ulaanbaatar Asia/Hovd Asia/Choibalsan","MO|Asia/Macau","MP|Pacific/Guam Pacific/Saipan","MQ|America/Martinique","MR|Africa/Abidjan Africa/Nouakchott","MS|America/Puerto_Rico America/Montserrat","MT|Europe/Malta","MU|Indian/Mauritius","MV|Indian/Maldives","MW|Africa/Maputo Africa/Blantyre","MX|America/Mexico_City America/Cancun America/Merida America/Monterrey America/Matamoros America/Chihuahua America/Ciudad_Juarez America/Ojinaga America/Mazatlan America/Bahia_Banderas America/Hermosillo America/Tijuana","MY|Asia/Kuching Asia/Singapore Asia/Kuala_Lumpur","MZ|Africa/Maputo","NA|Africa/Windhoek","NC|Pacific/Noumea","NE|Africa/Lagos Africa/Niamey","NF|Pacific/Norfolk","NG|Africa/Lagos","NI|America/Managua","NL|Europe/Brussels Europe/Amsterdam","NO|Europe/Berlin Europe/Oslo","NP|Asia/Kathmandu","NR|Pacific/Nauru","NU|Pacific/Niue","NZ|Pacific/Auckland Pacific/Chatham","OM|Asia/Dubai Asia/Muscat","PA|America/Panama","PE|America/Lima","PF|Pacific/Tahiti Pacific/Marquesas Pacific/Gambier","PG|Pacific/Port_Moresby Pacific/Bougainville","PH|Asia/Manila","PK|Asia/Karachi","PL|Europe/Warsaw","PM|America/Miquelon","PN|Pacific/Pitcairn","PR|America/Puerto_Rico","PS|Asia/Gaza Asia/Hebron","PT|Europe/Lisbon Atlantic/Madeira Atlantic/Azores","PW|Pacific/Palau","PY|America/Asuncion","QA|Asia/Qatar","RE|Asia/Dubai Indian/Reunion","RO|Europe/Bucharest","RS|Europe/Belgrade","RU|Europe/Kaliningrad Europe/Moscow Europe/Simferopol Europe/Kirov Europe/Volgograd Europe/Astrakhan Europe/Saratov Europe/Ulyanovsk Europe/Samara Asia/Yekaterinburg Asia/Omsk Asia/Novosibirsk Asia/Barnaul Asia/Tomsk Asia/Novokuznetsk Asia/Krasnoyarsk Asia/Irkutsk Asia/Chita Asia/Yakutsk Asia/Khandyga Asia/Vladivostok Asia/Ust-Nera Asia/Magadan Asia/Sakhalin Asia/Srednekolymsk Asia/Kamchatka Asia/Anadyr","RW|Africa/Maputo Africa/Kigali","SA|Asia/Riyadh","SB|Pacific/Guadalcanal","SC|Asia/Dubai Indian/Mahe","SD|Africa/Khartoum","SE|Europe/Berlin Europe/Stockholm","SG|Asia/Singapore","SH|Africa/Abidjan Atlantic/St_Helena","SI|Europe/Belgrade Europe/Ljubljana","SJ|Europe/Berlin Arctic/Longyearbyen","SK|Europe/Prague Europe/Bratislava","SL|Africa/Abidjan Africa/Freetown","SM|Europe/Rome Europe/San_Marino","SN|Africa/Abidjan Africa/Dakar","SO|Africa/Nairobi Africa/Mogadishu","SR|America/Paramaribo","SS|Africa/Juba","ST|Africa/Sao_Tome","SV|America/El_Salvador","SX|America/Puerto_Rico America/Lower_Princes","SY|Asia/Damascus","SZ|Africa/Johannesburg Africa/Mbabane","TC|America/Grand_Turk","TD|Africa/Ndjamena","TF|Asia/Dubai Indian/Maldives Indian/Kerguelen","TG|Africa/Abidjan Africa/Lome","TH|Asia/Bangkok","TJ|Asia/Dushanbe","TK|Pacific/Fakaofo","TL|Asia/Dili","TM|Asia/Ashgabat","TN|Africa/Tunis","TO|Pacific/Tongatapu","TR|Europe/Istanbul","TT|America/Puerto_Rico America/Port_of_Spain","TV|Pacific/Tarawa Pacific/Funafuti","TW|Asia/Taipei","TZ|Africa/Nairobi Africa/Dar_es_Salaam","UA|Europe/Simferopol Europe/Kyiv","UG|Africa/Nairobi Africa/Kampala","UM|Pacific/Pago_Pago Pacific/Tarawa Pacific/Midway Pacific/Wake","US|America/New_York America/Detroit America/Kentucky/Louisville America/Kentucky/Monticello America/Indiana/Indianapolis America/Indiana/Vincennes America/Indiana/Winamac America/Indiana/Marengo America/Indiana/Petersburg America/Indiana/Vevay America/Chicago America/Indiana/Tell_City America/Indiana/Knox America/Menominee America/North_Dakota/Center America/North_Dakota/New_Salem America/North_Dakota/Beulah America/Denver America/Boise America/Phoenix America/Los_Angeles America/Anchorage America/Juneau America/Sitka America/Metlakatla America/Yakutat America/Nome America/Adak Pacific/Honolulu","UY|America/Montevideo","UZ|Asia/Samarkand Asia/Tashkent","VA|Europe/Rome Europe/Vatican","VC|America/Puerto_Rico America/St_Vincent","VE|America/Caracas","VG|America/Puerto_Rico America/Tortola","VI|America/Puerto_Rico America/St_Thomas","VN|Asia/Bangkok Asia/Ho_Chi_Minh","VU|Pacific/Efate","WF|Pacific/Tarawa Pacific/Wallis","WS|Pacific/Apia","YE|Asia/Riyadh Asia/Aden","YT|Africa/Nairobi Indian/Mayotte","ZA|Africa/Johannesburg","ZM|Africa/Maputo Africa/Lusaka","ZW|Africa/Maputo Africa/Harare"]}),o})}});var require_b_date=__commonJS({"lib-browser-old/u/shared/b_date.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.date_math=void 0;exports.format_date=format_date;exports.format_date_interval=format_date_interval;exports.get_last_day_of_utc_month=exports.get_last_day_of_month=exports.get_first_day_of_month=exports.format_date_short_based_on_locale=void 0;exports.get_previous_month_year=get_previous_month_year;exports.get_prior_midnight_utc_date=void 0;exports.get_prior_midnight_utc_ts=get_prior_midnight_utc_ts;exports.get_utc_tomorrow_midnight=void 0;exports.human_readable_to_epoch=human_readable_to_epoch;exports.mk_date=mk_date;exports.print_date_interval=print_date_interval;exports.require_moment=require_moment2;exports.to_moment=to_moment;require_es_regexp_exec();require_es_string_replace();require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_sort();require_es_string_starts_with();require_es_parse_float();require_es_regexp_test();var _moment=_interopRequireDefault(require_moment()),mode_check=_interopRequireWildcard(require_mode_check()),_lib=_interopRequireDefault(require_lib()),time_consts=_interopRequireWildcard(require_time()),b_string=_interopRequireWildcard(require_b_string()),_regexUtilities=require_regexUtilities(),_errors=require_errors();function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function require_moment2(){let r_moment;return mode_check.on_server()?r_moment=__require("moment-timezone"):r_moment=require_moment_timezone_min(),r_moment}function extract_parts(mask){let match,parts=[],merge="";for(;(match=(0,_regexUtilities.oneOf)('"',"'").exec(mask))!=null;){let end=mask.indexOf(match[0],match.index+1);end!==-1?(parts.push({content:merge+mask.substring(0,match.index),type:"normal"}),parts.push({content:mask.substring(match.index+1,end),type:"literal"}),mask=mask.substring(end+1),merge=""):(merge=mask.substring(0,match.index+1),mask=mask.substring(match.index+1))}return mask!==""&&parts.push({content:merge+mask,type:"normal"}),parts}var ESCAPE_START="[",ESCAPE_END="]",allTokens=[["yyyy","YYYY"],["yy","YY"],["m","M"],[null,"Mo"],["mm","MM"],["mmm","MMM"],["mmmm","MMMM"],[null,"w"],[null,"wo"],[null,"ww"],["d","D"],["dd","DD"],[null,"DDD"],[null,"DDDo"],[null,"DDDD"],["ddd","ddd"],["dddd","dddd"],[null,"do"],["TT","A"],["tt","a"],["H","H"],["HH","HH"],["h","h"],["hh","hh"],["M","m"],["MM","mm"],["L","SS"],["l","SSS"],["Z","z"],[null,"zz"]],specialHandlers={t:date=>ESCAPE_START+date.format("a")[0]+ESCAPE_END,T:date=>ESCAPE_START+date.format("A")[0]+ESCAPE_END,o:date=>{let utcOffset=date.utcOffset(),hours=Math.floor(Math.abs(utcOffset)/60),minutes=Math.abs(utcOffset)-60*hours,sign=utcOffset>=0?"+":"-";return ESCAPE_START+sign+(hours<10?"0".concat(hours):"".concat(hours))+(minutes<10?"0".concat(minutes):"".concat(minutes))+ESCAPE_END},S:date=>{let ordinality=date.format("Do");return ESCAPE_START+ordinality.replace(/\d/g,"")+ESCAPE_END}},escapeReplacer=(0,_regexUtilities.withFlags)("g",(0,_regexUtilities.capture)("esc",(0,_regexUtilities.oneOf)(ESCAPE_START,ESCAPE_END))),momentTokens=new Set(allTokens.map(a=>a[1])),dateTokens=new Map(allTokens.filter(a=>a[0]!==null)),replaceRegex=(0,_regexUtilities.withFlags)("g",(0,_regexUtilities.capture)("token",(0,_regexUtilities.oneOf)(...[...momentTokens.values(),...dateTokens.keys(),...Object.keys(specialHandlers)].sort((a,b)=>b.length-a.length))));function replaceFunc(date){return fullMatch=>{let equivalentMoment=dateTokens.get(fullMatch);if(equivalentMoment!=null)return equivalentMoment;let handler=specialHandlers[fullMatch];if(handler!=null)return handler(date);if(momentTokens.has(fullMatch))return ESCAPE_START+fullMatch+ESCAPE_END;throw new _errors.UnexpectedError("Invalid Capturing Group detected in regex!",{fullMatch})}}function convert_mask_to_moment(date,mask){mask.startsWith("UTC:")&&(mask=mask.substring(4),date=date.tz("UTC"));let parts=extract_parts(mask),result="";for(let part of parts)part.type==="literal"?(result+=ESCAPE_START,result+=part.content.replace(escapeReplacer,"".concat(ESCAPE_END,"$<esc>").concat(ESCAPE_START)),result+=ESCAPE_END):result+=part.content.replace(escapeReplacer,"".concat(ESCAPE_START,"$<esc>").concat(ESCAPE_END)).replace(replaceRegex,replaceFunc(date));return{result,date}}var format_date_short_based_on_locale=(date,_ref)=>{let{year,month,day,hour,minute}=_ref;return date.toLocaleString(void 0,{year:year?"numeric":void 0,month:month?"short":void 0,day:day?"numeric":void 0,hour:hour?"2-digit":void 0,minute:minute?"2-digit":void 0})};exports.format_date_short_based_on_locale=format_date_short_based_on_locale;function format_date(date_object,mask,date_words,tz_name){var _mask;if((_mask=mask)!=null||(mask="ddd mmm dd yyyy hh:MM:ss"),date_object==null||isNaN(date_object.valueOf()))return"";{let m_object=to_moment(date_object,tz_name);if(mask){let{result,date}=convert_mask_to_moment(m_object,mask);mask=result,m_object=date}if(date_words!=null){let old_locale=_moment.default.locale();_moment.default.defineLocale("temp_locale",{parentLocale:old_locale,monthsShort:date_words.monthNames.slice(0,12),months:date_words.monthNames.slice(12),weekdaysShort:date_words.dayNames.slice(0,7),weekdays:date_words.dayNames.slice(7)});let result=m_object.locale("temp_locale").format(mask);return _moment.default.updateLocale("temp_locale",null),_moment.default.locale(old_locale),result}else return m_object.format(mask)}}function format_date_interval(interval,mask){if(isNaN(interval))return null;switch(mask){case"days":return Math.round(interval/(1e3*60*60*24)*10)/10;case"hours":return Math.round(interval/(1e3*60*60)*10)/10;case"minutes":return Math.round(interval/(1e3*60));case"seconds":return Math.round(interval/1e3)}}function human_readable_to_epoch(date_string,timezone){return date_string?timezone?_moment.default.tz(date_string,"MM/DD/YYYY H:mm",timezone).valueOf():(0,_moment.default)(date_string,"MM/DD/YYYY H:mm").valueOf():null}function print_date_interval(interval){for(let mask of["days","hours","minutes","seconds"]){let num=format_date_interval(interval,mask);if(num===1)return"".concat(num," ").concat(mask.slice(0,mask.length-1));if(num!==null&&num>1||mask==="seconds")return"".concat(num!=null?num:"NaN"," ").concat(mask)}return""}function get_previous_month_year(date){let now=date!=null?date:new Date,current_year=now.getFullYear(),current_month=now.getMonth(),previous_month=current_month===0?12:current_month,previous_month_calendar_year=previous_month<12?current_year:current_year-1;return{month:previous_month,year:previous_month_calendar_year}}var get_last_day_of_month=(year,month)=>new Date(year,month,0);exports.get_last_day_of_month=get_last_day_of_month;var get_last_day_of_utc_month=(year,month)=>new Date(Date.UTC(year,month,0));exports.get_last_day_of_utc_month=get_last_day_of_utc_month;var get_first_day_of_month=(year,month)=>new Date(year,month,1);exports.get_first_day_of_month=get_first_day_of_month;var get_utc_tomorrow_midnight=()=>{let next_day=new Date(Date.now()+time_consts.DAY_MS);return new Date(Date.UTC(next_day.getUTCFullYear(),next_day.getUTCMonth(),next_day.getUTCDate()))};exports.get_utc_tomorrow_midnight=get_utc_tomorrow_midnight;var get_prior_midnight_utc_date=date=>{let date_to_evaluate=date!=null?date:new Date;return new Date(Date.UTC(date_to_evaluate.getUTCFullYear(),date_to_evaluate.getUTCMonth(),date_to_evaluate.getUTCDate()))};exports.get_prior_midnight_utc_date=get_prior_midnight_utc_date;function get_prior_midnight_utc_ts(ts){return get_prior_midnight_utc_date(new Date(ts)).getTime()}function mk_date(d,timezone){let ret;if(d instanceof Date)ret=d;else if(typeof d=="number")ret=new Date(d);else if(typeof d=="string")if(String(parseFloat(d))===d)ret=new Date(parseFloat(d));else if(timezone!=null||_lib.default.or_throw().bubble_version()>=17){var _timezone;if((_timezone=timezone)!=null||(timezone=_lib.default.or_throw().current_timezone()),(0,_moment.default)(d,[_moment.default.ISO_8601,_moment.default.RFC_2822]).isValid())ret=_moment.default.tz(d,timezone).toDate();else if(/GMT[+-]\d{4}/.test(d)||/\((?!PM|AM|am|pm)([a-z]|[A-Z]){2,3}\)/.test(d)||/ (?!PM|AM|am|pm)([a-z]|[A-Z]){2,3}$/.test(d))ret=(0,_moment.default)(d).toDate();else{let formatted=(0,_moment.default)(d).format("YYYY-MM-DD[T]HH:mm:ss");ret=_moment.default.tz(formatted,timezone).toDate()}}else ret=(0,_moment.default)(d).toDate();else ret=new Date(NaN);return isNaN(ret.valueOf())?null:ret}function to_moment(d,tz_name){var _tz_name;let m=(0,_moment.default)(mk_date(d));return tz_name!=null&&m.tz(tz_name),m}function from_moment(m){return m.isValid()?mk_date(m.toDate()):null}function moment_add(base,value,unit){var _b_string$to_num;let base_moment=to_moment(base,_lib.default.or_throw().current_timezone()),numeric_val=(_b_string$to_num=b_string.to_num(value))!=null?_b_string$to_num:0;return base_moment.add(numeric_val,unit),from_moment(base_moment)}function moment_set(base,value,unit){let base_moment=to_moment(base,_lib.default.or_throw().current_timezone()),numeric_val=b_string.to_num(value);return numeric_val==null||base_moment.set(unit,numeric_val),from_moment(base_moment)}var date_math={plus_seconds(base,value){var _b_string$to_num2;let base_date=mk_date(base);if(base_date==null||base==null)return null;let numeric_incr=(_b_string$to_num2=b_string.to_num(value))!=null?_b_string$to_num2:0;return mk_date(new Date(Math.round(base_date.valueOf()+numeric_incr*time_consts.SECOND_MS)))},plus_minutes(base,value){var _b_string$to_num3;let base_date=mk_date(base);if(base==null||base_date==null)return null;let numeric_incr=(_b_string$to_num3=b_string.to_num(value))!=null?_b_string$to_num3:0;return mk_date(new Date(Math.round(base_date.valueOf()+numeric_incr*time_consts.MINUTE_MS)))},plus_hours(base,value){var _b_string$to_num4;let base_date=mk_date(base);if(base==null||base_date==null)return null;let numeric_incr=(_b_string$to_num4=b_string.to_num(value))!=null?_b_string$to_num4:0;return mk_date(new Date(Math.round(base_date.valueOf()+numeric_incr*time_consts.HOUR_MS)))},plus_days(base,value){return moment_add(base,value,"days")},plus_months(base,value){return moment_add(base,value,"months")},plus_years(base,value){return moment_add(base,value,"years")},change_seconds(base,value){return moment_set(moment_set(base,value,"second"),"0","millisecond")},change_minutes(base,value){return moment_set(base,value,"minute")},change_hours(base,value){return moment_set(base,value,"hour")},change_date(base,value){return moment_set(base,value,"date")},change_month(base,value){let n_b=b_string.to_num(value);return n_b==null?mk_date(base):(n_b-=1,moment_set(base,n_b,"month"))},change_years(base,value){return moment_set(base,value,"year")},extract_from_date(base,_,properties){let tz;switch(properties.tz_type){case"static":tz=properties.tz_static;break;case"dynamic":tz=properties.tz_dynamic;break;default:tz=_lib.default.or_throw().current_timezone()}let base_moment=to_moment(base,tz);if(!base_moment.isValid())return null;switch(properties.component_to_extract){case"minute":return base_moment.minute();case"hour":return base_moment.hour();case"day":return base_moment.day();case"date":return base_moment.date();case"week":return base_moment.isoWeek();case"month":return base_moment.month()+1;case"year":return base_moment.year();case"UNIX":return base_moment.valueOf();default:return null}}};exports.date_math=date_math}});var require_incremental=__commonJS({"lib-browser-old/u/shared/incremental.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_json_stringify();require_web_dom_collections_for_each();require_es_regexp_exec();require_es_string_replace();var b_fiber=require_b_fiber(),mode_check=require_mode_check(),incremental=exports,WEIGHT_PER_PAUSE=100;incremental.optional_pause_tick=function(){let weight=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,pause_message=arguments.length>1?arguments[1]:void 0;if(mode_check.on_server()){var _b_fiber$Fiber$curren,_b_fiber$Fiber$curren2;(_b_fiber$Fiber$curren2=(_b_fiber$Fiber$curren=b_fiber.Fiber.current).optional_pause_ticks)!=null||(_b_fiber$Fiber$curren.optional_pause_ticks=0),b_fiber.Fiber.current.optional_pause_ticks+=weight,b_fiber.Fiber.current.optional_pause_ticks>=WEIGHT_PER_PAUSE&&(b_fiber.Fiber.current.optional_pause_ticks=0,b_fiber.optional_pause(pause_message))}};incremental.with_pause_tick=function(operation){let weight=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return function(){let result=operation(...arguments);return incremental.optional_pause_tick(weight),result}};incremental.incremental_json_deep_copy=function(data){let string=incremental.incremental_json_stringify(data);return incremental.incremental_json_parse(string)};incremental.incremental_json_parse=function(string){let incremental_threshold=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e4;return String(string)===""?null:!mode_check.on_server()||String(string).length<incremental_threshold?JSON.parse(string):JSON.parse(string,(key,value)=>(incremental.optional_pause_tick(1,"incremental json parse"),value))};incremental.incremental_json_stringify=function(obj){return mode_check.on_server()?JSON.stringify(obj,(key,value)=>(incremental.optional_pause_tick(1,"incremental json stringify"),value)):JSON.stringify(obj)};incremental.incremental_json_length=function(object2){let seen=new Set,stack=[],length=0,count=0;function visit(value){switch(count++,count%100===0&&b_fiber.optional_pause("incremental json length"),typeof value){case"string":length+=2+value.length;return;case"boolean":case"number":length+=String(value).length;return;case"function":return;case"object":value==null?length+=4:import_buffer.Buffer.isBuffer(value)?length+=2+value.length:seen.has(value)||(seen.add(value),stack.push(value))}}for(visit(object2);stack.length>0;){let next=stack.pop();if(Array.isArray(next)){length+=2;for(let i=0;i<next.length;i++)visit(next[i]),length+=i===0?0:1}else if(next.constructor===Object||next.constructor===null){length+=2;let first=!0;for(let key in next){let value=next[key];value!==void 0&&(length+=2+key.length+1,visit(value),length+=first?0:1,first=!1)}}}return length};incremental.incremental_for_each=function(){let array,fn,iterations;for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];args.length>2?[iterations,array,fn]=args:(iterations=50,[array,fn]=args),array.forEach((item,idx,array2)=>{if(fn(item,idx,array2),(idx+1)%iterations===0)return b_fiber.optional_pause()})};incremental.incremental_map=function(){let array,fn,iterations;for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];return args.length>2?[iterations,array,fn]=args:(iterations=50,[array,fn]=args),array.map((item,idx,array2)=>{let ret=fn(item,idx,array2);return(idx+1)%iterations===0&&b_fiber.optional_pause(),ret})};incremental.incremental_for_each_2=function(){let array,fn,iterations;for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++)args[_key3]=arguments[_key3];args.length>2?[iterations,array,fn]=args:(iterations=50,[array,fn]=args);let count=0;for(let child_array of array)for(let inner_item of child_array)fn(inner_item),count++,count%iterations===0&&b_fiber.optional_pause()};incremental.json_to_csv=function(obj,separator,show_labels,show_quotes,optional_pause_interval){var _separator,_show_labels,_show_quotes,_optional_pause_inter;(_separator=separator)!=null||(separator=","),(_show_labels=show_labels)!=null||(show_labels=!0),(_show_quotes=show_quotes)!=null||(show_quotes=!1),(_optional_pause_inter=optional_pause_interval)!=null||(optional_pause_interval=100),typeof obj!="object"&&(obj=JSON.parse(obj));let str="";if(show_labels){let processed_entry=[];if(show_quotes)for(let key in obj[0]){let value=key+"";processed_entry.push('"'+value.replace(/"/g,'""')+'"')}else for(let key in obj[0])processed_entry.push(key);str=processed_entry.join(separator)+"\n"}for(let index=0;index<obj.length;index++){let entry=obj[index];index%optional_pause_interval===0&&b_fiber.optional_pause();let processed_entry=[];if(show_quotes)for(let key in entry){let value=String(entry[key]);processed_entry.push('"'+value.replace(/"/g,'""')+'"')}else for(let key in entry){let value=entry[key];processed_entry.push(value)}str=str+processed_entry.join(separator)+"\n"}return str}}});var require_b_number=__commonJS({"lib-browser-old/u/shared/b_number.js"(exports){"use strict";init_define_process_env();init_shim();require_es_parse_float();require_es_regexp_exec();require_es_string_replace();var b_fiber=require_b_fiber(),incremental=require_incremental(),{to_num}=require_b_string(),b_number=exports;b_number.DEFAULT_PRECISION=15;var _round_number=number=>parseFloat(number.toPrecision(b_number.DEFAULT_PRECISION));b_number.round_all=function(obj){let counter_obj=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{count:0};if(Array.isArray(obj))incremental.incremental_for_each(obj,(elem,i,arr)=>{typeof elem=="number"?arr[i]=_round_number(elem):b_number.round_all(arr[i],counter_obj)});else if(obj&&(obj.constructor===Object||obj.constructor==null))for(let key in obj)typeof obj[key]=="number"?(counter_obj.count++,obj[key]=_round_number(obj[key])):b_number.round_all(obj[key],counter_obj)};b_number.dec_to_string=function(val){let max_precision=arguments.length>1&&arguments[1]!==void 0?arguments[1]:b_number.DEFAULT_PRECISION,result=val.toPrecision(max_precision);return result=result.replace(/(\.[0-9]*?)0*(e-?[0-9]+)?$/,"$1$2").replace(/\.(e-?[0-9]+)?$/,"$1"),result};b_number.num_equals=function(a,b){let numA=to_num(a),numB=to_num(b),absA=Math.abs(numA),absB=Math.abs(numB);if(numA===numB)return!0;let diff=Math.abs(numA-numB),epsilon=1e-15;return numA===0||numB===0||diff<Number.MIN_VALUE?diff<epsilon*Number.MIN_VALUE:diff/Math.min(absA+absB,Number.MAX_VALUE)<epsilon}}});var require_b_search=__commonJS({"lib-browser-old/u/shared/b_search.js"(exports){"use strict";init_define_process_env();init_shim();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();Object.defineProperty(exports,"__esModule",{value:!0});exports.searchNextIncrementalNumber=void 0;require_es_symbol_description();require_es_error_cause();function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var searchNextIncrementalNumber=_ref=>{let{isPresent:_isPresent,startValue}=_ref,{lastObservedPresentValue,firstObservedAbsentValue}=searchLastObservedPresentValueAndFirstObservedAbsentValue({isPresent:_isPresent,startValue});return lastObservedPresentValue==null?firstObservedAbsentValue:binarySearchNextIncrementalNumber({isPresent:value=>value===firstObservedAbsentValue?!1:_isPresent(value),fromValue:lastObservedPresentValue+1,toValue:firstObservedAbsentValue})};exports.searchNextIncrementalNumber=searchNextIncrementalNumber;var searchLastObservedPresentValueAndFirstObservedAbsentValue=_ref2=>{let{isPresent,startValue}=_ref2;if(isPresent(startValue)){let nextStartValue=startValue===0?1:startValue*2;return _objectSpread({lastObservedPresentValue:startValue},searchLastObservedPresentValueAndFirstObservedAbsentValue({isPresent,startValue:nextStartValue}))}else return{firstObservedAbsentValue:startValue}},binarySearchNextIncrementalNumber=_ref3=>{let{isPresent,fromValue,toValue}=_ref3,nextAbsentValue=Number.NaN;for(;fromValue<=toValue;){let middleValue=Math.floor((fromValue+toValue)/2);isPresent(middleValue)?fromValue=middleValue+1:(nextAbsentValue=middleValue,toValue=middleValue-1)}return nextAbsentValue}}});var require_es_array_reverse=__commonJS({"node_modules/core-js/modules/es.array.reverse.js"(){"use strict";init_define_process_env();init_shim();var $2=require_export(),uncurryThis=require_function_uncurry_this(),isArray=require_is_array(),un$Reverse=uncurryThis([].reverse),test=[1,2];$2({target:"Array",proto:!0,forced:String(test)===String(test.reverse())},{reverse:function(){return isArray(this)&&(this.length=this.length),un$Reverse(this)}})}});var require_bbcodeparser=__commonJS({"lib-browser-old/u/client/bbcodeparser.js"(exports){"use strict";init_define_process_env();init_shim();require_es_regexp_exec();require_es_string_replace();require_es_parse_int();require_es_regexp_to_string();require_es_string_match();require_es_array_reverse();require_es_regexp_test();require_es_string_split();var breakAfterBlock=!0,breakStartBlock=!1,breakEndBlock=!1,breakAfterBlock=!1,fixInvalidChildren=!0,removeEmptyTags=!0,fixInvalidNesting=!0,isPreWrap=!1,QuoteType={always:1,never:2,auto:3},stripQuotes=function(str){return str&&str.replace(/\\(.)/g,"$1").replace(/^(["'])(.*?)\1$/,"$2")},formatString=function(){var args=arguments;return args[0].replace(/\{(\d+)\}/g,function(str,p1){return typeof args[p1-0+1]<"u"?args[p1-0+1]:"{"+p1+"}"})},normaliseColour=function(color){var m,toHex;return toHex=function(n){return n=parseInt(n,10),isNaN(n)?"00":(n=Math.max(0,Math.min(n,255)).toString(16),n.length<2?"0"+n:n)},color=color||"#000",(m=color.match(/rgb\((\d{1,3}),\s*?(\d{1,3}),\s*?(\d{1,3})\)/i))?"#"+toHex(m[1])+toHex(m[2]-0)+toHex(m[3]-0):(m=color.match(/#([0-f])([0-f])([0-f])\s*?$/i))?"#"+m[1]+m[1]+m[2]+m[2]+m[3]+m[3]:color},list_types=["decimal","lower-alpha","lower-roman"],listStyle=function(index){for(;list_types.length<=index;)list_types.push("decimal","lower-alpha","lower-roman");return list_types[index]},escapeEntities=function(str){return str&&str.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ {2}/g," &nbsp;").replace(/\r\n|\r/g,"\n").replace(/\n/g,"<br />")},parse=function(str,preserveNewLines){var ret=parseTokens(tokenize(str));return fixInvalidChildren&&fixChildren(ret),removeEmptyTags&&removeEmpty(ret),fixInvalidNesting&&fixNesting(ret),normaliseNewLines(ret,null,preserveNewLines),removeEmptyTags&&removeEmpty(ret),ret},tokenType={open:"open",content:"content",newline:"newline",close:"close"},hasTag=function(name,type,arr){for(var i=arr.length;i--;)if(arr[i].type===type&&arr[i].name===name)return!0;return!1},TokenizeToken=function(type,name,val,attrs,children2,closing){var base=this;base.type=type,base.name=name,base.val=val,base.attrs=attrs||{},base.children=children2||[],base.closing=closing||null};TokenizeToken.prototype={clone:function(includeChildren){var base=this;return new TokenizeToken(base.type,base.name,base.val,base.attrs,includeChildren?base.children:[],base.closing?base.closing.clone():null)},splitAt:function(_splitAt){var clone,base=this,splitAtLength=0,childrenLen=base.children.length;if(typeof object!="number"&&(_splitAt=base.children.indexOf(_splitAt)),_splitAt<0||_splitAt>childrenLen)return null;for(;childrenLen--;)childrenLen>=_splitAt?splitAtLength++:childrenLen=0;return clone=base.clone(),clone.children=base.children.splice(_splitAt,splitAtLength),clone}};var tokenize=function(str){var matches,type,i,toks=[],tokens=[{type:"close",regex:/^\[\/[^\[\]]+\]/},{type:"open",regex:/^\[[^\[\]]+\]/},{type:"newline",regex:/^(\r\n|\r|\n)/},{type:"content",regex:/^([^\[\r\n]+|\[)/}];tokens.reverse();strloop:for(;str.length;){for(i=tokens.length;i--;)if(type=tokens[i].type,!(!(matches=str.match(tokens[i].regex))||!matches[0])){toks.push(tokenizeTag(type,matches[0])),str=str.substr(matches[0].length);continue strloop}str.length&&toks.push(tokenizeTag(tokenType.content,str)),str=""}return toks},tokenizeTag=function(type,val){var matches,attrs,name;return type==="open"&&(matches=val.match(/\[([^\]\s=]+)(?:([^\]]+))?\]/))?(name=lower(matches[1]),matches[2]&&(matches[2]=matches[2].replace(/^\s\s*/,"").replace(/\s\s*$/,""))&&(attrs=tokenizeAttrs(matches[2]))):type==="close"&&(matches=val.match(/\[\/([^\[\]]+)\]/))?name=lower(matches[1]):type==="newline"&&(name="#newline"),(!name||(type==="open"||type==="close")&&!get_bbcodes()[name])&&(type="content",name="#"),new TokenizeToken(type,name,val,attrs)},tokenizeAttrs=function(attrs){var matches,atribsRegex=/([^\s=]+)=(?:(?:(["'])((?:\\\2|[^\2])*?)\2)|((?:.(?!\s\S+=))*.))/g,unquote=stripQuotes,ret={};if(attrs.charAt(0)==="="&&attrs.indexOf("=",1)<0)ret.defaultattr=unquote(attrs.substr(1));else for(attrs.charAt(0)==="="&&(attrs="defaultattr"+attrs);matches=atribsRegex.exec(attrs);)ret[lower(matches[1])]=unquote(matches[3])||matches[4];return ret},parseTokens=function(toks){for(var token,bbcode,curTok,clone,i,previous,next,cloned=[],output=[],openTags=[],currentOpenTag=function(){return last(openTags)},addTag=function(token2){currentOpenTag()?currentOpenTag().children.push(token2):output.push(token2)},closesCurrentTag=function(name){return currentOpenTag()&&(bbcode=get_bbcodes()[currentOpenTag().name])&&bbcode.closedBy&&bbcode.closedBy.indexOf(name)>-1};token=toks.shift();){switch(next=toks[0],token.type){case tokenType.open:closesCurrentTag(token.name)&&openTags.pop(),addTag(token),bbcode=get_bbcodes()[token.name],(!bbcode||!bbcode.isSelfClosing)&&(bbcode.closedBy||hasTag(token.name,tokenType.close,toks))?openTags.push(token):(!bbcode||!bbcode.isSelfClosing)&&(token.type=tokenType.content);break;case tokenType.close:if(currentOpenTag()&&token.name!==currentOpenTag().name&&closesCurrentTag("/"+token.name)&&openTags.pop(),currentOpenTag()&&token.name===currentOpenTag().name)currentOpenTag().closing=token,openTags.pop();else if(hasTag(token.name,tokenType.open,openTags)){for(;curTok=openTags.pop();){if(curTok.name===token.name){curTok.closing=token;break}clone=curTok.clone(),cloned.length>1&&clone.children.push(last(cloned)),cloned.push(clone)}for(addTag(last(cloned)),i=cloned.length;i--;)openTags.push(cloned[i]);cloned.length=0}else token.type=tokenType.content,addTag(token);break;case tokenType.newline:currentOpenTag()&&next&&closesCurrentTag((next.type===tokenType.close?"/":"")+next.name)&&(next.type===tokenType.close&&next.name===currentOpenTag().name||(bbcode=get_bbcodes()[currentOpenTag().name],(bbcode&&bbcode.breakAfter||bbcode&&bbcode.isInline===!1&&breakAfterBlock&&bbcode.breakAfter!==!1)&&openTags.pop())),addTag(token);break;default:addTag(token);break}previous=token}return output},last=function(arr){return arr.length?arr[arr.length-1]:null},lower=function(str){return str.toLowerCase()},normaliseNewLines=function normaliseNewLines2(children2,parent,onlyRemoveBreakAfter){var token,left,right,parentBBCode,bbcode,removedBreakEnd,removedBreakBefore,remove,childrenLength=children2.length,i=childrenLength;for(parent&&(parentBBCode=get_bbcodes()[parent.name]);i--;)if(token=children2[i])if(token.type===tokenType.newline){if(left=i>0?children2[i-1]:null,right=i<childrenLength-1?children2[i+1]:null,remove=!1,!onlyRemoveBreakAfter&&parentBBCode&&parentBBCode.isSelfClosing!==!0&&(left?!removedBreakEnd&&!right&&(parentBBCode.isInline===!1&&breakEndBlock&&parentBBCode.breakEnd!==!1&&(remove=!0),parentBBCode.breakEnd&&(remove=!0),removedBreakEnd=remove):(parentBBCode.isInline===!1&&breakStartBlock&&parentBBCode.breakStart!==!1&&(remove=!0),parentBBCode.breakStart&&(remove=!0))),left&&left.type===tokenType.open&&(bbcode=get_bbcodes()[left.name])&&(onlyRemoveBreakAfter?bbcode.isInline===!1&&(remove=!0):(bbcode.isInline===!1&&breakAfterBlock&&bbcode.breakAfter!==!1&&(remove=!0),bbcode.breakAfter&&(remove=!0))),!onlyRemoveBreakAfter&&!removedBreakBefore&&right&&right.type===tokenType.open&&(bbcode=get_bbcodes()[right.name])&&(bbcode.isInline,bbcode.breakBefore&&(remove=!0),removedBreakBefore=remove,remove)){children2.splice(i,1);continue}remove&&children2.splice(i,1),removedBreakBefore=!1}else token.type===tokenType.open&&normaliseNewLines2(token.children,token,onlyRemoveBreakAfter)},convertToHTML=function convertToHTML2(tokens,isRoot){var token,bbcode,content,html,needsBlockWrap,blockWrapOpen,isInline,lastChild,ret=[];for(isInline=function(bbcode2){return(!bbcode2||(typeof bbcode2.isHtmlInline<"u"?bbcode2.isHtmlInline:bbcode2.isInline))!==!1};tokens.length>0;)if(token=tokens.shift()){if(token.type===tokenType.open)lastChild=token.children[token.children.length-1]||{},bbcode=get_bbcodes()[token.name],needsBlockWrap=isRoot&&isInline(bbcode),content=convertToHTML2(token.children,!1),bbcode&&bbcode.html?(!isInline(bbcode)&&isInline(get_bbcodes()[lastChild.name])&&!bbcode.isPreFormatted&&!bbcode.skipLastLineBreak&&(content+="<br />"),typeof bbcode.html=="function"?html=bbcode.html(token,token.attrs,content):html=formatString(bbcode.html,content)):html=token.val+content+(token.closing?token.closing.val:"");else if(token.type===tokenType.newline){if(isRoot&&blockWrapOpen==!1){ret.push("<br />");continue}!blockWrapOpen&&!isPreWrap&&(ret.push("<div>"),blockWrapOpen=!0),blockWrapOpen&&ret.push("</div>"),ret.push("\n"),blockWrapOpen=!1;continue}else needsBlockWrap=isRoot,html=escapeEntities(token.val);!needsBlockWrap&&blockWrapOpen&&(ret.push("</div>\n"),blockWrapOpen=!1),ret.push(html)}return blockWrapOpen&&ret.push("</div>\n"),ret.join("")},fixChildren=function fixChildren2(children2,parent){for(var token,args,i=children2.length;i--;)(token=children2[i])&&(isChildAllowed(parent,token)||(token.name=null,token.type=tokenType.content,isChildAllowed(parent,token)?(args=[i+1,0].concat(token.children),token.closing&&(token.closing.name=null,token.closing.type=tokenType.content,args.push(token.closing)),i+=args.length-1,Array.prototype.splice.apply(children2,args)):parent.children.splice(i,1)),token.type===tokenType.open&&fixChildren2(token.children,token))},removeEmpty=function removeEmpty2(tokens){var token,bbcode,isTokenWhiteSpace,i=tokens.length;for(isTokenWhiteSpace=function(children2){for(var j=children2.length;j--;)if(children2[j].type===tokenType.open||children2[j].type===tokenType.close||children2[j].type===tokenType.content&&children2[j].val&&/\S|\u00A0/.test(children2[j].val))return!1;return!0};i--;)!(token=tokens[i])||token.type!==tokenType.open||(bbcode=get_bbcodes()[token.name],removeEmpty2(token.children),isTokenWhiteSpace(token.children)&&bbcode&&!bbcode.isSelfClosing&&!bbcode.allowsEmpty&&tokens.splice.apply(tokens,[i,1].concat(token.children)))},fixNesting=function fixNesting2(children2,parents,insideInline,rootArr){var token,i,parent,parentIndex,parentParentChildren,right,isInline=function(token2){var bbcode=get_bbcodes()[token2.name];return!bbcode||bbcode.isInline!==!1};for(parents=parents||[],rootArr=rootArr||children2,i=0;i<children2.length;i++)if(!(!(token=children2[i])||token.type!==tokenType.open)){if(!isInline(token)&&insideInline&&(parent=last(parents),right=parent.splitAt(token),parentParentChildren=parents.length>1?parents[parents.length-2].children:rootArr,(parentIndex=parentParentChildren.indexOf(parent))>-1)){right.children.splice(right.children.indexOf(token),1),parentParentChildren.splice(parentIndex+1,0,token,right);return}parents.push(token),fixNesting2(token.children,parents,insideInline||isInline(token),rootArr),parents.pop(token)}},isChildAllowed=function(parent,child){var bbcode=parent?get_bbcodes()[parent.name]:null,allowedChildren=bbcode?bbcode.allowedChildren:null;return!fixInvalidChildren||!allowedChildren?!0:!(allowedChildren&&allowedChildren.indexOf(child.name||"#")<0)},get_bbcodes=function(){return{b:{tags:{b:null,strong:null},styles:{"font-weight":["bold","bolder","401","700","800","900"]},format:"[b]{0}[/b]",html:"<strong>{0}</strong>"},em:{tags:{i:null,em:null},styles:{"font-style":["italic","oblique"]},format:"[i]{0}[/i]",html:"<em>{0}</em>"},i:{tags:{i:null,em:null},styles:{"font-style":["italic","oblique"]},format:"[i]{0}[/i]",html:"<em>{0}</em>"},u:{tags:{u:null},styles:{"text-decoration":["underline"]},format:"[u]{0}[/u]",html:"<u>{0}</u>"},s:{tags:{s:null,strike:null},styles:{"text-decoration":["line-through"]},format:"[s]{0}[/s]",html:"<s>{0}</s>"},sub:{tags:{sub:null},format:"[sub]{0}[/sub]",html:"<sub>{0}</sub>"},sup:{tags:{sup:null},format:"[sup]{0}[/sup]",html:"<sup>{0}</sup>"},font:{tags:{font:{face:null}},styles:{"font-family":null},quoteType:QuoteType.never,format:function(element,content){var font;return(element[0].nodeName.toLowerCase()!=="font"||!(font=element.attr("face")))&&(font=element.css("font-family")),"[font="+stripQuotes(font)+"]"+content+"[/font]"},html:function(token,attrs,content){return'<font face="'+attrs.defaultattr+'">'+content+"</font>"}},h1:{tags:{h1:null},styles:{"font-size":null},format:"[h1]{0}[/h1]",html:function(token,attrs,content){return'<span style="font-size:2.2em">'+content+"</span>"}},h2:{tags:{h2:null},styles:{"font-size":null},format:"[h2]{0}[/h2]",html:function(token,attrs,content){return'<span style="font-size:1.7em">'+content+"</span>"}},h3:{tags:{h3:null},styles:{"font-size":null},format:"[h3]{0}[/h3]",html:function(token,attrs,content){return'<span style="font-size:1.17em">'+content+"</span>"}},h4:{tags:{h4:null},styles:{"font-size":null},format:"[h4]{0}[/h4]",html:function(token,attrs,content){return'<span style="font-size:1em">'+content+"</span>"}},size:{tags:{font:{size:null}},styles:{"font-size":null},format:function(element,content){var fontSize=element.attr("size"),size=1;return fontSize||(fontSize=element.css("fontSize")),fontSize.indexOf("px")>-1?(fontSize=fontSize.replace("px","")-0,fontSize>12&&(size=2),fontSize>15&&(size=3),fontSize>17&&(size=4),fontSize>23&&(size=5),fontSize>31&&(size=6),fontSize>47&&(size=7)):size=fontSize,"[size="+size+"]"+content+"[/size]"},html:function(token,attrs,content){return'<font size="'+attrs.defaultattr+'">'+content+"</font>"}},color:{tags:{font:{color:null}},styles:{color:null},quoteType:QuoteType.never,html:function(token,attrs,content){return'<font color="'+normaliseColour(attrs.defaultattr)+'">'+content+"</font>"}},highlight:{tags:{font:{color:null}},styles:{color:null},quoteType:QuoteType.never,html:function(token,attrs,content){return'<span style="background:'+normaliseColour(attrs.defaultattr)+'">'+content+"</span>"}},ul:{tags:{ul:null},breakStart:!0,isInline:!1,skipLastLineBreak:!0,html:"<ul>{0}</ul>"},ml:{tags:{ml:null},html:""},list:{breakStart:!0,isInline:!1,skipLastLineBreak:!0,html:function(token,attrs,content){var map_label_to_style={1:"decimal",a:"lower-alpha",A:"upper-alpha",i:"lower-roman",I:"upper-roman"};if(attrs.defaultattr!=null&&map_label_to_style[attrs.defaultattr]!=null){var value=map_label_to_style[attrs.defaultattr];return'<ol style="list-style-type:'+value+'">'+content+"</ol>"}return"<ul>"+content+"</ul>"}},ol:{tags:{ol:null},breakStart:!0,isInline:!1,skipLastLineBreak:!0,html:function(token,attrs,content){if(typeof attrs.data<"u"){var index=Number(attrs.data);return'<ol style="list-style-type:'+listStyle(index)+';">'+content+"</ol>"}else return"<ol>"+content+"</ol>"}},li:{tags:{li:null},isInline:!1,closedBy:["/ul","/ol","/list","*","li"],html:function(token,attrs,content){return typeof attrs.align<"u"?'<li style="text-align:'+attrs.align+';">'+content+"</li>":"<li>"+content+"</li>"}},"*":{isInline:!1,closedBy:["/ul","/ol","/list","*","li"],html:"<li>{0}</li>"},table:{tags:{table:null},isInline:!1,isHtmlInline:!0,skipLastLineBreak:!0,html:"<table>{0}</table>"},tr:{tags:{tr:null},isInline:!1,skipLastLineBreak:!0,html:"<tr>{0}</tr>"},th:{tags:{th:null},allowsEmpty:!0,isInline:!1,html:"<th>{0}</th>"},td:{tags:{td:null},allowsEmpty:!0,isInline:!1,html:"<td>{0}</td>"},emoticon:{allowsEmpty:!0,tags:{img:{src:null,"data-sceditor-emoticon":null}},html:"{0}"},hr:{tags:{hr:null},allowsEmpty:!0,isSelfClosing:!0,isInline:!1,html:"<hr />"},img:{allowsEmpty:!0,tags:{img:{src:null}},quoteType:QuoteType.never,html:function(token,attrs,content){var parts,attribs="";return typeof attrs.width<"u"&&(attribs+=' width="'+attrs.width+'"'),typeof attrs.height<"u"&&(attribs+=' height="'+attrs.height+'"'),attrs.defaultattr&&(parts=attrs.defaultattr.split(/x/i),attribs=' width="'+parts[0]+'" height="'+(parts.length===2?parts[1]:parts[0])+'"'),attrs.alt&&(attribs+=' alt="'+attrs.alt+'"'),typeof window>"u"&&content.indexOf("http:")===-1&&content.indexOf("https:")===-1&&(content="http:"+content),"<img"+attribs+' src="'+content+'" />'}},link:{allowsEmpty:!0,tags:{a:{href:null}},quoteType:QuoteType.never,html:function(token,attrs,content){return'<a href="'+encodeURI(attrs.defaultattr||content)+'" target="_blank">'+content+"</a>"}},url:{allowsEmpty:!0,tags:{a:{href:null}},quoteType:QuoteType.never,html:function(token,attrs,content){var target,r;return typeof attrs.target>"u"?target="_blank":target=attrs.target,r='<a href="'+(attrs.defaultattr||content)+'" target='+target,typeof attrs.nofollow<"u"&&(r=r+' rel="nofollow"'),r=r+">"+content+"</a>",r}},email:{quoteType:QuoteType.never,html:function(token,attrs,content){return'<a href="mailto:'+(attrs.defaultattr||content)+'" target = "_blank">'+content+"</a>"}},quote:{tags:{blockquote:null},isInline:!1,quoteType:QuoteType.never,html:function(token,attrs,content){return attrs.defaultattr&&(content='<cite style="border-left: 4px solid #ccc;margin-bottom: 5px;margin-top: 5px;padding-left: 16px;">'+attrs.defaultattr+"</cite>"+content),'<blockquote style="border-left: 4px solid #ccc;margin-bottom: 5px;margin-top: 5px;padding-left: 16px;">'+content+"</blockquote>"}},indent:{tags:{indent:null},isInline:!0,html:function(token,attrs,content){var indent="<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>";if(typeof attrs.data<"u"){for(var indent_num=Number(attrs.data),all_indents="",tracker=1;tracker<=indent_num;)all_indents+=indent,tracker+=1;return all_indents+content}else return content}},code:{tags:{code:null},isInline:!1,allowedChildren:["#","#newline"],html:"<code>{0}</code>"},left:{styles:{"text-align":["left","-webkit-left","-moz-left","-khtml-left"]},isInline:!1,html:'<div align="left">{0}</div>'},center:{styles:{"text-align":["center","-webkit-center","-moz-center","-khtml-center"]},isInline:!1,html:'<div align="center">{0}</div>'},right:{styles:{"text-align":["right","-webkit-right","-moz-right","-khtml-right"]},isInline:!1,html:'<div align="right">{0}</div>'},justify:{styles:{"text-align":["justify","-webkit-justify","-moz-justify","-khtml-justify"]},isInline:!1,html:'<div align="justify" '+(isPreWrap?'style="white-space: pre-line"':"")+">{0}</div>"},youtube:{allowsEmpty:!0,tags:{iframe:{"data-youtube-id":null}},html:'<iframe width="560" height="315" src="//www.youtube.com/embed/{0}?wmode=opaque" data-youtube-id="{0}" frameborder="0" allowfullscreen></iframe>'},video:{allowsEmpty:!0,html:'<iframe width="560" height="315" src="{0}" frameborder="0" allowfullscreen></iframe>'},rtl:{styles:{direction:["rtl"]},html:'<div style="direction: rtl">{0}</div>'},ltr:{styles:{direction:["ltr"]},html:'<div style="direction: ltr">{0}</div>'},fa:{quoteType:QuoteType.never,html:function(token,attrs,content){return'<div class="fa fa-'+(attrs.defaultattr||content)+'"></div>'}},ignore:{}}},toHTML=function(str,preserveNewLines){return convertToHTML(parse(str,preserveNewLines),!0)},fromBB_to_HTML=toHTML;exports.fromBB_to_HTML=function(str,is_pre_wrap){return isPreWrap=is_pre_wrap,fromBB_to_HTML(str,!0)};var PROBABLE_TAG_REGEX=/\[\/([^\]]{1,20})\]/;exports.probably_has_bbcode=function(str){return!!str.match(PROBABLE_TAG_REGEX)}}});var require_workflow=__commonJS({"lib-browser-old/constants/workflow.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.KEY_CODE_TO_CHAR=exports.ERROR_SOURCES=exports.ERROR_CATCHER_TYPES=exports.DEFAULT_CATCHER_TYPE=exports.CAUGHT_ERROR_SOURCES=void 0;var _safe_require=_interopRequireDefault(require_safe_require());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_safe_require.default.safe_register("./constants/workflow",exports);var ERROR_SOURCES=function(ERROR_SOURCES2){return ERROR_SOURCES2.GENERAL_WORKFLOW="general_workflow",ERROR_SOURCES2.ELEMENT_WORKFLOW="element_workflow",ERROR_SOURCES2.ELEMENT="element",ERROR_SOURCES2}({});exports.ERROR_SOURCES=ERROR_SOURCES;var ERROR_CATCHER_TYPES=function(ERROR_CATCHER_TYPES2){return ERROR_CATCHER_TYPES2.all_wf_errors="Any workflow error",ERROR_CATCHER_TYPES2.element_wf_errors="Element workflow errors only",ERROR_CATCHER_TYPES2}({});exports.ERROR_CATCHER_TYPES=ERROR_CATCHER_TYPES;var DEFAULT_CATCHER_TYPE="element_wf_errors";exports.DEFAULT_CATCHER_TYPE=DEFAULT_CATCHER_TYPE;var CAUGHT_ERROR_SOURCES={all_wf_errors:[ERROR_SOURCES.GENERAL_WORKFLOW,ERROR_SOURCES.ELEMENT_WORKFLOW,ERROR_SOURCES.ELEMENT],element_wf_errors:[ERROR_SOURCES.ELEMENT_WORKFLOW,ERROR_SOURCES.ELEMENT]};exports.CAUGHT_ERROR_SOURCES=CAUGHT_ERROR_SOURCES;var KEY_CODE_TO_CHAR={KeyA:"A",KeyB:"B",KeyC:"C",KeyD:"D",KeyE:"E",KeyF:"F",KeyG:"G",KeyH:"H",KeyI:"I",KeyJ:"J",KeyK:"K",KeyL:"L",KeyM:"M",KeyN:"N",KeyO:"O",KeyP:"P",KeyQ:"Q",KeyR:"R",KeyS:"S",KeyT:"T",KeyU:"U",KeyV:"V",KeyW:"W",KeyX:"X",KeyY:"Y",KeyZ:"Z",Backspace:"Backspace",Tab:"Tab",BracketLeft:"[",BracketRight:"]",Backslash:"\\",Semicolon:";",Quote:"'",Comma:",",Period:".",Slash:"/",Space:"Spacebar",Backquote:"`",Minus:"-",Equal:"=",CapsLock:"Caps Lock",ArrowDown:"Down Arrow",ArrowUp:"Up Arrow",ArrowLeft:"Left Arrow",ArrowRight:"Right Arrow",Enter:"Enter",Escape:"Esc",F1:"F1",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",F10:"F10",F12:"F12",PageUp:"PageUp",PageDown:"PageDown",Delete:"Delete",NumpadAdd:"+",NumpadEnter:"Enter",Numpad1:"1(Numpad)",Numpad2:"2(Numpad)",Numpad3:"3(Numpad)",Numpad4:"4(Numpad)",Numpad5:"5(Numpad)",Numpad6:"6(Numpad)",Numpad7:"7(Numpad)",Numpad8:"8(Numpad)",Numpad9:"9(Numpad)",Numpad0:"0(Numpad)",NumpadDecimal:".(Numpad)",NumpadDivide:"/(Numpad)",NumpadMultiply:"*(Numpad)",NumpadSubtract:"-"};exports.KEY_CODE_TO_CHAR=KEY_CODE_TO_CHAR}});var require_basePropertyOf=__commonJS({"node_modules/lodash/_basePropertyOf.js"(exports,module){init_define_process_env();init_shim();function basePropertyOf(object2){return function(key){return object2==null?void 0:object2[key]}}module.exports=basePropertyOf}});var require_escapeHtmlChar=__commonJS({"node_modules/lodash/_escapeHtmlChar.js"(exports,module){init_define_process_env();init_shim();var basePropertyOf=require_basePropertyOf(),htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},escapeHtmlChar=basePropertyOf(htmlEscapes);module.exports=escapeHtmlChar}});var require_freeGlobal=__commonJS({"node_modules/lodash/_freeGlobal.js"(exports,module){init_define_process_env();init_shim();var freeGlobal=typeof window=="object"&&window&&window.Object===Object&&window;module.exports=freeGlobal}});var require_root=__commonJS({"node_modules/lodash/_root.js"(exports,module){init_define_process_env();init_shim();var freeGlobal=require_freeGlobal(),freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")();module.exports=root}});var require_Symbol=__commonJS({"node_modules/lodash/_Symbol.js"(exports,module){init_define_process_env();init_shim();var root=require_root(),Symbol2=root.Symbol;module.exports=Symbol2}});var require_arrayMap=__commonJS({"node_modules/lodash/_arrayMap.js"(exports,module){init_define_process_env();init_shim();function arrayMap(array,iteratee){for(var index=-1,length=array==null?0:array.length,result=Array(length);++index<length;)result[index]=iteratee(array[index],index,array);return result}module.exports=arrayMap}});var require_isArray=__commonJS({"node_modules/lodash/isArray.js"(exports,module){init_define_process_env();init_shim();var isArray=Array.isArray;module.exports=isArray}});var require_getRawTag=__commonJS({"node_modules/lodash/_getRawTag.js"(exports,module){init_define_process_env();init_shim();var Symbol2=require_Symbol(),objectProto=Object.prototype,hasOwnProperty2=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=Symbol2?Symbol2.toStringTag:void 0;function getRawTag(value){var isOwn=hasOwnProperty2.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=void 0;var unmasked=!0}catch(e){}var result=nativeObjectToString.call(value);return unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]),result}module.exports=getRawTag}});var require_objectToString=__commonJS({"node_modules/lodash/_objectToString.js"(exports,module){init_define_process_env();init_shim();var objectProto=Object.prototype,nativeObjectToString=objectProto.toString;function objectToString(value){return nativeObjectToString.call(value)}module.exports=objectToString}});var require_baseGetTag=__commonJS({"node_modules/lodash/_baseGetTag.js"(exports,module){init_define_process_env();init_shim();var Symbol2=require_Symbol(),getRawTag=require_getRawTag(),objectToString=require_objectToString(),nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol2?Symbol2.toStringTag:void 0;function baseGetTag(value){return value==null?value===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}module.exports=baseGetTag}});var require_isObjectLike=__commonJS({"node_modules/lodash/isObjectLike.js"(exports,module){init_define_process_env();init_shim();function isObjectLike(value){return value!=null&&typeof value=="object"}module.exports=isObjectLike}});var require_isSymbol=__commonJS({"node_modules/lodash/isSymbol.js"(exports,module){init_define_process_env();init_shim();var baseGetTag=require_baseGetTag(),isObjectLike=require_isObjectLike(),symbolTag="[object Symbol]";function isSymbol(value){return typeof value=="symbol"||isObjectLike(value)&&baseGetTag(value)==symbolTag}module.exports=isSymbol}});var require_baseToString=__commonJS({"node_modules/lodash/_baseToString.js"(exports,module){init_define_process_env();init_shim();var Symbol2=require_Symbol(),arrayMap=require_arrayMap(),isArray=require_isArray(),isSymbol=require_isSymbol(),INFINITY=1/0,symbolProto=Symbol2?Symbol2.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;function baseToString(value){if(typeof value=="string")return value;if(isArray(value))return arrayMap(value,baseToString)+"";if(isSymbol(value))return symbolToString?symbolToString.call(value):"";var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}module.exports=baseToString}});var require_toString=__commonJS({"node_modules/lodash/toString.js"(exports,module){init_define_process_env();init_shim();var baseToString=require_baseToString();function toString(value){return value==null?"":baseToString(value)}module.exports=toString}});var require_escape=__commonJS({"node_modules/lodash/escape.js"(exports,module){init_define_process_env();init_shim();var escapeHtmlChar=require_escapeHtmlChar(),toString=require_toString(),reUnescapedHtml=/[&<>"']/g,reHasUnescapedHtml=RegExp(reUnescapedHtml.source);function escape3(string){return string=toString(string),string&&reHasUnescapedHtml.test(string)?string.replace(reUnescapedHtml,escapeHtmlChar):string}module.exports=escape3}});var require_unescapeHtmlChar=__commonJS({"node_modules/lodash/_unescapeHtmlChar.js"(exports,module){init_define_process_env();init_shim();var basePropertyOf=require_basePropertyOf(),htmlUnescapes={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},unescapeHtmlChar=basePropertyOf(htmlUnescapes);module.exports=unescapeHtmlChar}});var require_unescape=__commonJS({"node_modules/lodash/unescape.js"(exports,module){init_define_process_env();init_shim();var toString=require_toString(),unescapeHtmlChar=require_unescapeHtmlChar(),reEscapedHtml=/&(?:amp|lt|gt|quot|#39);/g,reHasEscapedHtml=RegExp(reEscapedHtml.source);function unescape2(string){return string=toString(string),string&&reHasEscapedHtml.test(string)?string.replace(reEscapedHtml,unescapeHtmlChar):string}module.exports=unescape2}});var require_b_ui=__commonJS({"lib-browser-old/u/client/b_ui.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.all_transition_names=void 0;exports.apply_css_fallbacks=apply_css_fallbacks;exports.apply_scale=apply_scale;exports.are_animations_running=are_animations_running;exports.bbcode_to_html=bbcode_to_html;exports.build_key_combo_string=build_key_combo_string;exports.console_with_styling=console_with_styling;exports.create_style_sheet=create_style_sheet;exports.custom_transitions=void 0;exports.delay=delay;exports.did_event_pass_through=did_event_pass_through;exports.escape=exports.div=void 0;exports.get_element=get_element;exports.has_bbcode=has_bbcode;exports.highlight_dom_changes=highlight_dom_changes;exports.img=img;exports.input=input;exports.isScrolledIntoView=isScrolledIntoView;exports.is_attached=is_attached;exports.is_fixed=is_fixed;exports.make_key_combo_listener=make_key_combo_listener;exports.make_numeric=make_numeric;exports.make_zindex=make_zindex;exports.meta=meta;exports.pre_json=exports.page_loaded_key=exports.page_is_loaded=void 0;exports.real_inner_width=real_inner_width;exports.real_inner_width_slow=real_inner_width_slow;exports.real_inner_width_superfast=real_inner_width_superfast;exports.remove_global_cursor=remove_global_cursor;exports.revealInScreen=revealInScreen;exports.scroll_freeze=scroll_freeze;exports.scroll_unfreeze=scroll_unfreeze;exports.set_global_cursor=set_global_cursor;exports.span=void 0;exports.text=text;exports.textarea=textarea;exports.toggle=toggle;exports.trigger_blur=trigger_blur;exports.unescape=void 0;exports.velocity=velocity;require_es_array_includes();require_es_string_includes();require_es_regexp_exec();require_es_string_replace();require_es_array_iterator();require_web_dom_collections_iterator();require_es_parse_float();require_es_regexp_test();var b_async=_interopRequireWildcard(require_b_async3()),_bbcodeparser=_interopRequireDefault(require_bbcodeparser()),_customVelocityAnimations=_interopRequireDefault(require_customVelocityAnimations()),errors=_interopRequireWildcard(require_errors()),mode_check=_interopRequireWildcard(require_mode_check()),uuid=_interopRequireWildcard(require_uuid()),b_window=_interopRequireWildcard(require_b_window()),workflow_consts=_interopRequireWildcard(require_workflow()),_escape=_interopRequireDefault(require_escape()),_unescape=_interopRequireDefault(require_unescape());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var _highlight_dom_changes=!1;function highlight_dom_changes(){_highlight_dom_changes=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0}typeof window<"u"&&(window.highlight_dom_changes=highlight_dom_changes);var div=(classes,appendTo,text2,styles)=>make_html("div",classes,appendTo,text2,styles);exports.div=div;var pre_json=(classes,appendTo,text2,styles)=>make_html("pre",classes,appendTo,text2,styles);exports.pre_json=pre_json;var span=(classes,appendTo,text2,styles)=>make_html("span",classes,appendTo,text2,styles);exports.span=span;function input(classes,appendTo,type,placeholder,styles){let input_div=make_html("input",classes,appendTo,"",styles);return input_div.attr("type",type),input_div.attr("placeholder",placeholder),(mode_check.is_edit_mode()||mode_check.is_plugin_edit_mode())&&(input_div.attr("autocomplete","new-password"),input_div.attr("name",uuid.LUID())),input_div}function textarea(classes,appendTo,name,placeholder,styles){let input_div=make_html("textarea",classes,appendTo,"",styles);return input_div.attr("name",name),input_div.attr("placeholder",placeholder),input_div}function includes(arr,el){return arr.includes(el)}function text(tag,appendTo,text2,classes){if(includes(["h1","h2","h3","h4","h5"],tag))return make_html(tag,classes,appendTo,text2);let text_class=tag;return classes&&(classes=classes+" "+(text_class!=null?text_class:"")),make_html("p",classes,appendTo,text2)}function img(classes,appendTo,src,styles){let img_div=make_html("img",classes,appendTo,void 0,styles);return src&&(img_div[0].src=src),img_div}function toggle(classes,appendTo){let label_element=make_html("label",classes,appendTo);return input("toggle-input",label_element,"checkbox"),span("slider",label_element),label_element}function make_html(elementType,classes,appendTo,text2,styles){(classes==null||classes==="")&&(classes=[]),Array.isArray(classes)||(classes=[classes]),classes=classes.map(c=>c.replace(".",""));let domElement=$("<"+elementType+"></"+elementType+">");for(let cls of classes)cls&&domElement.addClass(cls.toLowerCase());return typeof styles=="object"&&domElement.css(styles),_highlight_dom_changes&&(domElement[0].classList.add("highlight-dom-changes"),domElement.one("animationend",()=>{domElement[0].classList.remove("highlight-dom-changes")})),appendTo&&appendTo.append(domElement),text2!=null&&domElement.text(text2),domElement}function apply_scale(div2,scale){let t="scale(".concat(scale,",").concat(scale,")"),o="0 0";div2.css({transform:t,"-ms-transform":t,"-webkit-transform":t,"-o-transform":t,"-moz-transform":t,"tranform-origin":o,"-ms-transform-origin":o,"-webkit-transform-origin":o,"-o-transform-origin":o,"-moz-transform-origin":o})}function apply_css_fallbacks(property,values){var _values$find;return typeof CSS>"u"||typeof CSS.supports!="function"?values[values.length-1]:(_values$find=values.find(value=>typeof value!="string"||CSS.supports(property,value)))!=null?_values$find:values[values.length-1]}function is_fixed(div2){let parent=div2;for(;parent.length&&!parent.is("body");){if(parent.css("position")==="fixed")return!0;parent=parent.parent()}return!1}function is_attached(div2){return div2.closest("html").length>0}function did_event_pass_through(event,selector_or_fn){var _event$target;if(event.currentTarget===null)return!1;let test;typeof selector_or_fn=="string"?test=div2=>div2.is(selector_or_fn):test=selector_or_fn;let targ=$((_event$target=event.target)!=null?_event$target:void 0);for(;targ[0]!=null&&targ[0]!==event.currentTarget;){if(test(targ))return!0;targ=targ.parent()}return!1}function trigger_blur(canvas){var _window$BrowserDetect,_window$BrowserDetect2;if(((_window$BrowserDetect=window.BrowserDetect)==null?void 0:_window$BrowserDetect.OS)==="iPhone/iPod"&&((_window$BrowserDetect2=window.BrowserDetect)==null?void 0:_window$BrowserDetect2.browser)==="Safari"){canvas.blur();return}let temp_input=$('<input class="fake-input"></input>');b_window.is_on_mobile_or_tablet()&&temp_input.attr("readonly","true"),temp_input.css({top:$(window).scrollTop()+5,left:10,position:"absolute",overflow:"hidden",width:0,"font-size":"40px"}),$("body").append(temp_input),temp_input.focus(),temp_input.blur(),temp_input.remove()}var velocity_animation_running=!1,showed_velocity_warning=!1;function velocity(div2,animation,options){if(!div2||!div2.length){var _options$complete_cb;(_options$complete_cb=options.complete_cb)==null||_options$complete_cb.call(options);return}if(div2.velocity==null){showed_velocity_warning||(showed_velocity_warning=!0,window.alert("Some code is overwriting jQuery which prevents your app from working normally. Please check your application in the editor and make sure you are not requiring a version of jQuery in the page/app headers or in a plugin. \n\nYou can use Bubble safe mode to test your application (hover on PREVIEW)."));return}if(options.complete)throw new errors.UnexpectedError("b_ui.velocity called with complete, it should be complete_cb not to be overwritten");if(typeof options!="object")throw new errors.UnexpectedError("b_ui.velocity called with options not being an object, will break ".concat(String(options)));return $.fx.off&&(options.duration=0),options.complete=function(){var _options$complete_cb2;(_options$complete_cb2=options.complete_cb)==null||_options$complete_cb2.call(options),velocity_animation_running=!1},velocity_animation_running=!0,div2.velocity(animation,options)}function are_animations_running(){return velocity_animation_running}function delay(div2,time){div2.css("fake_css_nonsense",100),velocity(div2,{fake_css_nonsense:0},{duration:time})}var _cursor_styler;function set_global_cursor(cursor){_cursor_styler||(_cursor_styler=$("<style></style>")),_cursor_styler.text("* { cursor: ".concat(cursor," !important; }")),$(document.head).append(_cursor_styler)}function remove_global_cursor(){var _cursor_styler2;(_cursor_styler2=_cursor_styler)==null||_cursor_styler2.remove()}function meta(e){return e.metaKey||e.ctrlKey}var escape3=_escape.default;exports.escape=escape3;var unescape2=_unescape.default;exports.unescape=unescape2;function bbcode_to_html(text2,is_pre_wrap){var _text,_is_pre_wrap;(_text=text2)!=null||(text2=""),(_is_pre_wrap=is_pre_wrap)!=null||(is_pre_wrap=!1);let html_before_parsing=text2;return html_before_parsing=html_before_parsing.replace(/&#x2F;/g,"/"),_bbcodeparser.default.fromBB_to_HTML(html_before_parsing,is_pre_wrap)}function has_bbcode(text2){var _text2;return(_text2=text2)!=null||(text2=""),_bbcodeparser.default.probably_has_bbcode(text2)}var _old_scroll;function scroll_freeze(){_old_scroll=$(document).scrollTop()}function scroll_unfreeze(){$(document).scrollTop(_old_scroll)}function isScrolledIntoView(elem,parent_class){var _parent_class;let docViewBottom,docViewTop,parent_div;if((_parent_class=parent_class)!=null||(parent_class=window),elem.length===0)return{status:!0};parent_class===window||!elem.parents(parent_class+":visible").length?(parent_div=$(window),docViewTop=$(parent_div).scrollTop(),docViewBottom=docViewTop+parent_div.height()-30):(parent_div=elem.parents(parent_class+":visible"),docViewTop=Math.max(parent_div.offset().top,$(window).scrollTop()),docViewBottom=Math.min(docViewTop+parent_div.height(),$(window).scrollTop()+$(window).height()-40));let elemTop=$(elem).offset().top,elemBottom=elemTop+$(elem).height();return elemBottom<=docViewBottom&&elemTop>=docViewTop?{status:!0}:{status:!1,side:elemBottom>docViewBottom?"bottom":"top"}}function revealInScreen(element,parent_class,top){var _parent_class2;if((_parent_class2=parent_class)!=null||(parent_class=window),!(element==null||!element.length||element==="destroyed")){if(top==null){var _element$offset,_element$offset$call;if(top=(_element$offset=element.offset)==null||(_element$offset$call=_element$offset.call(element))==null?void 0:_element$offset$call.top,top==null)return;if(parent_class!==window){let parent_element=$(parent_class+":visible");top=top+parent_element.scrollTop()-parent_element.offset().top}}if(!isScrolledIntoView(element,parent_class).status)try{parent_class!==window?$(parent_class+":visible").scrollTop(top-20):$(document).scrollTop(top-100)}catch(error){}}}function make_zindex(div2){let min_z=20,t=div2;for(;t.length>0&&t[0]!==document;){let test_z=parseFloat(t.css("z-index"));isNaN(test_z)&&(test_z=0),test_z>min_z&&(min_z=test_z),t=t.parent()}return min_z+1}function real_inner_width_slow(canvas){if(canvas==="destroyed")return;let measure=div("measure",canvas),width=measure.width();return measure.remove(),width===0?canvas.width()===100&&canvas.css("width")==="100%"?void 0:canvas.width():width}function real_inner_width(canvas){if(canvas==="destroyed")return;let client_width=canvas[0].clientWidth;if(client_width===0)return canvas.innerWidth();let is_overflowing=canvas[0].scrollHeight>canvas[0].clientHeight,{overflowY}=window.getComputedStyle(canvas[0]);if(overflowY==="scroll"||is_overflowing&&overflowY==="auto")return client_width;let{width}=canvas[0].getBoundingClientRect(),{borderRightWidth,borderLeftWidth,paddingLeft,paddingRight}=window.getComputedStyle(canvas[0]),total_border_width=parseFloat(borderRightWidth)+parseFloat(borderLeftWidth),total_padding=parseFloat(paddingLeft)+parseFloat(paddingRight);return width-total_border_width-total_padding}function real_inner_width_superfast(canvas){if(canvas==="destroyed")return;let width=canvas[0].clientWidth;return width>0?width:Math.round(canvas.innerWidth())}function create_style_sheet(content){let style2=document.createElement("style");style2.type="text/css",style2.innerHTML=content,document.getElementsByTagName("head")[0].appendChild(style2)}function make_numeric(input2,integer_only){input2.keydown(evt=>{let denied;(evt.keyCode>=65&&evt.keyCode<=90||[186,191,219,220,221,222,187].includes(evt.keyCode))&&!evt.ctrlKey&&!evt.altKey&&!evt.metaKey&&(denied=!0),integer_only&&evt.keyCode===190&&(denied=!0),denied&&evt.preventDefault()})}function console_with_styling(msg){console.log(""),console.log("%c"+msg,["background: #0205D3","color: white","display: block","text-align: center","font-weight: bold","padding: 7px","border-radius: 2px"].join(";")),console.log("")}function key_is_modifier(key){return key==="Shift"||key==="Alt"||key==="Meta"||key==="Control"}function build_key_combo_string(evt){let keyboard_combo=[];evt.ctrlKey&&keyboard_combo.push("Ctrl"),evt.metaKey&&keyboard_combo.push("Meta"),evt.shiftKey&&keyboard_combo.push("Shift"),evt.altKey&&keyboard_combo.push("Alt");let regex_tester=char=>/^([a-z0-9A-Z\\\][';/.,`]{1}$)/.test(char);key_is_modifier(evt.key)||(regex_tester(evt.key)?keyboard_combo.push(evt.key):workflow_consts.KEY_CODE_TO_CHAR[evt.key]?keyboard_combo.push(workflow_consts.KEY_CODE_TO_CHAR[evt.key]):workflow_consts.KEY_CODE_TO_CHAR[evt.code]?keyboard_combo.push(workflow_consts.KEY_CODE_TO_CHAR[evt.code]):regex_tester(String.fromCharCode(evt.keyCode))&&evt.key!=="Dead"&&keyboard_combo.push(String.fromCharCode(evt.keyCode)));let keyboard_comb_str="";for(let i=0;i<keyboard_combo.length;i++){let key=keyboard_combo[i];if(key==="Meta"){var _window,_window$BrowserDetect3;((_window=window)==null||(_window$BrowserDetect3=_window.BrowserDetect)==null?void 0:_window$BrowserDetect3.OS)==="Windows"?key="WindowsKey":key="Command"}else if(key==="Alt"){var _window2,_window2$BrowserDetec;((_window2=window)==null||(_window2$BrowserDetec=_window2.BrowserDetect)==null?void 0:_window2$BrowserDetec.OS)==="Windows"?key="Alt":key="Option"}i>0?keyboard_comb_str+="+"+key:keyboard_comb_str+=key}return keyboard_comb_str}function make_key_combo_listener(input2){let key_listener=evt=>{evt.stopPropagation(),evt.preventDefault(),input2.val(build_key_combo_string(evt)),input2.on("blur",()=>input2.trigger("change"))};input2[0].addEventListener("keydown",key_listener)}function get_element(div2){if(typeof div2=="string"&&(div2=$(div2)),mode_check.is_edit_mode()){div2.hasClass("inner-element")||(div2=div2.parents(".inner-element").first());let id=div2.attr("id");return id?window.appquery.element(id):"not found -- should be a div with the inner-element class"}else{var _div$0$bubble_data$bu,_div$,_div$$bubble_data;return div2.hasClass("bubble-element")||(div2=div2.parents(".bubble-element").first()),(_div$0$bubble_data$bu=(_div$=div2[0])==null||(_div$$bubble_data=_div$.bubble_data)==null?void 0:_div$$bubble_data.bubble_instance)!=null?_div$0$bubble_data$bu:"not found -- should be a div with the bubble-element class"}}var custom_transitions=_customVelocityAnimations.default.customTransitions;exports.custom_transitions=custom_transitions;var all_transition_names=_customVelocityAnimations.default.allTransitionNames;exports.all_transition_names=all_transition_names;var page_loaded_key;exports.page_loaded_key=page_loaded_key;var page_is_loaded;exports.page_is_loaded=page_is_loaded;if(typeof window<"u"){let key=exports.page_loaded_key=page_loaded_key=b_async.MakeKey(void 0,"b_ui.page_loaded_key"),initial_date=Date.now();exports.page_is_loaded=page_is_loaded=function(){key.turn(),$(document.body).append(div("page-is-loaded")),console.log("page is loaded after ".concat((Date.now()-initial_date)/1e3," seconds"))}}}});var require_events=__commonJS({"node_modules/events/events.js"(exports,module){init_define_process_env();init_shim();function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}module.exports=EventEmitter;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=void 0;EventEmitter.prototype._maxListeners=void 0;EventEmitter.defaultMaxListeners=10;EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");return this._maxListeners=n,this};EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(this._events||(this._events={}),type==="error"&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(er=arguments[1],er instanceof Error)throw er;var err=new Error('Uncaught, unspecified "error" event. ('+er+")");throw err.context=er,err}if(handler=this._events[type],isUndefined(handler))return!1;if(isFunction(handler))switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:args=Array.prototype.slice.call(arguments,1),handler.apply(this,args)}else if(isObject(handler))for(args=Array.prototype.slice.call(arguments,1),listeners=handler.slice(),len=listeners.length,i=0;i<len;i++)listeners[i].apply(this,args);return!0};EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener),this._events[type]?isObject(this._events[type])?this._events[type].push(listener):this._events[type]=[this._events[type],listener]:this._events[type]=listener,isObject(this._events[type])&&!this._events[type].warned&&(isUndefined(this._maxListeners)?m=EventEmitter.defaultMaxListeners:m=this._maxListeners,m&&m>0&&this._events[type].length>m&&(this._events[type].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[type].length),typeof console.trace=="function"&&console.trace())),this};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.once=function(type,listener){if(!isFunction(listener))throw TypeError("listener must be a function");var fired=!1;function g(){this.removeListener(type,g),fired||(fired=!0,listener.apply(this,arguments))}return g.listener=listener,this.on(type,g),this};EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;if(list=this._events[type],length=list.length,position=-1,list===listener||isFunction(list.listener)&&list.listener===listener)delete this._events[type],this._events.removeListener&&this.emit("removeListener",type,listener);else if(isObject(list)){for(i=length;i-- >0;)if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}if(position<0)return this;list.length===1?(list.length=0,delete this._events[type]):list.splice(position,1),this._events.removeListener&&this.emit("removeListener",type,listener)}return this};EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[type]&&delete this._events[type],this;if(arguments.length===0){for(key in this._events)key!=="removeListener"&&this.removeAllListeners(key);return this.removeAllListeners("removeListener"),this._events={},this}if(listeners=this._events[type],isFunction(listeners))this.removeListener(type,listeners);else if(listeners)for(;listeners.length;)this.removeListener(type,listeners[listeners.length-1]);return delete this._events[type],this};EventEmitter.prototype.listeners=function(type){var ret;return!this._events||!this._events[type]?ret=[]:isFunction(this._events[type])?ret=[this._events[type]]:ret=this._events[type].slice(),ret};EventEmitter.prototype.listenerCount=function(type){if(this._events){var evlistener=this._events[type];if(isFunction(evlistener))return 1;if(evlistener)return evlistener.length}return 0};EventEmitter.listenerCount=function(emitter,type){return emitter.listenerCount(type)};function isFunction(arg){return typeof arg=="function"}function isNumber(arg){return typeof arg=="number"}function isObject(arg){return typeof arg=="object"&&arg!==null}function isUndefined(arg){return arg===void 0}}});var require_b_ui_editor=__commonJS({"lib-browser-old/u/editor_all/b_ui_editor.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_json_stringify();var b_array=require_b_array(),b_ui=require_b_ui(),events=require_events(),mode_check=require_mode_check(),b_window=require_b_window(),b_ui_editor=exports,last_vimeo_handler=null;b_ui_editor.add_finish_cb_to_vimeo=function(video_zone,id,cb){var _window$removeEventLi,_window,_window$detachEvent,_window2;let onMessageReceived,post=(action,value)=>{let data={method:action};value&&(data.value=value),$(video_zone.find("iframe"))[0].contentWindow.postMessage(JSON.stringify(data),"https://player.vimeo.com/video/"+id)};(_window$removeEventLi=(_window=window).removeEventListener)==null||_window$removeEventLi.call(_window,"message",last_vimeo_handler),(_window$detachEvent=(_window2=window).detachEvent)==null||_window$detachEvent.call(_window2,"onmessage",last_vimeo_handler),last_vimeo_handler=onMessageReceived=e=>{var _e;if((_e=e)!=null&&_e.data)try{let data=JSON.parse(e.data);data.event==="finish"&&cb(),data.event==="ready"&&post("addEventListener","finish")}catch(error){e=error}},window.addEventListener?window.addEventListener("message",onMessageReceived,!1):window.attachEvent("onmessage",onMessageReceived,!1)}}});var require_domain_parser=__commonJS({"lib-browser-old/u/shared/domain_parser.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();var tld,domain_parser=exports,b_string=require_b_string(),mode_check=require_mode_check();domain_parser.get_domain_components=function(domain){if(domain.indexOf("www.")===0&&(domain=domain.slice(4)),mode_check.on_server()){let parsed=tld.parse(domain);return{top_domain:parsed.domain,subdomains:parsed.subdomain}}else{let second_level_domains=["ac.uk","co.uk","gov.uk","ltd.uk","me.uk","net.uk","nhs.uk","org.uk","plc.uk","police.uk","com.au","com.br"],split=domain.split("."),extra_domain=0;for(let second_level_domain of second_level_domains)if(b_string.ends_with(domain,second_level_domain)){extra_domain+=1;break}let top_domain=split.slice(-(2+extra_domain)),subdomains=split.slice(0,split.length-(2+extra_domain));return{top_domain:top_domain.join("."),subdomains:subdomains.join(".")}}}}});var require_timestamp=__commonJS({"lib-browser-old/u/shared/timestamp.js"(exports){"use strict";init_define_process_env();init_shim();var mode_check=require_mode_check(),errors=require_errors(),timestamp=exports;if(mode_check.on_server())timestamp.timestamp=()=>Date.now();else if(mode_check.on_worker())timestamp.timestamp=function(){throw new errors.UnexpectedError("not supported in web workers right now")};else if(mode_check.on_client())timestamp.timestamp=()=>Date.now()+window.server_time_offset;else throw new errors.UnexpectedError("unrecognized environment: on_server, on_worker, on_client all returned false")}});var require_color=__commonJS({"lib-browser-old/u/client/color.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.HexToNumber=HexToNumber;exports.NumberToHex=NumberToHex;exports.RGBA_to_ARGB=RGBA_to_ARGB;exports.RGBA_to_RGB=RGBA_to_RGB;exports.RGBToHex=RGBToHex;exports.decimal_to_percent=decimal_to_percent;exports.hexToRGB=hexToRGB;exports.hex_to_rgb=hex_to_rgb;exports.lighten_color=lighten_color;exports.lighten_rgb_color=void 0;exports.percent_to_decimal=percent_to_decimal;exports.rgb_color_to_rgb_string=void 0;exports.rgb_to_hex=rgb_to_hex;exports.rgba_to_array=rgba_to_array;require_es_parse_int();require_es_regexp_to_string();require_es_regexp_exec();require_es_string_split();require_es_string_replace();require_es_array_iterator();require_web_dom_collections_iterator();require_es_parse_float();require_es_string_match();function hexToR(h){return parseInt(cutHex(h).substring(0,2),16)}function hexToG(h){return parseInt(cutHex(h).substring(2,4),16)}function hexToB(h){return parseInt(cutHex(h).substring(4,6),16)}function cutHex(h){return h.charAt(0)==="#"?h.substring(1,7):h}function hexToRGB(hex){return[hexToR(hex),hexToG(hex),hexToB(hex)]}function RGBToHex(rgb){return"#"+(rgb[0]*256*256+rgb[1]*256+rgb[2]).toString(16)}function HexToNumber(hex){return parseInt(cutHex(hex),16)}function NumberToHex(num){return"#"+num.toString(16)}function RGBA_to_ARGB(val){if(!val||val.split==null)return"";let split=val.split("rgba(");if(split.length===1)return val;val=split[split.length-1],val=val.slice(0,val.length-1).replace(/\s/g,"");let[red,green,blue,opacity]=val.split(",");return"#"+Math.floor(parseFloat(opacity)*255).toString(16)+parseInt(red).toString(16)+parseInt(green).toString(16)+parseInt(blue).toString(16)}function rgb_to_hex(val){let split=val.split("rgba(");if(split.length===1)return{code:val,opacity:1};val=split[split.length-1],val=val.slice(0,val.length-1).replace(/\s/g,"");let[red,green,blue,opacity]=val.split(",");return{opacity:parseFloat(opacity),code:"#"+((1<<24)+(parseInt(red)<<16)+(parseInt(green)<<8)+parseInt(blue)).toString(16).substr(1)}}function decimal_to_percent(val){return"".concat(Math.round(val*100),"%")}function percent_to_decimal(val){return parseFloat(val)/100}function hex_to_rgb(code,opacity){code=code.replace("#","");let r=hexToR(code),g=hexToG(code),b=hexToB(code);return"rgba(".concat(r,",").concat(g,",").concat(b,",").concat(opacity/100,")")}function rgba_to_array(val){return val.match(/[.?\d]+/g)}function RGBA_to_RGB(val){if(!val||val.split==null)return"";let split=val.split("rgba(");if(split.length===1)return val;let parameters=split[1].split(",");return"rgb("+parameters.slice(0,parameters.length-1).join(",")+")"}var lighten_rgb_color=(_ref,alpha)=>{let[r,g,b]=_ref,lighten=val=>Math.round(val*alpha+255*(1-alpha));return[lighten(r),lighten(g),lighten(b)]};exports.lighten_rgb_color=lighten_rgb_color;var rgb_color_to_rgb_string=_ref2=>{let[r,g,b]=_ref2;return"rgb(".concat(r,", ").concat(g,", ").concat(b,")")};exports.rgb_color_to_rgb_string=rgb_color_to_rgb_string;function lighten_color(hex,alpha){try{let parts=hexToRGB(hex);return RGBToHex(lighten_rgb_color(parts,alpha))}catch(err){return"#FFFFFF"}}}});var require_native_promise_constructor=__commonJS({"node_modules/core-js/internals/native-promise-constructor.js"(exports,module){init_define_process_env();init_shim();var global=require_global();module.exports=global.Promise}});var require_array_slice=__commonJS({"node_modules/core-js/internals/array-slice.js"(exports,module){init_define_process_env();init_shim();var uncurryThis=require_function_uncurry_this();module.exports=uncurryThis([].slice)}});var require_engine_is_ios=__commonJS({"node_modules/core-js/internals/engine-is-ios.js"(exports,module){init_define_process_env();init_shim();var userAgent=require_engine_user_agent();module.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(userAgent)}});var require_task=__commonJS({"node_modules/core-js/internals/task.js"(exports,module){init_define_process_env();init_shim();var global=require_global(),apply=require_function_apply(),bind=require_function_bind_context(),isCallable=require_is_callable(),hasOwn=require_has_own_property(),fails=require_fails(),html=require_html(),arraySlice=require_array_slice(),createElement2=require_document_create_element(),IS_IOS=require_engine_is_ios(),IS_NODE=require_engine_is_node(),set=global.setImmediate,clear=global.clearImmediate,process2=global.process,Dispatch=global.Dispatch,Function2=global.Function,MessageChannel2=global.MessageChannel,String2=global.String,counter2=0,queue={},ONREADYSTATECHANGE="onreadystatechange",location2,defer,channel,port;try{location2=global.location}catch(error){}var run=function(id){if(hasOwn(queue,id)){var fn=queue[id];delete queue[id],fn()}},runner=function(id){return function(){run(id)}},listener=function(event){run(event.data)},post=function(id){global.postMessage(String2(id),location2.protocol+"//"+location2.host)};(!set||!clear)&&(set=function(fn){var args=arraySlice(arguments,1);return queue[++counter2]=function(){apply(isCallable(fn)?fn:Function2(fn),void 0,args)},defer(counter2),counter2},clear=function(id){delete queue[id]},IS_NODE?defer=function(id){process2.nextTick(runner(id))}:Dispatch&&Dispatch.now?defer=function(id){Dispatch.now(runner(id))}:MessageChannel2&&!IS_IOS?(channel=new MessageChannel2,port=channel.port2,channel.port1.onmessage=listener,defer=bind(port.postMessage,port)):global.addEventListener&&isCallable(global.postMessage)&&!global.importScripts&&location2&&location2.protocol!=="file:"&&!fails(post)?(defer=post,global.addEventListener("message",listener,!1)):ONREADYSTATECHANGE in createElement2("script")?defer=function(id){html.appendChild(createElement2("script"))[ONREADYSTATECHANGE]=function(){html.removeChild(this),run(id)}}:defer=function(id){setTimeout(runner(id),0)});module.exports={set,clear}}});var require_engine_is_ios_pebble=__commonJS({"node_modules/core-js/internals/engine-is-ios-pebble.js"(exports,module){init_define_process_env();init_shim();var userAgent=require_engine_user_agent(),global=require_global();module.exports=/ipad|iphone|ipod/i.test(userAgent)&&global.Pebble!==void 0}});var require_engine_is_webos_webkit=__commonJS({"node_modules/core-js/internals/engine-is-webos-webkit.js"(exports,module){init_define_process_env();init_shim();var userAgent=require_engine_user_agent();module.exports=/web0s(?!.*chrome)/i.test(userAgent)}});var require_microtask=__commonJS({"node_modules/core-js/internals/microtask.js"(exports,module){init_define_process_env();init_shim();var global=require_global(),bind=require_function_bind_context(),getOwnPropertyDescriptor=require_object_get_own_property_descriptor().f,macrotask=require_task().set,IS_IOS=require_engine_is_ios(),IS_IOS_PEBBLE=require_engine_is_ios_pebble(),IS_WEBOS_WEBKIT=require_engine_is_webos_webkit(),IS_NODE=require_engine_is_node(),MutationObserver2=global.MutationObserver||global.WebKitMutationObserver,document2=global.document,process2=global.process,Promise2=global.Promise,queueMicrotaskDescriptor=getOwnPropertyDescriptor(global,"queueMicrotask"),queueMicrotask2=queueMicrotaskDescriptor&&queueMicrotaskDescriptor.value,flush,head,last,notify,toggle,node,promise,then;queueMicrotask2||(flush=function(){var parent,fn;for(IS_NODE&&(parent=process2.domain)&&parent.exit();head;){fn=head.fn,head=head.next;try{fn()}catch(error){throw head?notify():last=void 0,error}}last=void 0,parent&&parent.enter()},!IS_IOS&&!IS_NODE&&!IS_WEBOS_WEBKIT&&MutationObserver2&&document2?(toggle=!0,node=document2.createTextNode(""),new MutationObserver2(flush).observe(node,{characterData:!0}),notify=function(){node.data=toggle=!toggle}):!IS_IOS_PEBBLE&&Promise2&&Promise2.resolve?(promise=Promise2.resolve(void 0),promise.constructor=Promise2,then=bind(promise.then,promise),notify=function(){then(flush)}):IS_NODE?notify=function(){process2.nextTick(flush)}:(macrotask=bind(macrotask,global),notify=function(){macrotask(flush)}));module.exports=queueMicrotask2||function(fn){var task={fn,next:void 0};last&&(last.next=task),head||(head=task,notify()),last=task}}});var require_new_promise_capability=__commonJS({"node_modules/core-js/internals/new-promise-capability.js"(exports,module){"use strict";init_define_process_env();init_shim();var aCallable=require_a_callable(),PromiseCapability=function(C){var resolve,reject;this.promise=new C(function($$resolve,$$reject){if(resolve!==void 0||reject!==void 0)throw TypeError("Bad Promise constructor");resolve=$$resolve,reject=$$reject}),this.resolve=aCallable(resolve),this.reject=aCallable(reject)};module.exports.f=function(C){return new PromiseCapability(C)}}});var require_promise_resolve=__commonJS({"node_modules/core-js/internals/promise-resolve.js"(exports,module){init_define_process_env();init_shim();var anObject=require_an_object(),isObject=require_is_object(),newPromiseCapability=require_new_promise_capability();module.exports=function(C,x){if(anObject(C),isObject(x)&&x.constructor===C)return x;var promiseCapability=newPromiseCapability.f(C),resolve=promiseCapability.resolve;return resolve(x),promiseCapability.promise}}});var require_host_report_errors=__commonJS({"node_modules/core-js/internals/host-report-errors.js"(exports,module){init_define_process_env();init_shim();var global=require_global();module.exports=function(a,b){var console2=global.console;console2&&console2.error&&(arguments.length==1?console2.error(a):console2.error(a,b))}}});var require_perform=__commonJS({"node_modules/core-js/internals/perform.js"(exports,module){init_define_process_env();init_shim();module.exports=function(exec){try{return{error:!1,value:exec()}}catch(error){return{error:!0,value:error}}}}});var require_queue=__commonJS({"node_modules/core-js/internals/queue.js"(exports,module){init_define_process_env();init_shim();var Queue=function(){this.head=null,this.tail=null};Queue.prototype={add:function(item){var entry={item,next:null};this.head?this.tail.next=entry:this.head=entry,this.tail=entry},get:function(){var entry=this.head;if(entry)return this.head=entry.next,this.tail===entry&&(this.tail=null),entry.item}};module.exports=Queue}});var require_engine_is_browser=__commonJS({"node_modules/core-js/internals/engine-is-browser.js"(exports,module){init_define_process_env();init_shim();module.exports=typeof window=="object"}});var require_es_promise=__commonJS({"node_modules/core-js/modules/es.promise.js"(){"use strict";init_define_process_env();init_shim();var $2=require_export(),IS_PURE=require_is_pure(),global=require_global(),getBuiltIn=require_get_built_in(),call=require_function_call(),NativePromise=require_native_promise_constructor(),redefine=require_redefine(),redefineAll=require_redefine_all(),setPrototypeOf=require_object_set_prototype_of(),setToStringTag=require_set_to_string_tag(),setSpecies=require_set_species(),aCallable=require_a_callable(),isCallable=require_is_callable(),isObject=require_is_object(),anInstance=require_an_instance(),inspectSource=require_inspect_source(),iterate=require_iterate(),checkCorrectnessOfIteration=require_check_correctness_of_iteration(),speciesConstructor=require_species_constructor(),task=require_task().set,microtask=require_microtask(),promiseResolve=require_promise_resolve(),hostReportErrors=require_host_report_errors(),newPromiseCapabilityModule=require_new_promise_capability(),perform=require_perform(),Queue=require_queue(),InternalStateModule=require_internal_state(),isForced=require_is_forced(),wellKnownSymbol=require_well_known_symbol(),IS_BROWSER=require_engine_is_browser(),IS_NODE=require_engine_is_node(),V8_VERSION=require_engine_v8_version(),SPECIES=wellKnownSymbol("species"),PROMISE="Promise",getInternalState=InternalStateModule.getterFor(PROMISE),setInternalState=InternalStateModule.set,getInternalPromiseState=InternalStateModule.getterFor(PROMISE),NativePromisePrototype=NativePromise&&NativePromise.prototype,PromiseConstructor=NativePromise,PromisePrototype=NativePromisePrototype,TypeError2=global.TypeError,document2=global.document,process2=global.process,newPromiseCapability=newPromiseCapabilityModule.f,newGenericPromiseCapability=newPromiseCapability,DISPATCH_EVENT=!!(document2&&document2.createEvent&&global.dispatchEvent),NATIVE_REJECTION_EVENT=isCallable(global.PromiseRejectionEvent),UNHANDLED_REJECTION="unhandledrejection",REJECTION_HANDLED="rejectionhandled",PENDING2=0,FULFILLED=1,REJECTED=2,HANDLED=1,UNHANDLED=2,SUBCLASSING=!1,Internal,OwnPromiseCapability,PromiseWrapper,nativeThen,FORCED=isForced(PROMISE,function(){var PROMISE_CONSTRUCTOR_SOURCE=inspectSource(PromiseConstructor),GLOBAL_CORE_JS_PROMISE=PROMISE_CONSTRUCTOR_SOURCE!==String(PromiseConstructor);if(!GLOBAL_CORE_JS_PROMISE&&V8_VERSION===66||IS_PURE&&!PromisePrototype.finally)return!0;if(V8_VERSION>=51&&/native code/.test(PROMISE_CONSTRUCTOR_SOURCE))return!1;var promise=new PromiseConstructor(function(resolve){resolve(1)}),FakePromise=function(exec){exec(function(){},function(){})},constructor=promise.constructor={};return constructor[SPECIES]=FakePromise,SUBCLASSING=promise.then(function(){})instanceof FakePromise,SUBCLASSING?!GLOBAL_CORE_JS_PROMISE&&IS_BROWSER&&!NATIVE_REJECTION_EVENT:!0}),INCORRECT_ITERATION=FORCED||!checkCorrectnessOfIteration(function(iterable){PromiseConstructor.all(iterable).catch(function(){})}),isThenable=function(it){var then;return isObject(it)&&isCallable(then=it.then)?then:!1},callReaction=function(reaction,state){var value=state.value,ok=state.state==FULFILLED,handler=ok?reaction.ok:reaction.fail,resolve=reaction.resolve,reject=reaction.reject,domain=reaction.domain,result,then,exited;try{handler?(ok||(state.rejection===UNHANDLED&&onHandleUnhandled(state),state.rejection=HANDLED),handler===!0?result=value:(domain&&domain.enter(),result=handler(value),domain&&(domain.exit(),exited=!0)),result===reaction.promise?reject(TypeError2("Promise-chain cycle")):(then=isThenable(result))?call(then,result,resolve,reject):resolve(result)):reject(value)}catch(error){domain&&!exited&&domain.exit(),reject(error)}},notify=function(state,isReject){state.notified||(state.notified=!0,microtask(function(){for(var reactions=state.reactions,reaction;reaction=reactions.get();)callReaction(reaction,state);state.notified=!1,isReject&&!state.rejection&&onUnhandled(state)}))},dispatchEvent=function(name,promise,reason){var event,handler;DISPATCH_EVENT?(event=document2.createEvent("Event"),event.promise=promise,event.reason=reason,event.initEvent(name,!1,!0),global.dispatchEvent(event)):event={promise,reason},!NATIVE_REJECTION_EVENT&&(handler=global["on"+name])?handler(event):name===UNHANDLED_REJECTION&&hostReportErrors("Unhandled promise rejection",reason)},onUnhandled=function(state){call(task,global,function(){var promise=state.facade,value=state.value,IS_UNHANDLED=isUnhandled(state),result;if(IS_UNHANDLED&&(result=perform(function(){IS_NODE?process2.emit("unhandledRejection",value,promise):dispatchEvent(UNHANDLED_REJECTION,promise,value)}),state.rejection=IS_NODE||isUnhandled(state)?UNHANDLED:HANDLED,result.error))throw result.value})},isUnhandled=function(state){return state.rejection!==HANDLED&&!state.parent},onHandleUnhandled=function(state){call(task,global,function(){var promise=state.facade;IS_NODE?process2.emit("rejectionHandled",promise):dispatchEvent(REJECTION_HANDLED,promise,state.value)})},bind=function(fn,state,unwrap2){return function(value){fn(state,value,unwrap2)}},internalReject=function(state,value,unwrap2){state.done||(state.done=!0,unwrap2&&(state=unwrap2),state.value=value,state.state=REJECTED,notify(state,!0))},internalResolve=function(state,value,unwrap2){if(!state.done){state.done=!0,unwrap2&&(state=unwrap2);try{if(state.facade===value)throw TypeError2("Promise can't be resolved itself");var then=isThenable(value);then?microtask(function(){var wrapper={done:!1};try{call(then,value,bind(internalResolve,wrapper,state),bind(internalReject,wrapper,state))}catch(error){internalReject(wrapper,error,state)}}):(state.value=value,state.state=FULFILLED,notify(state,!1))}catch(error){internalReject({done:!1},error,state)}}};if(FORCED&&(PromiseConstructor=function(executor){anInstance(this,PromisePrototype),aCallable(executor),call(Internal,this);var state=getInternalState(this);try{executor(bind(internalResolve,state),bind(internalReject,state))}catch(error){internalReject(state,error)}},PromisePrototype=PromiseConstructor.prototype,Internal=function(executor){setInternalState(this,{type:PROMISE,done:!1,notified:!1,parent:!1,reactions:new Queue,rejection:!1,state:PENDING2,value:void 0})},Internal.prototype=redefineAll(PromisePrototype,{then:function(onFulfilled,onRejected){var state=getInternalPromiseState(this),reaction=newPromiseCapability(speciesConstructor(this,PromiseConstructor));return state.parent=!0,reaction.ok=isCallable(onFulfilled)?onFulfilled:!0,reaction.fail=isCallable(onRejected)&&onRejected,reaction.domain=IS_NODE?process2.domain:void 0,state.state==PENDING2?state.reactions.add(reaction):microtask(function(){callReaction(reaction,state)}),reaction.promise},catch:function(onRejected){return this.then(void 0,onRejected)}}),OwnPromiseCapability=function(){var promise=new Internal,state=getInternalState(promise);this.promise=promise,this.resolve=bind(internalResolve,state),this.reject=bind(internalReject,state)},newPromiseCapabilityModule.f=newPromiseCapability=function(C){return C===PromiseConstructor||C===PromiseWrapper?new OwnPromiseCapability(C):newGenericPromiseCapability(C)},!IS_PURE&&isCallable(NativePromise)&&NativePromisePrototype!==Object.prototype)){nativeThen=NativePromisePrototype.then,SUBCLASSING||(redefine(NativePromisePrototype,"then",function(onFulfilled,onRejected){var that=this;return new PromiseConstructor(function(resolve,reject){call(nativeThen,that,resolve,reject)}).then(onFulfilled,onRejected)},{unsafe:!0}),redefine(NativePromisePrototype,"catch",PromisePrototype.catch,{unsafe:!0}));try{delete NativePromisePrototype.constructor}catch(error){}setPrototypeOf&&setPrototypeOf(NativePromisePrototype,PromisePrototype)}$2({global:!0,wrap:!0,forced:FORCED},{Promise:PromiseConstructor});setToStringTag(PromiseConstructor,PROMISE,!1,!0);setSpecies(PROMISE);PromiseWrapper=getBuiltIn(PROMISE);$2({target:PROMISE,stat:!0,forced:FORCED},{reject:function(r){var capability=newPromiseCapability(this);return call(capability.reject,void 0,r),capability.promise}});$2({target:PROMISE,stat:!0,forced:IS_PURE||FORCED},{resolve:function(x){return promiseResolve(IS_PURE&&this===PromiseWrapper?PromiseConstructor:this,x)}});$2({target:PROMISE,stat:!0,forced:INCORRECT_ITERATION},{all:function(iterable){var C=this,capability=newPromiseCapability(C),resolve=capability.resolve,reject=capability.reject,result=perform(function(){var $promiseResolve=aCallable(C.resolve),values=[],counter2=0,remaining=1;iterate(iterable,function(promise){var index=counter2++,alreadyCalled=!1;remaining++,call($promiseResolve,C,promise).then(function(value){alreadyCalled||(alreadyCalled=!0,values[index]=value,--remaining||resolve(values))},reject)}),--remaining||resolve(values)});return result.error&&reject(result.value),capability.promise},race:function(iterable){var C=this,capability=newPromiseCapability(C),reject=capability.reject,result=perform(function(){var $promiseResolve=aCallable(C.resolve);iterate(iterable,function(promise){call($promiseResolve,C,promise).then(capability.resolve,reject)})});return result.error&&reject(result.value),capability.promise}})}});var require_es_promise_finally=__commonJS({"node_modules/core-js/modules/es.promise.finally.js"(){"use strict";init_define_process_env();init_shim();var $2=require_export(),IS_PURE=require_is_pure(),NativePromise=require_native_promise_constructor(),fails=require_fails(),getBuiltIn=require_get_built_in(),isCallable=require_is_callable(),speciesConstructor=require_species_constructor(),promiseResolve=require_promise_resolve(),redefine=require_redefine(),NON_GENERIC=!!NativePromise&&fails(function(){NativePromise.prototype.finally.call({then:function(){}},function(){})});$2({target:"Promise",proto:!0,real:!0,forced:NON_GENERIC},{finally:function(onFinally){var C=speciesConstructor(this,getBuiltIn("Promise")),isFunction=isCallable(onFinally);return this.then(isFunction?function(x){return promiseResolve(C,onFinally()).then(function(){return x})}:onFinally,isFunction?function(e){return promiseResolve(C,onFinally()).then(function(){throw e})}:onFinally)}});!IS_PURE&&isCallable(NativePromise)&&(method=getBuiltIn("Promise").prototype.finally,NativePromise.prototype.finally!==method&&redefine(NativePromise.prototype,"finally",method,{unsafe:!0}));var method}});var solid_exports={};__export(solid_exports,{$DEVCOMP:()=>$DEVCOMP,$PROXY:()=>$PROXY,$TRACK:()=>$TRACK,DEV:()=>DEV,ErrorBoundary:()=>ErrorBoundary,For:()=>For,Index:()=>Index,Match:()=>Match,Show:()=>Show,Suspense:()=>Suspense,SuspenseList:()=>SuspenseList,Switch:()=>Switch,batch:()=>batch,cancelCallback:()=>cancelCallback,children:()=>children,createComponent:()=>createComponent,createComputed:()=>createComputed,createContext:()=>createContext,createDeferred:()=>createDeferred,createEffect:()=>createEffect,createMemo:()=>createMemo,createReaction:()=>createReaction,createRenderEffect:()=>createRenderEffect,createResource:()=>createResource,createRoot:()=>createRoot,createSelector:()=>createSelector,createSignal:()=>createSignal,createUniqueId:()=>createUniqueId,enableExternalSource:()=>enableExternalSource,enableHydration:()=>enableHydration,enableScheduling:()=>enableScheduling,equalFn:()=>equalFn,from:()=>from,getListener:()=>getListener,getOwner:()=>getOwner,indexArray:()=>indexArray,lazy:()=>lazy,mapArray:()=>mapArray,mergeProps:()=>mergeProps,observable:()=>observable,on:()=>on,onCleanup:()=>onCleanup,onError:()=>onError,onMount:()=>onMount,requestCallback:()=>requestCallback,resetErrorBoundaries:()=>resetErrorBoundaries,runWithOwner:()=>runWithOwner,sharedConfig:()=>sharedConfig,splitProps:()=>splitProps,startTransition:()=>startTransition,untrack:()=>untrack,useContext:()=>useContext,useTransition:()=>useTransition});function setupScheduler(){let channel=new MessageChannel,port=channel.port2;if(scheduleCallback=()=>port.postMessage(null),channel.port1.onmessage=()=>{if(scheduledCallback!==null){let currentTime=performance.now();deadline=currentTime+yieldInterval;let hasTimeRemaining=!0;try{scheduledCallback(hasTimeRemaining,currentTime)?port.postMessage(null):scheduledCallback=null}catch(error){throw port.postMessage(null),error}}},navigator&&navigator.scheduling&&navigator.scheduling.isInputPending){let scheduling=navigator.scheduling;shouldYieldToHost=()=>{let currentTime=performance.now();return currentTime>=deadline?scheduling.isInputPending()?!0:currentTime>=maxYieldInterval:!1}}else shouldYieldToHost=()=>performance.now()>=deadline}function enqueue(taskQueue2,task){function findIndex(){let m=0,n=taskQueue2.length-1;for(;m<=n;){let k=n+m>>1,cmp=task.expirationTime-taskQueue2[k].expirationTime;if(cmp>0)m=k+1;else if(cmp<0)n=k-1;else return k}return m}taskQueue2.splice(findIndex(),0,task)}function requestCallback(fn,options){scheduleCallback||setupScheduler();let startTime=performance.now(),timeout=maxSigned31BitInt;options&&options.timeout&&(timeout=options.timeout);let newTask={id:taskIdCounter++,fn,startTime,expirationTime:startTime+timeout};return enqueue(taskQueue,newTask),!isCallbackScheduled&&!isPerformingWork&&(isCallbackScheduled=!0,scheduledCallback=flushWork,scheduleCallback()),newTask}function cancelCallback(task){task.fn=null}function flushWork(hasTimeRemaining,initialTime){isCallbackScheduled=!1,isPerformingWork=!0;try{return workLoop(hasTimeRemaining,initialTime)}finally{currentTask=null,isPerformingWork=!1}}function workLoop(hasTimeRemaining,initialTime){let currentTime=initialTime;for(currentTask=taskQueue[0]||null;currentTask!==null&&!(currentTask.expirationTime>currentTime&&(!hasTimeRemaining||shouldYieldToHost()));){let callback=currentTask.fn;if(callback!==null){currentTask.fn=null;let didUserCallbackTimeout=currentTask.expirationTime<=currentTime;callback(didUserCallbackTimeout),currentTime=performance.now(),currentTask===taskQueue[0]&&taskQueue.shift()}else taskQueue.shift();currentTask=taskQueue[0]||null}return currentTask!==null}function setHydrateContext(context){sharedConfig.context=context}function nextHydrateContext(){return __spreadProps(__spreadValues({},sharedConfig.context),{id:"".concat(sharedConfig.context.id).concat(sharedConfig.context.count++,"-"),count:0})}function createRoot(fn,detachedOwner){let listener=Listener,owner=Owner,unowned=fn.length===0,root=unowned?UNOWNED:{owned:null,cleanups:null,context:null,owner:detachedOwner===void 0?owner:detachedOwner},updateFn=unowned?fn:()=>fn(()=>untrack(()=>cleanNode(root)));Owner=root,Listener=null;try{return runUpdates(updateFn,!0)}finally{Listener=listener,Owner=owner}}function createSignal(value,options){options=options?Object.assign({},signalOptions,options):signalOptions;let s={value,observers:null,observerSlots:null,comparator:options.equals||void 0},setter=value2=>(typeof value2=="function"&&(Transition&&Transition.running&&Transition.sources.has(s)?value2=value2(s.tValue):value2=value2(s.value)),writeSignal(s,value2));return[readSignal.bind(s),setter]}function createComputed(fn,value,options){let c=createComputation(fn,value,!0,STALE);Scheduler&&Transition&&Transition.running?Updates.push(c):updateComputation(c)}function createRenderEffect(fn,value,options){let c=createComputation(fn,value,!1,STALE);Scheduler&&Transition&&Transition.running?Updates.push(c):updateComputation(c)}function createEffect(fn,value,options){runEffects=runUserEffects;let c=createComputation(fn,value,!1,STALE),s=SuspenseContext&&lookup(Owner,SuspenseContext.id);s&&(c.suspense=s),c.user=!0,Effects?Effects.push(c):updateComputation(c)}function createReaction(onInvalidate,options){let fn,c=createComputation(()=>{fn?fn():untrack(onInvalidate),fn=void 0},void 0,!1,0),s=SuspenseContext&&lookup(Owner,SuspenseContext.id);return s&&(c.suspense=s),c.user=!0,tracking=>{fn=tracking,updateComputation(c)}}function createMemo(fn,value,options){options=options?Object.assign({},signalOptions,options):signalOptions;let c=createComputation(fn,value,!0,0);return c.observers=null,c.observerSlots=null,c.comparator=options.equals||void 0,Scheduler&&Transition&&Transition.running?(c.tState=STALE,Updates.push(c)):updateComputation(c),readSignal.bind(c)}function createResource(pSource,pFetcher,pOptions){let source,fetcher,options;arguments.length===2&&typeof pFetcher=="object"||arguments.length===1?(source=!0,fetcher=pSource,options=pFetcher||{}):(source=pSource,fetcher=pFetcher,options=pOptions||{});let pr=null,initP=NO_INIT,id=null,loadedUnderTransition=!1,scheduled=!1,resolved="initialValue"in options,dynamic=typeof source=="function"&&createMemo(source),contexts=new Set,[value,setValue]=(options.storage||createSignal)(options.initialValue),[error,setError]=createSignal(void 0),[track,trigger]=createSignal(void 0,{equals:!1}),[state,setState]=createSignal(resolved?"ready":"unresolved");if(sharedConfig.context){id="".concat(sharedConfig.context.id).concat(sharedConfig.context.count++);let v;options.ssrLoadFrom==="initial"?initP=options.initialValue:sharedConfig.load&&(v=sharedConfig.load(id))&&(initP=v[0])}function loadEnd(p,v,error2,key){return pr===p&&(pr=null,resolved=!0,(p===initP||v===initP)&&options.onHydrated&&queueMicrotask(()=>options.onHydrated(key,{value:v})),initP=NO_INIT,Transition&&p&&loadedUnderTransition?(Transition.promises.delete(p),loadedUnderTransition=!1,runUpdates(()=>{Transition.running=!0,completeLoad(v,error2)},!1)):completeLoad(v,error2)),v}function completeLoad(v,err){runUpdates(()=>{err===void 0&&setValue(()=>v),setState(err!==void 0?"errored":"ready"),setError(err);for(let c of contexts.keys())c.decrement();contexts.clear()},!1)}function read(){let c=SuspenseContext&&lookup(Owner,SuspenseContext.id),v=value(),err=error();if(err!==void 0&&!pr)throw err;return Listener&&!Listener.user&&c&&createComputed(()=>{track(),pr&&(c.resolved&&Transition&&loadedUnderTransition?Transition.promises.add(pr):contexts.has(c)||(c.increment(),contexts.add(c)))}),v}function load(refetching=!0){if(refetching!==!1&&scheduled)return;scheduled=!1;let lookup2=dynamic?dynamic():source;if(loadedUnderTransition=Transition&&Transition.running,lookup2==null||lookup2===!1){loadEnd(pr,untrack(value));return}Transition&&pr&&Transition.promises.delete(pr);let p=initP!==NO_INIT?initP:untrack(()=>fetcher(lookup2,{value:value(),refetching}));return typeof p!="object"||!(p&&"then"in p)?(loadEnd(pr,p,void 0,lookup2),p):(pr=p,scheduled=!0,queueMicrotask(()=>scheduled=!1),runUpdates(()=>{setState(resolved?"refreshing":"pending"),trigger()},!1),p.then(v=>loadEnd(p,v,void 0,lookup2),e=>loadEnd(p,void 0,castError(e),lookup2)))}return Object.defineProperties(read,{state:{get:()=>state()},error:{get:()=>error()},loading:{get(){let s=state();return s==="pending"||s==="refreshing"}},latest:{get(){if(!resolved)return read();let err=error();if(err&&!pr)throw err;return value()}}}),dynamic?createComputed(()=>load(!1)):load(!1),[read,{refetch:load,mutate:setValue}]}function createDeferred(source,options){let t,timeout=options?options.timeoutMs:void 0,node=createComputation(()=>((!t||!t.fn)&&(t=requestCallback(()=>setDeferred(()=>node.value),timeout!==void 0?{timeout}:void 0)),source()),void 0,!0),[deferred,setDeferred]=createSignal(node.value,options);return updateComputation(node),setDeferred(()=>node.value),deferred}function createSelector(source,fn=equalFn,options){let subs=new Map,node=createComputation(p=>{let v=source();for(let[key,val]of subs.entries())if(fn(key,v)!==fn(key,p))for(let c of val.values())c.state=STALE,c.pure?Updates.push(c):Effects.push(c);return v},void 0,!0,STALE);return updateComputation(node),key=>{let listener=Listener;if(listener){let l;(l=subs.get(key))?l.add(listener):subs.set(key,l=new Set([listener])),onCleanup(()=>{l.delete(listener),!l.size&&subs.delete(key)})}return fn(key,Transition&&Transition.running&&Transition.sources.has(node)?node.tValue:node.value)}}function batch(fn){return runUpdates(fn,!1)}function untrack(fn){if(Listener===null)return fn();let listener=Listener;Listener=null;try{return fn()}finally{Listener=listener}}function on(deps,fn,options){let isArray=Array.isArray(deps),prevInput,defer=options&&options.defer;return prevValue=>{let input;if(isArray){input=Array(deps.length);for(let i=0;i<deps.length;i++)input[i]=deps[i]()}else input=deps();if(defer){defer=!1;return}let result=untrack(()=>fn(input,prevInput,prevValue));return prevInput=input,result}}function onMount(fn){createEffect(()=>untrack(fn))}function onCleanup(fn){return Owner===null||(Owner.cleanups===null?Owner.cleanups=[fn]:Owner.cleanups.push(fn)),fn}function onError(fn){ERROR||(ERROR=Symbol("error")),Owner===null||(Owner.context===null?Owner.context={[ERROR]:[fn]}:Owner.context[ERROR]?Owner.context[ERROR].push(fn):Owner.context[ERROR]=[fn])}function getListener(){return Listener}function getOwner(){return Owner}function runWithOwner(o,fn){let prev=Owner,prevListener=Listener;Owner=o,Listener=null;try{return runUpdates(fn,!0)}catch(err){handleError(err)}finally{Owner=prev,Listener=prevListener}}function enableScheduling(scheduler=requestCallback){Scheduler=scheduler}function startTransition(fn){if(Transition&&Transition.running)return fn(),Transition.done;let l=Listener,o=Owner;return Promise.resolve().then(()=>{Listener=l,Owner=o;let t;return(Scheduler||SuspenseContext)&&(t=Transition||(Transition={sources:new Set,effects:[],promises:new Set,disposed:new Set,queue:new Set,running:!0}),t.done||(t.done=new Promise(res=>t.resolve=res)),t.running=!0),runUpdates(fn,!1),Listener=Owner=null,t?t.done:void 0})}function useTransition(){return[transPending,startTransition]}function resumeEffects(e){Effects.push.apply(Effects,e),e.length=0}function createContext(defaultValue,options){let id=Symbol("context");return{id,Provider:createProvider(id),defaultValue}}function useContext(context){let ctx;return(ctx=lookup(Owner,context.id))!==void 0?ctx:context.defaultValue}function children(fn){let children2=createMemo(fn),memo=createMemo(()=>resolveChildren(children2()));return memo.toArray=()=>{let c=memo();return Array.isArray(c)?c:c!=null?[c]:[]},memo}function getSuspenseContext(){return SuspenseContext||(SuspenseContext=createContext({}))}function enableExternalSource(factory){if(ExternalSourceFactory){let oldFactory=ExternalSourceFactory;ExternalSourceFactory=(fn,trigger)=>{let oldSource=oldFactory(fn,trigger),source=factory(x=>oldSource.track(x),trigger);return{track:x=>source.track(x),dispose(){source.dispose(),oldSource.dispose()}}}}else ExternalSourceFactory=factory}function readSignal(){let runningTransition=Transition&&Transition.running;if(this.sources&&(!runningTransition&&this.state||runningTransition&&this.tState))if(!runningTransition&&this.state===STALE||runningTransition&&this.tState===STALE)updateComputation(this);else{let updates=Updates;Updates=null,runUpdates(()=>lookUpstream(this),!1),Updates=updates}if(Listener){let sSlot=this.observers?this.observers.length:0;Listener.sources?(Listener.sources.push(this),Listener.sourceSlots.push(sSlot)):(Listener.sources=[this],Listener.sourceSlots=[sSlot]),this.observers?(this.observers.push(Listener),this.observerSlots.push(Listener.sources.length-1)):(this.observers=[Listener],this.observerSlots=[Listener.sources.length-1])}return runningTransition&&Transition.sources.has(this)?this.tValue:this.value}function writeSignal(node,value,isComp){let current=Transition&&Transition.running&&Transition.sources.has(node)?node.tValue:node.value;if(!node.comparator||!node.comparator(current,value)){if(Transition){let TransitionRunning=Transition.running;(TransitionRunning||!isComp&&Transition.sources.has(node))&&(Transition.sources.add(node),node.tValue=value),TransitionRunning||(node.value=value)}else node.value=value;node.observers&&node.observers.length&&runUpdates(()=>{for(let i=0;i<node.observers.length;i+=1){let o=node.observers[i],TransitionRunning=Transition&&Transition.running;TransitionRunning&&Transition.disposed.has(o)||((TransitionRunning&&!o.tState||!TransitionRunning&&!o.state)&&(o.pure?Updates.push(o):Effects.push(o),o.observers&&markDownstream(o)),TransitionRunning?o.tState=STALE:o.state=STALE)}if(Updates.length>1e6)throw Updates=[],new Error},!1)}return value}function updateComputation(node){if(!node.fn)return;cleanNode(node);let owner=Owner,listener=Listener,time=ExecCount;Listener=Owner=node,runComputation(node,Transition&&Transition.running&&Transition.sources.has(node)?node.tValue:node.value,time),Transition&&!Transition.running&&Transition.sources.has(node)&&queueMicrotask(()=>{runUpdates(()=>{Transition&&(Transition.running=!0),Listener=Owner=node,runComputation(node,node.tValue,time),Listener=Owner=null},!1)}),Listener=listener,Owner=owner}function runComputation(node,value,time){let nextValue;try{nextValue=node.fn(value)}catch(err){return node.pure&&(Transition&&Transition.running?(node.tState=STALE,node.tOwned&&node.tOwned.forEach(cleanNode),node.tOwned=void 0):(node.state=STALE,node.owned&&node.owned.forEach(cleanNode),node.owned=null)),node.updatedAt=time+1,handleError(err)}(!node.updatedAt||node.updatedAt<=time)&&(node.updatedAt!=null&&"observers"in node?writeSignal(node,nextValue,!0):Transition&&Transition.running&&node.pure?(Transition.sources.add(node),node.tValue=nextValue):node.value=nextValue,node.updatedAt=time)}function createComputation(fn,init,pure,state=STALE,options){let c={fn,state,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:init,owner:Owner,context:null,pure};if(Transition&&Transition.running&&(c.state=0,c.tState=state),Owner===null||Owner!==UNOWNED&&(Transition&&Transition.running&&Owner.pure?Owner.tOwned?Owner.tOwned.push(c):Owner.tOwned=[c]:Owner.owned?Owner.owned.push(c):Owner.owned=[c]),ExternalSourceFactory){let[track,trigger]=createSignal(void 0,{equals:!1}),ordinary=ExternalSourceFactory(c.fn,trigger);onCleanup(()=>ordinary.dispose());let triggerInTransition=()=>startTransition(trigger).then(()=>inTransition.dispose()),inTransition=ExternalSourceFactory(c.fn,triggerInTransition);c.fn=x=>(track(),Transition&&Transition.running?inTransition.track(x):ordinary.track(x))}return c}function runTop(node){let runningTransition=Transition&&Transition.running;if(!runningTransition&&node.state===0||runningTransition&&node.tState===0)return;if(!runningTransition&&node.state===PENDING||runningTransition&&node.tState===PENDING)return lookUpstream(node);if(node.suspense&&untrack(node.suspense.inFallback))return node.suspense.effects.push(node);let ancestors=[node];for(;(node=node.owner)&&(!node.updatedAt||node.updatedAt<ExecCount);){if(runningTransition&&Transition.disposed.has(node))return;(!runningTransition&&node.state||runningTransition&&node.tState)&&ancestors.push(node)}for(let i=ancestors.length-1;i>=0;i--){if(node=ancestors[i],runningTransition){let top=node,prev=ancestors[i+1];for(;(top=top.owner)&&top!==prev;)if(Transition.disposed.has(top))return}if(!runningTransition&&node.state===STALE||runningTransition&&node.tState===STALE)updateComputation(node);else if(!runningTransition&&node.state===PENDING||runningTransition&&node.tState===PENDING){let updates=Updates;Updates=null,runUpdates(()=>lookUpstream(node,ancestors[0]),!1),Updates=updates}}}function runUpdates(fn,init){if(Updates)return fn();let wait=!1;init||(Updates=[]),Effects?wait=!0:Effects=[],ExecCount++;try{let res=fn();return completeUpdates(wait),res}catch(err){wait||(Effects=null),Updates=null,handleError(err)}}function completeUpdates(wait){if(Updates&&(Scheduler&&Transition&&Transition.running?scheduleQueue(Updates):runQueue(Updates),Updates=null),wait)return;let res;if(Transition){if(!Transition.promises.size&&!Transition.queue.size){let sources=Transition.sources,disposed=Transition.disposed;Effects.push.apply(Effects,Transition.effects),res=Transition.resolve;for(let e2 of Effects)"tState"in e2&&(e2.state=e2.tState),delete e2.tState;Transition=null,runUpdates(()=>{for(let d of disposed)cleanNode(d);for(let v of sources){if(v.value=v.tValue,v.owned)for(let i=0,len=v.owned.length;i<len;i++)cleanNode(v.owned[i]);v.tOwned&&(v.owned=v.tOwned),delete v.tValue,delete v.tOwned,v.tState=0}setTransPending(!1)},!1)}else if(Transition.running){Transition.running=!1,Transition.effects.push.apply(Transition.effects,Effects),Effects=null,setTransPending(!0);return}}let e=Effects;Effects=null,e.length&&runUpdates(()=>runEffects(e),!1),res&&res()}function runQueue(queue){for(let i=0;i<queue.length;i++)runTop(queue[i])}function scheduleQueue(queue){for(let i=0;i<queue.length;i++){let item=queue[i],tasks=Transition.queue;tasks.has(item)||(tasks.add(item),Scheduler(()=>{tasks.delete(item),runUpdates(()=>{Transition.running=!0,runTop(item)},!1),Transition&&(Transition.running=!1)}))}}function runUserEffects(queue){let i,userLength=0;for(i=0;i<queue.length;i++){let e=queue[i];e.user?queue[userLength++]=e:runTop(e)}for(sharedConfig.context&&setHydrateContext(),i=0;i<userLength;i++)runTop(queue[i])}function lookUpstream(node,ignore){let runningTransition=Transition&&Transition.running;runningTransition?node.tState=0:node.state=0;for(let i=0;i<node.sources.length;i+=1){let source=node.sources[i];source.sources&&(!runningTransition&&source.state===STALE||runningTransition&&source.tState===STALE?source!==ignore&&(!source.updatedAt||source.updatedAt<ExecCount)&&runTop(source):(!runningTransition&&source.state===PENDING||runningTransition&&source.tState===PENDING)&&lookUpstream(source,ignore))}}function markDownstream(node){let runningTransition=Transition&&Transition.running;for(let i=0;i<node.observers.length;i+=1){let o=node.observers[i];(!runningTransition&&!o.state||runningTransition&&!o.tState)&&(runningTransition?o.tState=PENDING:o.state=PENDING,o.pure?Updates.push(o):Effects.push(o),o.observers&&markDownstream(o))}}function cleanNode(node){let i;if(node.sources)for(;node.sources.length;){let source=node.sources.pop(),index=node.sourceSlots.pop(),obs=source.observers;if(obs&&obs.length){let n=obs.pop(),s=source.observerSlots.pop();index<obs.length&&(n.sourceSlots[s]=index,obs[index]=n,source.observerSlots[index]=s)}}if(Transition&&Transition.running&&node.pure){if(node.tOwned){for(i=0;i<node.tOwned.length;i++)cleanNode(node.tOwned[i]);delete node.tOwned}reset(node,!0)}else if(node.owned){for(i=0;i<node.owned.length;i++)cleanNode(node.owned[i]);node.owned=null}if(node.cleanups){for(i=0;i<node.cleanups.length;i++)node.cleanups[i]();node.cleanups=null}Transition&&Transition.running?node.tState=0:node.state=0,node.context=null}function reset(node,top){if(top||(node.tState=0,Transition.disposed.add(node)),node.owned)for(let i=0;i<node.owned.length;i++)reset(node.owned[i])}function castError(err){return err instanceof Error||typeof err=="string"?err:new Error("Unknown error")}function runErrors(fns,err){for(let f of fns)f(err)}function handleError(err){err=castError(err);let fns=ERROR&&lookup(Owner,ERROR);if(!fns)throw err;Effects?Effects.push({fn(){runErrors(fns,err)},state:STALE}):runErrors(fns,err)}function lookup(owner,key){return owner?owner.context&&owner.context[key]!==void 0?owner.context[key]:lookup(owner.owner,key):void 0}function resolveChildren(children2){if(typeof children2=="function"&&!children2.length)return resolveChildren(children2());if(Array.isArray(children2)){let results=[];for(let i=0;i<children2.length;i++){let result=resolveChildren(children2[i]);Array.isArray(result)?results.push.apply(results,result):results.push(result)}return results}return children2}function createProvider(id,options){return function(props){let res;return createRenderEffect(()=>res=untrack(()=>(Owner.context={[id]:props.value},children(()=>props.children))),void 0),res}}function observable(input){return{subscribe(observer){if(!(observer instanceof Object)||observer==null)throw new TypeError("Expected the observer to be an object.");let handler=typeof observer=="function"?observer:observer.next&&observer.next.bind(observer);if(!handler)return{unsubscribe(){}};let dispose2=createRoot(disposer=>(createEffect(()=>{let v=input();untrack(()=>handler(v))}),disposer));return getOwner()&&onCleanup(dispose2),{unsubscribe(){dispose2()}}},[Symbol.observable||"@@observable"](){return this}}}function from(producer){let[s,set]=createSignal(void 0,{equals:!1});if("subscribe"in producer){let unsub=producer.subscribe(v=>set(()=>v));onCleanup(()=>"unsubscribe"in unsub?unsub.unsubscribe():unsub())}else{let clean=producer(set);onCleanup(clean)}return s}function dispose(d){for(let i=0;i<d.length;i++)d[i]()}function mapArray(list,mapFn,options={}){let items=[],mapped=[],disposers=[],len=0,indexes=mapFn.length>1?[]:null;return onCleanup(()=>dispose(disposers)),()=>{let newItems=list()||[],i,j;return newItems[$TRACK],untrack(()=>{let newLen=newItems.length,newIndices,newIndicesNext,temp,tempdisposers,tempIndexes,start,end,newEnd,item;if(newLen===0)len!==0&&(dispose(disposers),disposers=[],items=[],mapped=[],len=0,indexes&&(indexes=[])),options.fallback&&(items=[FALLBACK],mapped[0]=createRoot(disposer=>(disposers[0]=disposer,options.fallback())),len=1);else if(len===0){for(mapped=new Array(newLen),j=0;j<newLen;j++)items[j]=newItems[j],mapped[j]=createRoot(mapper);len=newLen}else{for(temp=new Array(newLen),tempdisposers=new Array(newLen),indexes&&(tempIndexes=new Array(newLen)),start=0,end=Math.min(len,newLen);start<end&&items[start]===newItems[start];start++);for(end=len-1,newEnd=newLen-1;end>=start&&newEnd>=start&&items[end]===newItems[newEnd];end--,newEnd--)temp[newEnd]=mapped[end],tempdisposers[newEnd]=disposers[end],indexes&&(tempIndexes[newEnd]=indexes[end]);for(newIndices=new Map,newIndicesNext=new Array(newEnd+1),j=newEnd;j>=start;j--)item=newItems[j],i=newIndices.get(item),newIndicesNext[j]=i===void 0?-1:i,newIndices.set(item,j);for(i=start;i<=end;i++)item=items[i],j=newIndices.get(item),j!==void 0&&j!==-1?(temp[j]=mapped[i],tempdisposers[j]=disposers[i],indexes&&(tempIndexes[j]=indexes[i]),j=newIndicesNext[j],newIndices.set(item,j)):disposers[i]();for(j=start;j<newLen;j++)j in temp?(mapped[j]=temp[j],disposers[j]=tempdisposers[j],indexes&&(indexes[j]=tempIndexes[j],indexes[j](j))):mapped[j]=createRoot(mapper);mapped=mapped.slice(0,len=newLen),items=newItems.slice(0)}return mapped});function mapper(disposer){if(disposers[j]=disposer,indexes){let[s,set]=createSignal(j);return indexes[j]=set,mapFn(newItems[j],s)}return mapFn(newItems[j])}}}function indexArray(list,mapFn,options={}){let items=[],mapped=[],disposers=[],signals=[],len=0,i;return onCleanup(()=>dispose(disposers)),()=>{let newItems=list()||[];return newItems[$TRACK],untrack(()=>{if(newItems.length===0)return len!==0&&(dispose(disposers),disposers=[],items=[],mapped=[],len=0,signals=[]),options.fallback&&(items=[FALLBACK],mapped[0]=createRoot(disposer=>(disposers[0]=disposer,options.fallback())),len=1),mapped;for(items[0]===FALLBACK&&(disposers[0](),disposers=[],items=[],mapped=[],len=0),i=0;i<newItems.length;i++)i<items.length&&items[i]!==newItems[i]?signals[i](()=>newItems[i]):i>=items.length&&(mapped[i]=createRoot(mapper));for(;i<items.length;i++)disposers[i]();return len=signals.length=disposers.length=newItems.length,items=newItems.slice(0),mapped=mapped.slice(0,len)});function mapper(disposer){disposers[i]=disposer;let[s,set]=createSignal(newItems[i]);return signals[i]=set,mapFn(s,i)}}}function enableHydration(){hydrationEnabled=!0}function createComponent(Comp,props){if(hydrationEnabled&&sharedConfig.context){let c=sharedConfig.context;setHydrateContext(nextHydrateContext());let r=untrack(()=>Comp(props||{}));return setHydrateContext(c),r}return untrack(()=>Comp(props||{}))}function trueFn(){return!0}function resolveSource(s){return(s=typeof s=="function"?s():s)?s:{}}function mergeProps(...sources){let proxy=!1;for(let i=0;i<sources.length;i++){let s=sources[i];proxy=proxy||!!s&&$PROXY in s,sources[i]=typeof s=="function"?(proxy=!0,createMemo(s)):s}if(proxy)return new Proxy({get(property){for(let i=sources.length-1;i>=0;i--){let v=resolveSource(sources[i])[property];if(v!==void 0)return v}},has(property){for(let i=sources.length-1;i>=0;i--)if(property in resolveSource(sources[i]))return!0;return!1},keys(){let keys=[];for(let i=0;i<sources.length;i++)keys.push(...Object.keys(resolveSource(sources[i])));return[...new Set(keys)]}},propTraps);let target={};for(let i=sources.length-1;i>=0;i--)if(sources[i]){let descriptors=Object.getOwnPropertyDescriptors(sources[i]);for(let key in descriptors)key in target||Object.defineProperty(target,key,{enumerable:!0,get(){for(let i2=sources.length-1;i2>=0;i2--){let v=(sources[i2]||{})[key];if(v!==void 0)return v}}})}return target}function splitProps(props,...keys){let blocked=new Set(keys.flat());if($PROXY in props){let res=keys.map(k=>new Proxy({get(property){return k.includes(property)?props[property]:void 0},has(property){return k.includes(property)&&property in props},keys(){return k.filter(property=>property in props)}},propTraps));return res.push(new Proxy({get(property){return blocked.has(property)?void 0:props[property]},has(property){return blocked.has(property)?!1:property in props},keys(){return Object.keys(props).filter(k=>!blocked.has(k))}},propTraps)),res}let descriptors=Object.getOwnPropertyDescriptors(props);return keys.push(Object.keys(descriptors).filter(k=>!blocked.has(k))),keys.map(k=>{let clone={};for(let i=0;i<k.length;i++){let key=k[i];key in props&&Object.defineProperty(clone,key,descriptors[key]?descriptors[key]:{get(){return props[key]},set(){return!0},enumerable:!0})}return clone})}function lazy(fn){let comp,p,wrap2=props=>{let ctx=sharedConfig.context;if(ctx){let[s,set]=createSignal();(p||(p=fn())).then(mod=>{setHydrateContext(ctx),set(()=>mod.default),setHydrateContext()}),comp=s}else if(!comp){let[s]=createResource(()=>(p||(p=fn())).then(mod=>mod.default));comp=s}let Comp;return createMemo(()=>(Comp=comp())&&untrack(()=>{if(!ctx)return Comp(props);let c=sharedConfig.context;setHydrateContext(ctx);let r=Comp(props);return setHydrateContext(c),r}))};return wrap2.preload=()=>p||((p=fn()).then(mod=>comp=()=>mod.default),p),wrap2}function createUniqueId(){let ctx=sharedConfig.context;return ctx?"".concat(ctx.id).concat(ctx.count++):"cl-".concat(counter++)}function For(props){let fallback="fallback"in props&&{fallback:()=>props.fallback};return createMemo(mapArray(()=>props.each,props.children,fallback||void 0))}function Index(props){let fallback="fallback"in props&&{fallback:()=>props.fallback};return createMemo(indexArray(()=>props.each,props.children,fallback||void 0))}function Show(props){let strictEqual=!1,keyed=props.keyed,condition=createMemo(()=>props.when,void 0,{equals:(a,b)=>strictEqual?a===b:!a==!b});return createMemo(()=>{let c=condition();if(c){let child=props.children,fn=typeof child=="function"&&child.length>0;return strictEqual=keyed||fn,fn?untrack(()=>child(c)):child}return props.fallback},void 0,void 0)}function Switch(props){let strictEqual=!1,keyed=!1,equals=(a,b)=>a[0]===b[0]&&(strictEqual?a[1]===b[1]:!a[1]==!b[1])&&a[2]===b[2],conditions=children(()=>props.children),evalConditions=createMemo(()=>{let conds=conditions();Array.isArray(conds)||(conds=[conds]);for(let i=0;i<conds.length;i++){let c=conds[i].when;if(c)return keyed=!!conds[i].keyed,[i,c,conds[i]]}return[-1]},void 0,{equals});return createMemo(()=>{let[index,when,cond]=evalConditions();if(index<0)return props.fallback;let c=cond.children,fn=typeof c=="function"&&c.length>0;return strictEqual=keyed||fn,fn?untrack(()=>c(when)):c},void 0,void 0)}function Match(props){return props}function resetErrorBoundaries(){Errors&&[...Errors].forEach(fn=>fn())}function ErrorBoundary(props){let err,v;sharedConfig.context&&sharedConfig.load&&(v=sharedConfig.load(sharedConfig.context.id+sharedConfig.context.count))&&(err=v[0]);let[errored,setErrored]=createSignal(err,void 0);return Errors||(Errors=new Set),Errors.add(setErrored),onCleanup(()=>Errors.delete(setErrored)),createMemo(()=>{let e;if(e=errored()){let f=props.fallback,res=typeof f=="function"&&f.length?untrack(()=>f(e,()=>setErrored())):f;return onError(setErrored),res}return onError(setErrored),props.children},void 0,void 0)}function SuspenseList(props){let[wrapper,setWrapper]=createSignal(()=>({inFallback:!1})),show,listContext=useContext(SuspenseListContext),[registry,setRegistry]=createSignal([]);listContext&&(show=listContext.register(createMemo(()=>wrapper()().inFallback)));let resolved=createMemo(prev=>{let reveal=props.revealOrder,tail=props.tail,{showContent=!0,showFallback=!0}=show?show():{},reg=registry(),reverse=reveal==="backwards";if(reveal==="together"){let all=reg.every(inFallback2=>!inFallback2()),res2=reg.map(()=>({showContent:all&&showContent,showFallback}));return res2.inFallback=!all,res2}let stop=!1,inFallback=prev.inFallback,res=[];for(let i=0,len=reg.length;i<len;i++){let n=reverse?len-i-1:i,s=reg[n]();if(!stop&&!s)res[n]={showContent,showFallback};else{let next=!stop;next&&(inFallback=!0),res[n]={showContent:next,showFallback:!tail||next&&tail==="collapsed"?showFallback:!1},stop=!0}}return stop||(inFallback=!1),res.inFallback=inFallback,res},{inFallback:!1});return setWrapper(()=>resolved),createComponent(SuspenseListContext.Provider,{value:{register:inFallback=>{let index;return setRegistry(registry2=>(index=registry2.length,[...registry2,inFallback])),createMemo(()=>resolved()[index],void 0,{equals:suspenseListEquals})}},get children(){return props.children}})}function Suspense(props){let counter2=0,show,ctx,p,flicker,error,[inFallback,setFallback]=createSignal(!1),SuspenseContext2=getSuspenseContext(),store={increment:()=>{++counter2===1&&setFallback(!0)},decrement:()=>{--counter2===0&&setFallback(!1)},inFallback,effects:[],resolved:!1},owner=getOwner();if(sharedConfig.context&&sharedConfig.load){let key=sharedConfig.context.id+sharedConfig.context.count,ref=sharedConfig.load(key);if(ref&&(p=ref[0])&&p!=="$$f"){(typeof p!="object"||!("then"in p))&&(p=Promise.resolve(p));let[s,set]=createSignal(void 0,{equals:!1});flicker=s,p.then(err=>{if(err||sharedConfig.done)return err&&(error=err),set();sharedConfig.gather(key),setHydrateContext(ctx),set(),setHydrateContext()})}}let listContext=useContext(SuspenseListContext);listContext&&(show=listContext.register(store.inFallback));let dispose2;return onCleanup(()=>dispose2&&dispose2()),createComponent(SuspenseContext2.Provider,{value:store,get children(){return createMemo(()=>{if(error)throw error;if(ctx=sharedConfig.context,flicker)return flicker(),flicker=void 0;ctx&&p==="$$f"&&setHydrateContext();let rendered=createMemo(()=>props.children);return createMemo(prev=>{let inFallback2=store.inFallback(),{showContent=!0,showFallback=!0}=show?show():{};if((!inFallback2||p&&p!=="$$f")&&showContent)return store.resolved=!0,dispose2&&dispose2(),dispose2=ctx=p=void 0,resumeEffects(store.effects),rendered();if(showFallback)return dispose2?prev:createRoot(disposer=>(dispose2=disposer,ctx&&(setHydrateContext({id:ctx.id+"f",count:0}),ctx=void 0),props.fallback),owner)})})}})}var taskIdCounter,isCallbackScheduled,isPerformingWork,taskQueue,currentTask,shouldYieldToHost,yieldInterval,deadline,maxYieldInterval,scheduleCallback,scheduledCallback,maxSigned31BitInt,sharedConfig,equalFn,$PROXY,$TRACK,$DEVCOMP,signalOptions,ERROR,runEffects,STALE,PENDING,UNOWNED,NO_INIT,Owner,Transition,Scheduler,ExternalSourceFactory,Listener,Updates,Effects,ExecCount,transPending,setTransPending,SuspenseContext,FALLBACK,hydrationEnabled,propTraps,counter,Errors,suspenseListEquals,SuspenseListContext,DEV,init_solid=__esm({"node_modules/solid-js/dist/solid.js"(){init_define_process_env();init_shim();taskIdCounter=1,isCallbackScheduled=!1,isPerformingWork=!1,taskQueue=[],currentTask=null,shouldYieldToHost=null,yieldInterval=5,deadline=0,maxYieldInterval=300,scheduleCallback=null,scheduledCallback=null,maxSigned31BitInt=1073741823;sharedConfig={};equalFn=(a,b)=>a===b,$PROXY=Symbol("solid-proxy"),$TRACK=Symbol("solid-track"),$DEVCOMP=Symbol("solid-dev-component"),signalOptions={equals:equalFn},ERROR=null,runEffects=runQueue,STALE=1,PENDING=2,UNOWNED={owned:null,cleanups:null,context:null,owner:null},NO_INIT={},Owner=null,Transition=null,Scheduler=null,ExternalSourceFactory=null,Listener=null,Updates=null,Effects=null,ExecCount=0,[transPending,setTransPending]=createSignal(!1);FALLBACK=Symbol("fallback");hydrationEnabled=!1;propTraps={get(_,property,receiver){return property===$PROXY?receiver:_.get(property)},has(_,property){return property===$PROXY?!0:_.has(property)},set:trueFn,deleteProperty:trueFn,getOwnPropertyDescriptor(_,property){return{configurable:!0,enumerable:!0,get(){return _.get(property)},set:trueFn,deleteProperty:trueFn}},ownKeys(_){return _.keys()}};counter=0;suspenseListEquals=(a,b)=>a.showContent===b.showContent&&a.showFallback===b.showFallback,SuspenseListContext=createContext()}});var require_web_queue_microtask=__commonJS({"node_modules/core-js/modules/web.queue-microtask.js"(){init_define_process_env();init_shim();var $2=require_export(),global=require_global(),microtask=require_microtask(),IS_NODE=require_engine_is_node(),process2=global.process;$2({global:!0,enumerable:!0,noTargetGet:!0},{queueMicrotask:function(fn){var domain=IS_NODE&&process2.domain;microtask(domain?domain.bind(fn):fn)}})}});var require_epoch=__commonJS({"lib-browser-old/constants/epoch.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.SPANS=exports.EPOCHS=void 0;var _SPAN_TYPES={drawing:"Drawing",network:"Network"},EPOCHS={load_runmode:{name:"Epoch: Runmode page fully loaded",start_at_page_load:!0},load_editor:{name:"Epoch: Editor page fully loaded",start_at_page_load:!0},load_maison:{name:"Epoch: Editor Maison page fully loaded",start_at_page_load:!0}};exports.EPOCHS=EPOCHS;var SPANS={render:{name:"Client: render complete",type:_SPAN_TYPES.drawing,start_at_page_load:!0,sync:!1},data_retrieval:{name:"Client: data retrieval",type:_SPAN_TYPES.network,sync:!1,start_at_page_load:!1},autorun_scheduled:{name:"Client: Autorun run_scheduled",type:_SPAN_TYPES.drawing,sync:!1,start_at_page_load:!1},page_draw:{name:"Client: page.draw()",type:_SPAN_TYPES.drawing,sync:!0,start_at_page_load:!1},rg_display_data_in_cells:{name:"Client: RepeatingGroup display_data_in_cells",type:_SPAN_TYPES.drawing,sync:!0,start_at_page_load:!1},rg_add_cells:{name:"Client: RepeatingGroup add_cells",type:_SPAN_TYPES.drawing,sync:!0,start_at_page_load:!1}};exports.SPANS=SPANS}});var require_domain=__commonJS({"lib-browser-old/constants/domain.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.OLD_META_HOSTNAME=exports.META_ORIGIN=exports.META_HOSTNAME=exports.LOCAL_HOSTNAME=exports.BLOG_URL=void 0;var _safe_require=_interopRequireDefault(require_safe_require());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_safe_require.default.safe_register("./constants/domain",exports);var META_HOSTNAME="bubble.io";exports.META_HOSTNAME=META_HOSTNAME;var META_ORIGIN="https://bubble.io";exports.META_ORIGIN=META_ORIGIN;var OLD_META_HOSTNAME="bubble.is";exports.OLD_META_HOSTNAME=OLD_META_HOSTNAME;var LOCAL_HOSTNAME="local.bubble.is";exports.LOCAL_HOSTNAME=LOCAL_HOSTNAME;var BLOG_URL="https://".concat(META_HOSTNAME,"/blog/");exports.BLOG_URL=BLOG_URL}});var require_domain_utilities=__commonJS({"lib-browser-old/shared/domain_utilities.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.LABEL_REGEX=void 0;exports.get_dedicated_env=get_dedicated_env;exports.get_domain_from_referer=get_domain_from_referer;exports.is_appname_valid=is_appname_valid;exports.is_environment_dedicated=is_environment_dedicated;exports.is_host_aws=is_host_aws;exports.is_host_ip_address=is_host_ip_address;exports.is_host_on_bubble=is_host_on_bubble;exports.is_hostname_bubble=is_hostname_bubble;exports.is_hostname_bubble_plus_subdomain=is_hostname_bubble_plus_subdomain;exports.is_hostname_dedicated=is_hostname_dedicated;exports.is_hostname_local_bubble=is_hostname_local_bubble;exports.is_hostname_valid=is_hostname_valid;exports.is_internal_request=is_internal_request;exports.is_origin_on_bubble=is_origin_on_bubble;exports.validate_url=validate_url;require_es_regexp_constructor();require_es_regexp_dot_all();require_es_regexp_exec();require_es_regexp_to_string();require_es_regexp_test();require_es_string_starts_with();require_es_string_match();require_es_array_iterator();require_web_dom_collections_iterator();require_web_url();require_web_url_search_params();var domain_consts=_interopRequireWildcard(require_domain()),_safe_require=_interopRequireDefault(require_safe_require());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}_safe_require.default.safe_register("./shared/domain_utilities",exports);var LABEL_REGEX=/^(?:[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?)$/;exports.LABEL_REGEX=LABEL_REGEX;var DOMAIN_REGEX=/^(?:[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?\.)+(?:xn--[a-z\d]+|[a-z]{2,})$/,DOMAIN_EXTRACT_REGEX=/^(?:https?:\/\/)?(?:[^@/\n]+@)?(?:www.)?([^:/\n]+)/,BUBBLE_IO_IS="bubble\\.i[so]",DEDICATED_ENV_NAME="(td|d\\d+)",BUBBLE_IO_IS_HOSTNAME=new RegExp("^".concat(BUBBLE_IO_IS,"$")),BUBBLE_IO_PLUS_SUB_HOSTNAME=new RegExp("^([a-z\\d-]+\\.)?".concat(domain_consts.META_HOSTNAME,"$")),BUBBLE_IO_IS_PLUS_SUB_ORIGIN=new RegExp("^https:\\/\\/([a-z\\d-]+\\.)?".concat(BUBBLE_IO_IS,"$")),BUBBLE_IO_IS_ANY_STRING=new RegExp("\\b".concat(BUBBLE_IO_IS,"(?:$|/)")),BUBBLE_DEDICATED_ENV_HOSTNAME=new RegExp("^".concat(DEDICATED_ENV_NAME,"\\.").concat(BUBBLE_IO_IS,"$")),BUBBLE_DEDICATED_ENV=new RegExp("^".concat(DEDICATED_ENV_NAME,"$")),AWS_HOST=/\.amazonaws\.com(?::\d+)?$/,IP_ADDRESS=/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/;function is_appname_valid(name){return LABEL_REGEX.test(name)}function is_hostname_valid(hostname){return DOMAIN_REGEX.test(hostname)}function is_hostname_local_bubble(hostname){return hostname===domain_consts.LOCAL_HOSTNAME}function is_host_aws(host){return AWS_HOST.test(host)}function is_host_ip_address(host){return IP_ADDRESS.test(host)}function is_internal_request(host){return!!host&&(host.startsWith("localhost")||is_host_aws(host)||is_host_ip_address(host))}function is_hostname_bubble(hostname){return BUBBLE_IO_IS_HOSTNAME.test(hostname)}function is_hostname_bubble_plus_subdomain(hostname){return BUBBLE_IO_PLUS_SUB_HOSTNAME.test(hostname)}function is_host_on_bubble(host){return BUBBLE_IO_IS_ANY_STRING.test(host)}function is_origin_on_bubble(origin){return BUBBLE_IO_IS_PLUS_SUB_ORIGIN.test(origin)}function is_hostname_dedicated(hostname){return BUBBLE_DEDICATED_ENV_HOSTNAME.test(hostname)}function is_environment_dedicated(env){return BUBBLE_DEDICATED_ENV.test(env)}function get_dedicated_env(hostname){var _hostname$match;if(hostname)return(_hostname$match=hostname.match(BUBBLE_DEDICATED_ENV_HOSTNAME))==null?void 0:_hostname$match[1]}function get_domain_from_referer(referer){if(referer!=null){if(referer.startsWith(domain_consts.BLOG_URL))return"bubble.io/blog";let match_data=DOMAIN_EXTRACT_REGEX.exec(referer);if(match_data)return match_data[1]}return"direct"}function validate_url(url){try{return new URL(url)}catch(e){return!1}}}});var require_client_storage=__commonJS({"lib-browser-old/u/client/client_storage.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.approve_global_clipboard=approve_global_clipboard;exports.clipboard_script=void 0;exports.cookies_enabled=cookies_enabled;exports.copy_on_click=copy_on_click;exports.createCookie=createCookie;exports.eraseCookie=eraseCookie;exports.events=void 0;exports.get_active_epoch=get_active_epoch;exports.get_all_cookies=get_all_cookies;exports.handle_clipboard_message=handle_clipboard_message;exports.initialize_global_clipboard=initialize_global_clipboard;exports.local_data_retrieve=local_data_retrieve;exports.local_data_store=local_data_store;exports.local_storage_get=local_storage_get;exports.local_storage_is_available=local_storage_is_available;exports.local_storage_put=local_storage_put;exports.local_storage_put_object=local_storage_put_object;exports.readCookie=readCookie;exports.rebuild_cookies=rebuild_cookies;exports.session_storage=void 0;exports.set_active_epoch=set_active_epoch;require_es_json_stringify();require_es_array_includes();require_es_string_includes();require_es_array_reduce();require_es_object_entries();require_es_array_iterator();require_web_dom_collections_iterator();require_es_regexp_exec();require_es_string_split();require_es_string_trim();var _events=_interopRequireDefault(require_events()),b_string=_interopRequireWildcard(require_b_string()),domain_consts=_interopRequireWildcard(require_domain()),domain_utilities=_interopRequireWildcard(require_domain_utilities()),errors=_interopRequireWildcard(require_errors()),logger=_interopRequireWildcard(require_logger()),mode_check=_interopRequireWildcard(require_mode_check()),uuid=_interopRequireWildcard(require_uuid()),_time=require_time();function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var client_storage_events=new _events.default.EventEmitter;exports.events=client_storage_events;var session_storage;exports.session_storage=session_storage;try{exports.session_storage=session_storage=(_window=window)==null?void 0:_window.sessionStorage}catch(error){}var _window;function local_data_store(data,show_warning){let key=uuid.LUID();return local_storage_put(key,data,show_warning),key}function local_data_retrieve(key){var _window2;let data=local_storage_get(key);return((_window2=window)==null?void 0:_window2.localStorage)==null?window.local_storage_fallback(key,null,!0):window.localStorage.removeItem(key),data}window.local_storage_fallback=(key,data,remove)=>{throw new errors.UnexpectedError("trying to store into localstorage, but it does not exist")};function local_storage_is_available(){var _window3;let test_key=uuid.LUID();if(((_window3=window)==null?void 0:_window3.localStorage)!=null)try{return window.localStorage.setItem(test_key,"testing-localstorage"),window.localStorage.removeItem(test_key),!0}catch(error1){return!1}return!1}function local_storage_put(key,data,show_warning,skip_global){local_storage_put_object({key,data,show_warning,skip_global})}function local_storage_put_object(_ref){var _window4;let{key,data,show_warning,skip_global,on_quota_exceeded_fn}=_ref;!skip_global&&use_global_clipboard(key)&&global_clipboard_put(key,data);let encoded=JSON.stringify(data);if(((_window4=window)==null?void 0:_window4.localStorage)==null)window.local_storage_fallback(key,encoded);else try{window.localStorage.setItem(key,encoded)}catch(err){let error=err;if(on_quota_exceeded_fn&&error.message.includes("exceeded the quota")){let current_key=window.localStorage.getItem(key),current_size=current_key?current_key.length+key.length:0,total_remaining=get_local_storage_remaining_char();on_quota_exceeded_fn(total_remaining+current_size);return}console.log(error.stack),console.log("clearing local storage"),client_storage_events.emit("pre_clear"),window.localStorage.clear(),client_storage_events.emit("clear");try{window.localStorage.setItem(key,encoded)}catch(error2){if(show_warning){var _window5,_window5$BrowserDetec;let msg;throw((_window5=window)==null||(_window5$BrowserDetec=_window5.BrowserDetect)==null?void 0:_window5$BrowserDetec.browser)==="Safari"?msg="Safari in private mode does not support local storage, which prevents the workflow from running properly.":msg="This browser does not support local storage, which prevents the workflow from running properly.",new errors.UserError(void 0,msg)}else throw new errors.UnexpectedError("Second local storage failure.  Encoded size is ".concat(encoded.length,", and message was: ").concat(error2.message,". key was ' +\n              ").concat(key," and data was: ").concat(encoded.slice(0,2e3)))}}}function local_storage_get(key){try{if(typeof window>"u")return JSON.parse(window.local_storage_fallback(key));if(window.localStorage==null)return logger.info("no local storage present"),null;var _window$localStorage$;return JSON.parse((_window$localStorage$=window.localStorage.getItem(key))!=null?_window$localStorage$:"null")}catch(e){return logger.info("cannot read local storage",{error:errors.ensure_bubble_error(e)}),null}}var get_local_storage_char=()=>Object.entries(window.localStorage).reduce((total,_ref2)=>{let[key,value]=_ref2;return total+key.length+value.length},0),PRECISION=1e3,MAX_LOCAL_STORAGE_CHARS=10*1e3*1e3,LOCAL_STORAGE_SIZE,get_local_storage_max_char=()=>{if(!LOCAL_STORAGE_SIZE){let min=get_local_storage_char(),max=MAX_LOCAL_STORAGE_CHARS,test_string=Array(max-min+1).join("0"),test_key=uuid.LUID(),mid;for(;max-min>PRECISION;){mid=Math.floor((max+min)/2);try{window.localStorage.setItem(test_key,test_string.slice(0,mid)),min=mid}catch(_unused){max=mid}}window.localStorage.removeItem(test_key),LOCAL_STORAGE_SIZE=min}return LOCAL_STORAGE_SIZE},get_local_storage_remaining_char=()=>get_local_storage_max_char()-get_local_storage_char();function smart_split_str(str,divider,limit){let pieces=str.split(divider),ret=[];return ret.push(...pieces.slice(0,limit)),ret.push(pieces.slice(limit).join(divider)),ret}var cookies=null,is_cookies=!1,cookies_built=!1;function rebuild_cookies(){if(mode_check.on_react_native()){var _cookies;(_cookies=cookies)!=null||(cookies={});return}if(cookies={},mode_check.on_phonegap())for(let name in window.localStorage){let value=window.localStorage[name];cookies[name]=value}else{var _document$cookie;for(let piece of document.cookie.split(";")){let[name,value]=smart_split_str(piece.trim(),"=",1);cookies[name]=value}is_cookies=((_document$cookie=document.cookie)==null?void 0:_document$cookie.length)>0,is_cookies||(document.cookie="testcookie=hello",is_cookies=document.cookie.includes("testcookie"),document.cookie="testcookie=; expires=Thu, 01 Jan 1970 00:00:01 GMT")}cookies_built=!0}function createCookie(name,value,days){if(mode_check.on_react_native()){var _cookies2;(_cookies2=cookies)!=null||(cookies={}),value?cookies[name]=value:delete cookies[name];return}if(mode_check.on_phonegap())window.localStorage.setItem(name,value);else{let expires,secure;days===-1?expires="; expires=Thu, 01 Jan 1970 00:00:01 GMT":days?expires="; expires="+new Date(Date.now()+days*_time.DAY_MS).toUTCString():expires="",b_string.starts_with(window.document.location.href,"https://")?secure="; secure; SameSite=Lax":secure="",document.cookie=name+"="+value+expires+"; path=/"+secure}cookies=null}function readCookie(name){var _name;return cookies||rebuild_cookies(),(_name=cookies[name])!=null?_name:null}function eraseCookie(name){createCookie(name,"",-1)}function cookies_enabled(){return cookies_built||rebuild_cookies(),mode_check.on_phonegap()||mode_check.on_react_native()||is_cookies}function get_all_cookies(){return cookies||rebuild_cookies(),Object.keys(cookies)}function use_global_clipboard(key){return mode_check.is_edit_mode()&&key.includes("clipboard")}var _clipboard_iframe;function global_clipboard_put(key,data){var _clipboard_iframe2,_clipboard_iframe2$0$;initialize_global_clipboard();let timestamp=Date.now();window.localStorage["_this_session_clipboard_"+key]=timestamp,(_clipboard_iframe2=_clipboard_iframe)==null||(_clipboard_iframe2$0$=_clipboard_iframe2[0].contentWindow)==null||_clipboard_iframe2$0$.postMessage({action:"global_clipboard_put",key,data,timestamp,id:uuid.UUID()},domain_consts.META_ORIGIN)}function approve_global_clipboard(origin){let approved=window.localStorage.global_clipboard_approved?JSON.parse(window.localStorage.global_clipboard_approved):[];approved.push(origin),console.log("Approved origin "+origin+" on this computer.  Please refresh your editor window"),window.localStorage.global_clipboard_approved=JSON.stringify(approved)}var clipboard_script="\nvar _dead = false;\nfunction receiveMessage(event) {\nif (_dead) { return; }\n\nif (!isOkay(event.origin)) {\n    _dead = true;\n    console.log('Note: an unrecognized domain, ' + event.origin + ', is trying to access your global Bubble editor clipboard.  If you would like to grant access, go to https://bubble.io, and in the javascript console, type client_storage.approve_global_clipboard(\\'' + event.origin + '\\'); and then refresh the editor window.');\n    return;\n}\n\nvar parentOrigin = event.origin;\n\nif (event.data.action === 'init_sync') {\n    function handleStoragePut(event) {\n        if (!event.key) { return; }\n        if (event.key.indexOf('global_clipboard_message_') != 0) { return; }\n        if (!event.newValue) { return; }\n        var message = JSON.parse(event.newValue);\n        parent.postMessage({\n            'action': 'new_clipboard_item',\n            'key': message.key,\n            'data': message.data,\n            'timestamp': message.timestamp\n        }, parentOrigin);\n    }\n\n    window.addEventListener(\"storage\", handleStoragePut, false);\n}\n\nif (event.data.action === 'global_clipboard_put') {\n    var message_key = 'global_clipboard_message_' + event.data.id;\n    window.localStorage[message_key] = JSON.stringify(event.data);\n    setTimeout(function() {\n        delete window.localStorage[message_key];\n    }, 10000);\n}\n}\n\nfunction isOkay(origin) {\nif (window.localStorage.global_clipboard_approved && JSON.parse(window.localStorage.global_clipboard_approved).indexOf(event.origin) > -1) {\n    return true;\n}\nif (/^https:\\/\\/([^\\.]+\\.)?bubble\\.i[so]$/.test(origin)) {\n    return true;\n}\nreturn false;\n}\n\nwindow.addEventListener(\"message\", receiveMessage, false);\n\nparent.postMessage({'action': 'init_me'}, '*');";exports.clipboard_script=clipboard_script;function initialize_global_clipboard(){_clipboard_iframe||(window.addEventListener("message",handle_clipboard_message,!1),_clipboard_iframe=$('<iframe\n     src="'.concat(domain_consts.META_ORIGIN,'/appeditor/clipboard"\n     style="position: absolute; left: -2px; width: 1px; height: 1px"\n></iframe>"')),$("body").append(_clipboard_iframe))}function handle_clipboard_message(event){var _event$data,_event$data2;if(!domain_utilities.is_origin_on_bubble(event.origin))return;if(((_event$data=event.data)==null?void 0:_event$data.action)==="init_me"){var _clipboard_iframe3,_clipboard_iframe3$0$;(_clipboard_iframe3=_clipboard_iframe)==null||(_clipboard_iframe3$0$=_clipboard_iframe3[0].contentWindow)==null||_clipboard_iframe3$0$.postMessage({action:"init_sync",url:window.location.href},domain_consts.META_ORIGIN);return}if(((_event$data2=event.data)==null?void 0:_event$data2.action)!=="new_clipboard_item")return;let storage_key=event.data.key;window.localStorage["_this_session_clipboard_"+storage_key]>=event.data.timestamp||(window.localStorage["_this_session_clipboard_"+storage_key]=event.data.timestamp,local_storage_put(event.data.key,event.data.data,!1,!0))}function copy_on_click(div,before,skip_css){skip_css||div.css({"-webkit-user-select":"all","-moz-user-select":"all","-ms-user-select":"all","user-select":"all",cursor:"pointer"});let text="(copied)";div.on("vclick",()=>{div.text().includes(text)||setTimeout(()=>{let new_text;document.execCommand("copy");let old_text=div.html();before?new_text=text+"  "+old_text:new_text=old_text+"  "+text,div.html(new_text),setTimeout(()=>{div.html(old_text)},1e3)},100)})}var transient={epoch:{active:void 0}};function get_active_epoch(){return transient.epoch.active}function set_active_epoch(epoch){transient.epoch.active=epoch}}});var require_epoch2=__commonJS({"lib-browser-old/client/metrics/epoch.js"(exports){"use strict";init_define_process_env();init_shim();require_es_symbol_description();require_es_object_get_own_property_descriptors();require_es_object_values();require_es_object_assign();require_web_dom_collections_for_each();require_es_error_cause();require_es_array_iterator();require_web_dom_collections_iterator();function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}function _classPrivateMethodInitSpec(obj,privateSet){_checkPrivateRedeclaration(obj,privateSet),privateSet.add(obj)}function _checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateMethodGet(receiver,privateSet,fn){if(!privateSet.has(receiver))throw new TypeError("attempted to get private field on non-instance");return fn}var uuid=require_uuid(),apm=require_apm(),epoch_consts=require_epoch(),Lib=require_lib(),mode_check=require_mode_check(),client_storage=require_client_storage(),epoch=exports,_createLabels=new WeakSet,Epoch=class{constructor(name){_classPrivateMethodInitSpec(this,_createLabels),this.name=name,this.id=uuid.UUID(),this.labels=_classPrivateMethodGet(this,_createLabels,_createLabels2).call(this),this.transaction=apm.startTransaction(name,this.labels)}};function _createLabels2(){let url=Lib().location.base_url,page=Lib().location.get_page(),user_appname=_getUserAppname(),appname=Lib().appname(),epoch_id=this.id;return{epoch_name:this.name,epoch_id,user_appname,appname,url,page}}epoch.start=name=>{epoch.end();let createdEpoch=new Epoch(name);client_storage.set_active_epoch(createdEpoch)};epoch.end=()=>{let activeEpoch=client_storage.get_active_epoch();if(activeEpoch){var _window,_window$performance,_window$performance$t,_Object$values$find;let windowFetchStart=(_window=window)==null||(_window$performance=_window.performance)==null||(_window$performance$t=_window$performance.timing)==null?void 0:_window$performance$t.fetchStart;(((_Object$values$find=Object.values(epoch_consts.EPOCHS).find(epochDetail=>epochDetail.name===activeEpoch.name))==null?void 0:_Object$values$find.start_at_page_load)||!1)&&windowFetchStart&&_updateStartTimesOnPageLoad(activeEpoch,windowFetchStart),apm.endTransaction(activeEpoch.transaction)}client_storage.set_active_epoch(void 0)};epoch.addEpochLabels=labels=>{let activeEpoch=client_storage.get_active_epoch();activeEpoch&&(Object.assign(activeEpoch.labels,labels),apm.addTransactionLabels(labels))};epoch.startSpan=function(name,type){let sync=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,activeEpoch=client_storage.get_active_epoch();if(activeEpoch)return apm.startSpan(name,_objectSpread(_objectSpread({},activeEpoch.labels),{},{type}),sync)};epoch.traceSpan=(name,type,fn)=>{let activeEpoch=client_storage.get_active_epoch();return activeEpoch?apm.traceSpan(name,_objectSpread(_objectSpread({},activeEpoch.labels),{},{type}),fn):fn()};epoch.endSpan=span=>{apm.endSpan(span)};var _getUserAppname=()=>{let appname=Lib().appname();if(mode_check.is_edit_mode()){var _Lib$location$get_que,_Lib$location$get_que2;return(_Lib$location$get_que=(_Lib$location$get_que2=Lib().location.get_query())==null?void 0:_Lib$location$get_que2.id)!=null?_Lib$location$get_que:appname}else return appname},_updateStartTimesOnPageLoad=(epoch2,windowFetchStart)=>{let transaction=epoch2.transaction;transaction.setStart(windowFetchStart),transaction.spans.filter(span=>{var _Object$values$find2;return(_Object$values$find2=Object.values(epoch_consts.SPANS).find(spanValue=>spanValue.name===span.name))==null?void 0:_Object$values$find2.start_at_page_load}).forEach(span=>span.setStart(windowFetchStart))}}});var require_scheduler=__commonJS({"lib-browser-old/u/shared/async/new/scheduler.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.batch=batch2;exports.schedule=schedule;exports.scheduled_key=void 0;require_es_array_iterator();require_web_dom_collections_iterator();require_web_queue_microtask();var _epoch=require_epoch(),_b_async=require_b_async(),_epoch2=_interopRequireDefault(require_epoch2()),mode_check=_interopRequireWildcard(require_mode_check()),_async_state=_interopRequireDefault(require_async_state());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var scheduled_key=(0,_b_async.MakeSwitch)(void 0,"autorun.scheduled_key");exports.scheduled_key=scheduled_key;scheduled_key.turn_on();var to_run=null,finishingEffects=!1;function run_scheduled(old_run){let span_details=_epoch.SPANS.autorun_scheduled;_epoch2.default.traceSpan(span_details.name,span_details.type,()=>{finishEffects(old_run)})}function batch2(fn){if(to_run!==null)return fn();to_run=[];let out;try{out=fn()}finally{mode_check.on_server()?finishingEffects||run_scheduled(to_run):setTimeout(run_scheduled,0,to_run)}return out}function finishEffects(old_run){finishingEffects=!0,to_run=null;for(let run of old_run)run.updateIfNecessary();finishingEffects=!1,to_run===null?queueMicrotask(()=>scheduled_key.turn_on()):mode_check.on_server()&&finishEffects(to_run)}function schedule(run){run.run_immediately?to_run.unshift(run):to_run.push(run),run.dont_track_scheduling||scheduled_key.turn_off()}_async_state.default.batch=batch2}});var require_autorun=__commonJS({"lib-browser-old/u/shared/async/new/autorun.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.Autorun=exports.AlwaysErrorWatcher=void 0;exports.Box=Box;exports.BoxClass=void 0;exports.FakeWatcher=FakeWatcher;exports.Watcher=Watcher;exports.autorun=autorun;exports.autorun_once=autorun_once;exports.autorun_return=autorun_return;exports.autorun_top=autorun_top;exports.autorun_warn=void 0;exports.autotop=autotop;exports.mock_auto_run=mock_auto_run;exports.no_outstanding_run_once=void 0;exports.removeSourceObservers=removeSourceObservers;exports.run_once=run_once;Object.defineProperty(exports,"scheduled_key",{enumerable:!0,get:function(){return _scheduler.scheduled_key}});exports.singleton=singleton;exports.updateSources=updateSources;exports.wait_for_attached=wait_for_attached;exports.wait_for_element=wait_for_element;exports.wait_for_updates=wait_for_updates;exports.wait_for_visible=wait_for_visible;require_es_promise();require_es_promise_finally();require_es_array_iterator();require_web_dom_collections_iterator();require_web_dom_collections_for_each();require_es_object_assign();var _async_state=_interopRequireDefault(require_async_state()),_b_async=require_b_async(),b_object=_interopRequireWildcard(require_b_object()),b_ui=_interopRequireWildcard(require_b_ui()),_dependency=require_dependency(),_errors=require_errors(),logger=_interopRequireWildcard(require_logger()),mode_check=_interopRequireWildcard(require_mode_check()),_uuid=require_uuid(),_solidJs=(init_solid(),__toCommonJS(solid_exports)),_safe_require=_interopRequireDefault(require_safe_require()),_scheduler=require_scheduler();function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_safe_require.default.safe_register("./u/shared/async/autorun",module.exports);var no_outstanding_run_once=(0,_b_async.MakeKeyList)();exports.no_outstanding_run_once=no_outstanding_run_once;function run_once(timeout_seconds,sync_fn,cb){let dont_wait=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,only_count_visible=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,promise;if(typeof timeout_seconds!="number")throw new _errors.UnexpectedError("calling run_once with non-numeric value for timeout_seconds");if(mode_check.on_server())promise=(0,_b_async.Promise)(sync_fn);else{let check_timed_out=function(){var _expected;if(done_key.is_turned())return;let expected=watcher.max_expected_time();(_expected=expected)!=null||(expected=visible_time_remaining(visibility_events,timeout_milliseconds,only_count_visible)),expected<0?timed_out():setTimeout(check_timed_out,Math.min(1e4,expected))},timed_out=function(){let waiting_on,status=watcher.get_current_status();status.status==="error"?waiting_on="WAS AN ERR, WHY DID WE NOT CALL ERROR HANDLER?":status.status==="ready"?waiting_on="WATCHER IS READY, WHY DID WE NOT CALL ONCE_VALUE: ".concat(String(status.value)):status.ready_keys?status.ready_keys.is_turned()?waiting_on="Watcher is marked not ready but keys are turned. _debug_turned_key = ".concat(String(watcher._debug_turned_key),". IS SCHEDULED: ").concat(String(watcher._dirty)):waiting_on="waiting on ".concat(String(status.ready_keys)):waiting_on="<NO READY KEYS>",_async_state.default.server_connection_problems?promise.reject(new _errors.UserError("BAD_CONNECTION")):promise.reject(new _errors.UnexpectedError("autorun.run_once timeout",{timeout_seconds,fn_source:String(sync_fn),waiting_on})),done_key.turn(),watcher.destroy()},done_key;promise=(0,_b_async.Promise)(null,"Running once: ".concat(String(sync_fn)));let visibility_events=[{timestamp:Date.now(),visibility:document.visibilityState}],visibilityHandler=()=>{visibility_events.push({timestamp:Date.now(),visibility:document.visibilityState})};document.addEventListener("visibilitychange",visibilityHandler),dont_wait?done_key=(0,_b_async.MakeKey)(timeout_seconds+5,"run once: "+String(sync_fn)):done_key=no_outstanding_run_once.make(timeout_seconds+5,"run once: "+String(sync_fn));let watcher=new Autorun(sync_fn,{watcher:!0,run_once:!0});dont_wait&&watcher.stop_track_scheduling(),watcher.once_value(val=>{done_key.is_turned()&&console.error("Watcher for run_once was not destroyed immediately"),done_key.turn(),document.removeEventListener("visibilitychange",visibilityHandler),promise.resolve(val)}),watcher.once_error(err=>{done_key.is_turned()&&console.error("Watcher for run_once was not destroyed immediately"),console.error("run_once failed with error",err),done_key.turn(),document.removeEventListener("visibilitychange",visibilityHandler),promise.reject(err)});let timeout_milliseconds=timeout_seconds*1e3;check_timed_out()}return cb&&promise.callback(cb),promise}function visible_time_remaining(visibility_events,timeout_milliseconds,only_count_visible){if(!only_count_visible)return visibility_events[0].timestamp+timeout_milliseconds-Date.now();let total_visible_time=0;for(let i=0;i<visibility_events.length-1;i++){let event=visibility_events[i],next_event=visibility_events[i+1];event.visibility==="visible"&&(total_visible_time+=next_event.timestamp-event.timestamp)}let current_time=Date.now(),last_event=visibility_events[visibility_events.length-1];return last_event.visibility==="visible"&&(total_visible_time+=current_time-last_event.timestamp),timeout_milliseconds-total_visible_time}function singleton(C){let _instance=null;return()=>(_instance==null&&(_instance=autorun_top(()=>new C)),_instance)}function safe_compare(a,b){try{return[!0,b_object.compare(a,b)]}catch(err){if(err instanceof _errors.NotReadyError)return[!1];throw err}}function Watcher(fn_or_params){let compare,fn;typeof fn_or_params=="function"?fn=fn_or_params:{fn,compare}=fn_or_params;let watcher=new Autorun(fn,{compare,watcher:!0});return(0,_scheduler.batch)(()=>(0,_scheduler.schedule)(watcher)),watcher}function FakeWatcher(data){return new FakeWatcherClass(data)}var FakeWatcherClass=class{constructor(data){this.data=void 0,this.data=data}get_ready_key(){return(0,_b_async.FakeKey)()}stop_track_scheduling(){}max_expected_time(){return null}invalidate(){}get_current(){return[!0,this.data]}get_current_status(){return{status:"ready",value:this.data}}get_current_status_array(){return[null,!0,this.data]}get(){return this.data}on_value(handler){handler(this.data)}on_error(){}on_not_ready(){}once_error(){}once_value(handler){handler(this.data)}once_change(){}on_condition(condition,handler){(condition===this.data||typeof condition=="function"&&condition(this.data))&&handler(this.data)}once_condition(condition,handler){this.on_condition(condition,handler)}destroy(){}};function wait_for_updates(fn){setTimeout(function(){_scheduler.scheduled_key.is_turned()?fn():(0,_b_async.WaitFor)(_scheduler.scheduled_key,()=>wait_for_updates(fn))},10)}function wait_for_element(selector,timeout,cb){let retry_timeout,err_timeout=setTimeout(function(){retry_timeout!=null&&clearTimeout(retry_timeout),cb("could not find ".concat(selector," after ").concat(timeout," ms"))},timeout);function wait(){$(selector).length>0?(clearTimeout(err_timeout),cb()):retry_timeout=setTimeout(wait,100)}wait()}function wait_for_attached(div,cb,options){var _options;(_options=options)!=null||(options={});let{error_message}=options,finished=!1;div.on("remove",function(){finished=!0});function check(fallback){var _fallback;if((_fallback=fallback)!=null||(fallback=10),!finished)if(b_ui.is_attached(div))cb();else if(typeof fallback=="function")fallback();else{let nextFallback=fallback*2;setTimeout(function(){check(nextFallback)},fallback)}}check(function(){(0,_b_async.WaitFor)(_scheduler.scheduled_key,function(){check(function(){error_message?logger.owner_warn("element not attached after scheduled_key",{display:error_message,html:div[0].outerHTML}):logger.error("element was not attached after autorun.scheduled_key",{html:div[0].outerHTML}),check()})})})}function wait_for_visible(div,cb){function check(fallback){var _fallback2;if((_fallback2=fallback)!=null||(fallback=10),!(fallback>500))if(div.is(":visible"))cb();else if(typeof fallback=="function")fallback();else{let nextFallback=fallback*2;setTimeout(()=>check(nextFallback),fallback)}}check(function(){(0,_b_async.WaitFor)(_scheduler.scheduled_key,()=>check())})}function autorun(fn_or_options,cleanup_or_empty){let options=typeof fn_or_options=="object"?fn_or_options:{do:fn_or_options,while:void 0,finally:cleanup_or_empty},{do:do_fn,while:while_fn,finally:finally_fn}=options;if(mode_check.is_edit_mode()){let old_do_fn=do_fn,old_finally_fn=finally_fn,disposer;do_fn=()=>{autorun_top(()=>(0,_solidJs.untrack)(()=>{var _disposer;return(_disposer=disposer)==null?void 0:_disposer()}));let not_ready=(0,_solidJs.createRoot)(dispose2=>{disposer=dispose2;try{old_do_fn()}catch(err){if(err instanceof _errors.NotReadyError)return err;throw err}return null});if(not_ready!=null)throw not_ready},finally_fn=()=>{var _disposer2;(_disposer2=disposer)==null||_disposer2(),old_finally_fn==null||old_finally_fn()}}if(while_fn)return conditional_autorun(do_fn,while_fn,finally_fn);{let ar=new Autorun(do_fn,{cleanup:finally_fn});return(0,_scheduler.batch)(()=>ar.evaluate()),ar}}function conditional_autorun(do_fn,while_fn,finally_fn){return(0,_scheduler.batch)(()=>{let run=new Autorun(do_fn,{cleanup:()=>{finally_fn==null||finally_fn(),pauser.destroy()}}),pauser=new Autorun(()=>{while_fn()?run.unpause():run.pause()});return pauser.evaluate(),run.updateIfNecessary(),run})}function updateSources(){let node=_async_state.default.CurrentAutoRun,newSources=_async_state.default.NewSources,newSourcesIndex=_async_state.default.NewSourcesIndex;if(newSources){if(node._sources&&removeSourceObservers(node,newSourcesIndex),node._sources&&newSourcesIndex>0){node._sources.length=newSourcesIndex+newSources.length;for(let i=0;i<newSources.length;i++)node._sources[newSourcesIndex+i]=newSources[i]}else node._sources=newSources;let source;for(let i=newSourcesIndex;i<node._sources.length;i++)source=node._sources[i],source._observers?source._observers.push(node):source._observers=[node]}else node._sources&&newSourcesIndex<node._sources.length&&(removeSourceObservers(node,newSourcesIndex),node._sources.length=newSourcesIndex)}function removeSourceObservers(node,index){let swap;for(let i=index;i<node._sources.length;i++){let source=node._sources[i];source._observers&&(swap=source._observers.indexOf(node),source._observers[swap]=source._observers[source._observers.length-1],source._observers.pop())}}var Autorun=class{constructor(fn){var _options$run_once,_options$watcher,_options$log_errors;let options=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this._is_destroyed=!1,this._dirty=!0,this._check=!1,this._parent=_async_state.default.CurrentAutoRun,this._subs=[],this._sources=null,this._observers=null,this._is_paused=!1,this._is_ancestor_paused=!1,this._fn=void 0,this._cleanup=void 0,this.run_once=void 0,this.id=(0,_uuid.LUID)(),this.run_immediately=!1,this.dont_track_scheduling=!1,this._watcher=void 0,this.error=void 0,this.value=void 0,this.ready=!1,this.ready_keys=void 0,this._debug_turned_key=void 0,this.listeners=void 0,this.error_listeners=void 0,this.not_ready_listeners=void 0,this._compare=void 0,this._log_errors=void 0,this._running=!1,this._fn=fn,this._cleanup=options.cleanup,this._compare=options.compare,this.run_once=(_options$run_once=options.run_once)!=null?_options$run_once:!1,this._watcher=(_options$watcher=options.watcher)!=null?_options$watcher:!1,this._log_errors=(_options$log_errors=options.log_errors)!=null?_options$log_errors:!0,!this._watcher&&this._parent!=null&&this._parent.add_sub(this)}set_run_immediately(run_immediately){this.run_immediately=run_immediately}alive(){return!this._is_destroyed}evaluate(){if(this._is_destroyed)return;if(this.ready_keys&&!this.ready_keys.is_turned()){this._dirty=!1;return}if(this._is_paused||this._is_ancestor_paused||!this._dirty)return;let old_not_ready_catcher=_async_state.default.CurrentNotReadyCatcher,my_not_ready_catcher=this._watcher?[]:null,old_autorun=_async_state.default.CurrentAutoRun,prevSources=_async_state.default.NewSources,prevSourcesIndex=_async_state.default.NewSourcesIndex,last_error,value,not_ready=!1;_async_state.default.CurrentNotReadyCatcher=my_not_ready_catcher,_async_state.default.CurrentAutoRun=this,_async_state.default.NewSources=null,_async_state.default.NewSourcesIndex=0,this._running=!0;try{this.destroy_subs(),value=this._fn()}catch(err){if(err instanceof _errors.NotReadyError&&err.not_ready_key!=null){let ready_key=err.not_ready_key;my_not_ready_catcher?my_not_ready_catcher.push(ready_key):ready_key.turned_dependency().register(),not_ready=!0}else last_error=(0,_errors.ensure_bubble_error)(err)}finally{updateSources(),_async_state.default.CurrentNotReadyCatcher=old_not_ready_catcher,_async_state.default.CurrentAutoRun=old_autorun,_async_state.default.NewSources=prevSources,_async_state.default.NewSourcesIndex=prevSourcesIndex}if(my_not_ready_catcher===null)not_ready||this.run_once&&this.destroy();else if(last_error!=null){if(this.error=last_error,this.value=void 0,this.ready=!0,this._debug_turned_key=void 0,this.invalidate_observers(2),this.error_listeners!=null&&this.error_listeners.size>0)for(let handler of this.error_listeners)try{handler(this.error)}catch(err){logger.log((0,_errors.ensure_bubble_error)(err))}else this._log_errors&&logger.log(this.error);this.run_once&&this.destroy()}else if(my_not_ready_catcher.length===0){let fire_updates=!this.ready;if(!fire_updates)if(this._compare)fire_updates=!this._compare(value,this.value);else{let comparison=safe_compare(value,this.value);fire_updates=!comparison[0]||!comparison[1]}if(fire_updates){if(this.ready=!0,this.error=void 0,this.value=value,this._debug_turned_key=void 0,this.invalidate_observers(2),this.listeners)for(let handler of this.listeners)try{handler(this.value)}catch(err){logger.log((0,_errors.ensure_bubble_error)(err))}}else this.value=value;this.run_once&&this.destroy()}else{var _this$ready_keys;if(this.ready&&this.not_ready_listeners)for(let handler of this.not_ready_listeners)try{handler()}catch(err){logger.log((0,_errors.ensure_bubble_error)(err))}this.ready=!1,this.value=value,this.error=void 0,(_this$ready_keys=this.ready_keys)!=null||(this.ready_keys=(0,_b_async.MakeKeyList)()),this.ready_keys.remove_all(!1);for(let key of my_not_ready_catcher)key.is_turned()?this._debug_turned_key=key:this.ready_keys.add_key(key);let dep=this.ready_keys.turned_dependency();this._sources?this._sources.push(dep):this._sources=[dep],dep._observers.push(this)}this._running=!1,this._dirty=!1,this._check=!1}destroy_subs(){for(let sub of this._subs)sub.destroy();this._subs=[]}destroy(){var _this$ready_keys2;this._is_destroyed=!0,this._sources&&(removeSourceObservers(this,0),this._sources=null),this.destroy_subs();try{var _this$_cleanup;(_this$_cleanup=this._cleanup)==null||_this$_cleanup.call(this)}catch(err){logger.error("Error while cleaning up autorun",{error:(0,_errors.ensure_bubble_error)(err)})}this.listeners=void 0,this.not_ready_listeners=void 0,this.error_listeners=void 0,this._observers=null,(_this$ready_keys2=this.ready_keys)==null||_this$ready_keys2.destroy(),this.ready_keys=void 0,this._dirty=!1,this._check=!1,this._cleanup=void 0,this._fn=void 0}add_sub(sub){this.run_once&&this._parent?this._parent.add_sub(sub):this._subs.push(sub)}stop_tracking(){this.dont_track_scheduling=!0}pause(){this._is_paused=!0,this._subs.forEach(pause_via_ancestor);function pause_via_ancestor(run){let already_paused=run._is_paused||run._is_ancestor_paused;run._is_ancestor_paused=!0,already_paused||run._subs.forEach(pause_via_ancestor)}}unpause(){this._is_paused=!1,(0,_scheduler.batch)(()=>this.run_or_unpause_subs())}run_or_unpause_subs(){this._is_paused||this._is_ancestor_paused||(this._dirty?this.updateIfNecessary():this._subs.forEach(sub=>{sub._is_ancestor_paused=!1,sub.run_or_unpause_subs()}))}updateIfNecessary(){if(!this._is_destroyed){if(this._check){if(this._sources){for(let source of this._sources)if(source.updateIfNecessary(),this._dirty)break}this._check=!1}this._dirty&&this.evaluate()}}invalidate_observers(state){if(!this._is_destroyed&&this._observers)for(let observer of this._observers)observer._invalidate(state)}invalidate(){this._is_destroyed||(0,_scheduler.batch)(()=>this._invalidate(2))}_invalidate(state){if(this._is_destroyed)return;let changed=!(this._check||this._dirty);state===1?this._dirty||(this._check=!0):(this._dirty=!0,this._check=!1),state!==2&&this._running&&console.error("Implicitly invalidated an Autorun, probably because a Box/Switch was mutated while running."),changed&&!this._running&&((0,_scheduler.schedule)(this),this.invalidate_observers(1))}get_ready_key(){var _this$ready_keys3;return(_this$ready_keys3=this.ready_keys)!=null||(this.ready_keys=(0,_b_async.TransientKeyList)()),this.ready_keys}stop_track_scheduling(){this.dont_track_scheduling=!0}max_expected_time(){var _this$ready_keys$max_,_this$ready_keys4;return(_this$ready_keys$max_=(_this$ready_keys4=this.ready_keys)==null?void 0:_this$ready_keys4.max_expected_time())!=null?_this$ready_keys$max_:null}get_current(){let no_throw=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if((0,_scheduler.batch)(()=>this.updateIfNecessary()),(0,_dependency.register_dependency)(this),this.error!=null){if(no_throw)return[null,null,this.error];throw this.error}return this.ready?[this.ready,this.value]:[this.ready,this.ready_keys]}get_current_status(){return this.error!=null?{status:"error",error:this.error}:this.ready?{status:"ready",value:this.value}:{status:"not_ready",ready_keys:this.ready_keys}}get_current_status_array(){return this.error!=null?[this.error]:this.ready?[null,this.ready,this.value]:[null,this.ready,this.ready_keys]}get(){if(this._is_destroyed){if(console.warn("reading from destroyed autorun"),this.error!=null)throw this.error;return this.ready||(0,_b_async.ensure_ready)(this.ready_keys,!1),this.value}return(0,_scheduler.batch)(()=>{if(this.updateIfNecessary(),this.error!=null)throw(0,_dependency.register_dependency)(this),this.error;return this.ready||((0,_b_async.ensure_ready)(this.ready_keys,!1),this.updateIfNecessary()),(0,_dependency.register_dependency)(this),this.value})}on_value(handler){var _this$listeners;if((0,_scheduler.batch)(()=>this.updateIfNecessary()),(_this$listeners=this.listeners)!=null||(this.listeners=new Set),this.listeners.add(handler),this.error!=null)logger.log(this.error);else if(this.ready)try{handler(this.value)}catch(err){logger.log((0,_errors.ensure_bubble_error)(err))}}on_condition(condition,handler){let passes_condition;typeof condition=="function"?passes_condition=condition:passes_condition=val=>val===condition,this.on_value(val=>{passes_condition(val)&&handler(val)})}on_not_ready(handler){var _this$not_ready_liste;if((_this$not_ready_liste=this.not_ready_listeners)!=null||(this.not_ready_listeners=new Set),this.not_ready_listeners.add(handler),!this.ready)try{handler()}catch(err){logger.log((0,_errors.ensure_bubble_error)(err))}}on_error(handler){var _this$error_listeners;if((0,_scheduler.batch)(()=>this.updateIfNecessary()),(_this$error_listeners=this.error_listeners)!=null||(this.error_listeners=new Set),this.error_listeners.add(handler),this.error!=null)try{handler(this.error)}catch(err){logger.log((0,_errors.ensure_bubble_error)(err))}}once_error(handler){let new_handler=err=>{var _this$error_listeners2;(_this$error_listeners2=this.error_listeners)==null||_this$error_listeners2.delete(new_handler),handler(err)};this.on_error(new_handler)}once_value(handler){let new_handler=val=>{var _this$listeners2;(_this$listeners2=this.listeners)==null||_this$listeners2.delete(new_handler),handler(val)};this.on_value(new_handler)}once_condition(condition,handler){let passes_condition;typeof condition=="function"?passes_condition=condition:passes_condition=val=>val===condition;let new_handler=val=>{if(passes_condition(val)){var _this$listeners3;(_this$listeners3=this.listeners)==null||_this$listeners3.delete(new_handler),handler(val)}};this.on_value(new_handler)}once_change(handler){var _this$listeners4;(_this$listeners4=this.listeners)!=null||(this.listeners=new Set);let new_handler=val=>{var _this$listeners5;(_this$listeners5=this.listeners)==null||_this$listeners5.delete(new_handler),handler(val)};this.listeners.add(new_handler)}};exports.Autorun=Autorun;function autorun_once(fn){let ar=new Autorun(fn,{run_once:!0});return(0,_scheduler.batch)(()=>ar.evaluate()),ar}function autorun_top(fn){let old_running=_async_state.default.CurrentAutoRun;_async_state.default.CurrentAutoRun=null;let old_not_ready_catcher=_async_state.default.CurrentNotReadyCatcher;_async_state.default.CurrentNotReadyCatcher=null;try{return fn()}catch(err){throw err instanceof _errors.NotReadyError&&logger.log((0,_errors.ensure_bubble_error)(err)),err}finally{_async_state.default.CurrentAutoRun=old_running,_async_state.default.CurrentNotReadyCatcher=old_not_ready_catcher}}var autorun_warn=autorun_top;exports.autorun_warn=autorun_warn;function autotop(fn){return autorun_top(()=>autorun(fn))}function mock_auto_run(fn){let mock=new MockAutoRun,old_running=_async_state.default.CurrentAutoRun,old_not_ready_catcher=_async_state.default.CurrentNotReadyCatcher,prevSources=_async_state.default.NewSources,prevSourcesIndex=_async_state.default.NewSourcesIndex;try{return _async_state.default.CurrentAutoRun=mock,_async_state.default.CurrentNotReadyCatcher=null,_async_state.default.NewSources=null,_async_state.default.NewSourcesIndex=0,fn(),mock}finally{updateSources(),_async_state.default.CurrentAutoRun=old_running,_async_state.default.CurrentNotReadyCatcher=old_not_ready_catcher,_async_state.default.NewSources=prevSources,_async_state.default.NewSourcesIndex=prevSourcesIndex}}var MockAutoRun=class{constructor(){this._check=void 0,this._dirty=void 0,this.id=void 0,this._sources=[],this._check=!1,this._dirty=!1,this.id=(0,_uuid.LUID)()}add_sub(sub){}stop_tracking(){}will_run(){if(this._check)for(let source of this._sources)source.updateIfNecessary();let old_dirty=this._dirty;return this._dirty=!1,this._check=!1,old_dirty}_invalidate(state){state===1&&(this._dirty||(this._check=!0)),(state===2||state===3)&&(this._dirty=!0,this._check=!1)}destroy(){removeSourceObservers(this,0),this._sources=[]}};function Box(state,not_ready){let b=new BoxClass(state);not_ready===!0&&b.not_ready();let val_fn=b.val.bind(b);return Object.assign(val_fn,{set:b.set.bind(b),get:b.get.bind(b),dangerously_peek:b.dangerously_peek.bind(b)})}var BoxClass=class extends _dependency.DependencyClass{constructor(state){super(),this.state=void 0,this.is_not_ready=void 0,this.not_ready_switch=void 0,this.state=state,this.is_not_ready=!1}not_ready(){var _this$not_ready_switc;this.is_not_ready=!0,(_this$not_ready_switc=this.not_ready_switch)!=null||(this.not_ready_switch=(0,_b_async.MakeSwitch)(void 0,"autorun.Box not_ready_switch")),this.not_ready_switch.turn_off()}val(new_val,not_ready){if(not_ready===!0)this.not_ready();else{if(new_val===void 0)return this.get();this.set(new_val)}}dangerously_peek(){return this.state}get(){return this.is_not_ready&&(0,_b_async.ensure_ready)(this.not_ready_switch),this.register(),this.state}set(new_val){b_object.compare(this.state,new_val)||(this.state=new_val,this.invalidate()),this.is_not_ready&&(this.is_not_ready=!1,this.not_ready_switch.turn_on())}};exports.BoxClass=BoxClass;function autorun_return(fn){let w=new Autorun(fn,{watcher:!0});return(0,_scheduler.batch)(()=>w.get())}var AlwaysErrorWatcher=new Autorun(()=>{throw new _errors.UnexpectedError("This watcher cannot be accessed")},{log_errors:!1});exports.AlwaysErrorWatcher=AlwaysErrorWatcher}});var require_autorun2=__commonJS({"lib-browser-old/u/shared/async/old/autorun.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.Autorun=exports.AlwaysErrorWatcher=void 0;exports.Box=Box;exports.BoxClass=void 0;exports.FakeWatcher=FakeWatcher;exports.Watcher=Watcher;exports.autorun=autorun;exports.autorun_once=autorun_once;exports.autorun_return=autorun_return;exports.autorun_top=autorun_top;exports.autorun_warn=autorun_warn;exports.autorun_watch=autorun_watch;exports.autotop=autotop;exports.mock_auto_run=mock_auto_run;exports.no_outstanding_run_once=void 0;exports.run_once=run_once;exports.scheduled_key=exports.schedule=void 0;exports.singleton=singleton;exports.wait_for_attached=wait_for_attached;exports.wait_for_element=wait_for_element;exports.wait_for_updates=wait_for_updates;exports.wait_for_updates_keys=void 0;exports.wait_for_visible=wait_for_visible;require_es_array_iterator();require_web_dom_collections_iterator();require_es_regexp_to_string();require_es_promise();require_es_promise_finally();require_web_dom_collections_for_each();require_web_queue_microtask();require_es_object_values();require_es_object_assign();var _async_state=_interopRequireDefault(require_async_state2()),_b_async=require_b_async2(),b_object=_interopRequireWildcard(require_b_object()),b_ui=_interopRequireWildcard(require_b_ui()),_dependency=require_dependency2(),_errors=require_errors(),logger=_interopRequireWildcard(require_logger()),mode_check=_interopRequireWildcard(require_mode_check()),_uuid=require_uuid(),_epoch=_interopRequireDefault(require_epoch2()),_epoch2=require_epoch(),_solidJs=(init_solid(),__toCommonJS(solid_exports)),_safe_require=_interopRequireDefault(require_safe_require());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_safe_require.default.safe_register("./u/shared/async/autorun",module.exports);var no_outstanding_run_once=(0,_b_async.MakeKeyList)();exports.no_outstanding_run_once=no_outstanding_run_once;function run_once(timeout_seconds,sync_fn,cb){let dont_wait=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,only_count_visible=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,promise;if(typeof timeout_seconds!="number")throw new _errors.UnexpectedError("calling run_once with non-numeric value for timeout_seconds");if(mode_check.on_server())promise=(0,_b_async.Promise)(sync_fn);else{let check_timed_out=function(){var _expected;if(done_key.is_turned())return;let expected=watcher.max_expected_time();(_expected=expected)!=null||(expected=visible_time_remaining(visibility_events,timeout_milliseconds,only_count_visible)),expected<0?timed_out():setTimeout(check_timed_out,Math.min(1e4,expected))},timed_out=function(){let waiting_on,status=watcher.get_current_status();status.status==="error"?waiting_on="WAS AN ERR, WHY DID WE NOT CALL ERROR HANDLER?":status.status==="ready"?waiting_on="WATCHER IS READY, WHY DID WE NOT CALL ONCE_VALUE: ".concat(String(status.value)):status.ready_keys?status.ready_keys.is_turned()?waiting_on="Watcher is marked not ready but keys are turned. _debug_turned_key = ".concat(String(watcher._debug_turned_key),". IS SCHEDULED: ").concat(String(!!watcher._is_scheduled)):waiting_on="waiting on ".concat(String(status.ready_keys)):waiting_on="<NO READY KEYS>",removeVisbilityHandler(),_async_state.default.server_connection_problems?promise.reject(new _errors.UserError("BAD_CONNECTION")):promise.reject(new _errors.UnexpectedError("autorun.run_once timeout",{timeout_seconds,fn_source:String(sync_fn),waiting_on})),done_key.turn(),watcher.destroy()},done_key;promise=(0,_b_async.Promise)(null,"Running once: ".concat(String(sync_fn)));let visibility_events=[{timestamp:Date.now(),visibility:mode_check.on_react_native()?"visible":document.visibilityState}],removeVisbilityHandler=()=>{};if(only_count_visible&&(only_count_visible=!mode_check.on_react_native()),only_count_visible){let visibilityHandler=()=>{visibility_events.push({timestamp:Date.now(),visibility:document.visibilityState})};document.addEventListener("visibilitychange",visibilityHandler),removeVisbilityHandler=()=>{document.removeEventListener("visibilitychange",visibilityHandler)}}dont_wait?done_key=(0,_b_async.MakeKey)(timeout_seconds+5,"run once: "+String(sync_fn)):done_key=no_outstanding_run_once.make(timeout_seconds+5,"run once: "+String(sync_fn));let watcher=Watcher(sync_fn);dont_wait&&watcher.dont_track_scheduling(),watcher.once_value(val=>{done_key.is_turned()||(done_key.turn(),watcher.destroy(),removeVisbilityHandler(),promise.resolve(val))}),watcher.once_error(err=>{done_key.is_turned()||(done_key.turn(),watcher.destroy(),removeVisbilityHandler(),promise.reject(err))});let timeout_milliseconds=timeout_seconds*1e3;check_timed_out()}return cb&&promise.callback(cb),promise}function visible_time_remaining(visibility_events,timeout_milliseconds,only_count_visible){if(!only_count_visible)return visibility_events[0].timestamp+timeout_milliseconds-Date.now();let total_visible_time=0;for(let i=0;i<visibility_events.length-1;i++){let event=visibility_events[i],next_event=visibility_events[i+1];event.visibility==="visible"&&(total_visible_time+=next_event.timestamp-event.timestamp)}let current_time=Date.now(),last_event=visibility_events[visibility_events.length-1];return last_event.visibility==="visible"&&(total_visible_time+=current_time-last_event.timestamp),timeout_milliseconds-total_visible_time}function singleton(C){let _instance=null;return()=>(_instance==null&&(_instance=autorun_top(()=>new C)),_instance)}function _try_catch_finally(t,c,f){try{t()}catch(err){c(err)}finally{f()}}function safe_compare(a,b){try{return[!0,b_object.compare(a,b)]}catch(err){if(err instanceof _errors.NotReadyError)return[!1];throw err}}function Watcher(fn_or_params){let watcher_test=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,compare,fn;return typeof fn_or_params=="function"?fn=fn_or_params:{fn,compare}=fn_or_params,new WatcherClass(fn,{watcher_test,compare})}var WatcherClass=class{constructor(fn){var _this$_ar_object;let options=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.evaluate=void 0,this.ready_keys=void 0,this._is_scheduled=void 0,this._dont_track_scheduling=!1,this._ar_object=void 0,this.error=void 0,this.value=void 0,this.ready=!1,this._debug_turned_key=void 0,this.dependency=void 0,this.error_listeners=void 0,this.listeners=void 0,this.not_ready_listeners=void 0;let{watcher_test=!1,compare,log_errors=!0}=options;this.evaluate=()=>{let old_not_ready_catcher=_async_state.default.CurrentNotReadyCatcher,my_not_ready_catcher=[],old_autorun=_async_state.default.CurrentAutoRun,my_autorun={id:(0,_uuid.LUID)(),_subs:[],invalidate:()=>{if(this.ready_keys&&!this.ready_keys.is_turned()){this.ready_keys.turned_dependency().register(my_autorun);return}my_autorun.invalidate=function(){},my_autorun.destroy(),mode_check.running_test()&&!watcher_test?my_autorun.run_me():(mode_check.on_server()&&logger.warn("invalidating watcher on server",{keys:String(this.ready_keys)}),schedule(my_autorun),this._is_scheduled=my_autorun)},add_sub:sub=>{my_autorun._subs.push(sub)},destroy_subs(){for(let sub of my_autorun._subs)sub.destroy();my_autorun._subs=[]},_is_destroyed:!1,destroy:()=>{my_autorun._is_destroyed=!0,my_autorun.destroy_subs()},run_me:()=>{my_autorun.run_me=function(){},my_autorun===this._is_scheduled&&(this._is_scheduled=void 0),this.evaluate()},dont_track_scheduling:this._dont_track_scheduling,stop_tracking:()=>{this.dont_track_scheduling()}};this._ar_object=my_autorun;let last_error,value;if(_try_catch_finally(function(){_async_state.default.CurrentNotReadyCatcher=my_not_ready_catcher,_async_state.default.CurrentAutoRun=my_autorun,value=fn()},function(err){if(err instanceof _errors.NotReadyError&&err.not_ready_key!=null){let ready_key=err.not_ready_key;!ready_key.is_registered(my_autorun)&&err.suppress_dependency_error!==!0&&logger.error("Watcher caught unregistered key",{key:ready_key.toString()}),my_not_ready_catcher.push(ready_key)}else last_error=(0,_errors.ensure_bubble_error)(err)},function(){_async_state.default.CurrentNotReadyCatcher=old_not_ready_catcher,_async_state.default.CurrentAutoRun=old_autorun}),last_error!=null){var _this$dependency;if(this.error=last_error,this.value=void 0,this.ready=!0,this._debug_turned_key=void 0,(_this$dependency=this.dependency)==null||_this$dependency.invalidate(),this.error_listeners!=null&&this.error_listeners.size>0)for(let handler of this.error_listeners)try{handler(this.error)}catch(err){logger.log((0,_errors.ensure_bubble_error)(err))}else log_errors&&logger.log(this.error)}else if(my_not_ready_catcher.length===0){let fire_updates=!this.ready;if(!fire_updates)if(compare)fire_updates=!compare(value,this.value);else{let comparison=safe_compare(value,this.value);fire_updates=!comparison[0]||!comparison[1]}if(fire_updates){var _this$dependency2;if(this.ready=!0,this.error=void 0,this.value=value,this._debug_turned_key=void 0,(_this$dependency2=this.dependency)==null||_this$dependency2.invalidate(),this.listeners)for(let handler of this.listeners)try{handler(this.value)}catch(err){logger.log((0,_errors.ensure_bubble_error)(err))}}else this.value=value}else{var _this$ready_keys;if(this.ready&&this.not_ready_listeners)for(let handler of this.not_ready_listeners)try{handler()}catch(err){logger.log((0,_errors.ensure_bubble_error)(err))}this.ready=!1,this.value=void 0,this.error=void 0,(_this$ready_keys=this.ready_keys)!=null||(this.ready_keys=(0,_b_async.MakeKeyList)()),this.ready_keys.remove_all();for(let key of my_not_ready_catcher)key.is_turned()?this._debug_turned_key=key:this.ready_keys.add_key(key)}},this.evaluate(),((_this$_ar_object=this._ar_object)==null?void 0:_this$_ar_object._has_dependency)===!0||!this.ready?this.dependency=(0,_dependency.Dependency)():(this.evaluate=void 0,this._ar_object=void 0)}get_ready_key(){var _this$ready_keys2;return(_this$ready_keys2=this.ready_keys)!=null||(this.ready_keys=(0,_b_async.TransientKeyList)()),this.ready_keys}dont_track_scheduling(){this._dont_track_scheduling=!0,this._ar_object&&(this._ar_object.dont_track_scheduling=!0)}invalidate(){var _this$_ar_object2;return(_this$_ar_object2=this._ar_object)==null?void 0:_this$_ar_object2.invalidate()}max_expected_time(){var _this$ready_keys$max_,_this$ready_keys3;return(_this$ready_keys$max_=(_this$ready_keys3=this.ready_keys)==null?void 0:_this$ready_keys3.max_expected_time())!=null?_this$ready_keys$max_:null}get_current(){var _this$_is_scheduled,_this$dependency3;let no_throw=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if((_this$_is_scheduled=this._is_scheduled)==null||_this$_is_scheduled.run_me(),(_this$dependency3=this.dependency)==null||_this$dependency3.register(),this.error!=null){if(no_throw)return[null,null,this.error];throw this.error}return this.ready?[this.ready,this.value]:[this.ready,this.ready_keys]}get_current_status(){return this.error!=null?{status:"error",error:this.error}:this.ready?{status:"ready",value:this.value}:{status:"not_ready",ready_keys:this.ready_keys}}get_current_status_array(){return this.error!=null?[this.error]:this.ready?[null,this.ready,this.value]:[null,this.ready,this.ready_keys]}get(){var _this$_is_scheduled2,_this$dependency6;if((_this$_is_scheduled2=this._is_scheduled)==null||_this$_is_scheduled2.run_me(),this.error!=null){var _this$dependency4;throw(_this$dependency4=this.dependency)==null||_this$dependency4.register(),this.error}if(!this.ready){var _this$dependency5;(0,_b_async.ensure_ready)(this.ready_keys,!1),this.evaluate();let value=this.get();return(_this$dependency5=this.dependency)==null||_this$dependency5.register(),value}return(_this$dependency6=this.dependency)==null||_this$dependency6.register(),this.value}on_value(handler){var _this$listeners;if((_this$listeners=this.listeners)!=null||(this.listeners=new Set),this.listeners.add(handler),this.error!=null)logger.log(this.error);else if(this.ready)try{handler(this.value)}catch(err){logger.log((0,_errors.ensure_bubble_error)(err))}}on_condition(condition,handler){let passes_condition;typeof condition=="function"?passes_condition=condition:passes_condition=val=>val===condition,this.on_value(val=>{passes_condition(val)&&handler(val)})}on_not_ready(handler){var _this$not_ready_liste;if((_this$not_ready_liste=this.not_ready_listeners)!=null||(this.not_ready_listeners=new Set),this.not_ready_listeners.add(handler),!this.ready)try{handler()}catch(err){logger.log((0,_errors.ensure_bubble_error)(err))}}on_error(handler){var _this$error_listeners;if((_this$error_listeners=this.error_listeners)!=null||(this.error_listeners=new Set),this.error_listeners.add(handler),this.error!=null)try{handler(this.error)}catch(err){logger.log((0,_errors.ensure_bubble_error)(err))}}once_error(handler){let new_handler=err=>{var _this$error_listeners2;(_this$error_listeners2=this.error_listeners)==null||_this$error_listeners2.delete(new_handler),handler(err)};this.on_error(new_handler)}once_value(handler){let new_handler=val=>{var _this$listeners2;(_this$listeners2=this.listeners)==null||_this$listeners2.delete(new_handler),handler(val)};this.on_value(new_handler)}once_condition(condition,handler){let passes_condition;typeof condition=="function"?passes_condition=condition:passes_condition=val=>val===condition;let new_handler=val=>{if(passes_condition(val)){var _this$listeners3;(_this$listeners3=this.listeners)==null||_this$listeners3.delete(new_handler),handler(val)}};this.on_value(new_handler)}once_change(handler){var _this$listeners4;(_this$listeners4=this.listeners)!=null||(this.listeners=new Set);let new_handler=val=>{var _this$listeners5;(_this$listeners5=this.listeners)==null||_this$listeners5.delete(new_handler),handler(val)};this.listeners.add(new_handler)}destroy(){var _this$ready_keys4,_this$_ar_object3;this.listeners=void 0,this.not_ready_listeners=void 0,this.error_listeners=void 0,this.dependency=void 0,(_this$ready_keys4=this.ready_keys)==null||_this$ready_keys4.destroy(),this.ready_keys=void 0,this.evaluate=function(){},this._is_scheduled=void 0,(_this$_ar_object3=this._ar_object)==null||_this$_ar_object3.destroy(),this._ar_object=void 0}},AlwaysErrorWatcher=new WatcherClass(()=>{throw new _errors.UnexpectedError("This watcher cannot be accessed")},{log_errors:!1});exports.AlwaysErrorWatcher=AlwaysErrorWatcher;function FakeWatcher(data){return new FakeWatcherClass(data)}var FakeWatcherClass=class{constructor(data){this.data=void 0,this.data=data}get_ready_key(){return(0,_b_async.FakeKey)()}dont_track_scheduling(){}max_expected_time(){return null}invalidate(){}get_current(){return[!0,this.data]}get_current_status(){return{status:"ready",value:this.data}}get_current_status_array(){return[null,!0,this.data]}get(){return this.data}on_value(handler){handler(this.data)}on_error(){}on_not_ready(){}once_error(){}once_value(handler){handler(this.data)}once_change(){}on_condition(condition,handler){(condition===this.data||typeof condition=="function"&&condition(this.data))&&handler(this.data)}once_condition(condition,handler){this.on_condition(condition,handler)}destroy(){}},wait_for_updates_keys=(0,_b_async.MakeKeyList)();exports.wait_for_updates_keys=wait_for_updates_keys;function wait_for_updates(fn){setTimeout(function(){scheduled_key.is_turned()&&wait_for_updates_keys.is_turned()?fn():(0,_b_async.WaitFor)(scheduled_key,wait_for_updates_keys,()=>wait_for_updates(fn))},10)}function wait_for_element(selector,timeout,cb){let retry_timeout,err_timeout=setTimeout(function(){retry_timeout!=null&&clearTimeout(retry_timeout),cb("could not find ".concat(selector," after ").concat(timeout," ms"))},timeout);function wait(){$(selector).length>0?(clearTimeout(err_timeout),cb()):retry_timeout=setTimeout(wait,100)}wait()}function wait_for_attached(div,cb,options){var _options;(_options=options)!=null||(options={});let{error_message}=options,finished=!1;div.on("remove",function(){finished=!0});function check(fallback){var _fallback;if((_fallback=fallback)!=null||(fallback=10),!finished)if(b_ui.is_attached(div))cb();else if(typeof fallback=="function")fallback();else{let nextFallback=fallback*2;setTimeout(function(){check(nextFallback)},fallback)}}check(function(){(0,_b_async.WaitFor)(scheduled_key,function(){check(function(){error_message?logger.owner_warn("element not attached after scheduled_key",{display:error_message,html:div[0].outerHTML}):logger.error("element was not attached after autorun.scheduled_key",{html:div[0].outerHTML}),check()})})})}function wait_for_visible(div,cb){function check(fallback){var _fallback2;if((_fallback2=fallback)!=null||(fallback=10),!(fallback>500))if(div.is(":visible"))cb();else if(typeof fallback=="function")fallback();else{let nextFallback=fallback*2;setTimeout(()=>check(nextFallback),fallback)}}check(function(){(0,_b_async.WaitFor)(scheduled_key,()=>check())})}function autorun(fn_or_options,cleanup_or_empty){let options=typeof fn_or_options=="object"?fn_or_options:{do:fn_or_options,while:void 0,finally:cleanup_or_empty},{do:do_fn,while:while_fn,finally:finally_fn}=options;if(mode_check.is_edit_mode()){let old_do_fn=do_fn,old_finally_fn=finally_fn,disposer;do_fn=()=>{autorun_top(()=>(0,_solidJs.untrack)(()=>{var _disposer;return(_disposer=disposer)==null?void 0:_disposer()}));let not_ready=(0,_solidJs.createRoot)(dispose2=>{disposer=dispose2;try{old_do_fn()}catch(err){if(err instanceof _errors.NotReadyError)return err;throw err}return null});if(not_ready!=null)throw not_ready},finally_fn=()=>{var _disposer2;(_disposer2=disposer)==null||_disposer2(),old_finally_fn==null||old_finally_fn()}}return while_fn?conditional_autorun(do_fn,while_fn,finally_fn):new Autorun(do_fn,finally_fn).run_me()}function conditional_autorun(do_fn,while_fn,finally_fn){let has_ever_run=!1,run=new Autorun(do_fn,()=>{finally_fn==null||finally_fn(),pauser.destroy()}),pauser=new Autorun(()=>{while_fn()?(run.unpause(),has_ever_run||(has_ever_run=!0,run.run_me())):run.pause()}).run_me();return run}var Autorun=class{constructor(fn,cleanup){let run_once2=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this._is_destroyed=!1,this._subs=[],this._is_paused=!1,this._is_ancestor_paused=!1,this._run_on_unpause=!1,this.fn=void 0,this.cleanup=void 0,this.run_once=void 0,this.id=void 0,this.run_immediately=!1,this._is_running=!1,this._do_another_run=void 0,this._recursive_runs=void 0,this.dont_track_scheduling=!1,this.fn=fn,this.cleanup=cleanup,this.run_once=run_once2,this.id=(0,_uuid.LUID)(),_async_state.default.CurrentAutoRun!=null&&_async_state.default.CurrentAutoRun.add_sub(this)}set_run_immediately(run_immediately){this.run_immediately=run_immediately}alive(){return!this._is_destroyed}invalidate(){if(!this._is_destroyed&&!this.run_once){if(_auto_run_to_watch===this&&logger.error("Watched autorun just got invalidated"),this._is_paused||this._is_ancestor_paused){this._run_on_unpause=!0;return}if(this.run_immediately||mode_check.on_server())if(this._is_running){if(this._do_another_run=!0,this._recursive_runs!=null&&this._recursive_runs>20)throw new _errors.UnexpectedError("recursive autorun run immediately loop")}else this.run_me();else schedule(this)}}run_me(){if(this._is_destroyed)return this;if(this._is_paused||this._is_ancestor_paused)return this._run_on_unpause=!0,this;this.destroy_subs();let old_running=_async_state.default.CurrentAutoRun;_async_state.default.CurrentAutoRun=this;let old_not_ready_catcher=_async_state.default.CurrentNotReadyCatcher;_async_state.default.CurrentNotReadyCatcher=null,this._is_running=!0;try{this.fn()}catch(err){if(err instanceof _errors.NotReadyError&&err.not_ready_key!=null){let key=err.not_ready_key;!key.is_registered(this)&&err.suppress_dependency_error!==!0&&logger.error("Unregistered key caught by autorun",{key:key.toString()})}else logger.log((0,_errors.ensure_bubble_error)(err))}finally{this._is_running=!1,_async_state.default.CurrentAutoRun=old_running,_async_state.default.CurrentNotReadyCatcher=old_not_ready_catcher}if(this._do_another_run===!0){var _this$_recursive_runs;this._do_another_run=!1,(_this$_recursive_runs=this._recursive_runs)!=null||(this._recursive_runs=0),this._recursive_runs++,this.run_me()}else delete this._recursive_runs;return this}destroy_subs(){for(let sub of this._subs)sub.destroy();this._subs=[]}destroy(){var _this$cleanup;this._is_destroyed=!0,this.destroy_subs(),(_this$cleanup=this.cleanup)==null||_this$cleanup.call(this)}add_sub(sub){this._subs.push(sub)}stop_tracking(){this.dont_track_scheduling=!0}pause(){this._is_paused=!0,this._subs.forEach(pause_via_ancestor);function pause_via_ancestor(run){let already_paused=run._is_paused||run._is_ancestor_paused;run._is_ancestor_paused=!0,already_paused||run._subs.forEach(pause_via_ancestor)}}unpause(){this._is_paused=!1,run_or_unpause_subs(this);function run_or_unpause_subs(run){run._is_paused||run._is_ancestor_paused||(run._run_on_unpause?(run._run_on_unpause=!1,run.invalidate()):run._subs.forEach(sub=>{sub._is_ancestor_paused=!1,run_or_unpause_subs(sub)}))}}};exports.Autorun=Autorun;function autorun_once(fn){return new Autorun(fn,void 0,!0).run_me()}function autorun_warn(fn){return fn()}function autorun_top(fn){let old_running=_async_state.default.CurrentAutoRun;_async_state.default.CurrentAutoRun=null;let old_not_ready_catcher=_async_state.default.CurrentNotReadyCatcher;_async_state.default.CurrentNotReadyCatcher=null;try{return fn()}catch(err){throw err instanceof _errors.NotReadyError&&logger.log((0,_errors.ensure_bubble_error)(err)),err}finally{_async_state.default.CurrentAutoRun=old_running,_async_state.default.CurrentNotReadyCatcher=old_not_ready_catcher}}function autotop(fn){return autorun_top(()=>autorun(fn))}function mock_auto_run(fn){let old_not_ready_catcher,old_running;try{old_running=_async_state.default.CurrentAutoRun;let mock=new MockAutoRun;return _async_state.default.CurrentAutoRun=mock,old_not_ready_catcher=_async_state.default.CurrentNotReadyCatcher,_async_state.default.CurrentNotReadyCatcher=null,fn(),mock}finally{_async_state.default.CurrentAutoRun=old_running,_async_state.default.CurrentNotReadyCatcher=old_not_ready_catcher}}var MockAutoRun=class{constructor(){this.wr=void 0,this.id=void 0,this.wr=!1,this.id=(0,_uuid.LUID)()}add_sub(sub){}stop_tracking(){}will_run(){return this.wr}invalidate(){this.wr=!0}destroy(){}},scheduled_key=(0,_b_async.MakeSwitch)(void 0,"autorun.scheduled_key");exports.scheduled_key=scheduled_key;scheduled_key.turn_on();var schedule=function(){let to_run={},_is_scheduled=!1,microtask_count=0,_running_autoruns=!1,MAX_MICROTASKS=mode_check.is_edit_mode()?0:100;function ensure_scheduled(){if(!_is_scheduled)if(_is_scheduled=!0,microtask_count++,_running_autoruns)microtask_count<=MAX_MICROTASKS?queueMicrotask(run_scheduled):(setTimeout(run_scheduled,1),microtask_count=0);else{var _window,_window$requestAnimat;(_window=window)==null||(_window$requestAnimat=_window.requestAnimationFrame)==null||_window$requestAnimat.call(_window,run_scheduled),setTimeout(run_scheduled)}}function run_scheduled(){let span_details=_epoch2.SPANS.autorun_scheduled;_epoch.default.traceSpan(span_details.name,span_details.type,()=>_run_scheduled())}function _run_scheduled(){_is_scheduled=!1,_running_autoruns=!0;let run_list=Object.values(to_run);to_run={};for(let run of run_list)run.run_me();_running_autoruns=!1,_is_scheduled||(setTimeout(()=>{_is_scheduled||scheduled_key.turn_on()},1),microtask_count=0)}return function(run){to_run[run.id]=run,run.dont_track_scheduling||scheduled_key.turn_off(),ensure_scheduled()}}();exports.schedule=schedule;var _auto_run_to_watch;function autorun_watch(){_auto_run_to_watch=_async_state.default.CurrentAutoRun}function Box(state,not_ready){let b=new BoxClass(state);not_ready===!0&&b.not_ready();let val_fn=b.val.bind(b);return Object.assign(val_fn,{set:b.set.bind(b),get:b.get.bind(b),dangerously_peek:b.dangerously_peek.bind(b)})}var BoxClass=class{constructor(state){this.state=void 0,this.dependency=void 0,this.is_not_ready=void 0,this.not_ready_switch=void 0,this.state=state,this.dependency=(0,_dependency.Dependency)(),this.is_not_ready=!1}not_ready(){var _this$not_ready_switc;this.is_not_ready=!0,(_this$not_ready_switc=this.not_ready_switch)!=null||(this.not_ready_switch=(0,_b_async.MakeSwitch)(void 0,"autorun.Box not_ready_switch")),this.not_ready_switch.turn_off()}val(new_val,not_ready){if(not_ready===!0)this.not_ready();else{if(new_val===void 0)return this.get();this.set(new_val)}}dangerously_peek(){return this.state}get(){return this.is_not_ready&&(0,_b_async.ensure_ready)(this.not_ready_switch),this.dependency.register(),this.state}set(new_val){b_object.compare(this.state,new_val)||(this.state=new_val,this.dependency.invalidate()),this.is_not_ready&&(this.is_not_ready=!1,this.not_ready_switch.turn_on())}};exports.BoxClass=BoxClass;function autorun_return(fn){let my_dependency=(0,_dependency.Dependency)(),my_result,my_err;if(autorun(()=>{try{let new_result=fn();b_object.compare(new_result,my_result)||my_dependency.invalidate(),my_result=new_result,my_err=void 0}catch(err){my_err=err,my_dependency.invalidate()}}),my_dependency.register(),my_err!=null)throw my_err.suppress_dependency_error=!0,my_err;return my_result}}});var require_autorun3=__commonJS({"lib-browser-old/u/shared/async/autorun.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_web_url_search_params();require_es_regexp_exec();require_es_string_search();window&&window.location&&new URLSearchParams(location.search).get("newautorun")==="true"?module.exports=require_autorun():module.exports=require_autorun2()}});var require_server_notifications=__commonJS({"lib-browser-old/u/server/server_notifications.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();var b_fiber=require_b_fiber(),server_notifications=exports;server_notifications.with_fiber_notifier=function(notify,fn){let old_notify=b_fiber.Fiber.current._u_with_fiber_notifier;b_fiber.Fiber.current._u_with_fiber_notifier=notify;try{return fn()}finally{b_fiber.Fiber.current._u_with_fiber_notifier=old_notify}};server_notifications.no_fiber_notifier=function(fn){function notify(){}return server_notifications.with_fiber_notifier(notify,fn)};server_notifications.publish_fiber_notification=function(notification){var _b_fiber$Fiber$curren,_b_fiber$Fiber$curren2;(_b_fiber$Fiber$curren=b_fiber.Fiber.current)==null||(_b_fiber$Fiber$curren2=_b_fiber$Fiber$curren._u_with_fiber_notifier)==null||_b_fiber$Fiber$curren2.call(_b_fiber$Fiber$curren,notification)};server_notifications.notification_capturer=function(fn){let captured=[],notify=notification=>captured.push(notification),res=server_notifications.with_fiber_notifier(notify,fn);function rethrower(){for(let notification of captured)server_notifications.publish_fiber_notification(notification)}return[res,rethrower]};server_notifications.with_flush_caches=function(fn){let old_flush=b_fiber.Fiber.current._u_with_flush_caches;b_fiber.Fiber.current._u_with_flush_caches=!0;try{return fn()}finally{b_fiber.Fiber.current._u_with_flush_caches=old_flush}};server_notifications.flushing_caches=()=>b_fiber.Fiber.current._u_with_flush_caches}});var require_autorun_cache=__commonJS({"lib-browser-old/u/shared/async/autorun_cache.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.autorun_cache=autorun_cache;require_es_array_iterator();require_web_dom_collections_iterator();require_es_regexp_to_string();var _autorun=require_autorun3(),_errors=require_errors(),b_fiber=_interopRequireWildcard(require_b_fiber()),mode_check=_interopRequireWildcard(require_mode_check()),_server_notifications=_interopRequireDefault(require_server_notifications()),_uuid=require_uuid(),_b_object=require_b_object(),_loggable=require_loggable();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function autorun_cache(fn_or_options){let fn,options;typeof fn_or_options=="function"?(fn=fn_or_options,options={}):(options=fn_or_options,fn=fn_or_options.fn);let watchers={},server_key_unique=(0,_uuid.LUID)();return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];if(args.length>3)throw new _errors.UnexpectedError("autorun_cache only supports 3 args right now");let arg_array=args.slice(0,3);(0,_b_object.has_unique_string)(this)&&arg_array.push(this);for(let i=0;i<arg_array.length;i++){let a=arg_array[i];if((0,_b_object.has_unique_string)(a)&&(a=a.toUniqueString()),typeof a=="string"&&(a='"'+a),a!=null&&typeof a=="object")throw new _errors.UnexpectedError("passed in object to autorun_cache",{the_object:(0,_loggable.to_loggable)(a)});arg_array[i]=a}let key=arg_array.join(" ");if(mode_check.on_server()){var _b_fiber$Fiber,_target$__server_auto,_target$__server_auto2,_target$__server_auto3;let target=(_b_fiber$Fiber=b_fiber.Fiber)==null?void 0:_b_fiber$Fiber.current;if(target==null)return fn.call(this,...args);let appname=target.running_appname,app_version=target.running_app_version,app_key="".concat(server_key_unique).concat(appname,"_").concat(app_version);(_target$__server_auto=target.__server_autorun_cache)!=null||(target.__server_autorun_cache={}),(_target$__server_auto3=(_target$__server_auto2=target.__server_autorun_cache)[app_key])!=null||(_target$__server_auto2[app_key]=new LRU({max:1e3,length(){return 1}}));let my_fiber_cache=target.__server_autorun_cache[app_key],stored;if(my_fiber_cache.has(key))stored=my_fiber_cache.get(key);else{let[res,rethrower]=_server_notifications.default.notification_capturer(()=>fn.call(this,...args));stored={res,rethrower},my_fiber_cache.set(key,stored)}return stored.rethrower(),stored.res}else{let watcher=watchers[key];return watcher==="evaluating"?fn.call(this,...args):(watcher==null&&(watchers[key]="evaluating",watchers[key]=watcher=(0,_autorun.Watcher)({fn:function(_fn){function fn2(){return _fn.apply(this,arguments)}return fn2.toString=function(){return _fn.toString()},fn2}(()=>fn.call(this,...args)),compare:options.compare_fn})),watcher.get())}}}}});var require_dependency3=__commonJS({"lib-browser-old/u/shared/async/dependency.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_web_url_search_params();require_es_regexp_exec();require_es_string_search();var mode_check=require_mode_check();window&&!mode_check.on_react_native()&&new URLSearchParams(location.search).get("newautorun")==="true"?module.exports=require_dependency():module.exports=require_dependency2()}});var require_inherits_browser2=__commonJS({"node_modules/inherits/inherits_browser.js"(exports,module){init_define_process_env();init_shim();typeof Object.create=="function"?module.exports=function(ctor,superCtor){superCtor&&(ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}}))}:module.exports=function(ctor,superCtor){if(superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype,ctor.prototype=new TempCtor,ctor.prototype.constructor=ctor}}}});var require_safe_buffer=__commonJS({"node_modules/safe-buffer/index.js"(exports,module){init_define_process_env();init_shim();var buffer=require_buffer(),Buffer3=buffer.Buffer;function copyProps(src,dst){for(var key in src)dst[key]=src[key]}Buffer3.from&&Buffer3.alloc&&Buffer3.allocUnsafe&&Buffer3.allocUnsafeSlow?module.exports=buffer:(copyProps(buffer,exports),exports.Buffer=SafeBuffer);function SafeBuffer(arg,encodingOrOffset,length){return Buffer3(arg,encodingOrOffset,length)}SafeBuffer.prototype=Object.create(Buffer3.prototype);copyProps(Buffer3,SafeBuffer);SafeBuffer.from=function(arg,encodingOrOffset,length){if(typeof arg=="number")throw new TypeError("Argument must not be a number");return Buffer3(arg,encodingOrOffset,length)};SafeBuffer.alloc=function(size,fill,encoding){if(typeof size!="number")throw new TypeError("Argument must be a number");var buf=Buffer3(size);return fill!==void 0?typeof encoding=="string"?buf.fill(fill,encoding):buf.fill(fill):buf.fill(0),buf};SafeBuffer.allocUnsafe=function(size){if(typeof size!="number")throw new TypeError("Argument must be a number");return Buffer3(size)};SafeBuffer.allocUnsafeSlow=function(size){if(typeof size!="number")throw new TypeError("Argument must be a number");return buffer.SlowBuffer(size)}}});var require_stream_browser=__commonJS({"node_modules/readable-stream/lib/internal/streams/stream-browser.js"(exports,module){init_define_process_env();init_shim();module.exports=require_events().EventEmitter}});var require_util2=__commonJS({"(disabled):node_modules/util/util.js"(){init_define_process_env();init_shim()}});var require_buffer_list=__commonJS({"node_modules/readable-stream/lib/internal/streams/buffer_list.js"(exports,module){"use strict";init_define_process_env();init_shim();function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}var _require=require_buffer(),Buffer3=_require.Buffer,_require2=require_util2(),inspect=_require2.inspect,custom=inspect&&inspect.custom||"inspect";function copyBuffer(src,target,offset){Buffer3.prototype.copy.call(src,target,offset)}module.exports=function(){function BufferList(){_classCallCheck(this,BufferList),this.head=null,this.tail=null,this.length=0}return _createClass(BufferList,[{key:"push",value:function(v){var entry={data:v,next:null};this.length>0?this.tail.next=entry:this.head=entry,this.tail=entry,++this.length}},{key:"unshift",value:function(v){var entry={data:v,next:this.head};this.length===0&&(this.tail=entry),this.head=entry,++this.length}},{key:"shift",value:function(){if(this.length!==0){var ret=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,ret}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(s){if(this.length===0)return"";for(var p=this.head,ret=""+p.data;p=p.next;)ret+=s+p.data;return ret}},{key:"concat",value:function(n){if(this.length===0)return Buffer3.alloc(0);for(var ret=Buffer3.allocUnsafe(n>>>0),p=this.head,i=0;p;)copyBuffer(p.data,ret,i),i+=p.data.length,p=p.next;return ret}},{key:"consume",value:function(n,hasStrings){var ret;return n<this.head.data.length?(ret=this.head.data.slice(0,n),this.head.data=this.head.data.slice(n)):n===this.head.data.length?ret=this.shift():ret=hasStrings?this._getString(n):this._getBuffer(n),ret}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(n){var p=this.head,c=1,ret=p.data;for(n-=ret.length;p=p.next;){var str=p.data,nb=n>str.length?str.length:n;if(nb===str.length?ret+=str:ret+=str.slice(0,n),n-=nb,n===0){nb===str.length?(++c,p.next?this.head=p.next:this.head=this.tail=null):(this.head=p,p.data=str.slice(nb));break}++c}return this.length-=c,ret}},{key:"_getBuffer",value:function(n){var ret=Buffer3.allocUnsafe(n),p=this.head,c=1;for(p.data.copy(ret),n-=p.data.length;p=p.next;){var buf=p.data,nb=n>buf.length?buf.length:n;if(buf.copy(ret,ret.length-n,0,nb),n-=nb,n===0){nb===buf.length?(++c,p.next?this.head=p.next:this.head=this.tail=null):(this.head=p,p.data=buf.slice(nb));break}++c}return this.length-=c,ret}},{key:custom,value:function(_,options){return inspect(this,_objectSpread({},options,{depth:0,customInspect:!1}))}}]),BufferList}()}});var require_destroy=__commonJS({"node_modules/readable-stream/lib/internal/streams/destroy.js"(exports,module){"use strict";init_define_process_env();init_shim();function destroy(err,cb){var _this=this,readableDestroyed=this._readableState&&this._readableState.destroyed,writableDestroyed=this._writableState&&this._writableState.destroyed;return readableDestroyed||writableDestroyed?(cb?cb(err):err&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,queueMicrotask(emitErrorNT,this,err)):queueMicrotask(emitErrorNT,this,err)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(err||null,function(err2){!cb&&err2?_this._writableState?_this._writableState.errorEmitted?queueMicrotask(emitCloseNT,_this):(_this._writableState.errorEmitted=!0,queueMicrotask(emitErrorAndCloseNT,_this,err2)):queueMicrotask(emitErrorAndCloseNT,_this,err2):cb?(queueMicrotask(emitCloseNT,_this),cb(err2)):queueMicrotask(emitCloseNT,_this)}),this)}function emitErrorAndCloseNT(self2,err){emitErrorNT(self2,err),emitCloseNT(self2)}function emitCloseNT(self2){self2._writableState&&!self2._writableState.emitClose||self2._readableState&&!self2._readableState.emitClose||self2.emit("close")}function undestroy(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function emitErrorNT(self2,err){self2.emit("error",err)}function errorOrDestroy(stream,err){var rState=stream._readableState,wState=stream._writableState;rState&&rState.autoDestroy||wState&&wState.autoDestroy?stream.destroy(err):stream.emit("error",err)}module.exports={destroy,undestroy,errorOrDestroy}}});var require_errors_browser=__commonJS({"node_modules/readable-stream/errors-browser.js"(exports,module){"use strict";init_define_process_env();init_shim();function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,subClass.__proto__=superClass}var codes={};function createErrorType(code,message,Base){Base||(Base=Error);function getMessage(arg1,arg2,arg3){return typeof message=="string"?message:message(arg1,arg2,arg3)}var NodeError=function(_Base){_inheritsLoose(NodeError2,_Base);function NodeError2(arg1,arg2,arg3){return _Base.call(this,getMessage(arg1,arg2,arg3))||this}return NodeError2}(Base);NodeError.prototype.name=Base.name,NodeError.prototype.code=code,codes[code]=NodeError}function oneOf(expected,thing){if(Array.isArray(expected)){var len=expected.length;return expected=expected.map(function(i){return String(i)}),len>2?"one of ".concat(thing," ").concat(expected.slice(0,len-1).join(", "),", or ")+expected[len-1]:len===2?"one of ".concat(thing," ").concat(expected[0]," or ").concat(expected[1]):"of ".concat(thing," ").concat(expected[0])}else return"of ".concat(thing," ").concat(String(expected))}function startsWith(str,search,pos){return str.substr(!pos||pos<0?0:+pos,search.length)===search}function endsWith(str,search,this_len){return(this_len===void 0||this_len>str.length)&&(this_len=str.length),str.substring(this_len-search.length,this_len)===search}function includes(str,search,start){return typeof start!="number"&&(start=0),start+search.length>str.length?!1:str.indexOf(search,start)!==-1}createErrorType("ERR_INVALID_OPT_VALUE",function(name,value){return'The value "'+value+'" is invalid for option "'+name+'"'},TypeError);createErrorType("ERR_INVALID_ARG_TYPE",function(name,expected,actual){var determiner;typeof expected=="string"&&startsWith(expected,"not ")?(determiner="must not be",expected=expected.replace(/^not /,"")):determiner="must be";var msg;if(endsWith(name," argument"))msg="The ".concat(name," ").concat(determiner," ").concat(oneOf(expected,"type"));else{var type=includes(name,".")?"property":"argument";msg='The "'.concat(name,'" ').concat(type," ").concat(determiner," ").concat(oneOf(expected,"type"))}return msg+=". Received type ".concat(typeof actual),msg},TypeError);createErrorType("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");createErrorType("ERR_METHOD_NOT_IMPLEMENTED",function(name){return"The "+name+" method is not implemented"});createErrorType("ERR_STREAM_PREMATURE_CLOSE","Premature close");createErrorType("ERR_STREAM_DESTROYED",function(name){return"Cannot call "+name+" after a stream was destroyed"});createErrorType("ERR_MULTIPLE_CALLBACK","Callback called multiple times");createErrorType("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end");createErrorType("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);createErrorType("ERR_UNKNOWN_ENCODING",function(arg){return"Unknown encoding: "+arg},TypeError);createErrorType("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");module.exports.codes=codes}});var require_state=__commonJS({"node_modules/readable-stream/lib/internal/streams/state.js"(exports,module){"use strict";init_define_process_env();init_shim();var ERR_INVALID_OPT_VALUE=require_errors_browser().codes.ERR_INVALID_OPT_VALUE;function highWaterMarkFrom(options,isDuplex,duplexKey){return options.highWaterMark!=null?options.highWaterMark:isDuplex?options[duplexKey]:null}function getHighWaterMark(state,options,duplexKey,isDuplex){var hwm=highWaterMarkFrom(options,isDuplex,duplexKey);if(hwm!=null){if(!(isFinite(hwm)&&Math.floor(hwm)===hwm)||hwm<0){var name=isDuplex?duplexKey:"highWaterMark";throw new ERR_INVALID_OPT_VALUE(name,hwm)}return Math.floor(hwm)}return state.objectMode?16:16*1024}module.exports={getHighWaterMark}}});var require_browser2=__commonJS({"node_modules/util-deprecate/browser.js"(exports,module){init_define_process_env();init_shim();module.exports=deprecate;function deprecate(fn,msg){if(config("noDeprecation"))return fn;var warned=!1;function deprecated(){if(!warned){if(config("throwDeprecation"))throw new Error(msg);config("traceDeprecation")?console.trace(msg):console.warn(msg),warned=!0}return fn.apply(this,arguments)}return deprecated}function config(name){try{if(!window.localStorage)return!1}catch(_){return!1}var val=window.localStorage[name];return val==null?!1:String(val).toLowerCase()==="true"}}});var require_stream_writable=__commonJS({"node_modules/readable-stream/lib/_stream_writable.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports=Writable;function CorkedRequest(state){var _this=this;this.next=null,this.entry=null,this.finish=function(){onCorkedFinish(_this,state)}}var Duplex;Writable.WritableState=WritableState;var internalUtil={deprecate:require_browser2()},Stream=require_stream_browser(),Buffer3=require_buffer().Buffer,OurUint8Array=window.Uint8Array||function(){};function _uint8ArrayToBuffer(chunk){return Buffer3.from(chunk)}function _isUint8Array(obj){return Buffer3.isBuffer(obj)||obj instanceof OurUint8Array}var destroyImpl=require_destroy(),_require=require_state(),getHighWaterMark=_require.getHighWaterMark,_require$codes=require_errors_browser().codes,ERR_INVALID_ARG_TYPE=_require$codes.ERR_INVALID_ARG_TYPE,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes.ERR_MULTIPLE_CALLBACK,ERR_STREAM_CANNOT_PIPE=_require$codes.ERR_STREAM_CANNOT_PIPE,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED,ERR_STREAM_NULL_VALUES=_require$codes.ERR_STREAM_NULL_VALUES,ERR_STREAM_WRITE_AFTER_END=_require$codes.ERR_STREAM_WRITE_AFTER_END,ERR_UNKNOWN_ENCODING=_require$codes.ERR_UNKNOWN_ENCODING,errorOrDestroy=destroyImpl.errorOrDestroy;require_inherits_browser2()(Writable,Stream);function nop(){}function WritableState(options,stream,isDuplex){Duplex=Duplex||require_stream_duplex(),options=options||{},typeof isDuplex!="boolean"&&(isDuplex=stream instanceof Duplex),this.objectMode=!!options.objectMode,isDuplex&&(this.objectMode=this.objectMode||!!options.writableObjectMode),this.highWaterMark=getHighWaterMark(this,options,"writableHighWaterMark",isDuplex),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var noDecode=options.decodeStrings===!1;this.decodeStrings=!noDecode,this.defaultEncoding=options.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(er){onwrite(stream,er)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=options.emitClose!==!1,this.autoDestroy=!!options.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}WritableState.prototype.getBuffer=function(){for(var current=this.bufferedRequest,out=[];current;)out.push(current),current=current.next;return out};(function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:internalUtil.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(_){}})();var realHasInstance;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(realHasInstance=Function.prototype[Symbol.hasInstance],Object.defineProperty(Writable,Symbol.hasInstance,{value:function(object2){return realHasInstance.call(this,object2)?!0:this!==Writable?!1:object2&&object2._writableState instanceof WritableState}})):realHasInstance=function(object2){return object2 instanceof this};function Writable(options){Duplex=Duplex||require_stream_duplex();var isDuplex=this instanceof Duplex;if(!isDuplex&&!realHasInstance.call(Writable,this))return new Writable(options);this._writableState=new WritableState(options,this,isDuplex),this.writable=!0,options&&(typeof options.write=="function"&&(this._write=options.write),typeof options.writev=="function"&&(this._writev=options.writev),typeof options.destroy=="function"&&(this._destroy=options.destroy),typeof options.final=="function"&&(this._final=options.final)),Stream.call(this)}Writable.prototype.pipe=function(){errorOrDestroy(this,new ERR_STREAM_CANNOT_PIPE)};function writeAfterEnd(stream,cb){var er=new ERR_STREAM_WRITE_AFTER_END;errorOrDestroy(stream,er),queueMicrotask(cb,er)}function validChunk(stream,state,chunk,cb){var er;return chunk===null?er=new ERR_STREAM_NULL_VALUES:typeof chunk!="string"&&!state.objectMode&&(er=new ERR_INVALID_ARG_TYPE("chunk",["string","Buffer"],chunk)),er?(errorOrDestroy(stream,er),queueMicrotask(cb,er),!1):!0}Writable.prototype.write=function(chunk,encoding,cb){var state=this._writableState,ret=!1,isBuf=!state.objectMode&&_isUint8Array(chunk);return isBuf&&!Buffer3.isBuffer(chunk)&&(chunk=_uint8ArrayToBuffer(chunk)),typeof encoding=="function"&&(cb=encoding,encoding=null),isBuf?encoding="buffer":encoding||(encoding=state.defaultEncoding),typeof cb!="function"&&(cb=nop),state.ending?writeAfterEnd(this,cb):(isBuf||validChunk(this,state,chunk,cb))&&(state.pendingcb++,ret=writeOrBuffer(this,state,isBuf,chunk,encoding,cb)),ret};Writable.prototype.cork=function(){this._writableState.corked++};Writable.prototype.uncork=function(){var state=this._writableState;state.corked&&(state.corked--,!state.writing&&!state.corked&&!state.bufferProcessing&&state.bufferedRequest&&clearBuffer(this,state))};Writable.prototype.setDefaultEncoding=function(encoding){if(typeof encoding=="string"&&(encoding=encoding.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((encoding+"").toLowerCase())>-1))throw new ERR_UNKNOWN_ENCODING(encoding);return this._writableState.defaultEncoding=encoding,this};Object.defineProperty(Writable.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function decodeChunk(state,chunk,encoding){return!state.objectMode&&state.decodeStrings!==!1&&typeof chunk=="string"&&(chunk=Buffer3.from(chunk,encoding)),chunk}Object.defineProperty(Writable.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function writeOrBuffer(stream,state,isBuf,chunk,encoding,cb){if(!isBuf){var newChunk=decodeChunk(state,chunk,encoding);chunk!==newChunk&&(isBuf=!0,encoding="buffer",chunk=newChunk)}var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;if(ret||(state.needDrain=!0),state.writing||state.corked){var last=state.lastBufferedRequest;state.lastBufferedRequest={chunk,encoding,isBuf,callback:cb,next:null},last?last.next=state.lastBufferedRequest:state.bufferedRequest=state.lastBufferedRequest,state.bufferedRequestCount+=1}else doWrite(stream,state,!1,len,chunk,encoding,cb);return ret}function doWrite(stream,state,writev,len,chunk,encoding,cb){state.writelen=len,state.writecb=cb,state.writing=!0,state.sync=!0,state.destroyed?state.onwrite(new ERR_STREAM_DESTROYED("write")):writev?stream._writev(chunk,state.onwrite):stream._write(chunk,encoding,state.onwrite),state.sync=!1}function onwriteError(stream,state,sync,er,cb){--state.pendingcb,sync?(queueMicrotask(cb,er),queueMicrotask(finishMaybe,stream,state),stream._writableState.errorEmitted=!0,errorOrDestroy(stream,er)):(cb(er),stream._writableState.errorEmitted=!0,errorOrDestroy(stream,er),finishMaybe(stream,state))}function onwriteStateUpdate(state){state.writing=!1,state.writecb=null,state.length-=state.writelen,state.writelen=0}function onwrite(stream,er){var state=stream._writableState,sync=state.sync,cb=state.writecb;if(typeof cb!="function")throw new ERR_MULTIPLE_CALLBACK;if(onwriteStateUpdate(state),er)onwriteError(stream,state,sync,er,cb);else{var finished=needFinish(state)||stream.destroyed;!finished&&!state.corked&&!state.bufferProcessing&&state.bufferedRequest&&clearBuffer(stream,state),sync?queueMicrotask(afterWrite,stream,state,finished,cb):afterWrite(stream,state,finished,cb)}}function afterWrite(stream,state,finished,cb){finished||onwriteDrain(stream,state),state.pendingcb--,cb(),finishMaybe(stream,state)}function onwriteDrain(stream,state){state.length===0&&state.needDrain&&(state.needDrain=!1,stream.emit("drain"))}function clearBuffer(stream,state){state.bufferProcessing=!0;var entry=state.bufferedRequest;if(stream._writev&&entry&&entry.next){var l=state.bufferedRequestCount,buffer=new Array(l),holder=state.corkedRequestsFree;holder.entry=entry;for(var count=0,allBuffers=!0;entry;)buffer[count]=entry,entry.isBuf||(allBuffers=!1),entry=entry.next,count+=1;buffer.allBuffers=allBuffers,doWrite(stream,state,!0,state.length,buffer,"",holder.finish),state.pendingcb++,state.lastBufferedRequest=null,holder.next?(state.corkedRequestsFree=holder.next,holder.next=null):state.corkedRequestsFree=new CorkedRequest(state),state.bufferedRequestCount=0}else{for(;entry;){var chunk=entry.chunk,encoding=entry.encoding,cb=entry.callback,len=state.objectMode?1:chunk.length;if(doWrite(stream,state,!1,len,chunk,encoding,cb),entry=entry.next,state.bufferedRequestCount--,state.writing)break}entry===null&&(state.lastBufferedRequest=null)}state.bufferedRequest=entry,state.bufferProcessing=!1}Writable.prototype._write=function(chunk,encoding,cb){cb(new ERR_METHOD_NOT_IMPLEMENTED("_write()"))};Writable.prototype._writev=null;Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;return typeof chunk=="function"?(cb=chunk,chunk=null,encoding=null):typeof encoding=="function"&&(cb=encoding,encoding=null),chunk!=null&&this.write(chunk,encoding),state.corked&&(state.corked=1,this.uncork()),state.ending||endWritable(this,state,cb),this};Object.defineProperty(Writable.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function needFinish(state){return state.ending&&state.length===0&&state.bufferedRequest===null&&!state.finished&&!state.writing}function callFinal(stream,state){stream._final(function(err){state.pendingcb--,err&&errorOrDestroy(stream,err),state.prefinished=!0,stream.emit("prefinish"),finishMaybe(stream,state)})}function prefinish(stream,state){!state.prefinished&&!state.finalCalled&&(typeof stream._final=="function"&&!state.destroyed?(state.pendingcb++,state.finalCalled=!0,queueMicrotask(callFinal,stream,state)):(state.prefinished=!0,stream.emit("prefinish")))}function finishMaybe(stream,state){var need=needFinish(state);if(need&&(prefinish(stream,state),state.pendingcb===0&&(state.finished=!0,stream.emit("finish"),state.autoDestroy))){var rState=stream._readableState;(!rState||rState.autoDestroy&&rState.endEmitted)&&stream.destroy()}return need}function endWritable(stream,state,cb){state.ending=!0,finishMaybe(stream,state),cb&&(state.finished?queueMicrotask(cb):stream.once("finish",cb)),state.ended=!0,stream.writable=!1}function onCorkedFinish(corkReq,state,err){var entry=corkReq.entry;for(corkReq.entry=null;entry;){var cb=entry.callback;state.pendingcb--,cb(err),entry=entry.next}state.corkedRequestsFree.next=corkReq}Object.defineProperty(Writable.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(value){this._writableState&&(this._writableState.destroyed=value)}});Writable.prototype.destroy=destroyImpl.destroy;Writable.prototype._undestroy=destroyImpl.undestroy;Writable.prototype._destroy=function(err,cb){cb(err)}}});var require_stream_duplex=__commonJS({"node_modules/readable-stream/lib/_stream_duplex.js"(exports,module){"use strict";init_define_process_env();init_shim();var objectKeys=Object.keys||function(obj){var keys2=[];for(var key in obj)keys2.push(key);return keys2};module.exports=Duplex;var Readable=require_stream_readable(),Writable=require_stream_writable();require_inherits_browser2()(Duplex,Readable);for(keys=objectKeys(Writable.prototype),v=0;v<keys.length;v++)method=keys[v],Duplex.prototype[method]||(Duplex.prototype[method]=Writable.prototype[method]);var keys,method,v;function Duplex(options){if(!(this instanceof Duplex))return new Duplex(options);Readable.call(this,options),Writable.call(this,options),this.allowHalfOpen=!0,options&&(options.readable===!1&&(this.readable=!1),options.writable===!1&&(this.writable=!1),options.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",onend)))}Object.defineProperty(Duplex.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(Duplex.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(Duplex.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function onend(){this._writableState.ended||queueMicrotask(onEndNT,this)}function onEndNT(self2){self2.end()}Object.defineProperty(Duplex.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(value){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=value,this._writableState.destroyed=value)}})}});var require_string_decoder=__commonJS({"node_modules/string_decoder/lib/string_decoder.js"(exports){"use strict";init_define_process_env();init_shim();var Buffer3=require_safe_buffer().Buffer,isEncoding=Buffer3.isEncoding||function(encoding){switch(encoding=""+encoding,encoding&&encoding.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function _normalizeEncoding(enc){if(!enc)return"utf8";for(var retried;;)switch(enc){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return enc;default:if(retried)return;enc=(""+enc).toLowerCase(),retried=!0}}function normalizeEncoding(enc){var nenc=_normalizeEncoding(enc);if(typeof nenc!="string"&&(Buffer3.isEncoding===isEncoding||!isEncoding(enc)))throw new Error("Unknown encoding: "+enc);return nenc||enc}exports.StringDecoder=StringDecoder;function StringDecoder(encoding){this.encoding=normalizeEncoding(encoding);var nb;switch(this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,nb=4;break;case"utf8":this.fillLast=utf8FillLast,nb=4;break;case"base64":this.text=base64Text,this.end=base64End,nb=3;break;default:this.write=simpleWrite,this.end=simpleEnd;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Buffer3.allocUnsafe(nb)}StringDecoder.prototype.write=function(buf){if(buf.length===0)return"";var r,i;if(this.lastNeed){if(r=this.fillLast(buf),r===void 0)return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<buf.length?r?r+this.text(buf,i):this.text(buf,i):r||""};StringDecoder.prototype.end=utf8End;StringDecoder.prototype.text=utf8Text;StringDecoder.prototype.fillLast=function(buf){if(this.lastNeed<=buf.length)return buf.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);buf.copy(this.lastChar,this.lastTotal-this.lastNeed,0,buf.length),this.lastNeed-=buf.length};function utf8CheckByte(byte){return byte<=127?0:byte>>5===6?2:byte>>4===14?3:byte>>3===30?4:byte>>6===2?-1:-2}function utf8CheckIncomplete(self2,buf,i){var j=buf.length-1;if(j<i)return 0;var nb=utf8CheckByte(buf[j]);return nb>=0?(nb>0&&(self2.lastNeed=nb-1),nb):--j<i||nb===-2?0:(nb=utf8CheckByte(buf[j]),nb>=0?(nb>0&&(self2.lastNeed=nb-2),nb):--j<i||nb===-2?0:(nb=utf8CheckByte(buf[j]),nb>=0?(nb>0&&(nb===2?nb=0:self2.lastNeed=nb-3),nb):0))}function utf8CheckExtraBytes(self2,buf,p){if((buf[0]&192)!==128)return self2.lastNeed=0,"\uFFFD";if(self2.lastNeed>1&&buf.length>1){if((buf[1]&192)!==128)return self2.lastNeed=1,"\uFFFD";if(self2.lastNeed>2&&buf.length>2&&(buf[2]&192)!==128)return self2.lastNeed=2,"\uFFFD"}}function utf8FillLast(buf){var p=this.lastTotal-this.lastNeed,r=utf8CheckExtraBytes(this,buf,p);if(r!==void 0)return r;if(this.lastNeed<=buf.length)return buf.copy(this.lastChar,p,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);buf.copy(this.lastChar,p,0,buf.length),this.lastNeed-=buf.length}function utf8Text(buf,i){var total=utf8CheckIncomplete(this,buf,i);if(!this.lastNeed)return buf.toString("utf8",i);this.lastTotal=total;var end=buf.length-(total-this.lastNeed);return buf.copy(this.lastChar,0,end),buf.toString("utf8",i,end)}function utf8End(buf){var r=buf&&buf.length?this.write(buf):"";return this.lastNeed?r+"\uFFFD":r}function utf16Text(buf,i){if((buf.length-i)%2===0){var r=buf.toString("utf16le",i);if(r){var c=r.charCodeAt(r.length-1);if(c>=55296&&c<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=buf[buf.length-2],this.lastChar[1]=buf[buf.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=buf[buf.length-1],buf.toString("utf16le",i,buf.length-1)}function utf16End(buf){var r=buf&&buf.length?this.write(buf):"";if(this.lastNeed){var end=this.lastTotal-this.lastNeed;return r+this.lastChar.toString("utf16le",0,end)}return r}function base64Text(buf,i){var n=(buf.length-i)%3;return n===0?buf.toString("base64",i):(this.lastNeed=3-n,this.lastTotal=3,n===1?this.lastChar[0]=buf[buf.length-1]:(this.lastChar[0]=buf[buf.length-2],this.lastChar[1]=buf[buf.length-1]),buf.toString("base64",i,buf.length-n))}function base64End(buf){var r=buf&&buf.length?this.write(buf):"";return this.lastNeed?r+this.lastChar.toString("base64",0,3-this.lastNeed):r}function simpleWrite(buf){return buf.toString(this.encoding)}function simpleEnd(buf){return buf&&buf.length?this.write(buf):""}}});var require_end_of_stream=__commonJS({"node_modules/readable-stream/lib/internal/streams/end-of-stream.js"(exports,module){"use strict";init_define_process_env();init_shim();var ERR_STREAM_PREMATURE_CLOSE=require_errors_browser().codes.ERR_STREAM_PREMATURE_CLOSE;function once(callback){var called=!1;return function(){if(!called){called=!0;for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];callback.apply(this,args)}}}function noop(){}function isRequest(stream){return stream.setHeader&&typeof stream.abort=="function"}function eos(stream,opts,callback){if(typeof opts=="function")return eos(stream,null,opts);opts||(opts={}),callback=once(callback||noop);var readable=opts.readable||opts.readable!==!1&&stream.readable,writable=opts.writable||opts.writable!==!1&&stream.writable,onlegacyfinish=function(){stream.writable||onfinish()},writableEnded=stream._writableState&&stream._writableState.finished,onfinish=function(){writable=!1,writableEnded=!0,readable||callback.call(stream)},readableEnded=stream._readableState&&stream._readableState.endEmitted,onend=function(){readable=!1,readableEnded=!0,writable||callback.call(stream)},onerror=function(err){callback.call(stream,err)},onclose=function(){var err;if(readable&&!readableEnded)return(!stream._readableState||!stream._readableState.ended)&&(err=new ERR_STREAM_PREMATURE_CLOSE),callback.call(stream,err);if(writable&&!writableEnded)return(!stream._writableState||!stream._writableState.ended)&&(err=new ERR_STREAM_PREMATURE_CLOSE),callback.call(stream,err)},onrequest=function(){stream.req.on("finish",onfinish)};return isRequest(stream)?(stream.on("complete",onfinish),stream.on("abort",onclose),stream.req?onrequest():stream.on("request",onrequest)):writable&&!stream._writableState&&(stream.on("end",onlegacyfinish),stream.on("close",onlegacyfinish)),stream.on("end",onend),stream.on("finish",onfinish),opts.error!==!1&&stream.on("error",onerror),stream.on("close",onclose),function(){stream.removeListener("complete",onfinish),stream.removeListener("abort",onclose),stream.removeListener("request",onrequest),stream.req&&stream.req.removeListener("finish",onfinish),stream.removeListener("end",onlegacyfinish),stream.removeListener("close",onlegacyfinish),stream.removeListener("finish",onfinish),stream.removeListener("end",onend),stream.removeListener("error",onerror),stream.removeListener("close",onclose)}}module.exports=eos}});var require_async_iterator=__commonJS({"node_modules/readable-stream/lib/internal/streams/async_iterator.js"(exports,module){"use strict";init_define_process_env();init_shim();var _Object$setPrototypeO;function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var finished=require_end_of_stream(),kLastResolve=Symbol("lastResolve"),kLastReject=Symbol("lastReject"),kError=Symbol("error"),kEnded=Symbol("ended"),kLastPromise=Symbol("lastPromise"),kHandlePromise=Symbol("handlePromise"),kStream=Symbol("stream");function createIterResult(value,done){return{value,done}}function readAndResolve(iter){var resolve=iter[kLastResolve];if(resolve!==null){var data=iter[kStream].read();data!==null&&(iter[kLastPromise]=null,iter[kLastResolve]=null,iter[kLastReject]=null,resolve(createIterResult(data,!1)))}}function onReadable(iter){queueMicrotask(readAndResolve,iter)}function wrapForNext(lastPromise,iter){return function(resolve,reject){lastPromise.then(function(){if(iter[kEnded]){resolve(createIterResult(void 0,!0));return}iter[kHandlePromise](resolve,reject)},reject)}}var AsyncIteratorPrototype=Object.getPrototypeOf(function(){}),ReadableStreamAsyncIteratorPrototype=Object.setPrototypeOf((_Object$setPrototypeO={get stream(){return this[kStream]},next:function(){var _this=this,error=this[kError];if(error!==null)return Promise.reject(error);if(this[kEnded])return Promise.resolve(createIterResult(void 0,!0));if(this[kStream].destroyed)return new Promise(function(resolve,reject){queueMicrotask(function(){_this[kError]?reject(_this[kError]):resolve(createIterResult(void 0,!0))})});var lastPromise=this[kLastPromise],promise;if(lastPromise)promise=new Promise(wrapForNext(lastPromise,this));else{var data=this[kStream].read();if(data!==null)return Promise.resolve(createIterResult(data,!1));promise=new Promise(this[kHandlePromise])}return this[kLastPromise]=promise,promise}},_defineProperty(_Object$setPrototypeO,Symbol.asyncIterator,function(){return this}),_defineProperty(_Object$setPrototypeO,"return",function(){var _this2=this;return new Promise(function(resolve,reject){_this2[kStream].destroy(null,function(err){if(err){reject(err);return}resolve(createIterResult(void 0,!0))})})}),_Object$setPrototypeO),AsyncIteratorPrototype),createReadableStreamAsyncIterator=function(stream){var _Object$create,iterator=Object.create(ReadableStreamAsyncIteratorPrototype,(_Object$create={},_defineProperty(_Object$create,kStream,{value:stream,writable:!0}),_defineProperty(_Object$create,kLastResolve,{value:null,writable:!0}),_defineProperty(_Object$create,kLastReject,{value:null,writable:!0}),_defineProperty(_Object$create,kError,{value:null,writable:!0}),_defineProperty(_Object$create,kEnded,{value:stream._readableState.endEmitted,writable:!0}),_defineProperty(_Object$create,kHandlePromise,{value:function(resolve,reject){var data=iterator[kStream].read();data?(iterator[kLastPromise]=null,iterator[kLastResolve]=null,iterator[kLastReject]=null,resolve(createIterResult(data,!1))):(iterator[kLastResolve]=resolve,iterator[kLastReject]=reject)},writable:!0}),_Object$create));return iterator[kLastPromise]=null,finished(stream,function(err){if(err&&err.code!=="ERR_STREAM_PREMATURE_CLOSE"){var reject=iterator[kLastReject];reject!==null&&(iterator[kLastPromise]=null,iterator[kLastResolve]=null,iterator[kLastReject]=null,reject(err)),iterator[kError]=err;return}var resolve=iterator[kLastResolve];resolve!==null&&(iterator[kLastPromise]=null,iterator[kLastResolve]=null,iterator[kLastReject]=null,resolve(createIterResult(void 0,!0))),iterator[kEnded]=!0}),stream.on("readable",onReadable.bind(null,iterator)),iterator};module.exports=createReadableStreamAsyncIterator}});var require_from_browser=__commonJS({"node_modules/readable-stream/lib/internal/streams/from-browser.js"(exports,module){init_define_process_env();init_shim();module.exports=function(){throw new Error("Readable.from is not available in the browser")}}});var require_stream_readable=__commonJS({"node_modules/readable-stream/lib/_stream_readable.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports=Readable;var Duplex;Readable.ReadableState=ReadableState;var EE=require_events().EventEmitter,EElistenerCount=function(emitter,type){return emitter.listeners(type).length},Stream=require_stream_browser(),Buffer3=require_buffer().Buffer,OurUint8Array=window.Uint8Array||function(){};function _uint8ArrayToBuffer(chunk){return Buffer3.from(chunk)}function _isUint8Array(obj){return Buffer3.isBuffer(obj)||obj instanceof OurUint8Array}var debugUtil=require_util2(),debug;debugUtil&&debugUtil.debuglog?debug=debugUtil.debuglog("stream"):debug=function(){};var BufferList=require_buffer_list(),destroyImpl=require_destroy(),_require=require_state(),getHighWaterMark=_require.getHighWaterMark,_require$codes=require_errors_browser().codes,ERR_INVALID_ARG_TYPE=_require$codes.ERR_INVALID_ARG_TYPE,ERR_STREAM_PUSH_AFTER_EOF=_require$codes.ERR_STREAM_PUSH_AFTER_EOF,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_STREAM_UNSHIFT_AFTER_END_EVENT=_require$codes.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,StringDecoder,createReadableStreamAsyncIterator,from2;require_inherits_browser2()(Readable,Stream);var errorOrDestroy=destroyImpl.errorOrDestroy,kProxyEvents=["error","close","destroy","pause","resume"];function prependListener(emitter,event,fn){if(typeof emitter.prependListener=="function")return emitter.prependListener(event,fn);!emitter._events||!emitter._events[event]?emitter.on(event,fn):Array.isArray(emitter._events[event])?emitter._events[event].unshift(fn):emitter._events[event]=[fn,emitter._events[event]]}function ReadableState(options,stream,isDuplex){Duplex=Duplex||require_stream_duplex(),options=options||{},typeof isDuplex!="boolean"&&(isDuplex=stream instanceof Duplex),this.objectMode=!!options.objectMode,isDuplex&&(this.objectMode=this.objectMode||!!options.readableObjectMode),this.highWaterMark=getHighWaterMark(this,options,"readableHighWaterMark",isDuplex),this.buffer=new BufferList,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=options.emitClose!==!1,this.autoDestroy=!!options.autoDestroy,this.destroyed=!1,this.defaultEncoding=options.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,options.encoding&&(StringDecoder||(StringDecoder=require_string_decoder().StringDecoder),this.decoder=new StringDecoder(options.encoding),this.encoding=options.encoding)}function Readable(options){if(Duplex=Duplex||require_stream_duplex(),!(this instanceof Readable))return new Readable(options);var isDuplex=this instanceof Duplex;this._readableState=new ReadableState(options,this,isDuplex),this.readable=!0,options&&(typeof options.read=="function"&&(this._read=options.read),typeof options.destroy=="function"&&(this._destroy=options.destroy)),Stream.call(this)}Object.defineProperty(Readable.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(value){this._readableState&&(this._readableState.destroyed=value)}});Readable.prototype.destroy=destroyImpl.destroy;Readable.prototype._undestroy=destroyImpl.undestroy;Readable.prototype._destroy=function(err,cb){cb(err)};Readable.prototype.push=function(chunk,encoding){var state=this._readableState,skipChunkCheck;return state.objectMode?skipChunkCheck=!0:typeof chunk=="string"&&(encoding=encoding||state.defaultEncoding,encoding!==state.encoding&&(chunk=Buffer3.from(chunk,encoding),encoding=""),skipChunkCheck=!0),readableAddChunk(this,chunk,encoding,!1,skipChunkCheck)};Readable.prototype.unshift=function(chunk){return readableAddChunk(this,chunk,null,!0,!1)};function readableAddChunk(stream,chunk,encoding,addToFront,skipChunkCheck){debug("readableAddChunk",chunk);var state=stream._readableState;if(chunk===null)state.reading=!1,onEofChunk(stream,state);else{var er;if(skipChunkCheck||(er=chunkInvalid(state,chunk)),er)errorOrDestroy(stream,er);else if(state.objectMode||chunk&&chunk.length>0)if(typeof chunk!="string"&&!state.objectMode&&Object.getPrototypeOf(chunk)!==Buffer3.prototype&&(chunk=_uint8ArrayToBuffer(chunk)),addToFront)state.endEmitted?errorOrDestroy(stream,new ERR_STREAM_UNSHIFT_AFTER_END_EVENT):addChunk(stream,state,chunk,!0);else if(state.ended)errorOrDestroy(stream,new ERR_STREAM_PUSH_AFTER_EOF);else{if(state.destroyed)return!1;state.reading=!1,state.decoder&&!encoding?(chunk=state.decoder.write(chunk),state.objectMode||chunk.length!==0?addChunk(stream,state,chunk,!1):maybeReadMore(stream,state)):addChunk(stream,state,chunk,!1)}else addToFront||(state.reading=!1,maybeReadMore(stream,state))}return!state.ended&&(state.length<state.highWaterMark||state.length===0)}function addChunk(stream,state,chunk,addToFront){state.flowing&&state.length===0&&!state.sync?(state.awaitDrain=0,stream.emit("data",chunk)):(state.length+=state.objectMode?1:chunk.length,addToFront?state.buffer.unshift(chunk):state.buffer.push(chunk),state.needReadable&&emitReadable(stream)),maybeReadMore(stream,state)}function chunkInvalid(state,chunk){var er;return!_isUint8Array(chunk)&&typeof chunk!="string"&&chunk!==void 0&&!state.objectMode&&(er=new ERR_INVALID_ARG_TYPE("chunk",["string","Buffer","Uint8Array"],chunk)),er}Readable.prototype.isPaused=function(){return this._readableState.flowing===!1};Readable.prototype.setEncoding=function(enc){StringDecoder||(StringDecoder=require_string_decoder().StringDecoder);var decoder=new StringDecoder(enc);this._readableState.decoder=decoder,this._readableState.encoding=this._readableState.decoder.encoding;for(var p=this._readableState.buffer.head,content="";p!==null;)content+=decoder.write(p.data),p=p.next;return this._readableState.buffer.clear(),content!==""&&this._readableState.buffer.push(content),this._readableState.length=content.length,this};var MAX_HWM=1073741824;function computeNewHighWaterMark(n){return n>=MAX_HWM?n=MAX_HWM:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n}function howMuchToRead(n,state){return n<=0||state.length===0&&state.ended?0:state.objectMode?1:n!==n?state.flowing&&state.length?state.buffer.head.data.length:state.length:(n>state.highWaterMark&&(state.highWaterMark=computeNewHighWaterMark(n)),n<=state.length?n:state.ended?state.length:(state.needReadable=!0,0))}Readable.prototype.read=function(n){debug("read",n),n=parseInt(n,10);var state=this._readableState,nOrig=n;if(n!==0&&(state.emittedReadable=!1),n===0&&state.needReadable&&((state.highWaterMark!==0?state.length>=state.highWaterMark:state.length>0)||state.ended))return debug("read: emitReadable",state.length,state.ended),state.length===0&&state.ended?endReadable(this):emitReadable(this),null;if(n=howMuchToRead(n,state),n===0&&state.ended)return state.length===0&&endReadable(this),null;var doRead=state.needReadable;debug("need readable",doRead),(state.length===0||state.length-n<state.highWaterMark)&&(doRead=!0,debug("length less than watermark",doRead)),state.ended||state.reading?(doRead=!1,debug("reading or ended",doRead)):doRead&&(debug("do read"),state.reading=!0,state.sync=!0,state.length===0&&(state.needReadable=!0),this._read(state.highWaterMark),state.sync=!1,state.reading||(n=howMuchToRead(nOrig,state)));var ret;return n>0?ret=fromList(n,state):ret=null,ret===null?(state.needReadable=state.length<=state.highWaterMark,n=0):(state.length-=n,state.awaitDrain=0),state.length===0&&(state.ended||(state.needReadable=!0),nOrig!==n&&state.ended&&endReadable(this)),ret!==null&&this.emit("data",ret),ret};function onEofChunk(stream,state){if(debug("onEofChunk"),!state.ended){if(state.decoder){var chunk=state.decoder.end();chunk&&chunk.length&&(state.buffer.push(chunk),state.length+=state.objectMode?1:chunk.length)}state.ended=!0,state.sync?emitReadable(stream):(state.needReadable=!1,state.emittedReadable||(state.emittedReadable=!0,emitReadable_(stream)))}}function emitReadable(stream){var state=stream._readableState;debug("emitReadable",state.needReadable,state.emittedReadable),state.needReadable=!1,state.emittedReadable||(debug("emitReadable",state.flowing),state.emittedReadable=!0,queueMicrotask(emitReadable_,stream))}function emitReadable_(stream){var state=stream._readableState;debug("emitReadable_",state.destroyed,state.length,state.ended),!state.destroyed&&(state.length||state.ended)&&(stream.emit("readable"),state.emittedReadable=!1),state.needReadable=!state.flowing&&!state.ended&&state.length<=state.highWaterMark,flow(stream)}function maybeReadMore(stream,state){state.readingMore||(state.readingMore=!0,queueMicrotask(maybeReadMore_,stream,state))}function maybeReadMore_(stream,state){for(;!state.reading&&!state.ended&&(state.length<state.highWaterMark||state.flowing&&state.length===0);){var len=state.length;if(debug("maybeReadMore read 0"),stream.read(0),len===state.length)break}state.readingMore=!1}Readable.prototype._read=function(n){errorOrDestroy(this,new ERR_METHOD_NOT_IMPLEMENTED("_read()"))};Readable.prototype.pipe=function(dest,pipeOpts){var src=this,state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest);break}state.pipesCount+=1,debug("pipe count=%d opts=%j",state.pipesCount,pipeOpts);var doEnd=(!pipeOpts||pipeOpts.end!==!1)&&dest!==import_process.default.stdout&&dest!==import_process.default.stderr,endFn=doEnd?onend:unpipe;state.endEmitted?queueMicrotask(endFn):src.once("end",endFn),dest.on("unpipe",onunpipe);function onunpipe(readable,unpipeInfo){debug("onunpipe"),readable===src&&unpipeInfo&&unpipeInfo.hasUnpiped===!1&&(unpipeInfo.hasUnpiped=!0,cleanup())}function onend(){debug("onend"),dest.end()}var ondrain=pipeOnDrain(src);dest.on("drain",ondrain);var cleanedUp=!1;function cleanup(){debug("cleanup"),dest.removeListener("close",onclose),dest.removeListener("finish",onfinish),dest.removeListener("drain",ondrain),dest.removeListener("error",onerror),dest.removeListener("unpipe",onunpipe),src.removeListener("end",onend),src.removeListener("end",unpipe),src.removeListener("data",ondata),cleanedUp=!0,state.awaitDrain&&(!dest._writableState||dest._writableState.needDrain)&&ondrain()}src.on("data",ondata);function ondata(chunk){debug("ondata");var ret=dest.write(chunk);debug("dest.write",ret),ret===!1&&((state.pipesCount===1&&state.pipes===dest||state.pipesCount>1&&indexOf(state.pipes,dest)!==-1)&&!cleanedUp&&(debug("false write response, pause",state.awaitDrain),state.awaitDrain++),src.pause())}function onerror(er){debug("onerror",er),unpipe(),dest.removeListener("error",onerror),EElistenerCount(dest,"error")===0&&errorOrDestroy(dest,er)}prependListener(dest,"error",onerror);function onclose(){dest.removeListener("finish",onfinish),unpipe()}dest.once("close",onclose);function onfinish(){debug("onfinish"),dest.removeListener("close",onclose),unpipe()}dest.once("finish",onfinish);function unpipe(){debug("unpipe"),src.unpipe(dest)}return dest.emit("pipe",src),state.flowing||(debug("pipe resume"),src.resume()),dest};function pipeOnDrain(src){return function(){var state=src._readableState;debug("pipeOnDrain",state.awaitDrain),state.awaitDrain&&state.awaitDrain--,state.awaitDrain===0&&EElistenerCount(src,"data")&&(state.flowing=!0,flow(src))}}Readable.prototype.unpipe=function(dest){var state=this._readableState,unpipeInfo={hasUnpiped:!1};if(state.pipesCount===0)return this;if(state.pipesCount===1)return dest&&dest!==state.pipes?this:(dest||(dest=state.pipes),state.pipes=null,state.pipesCount=0,state.flowing=!1,dest&&dest.emit("unpipe",this,unpipeInfo),this);if(!dest){var dests=state.pipes,len=state.pipesCount;state.pipes=null,state.pipesCount=0,state.flowing=!1;for(var i=0;i<len;i++)dests[i].emit("unpipe",this,{hasUnpiped:!1});return this}var index=indexOf(state.pipes,dest);return index===-1?this:(state.pipes.splice(index,1),state.pipesCount-=1,state.pipesCount===1&&(state.pipes=state.pipes[0]),dest.emit("unpipe",this,unpipeInfo),this)};Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn),state=this._readableState;return ev==="data"?(state.readableListening=this.listenerCount("readable")>0,state.flowing!==!1&&this.resume()):ev==="readable"&&!state.endEmitted&&!state.readableListening&&(state.readableListening=state.needReadable=!0,state.flowing=!1,state.emittedReadable=!1,debug("on readable",state.length,state.reading),state.length?emitReadable(this):state.reading||queueMicrotask(nReadingNextTick,this)),res};Readable.prototype.addListener=Readable.prototype.on;Readable.prototype.removeListener=function(ev,fn){var res=Stream.prototype.removeListener.call(this,ev,fn);return ev==="readable"&&queueMicrotask(updateReadableListening,this),res};Readable.prototype.removeAllListeners=function(ev){var res=Stream.prototype.removeAllListeners.apply(this,arguments);return(ev==="readable"||ev===void 0)&&queueMicrotask(updateReadableListening,this),res};function updateReadableListening(self2){var state=self2._readableState;state.readableListening=self2.listenerCount("readable")>0,state.resumeScheduled&&!state.paused?state.flowing=!0:self2.listenerCount("data")>0&&self2.resume()}function nReadingNextTick(self2){debug("readable nexttick read 0"),self2.read(0)}Readable.prototype.resume=function(){var state=this._readableState;return state.flowing||(debug("resume"),state.flowing=!state.readableListening,resume(this,state)),state.paused=!1,this};function resume(stream,state){state.resumeScheduled||(state.resumeScheduled=!0,queueMicrotask(resume_,stream,state))}function resume_(stream,state){debug("resume",state.reading),state.reading||stream.read(0),state.resumeScheduled=!1,stream.emit("resume"),flow(stream),state.flowing&&!state.reading&&stream.read(0)}Readable.prototype.pause=function(){return debug("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(debug("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function flow(stream){var state=stream._readableState;for(debug("flow",state.flowing);state.flowing&&stream.read()!==null;);}Readable.prototype.wrap=function(stream){var _this=this,state=this._readableState,paused=!1;stream.on("end",function(){if(debug("wrapped end"),state.decoder&&!state.ended){var chunk=state.decoder.end();chunk&&chunk.length&&_this.push(chunk)}_this.push(null)}),stream.on("data",function(chunk){if(debug("wrapped data"),state.decoder&&(chunk=state.decoder.write(chunk)),!(state.objectMode&&chunk==null)&&!(!state.objectMode&&(!chunk||!chunk.length))){var ret=_this.push(chunk);ret||(paused=!0,stream.pause())}});for(var i in stream)this[i]===void 0&&typeof stream[i]=="function"&&(this[i]=function(method){return function(){return stream[method].apply(stream,arguments)}}(i));for(var n=0;n<kProxyEvents.length;n++)stream.on(kProxyEvents[n],this.emit.bind(this,kProxyEvents[n]));return this._read=function(n2){debug("wrapped _read",n2),paused&&(paused=!1,stream.resume())},this};typeof Symbol=="function"&&(Readable.prototype[Symbol.asyncIterator]=function(){return createReadableStreamAsyncIterator===void 0&&(createReadableStreamAsyncIterator=require_async_iterator()),createReadableStreamAsyncIterator(this)});Object.defineProperty(Readable.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(Readable.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(Readable.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(state){this._readableState&&(this._readableState.flowing=state)}});Readable._fromList=fromList;Object.defineProperty(Readable.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function fromList(n,state){if(state.length===0)return null;var ret;return state.objectMode?ret=state.buffer.shift():!n||n>=state.length?(state.decoder?ret=state.buffer.join(""):state.buffer.length===1?ret=state.buffer.first():ret=state.buffer.concat(state.length),state.buffer.clear()):ret=state.buffer.consume(n,state.decoder),ret}function endReadable(stream){var state=stream._readableState;debug("endReadable",state.endEmitted),state.endEmitted||(state.ended=!0,queueMicrotask(endReadableNT,state,stream))}function endReadableNT(state,stream){if(debug("endReadableNT",state.endEmitted,state.length),!state.endEmitted&&state.length===0&&(state.endEmitted=!0,stream.readable=!1,stream.emit("end"),state.autoDestroy)){var wState=stream._writableState;(!wState||wState.autoDestroy&&wState.finished)&&stream.destroy()}}typeof Symbol=="function"&&(Readable.from=function(iterable,opts){return from2===void 0&&(from2=require_from_browser()),from2(Readable,iterable,opts)});function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++)if(xs[i]===x)return i;return-1}}});var require_stream_transform=__commonJS({"node_modules/readable-stream/lib/_stream_transform.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports=Transform;var _require$codes=require_errors_browser().codes,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes.ERR_MULTIPLE_CALLBACK,ERR_TRANSFORM_ALREADY_TRANSFORMING=_require$codes.ERR_TRANSFORM_ALREADY_TRANSFORMING,ERR_TRANSFORM_WITH_LENGTH_0=_require$codes.ERR_TRANSFORM_WITH_LENGTH_0,Duplex=require_stream_duplex();require_inherits_browser2()(Transform,Duplex);function afterTransform(er,data){var ts=this._transformState;ts.transforming=!1;var cb=ts.writecb;if(cb===null)return this.emit("error",new ERR_MULTIPLE_CALLBACK);ts.writechunk=null,ts.writecb=null,data!=null&&this.push(data),cb(er);var rs=this._readableState;rs.reading=!1,(rs.needReadable||rs.length<rs.highWaterMark)&&this._read(rs.highWaterMark)}function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options),this._transformState={afterTransform:afterTransform.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,options&&(typeof options.transform=="function"&&(this._transform=options.transform),typeof options.flush=="function"&&(this._flush=options.flush)),this.on("prefinish",prefinish)}function prefinish(){var _this=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(er,data){done(_this,er,data)}):done(this,null,null)}Transform.prototype.push=function(chunk,encoding){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,chunk,encoding)};Transform.prototype._transform=function(chunk,encoding,cb){cb(new ERR_METHOD_NOT_IMPLEMENTED("_transform()"))};Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;if(ts.writecb=cb,ts.writechunk=chunk,ts.writeencoding=encoding,!ts.transforming){var rs=this._readableState;(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)&&this._read(rs.highWaterMark)}};Transform.prototype._read=function(n){var ts=this._transformState;ts.writechunk!==null&&!ts.transforming?(ts.transforming=!0,this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform)):ts.needTransform=!0};Transform.prototype._destroy=function(err,cb){Duplex.prototype._destroy.call(this,err,function(err2){cb(err2)})};function done(stream,er,data){if(er)return stream.emit("error",er);if(data!=null&&stream.push(data),stream._writableState.length)throw new ERR_TRANSFORM_WITH_LENGTH_0;if(stream._transformState.transforming)throw new ERR_TRANSFORM_ALREADY_TRANSFORMING;return stream.push(null)}}});var require_stream_passthrough=__commonJS({"node_modules/readable-stream/lib/_stream_passthrough.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports=PassThrough;var Transform=require_stream_transform();require_inherits_browser2()(PassThrough,Transform);function PassThrough(options){if(!(this instanceof PassThrough))return new PassThrough(options);Transform.call(this,options)}PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk)}}});var require_pipeline=__commonJS({"node_modules/readable-stream/lib/internal/streams/pipeline.js"(exports,module){"use strict";init_define_process_env();init_shim();var eos;function once(callback){var called=!1;return function(){called||(called=!0,callback.apply(void 0,arguments))}}var _require$codes=require_errors_browser().codes,ERR_MISSING_ARGS=_require$codes.ERR_MISSING_ARGS,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED;function noop(err){if(err)throw err}function isRequest(stream){return stream.setHeader&&typeof stream.abort=="function"}function destroyer(stream,reading,writing,callback){callback=once(callback);var closed=!1;stream.on("close",function(){closed=!0}),eos===void 0&&(eos=require_end_of_stream()),eos(stream,{readable:reading,writable:writing},function(err){if(err)return callback(err);closed=!0,callback()});var destroyed=!1;return function(err){if(!closed&&!destroyed){if(destroyed=!0,isRequest(stream))return stream.abort();if(typeof stream.destroy=="function")return stream.destroy();callback(err||new ERR_STREAM_DESTROYED("pipe"))}}}function call(fn){fn()}function pipe(from2,to){return from2.pipe(to)}function popCallback(streams){return!streams.length||typeof streams[streams.length-1]!="function"?noop:streams.pop()}function pipeline(){for(var _len=arguments.length,streams=new Array(_len),_key=0;_key<_len;_key++)streams[_key]=arguments[_key];var callback=popCallback(streams);if(Array.isArray(streams[0])&&(streams=streams[0]),streams.length<2)throw new ERR_MISSING_ARGS("streams");var error,destroys=streams.map(function(stream,i){var reading=i<streams.length-1,writing=i>0;return destroyer(stream,reading,writing,function(err){error||(error=err),err&&destroys.forEach(call),!reading&&(destroys.forEach(call),callback(error))})});return streams.reduce(pipe)}module.exports=pipeline}});var require_readable_browser=__commonJS({"node_modules/readable-stream/readable-browser.js"(exports,module){init_define_process_env();init_shim();exports=module.exports=require_stream_readable();exports.Stream=exports;exports.Readable=exports;exports.Writable=require_stream_writable();exports.Duplex=require_stream_duplex();exports.Transform=require_stream_transform();exports.PassThrough=require_stream_passthrough();exports.finished=require_end_of_stream();exports.pipeline=require_pipeline()}});var require_hash_base=__commonJS({"node_modules/hash-base/index.js"(exports,module){"use strict";init_define_process_env();init_shim();var Buffer3=require_safe_buffer().Buffer,Transform=require_readable_browser().Transform,inherits=require_inherits_browser2();function throwIfNotStringOrBuffer(val,prefix){if(!Buffer3.isBuffer(val)&&typeof val!="string")throw new TypeError(prefix+" must be a string or a buffer")}function HashBase(blockSize){Transform.call(this),this._block=Buffer3.allocUnsafe(blockSize),this._blockSize=blockSize,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}inherits(HashBase,Transform);HashBase.prototype._transform=function(chunk,encoding,callback){var error=null;try{this.update(chunk,encoding)}catch(err){error=err}callback(error)};HashBase.prototype._flush=function(callback){var error=null;try{this.push(this.digest())}catch(err){error=err}callback(error)};HashBase.prototype.update=function(data,encoding){if(throwIfNotStringOrBuffer(data,"Data"),this._finalized)throw new Error("Digest already called");Buffer3.isBuffer(data)||(data=Buffer3.from(data,encoding));for(var block=this._block,offset=0;this._blockOffset+data.length-offset>=this._blockSize;){for(var i=this._blockOffset;i<this._blockSize;)block[i++]=data[offset++];this._update(),this._blockOffset=0}for(;offset<data.length;)block[this._blockOffset++]=data[offset++];for(var j=0,carry=data.length*8;carry>0;++j)this._length[j]+=carry,carry=this._length[j]/4294967296|0,carry>0&&(this._length[j]-=4294967296*carry);return this};HashBase.prototype._update=function(){throw new Error("_update is not implemented")};HashBase.prototype.digest=function(encoding){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var digest=this._digest();encoding!==void 0&&(digest=digest.toString(encoding)),this._block.fill(0),this._blockOffset=0;for(var i=0;i<4;++i)this._length[i]=0;return digest};HashBase.prototype._digest=function(){throw new Error("_digest is not implemented")};module.exports=HashBase}});var require_md5=__commonJS({"node_modules/md5.js/index.js"(exports,module){"use strict";init_define_process_env();init_shim();var inherits=require_inherits_browser2(),HashBase=require_hash_base(),Buffer3=require_safe_buffer().Buffer,ARRAY16=new Array(16);function MD5(){HashBase.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}inherits(MD5,HashBase);MD5.prototype._update=function(){for(var M=ARRAY16,i=0;i<16;++i)M[i]=this._block.readInt32LE(i*4);var a=this._a,b=this._b,c=this._c,d=this._d;a=fnF(a,b,c,d,M[0],3614090360,7),d=fnF(d,a,b,c,M[1],3905402710,12),c=fnF(c,d,a,b,M[2],606105819,17),b=fnF(b,c,d,a,M[3],3250441966,22),a=fnF(a,b,c,d,M[4],4118548399,7),d=fnF(d,a,b,c,M[5],1200080426,12),c=fnF(c,d,a,b,M[6],2821735955,17),b=fnF(b,c,d,a,M[7],4249261313,22),a=fnF(a,b,c,d,M[8],1770035416,7),d=fnF(d,a,b,c,M[9],2336552879,12),c=fnF(c,d,a,b,M[10],4294925233,17),b=fnF(b,c,d,a,M[11],2304563134,22),a=fnF(a,b,c,d,M[12],1804603682,7),d=fnF(d,a,b,c,M[13],4254626195,12),c=fnF(c,d,a,b,M[14],2792965006,17),b=fnF(b,c,d,a,M[15],1236535329,22),a=fnG(a,b,c,d,M[1],4129170786,5),d=fnG(d,a,b,c,M[6],3225465664,9),c=fnG(c,d,a,b,M[11],643717713,14),b=fnG(b,c,d,a,M[0],3921069994,20),a=fnG(a,b,c,d,M[5],3593408605,5),d=fnG(d,a,b,c,M[10],38016083,9),c=fnG(c,d,a,b,M[15],3634488961,14),b=fnG(b,c,d,a,M[4],3889429448,20),a=fnG(a,b,c,d,M[9],568446438,5),d=fnG(d,a,b,c,M[14],3275163606,9),c=fnG(c,d,a,b,M[3],4107603335,14),b=fnG(b,c,d,a,M[8],1163531501,20),a=fnG(a,b,c,d,M[13],2850285829,5),d=fnG(d,a,b,c,M[2],4243563512,9),c=fnG(c,d,a,b,M[7],1735328473,14),b=fnG(b,c,d,a,M[12],2368359562,20),a=fnH(a,b,c,d,M[5],4294588738,4),d=fnH(d,a,b,c,M[8],2272392833,11),c=fnH(c,d,a,b,M[11],1839030562,16),b=fnH(b,c,d,a,M[14],4259657740,23),a=fnH(a,b,c,d,M[1],2763975236,4),d=fnH(d,a,b,c,M[4],1272893353,11),c=fnH(c,d,a,b,M[7],4139469664,16),b=fnH(b,c,d,a,M[10],3200236656,23),a=fnH(a,b,c,d,M[13],681279174,4),d=fnH(d,a,b,c,M[0],3936430074,11),c=fnH(c,d,a,b,M[3],3572445317,16),b=fnH(b,c,d,a,M[6],76029189,23),a=fnH(a,b,c,d,M[9],3654602809,4),d=fnH(d,a,b,c,M[12],3873151461,11),c=fnH(c,d,a,b,M[15],530742520,16),b=fnH(b,c,d,a,M[2],3299628645,23),a=fnI(a,b,c,d,M[0],4096336452,6),d=fnI(d,a,b,c,M[7],1126891415,10),c=fnI(c,d,a,b,M[14],2878612391,15),b=fnI(b,c,d,a,M[5],4237533241,21),a=fnI(a,b,c,d,M[12],1700485571,6),d=fnI(d,a,b,c,M[3],2399980690,10),c=fnI(c,d,a,b,M[10],4293915773,15),b=fnI(b,c,d,a,M[1],2240044497,21),a=fnI(a,b,c,d,M[8],1873313359,6),d=fnI(d,a,b,c,M[15],4264355552,10),c=fnI(c,d,a,b,M[6],2734768916,15),b=fnI(b,c,d,a,M[13],1309151649,21),a=fnI(a,b,c,d,M[4],4149444226,6),d=fnI(d,a,b,c,M[11],3174756917,10),c=fnI(c,d,a,b,M[2],718787259,15),b=fnI(b,c,d,a,M[9],3951481745,21),this._a=this._a+a|0,this._b=this._b+b|0,this._c=this._c+c|0,this._d=this._d+d|0};MD5.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var buffer=Buffer3.allocUnsafe(16);return buffer.writeInt32LE(this._a,0),buffer.writeInt32LE(this._b,4),buffer.writeInt32LE(this._c,8),buffer.writeInt32LE(this._d,12),buffer};function rotl(x,n){return x<<n|x>>>32-n}function fnF(a,b,c,d,m,k,s){return rotl(a+(b&c|~b&d)+m+k|0,s)+b|0}function fnG(a,b,c,d,m,k,s){return rotl(a+(b&d|c&~d)+m+k|0,s)+b|0}function fnH(a,b,c,d,m,k,s){return rotl(a+(b^c^d)+m+k|0,s)+b|0}function fnI(a,b,c,d,m,k,s){return rotl(a+(c^(b|~d))+m+k|0,s)+b|0}module.exports=MD5}});var require_ripemd160=__commonJS({"node_modules/ripemd160/index.js"(exports,module){"use strict";init_define_process_env();init_shim();var Buffer3=require_buffer().Buffer,inherits=require_inherits_browser2(),HashBase=require_hash_base(),ARRAY16=new Array(16),zl=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],zr=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],sl=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sr=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],hl=[0,1518500249,1859775393,2400959708,2840853838],hr=[1352829926,1548603684,1836072691,2053994217,0];function RIPEMD160(){HashBase.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}inherits(RIPEMD160,HashBase);RIPEMD160.prototype._update=function(){for(var words=ARRAY16,j=0;j<16;++j)words[j]=this._block.readInt32LE(j*4);for(var al=this._a|0,bl=this._b|0,cl=this._c|0,dl=this._d|0,el=this._e|0,ar=this._a|0,br=this._b|0,cr=this._c|0,dr=this._d|0,er=this._e|0,i=0;i<80;i+=1){var tl,tr;i<16?(tl=fn1(al,bl,cl,dl,el,words[zl[i]],hl[0],sl[i]),tr=fn5(ar,br,cr,dr,er,words[zr[i]],hr[0],sr[i])):i<32?(tl=fn2(al,bl,cl,dl,el,words[zl[i]],hl[1],sl[i]),tr=fn4(ar,br,cr,dr,er,words[zr[i]],hr[1],sr[i])):i<48?(tl=fn3(al,bl,cl,dl,el,words[zl[i]],hl[2],sl[i]),tr=fn3(ar,br,cr,dr,er,words[zr[i]],hr[2],sr[i])):i<64?(tl=fn4(al,bl,cl,dl,el,words[zl[i]],hl[3],sl[i]),tr=fn2(ar,br,cr,dr,er,words[zr[i]],hr[3],sr[i])):(tl=fn5(al,bl,cl,dl,el,words[zl[i]],hl[4],sl[i]),tr=fn1(ar,br,cr,dr,er,words[zr[i]],hr[4],sr[i])),al=el,el=dl,dl=rotl(cl,10),cl=bl,bl=tl,ar=er,er=dr,dr=rotl(cr,10),cr=br,br=tr}var t=this._b+cl+dr|0;this._b=this._c+dl+er|0,this._c=this._d+el+ar|0,this._d=this._e+al+br|0,this._e=this._a+bl+cr|0,this._a=t};RIPEMD160.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var buffer=Buffer3.alloc?Buffer3.alloc(20):new Buffer3(20);return buffer.writeInt32LE(this._a,0),buffer.writeInt32LE(this._b,4),buffer.writeInt32LE(this._c,8),buffer.writeInt32LE(this._d,12),buffer.writeInt32LE(this._e,16),buffer};function rotl(x,n){return x<<n|x>>>32-n}function fn1(a,b,c,d,e,m,k,s){return rotl(a+(b^c^d)+m+k|0,s)+e|0}function fn2(a,b,c,d,e,m,k,s){return rotl(a+(b&c|~b&d)+m+k|0,s)+e|0}function fn3(a,b,c,d,e,m,k,s){return rotl(a+((b|~c)^d)+m+k|0,s)+e|0}function fn4(a,b,c,d,e,m,k,s){return rotl(a+(b&d|c&~d)+m+k|0,s)+e|0}function fn5(a,b,c,d,e,m,k,s){return rotl(a+(b^(c|~d))+m+k|0,s)+e|0}module.exports=RIPEMD160}});var require_hash=__commonJS({"node_modules/sha.js/hash.js"(exports,module){init_define_process_env();init_shim();var Buffer3=require_safe_buffer().Buffer;function Hash(blockSize,finalSize){this._block=Buffer3.alloc(blockSize),this._finalSize=finalSize,this._blockSize=blockSize,this._len=0}Hash.prototype.update=function(data,enc){typeof data=="string"&&(enc=enc||"utf8",data=Buffer3.from(data,enc));for(var block=this._block,blockSize=this._blockSize,length=data.length,accum=this._len,offset=0;offset<length;){for(var assigned=accum%blockSize,remainder=Math.min(length-offset,blockSize-assigned),i=0;i<remainder;i++)block[assigned+i]=data[offset+i];accum+=remainder,offset+=remainder,accum%blockSize===0&&this._update(block)}return this._len+=length,this};Hash.prototype.digest=function(enc){var rem=this._len%this._blockSize;this._block[rem]=128,this._block.fill(0,rem+1),rem>=this._finalSize&&(this._update(this._block),this._block.fill(0));var bits=this._len*8;if(bits<=4294967295)this._block.writeUInt32BE(bits,this._blockSize-4);else{var lowBits=(bits&4294967295)>>>0,highBits=(bits-lowBits)/4294967296;this._block.writeUInt32BE(highBits,this._blockSize-8),this._block.writeUInt32BE(lowBits,this._blockSize-4)}this._update(this._block);var hash=this._hash();return enc?hash.toString(enc):hash};Hash.prototype._update=function(){throw new Error("_update must be implemented by subclass")};module.exports=Hash}});var require_sha=__commonJS({"node_modules/sha.js/sha.js"(exports,module){init_define_process_env();init_shim();var inherits=require_inherits_browser2(),Hash=require_hash(),Buffer3=require_safe_buffer().Buffer,K=[1518500249,1859775393,-1894007588,-899497514],W=new Array(80);function Sha(){this.init(),this._w=W,Hash.call(this,64,56)}inherits(Sha,Hash);Sha.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function rotl5(num){return num<<5|num>>>27}function rotl30(num){return num<<30|num>>>2}function ft(s,b,c,d){return s===0?b&c|~b&d:s===2?b&c|b&d|c&d:b^c^d}Sha.prototype._update=function(M){for(var W2=this._w,a=this._a|0,b=this._b|0,c=this._c|0,d=this._d|0,e=this._e|0,i=0;i<16;++i)W2[i]=M.readInt32BE(i*4);for(;i<80;++i)W2[i]=W2[i-3]^W2[i-8]^W2[i-14]^W2[i-16];for(var j=0;j<80;++j){var s=~~(j/20),t=rotl5(a)+ft(s,b,c,d)+e+W2[j]+K[s]|0;e=d,d=c,c=rotl30(b),b=a,a=t}this._a=a+this._a|0,this._b=b+this._b|0,this._c=c+this._c|0,this._d=d+this._d|0,this._e=e+this._e|0};Sha.prototype._hash=function(){var H=Buffer3.allocUnsafe(20);return H.writeInt32BE(this._a|0,0),H.writeInt32BE(this._b|0,4),H.writeInt32BE(this._c|0,8),H.writeInt32BE(this._d|0,12),H.writeInt32BE(this._e|0,16),H};module.exports=Sha}});var require_sha1=__commonJS({"node_modules/sha.js/sha1.js"(exports,module){init_define_process_env();init_shim();var inherits=require_inherits_browser2(),Hash=require_hash(),Buffer3=require_safe_buffer().Buffer,K=[1518500249,1859775393,-1894007588,-899497514],W=new Array(80);function Sha1(){this.init(),this._w=W,Hash.call(this,64,56)}inherits(Sha1,Hash);Sha1.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function rotl1(num){return num<<1|num>>>31}function rotl5(num){return num<<5|num>>>27}function rotl30(num){return num<<30|num>>>2}function ft(s,b,c,d){return s===0?b&c|~b&d:s===2?b&c|b&d|c&d:b^c^d}Sha1.prototype._update=function(M){for(var W2=this._w,a=this._a|0,b=this._b|0,c=this._c|0,d=this._d|0,e=this._e|0,i=0;i<16;++i)W2[i]=M.readInt32BE(i*4);for(;i<80;++i)W2[i]=rotl1(W2[i-3]^W2[i-8]^W2[i-14]^W2[i-16]);for(var j=0;j<80;++j){var s=~~(j/20),t=rotl5(a)+ft(s,b,c,d)+e+W2[j]+K[s]|0;e=d,d=c,c=rotl30(b),b=a,a=t}this._a=a+this._a|0,this._b=b+this._b|0,this._c=c+this._c|0,this._d=d+this._d|0,this._e=e+this._e|0};Sha1.prototype._hash=function(){var H=Buffer3.allocUnsafe(20);return H.writeInt32BE(this._a|0,0),H.writeInt32BE(this._b|0,4),H.writeInt32BE(this._c|0,8),H.writeInt32BE(this._d|0,12),H.writeInt32BE(this._e|0,16),H};module.exports=Sha1}});var require_sha256=__commonJS({"node_modules/sha.js/sha256.js"(exports,module){init_define_process_env();init_shim();var inherits=require_inherits_browser2(),Hash=require_hash(),Buffer3=require_safe_buffer().Buffer,K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],W=new Array(64);function Sha256(){this.init(),this._w=W,Hash.call(this,64,56)}inherits(Sha256,Hash);Sha256.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function ch(x,y,z){return z^x&(y^z)}function maj(x,y,z){return x&y|z&(x|y)}function sigma0(x){return(x>>>2|x<<30)^(x>>>13|x<<19)^(x>>>22|x<<10)}function sigma1(x){return(x>>>6|x<<26)^(x>>>11|x<<21)^(x>>>25|x<<7)}function gamma0(x){return(x>>>7|x<<25)^(x>>>18|x<<14)^x>>>3}function gamma1(x){return(x>>>17|x<<15)^(x>>>19|x<<13)^x>>>10}Sha256.prototype._update=function(M){for(var W2=this._w,a=this._a|0,b=this._b|0,c=this._c|0,d=this._d|0,e=this._e|0,f=this._f|0,g=this._g|0,h=this._h|0,i=0;i<16;++i)W2[i]=M.readInt32BE(i*4);for(;i<64;++i)W2[i]=gamma1(W2[i-2])+W2[i-7]+gamma0(W2[i-15])+W2[i-16]|0;for(var j=0;j<64;++j){var T1=h+sigma1(e)+ch(e,f,g)+K[j]+W2[j]|0,T2=sigma0(a)+maj(a,b,c)|0;h=g,g=f,f=e,e=d+T1|0,d=c,c=b,b=a,a=T1+T2|0}this._a=a+this._a|0,this._b=b+this._b|0,this._c=c+this._c|0,this._d=d+this._d|0,this._e=e+this._e|0,this._f=f+this._f|0,this._g=g+this._g|0,this._h=h+this._h|0};Sha256.prototype._hash=function(){var H=Buffer3.allocUnsafe(32);return H.writeInt32BE(this._a,0),H.writeInt32BE(this._b,4),H.writeInt32BE(this._c,8),H.writeInt32BE(this._d,12),H.writeInt32BE(this._e,16),H.writeInt32BE(this._f,20),H.writeInt32BE(this._g,24),H.writeInt32BE(this._h,28),H};module.exports=Sha256}});var require_sha224=__commonJS({"node_modules/sha.js/sha224.js"(exports,module){init_define_process_env();init_shim();var inherits=require_inherits_browser2(),Sha256=require_sha256(),Hash=require_hash(),Buffer3=require_safe_buffer().Buffer,W=new Array(64);function Sha224(){this.init(),this._w=W,Hash.call(this,64,56)}inherits(Sha224,Sha256);Sha224.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this};Sha224.prototype._hash=function(){var H=Buffer3.allocUnsafe(28);return H.writeInt32BE(this._a,0),H.writeInt32BE(this._b,4),H.writeInt32BE(this._c,8),H.writeInt32BE(this._d,12),H.writeInt32BE(this._e,16),H.writeInt32BE(this._f,20),H.writeInt32BE(this._g,24),H};module.exports=Sha224}});var require_sha512=__commonJS({"node_modules/sha.js/sha512.js"(exports,module){init_define_process_env();init_shim();var inherits=require_inherits_browser2(),Hash=require_hash(),Buffer3=require_safe_buffer().Buffer,K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],W=new Array(160);function Sha512(){this.init(),this._w=W,Hash.call(this,128,112)}inherits(Sha512,Hash);Sha512.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function Ch(x,y,z){return z^x&(y^z)}function maj(x,y,z){return x&y|z&(x|y)}function sigma0(x,xl){return(x>>>28|xl<<4)^(xl>>>2|x<<30)^(xl>>>7|x<<25)}function sigma1(x,xl){return(x>>>14|xl<<18)^(x>>>18|xl<<14)^(xl>>>9|x<<23)}function Gamma0(x,xl){return(x>>>1|xl<<31)^(x>>>8|xl<<24)^x>>>7}function Gamma0l(x,xl){return(x>>>1|xl<<31)^(x>>>8|xl<<24)^(x>>>7|xl<<25)}function Gamma1(x,xl){return(x>>>19|xl<<13)^(xl>>>29|x<<3)^x>>>6}function Gamma1l(x,xl){return(x>>>19|xl<<13)^(xl>>>29|x<<3)^(x>>>6|xl<<26)}function getCarry(a,b){return a>>>0<b>>>0?1:0}Sha512.prototype._update=function(M){for(var W2=this._w,ah=this._ah|0,bh=this._bh|0,ch=this._ch|0,dh=this._dh|0,eh=this._eh|0,fh=this._fh|0,gh=this._gh|0,hh=this._hh|0,al=this._al|0,bl=this._bl|0,cl=this._cl|0,dl=this._dl|0,el=this._el|0,fl=this._fl|0,gl=this._gl|0,hl=this._hl|0,i=0;i<32;i+=2)W2[i]=M.readInt32BE(i*4),W2[i+1]=M.readInt32BE(i*4+4);for(;i<160;i+=2){var xh=W2[i-30],xl=W2[i-15*2+1],gamma0=Gamma0(xh,xl),gamma0l=Gamma0l(xl,xh);xh=W2[i-2*2],xl=W2[i-2*2+1];var gamma1=Gamma1(xh,xl),gamma1l=Gamma1l(xl,xh),Wi7h=W2[i-7*2],Wi7l=W2[i-7*2+1],Wi16h=W2[i-16*2],Wi16l=W2[i-16*2+1],Wil=gamma0l+Wi7l|0,Wih=gamma0+Wi7h+getCarry(Wil,gamma0l)|0;Wil=Wil+gamma1l|0,Wih=Wih+gamma1+getCarry(Wil,gamma1l)|0,Wil=Wil+Wi16l|0,Wih=Wih+Wi16h+getCarry(Wil,Wi16l)|0,W2[i]=Wih,W2[i+1]=Wil}for(var j=0;j<160;j+=2){Wih=W2[j],Wil=W2[j+1];var majh=maj(ah,bh,ch),majl=maj(al,bl,cl),sigma0h=sigma0(ah,al),sigma0l=sigma0(al,ah),sigma1h=sigma1(eh,el),sigma1l=sigma1(el,eh),Kih=K[j],Kil=K[j+1],chh=Ch(eh,fh,gh),chl=Ch(el,fl,gl),t1l=hl+sigma1l|0,t1h=hh+sigma1h+getCarry(t1l,hl)|0;t1l=t1l+chl|0,t1h=t1h+chh+getCarry(t1l,chl)|0,t1l=t1l+Kil|0,t1h=t1h+Kih+getCarry(t1l,Kil)|0,t1l=t1l+Wil|0,t1h=t1h+Wih+getCarry(t1l,Wil)|0;var t2l=sigma0l+majl|0,t2h=sigma0h+majh+getCarry(t2l,sigma0l)|0;hh=gh,hl=gl,gh=fh,gl=fl,fh=eh,fl=el,el=dl+t1l|0,eh=dh+t1h+getCarry(el,dl)|0,dh=ch,dl=cl,ch=bh,cl=bl,bh=ah,bl=al,al=t1l+t2l|0,ah=t1h+t2h+getCarry(al,t1l)|0}this._al=this._al+al|0,this._bl=this._bl+bl|0,this._cl=this._cl+cl|0,this._dl=this._dl+dl|0,this._el=this._el+el|0,this._fl=this._fl+fl|0,this._gl=this._gl+gl|0,this._hl=this._hl+hl|0,this._ah=this._ah+ah+getCarry(this._al,al)|0,this._bh=this._bh+bh+getCarry(this._bl,bl)|0,this._ch=this._ch+ch+getCarry(this._cl,cl)|0,this._dh=this._dh+dh+getCarry(this._dl,dl)|0,this._eh=this._eh+eh+getCarry(this._el,el)|0,this._fh=this._fh+fh+getCarry(this._fl,fl)|0,this._gh=this._gh+gh+getCarry(this._gl,gl)|0,this._hh=this._hh+hh+getCarry(this._hl,hl)|0};Sha512.prototype._hash=function(){var H=Buffer3.allocUnsafe(64);function writeInt64BE(h,l,offset){H.writeInt32BE(h,offset),H.writeInt32BE(l,offset+4)}return writeInt64BE(this._ah,this._al,0),writeInt64BE(this._bh,this._bl,8),writeInt64BE(this._ch,this._cl,16),writeInt64BE(this._dh,this._dl,24),writeInt64BE(this._eh,this._el,32),writeInt64BE(this._fh,this._fl,40),writeInt64BE(this._gh,this._gl,48),writeInt64BE(this._hh,this._hl,56),H};module.exports=Sha512}});var require_sha384=__commonJS({"node_modules/sha.js/sha384.js"(exports,module){init_define_process_env();init_shim();var inherits=require_inherits_browser2(),SHA512=require_sha512(),Hash=require_hash(),Buffer3=require_safe_buffer().Buffer,W=new Array(160);function Sha384(){this.init(),this._w=W,Hash.call(this,128,112)}inherits(Sha384,SHA512);Sha384.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this};Sha384.prototype._hash=function(){var H=Buffer3.allocUnsafe(48);function writeInt64BE(h,l,offset){H.writeInt32BE(h,offset),H.writeInt32BE(l,offset+4)}return writeInt64BE(this._ah,this._al,0),writeInt64BE(this._bh,this._bl,8),writeInt64BE(this._ch,this._cl,16),writeInt64BE(this._dh,this._dl,24),writeInt64BE(this._eh,this._el,32),writeInt64BE(this._fh,this._fl,40),H};module.exports=Sha384}});var require_sha2=__commonJS({"node_modules/sha.js/index.js"(exports,module){init_define_process_env();init_shim();var exports=module.exports=function(algorithm){algorithm=algorithm.toLowerCase();var Algorithm=exports[algorithm];if(!Algorithm)throw new Error(algorithm+" is not supported (we accept pull requests)");return new Algorithm};exports.sha=require_sha();exports.sha1=require_sha1();exports.sha224=require_sha224();exports.sha256=require_sha256();exports.sha384=require_sha384();exports.sha512=require_sha512()}});var require_stream_browserify=__commonJS({"node_modules/stream-browserify/index.js"(exports,module){init_define_process_env();init_shim();module.exports=Stream;var EE=require_events().EventEmitter,inherits=require_inherits_browser2();inherits(Stream,EE);Stream.Readable=require_stream_readable();Stream.Writable=require_stream_writable();Stream.Duplex=require_stream_duplex();Stream.Transform=require_stream_transform();Stream.PassThrough=require_stream_passthrough();Stream.finished=require_end_of_stream();Stream.pipeline=require_pipeline();Stream.Stream=Stream;function Stream(){EE.call(this)}Stream.prototype.pipe=function(dest,options){var source=this;function ondata(chunk){dest.writable&&dest.write(chunk)===!1&&source.pause&&source.pause()}source.on("data",ondata);function ondrain(){source.readable&&source.resume&&source.resume()}dest.on("drain",ondrain),!dest._isStdio&&(!options||options.end!==!1)&&(source.on("end",onend),source.on("close",onclose));var didOnEnd=!1;function onend(){didOnEnd||(didOnEnd=!0,dest.end())}function onclose(){didOnEnd||(didOnEnd=!0,typeof dest.destroy=="function"&&dest.destroy())}function onerror(er){if(cleanup(),EE.listenerCount(this,"error")===0)throw er}source.on("error",onerror),dest.on("error",onerror);function cleanup(){source.removeListener("data",ondata),dest.removeListener("drain",ondrain),source.removeListener("end",onend),source.removeListener("close",onclose),source.removeListener("error",onerror),dest.removeListener("error",onerror),source.removeListener("end",cleanup),source.removeListener("close",cleanup),dest.removeListener("close",cleanup)}return source.on("end",cleanup),source.on("close",cleanup),dest.on("close",cleanup),dest.emit("pipe",source),dest}}});var require_cipher_base=__commonJS({"node_modules/cipher-base/index.js"(exports,module){init_define_process_env();init_shim();var Buffer3=require_safe_buffer().Buffer,Transform=require_stream_browserify().Transform,StringDecoder=require_string_decoder().StringDecoder,inherits=require_inherits_browser2();function CipherBase(hashMode){Transform.call(this),this.hashMode=typeof hashMode=="string",this.hashMode?this[hashMode]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}inherits(CipherBase,Transform);CipherBase.prototype.update=function(data,inputEnc,outputEnc){typeof data=="string"&&(data=Buffer3.from(data,inputEnc));var outData=this._update(data);return this.hashMode?this:(outputEnc&&(outData=this._toString(outData,outputEnc)),outData)};CipherBase.prototype.setAutoPadding=function(){};CipherBase.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")};CipherBase.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")};CipherBase.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")};CipherBase.prototype._transform=function(data,_,next){var err;try{this.hashMode?this._update(data):this.push(this._update(data))}catch(e){err=e}finally{next(err)}};CipherBase.prototype._flush=function(done){var err;try{this.push(this.__final())}catch(e){err=e}done(err)};CipherBase.prototype._finalOrDigest=function(outputEnc){var outData=this.__final()||Buffer3.alloc(0);return outputEnc&&(outData=this._toString(outData,outputEnc,!0)),outData};CipherBase.prototype._toString=function(value,enc,fin){if(this._decoder||(this._decoder=new StringDecoder(enc),this._encoding=enc),this._encoding!==enc)throw new Error("can't switch encodings");var out=this._decoder.write(value);return fin&&(out+=this._decoder.end()),out};module.exports=CipherBase}});var require_browser3=__commonJS({"node_modules/create-hash/browser.js"(exports,module){"use strict";init_define_process_env();init_shim();var inherits=require_inherits_browser2(),MD5=require_md5(),RIPEMD160=require_ripemd160(),sha=require_sha2(),Base=require_cipher_base();function Hash(hash){Base.call(this,"digest"),this._hash=hash}inherits(Hash,Base);Hash.prototype._update=function(data){this._hash.update(data)};Hash.prototype._final=function(){return this._hash.digest()};module.exports=function(alg){return alg=alg.toLowerCase(),alg==="md5"?new MD5:alg==="rmd160"||alg==="ripemd160"?new RIPEMD160:new Hash(sha(alg))}}});var require_hash2=__commonJS({"lib-browser-old/u/shared/hash.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_regexp_exec();require_es_string_replace();var create_hash=require_browser3(),b_fiber=require_b_fiber(),mode_check=require_mode_check(),hash=exports;hash.digest=function(text,encoding){var _encoding;(_encoding=encoding)!=null||(encoding="utf8");let hasher=create_hash("md5");return hasher.update(text,encoding),hasher.digest("hex")};hash.incremental_digest=function(obj){let hasher=create_hash("md5"),steps=0,visited=new Set;function add(obj2){if(steps+=1,steps%100===0&&b_fiber.optional_pause("add incremental digest"),!visited.has(obj2)){if(obj2!=null&&typeof obj2=="object"){if(visited.add(obj2),mode_check.on_server()&&import_buffer.Buffer.isBuffer(obj2)){hasher.update(obj2);return}hasher.update("os|","utf8"),obj2 instanceof Date&&hasher.update("d|"+String(obj2));for(let k in obj2){let v=obj2[k];hasher.update(k+"|","utf8"),add(v)}hasher.update("|oe","utf8");return}typeof obj2=="string"?hasher.update("s|"+obj2.replace(/\|/g,"||")):hasher.update("r|"+String(obj2))}}return add(obj),hasher.digest("hex")}}});var require_test_state=__commonJS({"lib-browser-old/u/client/test_state.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.all_page_errors=void 0;var all_page_errors=[];exports.all_page_errors=all_page_errors}});var require_u=__commonJS({"lib-browser-old/u/u.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();require_web_dom_collections_for_each();Object.defineProperty(exports,"__esModule",{value:!0});var _exportNames={require:!0,server_errors:!0,base64:!0,base64decode:!0,ClientError:!0,NotFound:!0,Redirect:!0,errors:!0};exports.server_errors=exports.require=exports.errors=exports.base64decode=exports.base64=exports.Redirect=exports.NotFound=exports.ClientError=void 0;var mode_check=_interopRequireWildcard(require_mode_check());Object.keys(mode_check).forEach(function(key){key==="default"||key==="__esModule"||Object.prototype.hasOwnProperty.call(_exportNames,key)||key in exports&&exports[key]===mode_check[key]||Object.defineProperty(exports,key,{enumerable:!0,get:function(){return mode_check[key]}})});var errors=_interopRequireWildcard(require_errors());exports.errors=errors;Object.keys(errors).forEach(function(key){key==="default"||key==="__esModule"||Object.prototype.hasOwnProperty.call(_exportNames,key)||key in exports&&exports[key]===errors[key]||Object.defineProperty(exports,key,{enumerable:!0,get:function(){return errors[key]}})});var b_window=_interopRequireWildcard(require_b_window());Object.keys(b_window).forEach(function(key){key==="default"||key==="__esModule"||Object.prototype.hasOwnProperty.call(_exportNames,key)||key in exports&&exports[key]===b_window[key]||Object.defineProperty(exports,key,{enumerable:!0,get:function(){return b_window[key]}})});var _b_object=require_b_object();Object.keys(_b_object).forEach(function(key){key==="default"||key==="__esModule"||Object.prototype.hasOwnProperty.call(_exportNames,key)||key in exports&&exports[key]===_b_object[key]||Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _b_object[key]}})});var _b_array=require_b_array();Object.keys(_b_array).forEach(function(key){key==="default"||key==="__esModule"||Object.prototype.hasOwnProperty.call(_exportNames,key)||key in exports&&exports[key]===_b_array[key]||Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _b_array[key]}})});var _b_date=require_b_date();Object.keys(_b_date).forEach(function(key){key==="default"||key==="__esModule"||Object.prototype.hasOwnProperty.call(_exportNames,key)||key in exports&&exports[key]===_b_date[key]||Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _b_date[key]}})});var _b_number=require_b_number();Object.keys(_b_number).forEach(function(key){key==="default"||key==="__esModule"||Object.prototype.hasOwnProperty.call(_exportNames,key)||key in exports&&exports[key]===_b_number[key]||Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _b_number[key]}})});var _b_search=require_b_search();Object.keys(_b_search).forEach(function(key){key==="default"||key==="__esModule"||Object.prototype.hasOwnProperty.call(_exportNames,key)||key in exports&&exports[key]===_b_search[key]||Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _b_search[key]}})});var _b_string=require_b_string();Object.keys(_b_string).forEach(function(key){key==="default"||key==="__esModule"||Object.prototype.hasOwnProperty.call(_exportNames,key)||key in exports&&exports[key]===_b_string[key]||Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _b_string[key]}})});var _b_ui=require_b_ui();Object.keys(_b_ui).forEach(function(key){key==="default"||key==="__esModule"||Object.prototype.hasOwnProperty.call(_exportNames,key)||key in exports&&exports[key]===_b_ui[key]||Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _b_ui[key]}})});var _b_ui_editor=require_b_ui_editor();Object.keys(_b_ui_editor).forEach(function(key){key==="default"||key==="__esModule"||Object.prototype.hasOwnProperty.call(_exportNames,key)||key in exports&&exports[key]===_b_ui_editor[key]||Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _b_ui_editor[key]}})});var _domain_parser=require_domain_parser();Object.keys(_domain_parser).forEach(function(key){key==="default"||key==="__esModule"||Object.prototype.hasOwnProperty.call(_exportNames,key)||key in exports&&exports[key]===_domain_parser[key]||Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _domain_parser[key]}})});var _timestamp=require_timestamp();Object.keys(_timestamp).forEach(function(key){key==="default"||key==="__esModule"||Object.prototype.hasOwnProperty.call(_exportNames,key)||key in exports&&exports[key]===_timestamp[key]||Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _timestamp[key]}})});var _uuid=require_uuid();Object.keys(_uuid).forEach(function(key){key==="default"||key==="__esModule"||Object.prototype.hasOwnProperty.call(_exportNames,key)||key in exports&&exports[key]===_uuid[key]||Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _uuid[key]}})});var _color=require_color();Object.keys(_color).forEach(function(key){key==="default"||key==="__esModule"||Object.prototype.hasOwnProperty.call(_exportNames,key)||key in exports&&exports[key]===_color[key]||Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _color[key]}})});var _b_async=require_b_async3();Object.keys(_b_async).forEach(function(key){key==="default"||key==="__esModule"||Object.prototype.hasOwnProperty.call(_exportNames,key)||key in exports&&exports[key]===_b_async[key]||Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _b_async[key]}})});var _autorun=require_autorun3();Object.keys(_autorun).forEach(function(key){key==="default"||key==="__esModule"||Object.prototype.hasOwnProperty.call(_exportNames,key)||key in exports&&exports[key]===_autorun[key]||Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _autorun[key]}})});var _autorun_cache=require_autorun_cache();Object.keys(_autorun_cache).forEach(function(key){key==="default"||key==="__esModule"||Object.prototype.hasOwnProperty.call(_exportNames,key)||key in exports&&exports[key]===_autorun_cache[key]||Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _autorun_cache[key]}})});var _dependency=require_dependency3();Object.keys(_dependency).forEach(function(key){key==="default"||key==="__esModule"||Object.prototype.hasOwnProperty.call(_exportNames,key)||key in exports&&exports[key]===_dependency[key]||Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _dependency[key]}})});var _client_storage=require_client_storage();Object.keys(_client_storage).forEach(function(key){key==="default"||key==="__esModule"||Object.prototype.hasOwnProperty.call(_exportNames,key)||key in exports&&exports[key]===_client_storage[key]||Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _client_storage[key]}})});var _hash=require_hash2();Object.keys(_hash).forEach(function(key){key==="default"||key==="__esModule"||Object.prototype.hasOwnProperty.call(_exportNames,key)||key in exports&&exports[key]===_hash[key]||Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _hash[key]}})});var _incremental=require_incremental();Object.keys(_incremental).forEach(function(key){key==="default"||key==="__esModule"||Object.prototype.hasOwnProperty.call(_exportNames,key)||key in exports&&exports[key]===_incremental[key]||Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _incremental[key]}})});var _server_notifications=require_server_notifications();Object.keys(_server_notifications).forEach(function(key){key==="default"||key==="__esModule"||Object.prototype.hasOwnProperty.call(_exportNames,key)||key in exports&&exports[key]===_server_notifications[key]||Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _server_notifications[key]}})});var _test_state=require_test_state();Object.keys(_test_state).forEach(function(key){key==="default"||key==="__esModule"||Object.prototype.hasOwnProperty.call(_exportNames,key)||key in exports&&exports[key]===_test_state[key]||Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _test_state[key]}})});var _buffer$base,_buffer,_buffer$base64decode,_buffer2,_server_errors,_server_errors2,_server_errors3;function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var fakequire=__require;exports.require=fakequire;var buffer,server_errors;exports.server_errors=server_errors;(mode_check.on_server()||mode_check.running_test())&&(buffer=fakequire("./shared/buffer"),exports.server_errors=server_errors=fakequire("./server/server_errors"));var base64=(_buffer$base=(_buffer=buffer)==null?void 0:_buffer.base64)!=null?_buffer$base:b_window.base64;exports.base64=base64;var base64decode=(_buffer$base64decode=(_buffer2=buffer)==null?void 0:_buffer2.base64decode)!=null?_buffer$base64decode:b_window.base64decode;exports.base64decode=base64decode;var ClientError=(_server_errors=server_errors)==null?void 0:_server_errors.ClientError;exports.ClientError=ClientError;var NotFound=(_server_errors2=server_errors)==null?void 0:_server_errors2.NotFound;exports.NotFound=NotFound;var Redirect=(_server_errors3=server_errors)==null?void 0:_server_errors3.Redirect;exports.Redirect=Redirect}});var require_u2=__commonJS({"lib-browser-old/u/index.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();require_web_dom_collections_for_each();Object.defineProperty(exports,"__esModule",{value:!0});var u=_interopRequireWildcard(require_u());Object.keys(u).forEach(function(key){key==="default"||key==="__esModule"||key in exports&&exports[key]===u[key]||Object.defineProperty(exports,key,{enumerable:!0,get:function(){return u[key]}})});function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}typeof window<"u"&&(window.u=u)}});var require_style_properties=__commonJS({"lib-browser-old/lang/elements/style_properties.js"(exports){"use strict";init_define_process_env();init_shim();var style_properties=exports,registered={};style_properties.register_style_property=name=>{registered[name]=!0};style_properties.get_style_properties=()=>registered;style_properties.is_style_property=name=>registered[name]===!0}});var require_runmode=__commonJS({"lib-browser-old/constants/runmode.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.POPUP_ZINDEX=exports.MAX_POPUP_ZINDEX=exports.FLOATING_GROUP_ZINDEX_OFFSET=exports.CLICKABLE_ELEMENT=void 0;var _safe_require=_interopRequireDefault(require_safe_require());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_safe_require.default.safe_register("./constants/runmode",exports);var CLICKABLE_ELEMENT="clickable-element";exports.CLICKABLE_ELEMENT=CLICKABLE_ELEMENT;var POPUP_ZINDEX=2002;exports.POPUP_ZINDEX=POPUP_ZINDEX;var MAX_POPUP_ZINDEX=POPUP_ZINDEX+100;exports.MAX_POPUP_ZINDEX=MAX_POPUP_ZINDEX;var FLOATING_GROUP_ZINDEX_OFFSET=500;exports.FLOATING_GROUP_ZINDEX_OFFSET=FLOATING_GROUP_ZINDEX_OFFSET}});var require_shrink=__commonJS({"lib-browser-old/lang/shrink.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.S=void 0;exports.expand=expand;exports.expand_object=expand_object;exports.expand_path=expand_path;exports.shrink=shrink;exports.shrink_again=shrink_again;exports.shrink_object=shrink_object;exports.shrink_path=shrink_path;require_web_dom_collections_for_each();require_es_object_entries();require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_includes();require_es_string_includes();var u=_interopRequireWildcard(require_u2()),b_fiber=_interopRequireWildcard(require_b_fiber()),logger=_interopRequireWildcard(require_logger()),_loggable=require_loggable();function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var mapping={display_sender_name:"d7",list_id:"li",deleted:"del",email_address:"ea",action_id:"ai",description:"d3",label:"lab",user_name:"un",floating:"f7",formatting_type:"ft",poststripeauth:"p8",image_pressed:"ip",center_background:"cb",image_normal:"i9",image_hover:"ih",descending:"d2",password2:"p2",require_confirm:"rc",choices:"ch",default:"d1",terms:"tz",thing_type:"tt",initial_values:"i2",element_type:"et",email:"em",from:"fr",sort_field:"sf",separator_width:"sw",useiframe:"u2",columns:"c5",separator_color:"sc",html:"ht",name_has_been_changed:"n0",fields:"f3",rows:"rs",separator_style:"ss",body:"b3",subject:"su",constraint_type:"c2",constraints:"co",element_name:"e4",bind:"bi",meta_description:"md",type_to_find:"t5",group_type:"gt",action:"ak",to_change:"tc",stripes:"st",after:"af",changes:"cs",title:"t1",data_source:"ds",additional_values:"av",limit_number_of_characters:"0l",backdrop:"bd",workflows:"wf",margintop:"mt",password:"pw",event_name:"en",app_path:"ap",mandatory:"1m",linktype:"1l",open_in_new_tab:"o9",stripe_height:"sh",contents:"ct",floating_reference:"3f",stretch_or_rescale:"2f",tabs:"ts",custom_id:"ci",icon:"9i",page:"pa",content_format:"cf",display:"d",icon_color:"ic",args:"a",placeholder:"ps",background_gradient_direction:"b4",content:"c1",background_image:"bgi",bggcolor:"bg2",style:"s1",textshadow:"tes",key:"k",elements:"el",event:"e1",value:"v",repeat_background_vertical:"rbv",repeat_background_horizontal:"rbh",underline:"u",italic:"i",vertical_centering:"vc",textshadow_blur:"tsb",textshadow_color:"tsc",textshadow_horizontal:"tsh",textshadow_vertical:"tsv",page_item_type:"pet",readable_field:"rf",bold:"b",__initialized:"in",element_id:"ei",text:"3",line_height:"lh",condition:"c",letter_spacing:"ls",word_spacing:"ws",padding_vertical:"pv",background_gradient_from:"bgf",background_gradient_to:"bgt",padding_horizontal:"ph",current_parent:"cp",font_face:"f",font_alignment:"fa",font_size:"fs",border_width:"bw",states:"s",boxshadow_blur:"bsb",boxshadow_color:"bsc",boxshadow_vertical:"bv",boxshadow_horizontal:"bh",font_color:"fc",bgcolor:"bgc",default_name:"dn",entries:"e",border_color:"bc",is_visible:"iv",background_style:"bas",border_roundness:"br",border_style:"bos",zindex:"z",top:"t",left:"l",width:"w",height:"h",boxshadow_style:"bs",boxshadow_spread:"bsp",next:"n",name:"nm",properties:"p",type:"x",pages:"p3",element_definitions:"ed"},not_shrunk={provider:!0,actions:!0,val:!0,id:!0,_id:!0,value_id:!0},S={};exports.S=S;Object.entries(mapping).forEach(_ref=>{let[k,v]=_ref,happyKey=k,happyVal="%".concat(v);S[happyKey]=happyVal});Object.keys(not_shrunk).forEach(k=>{S[k]=k});var reverse={},ESCAPE="%";Object.entries(mapping).forEach(_ref2=>{let[k,v]=_ref2,safeK=k;if(v.includes(ESCAPE)||k.includes(ESCAPE))throw new u.UnexpectedError("cannot use # sign in shrinks: "+k+", "+v);if(v.toLowerCase()!==v)throw new u.UnexpectedError("cannot use upper case in shrinks: "+v);if(reverse[v])throw new u.UnexpectedError("Mapping "+v+" to "+k+" but "+v+" is already mapped to "+reverse[v]);reverse[v]=safeK});function can_shrink(long){return mapping[long]!=null}function shrink(long){return typeof long!="string"?long:can_shrink(long)?ESCAPE+mapping[long]:long.indexOf(ESCAPE)===0?ESCAPE+long:long}function shrink_path(long_path){return long_path.split(".").map(e=>shrink(e)).join(".")}function shrink_again(medium){return typeof medium!="string"?medium:can_shrink(medium)?ESCAPE+mapping[medium]:medium}function is_shrunk(short){return reverse[short]!=null}function expand(short){if(typeof short!="string"||short.indexOf(ESCAPE)!==0)return short;let without_escape=short.slice(1);return is_shrunk(without_escape)?reverse[without_escape]:without_escape}function expand_path(short_path){return short_path.split(".").map(e=>expand(e)).join(".")}function expand_object(obj,depth){var _depth;if((_depth=depth)!=null||(depth=0),depth%3===2&&b_fiber.optional_pause(),obj==null||typeof obj!="object")return obj;let innerDepth=depth+1;if(Array.isArray(obj))return obj.map((v,idx)=>(idx%10===0&&b_fiber.optional_pause(),expand_object(v,innerDepth)));let new_obj={};return Object.entries(obj).forEach((_ref3,idx)=>{let[k,v]=_ref3;idx%10===0&&b_fiber.optional_pause(),new_obj[expand(k)]=expand_object(v,innerDepth)}),new_obj}function shrink_object(obj,depth){var _depth2;if((_depth2=depth)!=null||(depth=0),depth%3===2&&b_fiber.optional_pause(),obj==null||typeof obj!="object")return obj;let c_obj=obj;!Array.isArray(obj)&&c_obj.constructor!==Object&&logger.warn("Shrinking a non-simple object",{object:(0,_loggable.to_loggable)(obj),type:c_obj.constructor.name});let innerDepth=depth+1;if(Array.isArray(obj))return obj.map((v,idx)=>(idx%10===0&&b_fiber.optional_pause(),shrink_object(v,innerDepth)));let new_obj={};return Object.entries(obj).forEach((_ref4,idx)=>{let[k,v]=_ref4;idx%10===0&&b_fiber.optional_pause(),new_obj[shrink(k)]=shrink_object(v,innerDepth)}),new_obj}}});var require_elements=__commonJS({"lib-browser-old/constants/elements.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.VERSION_STYLE_OVERRIDES=exports.TYPES_TO_EXCLUDE_FROM_SEARCH=exports.STATE_NOT_READY=exports.PLACEHOLDER_COLOR_VERSION=exports.PADDING_VERSION=exports.OLD_VERSION_OVERRIDE_PROPERTIES=exports.NOT_STATIC_PROP=exports.NEW_PAGE_DEFAULTS=exports.LATEST_RESPONSIVE_VERSION=exports.LATEST_ELEMENT_VERSION=exports.FONT_FAMILY_VERSION=exports.ELEMENT_TYPE_TO_NAME=void 0;require_es_symbol_description();var _safe_require=_interopRequireDefault(require_safe_require());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_safe_require.default.safe_register("./constants/elements",exports);var NEW_PAGE_DEFAULTS={HEIGHT:767,WIDTH:1080,MIN_WIDTH_PX:0,RESPONSIVE_VERSION_WHEN_NOT_DEFINED:0,NEW_RESPONSIVE:!0,FIXED_WIDTH:!0,CONTAINER_LAYOUT:"fixed"};exports.NEW_PAGE_DEFAULTS=NEW_PAGE_DEFAULTS;var LATEST_RESPONSIVE_VERSION=1;exports.LATEST_RESPONSIVE_VERSION=LATEST_RESPONSIVE_VERSION;var LATEST_ELEMENT_VERSION=4;exports.LATEST_ELEMENT_VERSION=LATEST_ELEMENT_VERSION;var VERSION_STYLE_OVERRIDES=4;exports.VERSION_STYLE_OVERRIDES=VERSION_STYLE_OVERRIDES;var OLD_VERSION_OVERRIDE_PROPERTIES=["padding_top","padding_bottom","padding_left","padding_right"];exports.OLD_VERSION_OVERRIDE_PROPERTIES=OLD_VERSION_OVERRIDE_PROPERTIES;var FONT_FAMILY_VERSION=1;exports.FONT_FAMILY_VERSION=FONT_FAMILY_VERSION;var NOT_STATIC_PROP=Symbol("NOT_STATIC_PROP");exports.NOT_STATIC_PROP=NOT_STATIC_PROP;var STATE_NOT_READY={};exports.STATE_NOT_READY=STATE_NOT_READY;var PADDING_VERSION=2;exports.PADDING_VERSION=PADDING_VERSION;var PLACEHOLDER_COLOR_VERSION=3;exports.PLACEHOLDER_COLOR_VERSION=PLACEHOLDER_COLOR_VERSION;var ELEMENT_TYPE_TO_NAME={Text:"Text",Button:"Button",Icon:"Icon",Link:"Link",Image:"Image",Shape:"Shape",Alert:"Alert",Video:"Video",HTML:"HTML",GoogleMap:"Map",PoweredByBubble:"Built on Bubble",Group:"Group",RepeatingGroup:"Repeating Group",Popup:"Popup",FloatingGroup:"Floating Group",GroupFocus:"Group Focus",Table:"Table",Input:"Input",MultilineInput:"Multiline Input",Checkbox:"Checkbox",Dropdown:"Dropdown",AutocompleteDropdown:"Searchbox",RadioButtons:"Radio Buttons",SliderInput:"Slider Input",DateInput:"Date/Time Picker",PictureInput:"Picture Uploader",FileInput:"File Uploader","slickcarousel-Carousel":"Slideshow","chartjs-LineBarChart":"Line/Bar Chart"};exports.ELEMENT_TYPE_TO_NAME=ELEMENT_TYPE_TO_NAME;var TYPES_TO_EXCLUDE_FROM_SEARCH=["GroupWithFocus","Table","TableMainAxis","TableCrossAxis","TableCell"];exports.TYPES_TO_EXCLUDE_FROM_SEARCH=TYPES_TO_EXCLUDE_FROM_SEARCH}});var require_async_state3=__commonJS({"lib-browser-old/u/shared/async/async_state.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_web_url_search_params();require_es_regexp_exec();require_es_string_search();window&&window.location&&new URLSearchParams(location.search).get("newautorun")==="true"?module.exports=require_async_state():module.exports=require_async_state2()}});var require_eval_node_state=__commonJS({"lib-browser-old/lang/evaluation/eval_node_state.js"(exports){"use strict";init_define_process_env();init_shim();var mode_check=require_mode_check(),safe_require=require_safe_require(),eval_node_state=exports;safe_require.safe_register("./lang/evaluation/eval_node_state",eval_node_state);var current_eval_node=null;eval_node_state.get_current_eval_node=function(){return current_eval_node};eval_node_state.set_current_eval_node=function(node){current_eval_node=node};mode_check.on_server()?eval_node_state.with_eval_node=(appnode,fn)=>fn():eval_node_state.with_eval_node=function(appnode,fn){let old_eval_node=current_eval_node;current_eval_node=appnode;try{return fn()}finally{current_eval_node=old_eval_node}}}});var require_appquery=__commonJS({"lib-browser-old/lang/appquery.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();var u=require_u2(),safe_require=require_safe_require(),Lib=require_lib();safe_require.safe_register("./lang/appquery",appquery);var orig_exports=exports;module.exports=appquery;function appquery(appname,app_version){return Lib().app(appname,app_version)}appquery.app=appquery;appquery.add_methods=function(cls){for(let k of u.all_keys(cls.prototype))appquery[k]=orig_exports[k]=function(){let cur_app=Lib().app();if(!cur_app[k]){var _cur_app$constructor;throw new u.UnexpectedError("Current Lib().app() is missing function",{k,cur_app:String(cur_app),cur_app_keys:String(u.all_keys(cur_app)),cur_app_constructor:cur_app==null||(_cur_app$constructor=cur_app.constructor)==null?void 0:_cur_app$constructor.name,app_fn:String(Lib().app)})}return cur_app[k](...arguments)}};typeof window<"u"&&window!==null&&(window.appquery=appquery)}});var require_registry=__commonJS({"lib-browser-old/lang/nodes/registry.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();var errors=require_errors(),registry=exports,all_nodes={},all_generics={};registry.add=function(name,Cls){let options=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{abstract=!1}=options;all_nodes[name]=Cls,Cls.prototype.lang_constructor=name,!abstract&&!Cls.prototype.make_new&&(Cls.prototype.make_new=json=>new Cls(json))};registry.has=function(name){return name in all_nodes};registry.is=function(node,name){return node instanceof registry.get(name)};registry.get=function(name){if(!all_nodes[name])throw new errors.UnexpectedError("Unknown app node type",{name});return all_nodes[name]};registry.list=()=>Object.keys(all_nodes);registry.create=function(name){let Cls=registry.get(name);for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];return new Cls(...args)};registry.add_generic=function(name,creator){all_generics[name]=creator};registry.create_generic=function(name){if(!all_generics[name])throw new errors.UnexpectedError("Unknown generic app node type",{name});for(var _len2=arguments.length,args=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)args[_key2-1]=arguments[_key2];return all_generics[name](...args)};registry.new_element=registry.create_generic.bind(null,"element");registry.new_expression=registry.create_generic.bind(null,"expression");registry.new_workflow_item=registry.create_generic.bind(null,"workflow_item")}});var require_node_types=__commonJS({"lib-browser-old/lang/nodes/node_types.js"(exports,module){"use strict";init_define_process_env();init_shim();var NodeTypes=function(NodeTypes2){return NodeTypes2.APP_NODE="AppNode",NodeTypes2.HAS_PROPERTIES="HasProperties",NodeTypes2.HAS_ID="HasID",NodeTypes2.FAKE_APPLICATION="FakeApplication",NodeTypes2.APPLICATION="Application",NodeTypes2.APPLICATION_VERSION="ApplicationVersion",NodeTypes2.API_WORKFLOWS="API",NodeTypes2.CUSTOM_TYPE="CustomType",NodeTypes2.SECURABLE_TYPE="SecurableType",NodeTypes2.CUSTOM_FIELD_STATE="CustomFieldState",NodeTypes2.CUSTOM_FIELD="CustomField",NodeTypes2.PRIVACY_ROLE="PrivacyRole",NodeTypes2.OPTION_SET="OptionSet",NodeTypes2.OPTION_ATTRIBUTE="OptionAttribute",NodeTypes2.OPTION_VALUE="OptionValue",NodeTypes2.COMMENT="Comment",NodeTypes2.EXPRESSION="Expression",NodeTypes2.EMPTY="Empty",NodeTypes2.LITERAL="Literal",NodeTypes2.OBJECT_LITERAL="ObjectLiteral",NodeTypes2.TEXT_EXPRESSION="TextExpression",NodeTypes2.LIVE_EXPRESSION="LiveExpression",NodeTypes2.DATA_SOURCE="DataSource",NodeTypes2.MESSAGE_NODE="MessageNode",NodeTypes2.GEO_ADDRESS_NODE="GeoAddressNode",NodeTypes2.WORKFLOW_OBJECT="WorkflowObject",NodeTypes2.GENERIC_EVENT="GenericEvent",NodeTypes2.EVENT="Event",NodeTypes2.API_EVENT_OBJECT="APIEventObject",NodeTypes2.ACTION="Action",NodeTypes2.STATE="State",NodeTypes2.TRANSITION="Transition",NodeTypes2.GENERIC_ELEMENT="GenericElement",NodeTypes2.ELEMENT="Element",NodeTypes2.STYLE="Style",NodeTypes2.STYLE_STATE="StyleState",NodeTypes2.CUSTOM_STATE="CustomState",NodeTypes2.ROOT="Root",NodeTypes2.PAGE="Page",NodeTypes2.CUSTOM_DEFINITION="CustomDefinition",NodeTypes2}(NodeTypes||{});module.exports=NodeTypes}});var require_listCacheClear=__commonJS({"node_modules/lodash/_listCacheClear.js"(exports,module){init_define_process_env();init_shim();function listCacheClear(){this.__data__=[],this.size=0}module.exports=listCacheClear}});var require_eq=__commonJS({"node_modules/lodash/eq.js"(exports,module){init_define_process_env();init_shim();function eq(value,other){return value===other||value!==value&&other!==other}module.exports=eq}});var require_assocIndexOf=__commonJS({"node_modules/lodash/_assocIndexOf.js"(exports,module){init_define_process_env();init_shim();var eq=require_eq();function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}module.exports=assocIndexOf}});var require_listCacheDelete=__commonJS({"node_modules/lodash/_listCacheDelete.js"(exports,module){init_define_process_env();init_shim();var assocIndexOf=require_assocIndexOf(),arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0)return!1;var lastIndex=data.length-1;return index==lastIndex?data.pop():splice.call(data,index,1),--this.size,!0}module.exports=listCacheDelete}});var require_listCacheGet=__commonJS({"node_modules/lodash/_listCacheGet.js"(exports,module){init_define_process_env();init_shim();var assocIndexOf=require_assocIndexOf();function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]}module.exports=listCacheGet}});var require_listCacheHas=__commonJS({"node_modules/lodash/_listCacheHas.js"(exports,module){init_define_process_env();init_shim();var assocIndexOf=require_assocIndexOf();function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}module.exports=listCacheHas}});var require_listCacheSet=__commonJS({"node_modules/lodash/_listCacheSet.js"(exports,module){init_define_process_env();init_shim();var assocIndexOf=require_assocIndexOf();function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?(++this.size,data.push([key,value])):data[index][1]=value,this}module.exports=listCacheSet}});var require_ListCache=__commonJS({"node_modules/lodash/_ListCache.js"(exports,module){init_define_process_env();init_shim();var listCacheClear=require_listCacheClear(),listCacheDelete=require_listCacheDelete(),listCacheGet=require_listCacheGet(),listCacheHas=require_listCacheHas(),listCacheSet=require_listCacheSet();function ListCache(entries){var index=-1,length=entries==null?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;module.exports=ListCache}});var require_stackClear=__commonJS({"node_modules/lodash/_stackClear.js"(exports,module){init_define_process_env();init_shim();var ListCache=require_ListCache();function stackClear(){this.__data__=new ListCache,this.size=0}module.exports=stackClear}});var require_stackDelete=__commonJS({"node_modules/lodash/_stackDelete.js"(exports,module){init_define_process_env();init_shim();function stackDelete(key){var data=this.__data__,result=data.delete(key);return this.size=data.size,result}module.exports=stackDelete}});var require_stackGet=__commonJS({"node_modules/lodash/_stackGet.js"(exports,module){init_define_process_env();init_shim();function stackGet(key){return this.__data__.get(key)}module.exports=stackGet}});var require_stackHas=__commonJS({"node_modules/lodash/_stackHas.js"(exports,module){init_define_process_env();init_shim();function stackHas(key){return this.__data__.has(key)}module.exports=stackHas}});var require_isObject=__commonJS({"node_modules/lodash/isObject.js"(exports,module){init_define_process_env();init_shim();function isObject(value){var type=typeof value;return value!=null&&(type=="object"||type=="function")}module.exports=isObject}});var require_isFunction=__commonJS({"node_modules/lodash/isFunction.js"(exports,module){init_define_process_env();init_shim();var baseGetTag=require_baseGetTag(),isObject=require_isObject(),asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(value){if(!isObject(value))return!1;var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}module.exports=isFunction}});var require_coreJsData=__commonJS({"node_modules/lodash/_coreJsData.js"(exports,module){init_define_process_env();init_shim();var root=require_root(),coreJsData=root["__core-js_shared__"];module.exports=coreJsData}});var require_isMasked=__commonJS({"node_modules/lodash/_isMasked.js"(exports,module){init_define_process_env();init_shim();var coreJsData=require_coreJsData(),maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}();function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}module.exports=isMasked}});var require_toSource=__commonJS({"node_modules/lodash/_toSource.js"(exports,module){init_define_process_env();init_shim();var funcProto=Function.prototype,funcToString=funcProto.toString;function toSource(func){if(func!=null){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}module.exports=toSource}});var require_baseIsNative=__commonJS({"node_modules/lodash/_baseIsNative.js"(exports,module){init_define_process_env();init_shim();var isFunction=require_isFunction(),isMasked=require_isMasked(),isObject=require_isObject(),toSource=require_toSource(),reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto=Object.prototype,funcToString=funcProto.toString,hasOwnProperty2=objectProto.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty2).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(value){if(!isObject(value)||isMasked(value))return!1;var pattern=isFunction(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}module.exports=baseIsNative}});var require_getValue=__commonJS({"node_modules/lodash/_getValue.js"(exports,module){init_define_process_env();init_shim();function getValue(object2,key){return object2==null?void 0:object2[key]}module.exports=getValue}});var require_getNative=__commonJS({"node_modules/lodash/_getNative.js"(exports,module){init_define_process_env();init_shim();var baseIsNative=require_baseIsNative(),getValue=require_getValue();function getNative(object2,key){var value=getValue(object2,key);return baseIsNative(value)?value:void 0}module.exports=getNative}});var require_Map=__commonJS({"node_modules/lodash/_Map.js"(exports,module){init_define_process_env();init_shim();var getNative=require_getNative(),root=require_root(),Map2=getNative(root,"Map");module.exports=Map2}});var require_nativeCreate=__commonJS({"node_modules/lodash/_nativeCreate.js"(exports,module){init_define_process_env();init_shim();var getNative=require_getNative(),nativeCreate=getNative(Object,"create");module.exports=nativeCreate}});var require_hashClear=__commonJS({"node_modules/lodash/_hashClear.js"(exports,module){init_define_process_env();init_shim();var nativeCreate=require_nativeCreate();function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}module.exports=hashClear}});var require_hashDelete=__commonJS({"node_modules/lodash/_hashDelete.js"(exports,module){init_define_process_env();init_shim();function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];return this.size-=result?1:0,result}module.exports=hashDelete}});var require_hashGet=__commonJS({"node_modules/lodash/_hashGet.js"(exports,module){init_define_process_env();init_shim();var nativeCreate=require_nativeCreate(),HASH_UNDEFINED="__lodash_hash_undefined__",objectProto=Object.prototype,hasOwnProperty2=objectProto.hasOwnProperty;function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?void 0:result}return hasOwnProperty2.call(data,key)?data[key]:void 0}module.exports=hashGet}});var require_hashHas=__commonJS({"node_modules/lodash/_hashHas.js"(exports,module){init_define_process_env();init_shim();var nativeCreate=require_nativeCreate(),objectProto=Object.prototype,hasOwnProperty2=objectProto.hasOwnProperty;function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==void 0:hasOwnProperty2.call(data,key)}module.exports=hashHas}});var require_hashSet=__commonJS({"node_modules/lodash/_hashSet.js"(exports,module){init_define_process_env();init_shim();var nativeCreate=require_nativeCreate(),HASH_UNDEFINED="__lodash_hash_undefined__";function hashSet(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&value===void 0?HASH_UNDEFINED:value,this}module.exports=hashSet}});var require_Hash=__commonJS({"node_modules/lodash/_Hash.js"(exports,module){init_define_process_env();init_shim();var hashClear=require_hashClear(),hashDelete=require_hashDelete(),hashGet=require_hashGet(),hashHas=require_hashHas(),hashSet=require_hashSet();function Hash(entries){var index=-1,length=entries==null?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;module.exports=Hash}});var require_mapCacheClear=__commonJS({"node_modules/lodash/_mapCacheClear.js"(exports,module){init_define_process_env();init_shim();var Hash=require_Hash(),ListCache=require_ListCache(),Map2=require_Map();function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map2||ListCache),string:new Hash}}module.exports=mapCacheClear}});var require_isKeyable=__commonJS({"node_modules/lodash/_isKeyable.js"(exports,module){init_define_process_env();init_shim();function isKeyable(value){var type=typeof value;return type=="string"||type=="number"||type=="symbol"||type=="boolean"?value!=="__proto__":value===null}module.exports=isKeyable}});var require_getMapData=__commonJS({"node_modules/lodash/_getMapData.js"(exports,module){init_define_process_env();init_shim();var isKeyable=require_isKeyable();function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=="string"?"string":"hash"]:data.map}module.exports=getMapData}});var require_mapCacheDelete=__commonJS({"node_modules/lodash/_mapCacheDelete.js"(exports,module){init_define_process_env();init_shim();var getMapData=require_getMapData();function mapCacheDelete(key){var result=getMapData(this,key).delete(key);return this.size-=result?1:0,result}module.exports=mapCacheDelete}});var require_mapCacheGet=__commonJS({"node_modules/lodash/_mapCacheGet.js"(exports,module){init_define_process_env();init_shim();var getMapData=require_getMapData();function mapCacheGet(key){return getMapData(this,key).get(key)}module.exports=mapCacheGet}});var require_mapCacheHas=__commonJS({"node_modules/lodash/_mapCacheHas.js"(exports,module){init_define_process_env();init_shim();var getMapData=require_getMapData();function mapCacheHas(key){return getMapData(this,key).has(key)}module.exports=mapCacheHas}});var require_mapCacheSet=__commonJS({"node_modules/lodash/_mapCacheSet.js"(exports,module){init_define_process_env();init_shim();var getMapData=require_getMapData();function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this}module.exports=mapCacheSet}});var require_MapCache=__commonJS({"node_modules/lodash/_MapCache.js"(exports,module){init_define_process_env();init_shim();var mapCacheClear=require_mapCacheClear(),mapCacheDelete=require_mapCacheDelete(),mapCacheGet=require_mapCacheGet(),mapCacheHas=require_mapCacheHas(),mapCacheSet=require_mapCacheSet();function MapCache(entries){var index=-1,length=entries==null?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;module.exports=MapCache}});var require_stackSet=__commonJS({"node_modules/lodash/_stackSet.js"(exports,module){init_define_process_env();init_shim();var ListCache=require_ListCache(),Map2=require_Map(),MapCache=require_MapCache(),LARGE_ARRAY_SIZE=200;function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map2||pairs.length<LARGE_ARRAY_SIZE-1)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new MapCache(pairs)}return data.set(key,value),this.size=data.size,this}module.exports=stackSet}});var require_Stack=__commonJS({"node_modules/lodash/_Stack.js"(exports,module){init_define_process_env();init_shim();var ListCache=require_ListCache(),stackClear=require_stackClear(),stackDelete=require_stackDelete(),stackGet=require_stackGet(),stackHas=require_stackHas(),stackSet=require_stackSet();function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;module.exports=Stack}});var require_setCacheAdd=__commonJS({"node_modules/lodash/_setCacheAdd.js"(exports,module){init_define_process_env();init_shim();var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(value){return this.__data__.set(value,HASH_UNDEFINED),this}module.exports=setCacheAdd}});var require_setCacheHas=__commonJS({"node_modules/lodash/_setCacheHas.js"(exports,module){init_define_process_env();init_shim();function setCacheHas(value){return this.__data__.has(value)}module.exports=setCacheHas}});var require_SetCache=__commonJS({"node_modules/lodash/_SetCache.js"(exports,module){init_define_process_env();init_shim();var MapCache=require_MapCache(),setCacheAdd=require_setCacheAdd(),setCacheHas=require_setCacheHas();function SetCache(values){var index=-1,length=values==null?0:values.length;for(this.__data__=new MapCache;++index<length;)this.add(values[index])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;module.exports=SetCache}});var require_arraySome=__commonJS({"node_modules/lodash/_arraySome.js"(exports,module){init_define_process_env();init_shim();function arraySome(array,predicate){for(var index=-1,length=array==null?0:array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}module.exports=arraySome}});var require_cacheHas=__commonJS({"node_modules/lodash/_cacheHas.js"(exports,module){init_define_process_env();init_shim();function cacheHas(cache,key){return cache.has(key)}module.exports=cacheHas}});var require_equalArrays=__commonJS({"node_modules/lodash/_equalArrays.js"(exports,module){init_define_process_env();init_shim();var SetCache=require_SetCache(),arraySome=require_arraySome(),cacheHas=require_cacheHas(),COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength))return!1;var arrStacked=stack.get(array),othStacked=stack.get(other);if(arrStacked&&othStacked)return arrStacked==other&&othStacked==array;var index=-1,result=!0,seen=bitmask&COMPARE_UNORDERED_FLAG?new SetCache:void 0;for(stack.set(array,other),stack.set(other,array);++index<arrLength;){var arrValue=array[index],othValue=other[index];if(customizer)var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);if(compared!==void 0){if(compared)continue;result=!1;break}if(seen){if(!arraySome(other,function(othValue2,othIndex){if(!cacheHas(seen,othIndex)&&(arrValue===othValue2||equalFunc(arrValue,othValue2,bitmask,customizer,stack)))return seen.push(othIndex)})){result=!1;break}}else if(!(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){result=!1;break}}return stack.delete(array),stack.delete(other),result}module.exports=equalArrays}});var require_Uint8Array=__commonJS({"node_modules/lodash/_Uint8Array.js"(exports,module){init_define_process_env();init_shim();var root=require_root(),Uint8Array2=root.Uint8Array;module.exports=Uint8Array2}});var require_mapToArray=__commonJS({"node_modules/lodash/_mapToArray.js"(exports,module){init_define_process_env();init_shim();function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach(function(value,key){result[++index]=[key,value]}),result}module.exports=mapToArray}});var require_setToArray=__commonJS({"node_modules/lodash/_setToArray.js"(exports,module){init_define_process_env();init_shim();function setToArray(set){var index=-1,result=Array(set.size);return set.forEach(function(value){result[++index]=value}),result}module.exports=setToArray}});var require_equalByTag=__commonJS({"node_modules/lodash/_equalByTag.js"(exports,module){init_define_process_env();init_shim();var Symbol2=require_Symbol(),Uint8Array2=require_Uint8Array(),eq=require_eq(),equalArrays=require_equalArrays(),mapToArray=require_mapToArray(),setToArray=require_setToArray(),COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol2?Symbol2.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(object2,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag:if(object2.byteLength!=other.byteLength||object2.byteOffset!=other.byteOffset)return!1;object2=object2.buffer,other=other.buffer;case arrayBufferTag:return!(object2.byteLength!=other.byteLength||!equalFunc(new Uint8Array2(object2),new Uint8Array2(other)));case boolTag:case dateTag:case numberTag:return eq(+object2,+other);case errorTag:return object2.name==other.name&&object2.message==other.message;case regexpTag:case stringTag:return object2==other+"";case mapTag:var convert=mapToArray;case setTag:var isPartial=bitmask&COMPARE_PARTIAL_FLAG;if(convert||(convert=setToArray),object2.size!=other.size&&!isPartial)return!1;var stacked=stack.get(object2);if(stacked)return stacked==other;bitmask|=COMPARE_UNORDERED_FLAG,stack.set(object2,other);var result=equalArrays(convert(object2),convert(other),bitmask,customizer,equalFunc,stack);return stack.delete(object2),result;case symbolTag:if(symbolValueOf)return symbolValueOf.call(object2)==symbolValueOf.call(other)}return!1}module.exports=equalByTag}});var require_arrayPush=__commonJS({"node_modules/lodash/_arrayPush.js"(exports,module){init_define_process_env();init_shim();function arrayPush(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}module.exports=arrayPush}});var require_baseGetAllKeys=__commonJS({"node_modules/lodash/_baseGetAllKeys.js"(exports,module){init_define_process_env();init_shim();var arrayPush=require_arrayPush(),isArray=require_isArray();function baseGetAllKeys(object2,keysFunc,symbolsFunc){var result=keysFunc(object2);return isArray(object2)?result:arrayPush(result,symbolsFunc(object2))}module.exports=baseGetAllKeys}});var require_arrayFilter=__commonJS({"node_modules/lodash/_arrayFilter.js"(exports,module){init_define_process_env();init_shim();function arrayFilter(array,predicate){for(var index=-1,length=array==null?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[resIndex++]=value)}return result}module.exports=arrayFilter}});var require_stubArray=__commonJS({"node_modules/lodash/stubArray.js"(exports,module){init_define_process_env();init_shim();function stubArray(){return[]}module.exports=stubArray}});var require_getSymbols=__commonJS({"node_modules/lodash/_getSymbols.js"(exports,module){init_define_process_env();init_shim();var arrayFilter=require_arrayFilter(),stubArray=require_stubArray(),objectProto=Object.prototype,propertyIsEnumerable=objectProto.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(object2){return object2==null?[]:(object2=Object(object2),arrayFilter(nativeGetSymbols(object2),function(symbol){return propertyIsEnumerable.call(object2,symbol)}))}:stubArray;module.exports=getSymbols}});var require_baseTimes=__commonJS({"node_modules/lodash/_baseTimes.js"(exports,module){init_define_process_env();init_shim();function baseTimes(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}module.exports=baseTimes}});var require_baseIsArguments=__commonJS({"node_modules/lodash/_baseIsArguments.js"(exports,module){init_define_process_env();init_shim();var baseGetTag=require_baseGetTag(),isObjectLike=require_isObjectLike(),argsTag="[object Arguments]";function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}module.exports=baseIsArguments}});var require_isArguments=__commonJS({"node_modules/lodash/isArguments.js"(exports,module){init_define_process_env();init_shim();var baseIsArguments=require_baseIsArguments(),isObjectLike=require_isObjectLike(),objectProto=Object.prototype,hasOwnProperty2=objectProto.hasOwnProperty,propertyIsEnumerable=objectProto.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty2.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")};module.exports=isArguments}});var require_stubFalse=__commonJS({"node_modules/lodash/stubFalse.js"(exports,module){init_define_process_env();init_shim();function stubFalse(){return!1}module.exports=stubFalse}});var require_isBuffer=__commonJS({"node_modules/lodash/isBuffer.js"(exports,module){init_define_process_env();init_shim();var root=require_root(),stubFalse=require_stubFalse(),freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer3=moduleExports?root.Buffer:void 0,nativeIsBuffer=Buffer3?Buffer3.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse;module.exports=isBuffer}});var require_isIndex=__commonJS({"node_modules/lodash/_isIndex.js"(exports,module){init_define_process_env();init_shim();var MAX_SAFE_INTEGER=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(value,length){var type=typeof value;return length=length==null?MAX_SAFE_INTEGER:length,!!length&&(type=="number"||type!="symbol"&&reIsUint.test(value))&&value>-1&&value%1==0&&value<length}module.exports=isIndex}});var require_isLength=__commonJS({"node_modules/lodash/isLength.js"(exports,module){init_define_process_env();init_shim();var MAX_SAFE_INTEGER=9007199254740991;function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}module.exports=isLength}});var require_baseIsTypedArray=__commonJS({"node_modules/lodash/_baseIsTypedArray.js"(exports,module){init_define_process_env();init_shim();var baseGetTag=require_baseGetTag(),isLength=require_isLength(),isObjectLike=require_isObjectLike(),argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]}module.exports=baseIsTypedArray}});var require_baseUnary=__commonJS({"node_modules/lodash/_baseUnary.js"(exports,module){init_define_process_env();init_shim();function baseUnary(func){return function(value){return func(value)}}module.exports=baseUnary}});var require_nodeUtil=__commonJS({"node_modules/lodash/_nodeUtil.js"(exports,module){init_define_process_env();init_shim();var freeGlobal=require_freeGlobal(),freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){try{var types=freeModule&&freeModule.require&&freeModule.require("util").types;return types||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}();module.exports=nodeUtil}});var require_isTypedArray=__commonJS({"node_modules/lodash/isTypedArray.js"(exports,module){init_define_process_env();init_shim();var baseIsTypedArray=require_baseIsTypedArray(),baseUnary=require_baseUnary(),nodeUtil=require_nodeUtil(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;module.exports=isTypedArray}});var require_arrayLikeKeys=__commonJS({"node_modules/lodash/_arrayLikeKeys.js"(exports,module){init_define_process_env();init_shim();var baseTimes=require_baseTimes(),isArguments=require_isArguments(),isArray=require_isArray(),isBuffer=require_isBuffer(),isIndex=require_isIndex(),isTypedArray=require_isTypedArray(),objectProto=Object.prototype,hasOwnProperty2=objectProto.hasOwnProperty;function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value)(inherited||hasOwnProperty2.call(value,key))&&!(skipIndexes&&(key=="length"||isBuff&&(key=="offset"||key=="parent")||isType&&(key=="buffer"||key=="byteLength"||key=="byteOffset")||isIndex(key,length)))&&result.push(key);return result}module.exports=arrayLikeKeys}});var require_isPrototype=__commonJS({"node_modules/lodash/_isPrototype.js"(exports,module){init_define_process_env();init_shim();var objectProto=Object.prototype;function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor=="function"&&Ctor.prototype||objectProto;return value===proto}module.exports=isPrototype}});var require_overArg=__commonJS({"node_modules/lodash/_overArg.js"(exports,module){init_define_process_env();init_shim();function overArg(func,transform){return function(arg){return func(transform(arg))}}module.exports=overArg}});var require_nativeKeys=__commonJS({"node_modules/lodash/_nativeKeys.js"(exports,module){init_define_process_env();init_shim();var overArg=require_overArg(),nativeKeys=overArg(Object.keys,Object);module.exports=nativeKeys}});var require_baseKeys=__commonJS({"node_modules/lodash/_baseKeys.js"(exports,module){init_define_process_env();init_shim();var isPrototype=require_isPrototype(),nativeKeys=require_nativeKeys(),objectProto=Object.prototype,hasOwnProperty2=objectProto.hasOwnProperty;function baseKeys(object2){if(!isPrototype(object2))return nativeKeys(object2);var result=[];for(var key in Object(object2))hasOwnProperty2.call(object2,key)&&key!="constructor"&&result.push(key);return result}module.exports=baseKeys}});var require_isArrayLike=__commonJS({"node_modules/lodash/isArrayLike.js"(exports,module){init_define_process_env();init_shim();var isFunction=require_isFunction(),isLength=require_isLength();function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value)}module.exports=isArrayLike}});var require_keys=__commonJS({"node_modules/lodash/keys.js"(exports,module){init_define_process_env();init_shim();var arrayLikeKeys=require_arrayLikeKeys(),baseKeys=require_baseKeys(),isArrayLike=require_isArrayLike();function keys(object2){return isArrayLike(object2)?arrayLikeKeys(object2):baseKeys(object2)}module.exports=keys}});var require_getAllKeys=__commonJS({"node_modules/lodash/_getAllKeys.js"(exports,module){init_define_process_env();init_shim();var baseGetAllKeys=require_baseGetAllKeys(),getSymbols=require_getSymbols(),keys=require_keys();function getAllKeys(object2){return baseGetAllKeys(object2,keys,getSymbols)}module.exports=getAllKeys}});var require_equalObjects=__commonJS({"node_modules/lodash/_equalObjects.js"(exports,module){init_define_process_env();init_shim();var getAllKeys=require_getAllKeys(),COMPARE_PARTIAL_FLAG=1,objectProto=Object.prototype,hasOwnProperty2=objectProto.hasOwnProperty;function equalObjects(object2,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,objProps=getAllKeys(object2),objLength=objProps.length,othProps=getAllKeys(other),othLength=othProps.length;if(objLength!=othLength&&!isPartial)return!1;for(var index=objLength;index--;){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty2.call(other,key)))return!1}var objStacked=stack.get(object2),othStacked=stack.get(other);if(objStacked&&othStacked)return objStacked==other&&othStacked==object2;var result=!0;stack.set(object2,other),stack.set(other,object2);for(var skipCtor=isPartial;++index<objLength;){key=objProps[index];var objValue=object2[key],othValue=other[key];if(customizer)var compared=isPartial?customizer(othValue,objValue,key,other,object2,stack):customizer(objValue,othValue,key,object2,other,stack);if(!(compared===void 0?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=!1;break}skipCtor||(skipCtor=key=="constructor")}if(result&&!skipCtor){var objCtor=object2.constructor,othCtor=other.constructor;objCtor!=othCtor&&"constructor"in object2&&"constructor"in other&&!(typeof objCtor=="function"&&objCtor instanceof objCtor&&typeof othCtor=="function"&&othCtor instanceof othCtor)&&(result=!1)}return stack.delete(object2),stack.delete(other),result}module.exports=equalObjects}});var require_DataView=__commonJS({"node_modules/lodash/_DataView.js"(exports,module){init_define_process_env();init_shim();var getNative=require_getNative(),root=require_root(),DataView2=getNative(root,"DataView");module.exports=DataView2}});var require_Promise=__commonJS({"node_modules/lodash/_Promise.js"(exports,module){init_define_process_env();init_shim();var getNative=require_getNative(),root=require_root(),Promise2=getNative(root,"Promise");module.exports=Promise2}});var require_Set=__commonJS({"node_modules/lodash/_Set.js"(exports,module){init_define_process_env();init_shim();var getNative=require_getNative(),root=require_root(),Set2=getNative(root,"Set");module.exports=Set2}});var require_WeakMap=__commonJS({"node_modules/lodash/_WeakMap.js"(exports,module){init_define_process_env();init_shim();var getNative=require_getNative(),root=require_root(),WeakMap2=getNative(root,"WeakMap");module.exports=WeakMap2}});var require_getTag=__commonJS({"node_modules/lodash/_getTag.js"(exports,module){init_define_process_env();init_shim();var DataView2=require_DataView(),Map2=require_Map(),Promise2=require_Promise(),Set2=require_Set(),WeakMap2=require_WeakMap(),baseGetTag=require_baseGetTag(),toSource=require_toSource(),mapTag="[object Map]",objectTag="[object Object]",promiseTag="[object Promise]",setTag="[object Set]",weakMapTag="[object WeakMap]",dataViewTag="[object DataView]",dataViewCtorString=toSource(DataView2),mapCtorString=toSource(Map2),promiseCtorString=toSource(Promise2),setCtorString=toSource(Set2),weakMapCtorString=toSource(WeakMap2),getTag=baseGetTag;(DataView2&&getTag(new DataView2(new ArrayBuffer(1)))!=dataViewTag||Map2&&getTag(new Map2)!=mapTag||Promise2&&getTag(Promise2.resolve())!=promiseTag||Set2&&getTag(new Set2)!=setTag||WeakMap2&&getTag(new WeakMap2)!=weakMapTag)&&(getTag=function(value){var result=baseGetTag(value),Ctor=result==objectTag?value.constructor:void 0,ctorString=Ctor?toSource(Ctor):"";if(ctorString)switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return result});module.exports=getTag}});var require_baseIsEqualDeep=__commonJS({"node_modules/lodash/_baseIsEqualDeep.js"(exports,module){init_define_process_env();init_shim();var Stack=require_Stack(),equalArrays=require_equalArrays(),equalByTag=require_equalByTag(),equalObjects=require_equalObjects(),getTag=require_getTag(),isArray=require_isArray(),isBuffer=require_isBuffer(),isTypedArray=require_isTypedArray(),COMPARE_PARTIAL_FLAG=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty2=objectProto.hasOwnProperty;function baseIsEqualDeep(object2,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object2),othIsArr=isArray(other),objTag=objIsArr?arrayTag:getTag(object2),othTag=othIsArr?arrayTag:getTag(other);objTag=objTag==argsTag?objectTag:objTag,othTag=othTag==argsTag?objectTag:othTag;var objIsObj=objTag==objectTag,othIsObj=othTag==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object2)){if(!isBuffer(other))return!1;objIsArr=!0,objIsObj=!1}if(isSameTag&&!objIsObj)return stack||(stack=new Stack),objIsArr||isTypedArray(object2)?equalArrays(object2,other,bitmask,customizer,equalFunc,stack):equalByTag(object2,other,objTag,bitmask,customizer,equalFunc,stack);if(!(bitmask&COMPARE_PARTIAL_FLAG)){var objIsWrapped=objIsObj&&hasOwnProperty2.call(object2,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty2.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object2.value():object2,othUnwrapped=othIsWrapped?other.value():other;return stack||(stack=new Stack),equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}return isSameTag?(stack||(stack=new Stack),equalObjects(object2,other,bitmask,customizer,equalFunc,stack)):!1}module.exports=baseIsEqualDeep}});var require_baseIsEqual=__commonJS({"node_modules/lodash/_baseIsEqual.js"(exports,module){init_define_process_env();init_shim();var baseIsEqualDeep=require_baseIsEqualDeep(),isObjectLike=require_isObjectLike();function baseIsEqual(value,other,bitmask,customizer,stack){return value===other?!0:value==null||other==null||!isObjectLike(value)&&!isObjectLike(other)?value!==value&&other!==other:baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack)}module.exports=baseIsEqual}});var require_isEqual=__commonJS({"node_modules/lodash/isEqual.js"(exports,module){init_define_process_env();init_shim();var baseIsEqual=require_baseIsEqual();function isEqual(value,other){return baseIsEqual(value,other)}module.exports=isEqual}});var require_eval=__commonJS({"lib-browser-old/constants/eval.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.NV_MARKER=exports.NULL_VALUE_TO_REGISTER=exports.HYDRATE_STRING=exports.EVAL_TYPE=exports.ESTATE_PREFIX=exports.ELEMENT_INSTANCE_DEHYDRATE=void 0;var HYDRATE_STRING="1348695171700984260__LOOKUP__";exports.HYDRATE_STRING=HYDRATE_STRING;var ELEMENT_INSTANCE_DEHYDRATE="ElementInstance";exports.ELEMENT_INSTANCE_DEHYDRATE=ELEMENT_INSTANCE_DEHYDRATE;var ESTATE_PREFIX="ElementState:";exports.ESTATE_PREFIX=ESTATE_PREFIX;var NV_MARKER="not_valid_1431708660335x963720156345516400";exports.NV_MARKER=NV_MARKER;var NULL_VALUE_TO_REGISTER={};exports.NULL_VALUE_TO_REGISTER=NULL_VALUE_TO_REGISTER;var EVAL_TYPE=function(EVAL_TYPE2){return EVAL_TYPE2.value="VALUE",EVAL_TYPE2.thunk="THUNK",EVAL_TYPE2.skip="SKIP",EVAL_TYPE2}({});exports.EVAL_TYPE=EVAL_TYPE}});var require_registry2=__commonJS({"lib-browser-old/db/values/registry.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.add=add;exports.create=create;exports.get=get;exports.has=has;exports.is=is;exports.list=void 0;require_es_array_iterator();require_web_dom_collections_iterator();var errors=_interopRequireWildcard(require_errors());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var all_values={};function add(name,Cls){all_values[name]=Cls}function has(name){return name in all_values}function get(name){if(!all_values[name])throw new errors.UnexpectedError("Unknown db value type",{name});return all_values[name]}function is(Cls,name){return Cls instanceof all_values[name]}var list=()=>Object.keys(all_values);exports.list=list;function create(name){let Cls=get(name);for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];return new Cls(...args)}}});var require_value_types=__commonJS({"lib-browser-old/db/values/value_types.js"(exports,module){"use strict";init_define_process_env();init_shim();var ValueTypes=function(ValueTypes2){return ValueTypes2.DYNAMIC="Dynamic",ValueTypes2.LIST_WRAPPER="ListWrapper",ValueTypes2.NODE_BASE="NodeBase",ValueTypes2.STATIC_NODE="StaticNode",ValueTypes2.STATIC_OBJECT="StaticObject",ValueTypes2.STATIC_LIST="StaticList",ValueTypes2.TRANSFORM_LIST="TransformList",ValueTypes2.CONCAT_LIST="ConcatList",ValueTypes2.INTERSECT_LIST="IntersectList",ValueTypes2.UNIQUE_LIST="UniqueList",ValueTypes2.SORTED_LIST="SortedList",ValueTypes2.NODE_LIST="NodeList",ValueTypes2.CLIENT_DB_NODE="ClientDBNode",ValueTypes2.CLIENT_DB_OBJECT="ClientDBObject",ValueTypes2.SERVER_DB_NODE="ServerDBNode",ValueTypes2.SERVER_DB_OBJECT="ServerDBObject",ValueTypes2}(ValueTypes||{});module.exports=ValueTypes}});var require_hydrate=__commonJS({"lib-browser-old/db/hydrate.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports._dehydrate_value_id_data=_dehydrate_value_id_data;exports._rehydrate_value_id_data=_rehydrate_value_id_data;exports.dehydrate_prefix=void 0;exports.dehydrate_tree=dehydrate_tree;exports.dehydrate_tree_to_db_primitive=dehydrate_tree_to_db_primitive;exports.dehydrate_tree_to_string_safe=dehydrate_tree_to_string_safe;exports.dehydrated_array_index_of=dehydrated_array_index_of;exports.from_json=from_json;exports.is_json_class=is_json_class;exports.register_db=void 0;exports.rehydrate=rehydrate;exports.rehydrate_tree=rehydrate_tree;require_es_regexp_to_string();require_es_array_iterator();require_web_dom_collections_iterator();require_es_regexp_exec();require_es_string_replace();var _lib=_interopRequireDefault(require_lib()),b_fiber=_interopRequireWildcard(require_b_fiber()),b_string=_interopRequireWildcard(require_b_string()),incremental=_interopRequireWildcard(require_incremental()),logger=_interopRequireWildcard(require_logger()),errors=_interopRequireWildcard(require_errors()),eval_consts=_interopRequireWildcard(require_eval()),registry=_interopRequireWildcard(require_registry2()),value_types=_interopRequireWildcard(require_value_types()),safe_require=_interopRequireWildcard(require_safe_require());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}safe_require.safe_register("./db/hydrate",exports);var db={},register_db=_db=>db=_db;exports.register_db=register_db;function from_json(my_db,obj){return db[obj._class]||logger.warn("Trying to from_json on a bad _class",{_class:String(obj._class)}),db[obj._class].from_json(my_db,obj)}function is_json_class(data){return data&&data._class&&db[data._class]&&typeof db[data._class].from_json=="function"}function dehydrate_tree(){let obj=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(typeof obj=="function")throw new errors.UnexpectedError("cannot dehydrate a function",{toString:obj.toString()});if(obj&&typeof obj.to_json=="function")return obj.to_json();if(obj&&typeof obj.dehydrate=="function")return obj.dehydrate();if(obj instanceof Date)return obj.valueOf();if(obj&&typeof obj=="object"){if(obj.constructor!=={}.constructor&&!Array.isArray(obj))throw new errors.UnexpectedError("trying to dehydrate a class: ".concat(obj.constructor.name));b_fiber.optional_pause("dehydrate_tree pre iterate");let count=0,ret=Array.isArray(obj)?[]:{};for(let k of Object.keys(obj))count++,count%10===0&&b_fiber.optional_pause("dehydrate_tree in iterate"),ret[k]=dehydrate_tree(obj[k]);return b_fiber.optional_pause("dehydrate_tree finished"),ret}else return obj}function rehydrate(my_db,val){if(is_json_class(val))return from_json(my_db,val);if(b_string.starts_with(val,eval_consts.HYDRATE_STRING)){val=val.replace(eval_consts.HYDRATE_STRING,"");let pieces=val.split("::");return pieces.length>1?db[pieces[0]]?db[pieces[0]].rehydrate(my_db,pieces.slice(1).join("::")):null:my_db.get(val)}else return val}function rehydrate_tree(my_db,obj){if(my_db&&typeof my_db.get!="function")throw new errors.UnexpectedError("called rehydrate tree with ".concat(my_db," for my_db, it should be (my_db, obj)"));if(typeof obj=="function")throw new errors.UnexpectedError("called rehydrate tree with function: ".concat(obj));if(typeof obj=="string"&&b_string.starts_with(obj,eval_consts.HYDRATE_STRING))return rehydrate(my_db,obj);if(obj&&typeof obj=="object"){if(is_json_class(obj))return from_json(my_db,obj);if(registry.is(obj,value_types.DYNAMIC))return obj;let ret=Array.isArray(obj)?[]:{},counter2=0;for(let k of Object.keys(obj))counter2++,counter2%10===0&&b_fiber.optional_pause(),ret[k]=rehydrate_tree(my_db,obj[k]);return ret}return obj}function _dehydrate_value_id_data(data,value_id){let key=dehydrate_tree(data);return key=incremental.incremental_json_stringify(key),key="".concat(value_id!=null?value_id:"",",").concat(key),key}function _rehydrate_value_id_data(my_db,key){let data,pieces=key.split(","),value_id=pieces[0];return value_id.indexOf("{")===0?(value_id=null,data=key):(value_id||(value_id=null),data=pieces.slice(1).join(",")),data==="undefined"?data=void 0:data=incremental.incremental_json_parse(data),data=rehydrate_tree(my_db,data),{value_id,data}}var dehydrate_prefix=classname=>eval_consts.HYDRATE_STRING+classname+"::";exports.dehydrate_prefix=dehydrate_prefix;function outer_stringify(obj){return dehydrate_prefix("OuterStringified")+incremental.incremental_json_stringify(obj)}function dehydrate_tree_to_db_primitive(obj){if(Array.isArray(obj))return obj.map(entry=>dehydrate_tree_to_db_primitive(entry));let dehydrated=dehydrate_tree(obj);return is_json_class(dehydrated)?outer_stringify(dehydrated):dehydrated}function dehydrate_tree_to_string_safe(obj){if(Array.isArray(obj))return obj.map(entry=>dehydrate_tree_to_string_safe(entry));let dehydrated=dehydrate_tree(obj);return dehydrated&&typeof dehydrated=="object"?outer_stringify(dehydrated):dehydrated}function is_old_dehydrated_string(string){return typeof string=="string"&&b_string.starts_with(string,eval_consts.HYDRATE_STRING)&&!b_string.starts_with(string,dehydrate_prefix("OuterStringified"))}function dehydrated_array_index_of(array,string){let simple_index_of=array.indexOf(string);return simple_index_of>-1?simple_index_of:array.findIndex(item=>is_old_dehydrated_string(item)&&string===dehydrate_tree_to_string_safe(rehydrate_tree((0,_lib.default)().db_instance(),item)))}}});var require_special_logging_apps=__commonJS({"lib-browser-old/constants/special_logging_apps.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.ALL=void 0;var ALL={};exports.ALL=ALL}});var require_app_plans=__commonJS({"lib-browser-old/constants/app_plans.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.UserSelectablePre2019Plans=exports.UserSelectable2023Plans=exports.TEST_PLAN=exports.TEMPLATE=exports.SPECIAL_SUBSCRIPTION_PLANS=exports.PricingModel2023Plans=exports.PricingModel2022Plans=exports.PlansWithWorkloadTiersEnabled=exports.LEGACY_PAID_ON_2022_PRICING_LAUNCH=exports.LEGACY_2019_PLANS=exports.LATEST_ENTERPRISE_PLAN=exports.FREE=exports.ExperimentalPlans=exports.ENTERPRISE_PLANS=exports.DO_NOT_MARK_AS_LEGACY=exports.DEFAULT_DEDICATED_PLAN=exports.CurrentPlans=exports.AllPre2019Plans=exports.AllPlans=exports.APP_TEAM_2023=exports.APP_STARTER_2023=exports.APP_PROFESSIONAL_2019=exports.APP_PRODUCTION_2019=exports.APP_PLUGIN_DEMO=exports.APP_PERSONAL_2019=exports.APP_ORGANIZATION_FREE=exports.APP_INSTRUCTOR=exports.APP_HACKATHON=exports.APP_GROWTH_2023=exports.APP_EMPLOYEE=exports.APP_EDUCATION=exports.APP_CUSTOM_2023=exports.ALL_OR_NOTHING_RATE_LIMIT_APPLICABLE_PLANS=exports.AGENCY_PLAN=void 0;require_es_array_iterator();require_web_dom_collections_iterator();var FREE="app_free2";exports.FREE=FREE;var APP_PERSONAL_2019="app_personal_2019";exports.APP_PERSONAL_2019=APP_PERSONAL_2019;var APP_PROFESSIONAL_2019="app_professional_2019";exports.APP_PROFESSIONAL_2019=APP_PROFESSIONAL_2019;var APP_PRODUCTION_2019="app_production_2019";exports.APP_PRODUCTION_2019=APP_PRODUCTION_2019;var APP_STARTER_2023="app_starter_2023";exports.APP_STARTER_2023=APP_STARTER_2023;var APP_GROWTH_2023="app_growth_2023";exports.APP_GROWTH_2023=APP_GROWTH_2023;var APP_TEAM_2023="app_team_2023";exports.APP_TEAM_2023=APP_TEAM_2023;var APP_CUSTOM_2023="app_custom_2023";exports.APP_CUSTOM_2023=APP_CUSTOM_2023;var TEMPLATE="template_app";exports.TEMPLATE=TEMPLATE;var DEFAULT_DEDICATED_PLAN="enterprise";exports.DEFAULT_DEDICATED_PLAN=DEFAULT_DEDICATED_PLAN;var LATEST_ENTERPRISE_PLAN="enterprise_2022";exports.LATEST_ENTERPRISE_PLAN=LATEST_ENTERPRISE_PLAN;var AGENCY_PLAN="app_agency";exports.AGENCY_PLAN=AGENCY_PLAN;var TEST_PLAN="app_testing";exports.TEST_PLAN=TEST_PLAN;var APP_INSTRUCTOR="app_instructor";exports.APP_INSTRUCTOR=APP_INSTRUCTOR;var APP_HACKATHON="app_hackathon";exports.APP_HACKATHON=APP_HACKATHON;var APP_EMPLOYEE="app_employee";exports.APP_EMPLOYEE=APP_EMPLOYEE;var APP_EDUCATION="app_education";exports.APP_EDUCATION=APP_EDUCATION;var APP_ORGANIZATION_FREE="app_organization_free";exports.APP_ORGANIZATION_FREE=APP_ORGANIZATION_FREE;var APP_PLUGIN_DEMO="app_plugin_demo";exports.APP_PLUGIN_DEMO=APP_PLUGIN_DEMO;var AllPlans=["app_personal","app_production","app_professional","app_team",AGENCY_PLAN,"app_covid",APP_EDUCATION,APP_EMPLOYEE,APP_INSTRUCTOR,APP_HACKATHON,FREE,"app_hobby_2021",APP_PERSONAL_2019,"app_personal_2022",APP_PROFESSIONAL_2019,"app_professional_2022",APP_PRODUCTION_2019,"app_production_2022",APP_STARTER_2023,APP_GROWTH_2023,APP_TEAM_2023,APP_CUSTOM_2023,TEST_PLAN,DEFAULT_DEDICATED_PLAN,LATEST_ENTERPRISE_PLAN,"forum_apps",TEMPLATE,"was_legacy_paid_on_2022_pricing_launch","version_control_beta_2023",APP_ORGANIZATION_FREE,APP_PLUGIN_DEMO];exports.AllPlans=AllPlans;var CurrentPlans=[FREE,APP_PERSONAL_2019,APP_PROFESSIONAL_2019,APP_PRODUCTION_2019,DEFAULT_DEDICATED_PLAN,AGENCY_PLAN,APP_HACKATHON,APP_INSTRUCTOR,APP_EDUCATION,"app_test_dedicated_on_main",TEST_PLAN,"forum_apps",TEMPLATE,"app_covid",APP_EMPLOYEE,"version_control_beta_2023",APP_ORGANIZATION_FREE,APP_PLUGIN_DEMO];exports.CurrentPlans=CurrentPlans;var UserSelectablePre2019Plans=["app_personal","app_production","app_professional","app_team"];exports.UserSelectablePre2019Plans=UserSelectablePre2019Plans;var AllPre2019Plans=["personal","professional","team",...UserSelectablePre2019Plans];exports.AllPre2019Plans=AllPre2019Plans;var PricingModel2022Plans=["app_personal_2022","app_professional_2022","app_production_2022",LATEST_ENTERPRISE_PLAN];exports.PricingModel2022Plans=PricingModel2022Plans;var UserSelectable2023Plans=[APP_STARTER_2023,APP_GROWTH_2023,APP_TEAM_2023];exports.UserSelectable2023Plans=UserSelectable2023Plans;var PlansWithWorkloadTiersEnabled=[APP_GROWTH_2023,APP_TEAM_2023];exports.PlansWithWorkloadTiersEnabled=PlansWithWorkloadTiersEnabled;var PricingModel2023Plans=[...UserSelectable2023Plans,APP_CUSTOM_2023];exports.PricingModel2023Plans=PricingModel2023Plans;var ExperimentalPlans=["app_hobby_2021"];exports.ExperimentalPlans=ExperimentalPlans;var DO_NOT_MARK_AS_LEGACY=Object.freeze([FREE,AGENCY_PLAN,APP_ORGANIZATION_FREE,"app_covid","app_education","app_employee","app_hackathon","app_instructor","forum_apps",TEMPLATE,APP_PLUGIN_DEMO,...PricingModel2023Plans]);exports.DO_NOT_MARK_AS_LEGACY=DO_NOT_MARK_AS_LEGACY;var SPECIAL_SUBSCRIPTION_PLANS=Object.freeze([AGENCY_PLAN,APP_EDUCATION,APP_EMPLOYEE,APP_INSTRUCTOR,APP_HACKATHON,APP_ORGANIZATION_FREE,APP_PLUGIN_DEMO]);exports.SPECIAL_SUBSCRIPTION_PLANS=SPECIAL_SUBSCRIPTION_PLANS;var ENTERPRISE_PLANS=Object.freeze([DEFAULT_DEDICATED_PLAN,APP_CUSTOM_2023]);exports.ENTERPRISE_PLANS=ENTERPRISE_PLANS;var ALL_OR_NOTHING_RATE_LIMIT_APPLICABLE_PLANS=[APP_STARTER_2023,APP_GROWTH_2023];exports.ALL_OR_NOTHING_RATE_LIMIT_APPLICABLE_PLANS=ALL_OR_NOTHING_RATE_LIMIT_APPLICABLE_PLANS;var LEGACY_PAID_ON_2022_PRICING_LAUNCH="was_legacy_paid_on_2022_pricing_launch";exports.LEGACY_PAID_ON_2022_PRICING_LAUNCH=LEGACY_PAID_ON_2022_PRICING_LAUNCH;var LEGACY_2019_PLANS=Object.freeze([APP_PERSONAL_2019,APP_PROFESSIONAL_2019,APP_PRODUCTION_2019]);exports.LEGACY_2019_PLANS=LEGACY_2019_PLANS}});var require_apps=__commonJS({"lib-browser-old/constants/apps.js"(exports){"use strict";init_define_process_env();init_shim();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.SPECIAL_APPS=void 0;require_es_symbol_description();require_es_error_cause();var app_plans_consts=_interopRequireWildcard(require_app_plans());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var defaults={blocked:!1,editable:!1,forkable:!1,hard_code:!1,meta:!1,no_issue_checker:!1,test:!1},SPECIAL_APPS={coffeesearcher:_objectSpread(_objectSpread({},defaults),{},{editable:!0,forkable:!0,hard_code:!0}),countrycity:_objectSpread(_objectSpread({},defaults),{},{editable:!0,forkable:!0,hard_code:!0}),cutepuppy:_objectSpread(_objectSpread({},defaults),{},{editable:!0,forkable:!0,hard_code:!0}),demo:_objectSpread(_objectSpread({},defaults),{},{editable:!0,hard_code:!0,no_issue_checker:!0}),empty_template:_objectSpread(_objectSpread({},defaults),{},{hard_code:!0}),findatrainer:_objectSpread(_objectSpread({},defaults),{},{editable:!0,forkable:!0,hard_code:!0}),g2_iphone_test:_objectSpread(_objectSpread({},defaults),{},{no_issue_checker:!0}),itunessearcher:_objectSpread(_objectSpread({},defaults),{},{editable:!0,forkable:!0,hard_code:!0}),launchpage:_objectSpread(_objectSpread({},defaults),{},{editable:!0,forkable:!0,hard_code:!0}),learn:_objectSpread(_objectSpread({},defaults),{},{editable:!0,hard_code:!0,no_issue_checker:!0}),lostandfound:_objectSpread(_objectSpread({},defaults),{},{editable:!0,forkable:!0,hard_code:!0}),meta:_objectSpread(_objectSpread({},defaults),{},{meta:!0,plan:app_plans_consts.DEFAULT_DEDICATED_PLAN}),meta_dedicated:_objectSpread(_objectSpread({},defaults),{},{hard_code:!0,meta:!0}),meta_public:_objectSpread(_objectSpread({},defaults),{},{editable:!0,forkable:!0,hard_code:!0,meta:!0}),microbloggingapp:_objectSpread(_objectSpread({},defaults),{},{editable:!0,forkable:!0,hard_code:!0}),template:_objectSpread(_objectSpread({},defaults),{},{hard_code:!0}),template_live:_objectSpread(_objectSpread({},defaults),{},{hard_code:!0}),template_new_responsive:_objectSpread(_objectSpread({},defaults),{},{hard_code:!0}),test_app:_objectSpread(_objectSpread({},defaults),{},{hard_code:!0,no_issue_checker:!0,plan:app_plans_consts.TEST_PLAN,test:!0}),test_app_editor:_objectSpread(_objectSpread({},defaults),{},{hard_code:!0,no_issue_checker:!0,plan:app_plans_consts.TEST_PLAN,test:!0}),test_app2:_objectSpread(_objectSpread({},defaults),{},{hard_code:!0,no_issue_checker:!0,plan:app_plans_consts.TEST_PLAN,test:!0}),test_app_plugins:_objectSpread(_objectSpread({},defaults),{},{hard_code:!0,plan:app_plans_consts.TEST_PLAN,test:!0}),test_app_education:_objectSpread(_objectSpread({},defaults),{},{hard_code:!0,plan:app_plans_consts.APP_EDUCATION,test:!0}),test_app_internal:_objectSpread(_objectSpread({},defaults),{},{hard_code:!0,plan:"app_production_2019",test:!0}),test_app_elements:_objectSpread(_objectSpread({},defaults),{},{hard_code:!0,no_issue_checker:!1,plan:app_plans_consts.TEST_PLAN,test:!0}),test_app_cycles:_objectSpread(_objectSpread({},defaults),{},{hard_code:!0,no_issue_checker:!1,plan:app_plans_consts.TEST_PLAN,test:!0}),derived_test:_objectSpread(_objectSpread({},defaults),{},{hard_code:!0,test:!0}),todomvcapp:_objectSpread(_objectSpread({},defaults),{},{editable:!0,forkable:!0,hard_code:!0}),tour:_objectSpread(_objectSpread({},defaults),{},{editable:!0,hard_code:!0,no_issue_checker:!0}),airbnbclonetemplate:_objectSpread(_objectSpread({},defaults),{},{blocked:!0}),bubblewits1:_objectSpread(_objectSpread({},defaults),{},{blocked:!0}),bubblewits2:_objectSpread(_objectSpread({},defaults),{},{blocked:!0}),bubblewits3:_objectSpread(_objectSpread({},defaults),{},{blocked:!0}),spam:_objectSpread(_objectSpread({},defaults),{},{blocked:!0}),trello:_objectSpread(_objectSpread({},defaults),{},{blocked:!0}),yelpclone:_objectSpread(_objectSpread({},defaults),{},{blocked:!0})};exports.SPECIAL_APPS=SPECIAL_APPS}});var require_apps_utilities=__commonJS({"lib-browser-old/shared/apps_utilities.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.get_hardcoded_plan=get_hardcoded_plan;exports.hardcoded_apps=hardcoded_apps;exports.is_app_with_testing_plan=is_app_with_testing_plan;exports.is_blocked=is_blocked;exports.is_forkable=is_forkable;exports.is_hardcoded=is_hardcoded;exports.is_local_editable=is_local_editable;exports.is_meta=is_meta;exports.is_test=is_test;exports.no_issue_checker=no_issue_checker;require_es_array_iterator();require_web_dom_collections_iterator();require_es_object_entries();var _apps=require_apps(),configuration=_interopRequireWildcard(require_client_config2()),_configuration$meta_h;function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}_apps.SPECIAL_APPS.meta.hard_code=(_configuration$meta_h=configuration.meta_hardcoded)!=null?_configuration$meta_h:!1;function check_value(appname,key){var _SPECIAL_APPS$appname,_SPECIAL_APPS$appname2;return(_SPECIAL_APPS$appname=(_SPECIAL_APPS$appname2=_apps.SPECIAL_APPS[appname])==null?void 0:_SPECIAL_APPS$appname2[key])!=null?_SPECIAL_APPS$appname:!1}function is_blocked(appname){return check_value(appname,"blocked")}function is_local_editable(appname){return check_value(appname,"editable")}function is_forkable(appname){return check_value(appname,"forkable")}function no_issue_checker(appname){return check_value(appname,"no_issue_checker")}function is_hardcoded(appname){return check_value(appname,"hard_code")}function is_meta(appname){return check_value(appname,"meta")}function is_test(appname){return check_value(appname,"test")}function is_app_with_testing_plan(appname){var _SPECIAL_APPS$appname3;return((_SPECIAL_APPS$appname3=_apps.SPECIAL_APPS[appname])==null?void 0:_SPECIAL_APPS$appname3.plan)==="app_testing"}function get_hardcoded_plan(appname){if(appname in _apps.SPECIAL_APPS){let app_data=_apps.SPECIAL_APPS[appname];if(app_data.plan)return app_data.plan;if(app_data.hard_code)return"app_personal_2019"}}var hardcoded_appnames;function hardcoded_apps(){if(hardcoded_appnames==null){var _hardcoded_appnames;(_hardcoded_appnames=hardcoded_appnames)!=null||(hardcoded_appnames=new Set(Object.entries(_apps.SPECIAL_APPS).filter(_ref=>{let[_,app]=_ref;return app.hard_code}).map(_ref2=>{let[appname,_]=_ref2;return appname}))),Object.freeze(hardcoded_appnames)}return hardcoded_appnames}}});var require_test_apps=__commonJS({"lib-browser-old/constants/test_apps.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.TEST_APP_KEY=exports.OLD_TEST_APP_KEY=exports.NUMBER_OF_EDIT_TESTS=exports.MAX_EDITMODE_TESTS_PER_CHUNK=exports.MAIN_RUNMODE_TESTS_APPNAME=exports.FUNCTIONAL_TEST_APPNAME_PREFIXES=exports.EDITOR_TESTS_APPNAME=exports.E2E_TEST_APPS_PREFIX=exports.APPS_WITHOUT_PE_INSPECTOR=exports.APPS_WITHOUT_PE_HELP_BUTTON=exports.APPS_EXCLUDED_FROM_TUTORIALS=void 0;var _safe_require=_interopRequireDefault(require_safe_require());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_safe_require.default.safe_register("./constants/test_apps",exports);var EDITOR_TESTS_APPNAME="test_app_editor";exports.EDITOR_TESTS_APPNAME=EDITOR_TESTS_APPNAME;var MAIN_RUNMODE_TESTS_APPNAME="test_app";exports.MAIN_RUNMODE_TESTS_APPNAME=MAIN_RUNMODE_TESTS_APPNAME;var APPS_WITHOUT_PE_INSPECTOR=["learn","demo"];exports.APPS_WITHOUT_PE_INSPECTOR=APPS_WITHOUT_PE_INSPECTOR;var APPS_WITHOUT_PE_HELP_BUTTON=["learn",EDITOR_TESTS_APPNAME,"demo"];exports.APPS_WITHOUT_PE_HELP_BUTTON=APPS_WITHOUT_PE_HELP_BUTTON;var TEST_APP_KEY="test-app-234789asdfjl";exports.TEST_APP_KEY=TEST_APP_KEY;var OLD_TEST_APP_KEY="test_app_234789asdfjl";exports.OLD_TEST_APP_KEY=OLD_TEST_APP_KEY;var FUNCTIONAL_TEST_APPNAME_PREFIXES=["backup_test_original","backup-test-original","backup_test_restore","backup-test-restore"];exports.FUNCTIONAL_TEST_APPNAME_PREFIXES=FUNCTIONAL_TEST_APPNAME_PREFIXES;var E2E_TEST_APPS_PREFIX="test_app";exports.E2E_TEST_APPS_PREFIX=E2E_TEST_APPS_PREFIX;var APPS_EXCLUDED_FROM_TUTORIALS=["learn","test_app","test_app2","test_app_internal"];exports.APPS_EXCLUDED_FROM_TUTORIALS=APPS_EXCLUDED_FROM_TUTORIALS;var NUMBER_OF_EDIT_TESTS=31;exports.NUMBER_OF_EDIT_TESTS=NUMBER_OF_EDIT_TESTS;var MAX_EDITMODE_TESTS_PER_CHUNK=7;exports.MAX_EDITMODE_TESTS_PER_CHUNK=MAX_EDITMODE_TESTS_PER_CHUNK}});var require_test_apps_utilities=__commonJS({"lib-browser-old/shared/test_apps_utilities.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.is_e2e_test_appname=is_e2e_test_appname;exports.is_functional_test_appname=is_functional_test_appname;require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_includes();require_es_string_includes();require_es_string_starts_with();var _apps_utilities=require_apps_utilities(),_test_apps=require_test_apps();function is_functional_test_appname(appname){return[_test_apps.TEST_APP_KEY,_test_apps.OLD_TEST_APP_KEY,..._test_apps.FUNCTIONAL_TEST_APPNAME_PREFIXES].some(test_app_prefix=>appname.includes(test_app_prefix))}function is_e2e_test_appname(appname){return(0,_apps_utilities.hardcoded_apps)().has(appname)&&appname.startsWith(_test_apps.E2E_TEST_APPS_PREFIX)}}});var require_investigations=__commonJS({"lib-browser-old/shared/investigations.js"(exports){"use strict";init_define_process_env();init_shim();var Lib=require_lib(),b_fiber=require_b_fiber(),mode_check=require_mode_check(),environment_utilities=require_environment_utilities(),special_logging_apps=require_special_logging_apps(),logging_consts=require_logging(),test_apps_utilities=require_test_apps_utilities(),investigations=exports,Investigation=class{constructor(filter){this.filter=filter}active(context){var _context;return(_context=context)!=null||(context={}),this.filter(context)}};investigations.Investigation=Investigation;function sample_events(probability){return Math.random()<probability}function special_logging_apps_only(){var _Lib$appname,_Lib;let appname=(_Lib$appname=(_Lib=Lib()).appname)==null?void 0:_Lib$appname.call(_Lib);if(mode_check.running_test()||test_apps_utilities.is_e2e_test_appname(appname))return!0;var _special_logging_apps;return(_special_logging_apps=special_logging_apps.ALL[appname])!=null?_special_logging_apps:!1}function sample_sessions(probability){return sample_events(probability)?new Investigation(()=>!0):new Investigation(()=>!1)}investigations.frozen_state_discrepancies=new Investigation(()=>{let probability;return environment_utilities.is_production()?probability=.001:mode_check.running_test()?probability=1:probability=.1,sample_events(probability)});investigations.frozen_state_debugging=new Investigation(special_logging_apps_only);investigations.workflow_execution=new Investigation(special_logging_apps_only);investigations.action_update_thing=new Investigation(special_logging_apps_only);investigations.postgres_dangerous_procedures=new Investigation(_ref=>{let{appname,proc}=_ref;return special_logging_apps.ALL[appname]&&logging_consts.SPECIAL_LOGGING_PROCS[proc]});investigations.fetch_bigger_chunks=sample_sessions(.01);investigations.is_mobile=new Investigation(()=>environment_utilities.is_production()?sample_events(.01):!0);investigations.is_touch=investigations.is_mobile}});var require_lang=__commonJS({"lib-browser-old/constants/lang.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.OPTION_VALUE_FORMATS=exports.MISSING_TYPE=exports.LIST_OPERATOR_NAMES=exports.DETECT_FIELD_NAMES=void 0;var DETECT_FIELD_NAMES="DETECT";exports.DETECT_FIELD_NAMES=DETECT_FIELD_NAMES;var MISSING_TYPE="<<MISSING TYPE INFO>>";exports.MISSING_TYPE=MISSING_TYPE;var OPTION_VALUE_FORMATS=function(OPTION_VALUE_FORMATS2){return OPTION_VALUE_FORMATS2.name_is_key="name_is_key",OPTION_VALUE_FORMATS2.name_is_db_value_with_fallback="name_is_db_value_with_fallback",OPTION_VALUE_FORMATS2}({});exports.OPTION_VALUE_FORMATS=OPTION_VALUE_FORMATS;var LIST_OPERATOR_NAMES=function(LIST_OPERATOR_NAMES2){return LIST_OPERATOR_NAMES2.Count="count",LIST_OPERATOR_NAMES2.Contains="contains",LIST_OPERATOR_NAMES2.NotContains="not_contains",LIST_OPERATOR_NAMES2.FirstElement="first_element",LIST_OPERATOR_NAMES2.LastElement="last_element",LIST_OPERATOR_NAMES2.RandomElement="random_element",LIST_OPERATOR_NAMES2.SpecificItem="specific_item",LIST_OPERATOR_NAMES2.LimitTo="limit_to",LIST_OPERATOR_NAMES2.ListFrom="list_from",LIST_OPERATOR_NAMES2.ContainsList="contains_list",LIST_OPERATOR_NAMES2.Join="join",LIST_OPERATOR_NAMES2.Sum="sum",LIST_OPERATOR_NAMES2.Product="product",LIST_OPERATOR_NAMES2.Average="average",LIST_OPERATOR_NAMES2.Median="median",LIST_OPERATOR_NAMES2.Min="min",LIST_OPERATOR_NAMES2.Max="max",LIST_OPERATOR_NAMES2.PlusElement="plus_element",LIST_OPERATOR_NAMES2.MinusElement="minus_element",LIST_OPERATOR_NAMES2.MinusList="minus_list",LIST_OPERATOR_NAMES2.MergedWith="merged_with",LIST_OPERATOR_NAMES2.IntersectWith="intersect_with",LIST_OPERATOR_NAMES2.GroupBy="group_by",LIST_OPERATOR_NAMES2.Filtered="filtered",LIST_OPERATOR_NAMES2.Sorted="sorted",LIST_OPERATOR_NAMES2.RankedBy="ranked_by",LIST_OPERATOR_NAMES2.Unique="unique",LIST_OPERATOR_NAMES2.ApproximateCount="approximate_count",LIST_OPERATOR_NAMES2.CachedAggregation="cached_aggregation",LIST_OPERATOR_NAMES2.FormatAsText="format_as_text",LIST_OPERATOR_NAMES2.MakeStatic="make_static",LIST_OPERATOR_NAMES2}({});exports.LIST_OPERATOR_NAMES=LIST_OPERATOR_NAMES}});var require_app_json=__commonJS({"lib-browser-old/constants/app_json.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.PROTECTED_PAGE_NAMES=exports.PROTECTED_KEYS=exports.OBJECT_MARKER=exports.CONFLICT_PATHS=exports.BUBBLE_RESERVED_KEYS=void 0;require_es_array_iterator();require_web_dom_collections_iterator();var _safe_require=_interopRequireDefault(require_safe_require());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_safe_require.default.safe_register("./constants/app_json",exports);var PROTECTED_KEYS=new Set(["constructor","__defineGetter__","__defineSetter__","hasOwnProperty","__lookupGetter__","__lookupSetter__","isPrototypeOf","propertyIsEnumerable","toString","valueOf","__proto__","toLocaleString"]);exports.PROTECTED_KEYS=PROTECTED_KEYS;var OBJECT_MARKER="__obj_marker__";exports.OBJECT_MARKER=OBJECT_MARKER;var BUBBLE_RESERVED_KEYS=new Set(["type","id","_id","length",OBJECT_MARKER,"phone_number"]);exports.BUBBLE_RESERVED_KEYS=BUBBLE_RESERVED_KEYS;var PROTECTED_PAGE_NAMES=new Set(["index","reset_pw","404"]);exports.PROTECTED_PAGE_NAMES=PROTECTED_PAGE_NAMES;var CONFLICT_PATHS=["settings.client_safe.uid_counter","uid_counter","conflicts","conflicts_theirs_version_name","conflicts_undo_snapshot_id","merge_changes","no_merge_changes","_index","screenshot"];exports.CONFLICT_PATHS=CONFLICT_PATHS}});var require_json_utils=__commonJS({"lib-browser-old/lang/app_json/json_utils.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.escape_app_json_key=escape_app_json_key;exports.raw_to_child_names=raw_to_child_names;exports.unescape_app_json_key=unescape_app_json_key;require_web_dom_collections_for_each();require_es_object_entries();require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_includes();require_es_string_includes();require_es_parse_int();require_es_array_sort();require_es_regexp_constructor();require_es_regexp_dot_all();require_es_regexp_exec();require_es_regexp_to_string();require_es_object_values();require_es_string_replace();var _app_json=require_app_json(),_regexUtilities=require_regexUtilities(),SPARSENESS_THRESHOLD=100;function raw_to_child_names(raw){let res;if(raw==null||typeof raw!="object")res=[];else if(Array.isArray(raw))res=raw.map((v,i)=>String(i));else{let possible_array=-1;if(res=[],Object.entries(raw).filter(_ref=>{let[k,v]=_ref;return v!==void 0&&!["length",_app_json.OBJECT_MARKER].includes(k)}).forEach(_ref2=>{let[k,v]=_ref2;if(possible_array!=null){let idx=parseInt(k);String(idx)!==String(k)?possible_array=null:possible_array=Math.max(idx,possible_array)}res.push(k)}),possible_array!=null&&possible_array>-1&&possible_array<SPARSENESS_THRESHOLD*res.length){res=[];for(let i=0;i<=possible_array;i++)res.push(String(i))}else res.sort()}return res}var escape_codes={".":"^{p1}","^":"^{c1}"},unescape_codes={};Object.keys(escape_codes).forEach(key=>{unescape_codes[escape_codes[key]]=key});var escape_regex=new RegExp((0,_regexUtilities.oneOf)(...Object.keys(escape_codes)),"g"),unescape_regex=new RegExp((0,_regexUtilities.oneOf)(...Object.values(escape_codes)),"g");function escape_app_json_key(key){return key.replace(escape_regex,match=>escape_codes[match])}function unescape_app_json_key(key){return key.replace(unescape_regex,match=>unescape_codes[match])}}});var require_json_base=__commonJS({"lib-browser-old/lang/app_json/json_base.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.EmptyJSON=EmptyJSON;exports.JSONBase=void 0;require_es_array_iterator();require_web_dom_collections_iterator();require_es_regexp_exec();require_es_string_search();require_es_regexp_to_string();var _json_utils=require_json_utils(),_shrink=require_shrink(),_app_json=require_app_json(),_shrink2=require_shrink(),JSONBase=class{child_by_path(path){return this.by_path((0,_shrink2.shrink_path)(path))}by_path(_path){let pieces=_path.split("."),targ=this;for(let p of pieces)p&&(targ=targ._child(p));return targ}child(name){return this._child((0,_shrink.shrink)(name))}name(){return(0,_shrink.expand)(this._name())}path(){let _path=this._path();return _path&&_path.split(".").map(piece=>(0,_shrink.expand)(piece)).join(".")}get is_json(){return!0}by_id(id){let _path=this.raw_index("id_to_path",id),root=this.root();return _path&&root.pre_cache(_path,!0),_path==null?EmptyJSON(this,id):root.by_path(_path)}read_index(){let data=this.raw_index(...arguments);return data!=null&&typeof data=="object"&&(delete data[_app_json.OBJECT_MARKER],delete data.length),data}children(){return this._child_names().map(name=>this._child(name))}child_names(){return this._child_names().map(_name=>(0,_shrink.expand)(_name))}is_equal_to(json){var _json$toUniqueString;return(json==null||(_json$toUniqueString=json.toUniqueString)==null?void 0:_json$toUniqueString.call(json))===this.toUniqueString()}_raw_to_child_names(raw){return(0,_json_utils.raw_to_child_names)(raw)}raw(){let raw=this._raw();return raw===void 0?raw:(0,_shrink.expand_object)(raw)}_raw_child(_name){return this._child(_name)._raw()}_raw_gchild(_n1,_n2){return this._gchild(_n1,_n2)._raw()}set(data,intent){this._set((0,_shrink.shrink_object)(data),intent)}pre_cache(path,shrunk){if(!path&&!this._path())return;let target=this;if(path)for(let piece of path.split(".").filter(p=>p))shrunk?target=target._child(piece):target=target.child(piece);target.ensure_loading()}toString(){return"JSON Base"}};exports.JSONBase=JSONBase;function EmptyJSON(owner,id,search){return new EmptyJSONClass(owner,id,search)}var EmptyJSONClass=class extends JSONBase{constructor(owner,_id,search){super(),this.owner=void 0,this._id=void 0,this.search=void 0,this.owner=owner,this._id=_id,this.search=search}empty(){return!0}exists(){return!1}_raw(){}raw_type(){return"undefined"}get(){return null}id(){var _this$_id;return(_this$_id=this._id)!=null?_this$_id:""}to_id(){return this}to_path(){return this}toString(){var _this$_id2,_this$search;return"EmptyJSON<"+((_this$_id2=this._id)!=null?_this$_id2:"")+((_this$search=this.search)!=null?_this$search:"")+">"}toUniqueString(){return this.toString()+"_"+this.owner.toString()}path_cache(){return this.toString()+"_"+this.owner.toString()}ensure_exists(){return null}_path(){return""}_name(){return""}parent(){return null}_child(name){return EmptyJSON(this.owner,null,"".concat(this.toString(),".child(").concat(String(name),")"))}_gchild(_n1,_n2){return EmptyJSON(this.owner,null,"".concat(this.toString(),".gchild(").concat(String(_n1),",").concat(String(_n2),")"))}pre_cache(path,shrunk){this.owner.pre_cache(path,shrunk)}ensure_loading(){}_child_names(){return[]}root(){return this.owner.root()}application(){return this.owner.application()}appname(){return this.owner.appname()}app_version(){return this.owner.app_version()}raw_index(){return this.owner.raw_index(...arguments)}register_indexer(){}smart_cache(name,creator,additional_arg){return creator(this,additional_arg)}_set(data,intent){}serialize(){return{}}}}});var require_es_array_flat_map=__commonJS({"node_modules/core-js/modules/es.array.flat-map.js"(){"use strict";init_define_process_env();init_shim();var $2=require_export(),flattenIntoArray=require_flatten_into_array(),aCallable=require_a_callable(),toObject=require_to_object(),lengthOfArrayLike=require_length_of_array_like(),arraySpeciesCreate=require_array_species_create();$2({target:"Array",proto:!0},{flatMap:function(callbackfn){var O=toObject(this),sourceLen=lengthOfArrayLike(O),A;return aCallable(callbackfn),A=arraySpeciesCreate(O,0),A.length=flattenIntoArray(A,O,O,sourceLen,0,1,callbackfn,arguments.length>1?arguments[1]:void 0),A}})}});var require_es_array_unscopables_flat_map=__commonJS({"node_modules/core-js/modules/es.array.unscopables.flat-map.js"(){init_define_process_env();init_shim();var addToUnscopables=require_add_to_unscopables();addToUnscopables("flatMap")}});var require_enhanced_array=__commonJS({"lib-browser-old/lang/enhanced_array.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_sort();require_es_symbol_description();require_es_object_assign();require_web_dom_collections_for_each();require_es_array_flat_map();require_es_array_unscopables_flat_map();require_es_array_iterator();require_web_dom_collections_iterator();var u=require_u2(),enhanced_array=exports,EArray=class extends Array{is_equal_to(other){return Array.isArray(other)&&other.length===this.length&&this.every((item,idx)=>u.compare(item,other[idx]))}toString(){return"Enhanced Array: "+this.to_array()}to_array(){return Array.from(this)}sort(sort_fn){return this.constructor.from(this.to_array().sort(sort_fn))}};EArray.prototype[Symbol.isConcatSpreadable]=!0;enhanced_array.EArray=EArray;enhanced_array.build_class=function(broadcast_names){let instance_methods=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},EnhancedArray=class extends EArray{};return Object.assign(EnhancedArray.prototype,instance_methods),broadcast_names.forEach(name=>{var _EnhancedArray$protot,_EnhancedArray$protot2;(_EnhancedArray$protot2=(_EnhancedArray$protot=EnhancedArray.prototype)[name])!=null||(_EnhancedArray$protot[name]=function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return this.flatMap(obj=>{if(obj==null)return null;if(typeof obj[name]!="function")throw new u.UnexpectedError("EArray child missing",{name});return obj[name](...args)})})}),EnhancedArray}}});var require_decaf=__commonJS({"lib-browser-old/u/shared/decaf.js"(exports){"use strict";init_define_process_env();init_shim();require_es_object_values();require_es_object_entries();var safe_require=require_safe_require(),decaf=exports;safe_require.safe_register("./u/shared/decaf",decaf);decaf.object_keys=obj=>obj&&(typeof obj=="object"||typeof obj=="function")?Object.keys(obj):[];decaf.object_values=obj=>obj&&(typeof obj=="object"||typeof obj=="function")?Object.values(obj):[];decaf.object_entries=obj=>obj&&(typeof obj=="object"||typeof obj=="function")?Object.entries(obj):[];decaf.array_from=x=>Array.from(x)}});var require_nodes_utils=__commonJS({"lib-browser-old/lang/nodes/nodes_utils.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_regexp_to_string();require_es_json_stringify();require_es_object_entries();require_es_array_includes();require_es_string_includes();require_web_dom_collections_for_each();var u=require_u2(),Lib=require_lib(),logger=require_logger(),shrink=require_shrink(),app_json_consts=require_app_json(),json_base=require_json_base(),registry=require_registry(),enhanced_array=require_enhanced_array(),decaf=require_decaf(),nodes=require_node_types(),nodes_utils=exports,{OBJECT_MARKER}=app_json_consts,{S}=shrink;nodes_utils.deserialize=function(application_version,serialized){function process_arg(arg){switch(arg.type){case"json":return application_version.json.by_path(arg.value);case"node":return nodes_utils.deserialize(application_version,arg.value);case"raw":return arg.value;default:throw new u.UnexpectedError(arg.type)}}let args=serialized.args.map(arg=>process_arg(arg)),arg0=args[0],arg1=args[1],arg2=args[2];return args.length>3&&logger.error("error deserializing: we have something with more than 3 args",{constructor_name:serialized.constructor_name}),registry.create(serialized.constructor_name,arg0,arg1,arg2)};nodes_utils.filter_array=function(filter,array){if(!filter)return nodes_utils.enhance_array(array);filter=nodes_utils.make_filter(filter);let array_to_enhance=[];for(let entry of array!=null?array:[])filter(entry)&&array_to_enhance.push(entry);return nodes_utils.enhance_array(array_to_enhance)};function filter_to_string(){return"Compiled filter: "+this._original}function filter_function(class_type,type,property_name,property_value,with_name,obj){if(class_type){if(obj instanceof json_base.JSONBase)throw new u.UnexpectedError("We do not support running class filters on JSONs");if(!((obj._raw?nodes_utils.from_raw(obj):obj)instanceof class_type))return!1}let json,use_json,_raw;if(obj instanceof json_base.JSONBase?(json=obj,use_json=!0):obj._raw!=null?(_raw=obj._raw,use_json=!1):(json=obj.json,use_json=!0),use_json){if(!json||type&&type!==json._child(S.type).get())return!1;if(property_name){var _val;let val=json._raw_gchild(S.properties,property_name);if(((_val=val)==null?void 0:_val[S.type])==="TextExpression"&&(val=decaf.object_values(val[S.entries]).join("")),String(val)!==property_value)return!1}return!(with_name&&json._child(S.name).get()!==with_name)}else{if(_raw==null||type&&type!==_raw[S.type])return!1;if(property_name){var _raw$S$properties,_val2;let val=(_raw$S$properties=_raw[S.properties])==null?void 0:_raw$S$properties[property_name];if(((_val2=val)==null?void 0:_val2[S.type])==="TextExpression"&&(val=decaf.object_values(val[S.entries]).join("")),String(val)!==property_value)return!1}return!(with_name&&_raw[S.name]!==with_name)}}function identity_filter(){return!0}identity_filter.toString=()=>"Identity filter";var filter_cache={};nodes_utils.make_filter=function(filter_str){if(!filter_str)return identity_filter;if(typeof filter_str=="function")return filter_str;if(!filter_cache[filter_str]){let property,type;if(filter_str.charAt(0)==='"'){let split_from=filter_str.indexOf('"',1);type=filter_str.substring(1,split_from),property=filter_str.substring(split_from+2)}else{let filter_str_array=filter_str.split(".");type=filter_str_array[0],property=filter_str_array.slice(1).join(".")}let property_name,with_name,property_value;property&&(property_name=property.split("=")[0],property_value=property.split("=")[1],property_name==="name"&&(with_name=property_value,property_name=null),property_name==="\name"&&(property_name="name")),property_name=shrink.shrink(property_name);let class_type;registry.has(type)&&(logger.error("Deprecated: filter using class_type",{filter_str}),class_type=registry.get(type),type=null),filter_cache[filter_str]=filter_function.bind(null,class_type,type,property_name,property_value,with_name),filter_cache[filter_str]._type=type,filter_cache[filter_str]._original=filter_str,filter_cache[filter_str].toString=filter_to_string}return filter_cache[filter_str]};nodes_utils.to_raw=function(node){var _node$owner;let{json}=node,_raw=json._raw();if(_raw==null)return null;let _path=json._path(),owner;if((_node$owner=node.owner)!=null&&_node$owner.is_node&&(owner=nodes_utils.to_raw(node.owner),owner.converter=node.owner.make_new,!owner.converter))throw new u.UnexpectedError("Class "+node.owner.constructor.name+" is missing a make_new function");return{_raw,_path,owner}};nodes_utils.from_raw=function(base_json,converter,_ref){let{_raw,_path,owner}=_ref,json=base_json.root().by_path(_path);if(owner!=null){if(!owner.converter)throw new u.UnexpectedError("bad owner:\n"+JSON.stringify({_raw,_path,owner},null,4));owner=nodes_utils.from_raw(base_json,owner.converter,owner)}return converter(json,owner)};nodes_utils.from_raw_array=(base_json,converter,array)=>nodes_utils.enhance_array(array.map(entry=>nodes_utils.from_raw(base_json,converter,entry)));nodes_utils.raw_child=function(_ref2,name){let{_raw,_path,owner}=_ref2;return _raw=_raw[name],_raw?(_path=_path+"."+name,{_raw,_path,owner}):null};nodes_utils.set_owner=function(node,owner,owner_converter){node.owner=owner,owner.converter=owner_converter};nodes_utils.raw_children=function(_ref3,name){var _raw$name;let{_raw,_path,owner}=_ref3,path_base=_path+"."+name+".",object2=(_raw$name=_raw[name])!=null?_raw$name:{};return Object.entries(object2).filter(_ref4=>{let[k,v]=_ref4;return v!=null&&!["length",OBJECT_MARKER].includes(k)}).map(_ref5=>{let[k,v]=_ref5;return{_raw:v,_path:path_base+k,owner}})};nodes_utils.raw_properties=function(owner,owner_converter){var _raw$S$properties2;let{_raw,_path}=owner;owner.converter=owner_converter;let path_base=_path+"."+S.properties+".",object2=(_raw$S$properties2=_raw[S.properties])!=null?_raw$S$properties2:{};return Object.entries(object2).filter(_ref6=>{let[k,v]=_ref6;return v!=null&&!["length",OBJECT_MARKER].includes(k)}).map(_ref7=>{let[k,v]=_ref7;return{_raw:v,_path:path_base+k,owner}})};nodes_utils.raw_array_node=function(_ref8){let{_raw,_path,owner}=_ref8,path_base=_path+".",object2=_raw!=null?_raw:{};return Object.entries(object2).filter(_ref9=>{let[k,v]=_ref9;return v!=null&&!["length",OBJECT_MARKER].includes(k)}).map(_ref10=>{let[k,v]=_ref10;return{_raw:v,_path:path_base+k,owner}})};var EnhancedArray=null;function build_enhanced_array(){let names=[],test_array=["asdf"];for(let nm of registry.list()){let cls=registry.get(nm);if(cls&&cls.prototype instanceof registry.get(nodes.APP_NODE))for(let fn_name of u.all_keys(cls.prototype))test_array[fn_name]==null&&names.push(fn_name)}EnhancedArray=enhanced_array.build_class(names,{filter(filter){return nodes_utils.filter_array(filter,this)}})}nodes_utils.get_EnhancedArray=function(){return EnhancedArray||build_enhanced_array(),EnhancedArray};nodes_utils.enhance_array=function(array){EnhancedArray||build_enhanced_array();let ret=new EnhancedArray;return Array.prototype.push.apply(ret,array),ret};nodes_utils.to_array=function(arr){return arr.to_array?arr.to_array():arr}}});var require_AppNode=__commonJS({"lib-browser-old/lang/nodes/AppNode.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();var u=require_u2(),registry=require_registry(),nodes_utils=require_nodes_utils();module.exports=class{constructor(json){this.json=json}get is_node(){return!0}has_id(){return!1}toString(){return this.lang_constructor+"<"+this.json.path()+">"}toUniqueString(){return this.lang_constructor+"<"+this.json.toUniqueString()+">"}app(){var _root$_appnode_applic;let root=this.json.root();return(_root$_appnode_applic=root._appnode_application_version_cache)!=null||(root._appnode_application_version_cache=registry.create("ApplicationVersion",root)),root._appnode_application_version_cache}id(){return this.json.id()}is_equal_to(node){return(node==null?void 0:node.toUniqueString())===this.toUniqueString()}path(){return this.json.path()}raw(){return this.json.raw()}read_index(){return this.json.read_index(...arguments)}is(filter){return nodes_utils.make_filter(filter)(this)}exists(){return this.json.exists()}ensure_exists(){return this.json.ensure_exists()?this:null}serialize(){if(!this.lang_constructor)throw new u.UnexpectedError("missing lang_constructor: "+this.constructor.name);function process_arg(arg){return arg.is_json?{type:"json",value:arg._path()}:arg.is_node?{type:"node",value:arg.serialize()}:{type:"raw",value:arg}}let args=this.serialize_args().map(arg=>process_arg(arg));return{constructor_name:this.lang_constructor,args}}serialize_args(){return[this.json]}}}});var require_caching=__commonJS({"lib-browser-old/lang/caching.js"(exports){"use strict";init_define_process_env();init_shim();require_es_symbol_description();require_es_error_cause();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();var _excluded=["type","parameters"];function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded),key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(excluded.indexOf(key)>=0)&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={},sourceKeys=Object.keys(source),key,i;for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],!(excluded.indexOf(key)>=0)&&(target[key]=source[key]);return target}var u=require_u2(),Lib=require_lib(),caching=exports;caching.RUN_MODE="run";caching.ALL_MODES="all";caching.AUTORUN="autorun";caching.cached=function(){let options=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{type,parameters=0}=options,other_options=_objectWithoutProperties(options,_excluded);if(type===caching.AUTORUN)return autorun_cache_decorator(other_options);if(type===caching.ALL_MODES)return make_decorator(caching.all_cache);if(type===caching.RUN_MODE){if(parameters===0)return make_decorator(caching.run_cache);if(parameters===1)return make_decorator(caching.run_cache_1_param)}throw new u.UnexpectedError("Unsupported cache options",{type,parameters})};caching.standalone=function(options,fn){var _fn$name;let name=(_fn$name=fn.name)!=null?_fn$name:"fn",wrapper={[name]:fn},descriptor=Object.getOwnPropertyDescriptor(wrapper,name),decorator=caching.cached(options),standalone_cache={[name]:decorator(wrapper,name,descriptor).value};return standalone_cache[name].bind(standalone_cache)};function make_decorator(wrapper_fn){return function(target,property_key,descriptor){return _objectSpread(_objectSpread({},descriptor),{},{value:wrapper_fn(property_key,descriptor.value)})}}function autorun_cache_decorator(){let options=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(target,property_key,descriptor)=>_objectSpread(_objectSpread({},descriptor),{},{value:u.autorun_cache(u.extend({},{fn:descriptor.value},options))})}caching.run_cache=function(method_name,fn){return u.on_client()&&!u.is_edit_mode()?function(){let res=fn.call(this);return this[method_name]=()=>res,res}:fn};caching.run_cache_1_param=function(name,fn){return u.on_client()?function(arg){let key=name+"_run_cache_1_param";if(!this[key])if(Lib().is_edit_mode())this[key]=fn;else{let _cache={};this[key]=function(arg2){var _cache$arg;return(_cache$arg=_cache[arg2])!=null||(_cache[arg2]=fn.call(this,arg2)),_cache[arg2]}}return this[key](arg)}:fn};caching.all_cache=function(name,fn){return function(){let res=fn.call(this);return this[name]=()=>res,res}}}});var require_HasProperties=__commonJS({"lib-browser-old/lang/nodes/HasProperties.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_reduce();require_es_array_reverse();require_es_array_iterator();require_web_dom_collections_iterator();require_es_json_stringify();require_web_dom_collections_for_each();require_es_object_values();var _dec,_dec2,_class;function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key]}),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce(function(desc2,decorator){return decorator(target,property,desc2)||desc2},desc),context&&desc.initializer!==void 0&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),desc.initializer===void 0&&(Object.defineProperty(target,property,desc),desc=null),desc}var u=require_u2(),Lib=require_lib(),b_fiber=require_b_fiber(),logger=require_logger(),caching=require_caching(),registry=require_registry(),shrink=require_shrink(),lang_consts=require_lang(),nodes_utils=require_nodes_utils(),AppNode=require_AppNode(),appquery=require_appquery(),btype_ids=require_btype_ids(),{S}=shrink,_property_json_cache={};module.exports=(_dec=caching.cached({type:caching.RUN_MODE,parameters:1}),_dec2=caching.cached({type:caching.RUN_MODE}),_class=class extends AppNode{get_default(name){var _field_names$name;if(!this.field_names)throw new u.UnexpectedError("does not have field names defined: "+this);let field_names=this.field_names();return field_names===lang_consts.DETECT_FIELD_NAMES?null:(_field_names$name=field_names[name])==null?void 0:_field_names$name.default}get_custom_parameters(){var _param_node$entries,_param_node$entries2;let param_node=this.property("parameters");return((_param_node$entries=(_param_node$entries2=param_node.entries)==null?void 0:_param_node$entries2.call(param_node))!=null?_param_node$entries:[]).map(entry=>{var _entry$get_static_pro;let base_btype_id=(_entry$get_static_pro=entry.get_static_property("btype_id"))!=null?_entry$get_static_pro:entry.get_static_property("value"),is_list=entry.get_static_property("is_list");return{param_id:entry.get_static_property("param_id"),param_name:entry.get_static_property("param_name"),optional:entry.get_static_property("optional"),btype_id:is_list?btype_ids.list_type(base_btype_id):base_btype_id}})}preprocess_properties(properties,context){return properties}property(name){var _this$_property_owner;let path="".concat(appquery.app_version()).concat(this.json.path_cache()).concat(name),prop_json;if(u.on_server()){var _b_fiber$Fiber$curren,_b_fiber$Fiber$curren2;(_b_fiber$Fiber$curren2=(_b_fiber$Fiber$curren=b_fiber.Fiber.current)._property_json_cache)!=null||(_b_fiber$Fiber$curren._property_json_cache=new LRU({max:1e3,length:()=>1}));let cache_obj=b_fiber.Fiber.current._property_json_cache;cache_obj.has(path)?prop_json=cache_obj.get(path):(prop_json=this.json._gchild(S.properties,shrink.shrink(name)),cache_obj.set(path,prop_json))}else{var _property_json_cache$;(_property_json_cache$=_property_json_cache[path])!=null||(_property_json_cache[path]=this.json._gchild(S.properties,shrink.shrink(name))),prop_json=_property_json_cache[path]}return registry.new_expression(prop_json,(_this$_property_owner=this._property_owner)!=null?_this$_property_owner:this)}get_static_property(name){let _raw=this.json._raw_gchild(S.properties,shrink.shrink(name));if(_raw!=null)if(typeof _raw=="object")switch(_raw[S.type]){case"Empty":return null;case"TextExpression":{var _raw$S$entries;let iterable=(_raw$S$entries=_raw[S.entries])!=null?_raw$S$entries:[],result=[];return Object.values(iterable).forEach(entry=>{entry!=null&&typeof entry=="object"&&logger.verbose("stringifying object object",{_raw}),result.push(entry)}),result.join("")}case"GeoAddressNode":return _raw[shrink.shrink("val")];default:return _raw}else return _raw;else{var _this$get_default;return(_this$get_default=this.get_default(name))!=null?_this$get_default:null}}properties(){return nodes_utils.enhance_array(this.json._child(S.properties).children().map(json=>{var _this$_property_owner2;return registry.new_expression(json,(_this$_property_owner2=this._property_owner)!=null?_this$_property_owner2:this)}))}},_applyDecoratedDescriptor(_class.prototype,"get_static_property",[_dec],Object.getOwnPropertyDescriptor(_class.prototype,"get_static_property"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"properties",[_dec2],Object.getOwnPropertyDescriptor(_class.prototype,"properties"),_class.prototype),_class)}});var require_HasID=__commonJS({"lib-browser-old/lang/nodes/HasID.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();var Lib=require_lib(),HasProperties=require_HasProperties(),nodes_utils=require_nodes_utils();module.exports=class extends HasProperties{exists(){return this.json.child("id").exists()}has_id(){return!0}}}});var require_nodes=__commonJS({"lib-browser-old/lang/nodes/index.js"(exports,module){"use strict";init_define_process_env();init_shim();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_symbol_description();require_es_error_cause();function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var registry=require_registry(),node_types=require_node_types(),AppNode=require_AppNode(),HasProperties=require_HasProperties(),HasID=require_HasID(),nodes_utils=require_nodes_utils();module.exports=_objectSpread(_objectSpread(_objectSpread({},nodes_utils),node_types),registry);var nodes=module.exports;nodes.AppNode=AppNode;nodes.HasProperties=HasProperties;nodes.HasID=HasID;registry.add(node_types.APP_NODE,AppNode,{abstract:!0});registry.add(node_types.HAS_PROPERTIES,HasProperties,{abstract:!0});registry.add(node_types.HAS_ID,HasID,{abstract:!0})}});var require_expression_utils=__commonJS({"lib-browser-old/lang/expressions/expression_utils.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.create_reduced=void 0;exports.expression_find_expressions=expression_find_expressions;exports.missing_datasource=exports.lit_eval_value=void 0;require_es_array_includes();require_es_array_iterator();require_web_dom_collections_iterator();var nodes=_interopRequireWildcard(require_nodes()),shrink=_interopRequireWildcard(require_shrink()),hydrate2=_interopRequireWildcard(require_hydrate());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var{S}=shrink,create_reduced=function(val,value_id){return value_id==="reduced"?val:{[S.type]:"Dehydrated",[S.properties]:{[S.val]:hydrate2.dehydrate_tree(val),[S.value_id]:value_id}}};exports.create_reduced=create_reduced;var lit_eval_value=function(type){switch(type){case"string":return"text";case"boolean":return"sys.bool";case"number":return"number"}};exports.lit_eval_value=lit_eval_value;var missing_datasource=function(type){return{_fields:()=>[],field_names:{},get_unique_string(){},evaluate(){},get_value:()=>"null",display:()=>"[missing: "+type+"]",check_for_errors(report){report("Could not find "+type)}}};exports.missing_datasource=missing_datasource;function expression_find_expressions(exp,filter){let results=[],{_raw}=exp;if(!_raw||typeof _raw!="object")return results;let type=_raw[S.type];if(["Empty","GeoAddress"].includes(type))return results;if(type)if(type==="TextExpression")for(let sub of nodes.raw_children(exp,S.entries))filter(sub)&&results.push(sub),results.push(...expression_find_expressions(sub,filter));else{if(_raw[S.properties])for(let sub of nodes.raw_children(exp,S.properties))filter(sub)&&results.push(sub),results.push(...expression_find_expressions(sub,filter));if(type==="Message"&&_raw[S.args]){let sub=nodes.raw_child(exp,S.args);sub&&(filter(sub)&&results.push(sub),results.push(...expression_find_expressions(sub,filter)))}if(_raw[S.next]){let sub=nodes.raw_child(exp,S.next);sub&&(filter(sub)&&results.push(sub),results.push(...expression_find_expressions(sub,filter)))}}else for(let sub of nodes.raw_array_node(exp))filter(sub)&&results.push(sub),results.push(...expression_find_expressions(sub,filter));return results}}});var require_db_values=__commonJS({"lib-browser-old/db/values/db_values.js"(exports){"use strict";init_define_process_env();init_shim();require_web_dom_collections_for_each();require_es_object_entries();require_es_array_iterator();require_web_dom_collections_iterator();var safe_require=require_safe_require(),db_values=exports;safe_require.safe_register("./db/values/db_values",db_values);db_values.registry=require_registry2();var value_types=require_value_types();Object.entries(value_types).forEach(_ref=>{let[name,type]=_ref;return db_values[name]=type})}});var require_db=__commonJS({"lib-browser-old/constants/db.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.range_states=exports.SUPPORTED_AGGREGATIONS=exports.RetryError=exports.REDIS_ONLY=exports.REDIS_AND_POSTGRES=exports.POSTGRES_AUTOINDEX_KEY=exports.NO_USER=exports.NO_SEARCH_PATH=exports.NO_DB_CONSTRAINTS=exports.NON_AUTHENTICATED_USER_ID=exports.MAX_SEARCH_CHUNK=exports.MAX_GROUPING_CALL=exports.DONT_KNOW=exports.DATA_PANEL_SEARCH_FAKE_EVAL_NODE=exports.CALENDAR_GROUPINGS=exports.BUCKET_GROUPINGS=exports.BATCH_SIZE=exports.ARCHIVED_DB_COUNT=exports.ALL_MAX=exports.ADMIN_USER_ID=void 0;var _safe_require=_interopRequireDefault(require_safe_require());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_safe_require.default.safe_register("./constants/db",exports);var NO_USER="no_user";exports.NO_USER=NO_USER;var NO_SEARCH_PATH="no_search_path";exports.NO_SEARCH_PATH=NO_SEARCH_PATH;var ADMIN_USER_ID="admin_user";exports.ADMIN_USER_ID=ADMIN_USER_ID;var NON_AUTHENTICATED_USER_ID="non_authenticated_user";exports.NON_AUTHENTICATED_USER_ID=NON_AUTHENTICATED_USER_ID;var DATA_PANEL_SEARCH_FAKE_EVAL_NODE="<data admin panel>";exports.DATA_PANEL_SEARCH_FAKE_EVAL_NODE=DATA_PANEL_SEARCH_FAKE_EVAL_NODE;var MAX_SEARCH_CHUNK=400;exports.MAX_SEARCH_CHUNK=MAX_SEARCH_CHUNK;var DONT_KNOW="dontknow";exports.DONT_KNOW=DONT_KNOW;var MAX_GROUPING_CALL=100;exports.MAX_GROUPING_CALL=MAX_GROUPING_CALL;var NO_DB_CONSTRAINTS=["list.date_range","list.number_range","list.geographic_address"];exports.NO_DB_CONSTRAINTS=NO_DB_CONSTRAINTS;var SUPPORTED_AGGREGATIONS=["count","sum","product","average","median","min","max"];exports.SUPPORTED_AGGREGATIONS=SUPPORTED_AGGREGATIONS;var CALENDAR_GROUPINGS=["day","month"];exports.CALENDAR_GROUPINGS=CALENDAR_GROUPINGS;var BUCKET_GROUPINGS=["bucket","day","month"];exports.BUCKET_GROUPINGS=BUCKET_GROUPINGS;var ALL_MAX=1e12;exports.ALL_MAX=ALL_MAX;var ARCHIVED_DB_COUNT=-2;exports.ARCHIVED_DB_COUNT=ARCHIVED_DB_COUNT;var range_states=function(range_states2){return range_states2.LOADING="loading",range_states2.AVAILABLE="available",range_states2.ERROR="error",range_states2.NOT_STARTED="not_started",range_states2.DELETED="deleted",range_states2.PAST_END="past_end",range_states2}({});exports.range_states=range_states;var RetryError=class{};exports.RetryError=RetryError;var REDIS_ONLY="redis-only";exports.REDIS_ONLY=REDIS_ONLY;var REDIS_AND_POSTGRES="redis-and-postgres";exports.REDIS_AND_POSTGRES=REDIS_AND_POSTGRES;var BATCH_SIZE=100;exports.BATCH_SIZE=BATCH_SIZE;var POSTGRES_AUTOINDEX_KEY="postgres_auto_index";exports.POSTGRES_AUTOINDEX_KEY=POSTGRES_AUTOINDEX_KEY}});var require_special_keys=__commonJS({"lib-browser-old/constants/special_keys.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.UNIQUE_ID=exports.RANDOM_SORTING=exports.DYNAMIC_SORTING_FIELD=exports.ALL_DB_FIELDS=exports.ADVANCED_SEARCH_CONSTRAINT=void 0;var _safe_require=_interopRequireDefault(require_safe_require());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_safe_require.default.safe_register("./constants/special_keys",exports);var ALL_DB_FIELDS="_all";exports.ALL_DB_FIELDS=ALL_DB_FIELDS;var ADVANCED_SEARCH_CONSTRAINT="_advanced_search_constraint";exports.ADVANCED_SEARCH_CONSTRAINT=ADVANCED_SEARCH_CONSTRAINT;var UNIQUE_ID="_id";exports.UNIQUE_ID=UNIQUE_ID;var DYNAMIC_SORTING_FIELD="_dynamic_sort_field";exports.DYNAMIC_SORTING_FIELD=DYNAMIC_SORTING_FIELD;var RANDOM_SORTING="_random_sorting";exports.RANDOM_SORTING=RANDOM_SORTING}});var require_es_string_ends_with=__commonJS({"node_modules/core-js/modules/es.string.ends-with.js"(){"use strict";init_define_process_env();init_shim();var $2=require_export(),uncurryThis=require_function_uncurry_this(),getOwnPropertyDescriptor=require_object_get_own_property_descriptor().f,toLength=require_to_length(),toString=require_to_string(),notARegExp=require_not_a_regexp(),requireObjectCoercible=require_require_object_coercible(),correctIsRegExpLogic=require_correct_is_regexp_logic(),IS_PURE=require_is_pure(),un$EndsWith=uncurryThis("".endsWith),slice=uncurryThis("".slice),min=Math.min,CORRECT_IS_REGEXP_LOGIC=correctIsRegExpLogic("endsWith"),MDN_POLYFILL_BUG=!IS_PURE&&!CORRECT_IS_REGEXP_LOGIC&&!!function(){var descriptor=getOwnPropertyDescriptor(String.prototype,"endsWith");return descriptor&&!descriptor.writable}();$2({target:"String",proto:!0,forced:!MDN_POLYFILL_BUG&&!CORRECT_IS_REGEXP_LOGIC},{endsWith:function(searchString){var that=toString(requireObjectCoercible(this));notARegExp(searchString);var endPosition=arguments.length>1?arguments[1]:void 0,len=that.length,end=endPosition===void 0?len:min(toLength(endPosition),len),search=toString(searchString);return un$EndsWith?un$EndsWith(that,search,end):slice(that,end-search.length,end)===search}})}});var require_btypes_registry=__commonJS({"lib-browser-old/lang/btypes_registry.js"(exports){"use strict";init_define_process_env();init_shim();require_es_object_values();require_es_object_entries();var logger=require_logger(),btypes_registry=exports,Registry=class{constructor(){this.items={}}get(name){return this.items[name]}add(name,plugin){name in this.items&&logger.warn("Adding duplicate btype definition",{name}),this.items[name]=plugin}keys(){return Object.keys(this.items)}values(){return Object.values(this.items)}entries(){return Object.entries(this.items)}};btypes_registry.plugins=new Registry;btypes_registry.providers=new Registry}});var require_missing_btype=__commonJS({"lib-browser-old/lang/missing_btype.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_string_starts_with();var missing_btype=module.exports,missing_btype_prefix="Missing btype:",missing_btype_display="Missing type... ";missing_btype.list=()=>[];missing_btype.namespace_prefix=()=>missing_btype_prefix;missing_btype.is_missing=id=>id.startsWith(missing_btype_prefix);missing_btype.strip_prefix=id=>missing_btype.is_missing(id)?id.slice(missing_btype_prefix.length+1):id;missing_btype.get=function(missing_id){let full_id="".concat(missing_btype_prefix," ").concat(missing_id);return{name:missing_id,id:()=>full_id,is_missing:()=>!0,storable:!1,is_simple:!1,can_sort:!1,display:()=>missing_btype_display,display_for_issue(){let display="a non-defined btype";return this.id().indexOf("_current")!==-1&&(display+=" (reinitialize the plugin call)"),display},debugging_display:function(val){return"(Value is of an unknown type ".concat(missing_id," and cannot be displayed)")},matches:val=>val===missing_id||val===full_id,cast:()=>null,get_bubble_null:()=>null,get_message_names:()=>[],get_message:name=>{}}}}});var require_btypes=__commonJS({"lib-browser-old/lang/btypes.js"(exports){"use strict";init_define_process_env();init_shim();require_es_regexp_to_string();require_es_array_iterator();require_web_dom_collections_iterator();require_es_regexp_exec();require_es_string_search();require_es_array_flat_map();require_es_array_unscopables_flat_map();require_es_string_match();require_es_string_replace();require_es_regexp_test();require_es_array_includes();require_es_string_includes();require_es_string_starts_with();require_es_string_ends_with();require_es_symbol_description();var u=require_u2(),decaf=require_decaf(),btype_ids=require_btype_ids(),safe_require=require_safe_require(),Lib=require_lib(),appquery=require_appquery(),caching=require_caching(),logger=require_logger(),btypes_registry=require_btypes_registry(),missing_btype=require_missing_btype(),btypes=exports;safe_require.safe_register("./lang/btypes",btypes);btypes.get=function(id,options){var _id;let{miss_okay}=options!=null?options:{};if((_id=id)!=null&&_id.get_message)return id;if(typeof id!="string"){if(id!=null){var _id2;logger.info("non-string btype_id",{type:typeof id,stringified:(_id2=id)==null?void 0:_id2.toString()})}id="null"}return id!=null&&missing_btype.is_missing(id)?get_raw([missing_btype.strip_prefix(id),miss_okay]):get_raw(id==="date_unix"?["date",miss_okay]:[id,miss_okay])};btypes.is_custom_type=btype_id=>btype_id==="user"||typeof btype_id=="string"&&btype_ids.is_custom_type(btype_id);var get_raw=caching.standalone({type:caching.RUN_MODE,parameters:1},_ref=>{let[id,miss_okay]=_ref;id||(id="null");let app_id=appquery.toUniqueString();return get_btype(id,app_id,miss_okay)});btypes.list=u.autorun_cache(provider_id=>{var _provider$list;if(!provider_id)return btypes_registry.plugins.entries().filter(_ref2=>{let[_,plugin]=_ref2;return!plugin.dont_list}).map(_ref3=>{let[name,_]=_ref3;return btypes.get(name)});let pieces=provider_id.split("."),provider_plugin=Lib().load_plugin(Lib().plugin_prefixes.btype+pieces[0]),path=pieces.slice(1).join(".");return((_provider$list=(path===""?provider_plugin:provider_plugin.get(path)).list())!=null?_provider$list:[]).map(id=>btypes.get(provider_id+"."+id))});btypes.search=function(filter){let basic_btypes=btypes.list(),provider_btypes=btypes_registry.providers.entries().filter(_ref4=>{let[_,def]=_ref4;return typeof def.list=="function"}).flatMap(_ref5=>{let[name,_]=_ref5;return btypes.list(name)});return[...basic_btypes,...provider_btypes].filter(v=>v.matches(filter))};var get_btype=u.autorun_cache(function(id,app_id){let miss_okay=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return new Btype(id,miss_okay)}),Btype=class{constructor(id){let miss_okay=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this._id=typeof id=="string"?id:"null";let[name,...path_parts]=this._id.split("."),path=path_parts.join("."),namespace=Lib().load_plugin(Lib().plugin_prefixes.btype+name,miss_okay),plugin=path!==""?namespace==null?void 0:namespace.get(path):namespace;this.plugin=typeof plugin=="function"?plugin():plugin,this.plugin||(this.plugin=missing_btype.get(this._id))}id(){return this._id}get_message(name){var _this$plugin$get_mess;let m_data=(_this$plugin$get_mess=this.plugin.get_message(name))!=null?_this$plugin$get_mess:{description:" [not found: "+name+"]",not_found:!0,fn:()=>{}};return new btypes.Message(name,m_data,this._id)}get_messages(lookup_only){return decaf.array_from(this.plugin.get_message_names({exclude_special_messages:lookup_only})).map(name=>this.get_message(name))}call(name,a,b,properties){return this.get_message(name).evaluate(a,b,properties)}display(){return this.plugin.display()}display_for_issue(){return typeof this.plugin.display_for_issue=="function"?this.plugin.display_for_issue():this.id()==="null"?"empty":this.display()}is_aggregate(){return this.plugin.is_aggregate}equals(a,b){return this.plugin.equals(a,b)}get_sample(){return this.plugin.get_sample()}get_bubble_null(){return typeof this.plugin.get_bubble_null!="function"?(logger.warn("missing get_bubble_null",{btype:this}),null):this.plugin.get_bubble_null()}cast(data){var _this$plugin$cast;return typeof this.plugin.cast!="function"?data:(_this$plugin$cast=this.plugin.cast(data))!=null?_this$plugin$cast:null}is_missing(){var _this$plugin$is_missi,_this$plugin$is_missi2,_this$plugin;return(_this$plugin$is_missi=(_this$plugin$is_missi2=(_this$plugin=this.plugin).is_missing)==null?void 0:_this$plugin$is_missi2.call(_this$plugin))!=null?_this$plugin$is_missi:!1}from_human(string,context){return this.plugin.from_human?this.plugin.from_human(string,context):this.cast(string)}runmode_display(instance,context){if(!this.plugin.runmode_display){var _window;return(_window=window)!=null&&_window.current_user_is_admin&&console.log("trying to render a ".concat(this.id()," to string, but no V.runmode_display function")),""}return this.plugin.runmode_display(instance,context)}has_runmode_display(){return this.plugin.runmode_display!=null}export_to_string(instance,context){return this.plugin.export_to_string(instance,context)}has_export_to_string(){return this.plugin.export_to_string!=null}debugging_display(instance,context){return this.plugin.debugging_display(instance,context)}has_debugging_display(){return this.plugin.debugging_display!=null}can_sort(){return this.plugin.can_sort}custom_type(){var _this$plugin$custom_t,_this$plugin2;return(_this$plugin$custom_t=(_this$plugin2=this.plugin).custom_type)==null?void 0:_this$plugin$custom_t.call(_this$plugin2)}option_set(){var _this$plugin$option_s,_this$plugin3;return(_this$plugin$option_s=(_this$plugin3=this.plugin).option_set)==null?void 0:_this$plugin$option_s.call(_this$plugin3)}can_get_JS_object(){return this.plugin.get_JS_object!=null?!0:(logger.error("No get_JS_object for btype",{id:this._id}),!1)}get_JS_object(val){return this.plugin.get_JS_object(val)}can_JS_to_bubble(){return this.plugin.JS_to_bubble!=null}JS_to_bubble(val){return this.plugin.JS_to_bubble(val)}matches(str_or_fn){return typeof this.plugin.matches=="function"?this.plugin.matches(str_or_fn):make_matcher(str_or_fn)(this)}synonyms(){if(this.inner()){var _this$inner$plugin$sy;let inner_synonyms=(_this$inner$plugin$sy=this.inner().plugin.synonyms)!=null?_this$inner$plugin$sy:[];return[this.id(),...inner_synonyms.map(i=>btype_ids.list_type(i))]}else{var _this$plugin$synonyms;return[this.id(),...(_this$plugin$synonyms=this.plugin.synonyms)!=null?_this$plugin$synonyms:[]]}}storable(){return this.plugin.storable}bindable(){return this.plugin.bindable}get_composer_input_type(){return this.plugin.composer_input_type}inner(){var _this$plugin$inner,_this$plugin4;return(_this$plugin$inner=(_this$plugin4=this.plugin).inner)==null?void 0:_this$plugin$inner.call(_this$plugin4)}inner_including_ranges(){if(this.plugin.inner)return this.plugin.inner();let range=/_range$/;return this.id().match(range)?btypes.get(this.id().replace(range,"")):this}is_range(){return this.plugin.inner==null&&/_range$/.test(this.id())}is_list(){return this.plugin.is_list}};function mk_not(id){let fn=btype=>btype.id()!==id;return fn.display=()=>"anything but a "+btypes.get(id).display(),fn}function mk_simple(btype1){function fn(btype2){return btype2.synonyms().includes(btype1.id())||btype1.synonyms().includes(btype2.id())}return fn.display=()=>"a "+btype1.display(),fn.display_for_issue=()=>btype1.display_for_issue(),fn}function mk_any(provider_id){let prefix=provider_id+".",fn=btype=>btype.id().startsWith(prefix);return fn.display=()=>"any "+btypes.get(provider_id).display(),fn}function make_matcher(str_or_fn){if(typeof str_or_fn=="object"&&typeof str_or_fn.id=="function")return mk_simple(str_or_fn);if(typeof str_or_fn=="string")return str_or_fn.startsWith("!")?mk_not(str_or_fn.slice(1)):str_or_fn==="list*bindable"?btypes.compound:str_or_fn.endsWith("*")?mk_any(str_or_fn.slice(0,-1)):mk_simple(btypes.get(str_or_fn));if(typeof str_or_fn=="function")return str_or_fn.display||(logger.error("every matcher function must have a display function",{str_or_fn}),str_or_fn.display=()=>"a thing"),str_or_fn;throw new u.UnexpectedError("blank or invalid matcher",{str_or_fn})}btypes.Message=class{constructor(name,M,btype){this.evaluate=this.evaluate.bind(this),this.evaluate_without_cast=this.evaluate_without_cast.bind(this),this._name=name,this.M=M,this.btype=btype,this.fn=this.M.fn}is_not_found(){return this.M.not_found}no_composer(node){var _this$M$no_composer,_this$M;return(_this$M$no_composer=(_this$M=this.M).no_composer)==null?void 0:_this$M$no_composer.call(_this$M,node)}has_args(){return this.M.arg_btype!=null}no_arg_no_properties(){return!this.has_args()&&this.spot_data()!=="SlidableAtom"}public_for_plugins(){return this.M.public_for_plugins}arg_btype(){return this.M.arg_btype?btypes.get(this.M.arg_btype):null}name(){return this._name}ret_btype_id(message_raw){if(typeof this.M.ret_btype=="function")return this.M.ret_btype(message_raw);var _this$M$ret_btype;return(_this$M$ret_btype=this.M.ret_btype)!=null?_this$M$ret_btype:"null"}ret_btype(message_raw){return btypes.get(this.ret_btype_id(message_raw))}check_for_errors(node,report){this.M.check_for_errors&&this.M.check_for_errors(node,report)}ret_btype_null(){return this.ret_btype(...arguments).get_bubble_null()}spot_data(){return this.M.spot_data}fields(static_property,message_node){var _this$M$fields,_this$M$fields2,_this$M2;return(_this$M$fields=(_this$M$fields2=(_this$M2=this.M).fields)==null?void 0:_this$M$fields2.call(_this$M2,static_property,message_node))!=null?_this$M$fields:[]}field_names(){var _this$M$field_names;if(this.M.fields&&!this.M.field_names)throw new u.UnexpectedError("missing field_names for message "+this._name);return(_this$M$field_names=this.M.field_names)!=null?_this$M$field_names:{}}description(node,no_s){let options=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},d=typeof this.M.description=="function"?this.M.description(node,options):this.M.description,initial_s=/^'s /;return no_s&&d.match(initial_s)?d.replace(initial_s,""):d}filter_context(context){if(context.owner_type==="PrivacyRole"){if(this.M.privacy_condition_okay===!1)return!1;let constraint=this.M.build_pg_constraint,binary_constraint=this.M.build_pg_relationship&&this.M.build_pg_r_constraint;return constraint&&(binary_constraint||!this.M.arg_btype)||["and_","or_"].includes(this._name)?!0:this.is_lookup()}let hide_in_states=["format_boolean","format_boolean_number"];return context.owner_type==="State"&&context.is_style&&hide_in_states.includes(this._name)?!1:this.M.filter_context?this.M.filter_context(context):!0}is_lookup(){return this.M.is_lookup}get_lookup_name(){return typeof this.M.is_lookup=="string"?this.M.is_lookup:this._name}evaluate(prev,arg_evaled,properties,_raw,context){let result=this.evaluate_without_cast(prev,arg_evaled,properties,_raw,context);return this.is_lookup()?this.ret_btype(_raw).cast(result):result}evaluate_without_cast(prev,arg_evaled,properties,_raw,context){var _prev$_type;let prev_type=prev==null||(_prev$_type=prev._type)==null?void 0:_prev$_type.call(prev);if(prev_type&&prev_type!==this.btype)return this.ret_btype(_raw).get_bubble_null();if(this.is_lookup()){var _prev$child,_prev$child$call$get,_prev$child$call;return prev==null||(_prev$child=prev.child)==null||(_prev$child$call$get=(_prev$child$call=_prev$child.call(prev,this.get_lookup_name())).get)==null?void 0:_prev$child$call$get.call(_prev$child$call)}else return this.fn(prev,arg_evaled,properties,_raw,context)}build_pg_relationship(col1,col2){return this.M.arg_btype==null?[this._name+" does not take args so no relationship"]:this.M.build_pg_relationship?[null,this.M.build_pg_relationship(col1,col2)]:["no pg relationship for "+this._name]}build_pg_constraint(col,val){return this.M.build_pg_constraint?[null,this.M.build_pg_constraint(col,val)]:["no pg constraint for "+this._name]}build_pg_r_constraint(col,val){return this.M.arg_btype==null?[this._name+" does not take args so no reversed"]:this.M.build_pg_r_constraint?[null,this.M.build_pg_r_constraint(col,val)]:["no pg reversed constraint for "+this._name]}no_frozen_state(_ref6){var _prev$query;let{prev}=_ref6;return(prev==null||(_prev$query=prev.query)==null?void 0:_prev$query.t)==="NodeList"||this.M.no_frozen_state}message_cache_id(_ref7){var _this$M$message_cache,_this$M3;let{raw,properties}=_ref7;return(_this$M$message_cache=(_this$M3=this.M).message_cache_id)==null?void 0:_this$M$message_cache.call(_this$M3,{raw,properties})}can_shortcircuit_args(){return this.M.can_shortcircuit_args}properties_for_pre_evaluation(_ref8){let{_properties}=_ref8;return this.M.properties_for_pre_evaluation?this.M.properties_for_pre_evaluation({_properties}):_properties}};btypes.any=v=>!0;btypes.any.display=()=>"any";btypes.saveable=function(v){var _v$custom_type,_custom_type$deleted;let custom_type=(_v$custom_type=v==null?void 0:v.custom_type())!=null?_v$custom_type:{};return!custom_type.not_writeable&&!((_custom_type$deleted=custom_type.deleted)!=null&&_custom_type$deleted.call(custom_type))&&typeof custom_type.writeable_fields=="function"};btypes.saveable.display=()=>"anything saveable";btypes.saveable.get_name=()=>"saveable";btypes.compound=v=>v&&v.bindable();btypes.compound.display=()=>"any thing";btypes.stringable=v=>(v==null?void 0:v.has_runmode_display())&&v.id()!=="null";btypes.stringable.display=()=>"anything that can be printed as text";btypes.not_built_in=btype_id=>/^(list\.)?custom/.test(btype_id);btypes.not_built_in.display=()=>"anything that is not a built-in type";btypes.display_matcher=function(v){var _val$display_for_issu,_val$display_for_issu2;let val=make_matcher(v);return(_val$display_for_issu=(_val$display_for_issu2=val.display_for_issue)==null?void 0:_val$display_for_issu2.call(val))!=null?_val$display_for_issu:val.display()}}});var require_main=__commonJS({"node_modules/ngeohash/main.js"(exports,module){init_define_process_env();init_shim();var BASE32_CODES="0123456789bcdefghjkmnpqrstuvwxyz",BASE32_CODES_DICT={};for(i=0;i<BASE32_CODES.length;i++)BASE32_CODES_DICT[BASE32_CODES.charAt(i)]=i;var i,encode=function(latitude,longitude,numberOfChars){for(var chars=[],bits=0,bitsTotal=0,hash_value=0,maxlat=90,minlat=-90,maxlon=180,minlon=-180,mid;chars.length<numberOfChars;)if(bitsTotal%2===0?(mid=(maxlon+minlon)/2,longitude>mid?(hash_value=(hash_value<<1)+1,minlon=mid):(hash_value=(hash_value<<1)+0,maxlon=mid)):(mid=(maxlat+minlat)/2,latitude>mid?(hash_value=(hash_value<<1)+1,minlat=mid):(hash_value=(hash_value<<1)+0,maxlat=mid)),bits++,bitsTotal++,bits===5){var code=BASE32_CODES[hash_value];chars.push(code),bits=0,hash_value=0}return chars.join("")},encode_uint64=function(latitude,longitude,bitDepth){bitDepth=bitDepth||52;for(var bitsTotal=0,maxlat=90,minlat=-90,maxlon=180,minlon=-180,mid,combinedBits=0;bitsTotal<bitDepth;)combinedBits*=2,bitsTotal%2===0?(mid=(maxlon+minlon)/2,longitude>mid?(combinedBits+=1,minlon=mid):maxlon=mid):(mid=(maxlat+minlat)/2,latitude>mid?(combinedBits+=1,minlat=mid):maxlat=mid),bitsTotal++;return combinedBits},decode_bbox=function(hash_string){for(var islon=!0,maxlat=90,minlat=-90,maxlon=180,minlon=-180,hash_value=0,i2=0,l=hash_string.length;i2<l;i2++){var code=hash_string[i2].toLowerCase();hash_value=BASE32_CODES_DICT[code];for(var bits=4;bits>=0;bits--){var bit=hash_value>>bits&1;if(islon){var mid=(maxlon+minlon)/2;bit===1?minlon=mid:maxlon=mid}else{var mid=(maxlat+minlat)/2;bit===1?minlat=mid:maxlat=mid}islon=!islon}}return[minlat,minlon,maxlat,maxlon]},decode_bbox_uint64=function(hash_int,bitDepth){bitDepth=bitDepth||52;for(var bitsTotal=0,maxlat=90,minlat=-90,maxlon=180,minlon=-180,lat_bit=0,lon_bit=0,step=bitDepth/2,i2=0;i2<step;i2++)lon_bit=get_bit(hash_int,(step-i2)*2-1),lat_bit=get_bit(hash_int,(step-i2)*2-2),lat_bit===0?maxlat=(maxlat+minlat)/2:minlat=(maxlat+minlat)/2,lon_bit===0?maxlon=(maxlon+minlon)/2:minlon=(maxlon+minlon)/2;return[minlat,minlon,maxlat,maxlon]};function get_bit(bits,position){return bits/Math.pow(2,position)&1}var decode=function(hash_string){var bbox=decode_bbox(hash_string),lat=(bbox[0]+bbox[2])/2,lon=(bbox[1]+bbox[3])/2,laterr=bbox[2]-lat,lonerr=bbox[3]-lon;return{latitude:lat,longitude:lon,error:{latitude:laterr,longitude:lonerr}}},decode_uint64=function(hash_int,bitDepth){var bbox=decode_bbox_uint64(hash_int,bitDepth),lat=(bbox[0]+bbox[2])/2,lon=(bbox[1]+bbox[3])/2,laterr=bbox[2]-lat,lonerr=bbox[3]-lon;return{latitude:lat,longitude:lon,error:{latitude:laterr,longitude:lonerr}}},neighbor=function(hashstring,direction){var lonlat=decode(hashstring),neighbor_lat=lonlat.latitude+direction[0]*lonlat.error.latitude*2,neighbor_lon=lonlat.longitude+direction[1]*lonlat.error.longitude*2;return encode(neighbor_lat,neighbor_lon,hashstring.length)},bboxes=function(minLat,minLon,maxLat,maxLon,numberOfChars){numberOfChars=numberOfChars||9;for(var hashSouthWest=encode(minLat,minLon,numberOfChars),hashNorthEast=encode(maxLat,maxLon,numberOfChars),latlon=decode(hashSouthWest),perLat=latlon.error.latitude*2,perLon=latlon.error.longitude*2,boxSouthWest=decode_bbox(hashSouthWest),boxNorthEast=decode_bbox(hashNorthEast),latStep=Math.round((boxNorthEast[0]-boxSouthWest[0])/perLat),lonStep=Math.round((boxNorthEast[1]-boxSouthWest[1])/perLon),hashList=[],lat=0;lat<=latStep;lat++)for(var lon=0;lon<=lonStep;lon++)hashList.push(neighbor(hashSouthWest,[lat,lon]));return hashList},geohash={encode,encode_uint64,decode,decode_uint64,decode_bbox,decode_bbox_uint64,neighbor,bboxes};module.exports=geohash}});var require_geolocation=__commonJS({"lib-browser-old/constants/geolocation.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.SERVER_SIDE_MAX_REQUEST_PER_MINUTE=exports.SAMPLE_VALUE_FRANCE=exports.SAMPLE_VALUE=exports.MAP_MAX_REQUEST_PER_MINUTE=exports.GEOHASH_PRECISION=exports.AUTOCOMPLETE_SERVER_SIDE_MAX_REQUEST_PER_MINUTE=void 0;var SAMPLE_VALUE={lat:40.72743,lng:-74.00595,address:"175 Varick Street, New York, NY 10014, USA",components:{"street number":"175",street:"Varick Street",neighborhood:"Lower Manhattan",city:"New York","state code":"NY",state:"New York",county:"New York County","zip code":"10014",country:"United States","country code":"US"}};exports.SAMPLE_VALUE=SAMPLE_VALUE;var SAMPLE_VALUE_FRANCE={lat:49.19973,lng:.21102,address:"Coquainvilliers, France",components:{city:"Coquainvilliers","state code":"Lower Normandy",state:"Lower Normandy",country:"France","country code":"FR"}};exports.SAMPLE_VALUE_FRANCE=SAMPLE_VALUE_FRANCE;var MAP_MAX_REQUEST_PER_MINUTE=2;exports.MAP_MAX_REQUEST_PER_MINUTE=MAP_MAX_REQUEST_PER_MINUTE;var SERVER_SIDE_MAX_REQUEST_PER_MINUTE=6;exports.SERVER_SIDE_MAX_REQUEST_PER_MINUTE=SERVER_SIDE_MAX_REQUEST_PER_MINUTE;var AUTOCOMPLETE_SERVER_SIDE_MAX_REQUEST_PER_MINUTE=12;exports.AUTOCOMPLETE_SERVER_SIDE_MAX_REQUEST_PER_MINUTE=AUTOCOMPLETE_SERVER_SIDE_MAX_REQUEST_PER_MINUTE;var GEOHASH_PRECISION=15;exports.GEOHASH_PRECISION=GEOHASH_PRECISION}});var require_b_location_utils=__commonJS({"lib-browser-old/geolocation/shared/b_location_utils.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.geographic_distance=geographic_distance;exports.google_fields=void 0;exports.is_b_location=is_b_location;exports.is_hashed=is_hashed;exports.rehydrate_b_location=rehydrate_b_location;exports.round_lat_lng=round_lat_lng;exports.to_json_components=to_json_components;require_es_regexp_exec();require_es_regexp_test();require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_includes();require_es_string_includes();var hydrate2=_interopRequireWildcard(require_hydrate()),_lib=_interopRequireDefault(require_lib()),_appquery=_interopRequireDefault(require_appquery()),_eval=require_eval(),_geolocation=require_geolocation();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function is_hashed(hash){if(typeof hash!="string"||hash.length<=_geolocation.GEOHASH_PRECISION)return!1;let first_sep=hash.indexOf("/");if(first_sep===-1||first_sep!==_geolocation.GEOHASH_PRECISION)return!1;let maybe_hash_coordinates=hash.substring(0,_geolocation.GEOHASH_PRECISION);return!/[^0-9b-hjkmnp-z]/.test(maybe_hash_coordinates)}function is_b_location(location2){return location2!=null&&location2.lat!=null&&location2.lng!=null}var google_fields={"room number":{google_field:"room"},floor:{},"street number":{google_field:"street_number"},street:{google_field:"route"},neighborhood:{},premise:{},subpremise:{},city:{google_field:["locality","sublocality","postal_town"]},"state code":{google_field:"administrative_area_level_1",short:!0},state:{google_field:"administrative_area_level_1"},county:{google_field:"administrative_area_level_2"},"zip code":{google_field:"postal_code"},country:{},"country code":{google_field:"country",short:!0}};exports.google_fields=google_fields;function to_json_components(address){let res={};for(let field in google_fields){let find=function(){for(let google_field of possible_google_fields)for(let component of address.address_components)if(component.types.includes(google_field))return field_data.short?component.short_name:component.long_name;return null};var _field_data$google_fi;let field_data=google_fields[field],possible_google_fields=(_field_data$google_fi=field_data.google_field)!=null?_field_data$google_fi:field;Array.isArray(possible_google_fields)||(possible_google_fields=[possible_google_fields]);let val=find();val!=null&&(res[field]=val)}return res}function rehydrate_b_location(address){return typeof address!="string"||!address.includes(_eval.HYDRATE_STRING)?address:hydrate2.rehydrate_tree(_lib.default.or_throw().db_instance(_appquery.default.appname(),_appquery.default.app_version()),address)}function round_lat_lng(data){data!=null&&data.lat&&data!=null&&data.lng&&(data.lat=Math.floor(data.lat*1e4)/1e4,data.lng=Math.floor(data.lng*1e4)/1e4)}function geographic_distance(point1,point2,unit){let R;unit==="miles"?R=3958:R=6371;let toRad=value=>value*Math.PI/180,dLat=toRad(point2.lat-point1.lat),dLon=toRad(point2.lng-point1.lng),lat1=toRad(point1.lat),lat2=toRad(point2.lat),a=Math.sin(dLat/2)*Math.sin(dLat/2)+Math.sin(dLon/2)*Math.sin(dLon/2)*Math.cos(lat1)*Math.cos(lat2),c=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return R*c}}});var require_shared_core=__commonJS({"lib-browser-old/geolocation/shared/shared_core.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.get_from_cache=get_from_cache;exports.request_geocode=request_geocode;var address_localization_cache={};function get_from_cache(data,hasher){let key=hasher(data);return address_localization_cache[key]}function request_geocode(data,raw_resp_to_obj,extra_args,localization_hasher,request_geocode_impl){let hash=localization_hasher(data);return address_localization_cache[hash]||request_geocode_impl(data,raw_resp_to_obj,result=>{address_localization_cache[hash]=result,result!=null&&(address_localization_cache[result.address]=result)},extra_args),address_localization_cache[hash]}}});var require_core2=__commonJS({"lib-browser-old/geolocation/core.js"(exports){"use strict";init_define_process_env();init_shim();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.init=init;exports.request_autocomplete=request_autocomplete;exports.request_from_cache=request_from_cache;exports.request_geocode=request_geocode;exports.request_timezone=request_timezone;require_es_symbol_description();require_es_error_cause();var _errors=require_errors(),shared_utils=_interopRequireWildcard(require_shared_core());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var implementations;function request_timezone(data){if(implementations===void 0)throw new _errors.UnexpectedError("Request Timezone Called before init");return implementations.request_timezone(data)}function request_autocomplete(data,cb){if(implementations===void 0)throw new _errors.UnexpectedError("Request Autocomplete called before init!");return implementations.request_autocomplete(data,cb)}function request_from_cache(data){if(implementations===void 0)throw new _errors.UnexpectedError("Request from cache called before init!");return shared_utils.get_from_cache(data,implementations.localization_hasher)}function request_geocode(data,raw_resp_to_obj,extra_args){if(implementations===void 0)throw new _errors.UnexpectedError("Request Geocode Called Before Init!");return shared_utils.request_geocode(data,raw_resp_to_obj,extra_args,implementations.localization_hasher,implementations.request_geocode)}function init(category,new_implementations){if(implementations!==void 0&&implementations.prev_category!==category)throw new _errors.UnexpectedError("Conflicting initializes called!",{category,prev_category:implementations.prev_category});implementations=_objectSpread(_objectSpread({},new_implementations),{},{prev_category:category})}}});var require_b_location=__commonJS({"lib-browser-old/geolocation/b_location.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_symbol_description();require_es_error_cause();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});var _exportNames={ensure_valid_location:!0,convert_to_old_format:!0,convert_to_new_format:!0,is_equal:!0,get_address:!0,get_components:!0,from_address:!0,from_place_id:!0};exports.convert_to_new_format=convert_to_new_format;exports.convert_to_old_format=convert_to_old_format;exports.ensure_valid_location=ensure_valid_location;exports.from_address=from_address;exports.from_place_id=from_place_id;exports.get_address=get_address;exports.get_components=get_components;exports.is_equal=is_equal;require_es_json_stringify();var _lib=_interopRequireDefault(require_lib()),geohash=_interopRequireWildcard(require_main()),_safe_require=_interopRequireDefault(require_safe_require()),_b_location_utils=require_b_location_utils();Object.keys(_b_location_utils).forEach(function(key){key==="default"||key==="__esModule"||Object.prototype.hasOwnProperty.call(_exportNames,key)||key in exports&&exports[key]===_b_location_utils[key]||Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _b_location_utils[key]}})});var _geolocation=require_geolocation(),_core=require_core2(),_logger=require_logger();function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}_safe_require.default.safe_register("./geolocation/b_location",module.exports);function ensure_valid_location(address,skip_components){return(0,_b_location_utils.is_hashed)(address)?convert_to_new_format(address,skip_components):(0,_b_location_utils.is_b_location)(address)?address:null}function convert_to_old_format(address){var _address$address;let precise_round=(num,decimals)=>Math.round(num*Math.pow(10,decimals))/Math.pow(10,decimals),components;return address.components?components="/"+JSON.stringify(address.components):address.address!=null?components="/"+JSON.stringify(get_components(address)):components="",geohash.encode(precise_round(address.lat,5),precise_round(address.lng,5),_geolocation.GEOHASH_PRECISION)+"/"+((_address$address=address.address)!=null?_address$address:"")+components}function convert_to_new_format(hash,skip_components){let hash_coordinates=hash.split("/")[0],{latitude,longitude}=geohash.decode(hash_coordinates),address=hash.split("/")[1],components;return skip_components||(components=get_components({lat:latitude,lng:longitude,address})),{lat:latitude,lng:longitude,address,components}}function is_equal(a,b){let validA=ensure_valid_location(a);validA!=null&&(a=validA.address);let validB=ensure_valid_location(b);return validB&&(b=validB.address),a===b}function _extract_component(location2,extract_fn,throw_not_ready){var _throw_not_ready;return location2==null||location2===""?extract_fn(null):((0,_b_location_utils.is_hashed)(location2)&&(location2=convert_to_new_format(location2)),extract_fn(location2)?(typeof location2=="string"&&(0,_logger.info)("Unexpected, successfully extracted from string!",{location:location2}),extract_fn(location2)):((_throw_not_ready=throw_not_ready)!=null||(throw_not_ready=!1),extract_fn(typeof location2=="string"?_get_location_obj("geocode",{address:location2},{throw_not_ready}):_get_location_obj("geocode_latlong",location2,{throw_not_ready}))))}function get_address(location2){return _extract_component(location2,res=>{var _res$address;return(_res$address=res==null?void 0:res.address)!=null?_res$address:""})}function get_components(location2,throw_not_ready){return _extract_component(location2,res=>res==null?void 0:res.components,throw_not_ready)}function from_address(address,alert_on_failure){var _alert_on_failure;return(_alert_on_failure=alert_on_failure)!=null||(alert_on_failure=!1),ensure_valid_location(address)?ensure_valid_location(address):address===""||typeof address!="string"?address:_get_location_obj("geocode",{address},{alert_on_failure})}function from_place_id(place_id,alert_on_failure){var _alert_on_failure2;return(_alert_on_failure2=alert_on_failure)!=null||(alert_on_failure=!1),place_id===""||typeof place_id!="string"?place_id:_get_location_obj("geocode",{place_id},{alert_on_failure})}function _get_location_obj(type,data,extra_args){var _extra_args;if((_extra_args=extra_args)!=null||(extra_args={}),data.place_id==null&&data.address==null&&data.lat==null&&data.lng==null)return null;let request=_objectSpread({request_type:type,language:_lib.default.or_throw().app_language()},data);(0,_b_location_utils.round_lat_lng)(request);function raw_response_to_obj(result){let{formatted_address}=result,components=(0,_b_location_utils.to_json_components)(result);function get_coord(value){return typeof value=="function"?value():value}return{lat:get_coord(result.geometry.location.lat),lng:get_coord(result.geometry.location.lng),address:formatted_address,placeId:result.place_id,components}}return(0,_core.request_geocode)(request,raw_response_to_obj,extra_args)}}});var require_query_planner=__commonJS({"lib-browser-old/db/query_planner.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.use_geographic_sorting=exports.sort_constraints=exports.can_sort_locally=exports.can_execute_in_memory=exports.add_bad_in_memory_sort=exports.QueryPlanner=void 0;require_es_array_sort();require_es_json_stringify();require_es_array_includes();require_es_array_iterator();require_web_dom_collections_iterator();var mode_check=_interopRequireWildcard(require_mode_check()),hydrate2=_interopRequireWildcard(require_hydrate()),db_consts=_interopRequireWildcard(require_db()),special_keys=_interopRequireWildcard(require_special_keys()),_btypes=_interopRequireDefault(require_btypes()),b_location=_interopRequireWildcard(require_b_location());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var IN_MEMORY_SIZE=100,MAX_BATCHES=3,sort_constraints=function(constraints){return constraints.sort((a,b)=>{var _a$value,_b$value;let can_a=can_execute_in_memory(a),can_b=can_execute_in_memory(b);if(can_a!==can_b)return can_a?1:-1;let a_key=String(a.key)+a.constraint_type+JSON.stringify(hydrate2.dehydrate_tree((_a$value=a.value)!=null?_a$value:null)),b_key=String(b.key)+b.constraint_type+JSON.stringify(hydrate2.dehydrate_tree((_b$value=b.value)!=null?_b$value:null));return a_key<b_key?-1:b_key<a_key?1:0}),constraints};exports.sort_constraints=sort_constraints;var constrain_equivalent={equals:!0,"not equal":!0,is_empty:!0,is_not_empty:!0,in:!0,"not in":!0,contains:!0,"not contains":!0,empty:!0,"not empty":!0,"greater than":!0,gte:!0,"less than":!0,lte:!0,"not true":!0},can_execute_in_memory=function can_execute_in_memory2(constraint){if(constraint.key===special_keys.ADVANCED_SEARCH_CONSTRAINT)return!0;if(["or","and"].includes(constraint.constraint_type)){for(let sub of constraint.opts)if(!can_execute_in_memory2(sub))return!1;return!0}return constrain_equivalent[constraint.constraint_type]};exports.can_execute_in_memory=can_execute_in_memory;var use_geographic_sorting=function(type,sorts_list){for(let sort_item of sorts_list!=null?sorts_list:[]){if(sort_item.sort_field==null||typeof sort_item.sort_field!="object")continue;let message=_btypes.default.get(type).get_message(sort_item.sort_field.location_field);if(!(!message||message.ret_btype().id()!=="geographic_address")&&b_location.ensure_valid_location(sort_item.sort_field.geo_reference,!0))return!0}return!1};exports.use_geographic_sorting=use_geographic_sorting;var bad_in_memory_sorts=[],add_bad_in_memory_sort=sort=>bad_in_memory_sorts.push(sort);exports.add_bad_in_memory_sort=add_bad_in_memory_sort;var can_sort_locally=function(type,sorts_list,constraints){if(use_geographic_sorting(type,sorts_list))return!1;for(let sort of sorts_list!=null?sorts_list:[])if(sort.sort_field===special_keys.RANDOM_SORTING)return!1;if(bad_in_memory_sorts.length>0){let stringified=JSON.stringify({type,sorts_list,constraints});for(let sort of bad_in_memory_sorts)if(sort===stringified)return!1}return!0};exports.can_sort_locally=can_sort_locally;var QueryPlanner=class{constructor(){this.root=void 0,this.root={}}update(type,constraints,sorts_list,stats,only_if_greater){var _this$root,_this$root$type;sort_constraints(constraints);let node=(_this$root$type=(_this$root=this.root)[type])!=null?_this$root$type:_this$root[type]={type,constraints:[]};for(let idx=0;idx<constraints.length;idx++){var _node,_node$children,_node$children2,_JSON$stringify,_node$children2$_JSON;let constraint=constraints[idx];(_node$children=(_node=node).children)!=null||(_node.children={}),node=(_node$children2$_JSON=(_node$children2=node.children)[_JSON$stringify=JSON.stringify(constraint)])!=null?_node$children2$_JSON:_node$children2[_JSON$stringify]={type,constraints:constraints.slice(0,+idx+1||void 0)}}if(sorts_list!=null){var _node2,_node2$searches,_node$searches,_JSON$stringify2,_node$searches$_JSON$;(_node2$searches=(_node2=node).searches)!=null||(_node2.searches={}),node=(_node$searches$_JSON$=(_node$searches=node.searches)[_JSON$stringify2=JSON.stringify(sorts_list)])!=null?_node$searches$_JSON$:_node$searches[_JSON$stringify2]={type,constraints,sorts_list}}if(stats.from!=null){var _node3,_node3$from,_node4,_node4$has_gaps,_node$from;(_node3$from=(_node3=node).from)!=null||(_node3.from=node.loaded),(_node4$has_gaps=(_node4=node).has_gaps)!=null||(_node4.has_gaps=node.loaded!=null&&(stats.from>node.loaded+1||node.from>stats.loaded+1)),node.from=Math.min((_node$from=node.from)!=null?_node$from:1/0,stats.from)}for(let k in stats){let v=stats[k];k!=="from"&&(!only_if_greater||node[k]==null||v>node[k])&&(node[k]=v)}}get_stats(type,constraints,sorts_list){sort_constraints(constraints);let node=this.root[type];if(node==null)return null;for(let idx=0;idx<constraints.length;idx++){var _node$children3;let constraint=constraints[idx];if(!((_node$children3=node.children)!=null&&_node$children3[JSON.stringify(constraint)]))return null;node=node.children[JSON.stringify(constraint)]}if(sorts_list!=null){var _node$searches2,_node$searches3;return(_node$searches2=node.searches)!=null&&_node$searches2[JSON.stringify(sorts_list)]?(_node$searches3=node.searches)==null?void 0:_node$searches3[JSON.stringify(sorts_list)]:null}else return node}node_to_search(node,default_sorts_list){var _node$sorts_list;return{t:"CallSearch",type:node.type,constraints:node.constraints,sorts_list:(_node$sorts_list=node.sorts_list)!=null?_node$sorts_list:default_sorts_list}}pick_search(type,constraints,sorts_list,n){sort_constraints(constraints);let sort_must_match=!can_sort_locally(type,sorts_list,constraints),sort_key=JSON.stringify(sorts_list),check_node=(node,remaining_idx,skipped)=>{let can_return_this_node,s_node,make_leftover=()=>skipped.concat(constraints.slice(remaining_idx));if(constraints[remaining_idx]&&!can_execute_in_memory(constraints[remaining_idx])?can_return_this_node=!1:can_return_this_node=!0,node.length!=null&&node.length<IN_MEMORY_SIZE&&can_return_this_node){if(!node.searches)return[node,make_leftover(),!0];if(node.searches[sort_key])return[node.searches[sort_key],make_leftover(),!0];if(!sort_must_match)for(let k in node.searches)return[node.searches[k],make_leftover(),!0]}if(node.children&&constraints.length>remaining_idx){let best=null;for(let idx=remaining_idx;idx<constraints.length;++idx)if(node.children[JSON.stringify(constraints[idx])]){let new_node=node.children[JSON.stringify(constraints[idx])],new_idx=idx+1,new_skipped=skipped.concat(constraints.slice(remaining_idx,idx)),bad_skip=!1;for(let c of new_skipped)if(!can_execute_in_memory(c)){bad_skip=!0;break}if(bad_skip)break;let res2=check_node(new_node,new_idx,new_skipped);if(res2!=null){if(res2[2])return res2;(best==null||res2[1].length<best[1].length)&&(best=res2)}}if(best!=null)return best}if(node.searches&&can_return_this_node)for(let s_key in node.searches){var _s_node$loaded,_s_node$loaded2;if(s_node=node.searches[s_key],sort_must_match&&s_key!==sort_key)continue;let{loading_to}=s_node;if(node.length!=null&&node.length<s_node.loading_to&&(loading_to=node.length),(loading_to-((_s_node$loaded=s_node.loaded)!=null?_s_node$loaded:0))/db_consts.MAX_SEARCH_CHUNK>MAX_BATCHES)continue;if(node.length==null&&mode_check.on_client()){if(n!=null&&n<IN_MEMORY_SIZE)continue;if(s_node.loaded<IN_MEMORY_SIZE)return[s_node,make_leftover(),!1];continue}let more_to_load=node.length-((_s_node$loaded2=s_node.loaded)!=null?_s_node$loaded2:0);if(!(n!=null&&more_to_load>1.5*n)){if(s_node.loading_to>node.length*.5&&more_to_load<MAX_BATCHES*db_consts.MAX_SEARCH_CHUNK)return[s_node,make_leftover(),!1];if(more_to_load<2*IN_MEMORY_SIZE)return[s_node,make_leftover(),!1]}}return null},res=this.root[type]?check_node(this.root[type],0,[]):null,leftover,search;if(res!=null){let node;[node,leftover]=res,search=this.node_to_search(node,sorts_list)}else leftover=[],search={t:"CallSearch",type,constraints,sorts_list};return{search,leftover}}};exports.QueryPlanner=QueryPlanner}});var require_state_keys=__commonJS({"lib-browser-old/lang/evaluation/state_keys.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_object_values();require_es_json_stringify();var u=require_u2(),hydrate2=require_hydrate(),query_planner=require_query_planner(),safe_require=require_safe_require(),MESSAGE_PREFIX="Message_",ELEMENT_PARENT_KEY="ElementParent",ELEMENT_ANCESTOR_KEY="ElementAncestor";function turn_search_properties_into_a_json(type,constraints,sorts_list){return u.json_stringify(hydrate2.dehydrate_tree({type,constraints:query_planner.sort_constraints(Object.values(constraints!=null?constraints:{}).filter(item=>item!=null)),sorts_list}))}module.exports={CurrentUser:()=>"CurrentUser",Message(_ref){var _prev,_arg,_properties,_additional;let{prev,arg,message,properties,additional,prior_btype_id}=_ref;(_prev=prev)!=null||(prev=null),(_arg=arg)!=null||(arg=null),(_properties=properties)!=null||(properties={}),(_additional=additional)!=null||(additional="");let key_components=[u.json_stringify(hydrate2.dehydrate_tree(prev)),message,u.json_stringify(hydrate2.dehydrate_tree(arg)),u.json_stringify(hydrate2.dehydrate_tree(properties)),additional,prior_btype_id];return MESSAGE_PREFIX+key_components.join("_")},CurrentPageItem:()=>"CurrentPageItem",CurrentWorkflowItem:()=>null,PageData(name){return name==="Current Date/Time"?null:"PageData_"+name},APIEventParameter:key=>"APIEventParameter_"+key,ElementParent:()=>ELEMENT_PARENT_KEY,ElementAncestor:()=>ELEMENT_ANCESTOR_KEY,CurrentCellsIndex:()=>"CurrentCellsIndex",ThisElement(){},PreviousStep:action_id=>"PreviousStep_"+action_id,Search:(type,constraints,sorts_list)=>"Search_"+turn_search_properties_into_a_json(type,constraints,sorts_list),GetDataFromAPI:properties=>"GetDataFromAPI_"+JSON.stringify(hydrate2.dehydrate_tree(properties)),ArbitraryText:properties=>"ArbitraryText_"+JSON.stringify(hydrate2.dehydrate_tree(properties))};safe_require.safe_register("./lang/evaluation/state_keys",module.exports)}});var require_evaluate=__commonJS({"lib-browser-old/lang/evaluation/evaluate.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_reduce();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.reduce=exports.make_partial_expression_evaluator=exports.evaluate_properties=exports.evaluate_json=exports.evaluate=exports.create_reduced=void 0;require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_includes();require_web_dom_collections_for_each();require_es_object_entries();var _isEqual=_interopRequireDefault(require_isEqual()),u=_interopRequireWildcard(require_u2()),b_fiber=_interopRequireWildcard(require_b_fiber()),hydrate2=_interopRequireWildcard(require_hydrate()),logger=_interopRequireWildcard(require_logger()),investigations=_interopRequireWildcard(require_investigations()),eval_consts=_interopRequireWildcard(require_eval()),lang_consts=_interopRequireWildcard(require_lang()),nodes=_interopRequireWildcard(require_nodes()),expression_utils=_interopRequireWildcard(require_expression_utils()),_json_utils=require_json_utils(),db_values=_interopRequireWildcard(require_db_values()),eval_node_state=_interopRequireWildcard(require_eval_node_state()),state_keys=_interopRequireWildcard(require_state_keys()),btypes=_interopRequireWildcard(require_btypes()),_lib=_interopRequireDefault(require_lib()),b_location=_interopRequireWildcard(require_b_location()),shrink=_interopRequireWildcard(require_shrink()),_node_types=_interopRequireDefault(require_node_types());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var{S}=shrink,MUST_REDUCE={},evaluate_properties=function(_raw,context,field_names){var _raw2;(_raw2=_raw)!=null||(_raw={});let props={};if(field_names===lang_consts.DETECT_FIELD_NAMES)for(let k in _raw){let v=_raw[k],[result,value_id]=evaluate(v,context,null,null);if(value_id==="reduced")return MUST_REDUCE;props[shrink.expand(k)]=result}else for(let name in field_names){let expr=_raw[shrink.shrink(name)],field_default=field_names[name].default;switch(field_names[name].prop_type){case eval_consts.EVAL_TYPE.thunk:props[name]=inner_context=>{var _inner_context;(_inner_context=inner_context)!=null||(inner_context=context);let[result,value_id]=evaluate(expr,inner_context,null,field_default);return value_id==="reduced"?MUST_REDUCE:result};break;case eval_consts.EVAL_TYPE.skip:continue;case eval_consts.EVAL_TYPE.value:default:{let[result,value_id]=evaluate(expr,context,null,field_default);if(value_id==="reduced")return MUST_REDUCE;props[name]=result}}}return props};exports.evaluate_properties=evaluate_properties;var evaluate_json=(json,context,prev,default_value)=>evaluate(json._raw(),context,prev,default_value);exports.evaluate_json=evaluate_json;var evaluate=function(_raw,context,prev,default_value,prior_btype_id){if(_raw==null)return[default_value,"null"];let type=_raw[S.type];if(type)switch(type){case"Empty":return[default_value,"null"];case"Message":return eval_message(_raw,context,prev,prior_btype_id);case"TextExpression":return eval_text_expression(_raw,context);case"GeoAddress":return eval_geo_address(_raw);default:return type==="InjectedValue"&&context.reduce_mode?reduce_injected(_raw,context):eval_data_source(type,_raw,context)}return typeof _raw=="object"?eval_object_literal(_raw,context):[_raw,expression_utils.lit_eval_value(typeof _raw)]};exports.evaluate=evaluate;var reduce=function(_raw,context,return_simple){context=u.extend({},context,{reduce_mode:!0}),context.duplicated_from_context=context.object_id,context.object_id=u.UUID(),context.duplicated_at="evaluate.reduce";let[result,value_id]=evaluate(_raw,context,null,null);return return_simple?unpack_reduced(result):create_reduced(result,value_id)};exports.reduce=reduce;function eval_geo_address(_raw){return[b_location.ensure_valid_location(_raw[S.val]),"geographic_address"]}function eval_text_expression(_raw,context){let entries=_raw[S.entries],_entry_names=(0,_json_utils.raw_to_child_names)(entries),unjoined=[],unjoined_reduced=[],_reduced=!1;for(let _entry_name of _entry_names){let entry=entries[_entry_name],[evaled,value_id]=evaluate(entry,context,null,null);if(value_id==="reduced")_reduced=!0;else{let btype=btypes.get(value_id),has_runmode_display=btype.has_runmode_display(),casted_entry=has_runmode_display?btype.runmode_display(evaled,context):"";if(!has_runmode_display&&u.is_debug_mode()&&btype.id()!=="null"){var _owner$field;let can_call_field_method=value=>value==null?void 0:value.fields,eval_node=eval_node_state.get_current_eval_node(),owner=eval_node==null?void 0:eval_node.owner,context_element=eval_node==null?void 0:eval_node.context_element(),property_name=can_call_field_method(owner)?"property ".concat(String((_owner$field=owner.field(eval_node.node_name()))==null?void 0:_owner$field.caption)):"a property";logger.owner_warn("trying to display a text value that cannot be displayed as text",{display:'"'.concat(String(context_element==null?void 0:context_element.display()),'" - parts of property ').concat(property_name," cannot be displayed as text, and will be omitted.")})}unjoined.push(casted_entry)}unjoined_reduced.push([evaled,value_id])}return _reduced?[{[S.type]:"TextExpression",[S.entries]:unjoined_reduced.map(_ref=>{let[evaled,value_id]=_ref;return create_reduced(evaled,value_id)})},"reduced"]:[unjoined.join(""),"text"]}function eval_object_literal(_raw,context){if(hydrate2.is_json_class(_raw))return[_raw];let res={},reduced={},_reduced=!1;for(let k in _raw){let v=_raw[k],[evaled,value_id]=evaluate(v,context,null,null);value_id==="reduced"&&(_reduced=!0),res[shrink.expand(k)]=evaled,reduced[k]=[evaled,value_id]}if(_reduced){let reduced_res={};for(let k in reduced){let[evaled,value_id]=reduced[k];reduced_res[k]=create_reduced(evaled,value_id)}return[reduced_res,"reduced"]}else return[res]}function eval_live_expression(state_key,_eval,ret_btype_id,_raw,context){function do_eval(){var _eval2;let v1=(_eval2=_eval())!=null?_eval2:null;if(v1!=null&&v1[eval_consts.NV_MARKER])return;let my_value=btypes.get(ret_btype_id),casted_result=my_value.cast(v1);if(!(0,_isEqual.default)(v1,casted_result)){var _v1$constructor$name,_casted_result$constr,_eval_node_state$get_;logger.warn("cast resulted in change",{cast:{before:v1,before_constructor:(_v1$constructor$name=v1==null?void 0:v1.constructor.name)!=null?_v1$constructor$name:typeof v1,before_to_string:String(v1),after:casted_result,after_constructor:(_casted_result$constr=casted_result==null?void 0:casted_result.constructor.name)!=null?_casted_result$constr:typeof casted_result,after_to_string:String(casted_result),value_id:my_value.id()},state_key,_raw,current_eval_node:(_eval_node_state$get_=eval_node_state.get_current_eval_node())==null?void 0:_eval_node_state$get_.serialize()})}return casted_result}let val,{frozen_state}=context;!state_key||!frozen_state?val=do_eval():frozen_state.has_key(state_key)?val=frozen_state.get(state_key):(val=do_eval(),frozen_state.set(state_key,val),frozen_state.trust(state_key));let next=_raw[S.next];return next!=null?evaluate(next,context,val,null,ret_btype_id):[val,ret_btype_id]}function reduce_bool(message_name,bool,raw,next,context){bool!==!0&&(bool=!1);let ret_btype_id,val;return message_name==="and_"&&bool===!1?(val=!1,ret_btype_id="sys.bool"):message_name==="or_"&&bool===!0?(val=!0,ret_btype_id="sys.bool"):(val=raw,ret_btype_id="reduced"),next!=null?evaluate(next,context,val,null,ret_btype_id):[val,ret_btype_id]}function eval_message(_raw,context,prev,prior_btype_id){var _message$ret_btype$_i,_message$ret_btype;let message_name=_raw[S.name],parent_value=prior_btype_id!=="reduced"?btypes.get(prior_btype_id):void 0,message=parent_value==null?void 0:parent_value.get_message(message_name),ret_btype_id=(_message$ret_btype$_i=message==null||(_message$ret_btype=message.ret_btype(_raw))==null?void 0:_message$ret_btype._id)!=null?_message$ret_btype$_i:"null",can_shortcircuit_args=message==null?void 0:message.can_shortcircuit_args(),can_do_shorthand=can_shortcircuit_args==null?void 0:can_shortcircuit_args(prev),_args=_raw[S.args],arg_evaled,arg_btype_id;if(can_do_shorthand?[arg_evaled,arg_btype_id]=[null,"null"]:_args!=null&&([arg_evaled,arg_btype_id]=evaluate(_args,context,null,null)),arg_btype_id==="reduced"||prior_btype_id==="reduced"){if(["and_","or_"].includes(message_name)&&(arg_btype_id!=="reduced"||prior_btype_id!=="reduced")){let bool,raw;return arg_btype_id!=="reduced"?(bool=unpack_reduced(arg_evaled),raw=prev):(bool=unpack_reduced(prev),raw=arg_evaled),reduce_bool(message_name,bool,raw,_raw[S.next],context)}return prev=create_reduced(prev,prior_btype_id),reduce_message(_raw,context,prev)}if(!message||message.is_not_found())return[null,"null"];if(message.ret_btype==null?logger.warn("message missing ret_btype"):message.ret_btype().cast||logger.warn("message has a ret_btype that cannot cast"),typeof message.field_names!="function")throw new u.UnexpectedError("Message does not have field_names()",{message_name,prior_btype_id,field_names:message.field_names});let _properties=message.properties_for_pre_evaluation({_properties:_raw[S.properties]}),names=message.field_names(),properties=evaluate_properties(_properties,context,names);if(properties===MUST_REDUCE)return prev=create_reduced(prev,prior_btype_id),reduce_message(_raw,context,prev);let state_key;if(message.no_frozen_state({prev}))state_key=null;else{let additional_key=message.message_cache_id({raw:_raw,properties});state_key=state_keys.Message({prev,arg:arg_evaled,message:message_name,properties,additional:additional_key,prior_btype_id})}function _eval(){b_fiber.optional_pause("pre-message "+message_name);let ret=message.evaluate(prev,arg_evaled,properties,_raw,context);return b_fiber.optional_pause("post-message "+message_name),ret}return eval_live_expression(state_key,_eval,ret_btype_id,_raw,context)}function unpack_reduced(val){return(val==null?void 0:val[S.type])!=="Dehydrated"||(val==null?void 0:val[S.next])!=null?val:hydrate2.rehydrate_tree(_lib.default.or_throw().db_instance(),val[S.properties][S.val])}var create_reduced=expression_utils.create_reduced;exports.create_reduced=create_reduced;function add_next(prev,next){prev=u.json_deep_copy(prev);let target=prev;for(;target[S.next];)target=target[S.next];return target[S.next]=next,prev}function reduce_message(_raw,context,prev){let message_name=_raw[S.name],new_arg;if(_raw[S.args]!=null){let[result,value_id]=evaluate(_raw[S.args],context,null,null);new_arg=create_reduced(result,value_id)}let new_props,_properties=_raw[S.properties];_properties&&(new_props={},Object.entries(_properties).forEach(_ref5=>{let[k,v]=_ref5,[result,value_id]=evaluate(v,context,null,null);new_props[k]=create_reduced(result,value_id)}));let new_raw_base={[S.name]:message_name,[S.properties]:new_props,[S.args]:new_arg,[S.type]:"Message"},new_raw=add_next(prev,new_raw_base);return reduce_next(new_raw,_raw[S.next],context)}function reduce_data_source(type,_raw,context){let new_props,_properties=_raw[S.properties];_properties&&(new_props={},Object.entries(_properties).forEach(_ref6=>{let[k,v]=_ref6,[result,value_id]=evaluate(v,context,null,null);new_props[k]=create_reduced(result,value_id)}));let new_raw={[S.properties]:new_props,[S.type]:type};return reduce_next(new_raw,_raw[S.next],context)}function reduce_next(prev,next,context){return next==null?[prev,"reduced"]:evaluate(next,context,prev,null,"reduced")}function reduce_injected(_raw,context){let new_raw={[S.type]:"InjectedValue"};return reduce_next(new_raw,_raw[S.next],context)}function eval_data_source(type,_raw,context){var _Lib$or_throw$load_pl;let D=(_Lib$or_throw$load_pl=_lib.default.or_throw().load_plugin("".concat(_lib.default.or_throw().plugin_prefixes.datasource).concat(type),!0))!=null?_Lib$or_throw$load_pl:expression_utils.missing_datasource(type),properties=evaluate_properties(_raw[S.properties],context,D.field_names);if(properties===MUST_REDUCE)return reduce_data_source(type,_raw,context);let state_key=D.get_unique_string(properties,context.element),ret_btype_id=D.get_runmode_value(_raw,context,properties);ret_btype_id==null&&type!=="Dehydrated"&&logger.warn("Missing ret_btype_id in data eval_data_source",{_raw,type});function _eval(){let ret_btype=btypes.get(ret_btype_id),post_ret_btype_id=ret_btype!=null&&ret_btype.is_missing()?void 0:ret_btype.id();return post_ret_btype_id&&ret_btype_id&&post_ret_btype_id!==ret_btype_id&&logger.warn("bad btypes.get in eval_data_source",{post_ret_btype_id,ret_btype_id}),D.evaluate(properties,context,ret_btype,_raw)}return eval_live_expression(state_key,_eval,ret_btype_id,_raw,context)}var make_partial_expression_evaluator=function(context){let MessageNode=nodes.get(_node_types.default.MESSAGE_NODE);function _make_partial(exp){let source=exp;for(;source instanceof MessageNode;)source=source.prior();function partial(exp2){let[prev,prior_btype_id]=exp2 instanceof MessageNode?partial(exp2.prior()):[void 0,void 0],_raw=u.json_deep_copy(exp2.json._raw());_raw==null||delete _raw[S.next];try{return context.is_in_partial=!0,eval_node_state.with_eval_node(source,()=>evaluate(_raw,context,prev,null,prior_btype_id))}finally{context.is_in_partial=!1}}return partial(exp)}return _make_partial};exports.make_partial_expression_evaluator=make_partial_expression_evaluator}});var require_node_eval=__commonJS({"lib-browser-old/lang/evaluation/node_eval.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_includes();require_es_json_stringify();var shrink=require_shrink(),node_eval=exports,{S}=shrink,mode_check=require_mode_check(),errors=require_errors(),autorun=require_autorun3(),b_async=require_b_async3(),async_state=require_async_state3(),uuid=require_uuid(),Lib=require_lib(),eval_node_state=require_eval_node_state(),appquery=require_appquery(),node_registry=require_registry(),node_types=require_node_types(),evaluate=require_evaluate(),safe_require=require_safe_require(),apm=require_apm();safe_require.safe_register("./lang/evaluation/node_eval",node_eval);node_eval.evaluate_state_condition=function(state,context){return eval_node_state.with_eval_node(state,()=>evaluate.evaluate(state.json._raw_child(S.condition),context,null,null)[0])};node_eval.evaluate_event_condition=function(event,context){return event.get_static_property("workflow_disabled")?!1:apm.traceSpan("evaluate event condition",{},()=>{let result=node_eval.eval_property(event,"condition",context,null,!0);return apm.addTransactionLabels({"evaluation.condition_result":result}),result})};node_eval.evaluate_action_condition=function(action,context){return mode_check.on_server()&&action.check_use_visible()&&appquery().get_public_setting("use_visible")?!1:apm.traceSpan("evaluate action condition",{},()=>{let result=node_eval.eval_property(action,"condition",context,null,!0);return apm.addTransactionLabels({"evaluation.condition_result":result}),result})};node_eval.evaluate_action_properties=function(action,context){return apm.traceSpan("evaluate action properties",{"workflow.action.id":action.id(),"workflow.action.type":action.type()},()=>{let condition=node_eval.evaluate_action_condition(action,context);if(!condition&&!action.A.handle_condition_internally)return{condition:!1};let prop_json=action.json._child(S.properties),prop_json_raw=prop_json._raw();add_evaluation_transaction_labels(prop_json_raw);let props_original=eval_node_state.with_eval_node(action,()=>evaluate.evaluate_properties(prop_json_raw,context,action.field_names(),prop_json._path())),props=action.preprocess_properties(props_original,context);return props.condition=condition,props})};node_eval.evaluate_properties=function(node,context){if(!node)return null;if(node_registry.is(node,node_types.ACTION))return node_eval.evaluate_action_properties(node,context);let prop_json=node.json._child(S.properties),props_original=eval_node_state.with_eval_node(node,()=>evaluate.evaluate_properties(prop_json._raw(),context,node.field_names(),prop_json._path()));return node.preprocess_properties(props_original,context)};node_eval.evaluate_wf_properties=function(node,context){var _Lib$workflow$debugge;if(node_registry.is(node,node_types.GENERIC_EVENT))return autorun.run_once(30,()=>({condition:node_eval.evaluate_event_condition(node_eval,node,context)}));let action_debugger_on=["slow","step_by_step"].includes((_Lib$workflow$debugge=Lib().workflow.debugger)==null?void 0:_Lib$workflow$debugge.workflow_mode);if(node.does_fall_back_to_server()&&!action_debugger_on){let p=b_async.Promise(null,"property evaluation"),has_volatile_expressions=["Search","GetDataFromAPI"].some(type=>node.find_expressions(type).length>0);if(context.server_workflow_completed||has_volatile_expressions)p.reject(new errors.UnexpectedError("no local evaluation"));else{let old_autorun;try{old_autorun=async_state.CurrentAutoRun,async_state.CurrentAutoRun={_sources:null,_invalidate(){},invalidate(){},add_sub(){}},p.resolve(node_eval.evaluate_properties(node,context))}catch(err){p.reject(err)}finally{async_state.CurrentAutoRun=old_autorun}}return p}return autorun.run_once(30,()=>(context.initial_random_iterations==null&&context.random_generator?context.initial_random_iterations=context.random_generator.iterations:context.initial_random_iterations!=null&&(context.random_generator=new uuid.Random(context.random_seed,context.initial_random_iterations)),node_eval.evaluate_properties(node,context)))};node_eval.evaluate_action_clientside=function(action,context){return action.needs_clientside_properties()?node_eval.evaluate_wf_properties(action,context):b_async.Promise(null)};node_eval.eval_property=function(node,name,context,prev,default_value){return eval_node_state.with_eval_node(node.property(name),()=>{let raw=node.json._raw_gchild(S.properties,shrink.shrink(name));return add_evaluation_transaction_labels(raw),evaluate.evaluate(raw,context,prev,default_value)[0]})};var add_evaluation_transaction_labels=raw=>{apm.addTransactionLabels({"evaluation.raw":JSON.stringify(shrink.expand_object(raw))})}}});var require_allow_overrides_check=__commonJS({"lib-browser-old/lang/evaluation/allow_overrides_check.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.allow_overrides_check=void 0;require_es_array_includes();require_es_string_includes();var _elements=require_elements(),allow_overrides_check=(element,name,element_fields)=>{var _element_fields,_ref,_element_fields$name;let element_version_number=element.element_version();(_element_fields=element_fields)!=null||(element_fields=element.definition_or_self.field_names());let sufficient_version=element_version_number>=_elements.VERSION_STYLE_OVERRIDES,legacy_overrides=(_ref=((_element_fields$name=element_fields[name])==null?void 0:_element_fields$name.allow_overrides)&&_elements.OLD_VERSION_OVERRIDE_PROPERTIES.includes(name))!=null?_ref:!1;return sufficient_version||legacy_overrides};exports.allow_overrides_check=allow_overrides_check}});var require_element_edit_eval=__commonJS({"lib-browser-old/lang/evaluation/element_edit_eval.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.edit_eval=edit_eval;exports.get_border_widths=get_border_widths;exports.get_container_width=get_container_width;require_es_object_assign();require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_reverse();require_es_array_includes();require_es_string_includes();var _lib=_interopRequireDefault(require_lib()),_node_eval=_interopRequireDefault(require_node_eval()),_safe_require=_interopRequireDefault(require_safe_require()),_allow_overrides_check=require_allow_overrides_check();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_safe_require.default.safe_register("./lang/evaluation/element_edit_eval",exports);function edit_eval(name,instance,element_arg){var _active_state$propert;let element=element_arg!=null?element_arg:instance==null?void 0:instance.element,style2=element.get_style_if_exists(),prop=null,editor_has_context=(instance==null?void 0:instance.responsive_mode())||((instance==null?void 0:instance.edit_mode())||(instance==null?void 0:instance.reusable_edit_mode()))&&instance.element.is_responsive_v1()&&_lib.default.or_throw().visual_edit.responsive_mode_box()==="responsive",context;editor_has_context&&(context=_lib.default.or_throw().visual_edit.get_state_eval_context()),context&&(context=Object.assign(context,{element:instance}));let states=[];style2&&element.is_styleable_property(name)&&states.push(...style2.states()),states.push(...element.states()),states.reverse();let active_state=states.find(state=>state.property_names().includes(name)?context?_node_eval.default.evaluate_state_condition(state,context):element.is_on_edit_mode(state):!1);if(prop=(_active_state$propert=active_state==null?void 0:active_state.property(name))!=null?_active_state$propert:null,prop===null&&style2&&element.is_styleable_property(name)&&(!(0,_allow_overrides_check.allow_overrides_check)(element,name)||element.definition_or_self.property(name).raw()==null)&&(prop=style2.property(name)),prop===null&&(prop=element.property(name)),prop.is_empty()){var _element$get_default;return(_element$get_default=element.get_default(name))!=null?_element$get_default:null}else{if(prop.is_static())return prop.get_static();{let field=element.field(name);if((field==null?void 0:field.editor)==="Color"&&field!=null&&field.dynamic){var _element$get_default2;return(_element$get_default2=element.get_default(name))!=null?_element$get_default2:null}if(prop.get_eval_value().matches("text")){let make_dynamic_null=element.type()==="HTML"&&name==="html";return prop.get_tree_display(make_dynamic_null)}return null}}}function get_container_width(element){if(element.E.get_container_width)return element.E.get_container_width(element);{let border_width=edit_eval("four_border_style",null,element)?_get_border_width(element,"left")+_get_border_width(element,"right"):2*_get_border_width(element);return element.get_width()-border_width}}function _get_border_width(element,side){let suffix=side?"_".concat(side):"",style2=edit_eval("border_style".concat(suffix),null,element);if(style2===void 0||style2==="none")return 0;var _edit_eval;return(_edit_eval=edit_eval("border_width".concat(suffix),null,element))!=null?_edit_eval:0}function get_border_widths(element){let sides=["left","right","bottom","top"],widths={};if(edit_eval("four_border_style",null,element))for(let side of sides)widths[side]=_get_border_width(element,side);else{let border_width=_get_border_width(element);for(let side of sides)widths[side]=border_width}return widths}}});var require_fonts=__commonJS({"lib-browser-old/constants/fonts.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.TOKEN_NAMES=exports.TOKEN_DESCRIPTIONS=exports.SPECIAL_DISPLAY=exports.NAMED_WEIGHTS=exports.MISSING_USER_FONT_TOKEN_TEXT=exports.MAX_USER_FONTS=exports.FONT_VARIANTS=exports.FONT_TOKEN_NAME_AND_WEIGHT=exports.FONT_STYLE_LIST=exports.DEFAULT_WEIGHT=exports.DEFAULT_TOKENS=exports.DEFAULT_FONT_FAMILY_DROPDOWN=exports.DEFAULT_FONT=exports.DEFAULT_FAMILY=exports.DEFAULT_CSS_TOKEN=exports.CUSTOM_FONT_FLAG=exports.ALL_WEIGHTS=void 0;var _safe_require=_interopRequireDefault(require_safe_require());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_safe_require.default.safe_register("./constants/fonts",exports);var DEFAULT_FONT="Lato:::";exports.DEFAULT_FONT=DEFAULT_FONT;var DEFAULT_FAMILY="Lato";exports.DEFAULT_FAMILY=DEFAULT_FAMILY;var DEFAULT_WEIGHT="400";exports.DEFAULT_WEIGHT=DEFAULT_WEIGHT;var ALL_WEIGHTS=["100","200","300","400","500","600","700","800","900"];exports.ALL_WEIGHTS=ALL_WEIGHTS;var NAMED_WEIGHTS={regular:"400",bold:"700"};exports.NAMED_WEIGHTS=NAMED_WEIGHTS;var TOKEN_NAMES=function(TOKEN_NAMES2){return TOKEN_NAMES2.default="App Font",TOKEN_NAMES2}({});exports.TOKEN_NAMES=TOKEN_NAMES;var TOKEN_DESCRIPTIONS=function(TOKEN_DESCRIPTIONS2){return TOKEN_DESCRIPTIONS2.default="Applied to all elements using App Font as their font family in styles.",TOKEN_DESCRIPTIONS2}({});exports.TOKEN_DESCRIPTIONS=TOKEN_DESCRIPTIONS;var DEFAULT_TOKENS=function(DEFAULT_TOKENS2){return DEFAULT_TOKENS2.default="Lato",DEFAULT_TOKENS2}({});exports.DEFAULT_TOKENS=DEFAULT_TOKENS;var CUSTOM_FONT_FLAG=":::custom";exports.CUSTOM_FONT_FLAG=CUSTOM_FONT_FLAG;var MAX_USER_FONTS=7;exports.MAX_USER_FONTS=MAX_USER_FONTS;var MISSING_USER_FONT_TOKEN_TEXT="Custom font (MISSING)";exports.MISSING_USER_FONT_TOKEN_TEXT=MISSING_USER_FONT_TOKEN_TEXT;var DEFAULT_CSS_TOKEN="var(--font_default)";exports.DEFAULT_CSS_TOKEN=DEFAULT_CSS_TOKEN;var FONT_TOKEN_NAME_AND_WEIGHT=/var\(--font_(.*)\)(.*)/;exports.FONT_TOKEN_NAME_AND_WEIGHT=FONT_TOKEN_NAME_AND_WEIGHT;var FONT_VARIANTS=["default"];exports.FONT_VARIANTS=FONT_VARIANTS;var SPECIAL_DISPLAY={100:"100 (Thin)",200:"200 (Extra Light)",300:"300 (Light)",400:"400 (Regular)",500:"500 (Medium)",600:"600 (Semi Bold)",700:"700 (Bold)",800:"800 (Extra Bold)",900:"900 (Black)"};exports.SPECIAL_DISPLAY=SPECIAL_DISPLAY;var FONT_STYLE_LIST=["bold","italic","underline"];exports.FONT_STYLE_LIST=FONT_STYLE_LIST;var DEFAULT_FONT_FAMILY_DROPDOWN="Source Sans Pro";exports.DEFAULT_FONT_FAMILY_DROPDOWN=DEFAULT_FONT_FAMILY_DROPDOWN}});var require_tokens=__commonJS({"lib-browser-old/constants/tokens.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.MAX_TOKEN_NAME_LENGTH=exports.MAX_TOKEN_DESC_LENGTH=exports.DELETED_USER_TOKEN_STRING=exports.DEFAULT_USER_TOKENS=void 0;var DELETED_USER_TOKEN_STRING=" (DELETED)";exports.DELETED_USER_TOKEN_STRING=DELETED_USER_TOKEN_STRING;var MAX_TOKEN_NAME_LENGTH=30;exports.MAX_TOKEN_NAME_LENGTH=MAX_TOKEN_NAME_LENGTH;var MAX_TOKEN_DESC_LENGTH=100;exports.MAX_TOKEN_DESC_LENGTH=MAX_TOKEN_DESC_LENGTH;var DEFAULT_USER_TOKENS={default:{}};exports.DEFAULT_USER_TOKENS=DEFAULT_USER_TOKENS}});var require_webfonts=__commonJS({"lib-browser-old/webfonts.js"(exports){"use strict";init_define_process_env();init_shim();require_es_symbol_description();require_es_error_cause();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_flat();require_es_array_unscopables_flat();require_es_array_includes();require_es_string_includes();require_es_array_sort();require_es_parse_int();require_es_array_reverse();require_es_regexp_exec();require_es_string_match();require_es_string_replace();require_es_object_values();function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var autorun=require_autorun3(),mode_check=require_mode_check(),errors=require_errors(),b_object=require_b_object(),b_async=require_b_async3(),safe_require=require_safe_require(),logger=require_logger(),fonts_consts=require_fonts(),{DEFAULT_USER_TOKENS}=require_tokens(),appquery=require_appquery(),Lib=require_lib(),webfonts=exports;safe_require.safe_register("./webfonts",webfonts);var preloaded_fonts=["Arial:::","Tinos:::","Raleway:::","Cousine:::","Open Sans:::","Open Sans:::600","Droid Sans:::","Droid Serif:::","EB Garamond:::","PT Sans:::","Ubuntu:::","Lato:::","Oswald:::","ABeeZee:::","Source Sans 3:::300","Source Sans 3:::400"],non_google_fonts=["Arial:::","Times New Roman:::","Courier New:::","Georgia:::","Trebuchet MS:::","Verdana:::","Palatino:::","Garamond:::","Bookman:::","Avant Garde:::","Arial Black:::","Impact:::"],renamed_fonts={"Source Sans Pro":"Source Sans 3","Source Serif Pro":"Source Serif 4"};webfonts.already_loaded=[];var FONT_TEST_STRING=["BESbswy","\u0623\u0633\u0626\u0644\u0629 \u0648\u0623\u062C\u0648\u0628\u0629"].join(""),r=__require,configuration,with_cache;mode_check.on_server()&&(configuration=r("./configuration"),with_cache=r("./server/assets/core/with_cache"));webfonts.standardized_name=standardized_name;webfonts.get_unquoted_face_and_variant=get_unquoted_face_and_variant;webfonts.get_quoted_face_and_variant=get_quoted_face_and_variant;webfonts.get_face_and_variant=get_face_and_variant;webfonts.get_canonical=get_canonical;webfonts.font_token_to_font=font_token_to_font;webfonts.substitute_font_token=substitute_font_token;webfonts.pretty_font=pretty_font;webfonts.load_font=load_font;webfonts.load_external=load_external;webfonts.load_for_preview=load_for_preview;webfonts.clean_list=clean_list;webfonts.to_google_list=to_google_list;webfonts.load_app_fonts=load_app_fonts;webfonts.load_default_fonts=load_default_fonts;webfonts.check_font_valid=check_font_valid;webfonts.get_full_clean_list=get_full_clean_list;webfonts.to_font_face=to_font_face;webfonts.is_user_font_token=is_user_font_token;webfonts.convert_if_legacy=convert_if_legacy;webfonts.convert_all_legacy=convert_all_legacy;function convert_if_legacy(font){let{font_family,variant}=get_unquoted_face_and_variant(font);return font_family in renamed_fonts?standardized_name({font_family:renamed_fonts[font_family],variant}):font}function convert_all_legacy(font_list){for(let i=0;i<font_list.length;i++)font_list[i]=convert_if_legacy(font_list[i])}function standardized_name(data){return data.variant?"".concat(data.font_family,":::").concat(data.variant):"".concat(data.font_family,":::")}function get_unquoted_face_and_variant(val){if(!val)return{};if(!val.includes(":::"))return{font_family:val,variant:null};let split=val.split(":::");return{font_family:split.slice(0,split.length-1).join(":::"),variant:split[split.length-1]||null}}function get_quoted_face_and_variant(val){let font_data=webfonts.get_unquoted_face_and_variant(val);return val!=null&&val.includes("var(")||(font_data.font_family="'".concat(font_data.font_family,"'")),font_data}function get_face_and_variant(val){var _window;return val=convert_if_legacy(val),typeof window<"u"&&(_window=window)!=null&&_window.google_web_fonts_active?webfonts.get_quoted_face_and_variant(val):webfonts.get_unquoted_face_and_variant(val)}function get_canonical(val){if(val)return webfonts.standardized_name(webfonts.get_face_and_variant(val))}function font_token_to_font(val){let font_token=val.match(fonts_consts.FONT_TOKEN_NAME_AND_WEIGHT)[1];if(is_user_font_token(font_token)){var _appquery$get_public_,_font_tokens_user$var,_font_tokens_user$var2;let font_tokens_user=(_appquery$get_public_=appquery.get_public_setting("font_tokens_user"))!=null?_appquery$get_public_:b_object.json_deep_copy(DEFAULT_USER_TOKENS),[uid,variant]=font_token.split("_"),token_props=(_font_tokens_user$var=font_tokens_user[variant])!=null&&(_font_tokens_user$var2=_font_tokens_user$var[uid])!=null&&_font_tokens_user$var2.font_family?font_tokens_user[variant][uid]:{name:fonts_consts.MISSING_USER_FONT_TOKEN_TEXT,font_family:fonts_consts.DEFAULT_FAMILY};return{font_token,token_name:token_props.name,font_family:token_props.font_family.replace(fonts_consts.CUSTOM_FONT_FLAG,"")}}else{var _appquery$get_public_2;let font_tokens=(_appquery$get_public_2=appquery.get_public_setting("font_tokens"))!=null?_appquery$get_public_2:fonts_consts.DEFAULT_TOKENS;return{font_token,token_name:fonts_consts.TOKEN_NAMES[font_token],font_family:font_tokens[font_token].replace(fonts_consts.CUSTOM_FONT_FLAG,"")}}}function substitute_font_token(val){return val.replace(fonts_consts.FONT_TOKEN_NAME_AND_WEIGHT,(_,token,weight)=>{if(is_user_font_token(token)){var _appquery$get_public_3;let font_tokens_user=(_appquery$get_public_3=appquery.get_public_setting("font_tokens_user"))!=null?_appquery$get_public_3:b_object.json_deep_copy(DEFAULT_USER_TOKENS),[uid,variant]=token.split("_"),token_props=font_tokens_user[variant][uid];return token_props.font_family.includes(fonts_consts.CUSTOM_FONT_FLAG)?token_props.font_family:token_props.font_family+weight}else{var _appquery$get_public_4;let font_tokens=(_appquery$get_public_4=appquery.get_public_setting("font_tokens"))!=null?_appquery$get_public_4:fonts_consts.DEFAULT_TOKENS;return font_tokens[token].includes(fonts_consts.CUSTOM_FONT_FLAG)?font_tokens[token]:font_tokens[token]+weight}})}function pretty_font(val){let{font_family,variant}=webfonts.get_face_and_variant(val),res=font_family;if(font_family!=null&&font_family.includes("var(")){let name_and_family=webfonts.font_token_to_font(font_family);res="".concat(name_and_family.token_name," (").concat(name_and_family.font_family,")")}return variant!=null&&variant!=="custom"&&(res+=" (".concat(variant,")")),res}webfonts.active_key=b_async.MakeKey(null,"webfonts.active_key");webfonts.fontface_key=b_async.MakeKey(null,"webfonts.fontface_key");webfonts.fontface_keys={};if(typeof window<"u"&&window!==null&&!mode_check.on_react_native()){window.google_web_fonts_active?webfonts.active_key.turn():window.google_web_fonts_active_cb=()=>webfonts.active_key.turn();for(let already_loaded_font of Object.keys((_window$fontface_load=window.fontface_loaded)!=null?_window$fontface_load:{}).concat(non_google_fonts))(_webfonts$fontface_ke2=(_webfonts$fontface_ke=webfonts.fontface_keys)[already_loaded_font])!=null||(_webfonts$fontface_ke[already_loaded_font]=b_async.MakeKey(null,"webfont.fontface_key_".concat(already_loaded_font))),webfonts.fontface_keys[already_loaded_font].turn();window.all_fontface_loaded?webfonts.fontface_key.turn():window.fontface_webfonts_loaded_cb=function(font){if(font!=null){var _webfonts$fontface_ke3,_webfonts$fontface_ke4;(_webfonts$fontface_ke4=(_webfonts$fontface_ke3=webfonts.fontface_keys)[font])!=null||(_webfonts$fontface_ke3[font]=b_async.MakeKey(null,"webfont.fontface_key_".concat(font))),webfonts.fontface_keys[font].turn()}else webfonts.fontface_key.turn()}}else webfonts.active_key.turn(),webfonts.fontface_key.turn();var _window$fontface_load,_webfonts$fontface_ke,_webfonts$fontface_ke2;function load_font(font,text_sampling){var _text_sampling;let cb=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;(_text_sampling=text_sampling)!=null||(text_sampling=!1),font&&(font=webfonts.get_canonical(font),is_font_loaded(font)||(webfonts.get_face_and_variant(font).variant==="custom"?webfonts.load_external(webfonts.get_face_and_variant(font).font_family):load_from_google([font],cb,text_sampling)))}function load_external(font,css_path){let{font_family}=webfonts.get_quoted_face_and_variant(font);webfonts.already_loaded.push("".concat(font_family).concat(fonts_consts.CUSTOM_FONT_FLAG));let WebFontConfig={custom:{families:[font_family],urls:[css_path]}};window.WebFont.load(WebFontConfig)}function to_google_format(font){let{font_family,variant}=webfonts.get_face_and_variant(font);return variant?"".concat(font_family,":").concat(variant):font_family}function load_fonts_list(list){let non_loaded_fonts=list.filter(font=>!is_font_loaded(font));non_loaded_fonts.length>0?load_from_google(non_loaded_fonts,()=>webfonts.active_key.turn()):webfonts.active_key.turn()}function load_for_preview(list,cb){convert_all_legacy(list);let non_loaded_fonts=list.filter(font=>!is_font_loaded(font));non_loaded_fonts.length!==0&&load_from_google(non_loaded_fonts,cb)}function is_font_loaded(family){return webfonts.already_loaded.includes(family)||non_google_fonts.includes(family)}function load_from_google(list){var _text_sampling2;let cb=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,text_sampling=arguments.length>2?arguments[2]:void 0;(_text_sampling2=text_sampling)!=null||(text_sampling=!1);for(let font of list)webfonts.already_loaded.push(font);filter_out_unsupported_fonts_client(list,filtered_fonts=>{filtered_fonts.length<1&&(filtered_fonts=["Lato"]);let WebFontConfig={google:{families:filtered_fonts},active(){cb==null||cb()}};text_sampling&&list.length===1&&(WebFontConfig.google.text=webfonts.pretty_font(list[0])),window.WebFont.load(WebFontConfig)})}function clean_list(fonts){return fonts.filter(font_face=>{let canonical_font_face=webfonts.get_canonical(font_face);return canonical_font_face&&typeof canonical_font_face=="string"&&!non_google_fonts.includes(canonical_font_face)})}function to_google_list(fonts){return fonts.filter(Boolean).map(font=>to_google_format(font))}function load_app_fonts(){autorun.run_once(60,()=>{var _Lib$app$get_public_s;return{fonts_used_in_app:Lib().derived("AppFonts").content(),custom_fonts_installed:(_Lib$app$get_public_s=Lib().app().get_public_setting("fonts"))!=null?_Lib$app$get_public_s:{}}},(err,results)=>{err&&(logger.log(err),results={needed_fonts:[],fonts_used_in_app:[],custom_fonts_installed:{}});let fonts=results.fonts_used_in_app.concat(preloaded_fonts);convert_all_legacy(fonts),load_fonts_list(fonts),load_custom_fonts(results.custom_fonts_installed)})}function load_custom_fonts(custom_fonts_setting){window.WebFont.load({custom:{families:Object.keys(custom_fonts_setting),urls:Object.values(custom_fonts_setting)}})}function load_default_fonts(){load_fonts_list(preloaded_fonts)}function check_font_valid(name,url,valid_cb,invalid_cb){let testStrings={};testStrings[name]=FONT_TEST_STRING;let WebFontConfig={custom:{families:[name],urls:[url],testStrings},active(){valid_cb==null||valid_cb(name,url)},fontinactive(){invalid_cb==null||invalid_cb(name,url),console.log("fontinactive being called for ".concat(name,", Google says the fonts didnt render"))}};window.WebFont.load(WebFontConfig)}var LINKED_VARIANTS=["regular","italic"];function get_full_clean_list(input_fonts){let all_fonts=[];for(let font_name of input_fonts){let font_data=webfonts.get_face_and_variant(font_name);if(!LINKED_VARIANTS.includes(font_data.variant)){all_fonts.push(font_name);continue}let all_variants=get_all_variants(font_name);if(all_variants==null){all_fonts.push(font_name);continue}for(let linked_variant of LINKED_VARIANTS)if(all_variants.includes(linked_variant)){let canonical_font=webfonts.standardized_name({font_family:font_data.font_family,variant:linked_variant});all_fonts.includes(canonical_font)||all_fonts.push(canonical_font)}}return webfonts.clean_list(all_fonts)}function to_font_face(font_family,font_weight){return font_family in renamed_fonts&&(font_family=renamed_fonts[font_family]),font_family==null?null:font_family.includes(fonts_consts.CUSTOM_FONT_FLAG)?font_family:webfonts.standardized_name(_objectSpread(_objectSpread({},webfonts.get_unquoted_face_and_variant(font_family)),{},{variant:font_weight}))}function is_user_font_token(token){var _Object$keys;return!((_Object$keys=Object.keys(fonts_consts.DEFAULT_TOKENS))!=null&&_Object$keys.includes(token))}}});var require_elements_versioning=__commonJS({"lib-browser-old/core/core_elements/elements_versioning.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_includes();require_es_string_includes();require_web_dom_collections_for_each();var{LATEST_ELEMENT_VERSION,OLD_VERSION_OVERRIDE_PROPERTIES}=require_elements(),Lib=require_lib(),appquery=require_appquery(),autorun=require_autorun3(),logger=require_logger(),webfonts=require_webfonts(),fonts_consts=require_fonts(),elements_versioning=exports,mapped_properties=[{font_family:"font_face",font_weight:"font_face"},{padding_left:"padding_horizontal",padding_right:"padding_horizontal",padding_top:"padding_vertical",padding_bottom:"padding_vertical"},{},{}],unmapped_properties=[{font_face:["font_family","font_weight"]},{padding_horizontal:["padding_left","padding_right"],padding_vertical:["padding_bottom","padding_top"]},{},{}],mapping_functions=[(new_property,font_face)=>{let{font_family,variant}=webfonts.get_unquoted_face_and_variant(font_face);if(new_property==="font_family")return font_family;if(variant==="custom")return"400";var _fonts_consts$NAMED_W;return(_fonts_consts$NAMED_W=fonts_consts.NAMED_WEIGHTS[variant])!=null?_fonts_consts$NAMED_W:variant},(new_property,old_value)=>old_value,()=>{}];elements_versioning.get_mapped_property=function(element_version,style_version,property_name){for(let i=element_version;i<style_version;i++)if(mapped_properties[i][property_name])return mapped_properties[i][property_name];return null};elements_versioning.get_unmapped_properties=function(element_version,style_version,property_name){for(let i=element_version;i<style_version;i++)if(unmapped_properties[i][property_name])return unmapped_properties[i][property_name];return[]};elements_versioning.map_property=function(element_version,style_version,property_name,value){for(let i=element_version;i<style_version;i++)if(mapped_properties[i][property_name])return mapping_functions[i](property_name,value);return value}}});var require_responsive_css=__commonJS({"lib-browser-old/shared/responsive/responsive_css.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();var responsive_css=exports;responsive_css.margin_properties=["margin_left","margin_right","margin_top","margin_bottom"];responsive_css.container_properties=properties=>{var _properties$container,_properties$row_gap,_properties$column_ga;return{"justify-content":(_properties$container=properties.container_alignment)!=null?_properties$container:"","row-gap":properties.use_gap&&(_properties$row_gap=properties.row_gap)!=null?_properties$row_gap:"","column-gap":properties.use_gap&&(_properties$column_ga=properties.column_gap)!=null?_properties$column_ga:""}};function apply_margin(style2,properties){for(let side of["left","top","right","bottom"]){let value=properties["margin_".concat(side)];style2["margin-".concat(side)]=value!=null?"".concat(value,"px"):""}}responsive_css.flex_element_properties=direction=>properties=>{var _properties$align_sel,_properties$max_width,_properties$order,_properties$max_heigh;let ret={"align-self":(_properties$align_sel=properties.align_self)!=null?_properties$align_sel:"","min-width":properties.min_width,"max-width":(_properties$max_width=properties.max_width)!=null?_properties$max_width:"",order:(_properties$order=properties.order)!=null?_properties$order:"","min-height":properties.has_fixed_aspect_ratio?"":properties.min_height,"max-height":properties.has_fixed_aspect_ratio?"":(_properties$max_heigh=properties.max_height)!=null?_properties$max_heigh:""};return direction==="row"?(properties.fit_width?(ret.width="max-content",ret["flex-grow"]=0):(ret.width=properties.min_width,ret["flex-grow"]=1),properties.fit_height||properties.has_fixed_aspect_ratio?ret.height="max-content":properties.min_height===properties.max_height?ret.height=properties.min_height:properties.align_self==="stretch"?ret.height="auto":ret.height=properties.min_height):(properties.fit_height||properties.has_fixed_aspect_ratio?(ret.height="max-content",ret["flex-grow"]=0,ret["flex-shrink"]=0):(ret.height=properties.min_height,ret["flex-grow"]=1),properties.min_width===properties.max_width?ret.width=properties.min_width:properties.align_self==="stretch"||properties.fit_width?ret.width="auto":ret.width="calc(100% - ".concat(properties.margin_left+properties.margin_right,"px)")),apply_margin(ret,properties),ret};var nonant_letter_to_alignment={a:"start",b:"center",c:"end"};responsive_css.relative_element_properties=function(properties){var _properties$nonant_al,_properties$nonant_al2,_properties$max_width2,_properties$max_heigh2;let ret={"align-self":nonant_letter_to_alignment[(_properties$nonant_al=properties.nonant_alignment)==null?void 0:_properties$nonant_al.charAt(1)],"justify-self":nonant_letter_to_alignment[(_properties$nonant_al2=properties.nonant_alignment)==null?void 0:_properties$nonant_al2.charAt(0)],"min-width":properties.min_width,"max-width":(_properties$max_width2=properties.max_width)!=null?_properties$max_width2:"","min-height":properties.has_fixed_aspect_ratio?"":properties.min_height,"max-height":properties.has_fixed_aspect_ratio?"":(_properties$max_heigh2=properties.max_height)!=null?_properties$max_heigh2:""};return properties.min_width===properties.max_width?ret.width=properties.min_width:properties.fit_width?ret.width="max-content":ret.width="calc(100% - ".concat(properties.margin_left+properties.margin_right,"px)"),properties.fit_height||properties.has_fixed_aspect_ratio?ret.height="max-content":properties.min_height===properties.max_height?ret.height=properties.min_height:ret.height="calc(100% - ".concat(properties.margin_top+properties.margin_bottom,"px)"),apply_margin(ret,properties),ret};responsive_css.fixed_element_properties=properties=>({top:"".concat(properties.top,"px"),left:"".concat(properties.left,"px"),width:"".concat(properties.min_width,"px"),height:"".concat(properties.min_height,"px")});responsive_css.element_reset={margin:"","align-self":"","justify-self":"","min-width":"","max-width":"",width:"","min-height":"","max-height":"","flex-grow":"",top:"",left:"",right:"",bottom:"",position:""}}});var require_sorting=__commonJS({"lib-browser-old/u/shared/sorting.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.compare=compare;exports.create_sort_function=create_sort_function;exports.filterNulls=filterNulls;function compare(a,b){return filterNulls((a2,b2)=>{switch(typeof a2){case"number":return a2-b2;case"string":return a2<b2?-1:a2>b2?1:0}},"first")(a,b)}function filterNulls(sort_fn,nullHandling){return(a,b)=>a==null&&b==null?0:a==null?nullHandling==="first"?-1:1:b==null?nullHandling==="first"?1:-1:sort_fn(a,b)}function create_sort_function(mapping_fn,then_by){return(a,b)=>{let a_mapped=mapping_fn(a),b_mapped=mapping_fn(b);return(then_by!=null?then_by:compare)(a_mapped,b_mapped)}}}});var require_responsive_layout=__commonJS({"lib-browser-old/shared/responsive/responsive_layout.js"(exports){"use strict";init_define_process_env();init_shim();var responsive_css=require_responsive_css(),appquery=require_appquery(),{compare}=require_sorting(),responsive_layout=exports;responsive_layout.CONTAINER_CLASSES="fixed relative flex row column";function create_sort_fn(property){return(a,b)=>{var _a$element_id,_a$element_id2,_a$id,_b$element_id,_b$element_id2,_b$id;return a.get_static_property(property)-b.get_static_property(property)||compare((_a$element_id=(_a$element_id2=a.element_id)==null?void 0:_a$element_id2.call(a))!=null?_a$element_id:(_a$id=a.id)==null?void 0:_a$id.call(a),(_b$element_id=(_b$element_id2=b.element_id)==null?void 0:_b$element_id2.call(b))!=null?_b$element_id:(_b$id=b.id)==null?void 0:_b$id.call(b))}}responsive_layout.LAYOUT_PROPERTIES={fixed:{classes:"fixed",css_func:responsive_css.fixed_element_properties,container_properties:{},element_properties:{top:"top",left:"left"},sort_fn:create_sort_fn("zindex")},relative:{classes:"relative",css_func:responsive_css.relative_element_properties,container_properties:{},element_properties:{nonant_alignment:"nonant_alignment"},sort_fn:create_sort_fn("zindex")},row:{classes:"flex row",css_func:responsive_css.flex_element_properties("row"),container_properties:{container_horiz_alignment:"container_alignment",use_gap:"use_gap",row_gap:"row_gap",column_gap:"column_gap"},element_properties:{vert_alignment:"align_self",order:"order"},sort_fn:create_sort_fn("order")},column:{classes:"flex column",css_func:responsive_css.flex_element_properties("column"),container_properties:{container_vert_alignment:"container_alignment",use_gap:"use_gap",row_gap:"row_gap"},element_properties:{horiz_alignment:"align_self",order:"order"},sort_fn:create_sort_fn("order")},table:{classes:"table",css_fnc:()=>{},container_properties:{},element_properties:{},sort_fn:create_sort_fn("axis_index")},table_cross_axis:{classes:"axis",css_fnc:()=>{},container_properties:{},element_properties:{},sort_fn:(a,b)=>{let axis1=appquery.element(a.get_static_property("cell_main_axis_id")),axis2=appquery.element(b.get_static_property("cell_main_axis_id"));return create_sort_fn("axis_index")(axis1,axis2)}}};responsive_layout.LAYOUT_NAMES={fixed:"Fixed",relative:"Align to parent",row:"Row",column:"Column"};responsive_layout.FLEX_LAYOUTS=["row","column"];responsive_layout.NON_FIXED_LAYOUTS=["row","column","relative"];responsive_layout.FIXED_LAYOUT="fixed";responsive_layout.DIMENSION_TO_CROSS_AXIS={width:"column",height:"row"};responsive_layout.CONTAINER_PROPERTIES=["container_layout","container_horiz_alignment","container_vert_alignment","use_gap","row_gap","column_gap"]}});var require_element_props=__commonJS({"lib-browser-old/lang/evaluation/element_props.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.get_font_face=get_font_face;exports.is_fitting_height=is_fitting_height;exports.is_fitting_width=is_fitting_width;exports.max_height_css=max_height_css;exports.max_width_css=max_width_css;exports.min_height_css=min_height_css;exports.min_width_css=min_width_css;var element_eval=_interopRequireWildcard(require_element_eval()),_elements=require_elements(),_webfonts=_interopRequireDefault(require_webfonts()),_responsive_layout=_interopRequireDefault(require_responsive_layout()),_safe_require=_interopRequireDefault(require_safe_require());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}_safe_require.default.safe_register("./lang/evaluation/element_props",exports);function get_font_face(instance){if(instance.element.element_version(!0)>=_elements.FONT_FAMILY_VERSION){var _element_eval$evaluat,_element_eval$evaluat2;return _webfonts.default.to_font_face((_element_eval$evaluat=element_eval.evaluate_property(instance,"font_family"))!=null?_element_eval$evaluat:"",(_element_eval$evaluat2=element_eval.evaluate_property(instance,"font_weight"))!=null?_element_eval$evaluat2:"")}else{var _element_eval$evaluat3;return(_element_eval$evaluat3=element_eval.evaluate_property(instance,"font_face"))!=null?_element_eval$evaluat3:""}}function min_width_css(instance){if(!instance.element.E.uses_css_responsive)return"".concat(instance.element.get_min_width(),"px");if(instance.element.can_be_variable_width()&&!instance.element.force_fixed()){var _element_eval$evaluat4;return(_element_eval$evaluat4=element_eval.evaluate_property(instance,"min_width_css"))!=null?_element_eval$evaluat4:"0px"}else return"".concat(instance.element.get_width(),"px")}function max_width_css(instance){if(!instance.element.E.uses_css_responsive){let max_width=instance.element.get_max_width();return max_width!=null?"".concat(max_width,"px"):null}if(instance.element.can_be_variable_width()&&!instance.element.force_fixed())if(instance.get_static_property("single_width")){var _element_eval$evaluat5;return(_element_eval$evaluat5=element_eval.evaluate_property(instance,"min_width_css"))!=null?_element_eval$evaluat5:"0px"}else{var _element_eval$evaluat6;return(_element_eval$evaluat6=element_eval.evaluate_property(instance,"max_width_css"))!=null?_element_eval$evaluat6:null}else return"".concat(instance.element.get_width(),"px")}function min_height_css(instance){if(!instance.element.E.uses_css_responsive)return"0px";if(instance.element.can_be_variable_width()&&!instance.element.force_fixed()){var _element_eval$evaluat7;return(_element_eval$evaluat7=element_eval.evaluate_property(instance,"min_height_css"))!=null?_element_eval$evaluat7:"0px"}else return"".concat(instance.element.get_height(),"px")}function max_height_css(instance){if(!instance.element.E.uses_css_responsive)return null;if(instance.element.can_be_variable_width()&&!instance.element.force_fixed())if(instance.get_static_property("single_height")){var _element_eval$evaluat8;return(_element_eval$evaluat8=element_eval.evaluate_property(instance,"min_height_css"))!=null?_element_eval$evaluat8:"0px"}else{var _element_eval$evaluat9;return(_element_eval$evaluat9=element_eval.evaluate_property(instance,"max_height_css"))!=null?_element_eval$evaluat9:null}else return"".concat(instance.element.get_height(),"px")}function is_fitting_width(instance){var _instance$element$par;if(!instance.element.E.uses_css_responsive||!instance.element.can_fit_width()||instance.element.force_fixed())return!1;let container_layout=(_instance$element$par=instance.element.parent())==null?void 0:_instance$element$par.container_layout();return container_layout===_responsive_layout.default.DIMENSION_TO_CROSS_AXIS.width?element_eval.evaluate_property(instance,"horiz_alignment")!=="stretch"&&instance.element.fit_width():container_layout===_responsive_layout.default.FIXED_LAYOUT?!1:instance.element.fit_width()}function is_fitting_height(instance){var _instance$element$par2;if(!instance.element.E.uses_css_responsive)return!0;if(!instance.element.can_fit_height()||instance.element.force_fixed())return!1;let container_layout=(_instance$element$par2=instance.element.parent())==null?void 0:_instance$element$par2.container_layout();return container_layout===_responsive_layout.default.DIMENSION_TO_CROSS_AXIS.height?!instance.get_static_property("single_height")&&element_eval.evaluate_property(instance,"vert_alignment")!=="stretch":container_layout===_responsive_layout.default.FIXED_LAYOUT?!1:instance.element.fit_height()}}});var require_element_run_eval=__commonJS({"lib-browser-old/lang/evaluation/element_run_eval.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.run_eval=run_eval;require_es_array_includes();require_es_string_includes();var logger=_interopRequireWildcard(require_logger()),_node_eval=_interopRequireDefault(require_node_eval()),elements_consts=_interopRequireWildcard(require_elements()),mode_check=_interopRequireWildcard(require_mode_check()),b_async=_interopRequireWildcard(require_b_async3()),_webfonts=_interopRequireDefault(require_webfonts()),_elements_versioning=_interopRequireDefault(require_elements_versioning()),element_props=_interopRequireWildcard(require_element_props()),element_eval=_interopRequireWildcard(require_element_eval()),_allow_overrides_check=require_allow_overrides_check();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function run_eval(name,style2,potentially_relevant_states,simple_cache,instance,element){var _element,_element$field_names$,_res;(_element=element)!=null||(element=instance==null?void 0:instance.element);let relevant_states=potentially_relevant_states.filter(state2=>element_eval.is_state_on(instance,state2)),state=relevant_states[relevant_states.length-1],element_version=element.element_version(!1),style_version=element.element_version(!0),mapped_property=_elements_versioning.default.get_mapped_property(element_version,style_version,name),is_mapped=mapped_property&&element.states().includes(state),state_prop=is_mapped?mapped_property:name,res;if(state!=null&&(!state.property(state_prop).is_empty()||(_element$field_names$=element.field_names()[state_prop])!=null&&_element$field_names$.allow_empty_condition)){let context=instance.prop_eval_context(!0);res=_node_eval.default.eval_property(state,state_prop,context),is_mapped&&(res=_elements_versioning.default.map_property(element.element_version(!1),element.element_version(!0),name,res))}else if(style2&&(!(0,_allow_overrides_check.allow_overrides_check)(element,name)||simple_cache==null))res=style2.get_static_property(name);else if(simple_cache===elements_consts.NOT_STATIC_PROP){let context=instance.prop_eval_context(!0);res=_node_eval.default.eval_property(element,name,context,null,element.get_default(name))}else res=simple_cache;if(["text","html"].includes(name)&&mode_check.on_client())if(b_async.ensure_ready(_webfonts.default.active_key),window.wait_for_individual_fonts){var _font_face;let font_face=element_props.get_font_face(instance);(_font_face=font_face)!=null&&_font_face.includes("var(")&&(font_face=_webfonts.default.substitute_font_token(font_face)),font_face!=null&&(_webfonts.default.fontface_keys[font_face]==null&&(_webfonts.default.fontface_keys[font_face]=b_async.MakeKey(void 0,"webfont.fontface_key_".concat(font_face)),setTimeout(()=>{logger.warn("fontface key never properly turned",{font_face}),_webfonts.default.fontface_keys[font_face].turn()},3e3)),b_async.ensure_ready(_webfonts.default.fontface_keys[font_face]))}else b_async.ensure_ready(_webfonts.default.fontface_key);return(_res=res)!=null?_res:null}}});var require_element_server_eval=__commonJS({"lib-browser-old/lang/evaluation/element_server_eval.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.serverside_eval_prop=void 0;require_es_array_includes();require_es_string_includes();require_es_array_iterator();require_web_dom_collections_iterator();var _allow_overrides_check=require_allow_overrides_check()}});var web_exports={};__export(web_exports,{Aliases:()=>Aliases,Assets:()=>voidFn,ChildProperties:()=>ChildProperties,DOMElements:()=>DOMElements,DelegatedEvents:()=>DelegatedEvents,Dynamic:()=>Dynamic,ErrorBoundary:()=>ErrorBoundary,For:()=>For,Hydration:()=>Hydration,HydrationScript:()=>voidFn,Index:()=>Index,Match:()=>Match,NoHydration:()=>NoHydration,Portal:()=>Portal,PropAliases:()=>PropAliases,Properties:()=>Properties,SVGElements:()=>SVGElements,SVGNamespace:()=>SVGNamespace,Show:()=>Show,Suspense:()=>Suspense,SuspenseList:()=>SuspenseList,Switch:()=>Switch,addEventListener:()=>addEventListener,assign:()=>assign,classList:()=>classList,className:()=>className,clearDelegatedEvents:()=>clearDelegatedEvents,createComponent:()=>createComponent,delegateEvents:()=>delegateEvents,dynamicProperty:()=>dynamicProperty,effect:()=>createRenderEffect,escape:()=>escape2,generateHydrationScript:()=>voidFn,getAssets:()=>voidFn,getHydrationKey:()=>getHydrationKey,getNextElement:()=>getNextElement,getNextMarker:()=>getNextMarker,getNextMatch:()=>getNextMatch,getOwner:()=>getOwner,hydrate:()=>hydrate,innerHTML:()=>innerHTML,insert:()=>insert,isDev:()=>isDev,isServer:()=>isServer,memo:()=>createMemo,mergeProps:()=>mergeProps,render:()=>render,renderToStream:()=>renderToStream,renderToString:()=>renderToString,renderToStringAsync:()=>renderToStringAsync,resolveSSRNode:()=>resolveSSRNode,runHydrationEvents:()=>runHydrationEvents,setAttribute:()=>setAttribute,setAttributeNS:()=>setAttributeNS,spread:()=>spread,ssr:()=>ssr,ssrAttribute:()=>ssrAttribute,ssrClassList:()=>ssrClassList,ssrElement:()=>ssrElement,ssrHydrationKey:()=>ssrHydrationKey,ssrSpread:()=>ssrSpread,ssrStyle:()=>ssrStyle,style:()=>style,template:()=>template,untrack:()=>untrack,use:()=>use,useAssets:()=>voidFn});function reconcileArrays(parentNode,a,b){let bLength=b.length,aEnd=a.length,bEnd=bLength,aStart=0,bStart=0,after=a[aEnd-1].nextSibling,map=null;for(;aStart<aEnd||bStart<bEnd;){if(a[aStart]===b[bStart]){aStart++,bStart++;continue}for(;a[aEnd-1]===b[bEnd-1];)aEnd--,bEnd--;if(aEnd===aStart){let node=bEnd<bLength?bStart?b[bStart-1].nextSibling:b[bEnd-bStart]:after;for(;bStart<bEnd;)parentNode.insertBefore(b[bStart++],node)}else if(bEnd===bStart)for(;aStart<aEnd;)(!map||!map.has(a[aStart]))&&a[aStart].remove(),aStart++;else if(a[aStart]===b[bEnd-1]&&b[bStart]===a[aEnd-1]){let node=a[--aEnd].nextSibling;parentNode.insertBefore(b[bStart++],a[aStart++].nextSibling),parentNode.insertBefore(b[--bEnd],node),a[aEnd]=b[bEnd]}else{if(!map){map=new Map;let i=bStart;for(;i<bEnd;)map.set(b[i],i++)}let index=map.get(a[aStart]);if(index!=null)if(bStart<index&&index<bEnd){let i=aStart,sequence=1,t;for(;++i<aEnd&&i<bEnd&&!((t=map.get(a[i]))==null||t!==index+sequence);)sequence++;if(sequence>index-bStart){let node=a[aStart];for(;bStart<index;)parentNode.insertBefore(b[bStart++],node)}else parentNode.replaceChild(b[bStart++],a[aStart++])}else aStart++;else a[aStart++].remove()}}}function render(code,element,init,options={}){let disposer;return createRoot(dispose2=>{disposer=dispose2,element===document?code():insert(element,code(),element.firstChild?null:void 0,init)},options.owner),()=>{disposer(),element.textContent=""}}function template(html,check,isSVG){let t=document.createElement("template");if(t.innerHTML=html,check&&t.innerHTML.split("<").length-1!==check)throw"The browser resolved template HTML does not match JSX input:\n".concat(t.innerHTML,"\n\n").concat(html,". Is your HTML properly formed?");let node=t.content.firstChild;return isSVG&&(node=node.firstChild),node}function delegateEvents(eventNames,document2=window.document){let e=document2[$$EVENTS]||(document2[$$EVENTS]=new Set);for(let i=0,l=eventNames.length;i<l;i++){let name=eventNames[i];e.has(name)||(e.add(name),document2.addEventListener(name,eventHandler))}}function clearDelegatedEvents(document2=window.document){if(document2[$$EVENTS]){for(let name of document2[$$EVENTS].keys())document2.removeEventListener(name,eventHandler);delete document2[$$EVENTS]}}function setAttribute(node,name,value){value==null?node.removeAttribute(name):node.setAttribute(name,value)}function setAttributeNS(node,namespace,name,value){value==null?node.removeAttributeNS(namespace,name):node.setAttributeNS(namespace,name,value)}function className(node,value){value==null?node.removeAttribute("class"):node.className=value}function addEventListener(node,name,handler,delegate){if(delegate)Array.isArray(handler)?(node["$$".concat(name)]=handler[0],node["$$".concat(name,"Data")]=handler[1]):node["$$".concat(name)]=handler;else if(Array.isArray(handler)){let handlerFn=handler[0];node.addEventListener(name,handler[0]=e=>handlerFn.call(node,handler[1],e))}else node.addEventListener(name,handler)}function classList(node,value,prev={}){let classKeys=Object.keys(value||{}),prevKeys=Object.keys(prev),i,len;for(i=0,len=prevKeys.length;i<len;i++){let key=prevKeys[i];!key||key==="undefined"||value[key]||(toggleClassKey(node,key,!1),delete prev[key])}for(i=0,len=classKeys.length;i<len;i++){let key=classKeys[i],classValue=!!value[key];!key||key==="undefined"||prev[key]===classValue||!classValue||(toggleClassKey(node,key,!0),prev[key]=classValue)}return prev}function style(node,value,prev){if(!value)return prev?setAttribute(node,"style"):value;let nodeStyle=node.style;if(typeof value=="string")return nodeStyle.cssText=value;typeof prev=="string"&&(nodeStyle.cssText=prev=void 0),prev||(prev={}),value||(value={});let v,s;for(s in prev)value[s]==null&&nodeStyle.removeProperty(s),delete prev[s];for(s in value)v=value[s],v!==prev[s]&&(nodeStyle.setProperty(s,v),prev[s]=v);return prev}function spread(node,props={},isSVG,skipChildren){let prevProps={};return skipChildren||createRenderEffect(()=>prevProps.children=insertExpression(node,props.children,prevProps.children)),createRenderEffect(()=>props.ref&&props.ref(node)),createRenderEffect(()=>assign(node,props,isSVG,!0,prevProps,!0)),prevProps}function dynamicProperty(props,key){let src=props[key];return Object.defineProperty(props,key,{get(){return src()},enumerable:!0}),props}function innerHTML(parent,content){!sharedConfig.context&&(parent.innerHTML=content)}function use(fn,element,arg){return untrack(()=>fn(element,arg))}function insert(parent,accessor,marker,initial){if(marker!==void 0&&!initial&&(initial=[]),typeof accessor!="function")return insertExpression(parent,accessor,initial,marker);createRenderEffect(current=>insertExpression(parent,accessor(),current,marker),initial)}function assign(node,props,isSVG,skipChildren,prevProps={},skipRef=!1){props||(props={});for(let prop in prevProps)if(!(prop in props)){if(prop==="children")continue;prevProps[prop]=assignProp(node,prop,null,prevProps[prop],isSVG,skipRef)}for(let prop in props){if(prop==="children"){skipChildren||insertExpression(node,props.children);continue}let value=props[prop];prevProps[prop]=assignProp(node,prop,value,prevProps[prop],isSVG,skipRef)}}function hydrate$1(code,element,options={}){sharedConfig.completed=globalThis._$HY.completed,sharedConfig.events=globalThis._$HY.events,sharedConfig.load=globalThis._$HY.load,sharedConfig.gather=root=>gatherHydratable(element,root),sharedConfig.registry=new Map,sharedConfig.context={id:options.renderId||"",count:0},gatherHydratable(element,options.renderId);let dispose2=render(code,element,[...element.childNodes],options);return sharedConfig.context=null,dispose2}function getNextElement(template2){let node,key;if(!sharedConfig.context||!(node=sharedConfig.registry.get(key=getHydrationKey()))){if(sharedConfig.context&&console.warn("Unable to find DOM nodes for hydration key:",key),!template2)throw new Error("Unrecoverable Hydration Mismatch. No template for key: "+key);return template2.cloneNode(!0)}return sharedConfig.completed&&sharedConfig.completed.add(node),sharedConfig.registry.delete(key),node}function getNextMatch(el,nodeName){for(;el&&el.localName!==nodeName;)el=el.nextSibling;return el}function getNextMarker(start){let end=start,count=0,current=[];if(sharedConfig.context)for(;end;){if(end.nodeType===8){let v=end.nodeValue;if(v==="#")count++;else if(v==="/"){if(count===0)return[end,current];count--}}current.push(end),end=end.nextSibling}return[end,current]}function runHydrationEvents(){sharedConfig.events&&!sharedConfig.events.queued&&(queueMicrotask(()=>{let{completed,events}=sharedConfig;for(events.queued=!1;events.length;){let[el,e]=events[0];if(!completed.has(el))return;eventHandler(e),events.shift()}}),sharedConfig.events.queued=!0)}function toPropertyName(name){return name.toLowerCase().replace(/-([a-z])/g,(_,w)=>w.toUpperCase())}function toggleClassKey(node,key,value){let classNames=key.trim().split(/\s+/);for(let i=0,nameLen=classNames.length;i<nameLen;i++)node.classList.toggle(classNames[i],value)}function assignProp(node,prop,value,prev,isSVG,skipRef){let isCE,isProp,isChildProp;if(prop==="style")return style(node,value,prev);if(prop==="classList")return classList(node,value,prev);if(value===prev)return prev;if(prop==="ref")skipRef||value(node);else if(prop.slice(0,3)==="on:"){let e=prop.slice(3);prev&&node.removeEventListener(e,prev),value&&node.addEventListener(e,value)}else if(prop.slice(0,10)==="oncapture:"){let e=prop.slice(10);prev&&node.removeEventListener(e,prev,!0),value&&node.addEventListener(e,value,!0)}else if(prop.slice(0,2)==="on"){let name=prop.slice(2).toLowerCase(),delegate=DelegatedEvents.has(name);if(!delegate&&prev){let h=Array.isArray(prev)?prev[0]:prev;node.removeEventListener(name,h)}(delegate||value)&&(addEventListener(node,name,value,delegate),delegate&&delegateEvents([name]))}else if((isChildProp=ChildProperties.has(prop))||!isSVG&&(PropAliases[prop]||(isProp=Properties.has(prop)))||(isCE=node.nodeName.includes("-")))prop==="class"||prop==="className"?className(node,value):isCE&&!isProp&&!isChildProp?node[toPropertyName(prop)]=value:node[PropAliases[prop]||prop]=value;else{let ns=isSVG&&prop.indexOf(":")>-1&&SVGNamespace[prop.split(":")[0]];ns?setAttributeNS(node,ns,prop,value):setAttribute(node,Aliases[prop]||prop,value)}return value}function eventHandler(e){let key="$$".concat(e.type),node=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==node&&Object.defineProperty(e,"target",{configurable:!0,value:node}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return node||document}}),sharedConfig.registry&&!sharedConfig.done&&(sharedConfig.done=_$HY.done=!0);node;){let handler=node[key];if(handler&&!node.disabled){let data=node["".concat(key,"Data")];if(data!==void 0?handler.call(node,data,e):handler.call(node,e),e.cancelBubble)return}node=node._$host||node.parentNode||node.host}}function insertExpression(parent,value,current,marker,unwrapArray){if(sharedConfig.context){!current&&(current=[...parent.childNodes]);let cleaned=[];for(let i=0;i<current.length;i++){let node=current[i];node.nodeType===8&&node.data==="!"?node.remove():cleaned.push(node)}current=cleaned}for(;typeof current=="function";)current=current();if(value===current)return current;let t=typeof value,multi=marker!==void 0;if(parent=multi&&current[0]&&current[0].parentNode||parent,t==="string"||t==="number"){if(sharedConfig.context)return current;if(t==="number"&&(value=value.toString()),multi){let node=current[0];node&&node.nodeType===3?node.data=value:node=document.createTextNode(value),current=cleanChildren(parent,current,marker,node)}else current!==""&&typeof current=="string"?current=parent.firstChild.data=value:current=parent.textContent=value}else if(value==null||t==="boolean"){if(sharedConfig.context)return current;current=cleanChildren(parent,current,marker)}else{if(t==="function")return createRenderEffect(()=>{let v=value();for(;typeof v=="function";)v=v();current=insertExpression(parent,v,current,marker)}),()=>current;if(Array.isArray(value)){let array=[],currentArray=current&&Array.isArray(current);if(normalizeIncomingArray(array,value,current,unwrapArray))return createRenderEffect(()=>current=insertExpression(parent,array,current,marker,!0)),()=>current;if(sharedConfig.context){if(!array.length)return current;for(let i=0;i<array.length;i++)if(array[i].parentNode)return current=array}if(array.length===0){if(current=cleanChildren(parent,current,marker),multi)return current}else currentArray?current.length===0?appendNodes(parent,array,marker):reconcileArrays(parent,current,array):(current&&cleanChildren(parent),appendNodes(parent,array));current=array}else if(value instanceof Node){if(sharedConfig.context&&value.parentNode)return current=multi?[value]:value;if(Array.isArray(current)){if(multi)return current=cleanChildren(parent,current,marker,value);cleanChildren(parent,current,null,value)}else current==null||current===""||!parent.firstChild?parent.appendChild(value):parent.replaceChild(value,parent.firstChild);current=value}else console.warn("Unrecognized value. Skipped inserting",value)}return current}function normalizeIncomingArray(normalized,array,current,unwrap2){let dynamic=!1;for(let i=0,len=array.length;i<len;i++){let item=array[i],prev=current&&current[i];if(item instanceof Node)normalized.push(item);else if(!(item==null||item===!0||item===!1))if(Array.isArray(item))dynamic=normalizeIncomingArray(normalized,item,prev)||dynamic;else if(typeof item=="function")if(unwrap2){for(;typeof item=="function";)item=item();dynamic=normalizeIncomingArray(normalized,Array.isArray(item)?item:[item],Array.isArray(prev)?prev:[prev])||dynamic}else normalized.push(item),dynamic=!0;else{let value=String(item);prev&&prev.nodeType===3?(prev.data=value,normalized.push(prev)):normalized.push(document.createTextNode(value))}}return dynamic}function appendNodes(parent,array,marker=null){for(let i=0,len=array.length;i<len;i++)parent.insertBefore(array[i],marker)}function cleanChildren(parent,current,marker,replacement){if(marker===void 0)return parent.textContent="";let node=replacement||document.createTextNode("");if(current.length){let inserted=!1;for(let i=current.length-1;i>=0;i--){let el=current[i];if(node!==el){let isParent=el.parentNode===parent;!inserted&&!i?isParent?parent.replaceChild(node,el):parent.insertBefore(node,marker):isParent&&el.remove()}else inserted=!0}}else parent.insertBefore(node,marker);return[node]}function gatherHydratable(element,root){let templates=element.querySelectorAll("*[data-hk]");for(let i=0;i<templates.length;i++){let node=templates[i],key=node.getAttribute("data-hk");(!root||key.startsWith(root))&&!sharedConfig.registry.has(key)&&sharedConfig.registry.set(key,node)}}function getHydrationKey(){let hydrate2=sharedConfig.context;return"".concat(hydrate2.id).concat(hydrate2.count++)}function NoHydration(props){return sharedConfig.context?void 0:props.children}function Hydration(props){return props.children}function voidFn(){}function throwInBrowser(func){let err=new Error("".concat(func.name," is not supported in the browser, returning undefined"));console.error(err)}function renderToString(fn,options){throwInBrowser(renderToString)}function renderToStringAsync(fn,options){throwInBrowser(renderToStringAsync)}function renderToStream(fn,options){throwInBrowser(renderToStream)}function ssr(template2,...nodes){}function ssrElement(name,props,children2,needsId){}function ssrClassList(value){}function ssrStyle(value){}function ssrAttribute(key,value){}function ssrHydrationKey(){}function resolveSSRNode(node){}function escape2(html){}function ssrSpread(props,isSVG,skipChildren){}function createElement(tagName,isSVG=!1){return isSVG?document.createElementNS(SVG_NAMESPACE,tagName):document.createElement(tagName)}function Portal(props){let{useShadow}=props,marker=document.createTextNode(""),mount=()=>props.mount||document.body,content=createMemo(renderPortal());function renderPortal(){if(sharedConfig.context){let[s,set]=createSignal(!1);return onMount(()=>set(!0)),()=>s()&&props.children}else return()=>props.children}return createRenderEffect(()=>{let el=mount();if(el instanceof HTMLHeadElement){let[clean,setClean]=createSignal(!1),cleanup=()=>setClean(!0);createRoot(dispose2=>insert(el,()=>clean()?dispose2():content(),null)),onCleanup(()=>{sharedConfig.context?queueMicrotask(cleanup):cleanup()})}else{let container=createElement(props.isSVG?"g":"div",props.isSVG),renderRoot=useShadow&&container.attachShadow?container.attachShadow({mode:"open"}):container;Object.defineProperty(container,"_$host",{get(){return marker.parentNode},configurable:!0}),insert(renderRoot,content),el.appendChild(container),props.ref&&props.ref(container),onCleanup(()=>el.removeChild(container))}}),marker}function Dynamic(props){let[p,others]=splitProps(props,["component"]),cached=createMemo(()=>p.component);return createMemo(()=>{let component=cached();switch(typeof component){case"function":return Object.assign(component,{[$DEVCOMP]:!0}),untrack(()=>component(others));case"string":let isSvg=SVGElements.has(component),el=sharedConfig.context?getNextElement():createElement(component,isSvg);return spread(el,others,isSvg),el}})}var booleans,Properties,ChildProperties,Aliases,PropAliases,DelegatedEvents,SVGElements,SVGNamespace,DOMElements,$$EVENTS,isServer,isDev,SVG_NAMESPACE,hydrate,init_web=__esm({"node_modules/solid-js/web/dist/web.js"(){init_define_process_env();init_shim();init_solid();init_solid();booleans=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],Properties=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...booleans]),ChildProperties=new Set(["innerHTML","textContent","innerText","children"]),Aliases=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),PropAliases=Object.assign(Object.create(null),{class:"className",formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly"}),DelegatedEvents=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),SVGElements=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),SVGNamespace={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},DOMElements=new Set(["html","base","head","link","meta","style","title","body","address","article","aside","footer","header","main","nav","section","body","blockquote","dd","div","dl","dt","figcaption","figure","hr","li","ol","p","pre","ul","a","abbr","b","bdi","bdo","br","cite","code","data","dfn","em","i","kbd","mark","q","rp","rt","ruby","s","samp","small","span","strong","sub","sup","time","u","var","wbr","area","audio","img","map","track","video","embed","iframe","object","param","picture","portal","source","svg","math","canvas","noscript","script","del","ins","caption","col","colgroup","table","tbody","td","tfoot","th","thead","tr","button","datalist","fieldset","form","input","label","legend","meter","optgroup","option","output","progress","select","textarea","details","dialog","menu","summary","details","slot","template","acronym","applet","basefont","bgsound","big","blink","center","content","dir","font","frame","frameset","hgroup","image","keygen","marquee","menuitem","nobr","noembed","noframes","plaintext","rb","rtc","shadow","spacer","strike","tt","xmp","a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","head","header","hgroup","hr","html","i","iframe","image","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","nobr","noembed","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","plaintext","portal","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr","xmp","input"]);$$EVENTS="_$DX_DELEGATE";isServer=!1,isDev=!1,SVG_NAMESPACE="http://www.w3.org/2000/svg";hydrate=(...args)=>(enableHydration(),hydrate$1(...args))}});var require_web_immediate=__commonJS({"node_modules/core-js/modules/web.immediate.js"(){init_define_process_env();init_shim();var $2=require_export(),global=require_global(),task=require_task(),FORCED=!global.setImmediate||!global.clearImmediate;$2({global:!0,bind:!0,enumerable:!0,forced:FORCED},{setImmediate:task.set,clearImmediate:task.clear})}});var require_workflow_utils=__commonJS({"lib-browser-old/lang/workflow/workflow_utils.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_flat_map();require_es_array_unscopables_flat_map();require_es_array_iterator();require_web_dom_collections_iterator();require_es_object_from_entries();var u=require_u2(),nodes=require_nodes(),expression_utils=require_expression_utils(),shrink=require_shrink(),{S}=shrink,workflow_utils=exports;workflow_utils.find_my_expressions=function(item,filter){return item?(filter=nodes.make_filter(filter),nodes.raw_properties(item,nodes.new_workflow_item).flatMap(prop=>{let sub_expressions=expression_utils.expression_find_expressions(prop,filter);return filter(prop)?[prop,...sub_expressions]:sub_expressions})):[]};workflow_utils.event_find_expressions=function(event,filter){return event?(filter=nodes.make_filter(filter),[event,...nodes.raw_children(event,S.actions)].flatMap(item=>workflow_utils.find_my_expressions(item,filter))):[]}}});var require_service_type_parser=__commonJS({"lib-browser-old/services/shared/service_type_parser.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.get_plugin_and_type=get_plugin_and_type;exports.get_plugin_id=get_plugin_id;require_es_array_includes();require_es_string_includes();require_es_regexp_exec();require_es_string_split();var plugin_consts=_interopRequireWildcard(require_plugin());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function get_plugin_and_type(type){if(!type)return[null,null];if(!type.includes(plugin_consts.PLUGIN_SEPARATOR))return[null,type];let splitted=type.split(plugin_consts.PLUGIN_SEPARATOR);return[splitted[0],splitted.slice(1).join(plugin_consts.PLUGIN_SEPARATOR)]}function get_plugin_id(plugin_id){return plugin_id.split("_current")[0]}}});var require_containers=__commonJS({"lib-browser-old/core/core_elements/legacy/responsive_v0/shared/containers.js"(exports){"use strict";init_define_process_env();init_shim();var u=require_u2(),containers=exports;containers.resize_container_width=function(instance,width){function get_width(){var _instance$element$roo;if((_instance$element$roo=instance.element.root())!=null&&_instance$element$roo.use_responsive_algorithm()){var _u$real_inner_width;return(_u$real_inner_width=u.real_inner_width(instance.get_canvas()))!=null?_u$real_inner_width:width}else return instance.element.get_width()}let original_width=get_width();if(original_width){var _instance$child_conta;(_instance$child_conta=instance.child_container)==null||_instance$child_conta.resize_width(original_width)}instance._set_immediate(()=>{u.wait_for_updates(()=>{let new_width=get_width();if(new_width&&Math.abs(new_width-original_width)>1){var _instance$child_conta2;(_instance$child_conta2=instance.child_container)==null||_instance$child_conta2.resize_width(new_width)}})})}}});var require_elements_utils=__commonJS({"lib-browser-old/lang/elements/elements_utils.js"(exports){"use strict";init_define_process_env();init_shim();require_es_symbol_description();require_es_error_cause();require_es_object_get_own_property_descriptors();require_es_parse_float();require_es_array_iterator();require_web_dom_collections_iterator();require_web_dom_collections_for_each();require_es_regexp_exec();require_es_string_replace();require_es_array_flat_map();require_es_array_unscopables_flat_map();require_es_array_includes();function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var u=require_u2(),b_object=require_b_object(),mode_check=require_mode_check(),Lib=require_lib(),shrink=require_shrink(),nodes=require_nodes(),expression_utils=require_expression_utils(),workflow_utils=require_workflow_utils(),logger=require_logger(),service_type_parser=require_service_type_parser(),{S}=shrink,element_eval=require_element_eval(),nodes_utils=require_nodes_utils(),appquery=require_appquery(),containers=require_containers(),elements_utils=exports;elements_utils._use_issue_checker=()=>{var _Lib$visual_edit$issu,_Lib$visual_edit;return(_Lib$visual_edit$issu=(_Lib$visual_edit=Lib().visual_edit)==null?void 0:_Lib$visual_edit.issue_checker_on)!=null?_Lib$visual_edit$issu:!0};var layout_resizing_keylists=[];elements_utils.create_layout_resizing_keylist=function(cb){let keylist=u.MakeKeyList();layout_resizing_keylists.push(keylist),u.wait_for_updates(()=>{u.WaitFor(keylist,()=>{u.array_remove(layout_resizing_keylists,keylist),cb()})})};elements_utils.add_layout_resizing_key=function(){let new_key=u.MakeKey(30,"layout_resizing_key");return layout_resizing_keylists.forEach(keylist=>{keylist.add_key(new_key)}),new_key};elements_utils.make_opacity_transition=function(instance,properties){var _instance$element;let opacity=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,static_opacity=instance.get_static_property("opacity",!0);if(((_instance$element=instance.element)==null?void 0:_instance$element.field("opacity"))==null&&static_opacity==null||(opacity==null||opacity===""?opacity=static_opacity/100:opacity=parseFloat(opacity),opacity===1))return properties.animation;let custom_animation_name="custom_"+opacity+"_"+properties.animation,overwritten_opacity=!1,current_transition;if(properties.animation in $.Velocity.RegisterEffect.packagedEffects)current_transition=b_object.json_deep_copy($.Velocity.RegisterEffect.packagedEffects[properties.animation]);else if(properties.animation in u.custom_transitions)current_transition=b_object.json_deep_copy(u.custom_transitions[properties.animation]);else return logger.warn("Could not find animation",{name:properties.animation}),properties.animation;for(let call of current_transition.calls)"opacity"in call[0]&&(typeof call[0].opacity=="number"?(call[0].opacity*=opacity,overwritten_opacity=!0):call[0].opacity.forEach((item,i)=>{typeof item=="number"&&(call[0].opacity[i]*=opacity,overwritten_opacity=!0)}));return overwritten_opacity&&window.$.Velocity.RegisterEffect(custom_animation_name,current_transition),overwritten_opacity?custom_animation_name:properties.animation};elements_utils.perform_animate_in=function(instance,properties,options){var _instance$_transforms,_instance$_transforms2,_instance$_transforms3,_instance$_transforms4,_instance$_transforms5;let legacy=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,canvas=instance.get_canvas();legacy||(legacy=!instance.element.E.uses_css_responsive),(_instance$_transforms=instance._transforms)!=null||(instance._transforms={}),(_instance$_transforms3=(_instance$_transforms2=instance._transforms).initial_transform)!=null||(_instance$_transforms2.initial_transform=canvas[0].style.transform);let is_element_a_dropdown=instance.element.type()==="Dropdown";(_instance$_transforms5=(_instance$_transforms4=instance._transforms).initial_opacity)!=null||(_instance$_transforms4.initial_opacity=canvas[0].style.opacity),instance._is_visible_me=!0,instance._update_visible(),instance._display_me(),instance.state("opacity_override",0),canvas[0].style.opacity=0,elements_utils.create_layout_resizing_keylist(()=>{instance._has_been_hidden!==!0&&u.run_once(30,()=>{let opacity;if(!legacy)if(instance._is_animating)opacity=instance._instance_opacity;else{var _element_eval$evaluat;instance._instance_opacity=opacity,opacity=((_element_eval$evaluat=element_eval.evaluate_property(instance,"opacity"))!=null?_element_eval$evaluat:100)/100}instance.set_animating(!0);let velocity_data=canvas.data("velocity");velocity_data&&(velocity_data.transformCache={});let animation_name=elements_utils.make_opacity_transition(instance,properties,opacity);u.velocity(canvas,animation_name,_objectSpread(_objectSpread({},options),{},{complete_cb(){var _instance$element$roo;instance.set_animating(!1),canvas[0].style.transform=instance._transforms.initial_transform,is_element_a_dropdown&&(canvas[0].style.opacity=instance._transforms.initial_opacity),instance._transforms=void 0,instance.state("opacity_override",null),!mode_check.running_test()&&(((_instance$element$roo=instance.element.root())==null?void 0:_instance$element$roo.get_responsive_version())<1||!instance.element.E.uses_css_responsive)&&containers.resize_container_width(instance)},display:""}))})})};elements_utils.perform_animate_out=function(instance,properties,options){var _canvas$velocity,_instance$_transforms6,_instance$_transforms7,_instance$_transforms8,_instance$_transforms9,_instance$_transforms10;let callback=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,canvas=instance.get_canvas();(_canvas$velocity=canvas.velocity)==null||_canvas$velocity.call(canvas,"stop",!0),(_instance$_transforms6=instance._transforms)!=null||(instance._transforms={}),(_instance$_transforms8=(_instance$_transforms7=instance._transforms).initial_opacity)!=null||(_instance$_transforms7.initial_opacity=canvas[0].style.opacity),(_instance$_transforms10=(_instance$_transforms9=instance._transforms).initial_transform)!=null||(_instance$_transforms9.initial_transform=canvas[0].style.transform);let velocity_data=canvas.data("velocity");velocity_data&&(velocity_data.transformCache={});let animate_options=_objectSpread(_objectSpread(_objectSpread({},instance.get_hidden_css()),options),{},{complete_cb:()=>{instance.set_animating(!1),canvas[0].style.transform=instance._transforms.initial_transform,canvas[0].style.opacity=instance._transforms.initial_opacity,instance._transforms=void 0,instance._is_visible_me=!1,instance._update_visible(),instance.state("opacity_override",null),callback==null||callback()}}),opacity;instance._is_animating?opacity=instance._instance_opacity:(opacity=canvas[0].style.opacity,instance._instance_opacity=opacity,instance.state("opacity_override",opacity)),instance.set_animating(!0);let animation_name=elements_utils.make_opacity_transition(instance,properties,opacity);u.velocity(canvas,animation_name,animate_options)};elements_utils.get_states_from_raw_json=json=>json.child("states").children().filter(state_json=>state_json.exists());function new_state(json){return nodes.create(nodes.STATE,json)}var remove_space_regex=/ /g;elements_utils.get_short_display=function(type){var _element_obj$display$,_element_obj$display;let element_obj=Lib().load_plugin(Lib().plugin_prefixes.element+type,!0);return(_element_obj$display$=element_obj==null||(_element_obj$display=element_obj.display)==null?void 0:_element_obj$display.replace(remove_space_regex,""))!=null?_element_obj$display$:service_type_parser.get_plugin_and_type(type)[1]};elements_utils.find_elements=function(element,filter){if(!element)return[];filter=nodes.make_filter(filter);let children2=nodes.raw_children(element,S.elements),results=[];for(let child of children2)filter(child)&&results.push(child),results.push(...elements_utils.find_elements(child,filter));return results};elements_utils.element_find_expressions=function(element,filter){var _element$_raw;let options=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{include_style_expression:!1,return_with_element_info:!1},_seen_nodes=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(!element||_seen_nodes[element._raw.id])return[];_seen_nodes[element._raw.id]=!0,filter=nodes.make_filter(filter);let properties=nodes.raw_properties(element,el=>nodes.new_element(el)),direct_property_expressions=properties.filter(filter),property_subexpressions=properties.flatMap(property=>expression_utils.expression_find_expressions(property,filter)),style2=(_element$_raw=element._raw)==null?void 0:_element$_raw[S.style],style_state_expressions=[];if(style2!=null&&options.include_style_expression){let raw_style=nodes_utils.to_raw(appquery.style(style2));_seen_nodes[raw_style._raw.id]=!0,style_state_expressions=nodes.raw_children(raw_style,S.states).flatMap(state=>elements_utils.state_find_expressions(state,filter))}let state_expressions=nodes.raw_children(element,S.states).flatMap(state=>elements_utils.state_find_expressions(state,filter)),event_expressions=nodes.raw_children(element,S.workflows).flatMap(event=>workflow_utils.event_find_expressions(event,filter)),child_element_expressions=elements_utils.find_elements(element).flatMap(e=>elements_utils.element_find_expressions(e,filter,{include_style_expression:options.include_style_expression,return_with_element_info:options.return_with_element_info},_seen_nodes));return options.return_with_element_info?[...direct_property_expressions.map(exp=>[exp,element._raw.id]),...property_subexpressions.map(exp=>[exp,element._raw.id]),...style_state_expressions.map(exp=>[exp,element._raw.id]),...state_expressions.map(exp=>[exp,element._raw.id]),...event_expressions.map(exp=>[exp,element._id]),...child_element_expressions]:[...direct_property_expressions,...property_subexpressions,...style_state_expressions,...state_expressions,...event_expressions,...child_element_expressions]};elements_utils.state_find_expressions=function(state,filter){if(!state)return[];filter=nodes.make_filter(filter);let results=[];function process2(exp){return filter(exp)&&results.push(exp),results.push(...expression_utils.expression_find_expressions(exp,filter))}let condition=nodes.raw_child(state,S.condition,state);condition&&(nodes.set_owner(condition,state,new_state),process2(condition));for(let prop of nodes.raw_properties(state,new_state))process2(prop);return results}}});var require_Counter=__commonJS({"lib-browser-old/u/shared/Counter.js"(exports){"use strict";init_define_process_env();init_shim();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=exports.DummyCounter=void 0;require_es_array_iterator();require_web_dom_collections_iterator();require_es_symbol_description();require_es_error_cause();var mode_check=_interopRequireWildcard(require_mode_check());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var Counter=class _Counter{constructor(shape){this._map=void 0,this._total=void 0,typeof shape=="number"||!shape?this._total=shape!=null?shape:0:this._map=_objectSpread({},shape)}static onClient(shape){return mode_check.on_client()?new _Counter(shape):new DummyCounter}withTotal(){var _this$_total;return(_this$_total=this._total)!=null||(this._total=0),this}get total(){var _this$_total2;return(_this$_total2=this._total)!=null?_this$_total2:0}get(path){if(path===void 0){var _this$_total3;return(_this$_total3=this._total)!=null?_this$_total3:0}else{var _this$_map$path,_this$_map;return(_this$_map$path=(_this$_map=this._map)==null?void 0:_this$_map[path])!=null?_this$_map$path:0}}add(pathOrValue,valueOrEmpty){let[path,value]=typeof pathOrValue=="number"?[void 0,pathOrValue!=null?pathOrValue:1]:[pathOrValue,valueOrEmpty!=null?valueOrEmpty:1];if(typeof this._total=="number"&&(this._total+=value),typeof path<"u"){var _this$_map2,_this$_map$path2;(_this$_map2=this._map)!=null||(this._map={}),this._map[path]=((_this$_map$path2=this._map[path])!=null?_this$_map$path2:0)+value}}toJSON(){return this._total!==void 0&&this._map!==void 0?_objectSpread({total:this.total},this._map):this._total!==void 0?this._total:this._map!==void 0?_objectSpread({},this._map):0}};exports.default=Counter;var DummyCounter=class extends Counter{get(){return 0}add(){}};exports.DummyCounter=DummyCounter}});var require_rendering_perf=__commonJS({"lib-browser-old/lang/elements/rendering_perf.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.element_counts=exports.counts=exports.LifecycleEvent=exports.DrawReason=exports.DrawPhase=void 0;exports.get_current_phase=get_current_phase;exports.measure_initial_draw=measure_initial_draw;exports.record_defer=record_defer;exports.record_lifecycle=record_lifecycle;exports.with_draw_reason=with_draw_reason;var _Counter=_interopRequireDefault(require_Counter());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DrawReason=function(DrawReason2){return DrawReason2.Unknown="Unknown",DrawReason2.DeferFlagOff="DeferFlagOff",DrawReason2.VisibleOnPageLoad="VisibleOnPageLoad",DrawReason2.BecameVisible="BecameVisible",DrawReason2.CantDefer="CantDefer",DrawReason2.NeedsChildrenSize="NeedsChildrenSize",DrawReason2.SizeNeeded="SizeNeeded",DrawReason2}({});exports.DrawReason=DrawReason;var LifecycleEvent=function(LifecycleEvent2){return LifecycleEvent2.Constructed="Constructed",LifecycleEvent2.Registered="Registered",LifecycleEvent2.Drawn="Drawn",LifecycleEvent2}({});exports.LifecycleEvent=LifecycleEvent;var DrawPhase=function(DrawPhase2){return DrawPhase2.NotStarted="NotStarted",DrawPhase2.InitialDraw="InitialDraw",DrawPhase2.PostInitialDraw="PostInitialDraw",DrawPhase2}({});exports.DrawPhase=DrawPhase;var draw_status={draw_phase:DrawPhase.NotStarted,draw_reason:DrawReason.VisibleOnPageLoad},counts={lifecycle:_Counter.default.onClient(),elements:{initially_drawn:_Counter.default.onClient().withTotal(),initially_deferred:_Counter.default.onClient(),eventually_drawn:_Counter.default.onClient().withTotal()}};exports.counts=counts;var element_counts={element_instances:_Counter.default.onClient().withTotal()};exports.element_counts=element_counts;typeof window<"u"&&(window.element_performance_counts=counts);function with_draw_reason(draw_reason,fn){let prev_draw_reason=draw_status.draw_reason;try{return draw_status.draw_reason=draw_reason,fn()}finally{draw_status.draw_reason=prev_draw_reason}}function record_defer(count){draw_status.draw_phase===DrawPhase.InitialDraw&&counts.elements.initially_deferred.add(count)}function record_lifecycle(event){let count=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;counts.lifecycle.add(event,count);let{draw_phase,draw_reason}=draw_status;event===LifecycleEvent.Drawn&&(draw_phase===DrawPhase.InitialDraw?counts.elements.initially_drawn.add(draw_reason,count):counts.elements.eventually_drawn.add(draw_reason,count))}function measure_initial_draw(options,fn){let{deferred_drawing_enabled=!1}=options;draw_status.draw_phase=DrawPhase.InitialDraw,draw_status.draw_reason=DrawReason.VisibleOnPageLoad;try{fn()}finally{draw_status.draw_phase=DrawPhase.PostInitialDraw,draw_status.draw_reason=DrawReason.Unknown}if(deferred_drawing_enabled){let drawn=counts.elements.initially_drawn;return{deferred_drawing_enabled:!0,elements_initially_drawn:drawn.total,elements_initially_deferred:counts.elements.initially_deferred.total,elements_drawn_because_visible:drawn.get(DrawReason.VisibleOnPageLoad),elements_drawn_because_undeferrable:drawn.get(DrawReason.CantDefer),elements_drawn_because_size:drawn.get(DrawReason.NeedsChildrenSize)}}else return{deferred_drawing_enabled:!1}}function get_current_phase(){return draw_status.draw_phase}}});var require_resize_observer=__commonJS({"lib-browser-old/u/client/resize_observer.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.observe=observe;exports.unobserve=unobserve;require_es_array_iterator();require_web_dom_collections_iterator();var observer=null;function handleResize(entries){for(let entry of entries){var _entry$target$_b_resi,_entry$target;(_entry$target$_b_resi=(_entry$target=entry.target)._b_resize_fn)==null||_entry$target$_b_resi.call(_entry$target,entry)}}function observe(element,fn){let type=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"border-box";if(typeof ResizeObserver<"u"){var _observer;element._b_resize_fn=fn,(_observer=observer)!=null||(observer=new ResizeObserver(handleResize)),observer.observe(element,{box:type})}}function unobserve(element){var _observer2;(_observer2=observer)==null||_observer2.unobserve(element),delete element._b_resize_fn}}});var require_now=__commonJS({"node_modules/lodash/now.js"(exports,module){init_define_process_env();init_shim();var root=require_root(),now=function(){return root.Date.now()};module.exports=now}});var require_trimmedEndIndex=__commonJS({"node_modules/lodash/_trimmedEndIndex.js"(exports,module){init_define_process_env();init_shim();var reWhitespace=/\s/;function trimmedEndIndex(string){for(var index=string.length;index--&&reWhitespace.test(string.charAt(index)););return index}module.exports=trimmedEndIndex}});var require_baseTrim=__commonJS({"node_modules/lodash/_baseTrim.js"(exports,module){init_define_process_env();init_shim();var trimmedEndIndex=require_trimmedEndIndex(),reTrimStart=/^\s+/;function baseTrim(string){return string&&string.slice(0,trimmedEndIndex(string)+1).replace(reTrimStart,"")}module.exports=baseTrim}});var require_toNumber=__commonJS({"node_modules/lodash/toNumber.js"(exports,module){init_define_process_env();init_shim();var baseTrim=require_baseTrim(),isObject=require_isObject(),isSymbol=require_isSymbol(),NAN=0/0,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(value){if(typeof value=="number")return value;if(isSymbol(value))return NAN;if(isObject(value)){var other=typeof value.valueOf=="function"?value.valueOf():value;value=isObject(other)?other+"":other}if(typeof value!="string")return value===0?value:+value;value=baseTrim(value);var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}module.exports=toNumber}});var require_debounce=__commonJS({"node_modules/lodash/debounce.js"(exports,module){init_define_process_env();init_shim();var isObject=require_isObject(),now=require_now(),toNumber=require_toNumber(),FUNC_ERROR_TEXT="Expected a function",nativeMax=Math.max,nativeMin=Math.min;function debounce(func,wait,options){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=!1,maxing=!1,trailing=!0;if(typeof func!="function")throw new TypeError(FUNC_ERROR_TEXT);wait=toNumber(wait)||0,isObject(options)&&(leading=!!options.leading,maxing="maxWait"in options,maxWait=maxing?nativeMax(toNumber(options.maxWait)||0,wait):maxWait,trailing="trailing"in options?!!options.trailing:trailing);function invokeFunc(time){var args=lastArgs,thisArg=lastThis;return lastArgs=lastThis=void 0,lastInvokeTime=time,result=func.apply(thisArg,args),result}function leadingEdge(time){return lastInvokeTime=time,timerId=setTimeout(timerExpired,wait),leading?invokeFunc(time):result}function remainingWait(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime,timeWaiting=wait-timeSinceLastCall;return maxing?nativeMin(timeWaiting,maxWait-timeSinceLastInvoke):timeWaiting}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime;return lastCallTime===void 0||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&timeSinceLastInvoke>=maxWait}function timerExpired(){var time=now();if(shouldInvoke(time))return trailingEdge(time);timerId=setTimeout(timerExpired,remainingWait(time))}function trailingEdge(time){return timerId=void 0,trailing&&lastArgs?invokeFunc(time):(lastArgs=lastThis=void 0,result)}function cancel(){timerId!==void 0&&clearTimeout(timerId),lastInvokeTime=0,lastArgs=lastCallTime=lastThis=timerId=void 0}function flush(){return timerId===void 0?result:trailingEdge(now())}function debounced(){var time=now(),isInvoking=shouldInvoke(time);if(lastArgs=arguments,lastThis=this,lastCallTime=time,isInvoking){if(timerId===void 0)return leadingEdge(lastCallTime);if(maxing)return clearTimeout(timerId),timerId=setTimeout(timerExpired,wait),invokeFunc(lastCallTime)}return timerId===void 0&&(timerId=setTimeout(timerExpired,wait)),result}return debounced.cancel=cancel,debounced.flush=flush,debounced}module.exports=debounce}});var require_core_ds_element_utilities=__commonJS({"lib-browser-old/core/core_datasources/utilities/core_ds_element_utilities.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.element_parent_value=exports.context_parent_value=void 0;exports.get_ancestor_element=get_ancestor_element;exports.get_element_parent=void 0;exports.get_runmode_element_ancestor_instance=get_runmode_element_ancestor_instance;exports.get_runtime_parent=get_runtime_parent;exports.is_element_visible=is_element_visible;require_es_array_includes();require_es_string_includes();require_es_array_iterator();require_web_dom_collections_iterator();var btypes=_interopRequireWildcard(require_btypes()),_appquery=_interopRequireDefault(require_appquery());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var get_element_parent=datasource=>{var _datasource$context_e;return(_datasource$context_e=datasource.context_element())==null?void 0:_datasource$context_e.parent()};exports.get_element_parent=get_element_parent;function get_runtime_parent(context){var _context$element;let targ=(_context$element=context.element)==null?void 0:_context$element.parent();for(;targ&&targ.element.type()!=="RepeatingGroup"&&targ.element.type()!=="Table"&&!targ.element.get_states().includes("group_data");)targ=targ.parent();return targ}function get_ancestor_element(type,datasource){if(type==="TableMainAxis"){let target_id=get_ancestor_element("TableCell",datasource).get_static_property("cell_main_axis_id");return _appquery.default.element(target_id)}let element=datasource.context_element();for(;element&&element.type()!==type;)element=element.parent();return element}function get_runmode_element_ancestor_instance(type,element_instance,instance_cb){if(type==="TableMainAxis"){let table=get_runmode_element_ancestor_instance("Table",element_instance,instance_cb),target_id=get_runmode_element_ancestor_instance("TableCell",element_instance).get_static_property("cell_main_axis_id"),main_axis=table.find_instance_by_id(target_id);return instance_cb==null||instance_cb(main_axis),main_axis}for(;element_instance&&element_instance.element.type()!==type;){if(type==="TableCrossAxis"&&element_instance.element.type()==="GroupItem")return instance_cb==null||instance_cb(element_instance),element_instance;instance_cb==null||instance_cb(element_instance),element_instance=element_instance.parent()}return instance_cb==null||instance_cb(element_instance),element_instance}var context_parent_value=context_element=>{var _context_element$type,_context_element$pare4,_context_element$pare5;if((context_element==null||(_context_element$type=context_element.type)==null?void 0:_context_element$type.call(context_element))==="TableCell"){var _context_element$pare,_context_element$pare2,_context_element$pare3;return(_context_element$pare=(_context_element$pare2=context_element.parent())==null||(_context_element$pare3=_context_element$pare2.parent())==null?void 0:_context_element$pare3.get_static_property("group_type"))!=null?_context_element$pare:null}return(_context_element$pare4=context_element==null||(_context_element$pare5=context_element.parent())==null?void 0:_context_element$pare5.get_static_property("group_type"))!=null?_context_element$pare4:null};exports.context_parent_value=context_parent_value;var element_parent_value=(static_property,datasource)=>btypes.get(context_parent_value(datasource.context_element()));exports.element_parent_value=element_parent_value;function is_repeating(element){return element.draws_own_children()}function is_element_visible(element,element_node){var _element$root,_element_node$root,_element_node$parents;if(!element_node||((_element$root=element.root())==null?void 0:_element$root.id())!==((_element_node$root=element_node.root())==null?void 0:_element_node$root.id()))return!1;let okay_repeating_elements=(_element_node$parents=element_node.parents)==null?void 0:_element_node$parents.call(element_node,is_repeating).map(r=>r.id());function is_okay(e){for(let r of e.parents(is_repeating))if(!okay_repeating_elements.includes(r.id()))return!1;return!0}return is_okay(element)}}});var require_locations=__commonJS({"lib-browser-old/constants/locations.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.VERSION_PATH_PREFIX=exports.VERSIONS_DISPLAY=exports.TEST_VERSION_DISPLAY=exports.TEST_VERSION=exports.TEMPLATE_VERSIONS=exports.RESERVED_VERSION_NAMES=exports.PUBLISHED_TEMPLATE_VERSION=exports.PENDING_TEMPLATE_VERSION=exports.OKAY_VERSIONS=exports.MAIN_VERSION_DISPLAY=exports.LIVE_VERSION_DISPLAY=exports.LIVE_VERSION=exports.LIVE_ENVIRONMENT_DISPLAY=exports.HOTFIX_VERSION_DISPLAY=exports.ENVIRONMENTS=exports.DEVELOPMENT_ENVIRONMENT_DISPLAY=exports.DEFAULT_TEST_VC_DESCRIPTION=exports.DEFAULT_TEST_NO_VC_DESCRIPTION=exports.DEFAULT_LIVE_DESCRIPTION=exports.DEFAULT_HOTFIX_DESCRIPTION=exports.DEFAULT_CUSTOM_BRANCH_DESCRIPTION=exports.BREAKING_REVISION_TOPIC=void 0;var _safe_require=_interopRequireDefault(require_safe_require());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_safe_require.default.safe_register("./constants/locations",exports);var LIVE_ENVIRONMENT_DISPLAY="Live";exports.LIVE_ENVIRONMENT_DISPLAY=LIVE_ENVIRONMENT_DISPLAY;var DEVELOPMENT_ENVIRONMENT_DISPLAY="Development";exports.DEVELOPMENT_ENVIRONMENT_DISPLAY=DEVELOPMENT_ENVIRONMENT_DISPLAY;var ENVIRONMENTS=[LIVE_ENVIRONMENT_DISPLAY,DEVELOPMENT_ENVIRONMENT_DISPLAY];exports.ENVIRONMENTS=ENVIRONMENTS;var LIVE_VERSION="live";exports.LIVE_VERSION=LIVE_VERSION;var TEST_VERSION="test";exports.TEST_VERSION=TEST_VERSION;var RESERVED_VERSION_NAMES=[LIVE_VERSION,TEST_VERSION,DEVELOPMENT_ENVIRONMENT_DISPLAY,LIVE_ENVIRONMENT_DISPLAY].map(version_name=>version_name.toLowerCase());exports.RESERVED_VERSION_NAMES=RESERVED_VERSION_NAMES;var PENDING_TEMPLATE_VERSION="pending_template";exports.PENDING_TEMPLATE_VERSION=PENDING_TEMPLATE_VERSION;var PUBLISHED_TEMPLATE_VERSION="published_template";exports.PUBLISHED_TEMPLATE_VERSION=PUBLISHED_TEMPLATE_VERSION;var BREAKING_REVISION_TOPIC="breaking_revision";exports.BREAKING_REVISION_TOPIC=BREAKING_REVISION_TOPIC;var OKAY_VERSIONS=[LIVE_VERSION,TEST_VERSION];exports.OKAY_VERSIONS=OKAY_VERSIONS;var TEMPLATE_VERSIONS=[PENDING_TEMPLATE_VERSION,PUBLISHED_TEMPLATE_VERSION];exports.TEMPLATE_VERSIONS=TEMPLATE_VERSIONS;var VERSION_PATH_PREFIX="version-";exports.VERSION_PATH_PREFIX=VERSION_PATH_PREFIX;var LIVE_VERSION_DISPLAY="Live";exports.LIVE_VERSION_DISPLAY=LIVE_VERSION_DISPLAY;var TEST_VERSION_DISPLAY="Development";exports.TEST_VERSION_DISPLAY=TEST_VERSION_DISPLAY;var HOTFIX_VERSION_DISPLAY="hotfix";exports.HOTFIX_VERSION_DISPLAY=HOTFIX_VERSION_DISPLAY;var MAIN_VERSION_DISPLAY="Main";exports.MAIN_VERSION_DISPLAY=MAIN_VERSION_DISPLAY;var VERSIONS_DISPLAY={[TEST_VERSION]:TEST_VERSION_DISPLAY,[LIVE_VERSION]:LIVE_VERSION_DISPLAY};exports.VERSIONS_DISPLAY=VERSIONS_DISPLAY;var DEFAULT_TEST_NO_VC_DESCRIPTION="This is your default development branch. Make changes here, and deploy them to Live.";exports.DEFAULT_TEST_NO_VC_DESCRIPTION=DEFAULT_TEST_NO_VC_DESCRIPTION;var DEFAULT_TEST_VC_DESCRIPTION="This is your default deployment branch. Make changes and test them in custom branches, then merge into Main and deploy from Main to Live.";exports.DEFAULT_TEST_VC_DESCRIPTION=DEFAULT_TEST_VC_DESCRIPTION;var DEFAULT_LIVE_DESCRIPTION="This is your live site on the web.";exports.DEFAULT_LIVE_DESCRIPTION=DEFAULT_LIVE_DESCRIPTION;var DEFAULT_CUSTOM_BRANCH_DESCRIPTION="This is your custom branch #BRANCHNAME. Make changes here, and merge them into Main for deployment. You can customize this description.";exports.DEFAULT_CUSTOM_BRANCH_DESCRIPTION=DEFAULT_CUSTOM_BRANCH_DESCRIPTION;var DEFAULT_HOTFIX_DESCRIPTION="Use this branch to make urgent bug fixes or time-sensitive changes, and deploy them directly to Live.";exports.DEFAULT_HOTFIX_DESCRIPTION=DEFAULT_HOTFIX_DESCRIPTION}});var require_location_lookups=__commonJS({"lib-browser-old/geolocation/location_lookups.js"(exports){"use strict";init_define_process_env();init_shim();require_es_symbol_description();require_es_error_cause();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_array_includes();require_es_string_includes();require_es_parse_int();function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var Lib=require_lib(),logger=require_logger(),b_async=require_b_async3(),autorun=require_autorun3(),b_location_utils=require_b_location_utils(),core=require_core2(),b_object=require_b_object(),location_lookups=exports,waiting_for_current_location_watcher=null,current_geographic_location=autorun.Box(null);location_lookups.get_current_geographic_position=function(){if(navigator.geolocation){var _core$request_from_ca;if(!waiting_for_current_location_watcher){let update_position=function(position){let current=current_geographic_location(),current_geo_coords={lat:current==null?void 0:current.lat,lng:current==null?void 0:current.lng};if(!current_geographic_location()||b_location_utils.geographic_distance(current_geo_coords,{lat:position.coords.latitude,lng:position.coords.longitude})>.01)return current_geographic_location({lat:position.coords.latitude,lng:position.coords.longitude})};waiting_for_current_location_watcher=b_async.MakeKey(1/0,"waiting_for_current_location_watcher");let setup_watcher=()=>{navigator.geolocation.watchPosition(update_position,err=>console.log(err),{enableHighAccuracy:!0})};navigator.geolocation.getCurrentPosition(position=>{update_position(position),waiting_for_current_location_watcher.turn(),setup_watcher()},err=>{if(logger.owner_error(err.message),err.message.includes("User denied Geolocation")){waiting_for_current_location_watcher.turn();return}waiting_for_current_location_watcher.turn(),setup_watcher()},{enableHighAccuracy:!1,maximumAge:30*60*1e3})}b_async.ensure_ready(waiting_for_current_location_watcher);let val=current_geographic_location();b_location_utils.round_lat_lng(val);let request=_objectSpread({request_type:"geocode_latlong",language:Lib().app_language()},val);return(_core$request_from_ca=core.request_from_cache(request))!=null?_core$request_from_ca:val}else return null};location_lookups.get_timezone_for_location=function(address){if(!address||!b_location_utils.is_b_location(address))return"";let latitude=address.lat,longitude=address.lng,timestamp=parseInt(Date.now()/1e3),request_data={latitude,longitude,timestamp,request_type:"timezone"};return core.request_timezone(request_data)};location_lookups.get_address_place_autocomplete=(req,cb)=>core.request_autocomplete(b_object.extend({request_type:"autocomplete"},req),cb)}});var require_page_state=__commonJS({"lib-browser-old/lang/evaluation/page_state.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_includes();var u=require_u2(),safe_require=require_safe_require(),appquery=require_appquery(),Lib=require_lib(),locations_consts=require_locations(),location_lookups=require_location_lookups(),page_state=module.exports;safe_require.safe_register("./lang/evaluation/page_state",page_state);page_state.get_basic_datasources=function(root,additional){var _additional,_root$is_api;(_additional=additional)!=null||(additional={});let obj={current_user(){if(Lib().bubble_version()>=23){let id=Lib().current_user()._id();return Lib().db_instance().get(id)}else return Lib().current_user()},page_data(properties,context){return page_state.get_page_data(properties.name,context)},page_data_btype(properties){var _page_state$get_page_;return(_page_state$get_page_=page_state.get_page_data_type(properties.name))!=null?_page_state$get_page_:" null"}};return root!=null&&(_root$is_api=root.is_api)!=null&&_root$is_api.call(root)||u.extend(obj,{current_page_item(){return Lib().pageparam.get()},current_page_item_btype(){var _root$get_static_prop;return(_root$get_static_prop=root.get_static_property("page_item_type"))!=null?_root$get_static_prop:"null"}}),u.extend(obj,additional)};u.on_react_native()?page_state.page_width=u.Box(0):window?page_state.page_width=u.Box($(window).width()):page_state.page_width=u.Box(null,!0);page_state.page_current_scroll_position=u.Box(0);var api_page_data_names=["Website Home","CurrentLanguage","Website Admin Email","Current Date/Time","AppIsTest","AppVersion"],base_data_names=["Website Home","This Url","CurrentLanguage"],custom_definition_names=["Current Page Name"],rest_data_names=["Website Admin Email","Current Date/Time","Current Position","Current Page Width","Current Page Scrolling Position","Page Loaded Above Fold","Page Loaded (Entire)","AppIsTest","AppVersion"];page_state.get_page_data_names=function(context){var _context$element_node,_context$element_node2;if(context.is_api)return api_page_data_names;let res=[...base_data_names];return((_context$element_node=context.element_node)==null||(_context$element_node2=_context$element_node.root())==null?void 0:_context$element_node2.type())==="CustomDefinition"&&res.push(...custom_definition_names),res.push(...rest_data_names),res};page_state.get_page_data_names_new=function(context){var _context$owner_node$c,_context$owner_node,_context$owner_node$c2,_context$owner_node$c3;if(context.owner_type==="BackendWorkflow")return api_page_data_names;let res=[...base_data_names];return((_context$owner_node$c=(_context$owner_node=context.owner_node).context_element)==null||(_context$owner_node$c2=_context$owner_node$c.call(_context$owner_node))==null||(_context$owner_node$c3=_context$owner_node$c2.root())==null?void 0:_context$owner_node$c3.type())==="CustomDefinition"&&res.push(...custom_definition_names),res.push(...rest_data_names),res};page_state.get_all_data_names=function(){return[...base_data_names,...custom_definition_names,...rest_data_names]};page_state.get_page_data=function(name,context){var _context$_current_dat;if(context.is_api&&!api_page_data_names.includes(name))throw new u.UnexpectedError("calling a PageData datasource in API invalid: "+name);if(context.in_pageservice&&!["Current Page Name","Website Home","AppIsTest"].includes(name))throw new u.OwnerError("Datasource not allowed in page",{display:"Calling a data source invalid when generating the page HTML: "+name});switch(name){case"Website Home":return Lib().location.get_server_base();case"This Url":return Lib().location.my_location();case"Current Page Name":return Lib().location.get_page();case"CurrentLanguage":return Lib().app_language();case"AppIsTest":return Lib().app_version()!==locations_consts.LIVE_VERSION;case"AppVersion":return appquery.app_version();case"Website Admin Email":return appquery.admin_email();case"Current Date/Time":return(_context$_current_dat=context._current_date_time)!=null||(context._current_date_time=new Date(u.timestamp())),context._current_date_time;case"Current Position":return context.frozen_state&&u.on_server()?context.frozen_state.other_data["Current Position"]:location_lookups.get_current_geographic_position();case"Current Page Width":return u.on_client()?page_state.page_width():context.frozen_state.other_data["Current Page Width"];case"Current Page Scrolling Position":return u.on_client()?page_state.page_current_scroll_position():context.frozen_state.other_data["Current Page Scroll Position"];case"Is Reset Password Token Valid":return null;case"Page Loaded Above Fold":return u.on_server()?!0:Lib().element.page_done_loading();case"Page Loaded (Entire)":return u.on_server()?!0:Lib().element.page_done_loading(!0);case"IsOffline":return u.on_server()?!1:!Lib().location.is_online();default:throw new u.UnexpectedError("unrecognized: "+name)}};page_state.get_page_data_ready_key=()=>u.FakeKey();page_state.get_page_data_type=function(name){switch(name){case"Current Date/Time":return"date";case"Current Position":return"geographic_address";case"Current Page Width":return"number";case"Current Page Scrolling Position":return"number";case"Page Loaded Above Fold":case"Page Loaded (Entire)":case"Is Reset Password Token Valid":case"AppIsTest":return"boolean";case"IsOffline":return"boolean";default:return"text"}};page_state.input_focused=u.Box(!1)}});var require_db_utils=__commonJS({"lib-browser-old/db/db_utils.js"(exports){"use strict";init_define_process_env();init_shim();require_es_symbol_description();require_es_error_cause();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.set_lang_btypes=exports.resolve_sorts=exports.lang_btypes=exports.is_timeout_error=exports.get_temp_db=exports.enrich_timeout_error=exports.email_getter=exports.coerce_to_integer=exports.can_group_with=exports.can_group_on=exports.can_aggregate_on=exports.array_to_ids=exports._static_get=exports._is_geographic_object=exports.ObjectBase=void 0;require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_includes();require_es_string_includes();var registry=_interopRequireWildcard(require_registry2()),_value_types=_interopRequireDefault(require_value_types()),loggger=_interopRequireWildcard(require_logger()),hydrate2=_interopRequireWildcard(require_hydrate()),_errors=require_errors(),_u=require_u2(),_b_fiber=require_b_fiber(),_eval=require_eval(),_db=require_db(),_postgres_pool=require_postgres_pool(),_btype_ids=require_btype_ids(),_loggable=require_loggable();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var _lang_btypes=null,set_lang_btypes=input=>_lang_btypes=input;exports.set_lang_btypes=set_lang_btypes;var lang_btypes=()=>_lang_btypes;exports.lang_btypes=lang_btypes;var _is_geographic_object=function(data,value_id){return value_id&&typeof value_id=="string"?value_id==="geographic_address":!!(data.lat&&data.lng&&!data._id)};exports._is_geographic_object=_is_geographic_object;var resolve_sorts=function(sorts_list,allow_db_only){let processed_sorts=[];for(let item of sorts_list!=null?sorts_list:[])item&&(item.self||item.sort_on_id||item.sort_field&&(allow_db_only||typeof item.sort_field!="object"))&&processed_sorts.push(item);return processed_sorts};exports.resolve_sorts=resolve_sorts;var ObjectBase={exists(){return this.raw()!=null},_id(){return this.id},_type(){let type=this.db._get_type(this.id);return type||(this.raw(),type=this.db._get_type(this.id)),type},parent_id(){return this.id},dehydrate(){return _eval.HYDRATE_STRING+this.id},get(){return this},key(){return this.id},flush(){this.db.flush(this.id)},child(name){return this._child(name.split("."))},_child(path){return new this.db.DBNODE(this,path,this.db)},get_email(){return email_getter(this)},is_logged_in(){var _this$child$get;return(_this$child$get=this.child("user_signed_up").get())!=null?_this$child$get:!1},maison_by_default(){var _this$child$get2;return(_this$child$get2=this.child("maison_by_default_boolean").get())!=null?_this$child$get2:!1},poll(interval,n){if((0,_u.running_test)()){console.log("Polling turned on, but disabling it because this is a test");return}return this.db._local(this._id()).poll(interval,n)}};exports.ObjectBase=ObjectBase;var email_getter=function(json){let email=json.child("authentication").child("email").child("email").raw();if(email)return email;let providers=json.child("authentication").raw();for(let provider_id in providers){let data=providers[provider_id];if(data.email!=null)return data.email}return null};exports.email_getter=email_getter;var get_temp_db=function(temp_db,appname){if(temp_db!=null&&temp_db.includes(":")){if(temp_db.split(":")[0]===appname)return temp_db.split(":")[1]}else return temp_db};exports.get_temp_db=get_temp_db;var _static_get=function(data,database,value_id){if(registry.is(data,_value_types.default.DYNAMIC)||data!=null&&data.is_db_proxy||data!=null&&data.getTime)return data;let value=_lang_btypes.get(value_id);if(value.is_range())return value.cast(hydrate2.rehydrate(database,data));if(Array.isArray(data)){typeof value_id=="string"&&(value_id=value.inner_including_ranges().id());let StaticList=registry.get(_value_types.default.STATIC_LIST);return new StaticList(hydrate2.rehydrate_tree(database,data),database,value_id)}if(data&&typeof data=="object"){if(_is_geographic_object(data,value_id))return data;if(hydrate2.is_json_class(data))return hydrate2.from_json(database,data);if(data._id){let StaticObject=registry.get(_value_types.default.STATIC_OBJECT);return new StaticObject(data,database,value_id)}else{let StaticNode=registry.get(_value_types.default.STATIC_NODE);return new StaticNode(data,database,value_id)}}let rehydrated=hydrate2.rehydrate(database,data);return value_id?_lang_btypes.get(value_id).cast(rehydrated):rehydrated};exports._static_get=_static_get;var can_group_with=function(value_id,message){switch(_lang_btypes.get(value_id).get_message(message).ret_btype_id()){case"number":return["exact","bucket"];case"date":return["exact"].concat(_db.CALENDAR_GROUPINGS);default:return["exact"]}};exports.can_group_with=can_group_with;var can_group=value_id=>["text","number","date","user"].includes(value_id)||(0,_btype_ids.is_custom_type)(value_id)||(0,_btype_ids.is_option_set)(value_id),can_group_on=function(value_id){let messages=_lang_btypes.get(value_id).get_messages();return messages=messages.filter(message=>message.is_lookup()),messages=messages.filter(message=>can_group(message.ret_btype_id())),messages.map(message=>message.name())};exports.can_group_on=can_group_on;var can_aggregate_on=function(fn,value_id){if(fn==="count")return[];let messages=_lang_btypes.get(value_id).get_messages(),aggregatable=message=>message.is_lookup()&&message.ret_btype_id()==="number"||message.ret_btype_id()==="date"&&["max","min","average","median"].includes(fn);return messages=messages.filter(aggregatable),messages.map(message=>message.name())};exports.can_aggregate_on=can_aggregate_on;function to_id(obj,idx,value_id){if(obj==null)return null;if(idx%10===0&&(0,_b_fiber.optional_pause)(),typeof obj._id!="function")throw new _errors.UnexpectedError("_id isnt function",{value_id:(0,_loggable.to_loggable)(value_id),object_type:typeof obj,obj_data:(0,_u.json_stringify)(obj,void 0,!0)});return obj._id()}function wrapped_dehydrate(obj,idx){return idx%10===0&&(0,_b_fiber.optional_pause)(),hydrate2.dehydrate_tree(obj)}var array_to_ids=function(value_id,array){return _lang_btypes.get(value_id).custom_type()!=null?array.map((obj,idx)=>to_id(obj,idx,value_id)):array.map((obj,idx)=>wrapped_dehydrate(obj,idx))};exports.array_to_ids=array_to_ids;var is_timeout_error=function(err){return(err.message===_postgres_pool.TIMEOUT_MSG||err.code===_postgres_pool.USER_REQUESTED_CANCEL_CODE)&&err instanceof _errors.UnexpectedError};exports.is_timeout_error=is_timeout_error;var enrich_timeout_error=function(err){let args=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(is_timeout_error(err)){let display="Database query timeout";return args.label&&args.label!=="[not found]"&&(display='Database query timeout on "'.concat(args.label,'"')),new _errors.OwnerError(err.message,_objectSpread(_objectSpread(_objectSpread({},err.args),args),{},{display}))}return err};exports.enrich_timeout_error=enrich_timeout_error;var coerce_to_integer=function(value,data_to_log){let int_value=Math.floor(value);return value!==int_value&&loggger.warn("consumer tried to pass non-integer value",{value,data_to_log}),int_value};exports.coerce_to_integer=coerce_to_integer}});var require_notifier_topics=__commonJS({"lib-browser-old/constants/notifier_topics.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.SearchNotificationTopic=exports.NotificationTopic=exports.LastChangeTopic=exports.EditorUidTopic=exports.BreakingRevisionTopic=exports.BranchesListTopic=exports.AppUsageTopic=exports.AppUsagePlanChangedTopic=exports.AppSettingTopic=exports.AppPlanChangeTopic=void 0;var NotificationTopic="id-update-";exports.NotificationTopic=NotificationTopic;var SearchNotificationTopic="search-update";exports.SearchNotificationTopic=SearchNotificationTopic;var AppUsageTopic="usage-update-";exports.AppUsageTopic=AppUsageTopic;var LastChangeTopic="last-change-";exports.LastChangeTopic=LastChangeTopic;var AppPlanChangeTopic="app-plan-update-";exports.AppPlanChangeTopic=AppPlanChangeTopic;var BreakingRevisionTopic="breaking_revision";exports.BreakingRevisionTopic=BreakingRevisionTopic;var BranchesListTopic="branches-list-";exports.BranchesListTopic=BranchesListTopic;var EditorUidTopic="editor-uid-";exports.EditorUidTopic=EditorUidTopic;var AppSettingTopic="app-setting-";exports.AppSettingTopic=AppSettingTopic;var AppUsagePlanChangedTopic="usage-plan-update-";exports.AppUsagePlanChangedTopic=AppUsagePlanChangedTopic}});var require_defineProperty=__commonJS({"node_modules/lodash/_defineProperty.js"(exports,module){init_define_process_env();init_shim();var getNative=require_getNative(),defineProperty=function(){try{var func=getNative(Object,"defineProperty");return func({},"",{}),func}catch(e){}}();module.exports=defineProperty}});var require_baseAssignValue=__commonJS({"node_modules/lodash/_baseAssignValue.js"(exports,module){init_define_process_env();init_shim();var defineProperty=require_defineProperty();function baseAssignValue(object2,key,value){key=="__proto__"&&defineProperty?defineProperty(object2,key,{configurable:!0,enumerable:!0,value,writable:!0}):object2[key]=value}module.exports=baseAssignValue}});var require_arrayAggregator=__commonJS({"node_modules/lodash/_arrayAggregator.js"(exports,module){init_define_process_env();init_shim();function arrayAggregator(array,setter,iteratee,accumulator){for(var index=-1,length=array==null?0:array.length;++index<length;){var value=array[index];setter(accumulator,value,iteratee(value),array)}return accumulator}module.exports=arrayAggregator}});var require_createBaseFor=__commonJS({"node_modules/lodash/_createBaseFor.js"(exports,module){init_define_process_env();init_shim();function createBaseFor(fromRight){return function(object2,iteratee,keysFunc){for(var index=-1,iterable=Object(object2),props=keysFunc(object2),length=props.length;length--;){var key=props[fromRight?length:++index];if(iteratee(iterable[key],key,iterable)===!1)break}return object2}}module.exports=createBaseFor}});var require_baseFor=__commonJS({"node_modules/lodash/_baseFor.js"(exports,module){init_define_process_env();init_shim();var createBaseFor=require_createBaseFor(),baseFor=createBaseFor();module.exports=baseFor}});var require_baseForOwn=__commonJS({"node_modules/lodash/_baseForOwn.js"(exports,module){init_define_process_env();init_shim();var baseFor=require_baseFor(),keys=require_keys();function baseForOwn(object2,iteratee){return object2&&baseFor(object2,iteratee,keys)}module.exports=baseForOwn}});var require_createBaseEach=__commonJS({"node_modules/lodash/_createBaseEach.js"(exports,module){init_define_process_env();init_shim();var isArrayLike=require_isArrayLike();function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){if(collection==null)return collection;if(!isArrayLike(collection))return eachFunc(collection,iteratee);for(var length=collection.length,index=fromRight?length:-1,iterable=Object(collection);(fromRight?index--:++index<length)&&iteratee(iterable[index],index,iterable)!==!1;);return collection}}module.exports=createBaseEach}});var require_baseEach=__commonJS({"node_modules/lodash/_baseEach.js"(exports,module){init_define_process_env();init_shim();var baseForOwn=require_baseForOwn(),createBaseEach=require_createBaseEach(),baseEach=createBaseEach(baseForOwn);module.exports=baseEach}});var require_baseAggregator=__commonJS({"node_modules/lodash/_baseAggregator.js"(exports,module){init_define_process_env();init_shim();var baseEach=require_baseEach();function baseAggregator(collection,setter,iteratee,accumulator){return baseEach(collection,function(value,key,collection2){setter(accumulator,value,iteratee(value),collection2)}),accumulator}module.exports=baseAggregator}});var require_baseIsMatch=__commonJS({"node_modules/lodash/_baseIsMatch.js"(exports,module){init_define_process_env();init_shim();var Stack=require_Stack(),baseIsEqual=require_baseIsEqual(),COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseIsMatch(object2,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(object2==null)return!length;for(object2=Object(object2);index--;){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object2[data[0]]:!(data[0]in object2))return!1}for(;++index<length;){data=matchData[index];var key=data[0],objValue=object2[key],srcValue=data[1];if(noCustomizer&&data[2]){if(objValue===void 0&&!(key in object2))return!1}else{var stack=new Stack;if(customizer)var result=customizer(objValue,srcValue,key,object2,source,stack);if(!(result===void 0?baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG,customizer,stack):result))return!1}}return!0}module.exports=baseIsMatch}});var require_isStrictComparable=__commonJS({"node_modules/lodash/_isStrictComparable.js"(exports,module){init_define_process_env();init_shim();var isObject=require_isObject();function isStrictComparable(value){return value===value&&!isObject(value)}module.exports=isStrictComparable}});var require_getMatchData=__commonJS({"node_modules/lodash/_getMatchData.js"(exports,module){init_define_process_env();init_shim();var isStrictComparable=require_isStrictComparable(),keys=require_keys();function getMatchData(object2){for(var result=keys(object2),length=result.length;length--;){var key=result[length],value=object2[key];result[length]=[key,value,isStrictComparable(value)]}return result}module.exports=getMatchData}});var require_matchesStrictComparable=__commonJS({"node_modules/lodash/_matchesStrictComparable.js"(exports,module){init_define_process_env();init_shim();function matchesStrictComparable(key,srcValue){return function(object2){return object2==null?!1:object2[key]===srcValue&&(srcValue!==void 0||key in Object(object2))}}module.exports=matchesStrictComparable}});var require_baseMatches=__commonJS({"node_modules/lodash/_baseMatches.js"(exports,module){init_define_process_env();init_shim();var baseIsMatch=require_baseIsMatch(),getMatchData=require_getMatchData(),matchesStrictComparable=require_matchesStrictComparable();function baseMatches(source){var matchData=getMatchData(source);return matchData.length==1&&matchData[0][2]?matchesStrictComparable(matchData[0][0],matchData[0][1]):function(object2){return object2===source||baseIsMatch(object2,source,matchData)}}module.exports=baseMatches}});var require_isKey=__commonJS({"node_modules/lodash/_isKey.js"(exports,module){init_define_process_env();init_shim();var isArray=require_isArray(),isSymbol=require_isSymbol(),reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(value,object2){if(isArray(value))return!1;var type=typeof value;return type=="number"||type=="symbol"||type=="boolean"||value==null||isSymbol(value)?!0:reIsPlainProp.test(value)||!reIsDeepProp.test(value)||object2!=null&&value in Object(object2)}module.exports=isKey}});var require_memoize=__commonJS({"node_modules/lodash/memoize.js"(exports,module){init_define_process_env();init_shim();var MapCache=require_MapCache(),FUNC_ERROR_TEXT="Expected a function";function memoize(func,resolver){if(typeof func!="function"||resolver!=null&&typeof resolver!="function")throw new TypeError(FUNC_ERROR_TEXT);var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key))return cache.get(key);var result=func.apply(this,args);return memoized.cache=cache.set(key,result)||cache,result};return memoized.cache=new(memoize.Cache||MapCache),memoized}memoize.Cache=MapCache;module.exports=memoize}});var require_memoizeCapped=__commonJS({"node_modules/lodash/_memoizeCapped.js"(exports,module){init_define_process_env();init_shim();var memoize=require_memoize(),MAX_MEMOIZE_SIZE=500;function memoizeCapped(func){var result=memoize(func,function(key){return cache.size===MAX_MEMOIZE_SIZE&&cache.clear(),key}),cache=result.cache;return result}module.exports=memoizeCapped}});var require_stringToPath=__commonJS({"node_modules/lodash/_stringToPath.js"(exports,module){init_define_process_env();init_shim();var memoizeCapped=require_memoizeCapped(),rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(string){var result=[];return string.charCodeAt(0)===46&&result.push(""),string.replace(rePropName,function(match,number,quote,subString){result.push(quote?subString.replace(reEscapeChar,"$1"):number||match)}),result});module.exports=stringToPath}});var require_castPath=__commonJS({"node_modules/lodash/_castPath.js"(exports,module){init_define_process_env();init_shim();var isArray=require_isArray(),isKey=require_isKey(),stringToPath=require_stringToPath(),toString=require_toString();function castPath(value,object2){return isArray(value)?value:isKey(value,object2)?[value]:stringToPath(toString(value))}module.exports=castPath}});var require_toKey=__commonJS({"node_modules/lodash/_toKey.js"(exports,module){init_define_process_env();init_shim();var isSymbol=require_isSymbol(),INFINITY=1/0;function toKey(value){if(typeof value=="string"||isSymbol(value))return value;var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}module.exports=toKey}});var require_baseGet=__commonJS({"node_modules/lodash/_baseGet.js"(exports,module){init_define_process_env();init_shim();var castPath=require_castPath(),toKey=require_toKey();function baseGet(object2,path){path=castPath(path,object2);for(var index=0,length=path.length;object2!=null&&index<length;)object2=object2[toKey(path[index++])];return index&&index==length?object2:void 0}module.exports=baseGet}});var require_get=__commonJS({"node_modules/lodash/get.js"(exports,module){init_define_process_env();init_shim();var baseGet=require_baseGet();function get(object2,path,defaultValue){var result=object2==null?void 0:baseGet(object2,path);return result===void 0?defaultValue:result}module.exports=get}});var require_baseHasIn=__commonJS({"node_modules/lodash/_baseHasIn.js"(exports,module){init_define_process_env();init_shim();function baseHasIn(object2,key){return object2!=null&&key in Object(object2)}module.exports=baseHasIn}});var require_hasPath=__commonJS({"node_modules/lodash/_hasPath.js"(exports,module){init_define_process_env();init_shim();var castPath=require_castPath(),isArguments=require_isArguments(),isArray=require_isArray(),isIndex=require_isIndex(),isLength=require_isLength(),toKey=require_toKey();function hasPath(object2,path,hasFunc){path=castPath(path,object2);for(var index=-1,length=path.length,result=!1;++index<length;){var key=toKey(path[index]);if(!(result=object2!=null&&hasFunc(object2,key)))break;object2=object2[key]}return result||++index!=length?result:(length=object2==null?0:object2.length,!!length&&isLength(length)&&isIndex(key,length)&&(isArray(object2)||isArguments(object2)))}module.exports=hasPath}});var require_hasIn=__commonJS({"node_modules/lodash/hasIn.js"(exports,module){init_define_process_env();init_shim();var baseHasIn=require_baseHasIn(),hasPath=require_hasPath();function hasIn(object2,path){return object2!=null&&hasPath(object2,path,baseHasIn)}module.exports=hasIn}});var require_baseMatchesProperty=__commonJS({"node_modules/lodash/_baseMatchesProperty.js"(exports,module){init_define_process_env();init_shim();var baseIsEqual=require_baseIsEqual(),get=require_get(),hasIn=require_hasIn(),isKey=require_isKey(),isStrictComparable=require_isStrictComparable(),matchesStrictComparable=require_matchesStrictComparable(),toKey=require_toKey(),COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(path,srcValue){return isKey(path)&&isStrictComparable(srcValue)?matchesStrictComparable(toKey(path),srcValue):function(object2){var objValue=get(object2,path);return objValue===void 0&&objValue===srcValue?hasIn(object2,path):baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}module.exports=baseMatchesProperty}});var require_identity=__commonJS({"node_modules/lodash/identity.js"(exports,module){init_define_process_env();init_shim();function identity(value){return value}module.exports=identity}});var require_baseProperty=__commonJS({"node_modules/lodash/_baseProperty.js"(exports,module){init_define_process_env();init_shim();function baseProperty(key){return function(object2){return object2==null?void 0:object2[key]}}module.exports=baseProperty}});var require_basePropertyDeep=__commonJS({"node_modules/lodash/_basePropertyDeep.js"(exports,module){init_define_process_env();init_shim();var baseGet=require_baseGet();function basePropertyDeep(path){return function(object2){return baseGet(object2,path)}}module.exports=basePropertyDeep}});var require_property=__commonJS({"node_modules/lodash/property.js"(exports,module){init_define_process_env();init_shim();var baseProperty=require_baseProperty(),basePropertyDeep=require_basePropertyDeep(),isKey=require_isKey(),toKey=require_toKey();function property(path){return isKey(path)?baseProperty(toKey(path)):basePropertyDeep(path)}module.exports=property}});var require_baseIteratee=__commonJS({"node_modules/lodash/_baseIteratee.js"(exports,module){init_define_process_env();init_shim();var baseMatches=require_baseMatches(),baseMatchesProperty=require_baseMatchesProperty(),identity=require_identity(),isArray=require_isArray(),property=require_property();function baseIteratee(value){return typeof value=="function"?value:value==null?identity:typeof value=="object"?isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value):property(value)}module.exports=baseIteratee}});var require_createAggregator=__commonJS({"node_modules/lodash/_createAggregator.js"(exports,module){init_define_process_env();init_shim();var arrayAggregator=require_arrayAggregator(),baseAggregator=require_baseAggregator(),baseIteratee=require_baseIteratee(),isArray=require_isArray();function createAggregator(setter,initializer){return function(collection,iteratee){var func=isArray(collection)?arrayAggregator:baseAggregator,accumulator=initializer?initializer():{};return func(collection,setter,baseIteratee(iteratee,2),accumulator)}}module.exports=createAggregator}});var require_keyBy=__commonJS({"node_modules/lodash/keyBy.js"(exports,module){init_define_process_env();init_shim();var baseAssignValue=require_baseAssignValue(),createAggregator=require_createAggregator(),keyBy=createAggregator(function(result,value,key){baseAssignValue(result,key,value)});module.exports=keyBy}});var require_mapValues=__commonJS({"node_modules/lodash/mapValues.js"(exports,module){init_define_process_env();init_shim();var baseAssignValue=require_baseAssignValue(),baseForOwn=require_baseForOwn(),baseIteratee=require_baseIteratee();function mapValues(object2,iteratee){var result={};return iteratee=baseIteratee(iteratee,3),baseForOwn(object2,function(value,key,object3){baseAssignValue(result,key,iteratee(value,key,object3))}),result}module.exports=mapValues}});var require_noop=__commonJS({"node_modules/es5-ext/function/noop.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports=function(){}}});var require_is_value=__commonJS({"node_modules/es5-ext/object/is-value.js"(exports,module){"use strict";init_define_process_env();init_shim();var _undefined=require_noop()();module.exports=function(val){return val!==_undefined&&val!==null}}});var require_normalize_options=__commonJS({"node_modules/es5-ext/object/normalize-options.js"(exports,module){"use strict";init_define_process_env();init_shim();var isValue=require_is_value(),forEach=Array.prototype.forEach,create=Object.create,process2=function(src,obj){var key;for(key in src)obj[key]=src[key]};module.exports=function(opts1){var result=create(null);return forEach.call(arguments,function(options){isValue(options)&&process2(Object(options),result)}),result}}});var require_is_implemented=__commonJS({"node_modules/es5-ext/math/sign/is-implemented.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports=function(){var sign=Math.sign;return typeof sign!="function"?!1:sign(10)===1&&sign(-20)===-1}}});var require_shim=__commonJS({"node_modules/es5-ext/math/sign/shim.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports=function(value){return value=Number(value),isNaN(value)||value===0?value:value>0?1:-1}}});var require_sign=__commonJS({"node_modules/es5-ext/math/sign/index.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports=require_is_implemented()()?Math.sign:require_shim()}});var require_to_integer=__commonJS({"node_modules/es5-ext/number/to-integer.js"(exports,module){"use strict";init_define_process_env();init_shim();var sign=require_sign(),abs=Math.abs,floor=Math.floor;module.exports=function(value){return isNaN(value)?0:(value=Number(value),value===0||!isFinite(value)?value:sign(value)*floor(abs(value)))}}});var require_to_pos_integer=__commonJS({"node_modules/es5-ext/number/to-pos-integer.js"(exports,module){"use strict";init_define_process_env();init_shim();var toInteger=require_to_integer(),max=Math.max;module.exports=function(value){return max(0,toInteger(value))}}});var require_resolve_length=__commonJS({"node_modules/memoizee/lib/resolve-length.js"(exports,module){"use strict";init_define_process_env();init_shim();var toPosInt=require_to_pos_integer();module.exports=function(optsLength,fnLength,isAsync){var length;return isNaN(optsLength)?(length=fnLength,length>=0?isAsync&&length?length-1:length:1):optsLength===!1?!1:toPosInt(optsLength)}}});var require_valid_callable=__commonJS({"node_modules/es5-ext/object/valid-callable.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports=function(fn){if(typeof fn!="function")throw new TypeError(fn+" is not a function");return fn}}});var require_valid_value=__commonJS({"node_modules/es5-ext/object/valid-value.js"(exports,module){"use strict";init_define_process_env();init_shim();var isValue=require_is_value();module.exports=function(value){if(!isValue(value))throw new TypeError("Cannot use null or undefined");return value}}});var require_iterate2=__commonJS({"node_modules/es5-ext/object/_iterate.js"(exports,module){"use strict";init_define_process_env();init_shim();var callable=require_valid_callable(),value=require_valid_value(),bind=Function.prototype.bind,call=Function.prototype.call,keys=Object.keys,objPropertyIsEnumerable=Object.prototype.propertyIsEnumerable;module.exports=function(method,defVal){return function(obj,cb){var list,thisArg=arguments[2],compareFn=arguments[3];return obj=Object(value(obj)),callable(cb),list=keys(obj),compareFn&&list.sort(typeof compareFn=="function"?bind.call(compareFn,obj):void 0),typeof method!="function"&&(method=list[method]),call.call(method,list,function(key,index){return objPropertyIsEnumerable.call(obj,key)?call.call(cb,thisArg,obj[key],key,obj,index):defVal})}}}});var require_for_each=__commonJS({"node_modules/es5-ext/object/for-each.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports=require_iterate2()("forEach")}});var require_registered_extensions=__commonJS({"node_modules/memoizee/lib/registered-extensions.js"(){"use strict";init_define_process_env();init_shim()}});var require_is_implemented2=__commonJS({"node_modules/es5-ext/object/assign/is-implemented.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports=function(){var assign2=Object.assign,obj;return typeof assign2!="function"?!1:(obj={foo:"raz"},assign2(obj,{bar:"dwa"},{trzy:"trzy"}),obj.foo+obj.bar+obj.trzy==="razdwatrzy")}}});var require_is_implemented3=__commonJS({"node_modules/es5-ext/object/keys/is-implemented.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}}});var require_shim2=__commonJS({"node_modules/es5-ext/object/keys/shim.js"(exports,module){"use strict";init_define_process_env();init_shim();var isValue=require_is_value(),keys=Object.keys;module.exports=function(object2){return keys(isValue(object2)?Object(object2):object2)}}});var require_keys2=__commonJS({"node_modules/es5-ext/object/keys/index.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports=require_is_implemented3()()?Object.keys:require_shim2()}});var require_shim3=__commonJS({"node_modules/es5-ext/object/assign/shim.js"(exports,module){"use strict";init_define_process_env();init_shim();var keys=require_keys2(),value=require_valid_value(),max=Math.max;module.exports=function(dest,src){var error,i,length=max(arguments.length,2),assign2;for(dest=Object(value(dest)),assign2=function(key){try{dest[key]=src[key]}catch(e){error||(error=e)}},i=1;i<length;++i)src=arguments[i],keys(src).forEach(assign2);if(error!==void 0)throw error;return dest}}});var require_assign=__commonJS({"node_modules/es5-ext/object/assign/index.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports=require_is_implemented2()()?Object.assign:require_shim3()}});var require_is_object2=__commonJS({"node_modules/es5-ext/object/is-object.js"(exports,module){"use strict";init_define_process_env();init_shim();var isValue=require_is_value(),map={function:!0,object:!0};module.exports=function(value){return isValue(value)&&map[typeof value]||!1}}});var require_custom=__commonJS({"node_modules/es5-ext/error/custom.js"(exports,module){"use strict";init_define_process_env();init_shim();var assign2=require_assign(),isObject=require_is_object2(),isValue=require_is_value(),captureStackTrace=Error.captureStackTrace;module.exports=function(message){var err=new Error(message),code=arguments[1],ext=arguments[2];return isValue(ext)||isObject(code)&&(ext=code,code=null),isValue(ext)&&assign2(err,ext),isValue(code)&&(err.code=code),captureStackTrace&&captureStackTrace(err,module.exports),err}}});var require_mixin=__commonJS({"node_modules/es5-ext/object/mixin.js"(exports,module){"use strict";init_define_process_env();init_shim();var value=require_valid_value(),defineProperty=Object.defineProperty,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,getOwnPropertyNames=Object.getOwnPropertyNames,getOwnPropertySymbols=Object.getOwnPropertySymbols;module.exports=function(target,source){var error,sourceObject=Object(value(source));if(target=Object(value(target)),getOwnPropertyNames(sourceObject).forEach(function(name){try{defineProperty(target,name,getOwnPropertyDescriptor(source,name))}catch(e){error=e}}),typeof getOwnPropertySymbols=="function"&&getOwnPropertySymbols(sourceObject).forEach(function(symbol){try{defineProperty(target,symbol,getOwnPropertyDescriptor(source,symbol))}catch(e){error=e}}),error!==void 0)throw error;return target}}});var require_define_length=__commonJS({"node_modules/es5-ext/function/_define-length.js"(exports,module){"use strict";init_define_process_env();init_shim();var toPosInt=require_to_pos_integer(),test=function(arg1,arg2){return arg2},desc,defineProperty,generate,mixin;try{Object.defineProperty(test,"length",{configurable:!0,writable:!1,enumerable:!1,value:1})}catch(ignore){}test.length===1?(desc={configurable:!0,writable:!1,enumerable:!1},defineProperty=Object.defineProperty,module.exports=function(fn,length){return length=toPosInt(length),fn.length===length?fn:(desc.value=length,defineProperty(fn,"length",desc))}):(mixin=require_mixin(),generate=function(){var cache=[];return function(length){var args,i=0;if(cache[length])return cache[length];for(args=[];length--;)args.push("a"+(++i).toString(36));return new Function("fn","return function ("+args.join(", ")+") { return fn.apply(this, arguments); };")}}(),module.exports=function(src,length){var target;if(length=toPosInt(length),src.length===length)return src;target=generate(length)(src);try{mixin(target,src)}catch(ignore){}return target})}});var require_is=__commonJS({"node_modules/type/value/is.js"(exports,module){"use strict";init_define_process_env();init_shim();var _undefined=void 0;module.exports=function(value){return value!==_undefined&&value!==null}}});var require_is2=__commonJS({"node_modules/type/object/is.js"(exports,module){"use strict";init_define_process_env();init_shim();var isValue=require_is(),possibleTypes={object:!0,function:!0,undefined:!0};module.exports=function(value){return isValue(value)?hasOwnProperty.call(possibleTypes,typeof value):!1}}});var require_is3=__commonJS({"node_modules/type/prototype/is.js"(exports,module){"use strict";init_define_process_env();init_shim();var isObject=require_is2();module.exports=function(value){if(!isObject(value))return!1;try{return value.constructor?value.constructor.prototype===value:!1}catch(error){return!1}}}});var require_is4=__commonJS({"node_modules/type/function/is.js"(exports,module){"use strict";init_define_process_env();init_shim();var isPrototype=require_is3();module.exports=function(value){if(typeof value!="function"||!hasOwnProperty.call(value,"length"))return!1;try{if(typeof value.length!="number"||typeof value.call!="function"||typeof value.apply!="function")return!1}catch(error){return!1}return!isPrototype(value)}}});var require_is5=__commonJS({"node_modules/type/plain-function/is.js"(exports,module){"use strict";init_define_process_env();init_shim();var isFunction=require_is4(),classRe=/^\s*class[\s{/}]/,functionToString=Function.prototype.toString;module.exports=function(value){return!(!isFunction(value)||classRe.test(functionToString.call(value)))}}});var require_is_implemented4=__commonJS({"node_modules/es5-ext/string/#/contains/is-implemented.js"(exports,module){"use strict";init_define_process_env();init_shim();var str="razdwatrzy";module.exports=function(){return typeof str.contains!="function"?!1:str.contains("dwa")===!0&&str.contains("foo")===!1}}});var require_shim4=__commonJS({"node_modules/es5-ext/string/#/contains/shim.js"(exports,module){"use strict";init_define_process_env();init_shim();var indexOf=String.prototype.indexOf;module.exports=function(searchString){return indexOf.call(this,searchString,arguments[1])>-1}}});var require_contains=__commonJS({"node_modules/es5-ext/string/#/contains/index.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports=require_is_implemented4()()?String.prototype.contains:require_shim4()}});var require_d=__commonJS({"node_modules/d/index.js"(exports,module){"use strict";init_define_process_env();init_shim();var isValue=require_is(),isPlainFunction=require_is5(),assign2=require_assign(),normalizeOpts=require_normalize_options(),contains=require_contains(),d=module.exports=function(dscr,value){var c,e,w,options,desc;return arguments.length<2||typeof dscr!="string"?(options=value,value=dscr,dscr=null):options=arguments[2],isValue(dscr)?(c=contains.call(dscr,"c"),e=contains.call(dscr,"e"),w=contains.call(dscr,"w")):(c=w=!0,e=!1),desc={value,configurable:c,enumerable:e,writable:w},options?assign2(normalizeOpts(options),desc):desc};d.gs=function(dscr,get,set){var c,e,options,desc;return typeof dscr!="string"?(options=set,set=get,get=dscr,dscr=null):options=arguments[3],isValue(get)?isPlainFunction(get)?isValue(set)?isPlainFunction(set)||(options=set,set=void 0):set=void 0:(options=get,get=set=void 0):get=void 0,isValue(dscr)?(c=contains.call(dscr,"c"),e=contains.call(dscr,"e")):(c=!0,e=!1),desc={get,set,configurable:c,enumerable:e},options?assign2(normalizeOpts(options),desc):desc}}});var require_event_emitter=__commonJS({"node_modules/event-emitter/index.js"(exports,module){"use strict";init_define_process_env();init_shim();var d=require_d(),callable=require_valid_callable(),apply=Function.prototype.apply,call=Function.prototype.call,create=Object.create,defineProperty=Object.defineProperty,defineProperties=Object.defineProperties,hasOwnProperty2=Object.prototype.hasOwnProperty,descriptor={configurable:!0,enumerable:!1,writable:!0},on2,once,off,emit,methods,descriptors,base;on2=function(type,listener){var data;return callable(listener),hasOwnProperty2.call(this,"__ee__")?data=this.__ee__:(data=descriptor.value=create(null),defineProperty(this,"__ee__",descriptor),descriptor.value=null),data[type]?typeof data[type]=="object"?data[type].push(listener):data[type]=[data[type],listener]:data[type]=listener,this};once=function(type,listener){var once2,self2;return callable(listener),self2=this,on2.call(this,type,once2=function(){off.call(self2,type,once2),apply.call(listener,this,arguments)}),once2.__eeOnceListener__=listener,this};off=function(type,listener){var data,listeners,candidate,i;if(callable(listener),!hasOwnProperty2.call(this,"__ee__"))return this;if(data=this.__ee__,!data[type])return this;if(listeners=data[type],typeof listeners=="object")for(i=0;candidate=listeners[i];++i)(candidate===listener||candidate.__eeOnceListener__===listener)&&(listeners.length===2?data[type]=listeners[i?0:1]:listeners.splice(i,1));else(listeners===listener||listeners.__eeOnceListener__===listener)&&delete data[type];return this};emit=function(type){var i,l,listener,listeners,args;if(hasOwnProperty2.call(this,"__ee__")&&(listeners=this.__ee__[type],!!listeners))if(typeof listeners=="object"){for(l=arguments.length,args=new Array(l-1),i=1;i<l;++i)args[i-1]=arguments[i];for(listeners=listeners.slice(),i=0;listener=listeners[i];++i)apply.call(listener,this,args)}else switch(arguments.length){case 1:call.call(listeners,this);break;case 2:call.call(listeners,this,arguments[1]);break;case 3:call.call(listeners,this,arguments[1],arguments[2]);break;default:for(l=arguments.length,args=new Array(l-1),i=1;i<l;++i)args[i-1]=arguments[i];apply.call(listeners,this,args)}};methods={on:on2,once,off,emit};descriptors={on:d(on2),once:d(once),off:d(off),emit:d(emit)};base=defineProperties({},descriptors);module.exports=exports=function(o){return o==null?create(base):defineProperties(Object(o),descriptors)};exports.methods=methods}});var require_is_implemented5=__commonJS({"node_modules/es5-ext/array/from/is-implemented.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports=function(){var from2=Array.from,arr,result;return typeof from2!="function"?!1:(arr=["raz","dwa"],result=from2(arr),!!(result&&result!==arr&&result[1]==="dwa"))}}});var require_is_implemented6=__commonJS({"node_modules/ext/global-this/is-implemented.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports=function(){return typeof globalThis!="object"||!globalThis?!1:globalThis.Array===Array}}});var require_implementation=__commonJS({"node_modules/ext/global-this/implementation.js"(exports,module){init_define_process_env();init_shim();var naiveFallback=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};module.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(error){return naiveFallback()}try{return __global__||naiveFallback()}finally{delete Object.prototype.__global__}}()}});var require_global_this=__commonJS({"node_modules/ext/global-this/index.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports=require_is_implemented6()()?globalThis:require_implementation()}});var require_is_implemented7=__commonJS({"node_modules/es6-symbol/is-implemented.js"(exports,module){"use strict";init_define_process_env();init_shim();var global=require_global_this(),validTypes={object:!0,symbol:!0};module.exports=function(){var Symbol2=global.Symbol,symbol;if(typeof Symbol2!="function")return!1;symbol=Symbol2("test symbol");try{String(symbol)}catch(e){return!1}return!(!validTypes[typeof Symbol2.iterator]||!validTypes[typeof Symbol2.toPrimitive]||!validTypes[typeof Symbol2.toStringTag])}}});var require_is_symbol2=__commonJS({"node_modules/es6-symbol/is-symbol.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports=function(value){return value?typeof value=="symbol"?!0:!value.constructor||value.constructor.name!=="Symbol"?!1:value[value.constructor.toStringTag]==="Symbol":!1}}});var require_validate_symbol=__commonJS({"node_modules/es6-symbol/validate-symbol.js"(exports,module){"use strict";init_define_process_env();init_shim();var isSymbol=require_is_symbol2();module.exports=function(value){if(!isSymbol(value))throw new TypeError(value+" is not a symbol");return value}}});var require_generate_name=__commonJS({"node_modules/es6-symbol/lib/private/generate-name.js"(exports,module){"use strict";init_define_process_env();init_shim();var d=require_d(),create=Object.create,defineProperty=Object.defineProperty,objPrototype=Object.prototype,created=create(null);module.exports=function(desc){for(var postfix=0,name,ie11BugWorkaround;created[desc+(postfix||"")];)++postfix;return desc+=postfix||"",created[desc]=!0,name="@@"+desc,defineProperty(objPrototype,name,d.gs(null,function(value){ie11BugWorkaround||(ie11BugWorkaround=!0,defineProperty(this,name,d(value)),ie11BugWorkaround=!1)})),name}}});var require_standard_symbols=__commonJS({"node_modules/es6-symbol/lib/private/setup/standard-symbols.js"(exports,module){"use strict";init_define_process_env();init_shim();var d=require_d(),NativeSymbol=require_global_this().Symbol;module.exports=function(SymbolPolyfill){return Object.defineProperties(SymbolPolyfill,{hasInstance:d("",NativeSymbol&&NativeSymbol.hasInstance||SymbolPolyfill("hasInstance")),isConcatSpreadable:d("",NativeSymbol&&NativeSymbol.isConcatSpreadable||SymbolPolyfill("isConcatSpreadable")),iterator:d("",NativeSymbol&&NativeSymbol.iterator||SymbolPolyfill("iterator")),match:d("",NativeSymbol&&NativeSymbol.match||SymbolPolyfill("match")),replace:d("",NativeSymbol&&NativeSymbol.replace||SymbolPolyfill("replace")),search:d("",NativeSymbol&&NativeSymbol.search||SymbolPolyfill("search")),species:d("",NativeSymbol&&NativeSymbol.species||SymbolPolyfill("species")),split:d("",NativeSymbol&&NativeSymbol.split||SymbolPolyfill("split")),toPrimitive:d("",NativeSymbol&&NativeSymbol.toPrimitive||SymbolPolyfill("toPrimitive")),toStringTag:d("",NativeSymbol&&NativeSymbol.toStringTag||SymbolPolyfill("toStringTag")),unscopables:d("",NativeSymbol&&NativeSymbol.unscopables||SymbolPolyfill("unscopables"))})}}});var require_symbol_registry=__commonJS({"node_modules/es6-symbol/lib/private/setup/symbol-registry.js"(exports,module){"use strict";init_define_process_env();init_shim();var d=require_d(),validateSymbol=require_validate_symbol(),registry=Object.create(null);module.exports=function(SymbolPolyfill){return Object.defineProperties(SymbolPolyfill,{for:d(function(key){return registry[key]?registry[key]:registry[key]=SymbolPolyfill(String(key))}),keyFor:d(function(symbol){var key;validateSymbol(symbol);for(key in registry)if(registry[key]===symbol)return key})})}}});var require_polyfill=__commonJS({"node_modules/es6-symbol/polyfill.js"(exports,module){"use strict";init_define_process_env();init_shim();var d=require_d(),validateSymbol=require_validate_symbol(),NativeSymbol=require_global_this().Symbol,generateName=require_generate_name(),setupStandardSymbols=require_standard_symbols(),setupSymbolRegistry=require_symbol_registry(),create=Object.create,defineProperties=Object.defineProperties,defineProperty=Object.defineProperty,SymbolPolyfill,HiddenSymbol,isNativeSafe;if(typeof NativeSymbol=="function")try{String(NativeSymbol()),isNativeSafe=!0}catch(ignore){}else NativeSymbol=null;HiddenSymbol=function(description){if(this instanceof HiddenSymbol)throw new TypeError("Symbol is not a constructor");return SymbolPolyfill(description)};module.exports=SymbolPolyfill=function Symbol2(description){var symbol;if(this instanceof Symbol2)throw new TypeError("Symbol is not a constructor");return isNativeSafe?NativeSymbol(description):(symbol=create(HiddenSymbol.prototype),description=description===void 0?"":String(description),defineProperties(symbol,{__description__:d("",description),__name__:d("",generateName(description))}))};setupStandardSymbols(SymbolPolyfill);setupSymbolRegistry(SymbolPolyfill);defineProperties(HiddenSymbol.prototype,{constructor:d(SymbolPolyfill),toString:d("",function(){return this.__name__})});defineProperties(SymbolPolyfill.prototype,{toString:d(function(){return"Symbol ("+validateSymbol(this).__description__+")"}),valueOf:d(function(){return validateSymbol(this)})});defineProperty(SymbolPolyfill.prototype,SymbolPolyfill.toPrimitive,d("",function(){var symbol=validateSymbol(this);return typeof symbol=="symbol"?symbol:symbol.toString()}));defineProperty(SymbolPolyfill.prototype,SymbolPolyfill.toStringTag,d("c","Symbol"));defineProperty(HiddenSymbol.prototype,SymbolPolyfill.toStringTag,d("c",SymbolPolyfill.prototype[SymbolPolyfill.toStringTag]));defineProperty(HiddenSymbol.prototype,SymbolPolyfill.toPrimitive,d("c",SymbolPolyfill.prototype[SymbolPolyfill.toPrimitive]))}});var require_es6_symbol=__commonJS({"node_modules/es6-symbol/index.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports=require_is_implemented7()()?require_global_this().Symbol:require_polyfill()}});var require_is_arguments=__commonJS({"node_modules/es5-ext/function/is-arguments.js"(exports,module){"use strict";init_define_process_env();init_shim();var objToString=Object.prototype.toString,id=objToString.call(function(){return arguments}());module.exports=function(value){return objToString.call(value)===id}}});var require_is_function=__commonJS({"node_modules/es5-ext/function/is-function.js"(exports,module){"use strict";init_define_process_env();init_shim();var objToString=Object.prototype.toString,isFunctionStringTag=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);module.exports=function(value){return typeof value=="function"&&isFunctionStringTag(objToString.call(value))}}});var require_is_string=__commonJS({"node_modules/es5-ext/string/is-string.js"(exports,module){"use strict";init_define_process_env();init_shim();var objToString=Object.prototype.toString,id=objToString.call("");module.exports=function(value){return typeof value=="string"||value&&typeof value=="object"&&(value instanceof String||objToString.call(value)===id)||!1}}});var require_shim5=__commonJS({"node_modules/es5-ext/array/from/shim.js"(exports,module){"use strict";init_define_process_env();init_shim();var iteratorSymbol=require_es6_symbol().iterator,isArguments=require_is_arguments(),isFunction=require_is_function(),toPosInt=require_to_pos_integer(),callable=require_valid_callable(),validValue=require_valid_value(),isValue=require_is_value(),isString=require_is_string(),isArray=Array.isArray,call=Function.prototype.call,desc={configurable:!0,enumerable:!0,writable:!0,value:null},defineProperty=Object.defineProperty;module.exports=function(arrayLike){var mapFn=arguments[1],thisArg=arguments[2],Context,i,j,arr,length,code,iterator,result,getIterator,value;if(arrayLike=Object(validValue(arrayLike)),isValue(mapFn)&&callable(mapFn),!this||this===Array||!isFunction(this)){if(!mapFn){if(isArguments(arrayLike))return length=arrayLike.length,length!==1?Array.apply(null,arrayLike):(arr=new Array(1),arr[0]=arrayLike[0],arr);if(isArray(arrayLike)){for(arr=new Array(length=arrayLike.length),i=0;i<length;++i)arr[i]=arrayLike[i];return arr}}arr=[]}else Context=this;if(!isArray(arrayLike)){if((getIterator=arrayLike[iteratorSymbol])!==void 0){for(iterator=callable(getIterator).call(arrayLike),Context&&(arr=new Context),result=iterator.next(),i=0;!result.done;)value=mapFn?call.call(mapFn,thisArg,result.value,i):result.value,Context?(desc.value=value,defineProperty(arr,i,desc)):arr[i]=value,result=iterator.next(),++i;length=i}else if(isString(arrayLike)){for(length=arrayLike.length,Context&&(arr=new Context),i=0,j=0;i<length;++i)value=arrayLike[i],i+1<length&&(code=value.charCodeAt(0),code>=55296&&code<=56319&&(value+=arrayLike[++i])),value=mapFn?call.call(mapFn,thisArg,value,j):value,Context?(desc.value=value,defineProperty(arr,j,desc)):arr[j]=value,++j;length=j}}if(length===void 0)for(length=toPosInt(arrayLike.length),Context&&(arr=new Context(length)),i=0;i<length;++i)value=mapFn?call.call(mapFn,thisArg,arrayLike[i],i):arrayLike[i],Context?(desc.value=value,defineProperty(arr,i,desc)):arr[i]=value;return Context&&(desc.value=null,arr.length=length),arr}}});var require_from=__commonJS({"node_modules/es5-ext/array/from/index.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports=require_is_implemented5()()?Array.from:require_shim5()}});var require_to_array=__commonJS({"node_modules/es5-ext/array/to-array.js"(exports,module){"use strict";init_define_process_env();init_shim();var from2=require_from(),isArray=Array.isArray;module.exports=function(arrayLike){return isArray(arrayLike)?arrayLike:from2(arrayLike)}}});var require_resolve_resolve=__commonJS({"node_modules/memoizee/lib/resolve-resolve.js"(exports,module){"use strict";init_define_process_env();init_shim();var toArray=require_to_array(),isValue=require_is_value(),callable=require_valid_callable(),slice=Array.prototype.slice,resolveArgs;resolveArgs=function(args){return this.map(function(resolve,i){return resolve?resolve(args[i]):args[i]}).concat(slice.call(args,this.length))};module.exports=function(resolvers){return resolvers=toArray(resolvers),resolvers.forEach(function(resolve){isValue(resolve)&&callable(resolve)}),resolveArgs.bind(resolvers)}}});var require_resolve_normalize=__commonJS({"node_modules/memoizee/lib/resolve-normalize.js"(exports,module){"use strict";init_define_process_env();init_shim();var callable=require_valid_callable();module.exports=function(userNormalizer){var normalizer;return typeof userNormalizer=="function"?{set:userNormalizer,get:userNormalizer}:(normalizer={get:callable(userNormalizer.get)},userNormalizer.set!==void 0?(normalizer.set=callable(userNormalizer.set),userNormalizer.delete&&(normalizer.delete=callable(userNormalizer.delete)),userNormalizer.clear&&(normalizer.clear=callable(userNormalizer.clear)),normalizer):(normalizer.set=normalizer.get,normalizer))}}});var require_configure_map=__commonJS({"node_modules/memoizee/lib/configure-map.js"(exports,module){"use strict";init_define_process_env();init_shim();var customError=require_custom(),defineLength=require_define_length(),d=require_d(),ee=require_event_emitter().methods,resolveResolve=require_resolve_resolve(),resolveNormalize=require_resolve_normalize(),apply=Function.prototype.apply,call=Function.prototype.call,create=Object.create,defineProperties=Object.defineProperties,on2=ee.on,emit=ee.emit;module.exports=function(original,length,options){var cache=create(null),conf,memLength,get,set,del,clear,extDel,extGet,extHas,normalizer,getListeners,setListeners,deleteListeners,memoized,resolve;return length!==!1?memLength=length:isNaN(original.length)?memLength=1:memLength=original.length,options.normalizer&&(normalizer=resolveNormalize(options.normalizer),get=normalizer.get,set=normalizer.set,del=normalizer.delete,clear=normalizer.clear),options.resolvers!=null&&(resolve=resolveResolve(options.resolvers)),get?memoized=defineLength(function(arg){var id,result,args=arguments;if(resolve&&(args=resolve(args)),id=get(args),id!==null&&hasOwnProperty.call(cache,id))return getListeners&&conf.emit("get",id,args,this),cache[id];if(args.length===1?result=call.call(original,this,args[0]):result=apply.call(original,this,args),id===null){if(id=get(args),id!==null)throw customError("Circular invocation","CIRCULAR_INVOCATION");id=set(args)}else if(hasOwnProperty.call(cache,id))throw customError("Circular invocation","CIRCULAR_INVOCATION");return cache[id]=result,setListeners&&conf.emit("set",id,null,result),result},memLength):length===0?memoized=function(){var result;if(hasOwnProperty.call(cache,"data"))return getListeners&&conf.emit("get","data",arguments,this),cache.data;if(arguments.length?result=apply.call(original,this,arguments):result=call.call(original,this),hasOwnProperty.call(cache,"data"))throw customError("Circular invocation","CIRCULAR_INVOCATION");return cache.data=result,setListeners&&conf.emit("set","data",null,result),result}:memoized=function(arg){var result,args=arguments,id;if(resolve&&(args=resolve(arguments)),id=String(args[0]),hasOwnProperty.call(cache,id))return getListeners&&conf.emit("get",id,args,this),cache[id];if(args.length===1?result=call.call(original,this,args[0]):result=apply.call(original,this,args),hasOwnProperty.call(cache,id))throw customError("Circular invocation","CIRCULAR_INVOCATION");return cache[id]=result,setListeners&&conf.emit("set",id,null,result),result},conf={original,memoized,profileName:options.profileName,get:function(args){return resolve&&(args=resolve(args)),get?get(args):String(args[0])},has:function(id){return hasOwnProperty.call(cache,id)},delete:function(id){var result;hasOwnProperty.call(cache,id)&&(del&&del(id),result=cache[id],delete cache[id],deleteListeners&&conf.emit("delete",id,result))},clear:function(){var oldCache=cache;clear&&clear(),cache=create(null),conf.emit("clear",oldCache)},on:function(type,listener){return type==="get"?getListeners=!0:type==="set"?setListeners=!0:type==="delete"&&(deleteListeners=!0),on2.call(this,type,listener)},emit,updateEnv:function(){original=conf.original}},get?extDel=defineLength(function(arg){var id,args=arguments;resolve&&(args=resolve(args)),id=get(args),id!==null&&conf.delete(id)},memLength):length===0?extDel=function(){return conf.delete("data")}:extDel=function(arg){return resolve&&(arg=resolve(arguments)[0]),conf.delete(arg)},extGet=defineLength(function(){var id,args=arguments;return length===0?cache.data:(resolve&&(args=resolve(args)),get?id=get(args):id=String(args[0]),cache[id])}),extHas=defineLength(function(){var id,args=arguments;return length===0?conf.has("data"):(resolve&&(args=resolve(args)),get?id=get(args):id=String(args[0]),id===null?!1:conf.has(id))}),defineProperties(memoized,{__memoized__:d(!0),delete:d(extDel),clear:d(conf.clear),_get:d(extGet),_has:d(extHas)}),conf}}});var require_plain=__commonJS({"node_modules/memoizee/plain.js"(exports,module){"use strict";init_define_process_env();init_shim();var callable=require_valid_callable(),forEach=require_for_each(),extensions=require_registered_extensions(),configure=require_configure_map(),resolveLength=require_resolve_length();module.exports=function self2(fn){var options,length,conf;if(callable(fn),options=Object(arguments[1]),options.async&&options.promise)throw new Error("Options 'async' and 'promise' cannot be used together");return hasOwnProperty.call(fn,"__memoized__")&&!options.force?fn:(length=resolveLength(options.length,fn.length,options.async&&extensions.async),conf=configure(fn,length,options),forEach(extensions,function(extFn,name){options[name]&&extFn(options[name],conf,options)}),self2.__profiler__&&self2.__profiler__(conf),conf.updateEnv(),conf.memoized)}}});var require_primitive=__commonJS({"node_modules/memoizee/normalizers/primitive.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports=function(args){var id,i,length=args.length;if(!length)return"";for(id=String(args[i=0]);--length;)id+=""+args[++i];return id}}});var require_get_primitive_fixed=__commonJS({"node_modules/memoizee/normalizers/get-primitive-fixed.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports=function(length){return length?function(args){for(var id=String(args[0]),i=0,currentLength=length;--currentLength;)id+=""+args[++i];return id}:function(){return""}}}});var require_is_implemented8=__commonJS({"node_modules/es5-ext/number/is-nan/is-implemented.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports=function(){var numberIsNaN=Number.isNaN;return typeof numberIsNaN!="function"?!1:!numberIsNaN({})&&numberIsNaN(NaN)&&!numberIsNaN(34)}}});var require_shim6=__commonJS({"node_modules/es5-ext/number/is-nan/shim.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports=function(value){return value!==value}}});var require_is_nan=__commonJS({"node_modules/es5-ext/number/is-nan/index.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports=require_is_implemented8()()?Number.isNaN:require_shim6()}});var require_e_index_of=__commonJS({"node_modules/es5-ext/array/#/e-index-of.js"(exports,module){"use strict";init_define_process_env();init_shim();var numberIsNaN=require_is_nan(),toPosInt=require_to_pos_integer(),value=require_valid_value(),indexOf=Array.prototype.indexOf,objHasOwnProperty=Object.prototype.hasOwnProperty,abs=Math.abs,floor=Math.floor;module.exports=function(searchElement){var i,length,fromIndex,val;if(!numberIsNaN(searchElement))return indexOf.apply(this,arguments);for(length=toPosInt(value(this).length),fromIndex=arguments[1],isNaN(fromIndex)?fromIndex=0:fromIndex>=0?fromIndex=floor(fromIndex):fromIndex=toPosInt(this.length)-floor(abs(fromIndex)),i=fromIndex;i<length;++i)if(objHasOwnProperty.call(this,i)&&(val=this[i],numberIsNaN(val)))return i;return-1}}});var require_get2=__commonJS({"node_modules/memoizee/normalizers/get.js"(exports,module){"use strict";init_define_process_env();init_shim();var indexOf=require_e_index_of(),create=Object.create;module.exports=function(){var lastId=0,map=[],cache=create(null);return{get:function(args){var index=0,set=map,i,length=args.length;if(length===0)return set[length]||null;if(set=set[length]){for(;index<length-1;){if(i=indexOf.call(set[0],args[index]),i===-1)return null;set=set[1][i],++index}return i=indexOf.call(set[0],args[index]),i===-1?null:set[1][i]||null}return null},set:function(args){var index=0,set=map,i,length=args.length;if(length===0)set[length]=++lastId;else{for(set[length]||(set[length]=[[],[]]),set=set[length];index<length-1;)i=indexOf.call(set[0],args[index]),i===-1&&(i=set[0].push(args[index])-1,set[1].push([[],[]])),set=set[1][i],++index;i=indexOf.call(set[0],args[index]),i===-1&&(i=set[0].push(args[index])-1),set[1][i]=++lastId}return cache[lastId]=args,lastId},delete:function(id){var index=0,set=map,i,args=cache[id],length=args.length,path=[];if(length===0)delete set[length];else if(set=set[length]){for(;index<length-1;){if(i=indexOf.call(set[0],args[index]),i===-1)return;path.push(set,i),set=set[1][i],++index}if(i=indexOf.call(set[0],args[index]),i===-1)return;for(id=set[1][i],set[0].splice(i,1),set[1].splice(i,1);!set[0].length&&path.length;)i=path.pop(),set=path.pop(),set[0].splice(i,1),set[1].splice(i,1)}delete cache[id]},clear:function(){map=[],cache=create(null)}}}}});var require_get_1=__commonJS({"node_modules/memoizee/normalizers/get-1.js"(exports,module){"use strict";init_define_process_env();init_shim();var indexOf=require_e_index_of();module.exports=function(){var lastId=0,argsMap=[],cache=[];return{get:function(args){var index=indexOf.call(argsMap,args[0]);return index===-1?null:cache[index]},set:function(args){return argsMap.push(args[0]),cache.push(++lastId),lastId},delete:function(id){var index=indexOf.call(cache,id);index!==-1&&(argsMap.splice(index,1),cache.splice(index,1))},clear:function(){argsMap=[],cache=[]}}}}});var require_get_fixed=__commonJS({"node_modules/memoizee/normalizers/get-fixed.js"(exports,module){"use strict";init_define_process_env();init_shim();var indexOf=require_e_index_of(),create=Object.create;module.exports=function(length){var lastId=0,map=[[],[]],cache=create(null);return{get:function(args){for(var index=0,set=map,i;index<length-1;){if(i=indexOf.call(set[0],args[index]),i===-1)return null;set=set[1][i],++index}return i=indexOf.call(set[0],args[index]),i===-1?null:set[1][i]||null},set:function(args){for(var index=0,set=map,i;index<length-1;)i=indexOf.call(set[0],args[index]),i===-1&&(i=set[0].push(args[index])-1,set[1].push([[],[]])),set=set[1][i],++index;return i=indexOf.call(set[0],args[index]),i===-1&&(i=set[0].push(args[index])-1),set[1][i]=++lastId,cache[lastId]=args,lastId},delete:function(id){for(var index=0,set=map,i,path=[],args=cache[id];index<length-1;){if(i=indexOf.call(set[0],args[index]),i===-1)return;path.push(set,i),set=set[1][i],++index}if(i=indexOf.call(set[0],args[index]),i!==-1){for(id=set[1][i],set[0].splice(i,1),set[1].splice(i,1);!set[0].length&&path.length;)i=path.pop(),set=path.pop(),set[0].splice(i,1),set[1].splice(i,1);delete cache[id]}},clear:function(){map=[[],[]],cache=create(null)}}}}});var require_map=__commonJS({"node_modules/es5-ext/object/map.js"(exports,module){"use strict";init_define_process_env();init_shim();var callable=require_valid_callable(),forEach=require_for_each(),call=Function.prototype.call;module.exports=function(obj,cb){var result={},thisArg=arguments[2];return callable(cb),forEach(obj,function(value,key,targetObj,index){result[key]=call.call(cb,thisArg,value,key,targetObj,index)}),result}}});var require_next_tick=__commonJS({"node_modules/next-tick/index.js"(exports,module){"use strict";init_define_process_env();init_shim();var ensureCallable=function(fn){if(typeof fn!="function")throw new TypeError(fn+" is not a function");return fn},byObserver=function(Observer){var node=document.createTextNode(""),queue,currentQueue,i=0;return new Observer(function(){var callback;if(queue)currentQueue&&(queue=currentQueue.concat(queue));else{if(!currentQueue)return;queue=currentQueue}if(currentQueue=queue,queue=null,typeof currentQueue=="function"){callback=currentQueue,currentQueue=null,callback();return}for(node.data=i=++i%2;currentQueue;)callback=currentQueue.shift(),currentQueue.length||(currentQueue=null),callback()}).observe(node,{characterData:!0}),function(fn){if(ensureCallable(fn),queue){typeof queue=="function"?queue=[queue,fn]:queue.push(fn);return}queue=fn,node.data=i=++i%2}};module.exports=function(){if(typeof import_process.default=="object"&&import_process.default&&typeof(0,queueMicrotask)=="function")return queueMicrotask;if(typeof queueMicrotask=="function")return function(cb){queueMicrotask(ensureCallable(cb))};if(typeof document=="object"&&document){if(typeof MutationObserver=="function")return byObserver(MutationObserver);if(typeof WebKitMutationObserver=="function")return byObserver(WebKitMutationObserver)}return typeof setImmediate=="function"?function(cb){setImmediate(ensureCallable(cb))}:typeof setTimeout=="function"||typeof setTimeout=="object"?function(cb){setTimeout(ensureCallable(cb),0)}:null}()}});var require_async=__commonJS({"node_modules/memoizee/ext/async.js"(){"use strict";init_define_process_env();init_shim();var aFrom=require_from(),objectMap=require_map(),mixin=require_mixin(),defineLength=require_define_length(),nextTick=require_next_tick(),slice=Array.prototype.slice,apply=Function.prototype.apply,create=Object.create;require_registered_extensions().async=function(tbi,conf){var waiting=create(null),cache=create(null),base=conf.memoized,original=conf.original,currentCallback,currentContext,currentArgs;conf.memoized=defineLength(function(arg){var args=arguments,last=args[args.length-1];return typeof last=="function"&&(currentCallback=last,args=slice.call(args,0,-1)),base.apply(currentContext=this,currentArgs=args)},base);try{mixin(conf.memoized,base)}catch(ignore){}conf.on("get",function(id){var cb,context,args;if(currentCallback){if(waiting[id]){typeof waiting[id]=="function"?waiting[id]=[waiting[id],currentCallback]:waiting[id].push(currentCallback),currentCallback=null;return}cb=currentCallback,context=currentContext,args=currentArgs,currentCallback=currentContext=currentArgs=null,nextTick(function(){var data;hasOwnProperty.call(cache,id)?(data=cache[id],conf.emit("getasync",id,args,context),apply.call(cb,data.context,data.args)):(currentCallback=cb,currentContext=context,currentArgs=args,base.apply(context,args))})}}),conf.original=function(){var args,cb,origCb,result;return currentCallback?(args=aFrom(arguments),cb=function self2(err){var cb2,args2,id=self2.id;if(id==null){nextTick(apply.bind(self2,this,arguments));return}if(delete self2.id,cb2=waiting[id],delete waiting[id],!!cb2)return args2=aFrom(arguments),conf.has(id)&&(err?conf.delete(id):(cache[id]={context:this,args:args2},conf.emit("setasync",id,typeof cb2=="function"?1:cb2.length))),typeof cb2=="function"?result=apply.call(cb2,this,args2):cb2.forEach(function(cb3){result=apply.call(cb3,this,args2)},this),result},origCb=currentCallback,currentCallback=currentContext=currentArgs=null,args.push(cb),result=apply.call(original,this,args),cb.cb=origCb,currentCallback=cb,result):apply.call(original,this,arguments)},conf.on("set",function(id){if(!currentCallback){conf.delete(id);return}waiting[id]?typeof waiting[id]=="function"?waiting[id]=[waiting[id],currentCallback.cb]:waiting[id].push(currentCallback.cb):waiting[id]=currentCallback.cb,delete currentCallback.cb,currentCallback.id=id,currentCallback=null}),conf.on("delete",function(id){var result;hasOwnProperty.call(waiting,id)||cache[id]&&(result=cache[id],delete cache[id],conf.emit("deleteasync",id,slice.call(result.args,1)))}),conf.on("clear",function(){var oldCache=cache;cache=create(null),conf.emit("clearasync",objectMap(oldCache,function(data){return slice.call(data.args,1)}))})}}});var require_primitive_set=__commonJS({"node_modules/es5-ext/object/primitive-set.js"(exports,module){"use strict";init_define_process_env();init_shim();var forEach=Array.prototype.forEach,create=Object.create;module.exports=function(arg){var set=create(null);return forEach.call(arguments,function(name){set[name]=!0}),set}}});var require_is_callable2=__commonJS({"node_modules/es5-ext/object/is-callable.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports=function(obj){return typeof obj=="function"}}});var require_validate_stringifiable=__commonJS({"node_modules/es5-ext/object/validate-stringifiable.js"(exports,module){"use strict";init_define_process_env();init_shim();var isCallable=require_is_callable2();module.exports=function(stringifiable){try{return stringifiable&&isCallable(stringifiable.toString)?stringifiable.toString():String(stringifiable)}catch(e){throw new TypeError("Passed argument cannot be stringifed")}}}});var require_validate_stringifiable_value=__commonJS({"node_modules/es5-ext/object/validate-stringifiable-value.js"(exports,module){"use strict";init_define_process_env();init_shim();var ensureValue=require_valid_value(),stringifiable=require_validate_stringifiable();module.exports=function(value){return stringifiable(ensureValue(value))}}});var require_safe_to_string=__commonJS({"node_modules/es5-ext/safe-to-string.js"(exports,module){"use strict";init_define_process_env();init_shim();var isCallable=require_is_callable2();module.exports=function(value){try{return value&&isCallable(value.toString)?value.toString():String(value)}catch(e){return"<Non-coercible to string value>"}}}});var require_to_short_string_representation=__commonJS({"node_modules/es5-ext/to-short-string-representation.js"(exports,module){"use strict";init_define_process_env();init_shim();var safeToString=require_safe_to_string(),reNewLine=/[\n\r\u2028\u2029]/g;module.exports=function(value){var string=safeToString(value);return string.length>100&&(string=string.slice(0,99)+"\u2026"),string=string.replace(reNewLine,function(char){return JSON.stringify(char).slice(1,-1)}),string}}});var require_is_promise=__commonJS({"node_modules/is-promise/index.js"(exports,module){init_define_process_env();init_shim();module.exports=isPromise;module.exports.default=isPromise;function isPromise(obj){return!!obj&&(typeof obj=="object"||typeof obj=="function")&&typeof obj.then=="function"}}});var require_promise=__commonJS({"node_modules/memoizee/ext/promise.js"(){"use strict";init_define_process_env();init_shim();var objectMap=require_map(),primitiveSet=require_primitive_set(),ensureString=require_validate_stringifiable_value(),toShortString=require_to_short_string_representation(),isPromise=require_is_promise(),nextTick=require_next_tick(),create=Object.create,supportedModes=primitiveSet("then","then:finally","done","done:finally");require_registered_extensions().promise=function(mode,conf){var waiting=create(null),cache=create(null),promises=create(null);if(mode===!0)mode=null;else if(mode=ensureString(mode),!supportedModes[mode])throw new TypeError("'"+toShortString(mode)+"' is not valid promise mode");conf.on("set",function(id,ignore,promise){var isFailed=!1;if(!isPromise(promise)){cache[id]=promise,conf.emit("setasync",id,1);return}waiting[id]=1,promises[id]=promise;var onSuccess=function(result){var count=waiting[id];if(isFailed)throw new Error("Memoizee error: Detected unordered then|done & finally resolution, which in turn makes proper detection of success/failure impossible (when in 'done:finally' mode)\nConsider to rely on 'then' or 'done' mode instead.");count&&(delete waiting[id],cache[id]=result,conf.emit("setasync",id,count))},onFailure=function(){isFailed=!0,waiting[id]&&(delete waiting[id],delete promises[id],conf.delete(id))},resolvedMode=mode;if(resolvedMode||(resolvedMode="then"),resolvedMode==="then"){var nextTickFailure=function(){nextTick(onFailure)};promise=promise.then(function(result){nextTick(onSuccess.bind(this,result))},nextTickFailure),typeof promise.finally=="function"&&promise.finally(nextTickFailure)}else if(resolvedMode==="done"){if(typeof promise.done!="function")throw new Error("Memoizee error: Retrieved promise does not implement 'done' in 'done' mode");promise.done(onSuccess,onFailure)}else if(resolvedMode==="done:finally"){if(typeof promise.done!="function")throw new Error("Memoizee error: Retrieved promise does not implement 'done' in 'done:finally' mode");if(typeof promise.finally!="function")throw new Error("Memoizee error: Retrieved promise does not implement 'finally' in 'done:finally' mode");promise.done(onSuccess),promise.finally(onFailure)}}),conf.on("get",function(id,args,context){var promise;if(waiting[id]){++waiting[id];return}promise=promises[id];var emit=function(){conf.emit("getasync",id,args,context)};isPromise(promise)?typeof promise.done=="function"?promise.done(emit):promise.then(function(){nextTick(emit)}):emit()}),conf.on("delete",function(id){if(delete promises[id],waiting[id]){delete waiting[id];return}if(hasOwnProperty.call(cache,id)){var result=cache[id];delete cache[id],conf.emit("deleteasync",id,[result])}}),conf.on("clear",function(){var oldCache=cache;cache=create(null),waiting=create(null),promises=create(null),conf.emit("clearasync",objectMap(oldCache,function(data){return[data]}))})}}});var require_dispose=__commonJS({"node_modules/memoizee/ext/dispose.js"(){"use strict";init_define_process_env();init_shim();var callable=require_valid_callable(),forEach=require_for_each(),extensions=require_registered_extensions(),apply=Function.prototype.apply;extensions.dispose=function(dispose2,conf,options){var del;if(callable(dispose2),options.async&&extensions.async||options.promise&&extensions.promise){conf.on("deleteasync",del=function(id,resultArray){apply.call(dispose2,null,resultArray)}),conf.on("clearasync",function(cache){forEach(cache,function(result,id){del(id,result)})});return}conf.on("delete",del=function(id,result){dispose2(result)}),conf.on("clear",function(cache){forEach(cache,function(result,id){del(id,result)})})}}});var require_max_timeout=__commonJS({"node_modules/timers-ext/max-timeout.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports=2147483647}});var require_valid_timeout=__commonJS({"node_modules/timers-ext/valid-timeout.js"(exports,module){"use strict";init_define_process_env();init_shim();var toPosInt=require_to_pos_integer(),maxTimeout=require_max_timeout();module.exports=function(value){if(value=toPosInt(value),value>maxTimeout)throw new TypeError(value+" exceeds maximum possible timeout");return value}}});var require_max_age=__commonJS({"node_modules/memoizee/ext/max-age.js"(){"use strict";init_define_process_env();init_shim();var aFrom=require_from(),forEach=require_for_each(),nextTick=require_next_tick(),isPromise=require_is_promise(),timeout=require_valid_timeout(),extensions=require_registered_extensions(),noop=Function.prototype,max=Math.max,min=Math.min,create=Object.create;extensions.maxAge=function(maxAge,conf,options){var timeouts,postfix,preFetchAge,preFetchTimeouts;maxAge=timeout(maxAge),maxAge&&(timeouts=create(null),postfix=options.async&&extensions.async||options.promise&&extensions.promise?"async":"",conf.on("set"+postfix,function(id){timeouts[id]=setTimeout(function(){conf.delete(id)},maxAge),typeof timeouts[id].unref=="function"&&timeouts[id].unref(),preFetchTimeouts&&(preFetchTimeouts[id]&&preFetchTimeouts[id]!=="nextTick"&&clearTimeout(preFetchTimeouts[id]),preFetchTimeouts[id]=setTimeout(function(){delete preFetchTimeouts[id]},preFetchAge),typeof preFetchTimeouts[id].unref=="function"&&preFetchTimeouts[id].unref())}),conf.on("delete"+postfix,function(id){clearTimeout(timeouts[id]),delete timeouts[id],preFetchTimeouts&&(preFetchTimeouts[id]!=="nextTick"&&clearTimeout(preFetchTimeouts[id]),delete preFetchTimeouts[id])}),options.preFetch&&(options.preFetch===!0||isNaN(options.preFetch)?preFetchAge=.333:preFetchAge=max(min(Number(options.preFetch),1),0),preFetchAge&&(preFetchTimeouts={},preFetchAge=(1-preFetchAge)*maxAge,conf.on("get"+postfix,function(id,args,context){preFetchTimeouts[id]||(preFetchTimeouts[id]="nextTick",nextTick(function(){var result;preFetchTimeouts[id]==="nextTick"&&(delete preFetchTimeouts[id],conf.delete(id),options.async&&(args=aFrom(args),args.push(noop)),result=conf.memoized.apply(context,args),options.promise&&isPromise(result)&&(typeof result.done=="function"?result.done(noop,noop):result.then(noop,noop)))}))}))),conf.on("clear"+postfix,function(){forEach(timeouts,function(id){clearTimeout(id)}),timeouts={},preFetchTimeouts&&(forEach(preFetchTimeouts,function(id){id!=="nextTick"&&clearTimeout(id)}),preFetchTimeouts={})}))}}});var require_lru_queue=__commonJS({"node_modules/lru-queue/index.js"(exports,module){"use strict";init_define_process_env();init_shim();var toPosInt=require_to_pos_integer(),create=Object.create,hasOwnProperty2=Object.prototype.hasOwnProperty;module.exports=function(limit){var size=0,base=1,queue=create(null),map=create(null),index=0,del;return limit=toPosInt(limit),{hit:function(id){var oldIndex=map[id],nuIndex=++index;if(queue[nuIndex]=id,map[id]=nuIndex,!oldIndex)return++size,size<=limit?void 0:(id=queue[base],del(id),id);if(delete queue[oldIndex],base===oldIndex)for(;!hasOwnProperty2.call(queue,++base););},delete:del=function(id){var oldIndex=map[id];if(oldIndex&&(delete queue[oldIndex],delete map[id],--size,base===oldIndex)){if(!size){index=0,base=1;return}for(;!hasOwnProperty2.call(queue,++base););}},clear:function(){size=0,base=1,queue=create(null),map=create(null),index=0}}}}});var require_max=__commonJS({"node_modules/memoizee/ext/max.js"(){"use strict";init_define_process_env();init_shim();var toPosInteger=require_to_pos_integer(),lruQueue=require_lru_queue(),extensions=require_registered_extensions();extensions.max=function(max,conf,options){var postfix,queue,hit;max=toPosInteger(max),max&&(queue=lruQueue(max),postfix=options.async&&extensions.async||options.promise&&extensions.promise?"async":"",conf.on("set"+postfix,hit=function(id){id=queue.hit(id),id!==void 0&&conf.delete(id)}),conf.on("get"+postfix,hit),conf.on("delete"+postfix,queue.delete),conf.on("clear"+postfix,queue.clear))}}});var require_ref_counter=__commonJS({"node_modules/memoizee/ext/ref-counter.js"(){"use strict";init_define_process_env();init_shim();var d=require_d(),extensions=require_registered_extensions(),create=Object.create,defineProperties=Object.defineProperties;extensions.refCounter=function(ignore,conf,options){var cache,postfix;cache=create(null),postfix=options.async&&extensions.async||options.promise&&extensions.promise?"async":"",conf.on("set"+postfix,function(id,length){cache[id]=length||1}),conf.on("get"+postfix,function(id){++cache[id]}),conf.on("delete"+postfix,function(id){delete cache[id]}),conf.on("clear"+postfix,function(){cache={}}),defineProperties(conf.memoized,{deleteRef:d(function(){var id=conf.get(arguments);return id===null||!cache[id]?null:--cache[id]?!1:(conf.delete(id),!0)}),getRefCount:d(function(){var id=conf.get(arguments);return id===null||!cache[id]?0:cache[id]})})}}});var require_memoizee=__commonJS({"node_modules/memoizee/index.js"(exports,module){"use strict";init_define_process_env();init_shim();var normalizeOpts=require_normalize_options(),resolveLength=require_resolve_length(),plain=require_plain();module.exports=function(fn){var options=normalizeOpts(arguments[1]),length;return options.normalizer||(length=options.length=resolveLength(options.length,fn.length,options.async),length!==0&&(options.primitive?length===!1?options.normalizer=require_primitive():length>1&&(options.normalizer=require_get_primitive_fixed()(length)):length===!1?options.normalizer=require_get2()():length===1?options.normalizer=require_get_1()():options.normalizer=require_get_fixed()(length))),options.async&&require_async(),options.promise&&require_promise(),options.dispose&&require_dispose(),options.maxAge&&require_max_age(),options.max&&require_max(),options.refCounter&&require_ref_counter(),plain(fn,options)}}});var require_constraint_defs=__commonJS({"lib-browser-old/db/constraint_defs.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.get=exports.by_name=exports.all_search_constraints=exports.all=void 0;exports.numberify=numberify;require_es_array_includes();require_es_error_cause();require_es_object_values();require_es_parse_float();require_es_regexp_exec();require_es_string_split();require_es_array_iterator();require_web_dom_collections_iterator();require_es_string_includes();var _keyBy=_interopRequireDefault(require_keyBy()),_mapValues=_interopRequireDefault(require_mapValues()),_memoizee=_interopRequireDefault(require_memoizee()),errors=_interopRequireWildcard(require_errors()),b_object=_interopRequireWildcard(require_b_object()),b_location_utils=_interopRequireWildcard(require_b_location_utils()),b_location=_interopRequireWildcard(require_b_location()),_b_array=require_b_array();function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ConstraintDef=class{constructor(_ref){let{name,fn,value_type}=_ref;if(this.name=name,this.fn=fn,this.value_type=value_type,!["none","simple","array","geographic_address"].includes(this.value_type))throw new Error}takes_no_value(){return this.value_type==="none"}takes_array_value(){return this.value_type==="array"}process_array_value(v){if(Array.isArray(v))return v;if((v==null?void 0:v.all)!=null){var _v$all;return(_v$all=v.all())!=null?_v$all:[]}else if(v&&(0,_b_array.isArrayLike)(v)){let values_array=Object.values(v);return values_array.length===0?[]:values_array}else return[]}resolve_constraint(_ref2){let{entry,null_not_dropped}=_ref2;return null_not_dropped&&(entry=this.heed_empty_constraint(entry),!entry)?void 0:entry.constraint_type==="return_empty_set"?entry:get(entry.constraint_type).ignore_empty_constraint(entry)}heed_empty_constraint(entry){let new_entry=b_object.extend({},entry);if(this.takes_array_value()){if(!this.process_array_value(entry.value).length){if(this.name==="not in")return;new_entry.constraint_type="return_empty_set"}}else[null,""].includes(new_entry.value)&&(this.name==="equals"&&(new_entry.constraint_type="is_empty"),this.takes_no_value()||(new_entry.constraint_type="return_empty_set"));return this.name==="geographic_search"&&!new_entry.value.origin_address&&(new_entry.constraint_type="return_empty_set"),new_entry}ignore_empty_constraint(entry){if(this.takes_array_value()){let value=this.process_array_value(entry.value);if(value.length)return b_object.extend({},entry,{value})}else{if(this.takes_no_value())return{key:entry.key,constraint_type:entry.constraint_type,self:entry.self};if(this.name!=="geographic_search"&&entry.value!=null&&entry.value!=="")return entry;if(this.name==="geographic_search"&&entry.value.origin_address!=null&&entry.value.origin_address!=="")return entry.value.origin_address=b_location.from_address(entry.value.origin_address),entry}return null}};function numberify(x){return String(parseFloat(x))===x?parseFloat(x):x}function _equals(expected,actual){return expected===!1&&actual==null?!0:numberify(expected)===numberify(actual)}function _text_contains_string(expected,actual){let term=actual!=null?actual:"",words=expected!=null?expected:null;return term.indexOf(words)!==-1}function _text_contains(expected,actual){var _expected$toLowerCase,_actual$toLowerCase;let expected_words=(_expected$toLowerCase=expected==null?void 0:expected.toLowerCase().split(/\s+/))!=null?_expected$toLowerCase:["WILL_NEVER_FIND_THIS"],actual_words=((_actual$toLowerCase=actual==null?void 0:actual.toLowerCase())!=null?_actual$toLowerCase:"").split(/\s+/);for(let word of expected_words)if(!actual_words.includes(word))return!1;return!0}function range_invert(array){return array[0]>array[1]?[array[1],array[0]]:array}var all=(0,_memoizee.default)(()=>{let object2={email_equals:{value_type:"simple"},email_contains_string:{value_type:"simple"},equals:{value_type:"simple",fn:_equals},"not equal":{value_type:"simple",fn(expected,actual){return!_equals(expected,actual)}},is_empty:{value_type:"none",fn(expected,actual){return actual==null||actual===""}},is_not_empty:{value_type:"none",fn(expected,actual){return actual!=null&&actual!==""}},in:{value_type:"array",fn(expected,actual){return(expected!=null?expected:[]).some(item=>_equals(item,actual))}},"not in":{value_type:"array",fn(expected,actual){return!(expected!=null?expected:[]).some(item=>_equals(item,actual))}},contains:{value_type:"simple",fn(expected,actual){var _actual$indexOf;return((_actual$indexOf=actual==null?void 0:actual.indexOf(expected))!=null?_actual$indexOf:-1)!==-1}},"not contains":{value_type:"simple",fn(expected,actual){var _actual$indexOf2;return((_actual$indexOf2=actual==null?void 0:actual.indexOf(expected))!=null?_actual$indexOf2:-1)===-1}},empty:{value_type:"none",fn(expected,actual){return!actual||actual.length===0}},"not empty":{value_type:"none",fn(expected,actual){return(actual==null?void 0:actual.length)>0}},"greater than":{value_type:"simple",fn(expected,actual){return actual!=null&&numberify(actual)>numberify(expected)}},gte:{value_type:"simple",fn(expected,actual){return actual!=null&&numberify(actual)>=numberify(expected)}},"less than":{value_type:"simple",fn(expected,actual){return actual!=null&&numberify(actual)<numberify(expected)}},lte:{value_type:"simple",fn(expected,actual){return actual!=null&&numberify(actual)<=numberify(expected)}},"not true":{value_type:"none",fn(expected,actual){return[!1,null,void 0].includes(actual)}},"text contains string":{value_type:"simple",fn:_text_contains_string},"not text contains string":{value_type:"simple",fn(expected,actual){return!_text_contains_string(expected,actual)}},"text contains":{value_type:"simple",fn:_text_contains},"not text contains":{value_type:"simple",fn(expected,actual){return!_text_contains(expected,actual)}},geographic_search:{value_type:"geographic_address",fn(_ref3,actual){let{range,unit,origin_address}=_ref3;if(!actual||!origin_address)return!1;let origin_address_coordinates={lat:origin_address.lat,lng:origin_address.lng},actual_coordinates={lat:actual.lat,lng:actual.lng};return b_location_utils.geographic_distance(actual_coordinates,origin_address_coordinates,unit)<=range}},contains_all_fields:{value_type:"simple",fn(expected,actual){var _actual$toLowerCase$s,_expected$toLowerCase2,_expected;let actual_pieces=(_actual$toLowerCase$s=actual==null?void 0:actual.toLowerCase().split(" "))!=null?_actual$toLowerCase$s:[],expected_pieces=(_expected$toLowerCase2=(_expected=expected)==null?void 0:_expected.toLowerCase().split(" "))!=null?_expected$toLowerCase2:["WILL_NEVER_FIND_THIS"];for(expected of expected_pieces){let found=!1;for(let piece of actual_pieces)if(piece.indexOf(expected)!==-1){found=!0;break}if(!found)return!1}return!0}},prefix_search:{value_type:"simple",fn(expected,actual){var _actual$toLowerCase$s2;let actual_pieces=(_actual$toLowerCase$s2=actual==null?void 0:actual.toLowerCase().split(" "))!=null?_actual$toLowerCase$s2:[];for(let actual_piece of actual_pieces)if(actual_piece.indexOf(expected)===0)return!0;return!1}},match_phrase_prefix:{value_type:"simple",fn(expected,actual){var _actual$toLowerCase$s3;let actual_pieces=(_actual$toLowerCase$s3=actual==null?void 0:actual.toLowerCase().split(" "))!=null?_actual$toLowerCase$s3:[];for(let actual_piece of actual_pieces)if(actual_piece.indexOf(expected)===0)return!0;return!1}},range_contains:{value_type:"array",fn(expected,actual){var _actual,_expected2;return((_actual=actual)==null?void 0:_actual[0])==null||((_expected2=expected)==null?void 0:_expected2[0])==null?!1:(expected=range_invert(expected),actual=range_invert(actual),actual[0]<=expected[0]&&actual[1]>=expected[1])}},range_contains_point:{value_type:"simple",fn(expected,actual){var _actual2;return((_actual2=actual)==null?void 0:_actual2[0])==null||expected==null?!1:(actual=range_invert(actual),actual[0]<=expected&&actual[1]>=expected)}},range_contained_by:{value_type:"array",fn(expected,actual){var _actual3,_expected3;return((_actual3=actual)==null?void 0:_actual3[0])==null||((_expected3=expected)==null?void 0:_expected3[0])==null?!1:(expected=range_invert(expected),actual=range_invert(actual),expected[0]<=actual[0]&&expected[1]>=actual[1])}},range_overlaps:{value_type:"array",fn(expected,actual){var _actual4,_expected4;return((_actual4=actual)==null?void 0:_actual4[0])==null||((_expected4=expected)==null?void 0:_expected4[0])==null?!1:(expected=range_invert(expected),actual=range_invert(actual),actual[0]<=expected[1]&&actual[1]>=expected[0])}},range_greater_than:{value_type:"array",fn(expected,actual){var _actual5,_expected5;return((_actual5=actual)==null?void 0:_actual5[0])==null||((_expected5=expected)==null?void 0:_expected5[0])==null?!1:(expected=range_invert(expected),actual=range_invert(actual),actual[0]>expected[1])}},range_less_than:{value_type:"array",fn(expected,actual){var _actual6,_expected6;return((_actual6=actual)==null?void 0:_actual6[0])==null||((_expected6=expected)==null?void 0:_expected6[0])==null?!1:(expected=range_invert(expected),actual=range_invert(actual),actual[1]<expected[0])}},range_greater_than_point:{value_type:"simple",fn(expected,actual){var _actual7;return((_actual7=actual)==null?void 0:_actual7[0])==null||expected==null?!1:(actual=range_invert(actual),actual[0]>expected)}},range_less_than_point:{value_type:"simple",fn(expected,actual){var _actual8;return((_actual8=actual)==null?void 0:_actual8[0])==null||expected==null?!1:(actual=range_invert(actual),actual[1]<expected)}}};return Object.keys(object2).map(name=>new ConstraintDef(b_object.extend({name},object2[name])))});exports.all=all;var by_name=(0,_memoizee.default)(()=>(0,_keyBy.default)(all(),c=>c.name));exports.by_name=by_name;var get=name=>{let def=by_name()[name];if(!def)throw new errors.UnexpectedError("missing constraint_def",{name});return def};exports.get=get;var all_search_constraints=(0,_mapValues.default)(by_name(),c=>c.fn);exports.all_search_constraints=all_search_constraints}});var require_Dynamic=__commonJS({"lib-browser-old/db/values/Dynamic.js"(exports,module){"use strict";init_define_process_env();init_shim();var Dynamic2=class{};module.exports=Dynamic2}});var require_ListWrapper=__commonJS({"lib-browser-old/db/values/ListWrapper.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_weak_map();require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_sort();require_web_dom_collections_for_each();require_es_array_includes();require_es_string_includes();var _fastDeepEqual=_interopRequireDefault(require_fast_deep_equal()),u=_interopRequireWildcard(require_u2()),incremental=_interopRequireWildcard(require_incremental()),db_utils=_interopRequireWildcard(require_db_utils()),btype_ids=_interopRequireWildcard(require_btype_ids()),db_consts=_interopRequireWildcard(require_db()),_value_types=_interopRequireDefault(require_value_types()),_byte=require_byte(),special_keys=_interopRequireWildcard(require_special_keys()),registry=_interopRequireWildcard(require_registry2()),eval_node_state=_interopRequireWildcard(require_eval_node_state()),_lib=_interopRequireDefault(require_lib()),expression_utils=_interopRequireWildcard(require_expression_utils()),hydrate2=_interopRequireWildcard(require_hydrate()),_Dynamic=_interopRequireDefault(require_Dynamic()),_loggable=require_loggable();function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ListWrapper=class _ListWrapper extends _Dynamic.default{constructor(db,query){if(super(),this.db=void 0,this.query=void 0,this._creation_eval_node=void 0,!db)throw new u.UnexpectedError("missing db");if(!query)throw new u.UnexpectedError("missing query");this.db=db,this.query=query;let eval_node=eval_node_state.get_current_eval_node();return eval_node&&(this._creation_eval_node=eval_node),this}set(){}_with_eval_node(fn){if(eval_node_state.get_current_eval_node()||!u.on_client()||!this._creation_eval_node)return fn();try{return eval_node_state.set_current_eval_node(this._creation_eval_node),fn()}finally{eval_node_state.set_current_eval_node(null)}}get_children(from2,n){if(n<1)return[];from2+n>db_consts.ALL_MAX&&(n=db_consts.ALL_MAX-from2);let ret=this._with_eval_node(()=>this.db.execute_with_dependency(this.query,from2,n));return this.db.array_to_objects(this.query,ret)}all_ids(){let n=db_consts.ALL_MAX,new_query={t:"Columns",columns:["_id"],prev:this.query};return this._with_eval_node(()=>this.db.execute_with_dependency(new_query,0,n))}get_plan(from2,n){return this.db.build_query_plan(this.query,from2,n)}length(options){let length_query={t:"Length",prev:this.query,options};return this._with_eval_node(()=>this.db.execute_with_dependency(length_query,0,1)[0])}length_or_zero(){var _this$length;return(_this$length=this.length())!=null?_this$length:0}get_item_btype_id(){return this.db.get_plan_ret_btype(this.query)}filter(constraints,null_not_dropped){if(constraints=_lib.default.or_throw().bv().resolve_constraints(constraints,null_not_dropped),constraints=hydrate2.dehydrate_tree(constraints),constraints.length===0)return this;for(let c of constraints)if(c.constraint_type==="return_empty_set")return _lib.default.or_throw().db_instance().static_list(this.get_item_btype_id(),[]);let new_query={t:"Filter",constraints,prev:this.query};return new _ListWrapper(this.db,new_query)}minus_list(other){let constraint,value=db_utils.lang_btypes().get(this.get_item_btype_id());if(value.custom_type()){let other_ids=[];for(let item of other.all())item!=null&&other_ids.push(item._id());constraint={key:special_keys.UNIQUE_ID,constraint_type:"not in",value:other_ids}}else{let message_name="is_not_contained_by_list";if(value.get_message(message_name).is_not_found())throw new u.UnexpectedError("minus_list called on a value that doesn't have ".concat(message_name,": ").concat(value.id()));constraint={key:special_keys.ADVANCED_SEARCH_CONSTRAINT,self:this.get_item_btype_id(),value:{"%x":"InjectedValue","%n":{"%x":"Message","%nm":message_name,"%a":expression_utils.create_reduced(other,btype_ids.list_type(value.id()))}}}}return this.filter([constraint])}with_extra_fields(extra_field_names){if(!extra_field_names||extra_field_names.length===0)return this;let new_query={t:"ExtraFields",extra_field_names,prev:this.query};return this._with_eval_node(()=>new _ListWrapper(this.db,new_query))}sort(sorts_list){if(sorts_list=db_utils.resolve_sorts(sorts_list,!1),sorts_list.length===0)return this;let new_query={t:"Sort",sorts_list,prev:this.query};return new _ListWrapper(this.db,new_query)}sort_on_id(){return this.sort([{sort_field:"_id"}])}capped(max_length){let new_query={t:"Cap",max:max_length,prev:this.query};return new _ListWrapper(this.db,new_query)}offset(offset){let new_query={t:"Offset",offset,prev:this.query};return new _ListWrapper(this.db,new_query)}to_json(){return{_class:"ListWrapper",query:this.query}}dehydrate(){return hydrate2.dehydrate_prefix("ListWrapper")+u.incremental_json_stringify(this.query)}get(){return this}all(){return this.get_children(0,db_consts.ALL_MAX)}all_iteratively(callback){let cursor;for(;cursor=this._iterate(cursor),!!cursor.batch.length;)callback(cursor.batch)}_iterate(cursor){var _cursor$index;let batch_size=this._get_batch_size(cursor),batch2=this.get_children((_cursor$index=cursor==null?void 0:cursor.index)!=null?_cursor$index:0,batch_size);return this._create_next_cursor(cursor,batch2,batch_size)}_get_batch_size(cursor){let TARGET_BATCH_BYTE_SIZE=_byte.MEBIBYTE,MIN_BATCH_SIZE=1,MAX_BATCH_SIZE=db_consts.MAX_SEARCH_CHUNK,target_batch_size=cursor?Math.floor(TARGET_BATCH_BYTE_SIZE/cursor.average_item_byte_size):20;return Math.min(Math.max(target_batch_size,MIN_BATCH_SIZE),MAX_BATCH_SIZE)}_create_next_cursor(cursor,batch2,batch_size){let is_valid_sample=sample=>(sample==null?void 0:sample._id)!=null&&typeof(sample==null?void 0:sample.raw)=="function",samples=batch2.slice(0,20).filter(is_valid_sample);samples.forEach(sample=>sample.precache());let raw_samples=samples.map(sample=>sample.raw()),sample_byte_size=incremental.incremental_json_length(raw_samples);if(cursor){let next_sample_count=cursor.sample_count+samples.length;return{batch:batch2,index:cursor.index+batch_size,sample_count:next_sample_count,average_item_byte_size:(cursor.average_item_byte_size*cursor.sample_count+sample_byte_size)/next_sample_count}}else return{batch:batch2,index:batch_size,sample_count:samples.length,average_item_byte_size:sample_byte_size/samples.length}}make_static(){return this.db.static_list(this.get_item_btype_id(),this.all())}contains(item,V){let contains_query={t:"Contains",prev:this.query,value_id:V.id(),item:hydrate2.dehydrate_tree(item)};return this._with_eval_node(()=>this.db.execute_with_dependency(contains_query,0,1)[0])}position(item,V){let position_query={t:"Position",prev:this.query,value_id:V.id(),item:hydrate2.dehydrate_tree(item)};return this._with_eval_node(()=>this.db.execute_with_dependency(position_query,0,1)[0])}_length_compare(op,n,options){let length_query={t:"Length",prev:this.query,options},query={t:"Compare",op,prev:length_query,n};return this._with_eval_node(()=>this.db.execute_with_dependency(query,0,1)[0])}length_greater_than(n,options){return this._length_compare(">",n,options)}length_greater_or_equal_than(n,options){return this._length_compare(">=",n,options)}length_less_than(n,options){return this._length_compare("<",n,options)}length_less_or_equal_than(n,options){return this._length_compare("<=",n,options)}length_equals(n,options){return this._length_compare("===",n,options)}length_not_equals(n,options){return this._length_compare("!==",n,options)}_numeric_op(op,options){if(this.get_item_btype_id()!=="number")return null;let numeric_query={t:"Numeric",prev:this.query,op,options};return this._with_eval_node(()=>this.db.execute_with_dependency(numeric_query,0,1)[0])}_date_op(op,options){if(this.get_item_btype_id()!=="date")return null;let numeric_query={t:"Numeric",prev:this.query,op,options};return this._with_eval_node(()=>new Date(this.db.execute_with_dependency(numeric_query,0,1)[0]))}sum(options){return this._numeric_op("sum",options)}product(options){return this._numeric_op("product",options)}average(options){var _this$_numeric_op;return(_this$_numeric_op=this._numeric_op("average",options))!=null?_this$_numeric_op:this._date_op("average",options)}median(options){var _this$_numeric_op2;return(_this$_numeric_op2=this._numeric_op("median",options))!=null?_this$_numeric_op2:this._date_op("median",options)}min(options){var _this$_numeric_op3;return(_this$_numeric_op3=this._numeric_op("min",options))!=null?_this$_numeric_op3:this._date_op("min",options)}max(options){var _this$_numeric_op4;return(_this$_numeric_op4=this._numeric_op("max",options))!=null?_this$_numeric_op4:this._date_op("max",options)}flatten(){let new_query={t:"Flatten",prev:this.query};return new _ListWrapper(this.db,new_query)}list_cast(target_value_id){return target_value_id===this.get_item_btype_id()?this:new _ListWrapper(this.db,{t:"Cast",prev:this.query,value_id:target_value_id})}group_by(_ref){let{groupings,aggregations}=_ref,value_id=this.get_item_btype_id();function convert(grouping){return grouping=u.extend({},grouping),grouping.start!=null&&(grouping.start=grouping.start.valueOf()),grouping.end!=null&&(grouping.end=grouping.end.valueOf()),grouping}groupings=groupings.map(grouping=>convert(grouping));for(let{message,fn,timezone_string}of groupings){if(!db_utils.can_group_on(value_id).includes(message))throw new u.UnexpectedError("bad grouping message",{fn,value_id:(0,_loggable.to_loggable)(value_id),message});if(fn!=null&&!db_utils.can_group_with(value_id,message).includes(fn))throw new u.UnexpectedError("bad grouping function",{fn,value_id:(0,_loggable.to_loggable)(value_id),message});if(db_consts.CALENDAR_GROUPINGS.includes(fn)&&timezone_string==null)throw new u.UnexpectedError("grouping fn "+fn+" requires a timezone string")}for(let{fn,message}of aggregations){if(!db_consts.SUPPORTED_AGGREGATIONS.includes(fn))throw new u.UnexpectedError("bad aggregation function: "+fn);if(message!=null&&!db_utils.can_aggregate_on(fn,value_id).includes(message))throw new u.UnexpectedError("bad aggregation message",{fn,value_id:(0,_loggable.to_loggable)(value_id),message})}let new_query={t:"GroupBy",groupings,aggregations,prev:this.query};return this._with_eval_node(()=>new _ListWrapper(this.db,new_query))}is_equal_to(other_list){return!registry.is(other_list,_value_types.default.LIST_WRAPPER)||this.db!==other_list.db||this._creation_eval_node!==other_list._creation_eval_node?!1:(0,_fastDeepEqual.default)(this.query,other_list.query)}};ListWrapper.from_json=(my_db,_ref2)=>{let{query}=_ref2;return new ListWrapper(my_db,query)};ListWrapper.rehydrate=function(my_db,key){let query=u.incremental_json_parse(key);return new ListWrapper(my_db,query)};module.exports=ListWrapper}});var require_plan_utils=__commonJS({"lib-browser-old/db/plans/plan_utils.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_includes();require_es_string_includes();require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_sort();require_es_regexp_exec();require_es_string_replace();require_es_symbol_description();require_es_json_stringify();var _Intl,en_us_collator,plan_utils=exports,u=require_u2(),db_utils=require_db_utils(),db_consts=require_db(),special_keys=require_special_keys(),constraint_defs=require_constraint_defs(),appquery=require_appquery(),evaluate=require_evaluate(),logger=require_logger(),ListWrapper=require_ListWrapper(),hydrate2=require_hydrate(),btype_ids=require_btype_ids();plan_utils.ensure_single=function(plan,from2,fn){if(from2>0)return n=>[];let called=!1;return function(n){var _n;return(_n=n)!=null||(n=1),n!==1?[]:called?[]:(called=!0,fn())}};plan_utils.can_execute_in_db=function(value_id,constraint){let needle;if(constraint.key==="_id"&&["lower than","greater than"].includes(constraint.constraint_type))return!0;if(value_id==="user"&&["email","StripeCustomerID","user_signed_up"].includes(constraint.key))return!(constraint.key==="email"&&constraint.constraint_type!=="email_equals"&&constraint.constraint_type!=="email_contains_string");if(["and","or"].includes(constraint.constraint_type))return!0;if(constraint.key===special_keys.UNIQUE_ID)return["equals","not equal","in","not in"].includes(constraint.constraint_type);if(constraint.key===special_keys.ALL_DB_FIELDS)return!0;if(constraint.key===special_keys.ADVANCED_SEARCH_CONSTRAINT)return!1;let message=db_utils.lang_btypes().get(value_id).get_message(constraint.key);return message.is_lookup()&&(needle=message.ret_btype_id(),!db_consts.NO_DB_CONSTRAINTS.includes(needle))};plan_utils.pass_filter=function(item,processed_constraints,value_id){for(let c of processed_constraints)if(!plan_utils.local_constrain(item,c,value_id))return!1;return!0};function simple_id_sort(a,b){return a==null||!a._id()?1:b==null||!b._id()?-1:a._id().localeCompare(b._id(),"en-US")}plan_utils.sort_in_memory=function(results,sorts_list,value_id){if(sorts_list.length===0)return db_utils.lang_btypes().get(value_id).custom_type()!=null?results.sort(simple_id_sort):results;if(sorts_list[0].sort_field===special_keys.RANDOM_SORTING)return u.shuffle_array(results);{let next_comparer=function(items){return items[0]?plan_utils.make_sort_comparer(extractor(items[0]),items[0].descending,next_comparer(items.slice(1))):(a,b)=>results.indexOf(a)-results.indexOf(b)},extractor=sort_item=>function(entry){if(sort_item.sort_on_id)return entry._id();if(sort_item.self)return entry;if(sort_item.sort_field&&entry!=null){if(db_utils.lang_btypes().get(value_id).option_set()!=null){var _db_utils$lang_btypes;return(_db_utils$lang_btypes=db_utils.lang_btypes().get(value_id).option_set().value(entry))==null?void 0:_db_utils$lang_btypes.attr(sort_item.sort_field)}if(typeof entry.child!="function")if(btype_ids.is_api_type(value_id)){let message=db_utils.lang_btypes().get(value_id).get_message(sort_item.sort_field);if(message.is_not_found())throw new u.OwnerError("Sorting on this type of thing is currently not supported");return message.evaluate_without_cast(entry)}else throw new u.UnexpectedError("Trying to sort on a bad object",{value_id,sort_item,string_entry:String(entry)});return entry.child(sort_item.sort_field).get()}else return null};return results.sort(next_comparer(sorts_list))}};typeof Intl<"u"&&((_Intl=Intl)==null?void 0:_Intl.Collator)!=null?en_us_collator=new Intl.Collator("en-US"):en_us_collator={compare(a,b){return String(a).localeCompare(b,"en-US")}};var first_pass_regex=/[ &'.]/g;plan_utils.locale_compare=function(a,b){let first_pass=en_us_collator.compare(a.replace(first_pass_regex,""),b.replace(first_pass_regex,""));return first_pass!==0?first_pass:en_us_collator.compare(a,b)};plan_utils.make_sort_comparer=function(extractor,descending,next_comparer){let d;return descending?d=-1:d=1,function(a,b){let original_a_val=extractor(a),original_b_val=extractor(b),a_val=constraint_defs.numberify(original_a_val),b_val=constraint_defs.numberify(original_b_val);if(typeof original_a_val==typeof original_b_val&&typeof a_val!=typeof b_val&&(a_val=original_a_val,b_val=original_b_val),typeof a_val!=typeof b_val){if(["undefined","object","function"].includes(typeof a_val))return 1;if(["undefined","object","function"].includes(typeof b_val))return-1;if(typeof a_val=="string")return 1*d;if(typeof b_val=="string")return-1*d;if(typeof a_val=="number")return 1*d;if(typeof b_val=="number")return-1*d}else return a_val===b_val&&next_comparer?next_comparer(a,b):typeof a_val=="string"?plan_utils.locale_compare(a_val,b_val)*d:typeof a_val=="number"?(a_val-b_val)*d:typeof a_val=="boolean"?a_val?d:-d:a_val instanceof Date&&b_val instanceof Date?a_val<b_val?-1*d:1*d:0}};plan_utils.get_group_by_value_id=function(prev_value_id,groupings,aggregations){let prev_value=db_utils.lang_btypes().get(prev_value_id),struct_data={};for(let[idx,{message:message_name}]of groupings.entries()){let message=prev_value.get_message(message_name);struct_data["grouping"+String(idx)]=[message.description(void 0,!0),message.ret_btype_id()]}for(let[idx,{fn,message:message_name}]of aggregations.entries()){let value_id,display;if(message_name){let message=prev_value.get_message(message_name);display=fn+" of "+message.description(void 0,!0),value_id=message.ret_btype_id()}else display=fn,value_id="number";struct_data["agg"+String(idx)]=[display,value_id]}return"struct."+u.base64(JSON.stringify({caption:"Grouping",definition:struct_data}))};plan_utils.calculate_sort_score=function(data,sorts_list){let score=[];for(let a of sorts_list!=null?sorts_list:[])typeof a.sort_field=="string"?score.push(data==null?void 0:data[a.sort_field]):score.push(0);return score};plan_utils.is_less_than=function(sorts_list,a_id,a_score,b_id,b_score,server_sorted){var _server_sorted;if((_server_sorted=server_sorted)!=null||(server_sorted=!1),server_sorted)return a_score[0]<b_score[0];for(let[n,{descending}]of(sorts_list!=null?sorts_list:[]).entries())if(a_score[n]!==b_score[n]){if(a_score[n]==null)return!1;if(b_score[n]==null)return!0;if(typeof a_score[n]=="string"){let ret=plan_utils.locale_compare(a_score[n],b_score[n]);return descending?ret>0:ret<0}else return descending?a_score[n]>b_score[n]:a_score[n]<b_score[n]}return a_id<b_id};plan_utils.AGGREGATE_LOCAL_CHANGE={count(was_in_search,is_in_search,old_value,new_value,current){return current+(was_in_search?-1:1)},sum(was_in_search,is_in_search,old_value,new_value,current){var _old_value,_new_value;return(_old_value=old_value)!=null||(old_value=0),(_new_value=new_value)!=null||(new_value=0),current+new_value-old_value},product(was_in_search,is_in_search,old_value,new_value,current){var _old_value2,_new_value2;return(_old_value2=old_value)!=null||(old_value=1),(_new_value2=new_value)!=null||(new_value=1),current*new_value/old_value}};plan_utils.aggregate_started_key=(agg_fn,field,options)=>"CallAggregate_started_"+agg_fn+(field?"_"+field:"")+(options!=null&&options.should_approx?"_approximate":"")+(options!=null&&options.cacheable?"_cached":"");var EMAIL_TEST_FNS={email_equals:(a,b)=>a===b,email_contains_string:(a,b)=>a==null?void 0:a.includes(b)};plan_utils.local_constrain=function(obj,c,value_id){if(obj==null)return!1;if(c.key===special_keys.ADVANCED_SEARCH_CONSTRAINT){let context={datasources:{injected_value(){return obj},injected_value_btype(){var _c$self,_obj$_type,_ref,_ref2,_c$self2,_obj$_type3;let investigation_default=(_c$self=c.self)!=null?_c$self:obj==null||(_obj$_type=obj._type)==null?void 0:_obj$_type.call(obj);if(investigation_default!=null&&investigation_default!==value_id){var _obj$_type2;logger.debug("different value_id in injected datasource constraint",{self:c.self,obj_type:obj==null||(_obj$_type2=obj._type)==null?void 0:_obj$_type2.call(obj),value_id})}return(_ref=(_ref2=(_c$self2=c.self)!=null?_c$self2:obj==null||(_obj$_type3=obj._type)==null?void 0:_obj$_type3.call(obj))!=null?_ref2:value_id)!=null?_ref:"null"}},advanced_search:!0},[result]=evaluate.evaluate(c.value,context,null,null);return result}else{let sub;if(c.constraint_type in EMAIL_TEST_FNS){let auth_node=obj.child("authentication"),email_email=auth_node.child("email").child("email").get();if(EMAIL_TEST_FNS[c.constraint_type](email_email,c.value))return!0;for(let oauth_provider of appquery.get_oauth_providers()){let oauth_email=auth_node.child(oauth_provider).child("email").get();if(EMAIL_TEST_FNS[c.constraint_type](oauth_email,c.value))return!0}return!1}else if(c.constraint_type==="or"){var _c$opts;if(!((_c$opts=c.opts)!=null&&_c$opts.length))throw new u.UnexpectedError("assertion: or must have at least one sub",{c});for(sub of c.opts)if(plan_utils.local_constrain(obj,sub,value_id))return!0;return!1}else if(c.constraint_type==="and"){var _c$opts2;if(!((_c$opts2=c.opts)!=null&&_c$opts2.length))throw new u.UnexpectedError("assertion: and must have at least one sub",{c});for(sub of c.opts)if(!plan_utils.local_constrain(obj,sub,value_id))return!1;return!0}else{let message,val;if(c.key==="_id"&&typeof obj._id=="function")val=obj._id();else if(c.key===special_keys.ALL_DB_FIELDS)val=u.json_stringify(obj.raw());else if(typeof obj.child!="function")if(btype_ids.is_api_type(value_id)){if(message=db_utils.lang_btypes().get(value_id).get_message(c.key),message.is_not_found())throw new u.OwnerError("Filtering on this type of thing is currently not supported");val=message.evaluate_without_cast(obj),val instanceof ListWrapper&&(val=val.all())}else return!1;else{let is_lookup;value_id&&(message=db_utils.lang_btypes().get(value_id).get_message(c.key),is_lookup=message.is_lookup());let lookup_key=null;if(typeof is_lookup=="string"?lookup_key=is_lookup:(is_lookup||!message)&&(lookup_key=c.key),lookup_key&&message){var _obj$child$raw,_message$evaluate_wit;let raw_val=(_obj$child$raw=obj.child(c.key).raw())!=null?_obj$child$raw:null,msg_val=(_message$evaluate_wit=message.evaluate_without_cast(obj))!=null?_message$evaluate_wit:null;raw_val!==msg_val&&message.ret_btype().option_set()&&logger.info("Local constrain value mismatch",{raw_val,msg_val,c,lookup_key})}if(lookup_key){if(val=obj.child(c.key).raw(),hydrate2.is_json_class(val)){let wrapped_value=hydrate2.from_json(obj.db,val);wrapped_value instanceof ListWrapper?val=wrapped_value.all():logger.error("JSON class value is not handled",val)}}else val=message.evaluate_without_cast(obj,null,null,null,{constraint_messsage:c.key})}let constrain_fn=constraint_defs.all_search_constraints[c.constraint_type];if(!constrain_fn)throw new u.UnexpectedError("bad constraint type "+c.constraint_type);return constrain_fn(c.value,val)}}}}});var require_StaticList=__commonJS({"lib-browser-old/db/values/StaticList.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;require_es_array_iterator();require_web_dom_collections_iterator();var u=_interopRequireWildcard(require_u2()),b_fiber=_interopRequireWildcard(require_b_fiber()),logger=_interopRequireWildcard(require_logger()),btype_ids=_interopRequireWildcard(require_btype_ids()),_ListWrapper=_interopRequireDefault(require_ListWrapper()),_lib=_interopRequireDefault(require_lib()),hydrate2=_interopRequireWildcard(require_hydrate()),db_utils=_interopRequireWildcard(require_db_utils());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var static_warning_disabled=!1,StaticList=class _StaticList extends _ListWrapper.default{constructor(data,database,value_id){var _database;if((_database=database)!=null||(database=(0,_lib.default)().db_instance()),value_id==null){var _value_id;static_warning_disabled||logger.error("StaticList created without value_id");for(let sample_item of data){if(sample_item==null){b_fiber.optional_pause();continue}if(value_id=_StaticList.guess_value_id(sample_item),!value_id)throw new u.UnexpectedError("could not guess value_id",{dehydrated:hydrate2.dehydrate_tree(data)});break}(_value_id=value_id)!=null||(value_id="null")}super(database,{t:"Static",data:db_utils.array_to_ids(value_id,data),value_id})}};StaticList.rehydrate=function(my_db,key){let{value_id,data}=hydrate2._rehydrate_value_id_data(my_db,key);return new StaticList(data,my_db,value_id)};StaticList.guess_value_id=function(obj){return obj==null?null:typeof obj=="string"?"text":typeof obj=="number"?"number":typeof obj._type=="function"?obj._type():typeof obj=="boolean"?"sys.bool":obj instanceof _ListWrapper.default?btype_ids.list_type(obj.get_item_btype_id()):null};var _default=StaticList;exports.default=_default}});var require_sample=__commonJS({"lib-browser-old/db/sample.js"(exports){"use strict";init_define_process_env();init_shim();var hydrate2=require_hydrate(),StaticList=require_StaticList().default,sample=exports;require_appquery();var btypes=require_btypes();sample.SampleNode=class SampleNode{constructor(object2,name,value){var _this$value,_this$object$value$ge;this.object=object2,this.name=name,this.value=value,(_this$value=this.value)!=null||(this.value=(_this$object$value$ge=this.object.value.get_message(this.name))==null?void 0:_this$object$value$ge.ret_btype())}get(){var _this$value2;return(_this$value2=this.value)==null?void 0:_this$value2.get_sample()}raw(){var _this$value3;return(_this$value3=this.value)==null?void 0:_this$value3.get_sample()}set(){}push(){}remove(){}dehydrate(){return hydrate2.dehydrate_prefix("SampleNode")+this.value.id()}static rehydrate(db,key){return new SampleNode(null,null,btypes.get(key))}};sample.SampleList=class SampleList{constructor(btype_id){let btype=btypes.get(btype_id);return new StaticList([btype==null?void 0:btype.get_sample(),btype==null?void 0:btype.get_sample()],null,btype_id)}static rehydrate(db,key){return new SampleList(key)}};sample.SampleObject=class SampleObject{constructor(value){try{this.value=btypes.get(value)}catch(err){this.value=btypes.get("null")}this.id=value}child(name){return new sample.SampleNode(this,name)}dehydrate(){return hydrate2.dehydrate_prefix("SampleObject")+this.value.id()}_id(){return"sample:"+this.id}_type(){return this.value.id()}is_equal_to(x){var _x$dehydrate;return(x==null||(_x$dehydrate=x.dehydrate)==null?void 0:_x$dehydrate.call(x))===this.dehydrate()}precache(){}exists(){return!1}ignore_privacy(){return this}get(){}is_logged_in(){}get_email(){}static rehydrate(db,key){return new SampleObject(key)}}}});var require_client=__commonJS({"lib-browser-old/notifier/client.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.get_server_time_offset=get_server_time_offset;exports.watch=watch;require_es_array_iterator();require_web_dom_collections_iterator();require_web_immediate();require_es_parse_int();require_web_dom_collections_for_each();var u=_interopRequireWildcard(require_u2()),errors=_interopRequireWildcard(require_errors()),logger=_interopRequireWildcard(require_logger()),configuration=_interopRequireWildcard(require_client_config2());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var _topics={},STALE_CUTOFF=23*60*60*1e3,BATCH_SIZE=25;function watch(_ref,version_fn,on_update){var _topics$topic;let[prefix,...args]=_ref;if(!configuration.notifier_host)return;let topic="".concat(prefix).concat(args.join("-"));(_topics$topic=_topics[topic])!=null||(_topics[topic]={watchers:[],last_msg:null,subscribed_version:null}),_topics[topic].watchers.push({version_fn,on_update});let{last_msg,subscribed_version}=_topics[topic];if(subscribed_version!=null){var _last_msg$version;let version=version_fn();if(typeof version!="number"&&logger.error("non-numeric version",{version,topic}),version<subscribed_version)throw new errors.UnexpectedError("Watching Notifier topic that has been subscribed to with a newer version",{topic,version,subscribed_version});last_msg!=null&&version<((_last_msg$version=last_msg.version)!=null?_last_msg$version:-1/0)&&on_update(last_msg)}else _topics[topic].subscribed_version=-1/0,setImmediate(()=>subscribe_to(topic))}var _ts_handler=null,_ts_refresh_handler=null;function get_server_time_offset(cb){ensure_initializing();function try_it(){if(socket_ready()&&_ts_handler==null){var _socket;let start=Date.now();_ts_handler=function(timestamp){let end=Date.now(),avg=Math.round((start+end)/2),time_diff=timestamp-avg;cb(time_diff),_ts_handler=null,_ts_refresh_handler=null},_ts_refresh_handler=function(){_ts_handler=null,setTimeout(try_it,100),_ts_refresh_handler=null},(_socket=socket)==null||_socket.send("ts")}else setTimeout(try_it,100)}try_it()}var websocket_initializing=!1,socket=null,socket_authenticated=!1;function socket_ready(){var _socket2;return socket_authenticated&&((_socket2=socket)==null?void 0:_socket2.readyState)===1}var disconnect=null,retries=0,awaiting_acknowledgement=!1,ack_counter=0,_temp_kill;typeof window<"u"&&window!==null&&(_temp_kill=!1,window.kill_notifier_socket=function(){var _socket3;_temp_kill=!0,(_socket3=socket)==null||_socket3.close()},window.restore_notifier_socket=function(){_temp_kill=!1,initialize_socket()});function initialize_socket(){var _ts_refresh_handler2,_configuration$notifi,_configuration$notifi2;if(_temp_kill)return;if(window.WebSocket==null){console.log("No window.WebSocket class defined: real time updates are disabled");return}(_ts_refresh_handler2=_ts_refresh_handler)==null||_ts_refresh_handler2(),socket_authenticated=!1;let conn_string,notifier_host=(_configuration$notifi=configuration.notifier_host)!=null?_configuration$notifi:"",notifier_port=(_configuration$notifi2=configuration.notifier_port)!=null?_configuration$notifi2:"";notifier_host?conn_string="".concat(notifier_host,":").concat(notifier_port):conn_string=notifier_host,socket=new window.WebSocket("wss://".concat(conn_string));let _last_error=null;socket.onclose=function(close_event){var _disconnect;(_disconnect=disconnect)!=null||(disconnect=Date.now()),awaiting_acknowledgement=!1,setTimeout(initialize_socket,Math.min(6e4,retries*retries*1e3)),retries++,retries===10&&logger.error("notifier_client: socket closed after 10 retries",{last_error:_last_error,close_code:close_event==null?void 0:close_event.code,close_reason:close_event==null?void 0:close_event.reason})},socket.onerror=function(err){var _last_error$stack;_last_error=err,console.log("notifier_client.coffee: got error from socket: ".concat((_last_error$stack=_last_error.stack)!=null?_last_error$stack:""))},socket.onopen=()=>{var _configuration$notifi3;socket.send("s ".concat((_configuration$notifi3=configuration.notifier_domain)!=null?_configuration$notifi3:String(new u.UnexpectedError("no notifier domain set"))))},socket.onmessage=function(message_object){let msg=message_object.data;if(msg==="ok")socket_authenticated||(socket_authenticated=!0,retries=0,subscribe_to_all());else if(msg.slice(0,2)==="h "){let pieces=msg.split(" "),topic=pieces[1],version=pieces[2]?parseInt(pieces[2]):-1/0,message=pieces[3];_topics[topic]!=null&&(_topics[topic].last_msg={topic,version,message},_topics[topic].watchers.forEach(watcher=>watcher.on_update({topic,version,message})))}else if(msg.slice(0,2)==="i "){let msg_id=msg.split(" ")[1];if(msg_id!==String(ack_counter)){logger.error("Got a bad subscription ack!",{ack_counter,msg,msg_id}),socket.close();return}awaiting_acknowledgement=!1,check_send_next()}else if(msg.slice(0,3)==="ts "){var _ts_handler2;(_ts_handler2=_ts_handler)==null||_ts_handler2(parseInt(msg.slice(3)))}else logger.error("unrecognized message from notifier",{msg})}}var to_subscribe_queue=[];function subscribe_to_all(){to_subscribe_queue=Object.keys(_topics),check_send_next()}function subscribe_to(topic){to_subscribe_queue.push(topic),check_send_next()}function check_send_next(){var _socket4;if(to_subscribe_queue.length===0){fully_subscribed();return}if(!socket_ready()||awaiting_acknowledgement){ensure_initializing();return}awaiting_acknowledgement=!0;let to_send=to_subscribe_queue.slice(0,BATCH_SIZE);to_subscribe_queue=to_subscribe_queue.slice(BATCH_SIZE),ack_counter++;let msg="g "+String(ack_counter);for(let topic of to_send){let watcher_versions=_topics[topic].watchers.map(watcher=>watcher.version_fn()).filter(watcher_version=>typeof watcher_version!="number"?(logger.error("non-numeric version",{version:watcher_version,topic}),!1):!0);if(watcher_versions.length===0)continue;let version=Math.min(...watcher_versions);_topics[topic].subscribed_version=version,msg+=" "+topic+" "+String(version)}(_socket4=socket)==null||_socket4.send(msg)}function fully_subscribed(){if(disconnect){if(Date.now()-disconnect>STALE_CUTOFF)for(let topic in _topics)_topics[topic].watchers.forEach(_ref2=>{let{on_update}=_ref2;return on_update({stale:!0})});disconnect=null}}function ensure_initializing(){websocket_initializing||(websocket_initializing=!0,initialize_socket())}}});var require_util3=__commonJS({"lib-browser-old/util.js"(exports){"use strict";init_define_process_env();init_shim();require_es_regexp_exec();require_es_string_replace();require_es_regexp_test();require_es_array_includes();require_es_string_includes();var configuration=require_client_config2(),safe_require=require_safe_require(),environment_utilities=require_environment_utilities(),domain_consts=require_domain(),domain_utilities=require_domain_utilities(),decaf=require_decaf(),util=exports;safe_require.safe_register("./util",util);util.get_meta_hostname_for_app=function(appname){return configuration.is_dedicated?configuration.dedicated_subdomain:configuration.PROD_DOMAINS.main};var dedicated_subdomains=[];util.get_dedicated_subdomains=()=>dedicated_subdomains;util.set_dedicated_subdomains=subdomains=>dedicated_subdomains=subdomains;util.set_dedicated_subdomain=function(subdomain){let dot_is_domain=subdomain.replace(/\.i[so]$/,".is"),dot_io_domain=subdomain.replace(/\.i[so]$/,".io");dedicated_subdomains=[dot_is_domain,dot_io_domain]};configuration.is_dedicated&&configuration.dedicated_subdomain&&util.set_dedicated_subdomain(configuration.dedicated_subdomain);util.is_meta_hostname=function(hostname){if(typeof hostname!="string")return!1;if(/\.local$/.test(hostname)||domain_utilities.is_hostname_bubble_plus_subdomain(hostname)||dedicated_subdomains.includes(hostname)||domain_utilities.is_host_aws(hostname))return!0;let stripped_hostname=hostname.replace(/(?:^www\.)?(?:\.*$)?/g,"");return!!(decaf.object_values(configuration.PROD_DOMAINS).includes(stripped_hostname)||domain_utilities.is_hostname_local_bubble(hostname))};var _meta_hostname=null;environment_utilities.is_production()?configuration.is_dedicated?_meta_hostname=configuration.dedicated_subdomain:_meta_hostname=configuration.PROD_DOMAINS.main:configuration.dedicated_subdomain?_meta_hostname=configuration.dedicated_subdomain:_meta_hostname=domain_consts.LOCAL_HOSTNAME;util.get_meta_hostname_for_hostname=function(current_hostname){return configuration.echo_hostname&&util.is_meta_hostname(current_hostname)?current_hostname:_meta_hostname};util.get_meta_hostname=()=>_meta_hostname}});var require_server_errors=__commonJS({"lib-browser-old/u/server/server_errors.js"(exports){"use strict";init_define_process_env();init_shim();require_es_regexp_to_string();var _class,_class2,_class3,_class4,errors=require_errors(),server_errors=exports;server_errors.Redirect=(_class=class extends errors.ExpectedError{constructor(statusCode,url){super("redirect"),this.statusCode=statusCode,this.url=url}},_class.prototype.error_class="Redirect",_class);server_errors.Redirect.prototype.toString=function(){return"Redirect (".concat(this.statusCode,") to ").concat(this.url)};server_errors.NotFound=(_class2=class extends errors.ExpectedError{},_class2.prototype.error_class="NotFound",_class2);server_errors.ServerResponse=(_class3=class extends errors.ExpectedError{constructor(statusCode,headers,body){super("server_response"),this.statusCode=statusCode,this.headers=headers,this.body=body}toString(){return"ServerResponse ".concat(this.statusCode)}},_class3.prototype.error_class="ServerResponse",_class3);server_errors.ClientError=(_class4=class extends errors.UnexpectedError{display(){return"Invalid request: see error code for details"}},_class4.prototype.error_class="ClientError",_class4.prototype.suggested_level="owner_error",_class4)}});var require_locations2=__commonJS({"lib-browser-old/locations.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_includes();require_es_string_includes();require_es_array_iterator();require_web_dom_collections_iterator();require_es_regexp_exec();require_es_regexp_test();var url=require_url(),querystring=require_querystring(),util=require_util3(),b_string=require_b_string(),b_object=require_b_object(),errors=require_errors(),uuid=require_uuid(),url_lib=require_url(),safe_require=require_safe_require(),configuration=require_client_config2(),locations_consts=require_locations(),apps_utilities=require_apps_utilities(),environment_utilities=require_environment_utilities(),server_errors=require_server_errors(),locations=exports;safe_require.safe_register("./locations",locations);locations.get_primary_version=function(app_version){return app_version===locations_consts.LIVE_VERSION?app_version:locations_consts.TEST_VERSION};locations.get_db_version=function(app_version){return app_version===locations_consts.LIVE_VERSION||b_string.starts_with(app_version,configuration.private_version_prefix)||locations_consts.TEMPLATE_VERSIONS.includes(app_version)?app_version:locations_consts.TEST_VERSION};locations.get_db_display=function(app_version){return app_version=locations.get_db_version(app_version),app_version===locations_consts.TEST_VERSION?locations_consts.TEST_VERSION_DISPLAY:locations_consts.LIVE_VERSION_DISPLAY};locations.is_hardcode=(appname,app_version)=>apps_utilities.is_hardcoded(appname)&&(app_version==null?void 0:app_version.indexOf(configuration.private_version_prefix))!==0;locations.live_key=()=>{var _configuration$hostna;return configuration.env+" "+util.get_meta_hostname()+" "+((_configuration$hostna=configuration.hostname_modifier)!=null?_configuration$hostna:"")};locations.Location=class{constructor(base_url,options){this.base_url=base_url,options&&options.normalizeUnicode&&(this.base_url=this.standardize_unicode_url())}get_pieces(){var _path$;let pieces={},parsed=this.parsed_url();if(b_object.is_empty(parsed))return{};let path=parsed.pathname.split("/").filter(p=>p!=="");if(configuration.apps_domain&&b_string.ends_with(parsed.hostname,"."+configuration.apps_domain))pieces.appname=parsed.hostname.slice(0,parsed.hostname.lastIndexOf("."+configuration.apps_domain)),pieces.use_apps_domain=!0;else{if(configuration.apps_domain&&parsed.hostname===configuration.apps_domain)throw new server_errors.Redirect(302,"https://"+util.get_meta_hostname());util.is_meta_hostname(parsed.hostname)&&path[0]==="site"?(pieces.use_site_path=!0,pieces.appname=path[1],path=path.slice(2)):pieces.domain=parsed.hostname}return((_path$=path[0])==null?void 0:_path$.indexOf(locations_consts.VERSION_PATH_PREFIX))===0?(pieces.app_version=path[0].slice(locations_consts.VERSION_PATH_PREFIX.length),pieces.version_explicit=!0,path=path.slice(1)):(pieces.version_explicit=!1,pieces.app_version=locations_consts.LIVE_VERSION),pieces.path=path,pieces.query=parsed.query,pieces}is_production(appname){return this.parsed_url().hostname===util.get_meta_hostname_for_app(appname)}format_pieces(pieces,options){var _options$protocol;let base=((_options$protocol=options==null?void 0:options.protocol)!=null?_options$protocol:this.parsed_url().protocol)+"//";if(pieces.domain)base+=pieces.domain;else if(configuration.apps_domain&&!pieces.use_site_path)base+=pieces.appname+"."+configuration.apps_domain;else{var _pieces$meta_hostname;base+=(_pieces$meta_hostname=pieces.meta_hostname)!=null?_pieces$meta_hostname:util.get_meta_hostname_for_hostname(this.parsed_url().hostname),base+="/site/",base+=pieces.appname}let ve=pieces.version_explicit;if(!["default",void 0,null,!0,!1].includes(ve))throw new errors.UnexpectedError("unrecognized version explicit: "+ve);(ve===!0||ve==="default"&&pieces.app_version!==locations_consts.LIVE_VERSION)&&(base+="/version-"+pieces.app_version);for(let entry of(_pieces$path=pieces.path)!=null?_pieces$path:[]){var _pieces$path;base+="/"+entry}let qstring=querystring.stringify(pieces.query);return pieces.query!=null&&qstring.length!==0&&(base+="?"+qstring),base}protocol(){return this.parsed_url().protocol}get_base_for_meta(options){var _options$protocol2;let parsed=this.parsed_url(),base=environment_utilities.is_production()?"https:":(_options$protocol2=options==null?void 0:options.protocol)!=null?_options$protocol2:parsed.protocol;return base+="//",base+=util.get_meta_hostname_for_hostname(parsed.hostname),parsed.port&&(base+=":"+parsed.port),base}get_server_base(options){let pieces=this.get_pieces();return delete pieces.path,delete pieces.query,this.format_pieces(pieces,options)+"/"}get_page_url(page,query,hash){let data=url.parse(page!=null?page:"");(data.pathname==="index"||data.pathname==null)&&(data.pathname="");let uri=this.get_server_base()+data.pathname,query_base=data.query!=null?querystring.decode(data.query):{};query&&!b_object.is_empty(query)&&b_object.extend(query_base,query);let query_string=querystring.stringify(query_base);return query_string.length>0&&(uri+="?"+query_string),hash&&(uri+="#"+hash),uri}get_page(){var _this$get_pieces$path;return(_this$get_pieces$path=this.get_pieces().path[0])!=null?_this$get_pieces$path:"index"}get_underlying_page(){var _window$bubble_page_n,_window;return(_window$bubble_page_n=(_window=window)==null?void 0:_window.bubble_page_name)!=null?_window$bubble_page_n:this.get_page()}parsed_url(){return this.base_url?url.parse(this.base_url,!0):{}}my_location(){return this.base_url}get_query(){return this.parsed_url().query}get_unique_id_in_url(){let{path}=this.get_pieces();if(path[1]!=null){let splitted=path[1].split("-"),possible_id=splitted[splitted.length-1];if(uuid.is_UUID(possible_id))return possible_id}return null}get_slug_in_url(){let{path}=this.get_pieces();if(path[1]!=null){let possible_slug=decodeURIComponent(path[1]);if(!this.get_unique_id_in_url())return possible_slug}return null}get_canonical_url(){let parsed=this.parsed_url();return"".concat(parsed.protocol,"//").concat(parsed.hostname).concat(parsed.pathname)}standardize_unicode_url(){let pieces=url_lib.parse(this.base_url);for(let component of["search","pathname"])/[^\u0000-\u007f]/.test(pieces[component])&&(pieces[component]=encodeURI(pieces[component]));return url_lib.format(pieces)}}}});var require_StaticNode=__commonJS({"lib-browser-old/db/values/StaticNode.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;require_es_array_iterator();require_web_dom_collections_iterator();var u=_interopRequireWildcard(require_u2()),_Dynamic=_interopRequireDefault(require_Dynamic()),db_utils=_interopRequireWildcard(require_db_utils()),value_types=_interopRequireWildcard(require_value_types()),registry=_interopRequireWildcard(require_registry2()),logger=_interopRequireWildcard(require_logger()),_lib=_interopRequireDefault(require_lib()),hydrate2=_interopRequireWildcard(require_hydrate());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var StaticNode=class _StaticNode extends _Dynamic.default{constructor(data,db,value_id){var _this$db;super(),this.data=data,this.db=db,this.value_id=value_id,(_this$db=this.db)!=null||(this.db=(0,_lib.default)().db_instance())}get_data(){return this.data}set(){return logger.debug("SETTING TO A STATIC NODE... IGNORING THIS")}push(){return logger.debug("PUSHING TO A STATIC NODE.... IGNORING THIS")}raw(){return registry.is(this.data,value_types.LIST_WRAPPER)?this.data.get_children():this.data}_type(){return this.value_id}child(name){let new_data,new_value_id,data=this.get_data(),splitted=String(name).split(".");if(splitted.length>1&&typeof data[splitted[0]]=="object"){new_data=data;for(let piece of splitted){var _new_data;new_data=(_new_data=new_data)==null?void 0:_new_data[piece]}}else new_data=data==null?void 0:data[name];if(this.value_id!=null)if(this.value_id==="user"&&name==="authentication"||name.indexOf("authentication.")===0)new_value_id="sys.json";else if(this.value_id==="user"&&name==="user_signed_up")new_value_id="boolean";else if(this.value_id==="user"&&name==="StripeCustomerID")new_value_id="text";else if(this.value_id==="sys.json")new_value_id="sys.json";else{var _db_utils$lang_btypes,_db_utils$lang_btypes2;new_value_id=(_db_utils$lang_btypes=db_utils.lang_btypes().get(this.value_id))==null||(_db_utils$lang_btypes2=_db_utils$lang_btypes.get_message(name))==null?void 0:_db_utils$lang_btypes2.ret_btype_id(),new_value_id==="null"&&(new_value_id=null),new_value_id||logger.owner_error("Could not find StaticNode child value id",{display:"Cannot evaluate the child ".concat(name," on type ").concat(this.value_id," because it does not exist"),ours:this.value_id,name})}else new_value_id=null;return new _StaticNode(new_data,this.db,new_value_id)}get(){return db_utils._static_get(this.get_data(),this.db,this.value_id)}to_json(){var _this$_json_cache;return(_this$_json_cache=this._json_cache)!=null||(this._json_cache=this.compute_to_json()),this._json_cache}compute_to_json(){return{_class:"StaticNode",data:hydrate2.dehydrate_tree(this.data),value_id:this.value_id}}dehydrate(){var _this$db2,_this$db2$__StaticNod,_this$db$__StaticNode,_this$db$__StaticNode2;let key=hydrate2._dehydrate_value_id_data(this.data,this.value_id),cache_key=u.incremental_json_stringify({data:hydrate2.dehydrate_tree(this.data),value_id:this.value_id});return(_this$db2$__StaticNod=(_this$db2=this.db).__StaticNode_rehydrate_cache)!=null||(_this$db2.__StaticNode_rehydrate_cache={}),(_this$db$__StaticNode2=(_this$db$__StaticNode=this.db.__StaticNode_rehydrate_cache)[cache_key])!=null||(_this$db$__StaticNode[cache_key]=this),hydrate2.dehydrate_prefix("StaticNode")+key}};function _static_node_from_cache(my_db,_ref){var _my_db$__StaticNode_r,_my_db$__StaticNode_r2,_my_db$__StaticNode_r3;let{data,value_id}=_ref,cache_key=u.incremental_json_stringify({data:hydrate2.dehydrate_tree(data),value_id});return(_my_db$__StaticNode_r=my_db.__StaticNode_rehydrate_cache)!=null||(my_db.__StaticNode_rehydrate_cache={}),(_my_db$__StaticNode_r3=(_my_db$__StaticNode_r2=my_db.__StaticNode_rehydrate_cache)[cache_key])!=null||(_my_db$__StaticNode_r2[cache_key]=new StaticNode(data,my_db,value_id)),my_db.__StaticNode_rehydrate_cache[cache_key]}StaticNode.from_json=(my_db,_ref2)=>{let{data,value_id}=_ref2;return new StaticNode(data,my_db,value_id)};StaticNode.rehydrate=function(my_db,key){let{value_id,data}=hydrate2._rehydrate_value_id_data(my_db,key);return _static_node_from_cache(my_db,{data,value_id})};var _default=StaticNode;exports.default=_default}});var require_NodeBase=__commonJS({"lib-browser-old/db/values/NodeBase.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;require_es_array_iterator();require_web_dom_collections_iterator();var _Dynamic=_interopRequireDefault(require_Dynamic()),_StaticNode=_interopRequireDefault(require_StaticNode()),_ListWrapper=_interopRequireDefault(require_ListWrapper()),db_utils=_interopRequireWildcard(require_db_utils()),hydrate2=_interopRequireWildcard(require_hydrate());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var NodeBase=class extends _Dynamic.default{constructor(parent,_path,db){super(),this.parent=parent,this._path=_path,this.db=db}path(){return this._path.join(".")}toString(){return"DBNode<"+this.key()+">"}key(){return this.parent_id()+"."+this._path.join(".")}child(name){let new_path;return this.parent?(this._path&&(new_path=this._path.concat(name.split("."))),this.parent._child(new_path)):new _StaticNode.default(void 0)}parent_id(){return this.parent._id()}get(type){let val=this.raw();if(!type){var _this$parent$_type,_this$parent,_db_utils$lang_btypes,_db_utils$lang_btypes2;let parent_value_id=(_this$parent$_type=(_this$parent=this.parent)._type)==null?void 0:_this$parent$_type.call(_this$parent),message_name=this._path.join(".");type=(_db_utils$lang_btypes=db_utils.lang_btypes().get(parent_value_id))==null||(_db_utils$lang_btypes2=_db_utils$lang_btypes.get_message(message_name))==null?void 0:_db_utils$lang_btypes2.ret_btype_id()}return Array.isArray(val)?(typeof type=="string"&&(type=db_utils.lang_btypes().get(type).inner_including_ranges().id()),new _ListWrapper.default(this.db,{t:"NodeList",type,id:this.parent_id(),field:this._path.join(".")})):val&&typeof val=="object"?db_utils._is_geographic_object(val,type)?val:this:hydrate2.rehydrate(this.db,val,type)}_extract(data){for(let p of(_this$_path=this._path)!=null?_this$_path:[]){var _this$_path,_data$p,_data;data=(_data$p=(_data=data)==null?void 0:_data[p])!=null?_data$p:null}return data}},_default=NodeBase;exports.default=_default}});var require_ClientDBNode=__commonJS({"lib-browser-old/db/values/ClientDBNode.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_includes();require_es_string_includes();var configuration=_interopRequireWildcard(require_client_config2()),logger=_interopRequireWildcard(require_logger()),u=_interopRequireWildcard(require_u2()),b_location=_interopRequireWildcard(require_b_location()),b_location_utils=_interopRequireWildcard(require_b_location_utils()),hydrate2=_interopRequireWildcard(require_hydrate()),_NodeBase=_interopRequireDefault(require_NodeBase());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var ClientDBNode=class extends _NodeBase.default{_operate(value,cb){let parent_id=this.parent_id();return this.db._ensure_loading(parent_id),value=hydrate2.dehydrate_tree_to_db_primitive(value),cb(parent_id,value,this._extract(this.db._get_data(parent_id)))}set(value){let options=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this._operate(value,(parent_id,value2,old_value)=>this.db._set_local(parent_id,this._path,value2))}push(value){return this._operate(value,(parent_id,value2,cur_value)=>{let new_value=(cur_value!=null?cur_value:[]).slice();function contains(){if(Array.isArray(value2)||b_location_utils.is_b_location(value2)){for(let a of new_value)if(u.json_stringify(a)===u.json_stringify(value2))return!0}return!1}if(!Array.isArray(new_value))logger.error("path is not array",{firebase:this.firebase,new_value});else if(hydrate2.dehydrated_array_index_of(new_value,value2)===-1&&!contains()){if(new_value.push(value2),configuration.MAX_LIST_LENGTH&&new_value.length>configuration.MAX_LIST_LENGTH)throw new u.OwnerError("List at maximum length ("+configuration.MAX_LIST_LENGTH+")");this.set(new_value)}})}remove(value){return this._operate(value,(parent_id,value2,cur_value)=>{var _cur_value;let index,new_value;if((_cur_value=cur_value)!=null||(cur_value=[]),!Array.isArray(cur_value))logger.error("path is not array",{firebase:this.firebase,cur_value});else{if((index=hydrate2.dehydrated_array_index_of(cur_value,value2))>-1)return new_value=cur_value.slice(),new_value.splice(index,1),this.set(new_value);if(Array.isArray(value2)||b_location_utils.is_b_location(value2)){if(new_value=[],b_location_utils.is_b_location(value2))for(let a of cur_value)b_location.is_equal(a,value2)||new_value.push(a);else if(cur_value.map(u.json_stringify).includes(u.json_stringify(value2)))for(let a of cur_value)u.json_stringify(a)!==u.json_stringify(value2)&&new_value.push(a);this.set(new_value)}}})}raw(){let parent_id=this.parent_id();this.db._ensure_loading(parent_id);for(var _len=arguments.length,can_catch=new Array(_len),_key=0;_key<_len;_key++)can_catch[_key]=arguments[_key];return u.ensure_ready(this.db._get_ready_key(parent_id),...can_catch),this.db._register_dependency(parent_id),this._extract(this.db._get_data(parent_id))}dehydrate(){return hydrate2.dehydrate_prefix("ClientDBNode")+this.key()}precache(){let parent_id=this.parent_id();return this.db._ensure_loading(parent_id)}};ClientDBNode.rehydrate=(database,key)=>database.get_node(key);var _default=ClientDBNode;exports.default=_default}});var require_StaticObject=__commonJS({"lib-browser-old/db/values/StaticObject.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var u=_interopRequireWildcard(require_u2()),db_utils=_interopRequireWildcard(require_db_utils()),_StaticNode=_interopRequireDefault(require_StaticNode()),safe_require=_interopRequireWildcard(require_safe_require()),_lib=_interopRequireDefault(require_lib()),hydrate2=_interopRequireWildcard(require_hydrate());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}safe_require.safe_register("./db/values/StaticObject",module.exports);var StaticObject=class _StaticObject extends _StaticNode.default{constructor(data,db,value_id,_exists,_bubble_id,options){var _options;(_options=options)!=null||(options={}),super(data,db,value_id),this._exists=_exists,this._bubble_id=_bubble_id,this.allow_email=options.allow_email}_id(){var _this$__id;if(this._bubble_id!=null)return this._bubble_id;let data=this.get_data();return data!=null&&data._id?typeof data._id=="function"?data._id():data._id:((_this$__id=this.__id)!=null||(this.__id=u.incremental_digest(this.to_json())),this.__id)}get(){return this}ignore_privacy(){return this.db.ignore_privacy_rules?this:_lib.default.extend({ignore_privacy_rules:!0},()=>new _StaticObject(this.data,(0,_lib.default)().db_instance(),this.value_id))}exists(){var _this$_exists;return(_this$_exists=this._exists)!=null?_this$_exists:!1}delete(){}poll(){}is_equal_to(a){return typeof(a==null?void 0:a._id)!="function"?!1:a._id()===this._id()}get_email(){if(this.allow_email)return db_utils.email_getter(this)}is_logged_in(){}to_json(){var _this$_json_cache;return(_this$_json_cache=this._json_cache)!=null||(this._json_cache=this.compute_to_json()),this._json_cache}compute_to_json(){return{_class:"StaticObject",data:hydrate2.dehydrate_tree(this.data),value_id:this.value_id}}dehydrate(){var _this$db,_this$db$__StaticObje,_this$db$__StaticObje2,_this$db$__StaticObje3;let key=hydrate2._dehydrate_value_id_data(this.data,this.value_id),cache_key=u.incremental_json_stringify({data:hydrate2.dehydrate_tree(this.data),value_id:this.value_id});return(_this$db$__StaticObje=(_this$db=this.db).__StaticObject_rehydrate_cache)!=null||(_this$db.__StaticObject_rehydrate_cache={}),(_this$db$__StaticObje3=(_this$db$__StaticObje2=this.db.__StaticObject_rehydrate_cache)[cache_key])!=null||(_this$db$__StaticObje2[cache_key]=this),hydrate2.dehydrate_prefix("StaticObject")+key}};function _static_object_from_cache(my_db,_ref){var _my_db$__StaticObject,_my_db$__StaticObject2,_my_db$__StaticObject3;let{data,value_id}=_ref,cache_key=u.incremental_json_stringify({data:hydrate2.dehydrate_tree(data),value_id});return(_my_db$__StaticObject=my_db.__StaticObject_rehydrate_cache)!=null||(my_db.__StaticObject_rehydrate_cache={}),(_my_db$__StaticObject3=(_my_db$__StaticObject2=my_db.__StaticObject_rehydrate_cache)[cache_key])!=null||(_my_db$__StaticObject2[cache_key]=new StaticObject(data,my_db,value_id)),my_db.__StaticObject_rehydrate_cache[cache_key]}StaticObject.from_json=(my_db,_ref2)=>{let{data,value_id}=_ref2;return new StaticObject(data,my_db,value_id)};StaticObject.rehydrate=function(my_db,key){let{value_id,data}=hydrate2._rehydrate_value_id_data(my_db,key);return _static_object_from_cache(my_db,{data,value_id})};var _default=StaticObject;exports.default=_default}});var require_CallSearch=__commonJS({"lib-browser-old/db/plans/CallSearch.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_weak_map();require_es_array_includes();require_es_array_iterator();require_web_dom_collections_iterator();require_es_json_stringify();require_es_string_includes();var _u=require_u2(),_b_fiber=require_b_fiber(),logger=_interopRequireWildcard(require_logger()),_db=require_db(),_plan_utils=require_plan_utils(),_StaticObject=_interopRequireDefault(require_StaticObject()),_query_planner=require_query_planner(),_loggable=require_loggable();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var ID_SORT_EQUIVALENTS=["_id"];function only_sorted_by_id_like(sorts_list){return(sorts_list!=null?sorts_list:[]).every(sort=>ID_SORT_EQUIVALENTS.includes(sort.sort_field))}var CallSearch={watch_search_call(plan){return{constraints:plan.constraints,type:plan.type}},load(_ref,cb){var _this$query_planner$g,_2;let{plan,from:from2,n,from_id}=_ref,{constraints,sorts_list,type,extra,columns}=plan;this.query_planner().update(type,constraints,sorts_list,{loading_to:from2+n},!0);let{local_change_buffer}=(_this$query_planner$g=this.query_planner().get_stats(type,constraints,sorts_list))!=null?_this$query_planner$g:{};n+=local_change_buffer!=null?local_change_buffer:0;let full_constraints,search_offset,can_use_cursor_pagination=only_sorted_by_id_like(sorts_list),descending=(_2=(sorts_list!=null?sorts_list:[])[0])==null?void 0:_2.descending;can_use_cursor_pagination&&from_id?(full_constraints=[...constraints,{key:"_id",constraint_type:descending?"less than":"greater than",value:from_id}],search_offset=0):(full_constraints=[...constraints],search_offset=from2),this.elasticsearch("search",{appname:this.appname,app_version:this.app_version,temp_db:this.cur_temp_db(),type,constraints:full_constraints,sorts_list,from:search_offset,n,search_path:this.build_search_path(plan,from2+n),extra,columns},(err,res)=>{var _res$hits$hits,_res$hits;if(err){cb(err);return}let entries=(_res$hits$hits=(_res$hits=res.hits)==null?void 0:_res$hits.hits)!=null?_res$hits$hits:[],{search_version}=res,{at_end}=res,results=[],raw_data={};for(let[idx,entry]of entries.entries()){idx%10===0&&(0,_b_fiber.optional_pause)();let id=entry._id;if(results.push(id),columns!=null){var _local$version;let local=this._locals[id];local!=null&&entry._version>((_local$version=local.version)!=null?_local$version:-1)&&(0,_u.extend)(local.raw,entry._source)}else this._set_data(id,entry._source,entry._type,entry._version);raw_data[id]=entry._source}if(res.extras!=null&&columns==null)for(let[idx,entry]of res.extras.entries())idx%10===0&&(0,_b_fiber.optional_pause)(),entry&&this._handle_get_response(entry._id,null,entry);at_end&&this.query_planner().update(type,constraints,null,{length:from2+results.length}),this.query_planner().update(type,constraints,sorts_list,{from:from2,loaded:from2+results.length}),cb(null,{at_end,results,raw_data,search_version})})},get_ret_btype(plan){return plan.type},initialize_range(plan,range,res){range.at_end=res.at_end,range.results=res.results,range.before=[],range.after=[],range.search_version=res.search_version;let{type,constraints,sorts_list}=plan,can_sort=(0,_query_planner.can_sort_locally)(type,sorts_list,constraints);if(range.sort_scores={},can_sort){for(let[idx,item_id]of range.results.entries())idx%10===0&&(0,_b_fiber.optional_pause)(),range.sort_scores[item_id]=(0,_plan_utils.calculate_sort_score)(res.raw_data[item_id],plan.sorts_list);let all_but_last_results=range.results.slice(0,range.results.length-1);for(let[idx,item_id]of all_but_last_results.entries()){let next_id=range.results[idx+1];if(!(0,_plan_utils.is_less_than)(sorts_list,item_id,range.sort_scores[item_id],next_id,range.sort_scores[next_id])){logger.warn("Client-server sort mismatch",{type,sorts_list:(0,_loggable.to_loggable)(sorts_list),db_first:range.sort_scores[item_id],db_second:range.sort_scores[next_id],first_id:item_id,second_id:next_id}),can_sort=!1,(0,_query_planner.add_bad_in_memory_sort)(JSON.stringify({type,sorts_list,constraints}));let cache_key=this.get_cache_key(plan);for(let r of this.result_cache[cache_key].ranges)r.state===_db.range_states.AVAILABLE&&r!==range&&(r.state=_db.range_states.DELETED);this.invalidate_call_dependency(cache_key);break}}}if(!can_sort){for(let[idx,item_id]of range.results.entries())idx%10===0&&(0,_b_fiber.optional_pause)(),range.sort_scores[item_id]=[range.from+idx];range.server_sorted=!0}CallSearch._adjust_range_length.call(this,plan,range,!0)},local_change(plan,range,id,type,_,new_raw){if(plan.type!==type)return!1;let in_search;if(new_raw==null)in_search=!1;else{in_search=!0;let obj=new _StaticObject.default(new_raw,null,type);for(let c of plan.constraints)if(!(0,_plan_utils.local_constrain)(obj,c,type)){if(!(0,_query_planner.can_execute_in_memory)(c))return _db.DONT_KNOW;in_search=!1;break}}if(!in_search)return range.sort_scores[id]==null||(delete range.sort_scores[id],(0,_u.array_remove)(range.before,id),(0,_u.array_remove)(range.after,id),!range.results.includes(id))?!1:((0,_u.array_remove)(range.results,id),CallSearch._adjust_range_length.call(this,plan,range),!0);if(!(0,_query_planner.can_sort_locally)(type,plan.sorts_list,plan.constraints))return _db.DONT_KNOW;let new_score=(0,_plan_utils.calculate_sort_score)(new_raw,plan.sorts_list),was_in_search=range.sort_scores[id]!=null;if(was_in_search&&JSON.stringify(range.sort_scores[id])===JSON.stringify(new_score))return!1;range.sort_scores[id]=new_score,was_in_search&&((0,_u.array_remove)(range.before,id),(0,_u.array_remove)(range.after,id),(0,_u.array_remove)(range.results,id));function insert_into(arr){let start=0,end=arr.length;for(;start!==end;){let pos=Math.floor(start+(end-start)/2);(0,_plan_utils.is_less_than)(plan.sorts_list,id,new_score,arr[pos],range.sort_scores[arr[pos]])?end=pos:(start=pos+1,start>end&&(start=end))}arr.splice(start,0,id)}return range.results.length===0?range.from===0&&range.at_end?range.results.push(id):(range.from!==0&&insert_into(range.before),range.at_end||insert_into(range.after)):(0,_plan_utils.is_less_than)(plan.sorts_list,id,new_score,range.results[0],range.sort_scores[range.results[0]])?range.from===0?range.results.unshift(id):insert_into(range.before):(0,_plan_utils.is_less_than)(plan.sorts_list,range.results[range.results.length-1],range.sort_scores[range.results[range.results.length-1]],id,new_score)?range.at_end?range.results.push(id):insert_into(range.after):insert_into(range.results),CallSearch._adjust_range_length.call(this,plan,range),!0},_adjust_range_length(plan,range,initial){if(range.results.length>range.to-range.from){delete range.at_end;return}else if(range.results.length===range.to-range.from||range.at_end)return;if(!initial){var _this$query_planner$g2;let shrink_amount=range.to-(range.from+range.results.length),{type,constraints,sorts_list}=plan,{local_change_buffer}=(_this$query_planner$g2=this.query_planner().get_stats(type,constraints,sorts_list))!=null?_this$query_planner$g2:{};shrink_amount+=local_change_buffer!=null?local_change_buffer:0,this.query_planner().update(type,constraints,sorts_list,{local_change_buffer:shrink_amount})}if(range.to=range.from+range.results.length,range.results.length===0)return this.delete_range(plan,range)},merge_ranges(plan,merge_into,merge_from){let min_id=merge_into.results[0],min_score=merge_into.sort_scores[min_id],max_id=merge_from.results[merge_from.results.length-1],max_score=merge_from.sort_scores[max_id],new_results=[],ids={};for(let k in merge_from.sort_scores){var _merge_into$sort_scor,_merge_into$sort_scor2;let v=merge_from.sort_scores[k];(_merge_into$sort_scor2=(_merge_into$sort_scor=merge_into.sort_scores)[k])!=null||(_merge_into$sort_scor[k]=v)}let ss=merge_into.sort_scores;function merge_array(arr){let idx=0,nr_idx=0;for(;idx<arr.length&&(0,_plan_utils.is_less_than)(plan.sorts_list,arr[idx],ss[arr[idx]],min_id,min_score,merge_into.server_sorted);)idx++;for(;idx<arr.length&&(max_id==null||arr[idx]===max_id||(0,_plan_utils.is_less_than)(plan.sorts_list,arr[idx],ss[arr[idx]],max_id,max_score,merge_into.server_sorted));){if(!ids[arr[idx]]){for(ids[arr[idx]]=!0;nr_idx<new_results.length&&(0,_plan_utils.is_less_than)(plan.sorts_list,new_results[nr_idx],ss[new_results[nr_idx]],arr[idx],ss[arr[idx]],merge_into.server_sorted);)nr_idx++;nr_idx===new_results.length?new_results.push(arr[idx]):new_results.splice(nr_idx,0,arr[idx]),nr_idx++}idx++}}merge_array(merge_into.results),merge_array(merge_into.after),merge_array(merge_from.before),merge_array(merge_from.results),merge_into.results=new_results,merge_into.after=merge_from.after,merge_into.at_end=merge_from.at_end,merge_into.to=merge_from.to,merge_from.search_version<merge_into.search_version&&(merge_into.search_version=merge_from.search_version),CallSearch._adjust_range_length.call(this,plan,merge_into)}};module.exports=CallSearch}});var require_All=__commonJS({"lib-browser-old/db/plans/All.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var u=_interopRequireWildcard(require_u2());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var All={get_ret_btype(plan){return plan.type},fn(){throw new u.UnexpectedError("All cannot be executed")}},_default=All;exports.default=_default}});var require_Static=__commonJS({"lib-browser-old/db/plans/Static.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;require_es_array_iterator();require_web_dom_collections_iterator();require_es_parse_int();var logger=_interopRequireWildcard(require_logger()),db_consts=_interopRequireWildcard(require_db());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var Static={fn(plan,from2){var _data;let{data,value_id}=plan;if((_data=data)!=null||(data=[]),!Array.isArray(data)){logger.error("Bad array rehydrated",{data,value_id});let arr=[];for(let[k,v]of data.entries()){let idx=parseInt(k);isNaN(idx)||(arr[idx]=v)}data=arr}return n=>{var _n;(_n=n)!=null||(n=db_consts.ALL_MAX);let to=from2+n,ret=data.slice(from2,to);return from2=to,ret}},get_ret_btype(plan){return plan.value_id}},_default=Static;exports.default=_default}});var require_Transform=__commonJS({"lib-browser-old/db/plans/Transform.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var b_fiber=_interopRequireWildcard(require_b_fiber()),db_utils=_interopRequireWildcard(require_db_utils()),hydrate2=_interopRequireWildcard(require_hydrate());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var Transform={fn(plan,from2){let{prev,value_id,message,properties,_raw,arg}=plan,next=this.iterate(prev,from2);properties=hydrate2.rehydrate_tree(this,properties),message=db_utils.lang_btypes().get(value_id).get_message(message);function transform(item,idx){return idx%10===0&&b_fiber.optional_pause("transform"),message.evaluate_without_cast(item,arg,properties,_raw)}return n=>{let raw=next(n);if(raw==null)return[];raw=this.array_to_objects(prev,raw,!0),b_fiber.optional_pause("pre-transform");let results=raw.map((item,idx)=>transform(item,idx));return b_fiber.optional_pause("post-transform"),db_utils.array_to_ids(message.ret_btype_id(),results)}},get_ret_btype(plan){let{value_id,message}=plan;return message=db_utils.lang_btypes().get(value_id).get_message(message),message.ret_btype().id()},preserves_length:!0,preserves_context:{sorted_above:!0}},_default=Transform;exports.default=_default}});var require_Cast=__commonJS({"lib-browser-old/db/plans/Cast.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var db_utils=_interopRequireWildcard(require_db_utils());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var Cast={fn(plan,from2){let{prev,value_id}=plan,next=this.iterate(prev,from2);return n=>{var _next;return db_utils.array_to_ids(value_id,this.array_to_objects(plan,(_next=next(n))!=null?_next:[],!0))}},get_ret_btype(plan){return plan.value_id},preserves_length:!0,preserves_context:{sorted_above:!0}},_default=Cast;exports.default=_default}});var require_Numeric=__commonJS({"lib-browser-old/db/plans/Numeric.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_sort();var plan_utils=_interopRequireWildcard(require_plan_utils()),u=_interopRequireWildcard(require_u2());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var Numeric={is_single:!0,fn(plan,from2){return plan_utils.ensure_single(plan,from2,()=>{let item,n,{prev,op}=plan,list=this.all(prev);if(list.length===0)return[null];switch(op){case"sum":{let ret=0;for(n of list)n!=null&&(ret+=n);return[ret]}case"product":{let ret=1;for(n of list)n!=null&&(ret*=n);return[ret]}case"average":{let ret=0,count=0;for(n of list)n!=null&&(count++,ret+=n);return count===0?[null]:[ret/count]}case"median":return list=[].concat(list),list.sort((a,b)=>a-b),list=list.filter(item2=>item2!==null),list.length===0?[null]:list.length%2===0?[(list[list.length/2-1]+list[list.length/2])/2]:[list[Math.floor(list.length/2)]];case"min":{let ret=list[0];for(item of list.slice(1))item!=null&&item<ret&&(ret=item);return[ret]}case"max":{let ret=list[0];for(item of list.slice(1))if(item!=null&&item>ret){var _item;ret=(_item=item)!=null?_item:0}return[ret]}default:throw new u.UnexpectedError("unrecognized op: "+op)}})},get_ret_btype(){return"number"},simplify(query){},adds_context:{sorted_above:!0}},_default=Numeric;exports.default=_default}});var require_Contains=__commonJS({"lib-browser-old/db/plans/Contains.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var u=_interopRequireWildcard(require_u2()),plan_utils=_interopRequireWildcard(require_plan_utils()),db_utils=_interopRequireWildcard(require_db_utils()),b_fiber=_interopRequireWildcard(require_b_fiber()),hydrate2=_interopRequireWildcard(require_hydrate()),_=require_plans();function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var Contains={is_single:!0,fn(plan,from2){return plan_utils.ensure_single(plan,from2,()=>{let ret,{value_id,item,prev}=plan,V=db_utils.lang_btypes().get(value_id);item=hydrate2.rehydrate_tree(this,item);let next=this.iterate(prev);for(;ret=next();){let iterable=this.array_to_objects(prev,ret);for(let idx=0;idx<iterable.length;idx++){let entry=iterable[idx];if(idx%10===0&&b_fiber.optional_pause(),V.equals(entry,item))return[!0]}}return[!1]})},get_ret_btype(){return"sys.bool"},adds_context:{sorted_above:!0},simplify(query){return _.plans[query.prev.t].preserves_items?{t:"Contains",value_id:query.value_id,item:query.item,prev:query.prev.prev}:query.prev.t==="Concat"?{t:"Reduce",op:"or",prev:{t:"Concat",prevs:query.prev.prevs.map(prev=>u.extend({},query,{prev}))}}:query.prev.t==="Intersect"?{t:"Reduce",op:"and",prev:{t:"Concat",prevs:query.prev.prevs.map(prev=>u.extend({},query,{prev}))}}:null}},_default=Contains;exports.default=_default}});var require_Position=__commonJS({"lib-browser-old/db/plans/Position.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;require_es_array_iterator();require_web_dom_collections_iterator();var plan_utils=_interopRequireWildcard(require_plan_utils()),db_utils=_interopRequireWildcard(require_db_utils()),b_fiber=_interopRequireWildcard(require_b_fiber()),hydrate2=_interopRequireWildcard(require_hydrate());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var Position={is_single:!0,fn(plan,from2,n){return plan_utils.ensure_single(plan,from2,()=>{let ret,{value_id,item,prev}=plan,V=db_utils.lang_btypes().get(value_id);item=hydrate2.rehydrate_tree(this,item);let pos=-1,next=this.iterate(prev);for(;ret=next();){let objects=this.array_to_objects(prev,ret,!0);for(let[idx,entry]of objects.entries())if(idx%10===0&&b_fiber.optional_pause(),pos++,V.equals(entry,item))return[pos]}return[-1]})},get_ret_btype(){return"number"}},_default=Position;exports.default=_default}});var require_Compare=__commonJS({"lib-browser-old/db/plans/Compare.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var u=_interopRequireWildcard(require_u2()),plan_utils=_interopRequireWildcard(require_plan_utils());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var Compare={is_single:!0,fn(plan,from2){return plan_utils.ensure_single(plan,from2,()=>{var _this$execute_get_chi;let{op,n,prev}=plan,x=(_this$execute_get_chi=this.execute_get_children(prev,0,1))==null?void 0:_this$execute_get_chi[0];switch(op){case">":return[x>n];case"<":return[x<n];case">=":return[x>=n];case"<=":return[x<=n];case"===":return[x===n];case"!==":return[x!==n];default:throw new u.UnexpectedError("unrecognized op",{plan})}})},get_ret_btype(){return"sys.bool"}},_default=Compare;exports.default=_default}});var require_NodeList=__commonJS({"lib-browser-old/db/plans/NodeList.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;require_es_regexp_exec();require_es_string_replace();var u=_interopRequireWildcard(require_u2()),b_fiber=_interopRequireWildcard(require_b_fiber()),db_utils=_interopRequireWildcard(require_db_utils()),eval_consts=_interopRequireWildcard(require_eval()),btype_ids=_interopRequireWildcard(require_btype_ids());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var NodeList={fn(plan,from2){var _obj$child$_extract;let{id,field}=plan;if(!id)throw new u.UnexpectedError("NodeList missing id",{plan});let obj=this.get(id),raw_list=(_obj$child$_extract=obj.child(field)._extract(obj.raw()))!=null?_obj$child$_extract:[];if(!Array.isArray(raw_list))throw new u.UnexpectedError("NodeList called on bad field",{plan});let convert=(item,preload,idx)=>{if(idx%10===0&&b_fiber.optional_pause(),typeof item!="string"||!u.starts_with(item,eval_consts.HYDRATE_STRING)||item.length>200||item.indexOf("StaticNode")!==-1||item.indexOf("StaticObject")!==-1)return item;let local_id=item.replace(eval_consts.HYDRATE_STRING,""),local=this._local(local_id);return local.dependency.register(),local.raw==null&&local.ready_key.is_turned()?null:local_id},results=[];return n=>{let ret,to,idx,item;for(n!=null?to=from2+n:to=from2+this.GET_BATCH_SIZE,to=db_utils.coerce_to_integer(to,{n,to,from:from2,plan});results.length<to&&raw_list.length>0;){let needed=(to-results.length)*1.2,to_add=raw_list.slice(0,needed);for(raw_list=raw_list.slice(needed),idx=0;idx<to_add.length;idx++)item=to_add[idx],convert(item,!0,idx);for(to_add=to_add.map((item2,idx2)=>convert(item2,!1,idx2)),to_add=to_add.filter(item2=>item2!=null),idx=0;idx<to_add.length;idx++)item=to_add[idx],idx%10===0&&b_fiber.optional_pause(),results.push(item)}return n!=null?ret=results.slice(from2,to):ret=results.slice(from2),from2+=ret.length,ret}},get_ret_btype(plan){var _db_utils$lang_btypes;if(plan.type)return plan.type;if(plan.id==null)throw new u.UnexpectedError("NodeList missing id",{plan});let type=this.get(plan.id)._type();if(!type)return"null";let btype_id=(_db_utils$lang_btypes=db_utils.lang_btypes().get(type).get_message(plan.field).ret_btype())==null?void 0:_db_utils$lang_btypes.id();if(btype_id==null||btype_id==="null")return"null";if(btype_id==="date_range")return"date";if(btype_id==="number_range")return"number";if(!btype_ids.is_list(btype_id))throw new u.UnexpectedError("NodeList has non-list value for field: "+btype_id);return btype_ids.list_element_type(btype_id)}},_default=NodeList;exports.default=_default}});var require_Length=__commonJS({"lib-browser-old/db/plans/Length.js"(exports,module){"use strict";init_define_process_env();init_shim();var db_consts=require_db(),plan_utils=require_plan_utils(),Length={is_single:!0,fn(plan,from2){return plan_utils.ensure_single(plan,from2,()=>{let ret,{prev,bound}=plan;bound||(bound=db_consts.ALL_MAX);let count=0,next=this.iterate(prev);for(;count<bound&&(ret=next());)count+=ret.length;return[count]})},get_ret_btype(){return"number"},simplify(query){return plans.plans[query.prev.t].preserves_length?{t:"Length",bound:query.bound,prev:query.prev.prev,options:query.options}:query.prev.t==="Concat"?{t:"Reduce",op:"+",prev:{t:"Concat",prevs:query.prev.prevs.map(prev=>({t:"Length",prev,options:query.options}))}}:null},adds_context:{sorted_above:!0}},plans=require_plans();module.exports=Length}});var require_Cap=__commonJS({"lib-browser-old/db/plans/Cap.js"(exports,module){"use strict";init_define_process_env();init_shim();var Cap={fn(plan,from2){let{prev,max}=plan,next=this.iterate(prev,from2);return max-=from2,from2=0,n=>{let new_n,max_n=max-from2;if(max_n<1)return[];n!=null?new_n=Math.min(n,max_n):new_n=null;let ret=next(new_n);return ret?(ret.length>max_n&&(ret=ret.slice(0,max_n)),from2+=ret.length,ret):[]}},get_ret_btype(plan){return this.get_plan_ret_btype(plan.prev)}};module.exports=Cap}});var require_Offset=__commonJS({"lib-browser-old/db/plans/Offset.js"(exports,module){"use strict";init_define_process_env();init_shim();var Offset={fn(plan,from2){let{prev,offset}=plan;offset=Math.floor(offset),offset<0&&(offset=0);let next=this.iterate(prev,from2+offset);return n=>{var _next;return(_next=next(n))!=null?_next:[]}},get_ret_btype(plan){return this.get_plan_ret_btype(plan.prev)}};module.exports=Offset}});var require_Flatten=__commonJS({"lib-browser-old/db/plans/Flatten.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;require_es_array_iterator();require_web_dom_collections_iterator();var u=_interopRequireWildcard(require_u2()),hydrate2=_interopRequireWildcard(require_hydrate()),db_utils=_interopRequireWildcard(require_db_utils()),btype_ids=_interopRequireWildcard(require_btype_ids());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var Flatten={fn(plan,from2){let{prev}=plan,next=this.iterate(prev),inner_next=null,lists=[],results=[];return n=>{let ret,to;for(n!=null?to=from2+n:to=from2+1,to=db_utils.coerce_to_integer(to,{n,to,from:from2,plan});results.length<to;){if(inner_next==null){var _hydrate$rehydrate_tr,_hydrate$rehydrate_tr2,_hydrate$rehydrate_tr3;if(lists.length===0&&(lists=next(),lists==null))break;let next_plan=(_hydrate$rehydrate_tr=hydrate2.rehydrate_tree(this,lists.shift()))==null||(_hydrate$rehydrate_tr2=(_hydrate$rehydrate_tr3=_hydrate$rehydrate_tr).get_plan)==null?void 0:_hydrate$rehydrate_tr2.call(_hydrate$rehydrate_tr3);if(next_plan==null)continue;inner_next=this.iterate(next_plan)}for(;results.length<to;){if(ret=inner_next(),ret==null){inner_next=null;break}results.push(...ret)}}return n!=null?ret=results.slice(from2,to):ret=results.slice(from2),from2+=ret.length,ret}},validate(query){let prev_id=this.get_plan_ret_btype(query.prev);if(!btype_ids.is_list(prev_id))throw new u.UnexpectedError("Flatten must be called on a plan that returns lists",{query})},get_ret_btype(plan){return this.get_plan_ret_btype(plan.prev).slice(5)},preserves_context:{sorted_above:!0},simplify(query){return null}},_default=Flatten;exports.default=_default}});var require_Concat=__commonJS({"lib-browser-old/db/plans/Concat.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;require_es_array_iterator();require_web_dom_collections_iterator();var u=_interopRequireWildcard(require_u2()),db_utils=_interopRequireWildcard(require_db_utils());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var Concat={fn(plan,from2){let{prevs}=plan,plan_idx=-1,results=[],next=null;return n=>{let ret,to;for(n!=null?to=from2+n:to=from2+1,to=db_utils.coerce_to_integer(to,{n,to,from:from2,plan});results.length<to;){if(next==null){if(plan_idx++,plan_idx===prevs.length)break;next=this.iterate(prevs[plan_idx])}ret=next(),ret==null?next=null:results.push(...ret)}return n!=null?ret=results.slice(from2,to):ret=results.slice(from2),from2+=ret.length,ret}},validate(query){if(!Array.isArray(query.prevs))throw new u.UnexpectedError("Concat must have prevs array",{query})},get_ret_btype(plan){for(let prev of plan.prevs){let value_id=this.get_plan_ret_btype(prev);if(value_id!=null&&value_id!=="null")return value_id}return"null"},preserves_context:{sorted_above:!0},simplify(query){let found_one=!1,prevs=[];for(let prev of query.prevs)if(prev.t==="Concat"){found_one=!0;for(let concat_prev of prev.prevs)prevs.push(concat_prev)}else prevs.push(prev);return found_one===!1?null:u.extend({},query,{prevs})}},_default=Concat;exports.default=_default}});var require_Intersect=__commonJS({"lib-browser-old/db/plans/Intersect.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;require_es_json_stringify();require_es_array_iterator();require_web_dom_collections_iterator();var u=_interopRequireWildcard(require_u2()),b_fiber=_interopRequireWildcard(require_b_fiber()),query_planner=_interopRequireWildcard(require_query_planner()),db_utils=_interopRequireWildcard(require_db_utils());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var Intersect={fn(plan,from2){let plan_idx,{prevs}=plan,results=[],seen=prevs.map(_=>({})),added={};function add(item,idx,item_idx){item_idx%10===0&&b_fiber.optional_pause();let stringified=JSON.stringify(item);if(!added[stringified]){seen[idx][stringified]=!0;for(let i=0;i<prevs.length;i++)if(!seen[i][stringified])return;return added[stringified]=!0,results.push(item)}}let nexts=prevs.map(prev=>this.iterate(prev));plan_idx=0;let at_end=0;return n=>{let ret,to;for(n!=null?to=from2+n:to=from2+1,to=db_utils.coerce_to_integer(to,{n,to,from:from2,plan});results.length<to&&at_end<prevs.length;){if(nexts[plan_idx]){let batch2=nexts[plan_idx]();if(!batch2)nexts[plan_idx]=null,at_end++;else for(let item_idx=0;item_idx<batch2.length;item_idx++){let item=batch2[item_idx];add(item,plan_idx,item_idx)}}plan_idx++,plan_idx===prevs.length&&(plan_idx=0)}return n!=null?ret=results.slice(from2,to):ret=results.slice(from2),from2+=ret.length,ret}},get_ret_btype(plan){for(let prev of plan.prevs){let value_id=this.get_plan_ret_btype(prev);if(value_id!=null&&value_id!=="null")return value_id}return"null"},validate(query){if(!Array.isArray(query.prevs))throw new u.UnexpectedError("Intersect must have prevs array",{query})},preserves_context:{sorted_above:!0},simplify(query,context){let prev,found_one=!1,prevs=[];for(prev of query.prevs)if(prev.t==="Intersect"){found_one=!0;for(let concat_prev of prev.prevs)prevs.push(concat_prev)}else prevs.push(prev);if(found_one)return u.extend({},query,{prevs});if(!context.sorted_above)return null;let inner=null,first_prev=null;for(prev of query.prevs){if(prev.t==="Filter")inner=prev.prev;else if(prev.t==="All")inner=prev;else return null;if(first_prev==null)first_prev=JSON.stringify(inner);else if(first_prev!==JSON.stringify(inner))return null}let added={},constraints=[];for(prev of query.prevs)if(prev.t==="Filter")for(let c of prev.constraints)added[JSON.stringify(c)]||(added[JSON.stringify(c)]=!0,constraints.push(c));return constraints.length===0?inner:{t:"Filter",constraints:query_planner.sort_constraints(constraints),prev:inner}}},_default=Intersect;exports.default=_default}});var require_Unique=__commonJS({"lib-browser-old/db/plans/Unique.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;require_es_array_iterator();require_web_dom_collections_iterator();require_es_json_stringify();var u=_interopRequireWildcard(require_u2()),b_fiber=_interopRequireWildcard(require_b_fiber()),plan_utils=_interopRequireWildcard(require_plan_utils()),query_planner=_interopRequireWildcard(require_query_planner());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var Unique={simplify(query,context){let constraint,constraints;if(query.prev.t!=="Concat")return null;let found_one=!1,remove_uniques=q=>q.t==="Unique"?(found_one=!0,q.prev):q,new_prevs=query.prev.prevs.map(remove_uniques);if(found_one)return{t:"Unique",prev:this.simplify_query(u.extend({},query.prev,{prevs:new_prevs}))};if(!context.sorted_above)return null;let constraint_arrays=query.prev.prevs,first_prev=null,inner=null;for(let prev of constraint_arrays){if(prev.t==="All")return prev;if(prev.t==="Filter")inner=prev.prev;else return null;if(first_prev==null)first_prev=JSON.stringify(inner);else if(first_prev!==JSON.stringify(inner))return null}let unique_constraint_arrays=[];for(let filter of constraint_arrays){let unique_constraints_in_filter={},unique_constraint_array=[];for(constraint of filter.constraints)unique_constraints_in_filter[JSON.stringify(constraint)]||(unique_constraint_array.push(constraint),unique_constraints_in_filter[JSON.stringify(constraint)]=!0);unique_constraint_arrays.push(unique_constraint_array)}let constraint_count_in_filters={};for(constraints of unique_constraint_arrays)for(constraint of constraints){var _JSON$stringify,_constraint_count_in_;(_constraint_count_in_=constraint_count_in_filters[_JSON$stringify=JSON.stringify(constraint)])!=null||(constraint_count_in_filters[_JSON$stringify]=0),constraint_count_in_filters[JSON.stringify(constraint)]++}let inner_value_id=this.get_plan_ret_btype(inner),subs=[],top=[],drop_or=!1;for(constraints of unique_constraint_arrays){let non_factorisable=[];for(constraint of(_constraints=constraints)!=null?_constraints:[]){var _constraints;if(constraint_count_in_filters[JSON.stringify(constraint)]===unique_constraint_arrays.length)top.push(constraint),constraint_count_in_filters[JSON.stringify(constraint)]="added";else if(constraint_count_in_filters[JSON.stringify(constraint)]!=="added"){if(!plan_utils.can_execute_in_db(inner_value_id,constraint))return null;non_factorisable.push(constraint)}}if(non_factorisable.length===0)drop_or=!0;else if(non_factorisable.length===1)if(non_factorisable[0].constraint_type==="or")for(let s of non_factorisable[0].opts)subs.push(s);else subs.push(non_factorisable[0]);else subs.push({constraint_type:"and",opts:query_planner.sort_constraints(non_factorisable)})}return drop_or||top.push({constraint_type:"or",opts:query_planner.sort_constraints(subs)}),{t:"Filter",constraints:query_planner.sort_constraints(top),prev:inner}},fn(plan,from2){let{prev}=plan,results=[],seen_already={},next=this.iterate(prev);return n=>{let ret,to;n!=null?to=from2+n:to=from2+1;let unfiltered;for(;results.length<to&&(unfiltered=next());)for(let[idx,item]of unfiltered.entries())idx%10===0&&b_fiber.optional_pause(),seen_already[JSON.stringify(item)]||(seen_already[JSON.stringify(item)]=!0,results.push(item));return n!=null?ret=results.slice(from2,to):ret=results.slice(from2),from2+=ret.length,ret}},get_ret_btype(plan){return this.get_plan_ret_btype(plan.prev)},preserves_items:!0,sort_neutral:!0,preserves_context:{sorted_above:!0}},_default=Unique;exports.default=_default}});var require_Reduce=__commonJS({"lib-browser-old/db/plans/Reduce.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;require_es_array_iterator();require_web_dom_collections_iterator();var u=_interopRequireWildcard(require_u2()),b_fiber=_interopRequireWildcard(require_b_fiber()),plan_utils=_interopRequireWildcard(require_plan_utils());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var Reduce={is_single:!0,fn(plan,from2){return plan_utils.ensure_single(plan,from2,()=>{let cur,fn,{op,prev}=plan;switch(op){case"+":cur=0,fn=(a,b)=>[a+b];break;case"or":cur=!1,fn=(a,b)=>[a||b,a||b];break;case"and":cur=!0,fn=(a,b)=>[a&&b];break;default:throw new u.UnexpectedError("unrecognized op "+op)}let next=this.iterate(prev),ret;for(;ret=next();)for(let[idx,item]of ret.entries()){let stop;if(idx%10===0&&b_fiber.optional_pause(),[cur,stop]=fn(cur,item),stop)return[cur]}return[cur]})},get_ret_btype(plan){switch(plan.op){case"+":return"number";case"or":return"boolean";default:throw new u.UnexpectedError("unrecognized op "+plan.op)}},adds_context:{sorted_above:!0}},_default=Reduce;exports.default=_default}});var require_Filter=__commonJS({"lib-browser-old/db/plans/Filter.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;require_es_array_includes();var u=_interopRequireWildcard(require_u2()),b_fiber=_interopRequireWildcard(require_b_fiber()),plan_utils=_interopRequireWildcard(require_plan_utils()),query_planner=_interopRequireWildcard(require_query_planner()),db_utils=_interopRequireWildcard(require_db_utils());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var Filter={fn(plan,from2){let{prev,constraints}=plan,results=[],next=this.iterate(prev),value_id=this.get_plan_ret_btype(plan.prev);return n=>{let ret,to;n!=null?to=from2+n:to=from2+1,to=db_utils.coerce_to_integer(to,{n,to,from:from2,plan});let unfiltered;for(;results.length<to&&(unfiltered=next());){let unfiltered_objects=this.array_to_objects(prev,unfiltered,!0);for(let idx=0;idx<unfiltered_objects.length;idx++){let obj=unfiltered_objects[idx];idx%10===0&&b_fiber.optional_pause(),plan_utils.pass_filter(obj,constraints,value_id)&&results.push(unfiltered[idx])}}return n!=null?ret=results.slice(from2,to):ret=results.slice(from2),from2+=ret.length,ret}},validate(query){if(!Array.isArray(query.constraints))throw new u.UnexpectedError("Filter must have constraints array",{query})},canonicalize(query){return query_planner.sort_constraints(query.constraints)},get_ret_btype(plan){return this.get_plan_ret_btype(plan.prev)},simplify(query){return query.prev.t==="Filter"?{t:"Filter",constraints:query.constraints.concat(query.prev.constraints),prev:query.prev.prev}:["Concat","Intersect"].includes(query.prev.t)?{t:query.prev.t,prevs:query.prev.prevs.map(prev=>this.simplify_query(u.extend({},query,{prev})))}:null},sort_neutral:!0,preserves_context:{sorted_above:!0}},_default=Filter;exports.default=_default}});var require_Sort=__commonJS({"lib-browser-old/db/plans/Sort.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var db_consts=_interopRequireWildcard(require_db()),db_utils=_interopRequireWildcard(require_db_utils()),plan_utils=_interopRequireWildcard(require_plan_utils());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var Sort={fn(plan,from2){let{prev,sorts_list}=plan,results=this.all(prev);return results=this.array_to_objects(prev,results,!0),plan_utils.sort_in_memory(results,sorts_list,this.get_plan_ret_btype(plan.prev)),results=this.array_to_ids(prev,results),n=>{var _n;(_n=n)!=null||(n=db_consts.ALL_MAX);let to=from2+n,ret=results.slice(from2,to);return from2=to,ret}},get_ret_btype(plan){return this.get_plan_ret_btype(plan.prev)},preserves_items:!0,preserves_length:!0,canonicalize(query){query.sorts_list=db_utils.resolve_sorts(query.sorts_list,!0)},adds_context:{sorted_above:!0},simplify(query,context){return context.sorted_above?query.prev:null}},_default=Sort;exports.default=_default}});var require_GroupByBucketer=__commonJS({"lib-browser-old/db/plans/GroupByBucketer.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;require_es_number_to_fixed();require_es_array_includes();require_es_string_includes();require_es_array_iterator();require_web_dom_collections_iterator();var u=_interopRequireWildcard(require_u2()),db_utils=_interopRequireWildcard(require_db_utils()),plan_utils=_interopRequireWildcard(require_plan_utils()),db_consts=_interopRequireWildcard(require_db()),mode_check=_interopRequireWildcard(require_mode_check());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var moment;mode_check.on_server()?moment=__require("moment-timezone"):moment=require_moment_timezone_min();function to_moment(timezone_string,timestamp){return timezone_string==="browser"?moment(timestamp):moment(timestamp).tz(timezone_string)}var SIGNIFICANT_DIGITS=5;function to_stable_ish_floating_point(number,interval){let interval_magnitude=Math.log10(interval),decimal_places=Math.max(0,SIGNIFICANT_DIGITS-interval_magnitude);return Number(number.toFixed(decimal_places))}var GroupByBucketer=class{constructor(prev_value_id,groupings,aggregations){this.prev_value_id=prev_value_id,this.aggregations=aggregations,this.prev_value=db_utils.lang_btypes().get(this.prev_value_id),this.bucket_starts=groupings.map(this.get_start,this),this.all_groupings=groupings,this.last_grouping=groupings[groupings.length-1],this.last_grouping.end!=null&&db_consts.BUCKET_GROUPINGS.includes(this.last_grouping.fn)?(this.continuous_group=this.last_grouping,this.groupings=groupings.slice(0,groupings.length-1),this.bucket_end=this.get_bucket_from_data(this.last_grouping,this.continuous_group.end)):(this.continuous_group=null,this.bucket_end=null,this.groupings=this.all_groupings)}get_bucket_data(grouping,item){return this.prev_value.get_message(grouping.message).evaluate_without_cast(item)}get_bucket(grouping,item){let data=this.get_bucket_data(grouping,item);return this.get_bucket_from_data(grouping,data)}get_bucket_from_data(grouping,data){var _grouping$fn;switch((_grouping$fn=grouping.fn)!=null?_grouping$fn:"exact"){case"exact":return data;case"bucket":{if(data==null)return null;let{start,interval}=grouping,intervals=Math.floor((data-start)/interval),bucket_value=start+intervals*interval;return to_stable_ish_floating_point(bucket_value,interval)}case"day":case"month":{if(data==null)return null;let{start}=grouping,{interval,timezone_string}=grouping;if(start=to_moment(timezone_string,grouping.start).startOf(grouping.fn),data<start.valueOf())throw new u.UnexpectedError("assertion error: got data < start",{data,start,grouping});let unit=grouping.fn==="day"?"days":grouping.fn,cur=start;for(;;){let next=cur.clone().add(interval,unit);if(next.valueOf()>data)return cur.valueOf();cur=next}}default:throw new u.UnexpectedError("unrecognized fn "+grouping.fn)}}next_bucket(grouping,data){var _grouping$fn2;switch((_grouping$fn2=grouping.fn)!=null?_grouping$fn2:"exact"){case"exact":throw new u.UnexpectedError("cannot call next_bucket on an exact match",{grouping,data});case"bucket":{let{interval}=grouping,bucket_value=data+interval;return to_stable_ish_floating_point(bucket_value,interval)}case"day":case"month":{let{interval,timezone_string}=grouping,unit=grouping.fn==="day"?"days":grouping.fn;return to_moment(timezone_string,data).add(interval,unit).valueOf()}}}get_start(grouping){return db_consts.BUCKET_GROUPINGS.includes(grouping.fn)?this.get_bucket_from_data(grouping,grouping.start):null}is_in_range(item){let data;for(let idx=0;idx<this.groupings.length;idx++){let grouping=this.groupings[idx];if(this.bucket_starts[idx]!=null&&(data=this.get_bucket_data(grouping,item),data==null||data<this.bucket_starts[idx]))return!1}if(this.continuous_group!=null){if(data=this.get_bucket_data(this.continuous_group,item),data==null)return null;if(data<this.bucket_starts[this.groupings.length]||this.get_bucket_from_data(this.continuous_group,data)>this.bucket_end)return!1}return!0}build_grouping_sorter(idx){var _idx;let next_comparer;(_idx=idx)!=null||(idx=0);let extractor=item=>{let bucket=this.get_bucket(this.all_groupings[idx],item);return typeof(bucket==null?void 0:bucket._id)=="function"?bucket._id():bucket};return idx+1<this.all_groupings.length?next_comparer=this.build_grouping_sorter(idx+1):next_comparer=()=>0,plan_utils.make_sort_comparer(extractor,!1,next_comparer)}get_continuous_start(){return this.get_start(this.continuous_group)}get_continuous_end(){return this.get_bucket_from_data(this.continuous_group,this.continuous_group.end)}get_grouping_constraints(){let start,constraints=[];for(let grouping of this.groupings)start=this.get_start(grouping),start!=null&&constraints.push({constraint_type:"or",opts:[{constraint_type:"greater than",key:grouping.message,value:start},{constraint_type:"equals",key:grouping.message,value:start}]});if(this.continuous_group){start=this.get_continuous_start(),constraints.push({constraint_type:"or",opts:[{constraint_type:"greater than",key:this.continuous_group.message,value:start},{constraint_type:"equals",key:this.continuous_group.message,value:start}]});let end=this.next_bucket(this.continuous_group,this.get_continuous_end());constraints.push({constraint_type:"less than",key:this.continuous_group.message,value:end})}return constraints}},_default=GroupByBucketer;exports.default=_default}});var require_TransformList=__commonJS({"lib-browser-old/db/values/TransformList.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var u=_interopRequireWildcard(require_u2()),hydrate2=_interopRequireWildcard(require_hydrate()),_ListWrapper=_interopRequireDefault(require_ListWrapper());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var TransformList=class extends _ListWrapper.default{constructor(source_list,transform_data){let{value_id,message,properties,_raw,arg}=transform_data,prev=source_list.query,database=source_list.db;properties=hydrate2.dehydrate_tree(properties),super(database,{t:"Transform",prev,value_id,message,properties,_raw,arg})}};TransformList.rehydrate=function(my_db,key){let{source_list,transform_data}=u.incremental_json_parse(key);return new TransformList(hydrate2.rehydrate(my_db,source_list),transform_data)};var _default=TransformList;exports.default=_default}});var require_GroupBy=__commonJS({"lib-browser-old/db/plans/GroupBy.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;require_es_array_sort();require_es_array_iterator();require_web_dom_collections_iterator();var _GroupByBucketer=_interopRequireDefault(require_GroupByBucketer()),logger=_interopRequireWildcard(require_logger()),plan_utils=_interopRequireWildcard(require_plan_utils()),_TransformList=_interopRequireDefault(require_TransformList()),hydrate2=_interopRequireWildcard(require_hydrate());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var GroupBy={fn(plan,from2){let{aggregations,prev}=plan,prev_value_id=this.get_plan_ret_btype(prev),bucketer=new _GroupByBucketer.default(prev_value_id,plan.groupings,aggregations),results=[],ungrouped=this.array_to_objects(prev,this.all(prev)).filter(item=>item!==null&&bucketer.is_in_range(item));ungrouped.sort(bucketer.build_grouping_sorter());let current_grouping=null,current_continuous=null,in_current_group=item=>{for(let[idx,grouping]of bucketer.groupings.entries())if(hydrate2.dehydrate_tree(bucketer.get_bucket(grouping,item))!==hydrate2.dehydrate_tree(current_grouping[idx]))return!1;return!(bucketer.continuous_group!=null&&bucketer.get_bucket(bucketer.continuous_group,item)!==current_continuous)},next_grouping=()=>{if(bucketer.continuous_group!=null){if(current_continuous==null)current_continuous=bucketer.get_continuous_start();else if(current_continuous=bucketer.next_bucket(bucketer.continuous_group,current_continuous),current_continuous>bucketer.get_continuous_end()){if(current_grouping=null,bucketer.groupings.length===0)return;current_continuous=bucketer.get_continuous_start()}}else current_grouping=null;if(current_grouping==null){if(ungrouped[0]==null&&bucketer.groupings.length>0)return;current_grouping=bucketer.groupings.map(grouping=>bucketer.get_bucket(grouping,ungrouped[0]))}},get_next_group=()=>{if(next_grouping(),current_grouping==null)return;let building=[];for(;ungrouped[0]!=null&&in_current_group(ungrouped[0]);)building.push(ungrouped.shift());let res={};for(let[idx,value]of current_grouping.entries())res["grouping"+String(idx)]=value;bucketer.continuous_group!=null&&(res["grouping"+String(current_grouping.length)]=current_continuous);let as_static_list=null;for(let[idx,{fn,message}]of aggregations.entries()){let agg;if(fn==="count")agg=building.length;else{var _as_static_list;(_as_static_list=as_static_list)!=null||(as_static_list=this.static_list(prev_value_id,building));let transformed=new _TransformList.default(as_static_list,{value_id:prev_value_id,message});fn in transformed?agg=transformed[fn]():(logger.info("Unexpectedly missing transform call!",{fn_name:fn}),agg=transformed._numeric_op(fn))}res["agg"+String(idx)]=agg}return res};return n=>{let ret,to;n!=null?to=from2+n:to=from2+1;let next_group;for(;results.length<to&&(next_group=get_next_group());)results.push(hydrate2.dehydrate_tree(next_group));return n!=null?ret=results.slice(from2,to):ret=results.slice(from2),from2+=ret.length,ret}},get_ret_btype(plan){let{aggregations,groupings,prev}=plan;return plan_utils.get_group_by_value_id(this.get_plan_ret_btype(prev),groupings,aggregations)},adds_context:{sorted_above:!0}},_default=GroupBy;exports.default=_default}});var require_Columns=__commonJS({"lib-browser-old/db/plans/Columns.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var u=_interopRequireWildcard(require_u2());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var Columns={get_ret_btype(plan){return plan.type},fn(){throw new u.UnexpectedError("Columns cannot be executed")}},_default=Columns;exports.default=_default}});var require_ExtraFields=__commonJS({"lib-browser-old/db/plans/ExtraFields.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var u=_interopRequireWildcard(require_u2());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var ExtraFields={get_ret_btype(plan){return this.get_plan_ret_btype(plan.prev)},fn(){throw new u.UnexpectedError("ExtraFields cannot be executed")}},_default=ExtraFields;exports.default=_default}});var require_CallAggregate=__commonJS({"lib-browser-old/db/plans/CallAggregate.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;require_es_array_iterator();require_web_dom_collections_iterator();var u=_interopRequireWildcard(require_u2()),db_consts=_interopRequireWildcard(require_db()),plan_utils=_interopRequireWildcard(require_plan_utils()),_StaticObject=_interopRequireDefault(require_StaticObject());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var CallAggregate={watch_search_call(plan){return{constraints:plan.constraints,type:plan.type}},load(_ref,cb){var _field,_options;let{plan,from:from2,n}=_ref;if(from2!==0||n!==1)throw new u.UnexpectedError("CallAggregate weird params",{plan,from:from2,n});let{constraints,type,agg_fn,field,options}=plan;(_field=field)!=null||(field=void 0),(_options=options)!=null||(options=void 0);let info={};info[plan_utils.aggregate_started_key(agg_fn,field,options)]=!0,this.query_planner().update(type,constraints,null,info);let fns=[{n:agg_fn,field,options}];this.elasticsearch("aggregate",{appname:this.appname,app_version:this.app_version,temp_db:this.cur_temp_db(),type,constraints,aggregate:{fns},search_path:this.build_search_path(plan,agg_fn)},(err,res)=>{var _options2,_options3;if(err){cb(err);return}let value=res.fns[0],{search_version}=res;agg_fn==="count"&&!((_options2=options)!=null&&_options2.should_approx)&&!((_options3=options)!=null&&_options3.cacheable)&&this.query_planner().update(type,constraints,null,{length:value}),cb(null,{value,search_version})})},initialize_range(plan,range,ret){range.search_version=ret.search_version,range.at_end=!0,range.results=[ret.value]},local_change(plan,range,id,type,old_raw,new_raw,is_local){var _range$_unknown_ids2;let new_value,old_value;if(plan.type!==type)return!1;function in_search(raw){if(raw==null)return!1;let obj=new _StaticObject.default(raw,null,type);for(let c of plan.constraints)if(!plan_utils.local_constrain(obj,c,type))return!1;return!0}if(old_raw===db_consts.DONT_KNOW){var _range$_unknown_ids;return(_range$_unknown_ids=range._unknown_ids)!=null||(range._unknown_ids={}),range._unknown_ids[id]=!0,db_consts.DONT_KNOW}if((_range$_unknown_ids2=range._unknown_ids)!=null&&_range$_unknown_ids2[id])return db_consts.DONT_KNOW;let was_in_search=in_search(old_raw),is_in_search=in_search(new_raw),changed=was_in_search!==is_in_search;return!changed&&was_in_search&&plan.field&&(changed=old_raw[plan.field]!==new_raw[plan.field]),changed?plan_utils.AGGREGATE_LOCAL_CHANGE[plan.agg_fn]?(plan.field&&(old_value=was_in_search?old_raw==null?void 0:old_raw[plan.field]:null,new_value=is_in_search?new_raw==null?void 0:new_raw[plan.field]:null),range.results[0]=plan_utils.AGGREGATE_LOCAL_CHANGE[plan.agg_fn](was_in_search,is_in_search,old_value,new_value,range.results[0]),!0):db_consts.DONT_KNOW:!1},merge_ranges(plan,merge_into,merge_from){throw new u.UnexpectedError("Merge CallAggregate",{plan,merge_into,merge_from})}},_default=CallAggregate;exports.default=_default}});var require_CallGroupBy=__commonJS({"lib-browser-old/db/plans/CallGroupBy.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;require_es_array_iterator();require_web_dom_collections_iterator();var u=_interopRequireWildcard(require_u2()),db_consts=_interopRequireWildcard(require_db()),plan_utils=_interopRequireWildcard(require_plan_utils()),mode_check=_interopRequireWildcard(require_mode_check()),_GroupByBucketer=_interopRequireDefault(require_GroupByBucketer()),_StaticObject=_interopRequireDefault(require_StaticObject()),_lib=_interopRequireDefault(require_lib()),hydrate2=_interopRequireWildcard(require_hydrate()),query_planner=_interopRequireWildcard(require_query_planner());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var CallGroupBy={watch_search_call(plan){let{constraints,type,groupings,aggregations}=plan,bucketer=new _GroupByBucketer.default(type,groupings,aggregations);return constraints=[].concat(constraints,bucketer.get_grouping_constraints()),query_planner.sort_constraints(constraints),{constraints,type,is_group_by:!0}},load(_ref,cb){let{plan,from:from2,n}=_ref,{constraints,type,groupings,aggregations}=plan;function convert(grouping){return grouping=u.extend({},grouping),grouping.timezone_string==="browser"&&(grouping.timezone_string=(0,_lib.default)().current_timezone()),grouping}groupings=groupings.map(convert);let extract_last=raw=>groupings.map((_,i)=>raw["grouping".concat(String(i))]);return u.run_once(120,()=>{if(from2>0){let previous_results=this.execute_call_get_children(plan,0,from2);if(previous_results.length<from2)return"at_end";let raw=hydrate2.rehydrate_tree(this,previous_results[previous_results.length-1]).raw();return extract_last(raw)}else return null},(err,last)=>{if(err){cb(err);return}if(last==="at_end")return cb(null,{at_end:!0,results:[]});let results=[],keep_going=!0,value_id=plan_utils.get_group_by_value_id(type,groupings,aggregations),search_version=null,do_next_batch=()=>{keep_going=!1;let needed=n-results.length;return this.elasticsearch("group_by",{appname:this.appname,app_version:this.app_version,temp_db:this.cur_temp_db(),type,constraints,groupings,aggregations,last,n:Math.min(needed,db_consts.MAX_GROUPING_CALL),search_path:this.build_search_path(plan,from2+n)},(err2,res)=>{if(err2){cb(err2);return}(!search_version||res.search_version<search_version)&&({search_version}=res);for(let group of res.groups)results.push(hydrate2.dehydrate_tree(new _StaticObject.default(group,(0,_lib.default)().db_instance(),value_id)));res.groups[res.groups.length-1]&&(last=extract_last(res.groups[res.groups.length-1]));let{at_end}=res;at_end||results.length===n?cb(null,{at_end,results,search_version}):results.length>n?cb(new u.UnexpectedError("should never go above n",{results_length:results.length,n,plan})):mode_check.on_server()?keep_going=!0:do_next_batch()})};for(;keep_going;)do_next_batch()})},get_ret_btype(plan){let{type,groupings,aggregations}=plan;return plan_utils.get_group_by_value_id(type,groupings,aggregations)},initialize_range(plan,range,res){range.at_end=res.at_end,range.results=res.results,range.search_version=res.search_version},local_change(plan,range,id,type,old_raw,new_raw,is_local){var _range$_unknown_ids2;if(plan.type!==type)return!1;function in_search(raw){if(raw==null)return!1;let obj=new _StaticObject.default(raw,null,type);for(let c of plan.constraints)if(!plan_utils.local_constrain(obj,c,type))return!1;return!0}if(old_raw===db_consts.DONT_KNOW){var _range$_unknown_ids;return(_range$_unknown_ids=range._unknown_ids)!=null||(range._unknown_ids={}),range._unknown_ids[id]=!0,db_consts.DONT_KNOW}if((_range$_unknown_ids2=range._unknown_ids)!=null&&_range$_unknown_ids2[id])return db_consts.DONT_KNOW;let was_in_search=in_search(old_raw),is_in_search=in_search(new_raw),changed=was_in_search!==is_in_search;if(!changed&&was_in_search){for(let aggregation of plan.aggregations)if(aggregation.message&&old_raw[aggregation.message]!==new_raw[aggregation.message]){changed=!0;break}if(!changed){for(let grouping of plan.groupings)if(old_raw[grouping.message]!==new_raw[grouping.message]){changed=!0;break}}}return changed?db_consts.DONT_KNOW:!1},merge_ranges(plan,merge_into,merge_from){merge_into.results.push(...merge_from.results),merge_into.to=merge_from.to,merge_from.search_version<merge_into.search_version&&(merge_into.search_version=merge_from.search_version)}},_default=CallGroupBy;exports.default=_default}});var require_plans=__commonJS({"lib-browser-old/db/plans/index.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.plans=void 0;var _CallSearch=_interopRequireDefault(require_CallSearch()),_All=_interopRequireDefault(require_All()),_Static=_interopRequireDefault(require_Static()),_Transform=_interopRequireDefault(require_Transform()),_Cast=_interopRequireDefault(require_Cast()),_Numeric=_interopRequireDefault(require_Numeric()),_Contains=_interopRequireDefault(require_Contains()),_Position=_interopRequireDefault(require_Position()),_Compare=_interopRequireDefault(require_Compare()),_NodeList=_interopRequireDefault(require_NodeList()),_Length=_interopRequireDefault(require_Length()),_Cap=_interopRequireDefault(require_Cap()),_Offset=_interopRequireDefault(require_Offset()),_Flatten=_interopRequireDefault(require_Flatten()),_Concat=_interopRequireDefault(require_Concat()),_Intersect=_interopRequireDefault(require_Intersect()),_Unique=_interopRequireDefault(require_Unique()),_Reduce=_interopRequireDefault(require_Reduce()),_Filter=_interopRequireDefault(require_Filter()),_Sort=_interopRequireDefault(require_Sort()),_GroupBy=_interopRequireDefault(require_GroupBy()),_Columns=_interopRequireDefault(require_Columns()),_ExtraFields=_interopRequireDefault(require_ExtraFields()),_CallAggregate=_interopRequireDefault(require_CallAggregate()),_CallGroupBy=_interopRequireDefault(require_CallGroupBy());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var plans={CallSearch:_CallSearch.default,All:_All.default,Static:_Static.default,Transform:_Transform.default,Cast:_Cast.default,Numeric:_Numeric.default,Contains:_Contains.default,Position:_Position.default,Compare:_Compare.default,NodeList:_NodeList.default,Length:_Length.default,Cap:_Cap.default,Offset:_Offset.default,Flatten:_Flatten.default,Concat:_Concat.default,Intersect:_Intersect.default,Unique:_Unique.default,Reduce:_Reduce.default,Filter:_Filter.default,Sort:_Sort.default,GroupBy:_GroupBy.default,Columns:_Columns.default,ExtraFields:_ExtraFields.default,CallAggregate:_CallAggregate.default,CallGroupBy:_CallGroupBy.default};exports.plans=plans}});var require_ConcatList=__commonJS({"lib-browser-old/db/values/ConcatList.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var hydrate2=_interopRequireWildcard(require_hydrate()),db_utils=_interopRequireWildcard(require_db_utils()),_ListWrapper=_interopRequireDefault(require_ListWrapper()),_lib=_interopRequireDefault(require_lib());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var ConcatList=class extends _ListWrapper.default{constructor(source_lists){var _lists$0$db,_lists$;let lists=source_lists.all().filter(list=>list!==null),database=(_lists$0$db=(_lists$=lists[0])==null?void 0:_lists$.db)!=null?_lists$0$db:(0,_lib.default)().db_instance();lists.length===0&&lists.push(database.static_list(db_utils.lang_btypes().get(source_lists.get_item_btype_id()).inner().id()));let prevs=lists.map(list=>list.query);super(database,{t:"Concat",prevs})}};ConcatList.rehydrate=(my_db,key)=>new ConcatList(hydrate2.rehydrate(my_db,key));var _default=ConcatList;exports.default=_default}});var require_IntersectList=__commonJS({"lib-browser-old/db/values/IntersectList.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var hydrate2=_interopRequireWildcard(require_hydrate()),db_utils=_interopRequireWildcard(require_db_utils()),_ListWrapper=_interopRequireDefault(require_ListWrapper()),_lib=_interopRequireDefault(require_lib());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var IntersectList=class extends _ListWrapper.default{constructor(source_lists){var _lists$0$db,_lists$;let lists=source_lists.all().filter(list=>list!==null),database=(_lists$0$db=(_lists$=lists[0])==null?void 0:_lists$.db)!=null?_lists$0$db:(0,_lib.default)().db_instance();lists.length===0&&lists.push(database.static_list(db_utils.lang_btypes().get(source_lists.get_item_btype_id()).inner().id()));let prevs=lists.map(list=>list.query);super(database,{t:"Intersect",prevs})}};IntersectList.rehydrate=(my_db,key)=>new IntersectList(hydrate2.rehydrate(my_db,key));var _default=IntersectList;exports.default=_default}});var require_UniqueList=__commonJS({"lib-browser-old/db/values/UniqueList.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var hydrate2=_interopRequireWildcard(require_hydrate()),_ListWrapper=_interopRequireDefault(require_ListWrapper());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var UniqueList=class extends _ListWrapper.default{constructor(source_list){let prev=source_list.query,database=source_list.db;super(database,{t:"Unique",prev})}};UniqueList.rehydrate=(my_db,key)=>new UniqueList(hydrate2.rehydrate(my_db,key));var _default=UniqueList;exports.default=_default}});var require_SortedList=__commonJS({"lib-browser-old/db/values/SortedList.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var u=_interopRequireWildcard(require_u2()),hydrate2=_interopRequireWildcard(require_hydrate()),_ListWrapper=_interopRequireDefault(require_ListWrapper());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var SortedList=class extends _ListWrapper.default{constructor(source_list,properties){let{sorts_list}=properties,prev=source_list.query,database=source_list.db;super(database,{t:"Sort",sorts_list,prev})}};SortedList.rehydrate=function(my_db,key){let{source_list,properties}=u.incremental_json_parse(key);return new SortedList(hydrate2.rehydrate(my_db,source_list),properties)};var _default=SortedList;exports.default=_default}});var require_NodeList2=__commonJS({"lib-browser-old/db/values/NodeList.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _ListWrapper=_interopRequireDefault(require_ListWrapper());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var NodeList=class extends _ListWrapper.default{constructor(dbnode){let id=dbnode.parent_id(),field=dbnode._path.join(".");super(dbnode.db,{t:"NodeList",id,field})}};NodeList.rehydrate=(my_db,key)=>new NodeList(my_db.get_node(key));var _default=NodeList;exports.default=_default}});var require_db2=__commonJS({"lib-browser-old/db/db.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});Object.defineProperty(exports,"ConcatList",{enumerable:!0,get:function(){return _ConcatList.default}});exports.DB=void 0;Object.defineProperty(exports,"Dynamic",{enumerable:!0,get:function(){return _Dynamic.default}});Object.defineProperty(exports,"IntersectList",{enumerable:!0,get:function(){return _IntersectList.default}});Object.defineProperty(exports,"ListWrapper",{enumerable:!0,get:function(){return _ListWrapper.default}});exports.NoUser=void 0;Object.defineProperty(exports,"NodeBase",{enumerable:!0,get:function(){return _NodeBase.default}});Object.defineProperty(exports,"NodeList",{enumerable:!0,get:function(){return _NodeList.default}});exports.OuterStringified=void 0;Object.defineProperty(exports,"SortedList",{enumerable:!0,get:function(){return _SortedList.default}});Object.defineProperty(exports,"StaticList",{enumerable:!0,get:function(){return _StaticList.default}});Object.defineProperty(exports,"StaticNode",{enumerable:!0,get:function(){return _StaticNode.default}});Object.defineProperty(exports,"StaticObject",{enumerable:!0,get:function(){return _StaticObject.default}});Object.defineProperty(exports,"TransformList",{enumerable:!0,get:function(){return _TransformList.default}});Object.defineProperty(exports,"UniqueList",{enumerable:!0,get:function(){return _UniqueList.default}});exports.wipe_no_user=exports.transform_constraint_for_db=exports.global_data_items_loaded=exports.get_admin_user_id=void 0;require_es_array_iterator();require_web_dom_collections_iterator();require_es_json_stringify();require_es_array_includes();require_es_string_includes();require_es_regexp_exec();require_es_string_search();require_es_object_values();require_es_object_entries();require_es_regexp_to_string();require_es_string_replace();var u=_interopRequireWildcard(require_u2()),b_fiber=_interopRequireWildcard(require_b_fiber()),_async_state=_interopRequireDefault(require_async_state3()),mode_check=_interopRequireWildcard(require_mode_check()),_safe_require=_interopRequireDefault(require_safe_require()),logger=_interopRequireWildcard(require_logger()),db_consts=_interopRequireWildcard(require_db()),locations_consts=_interopRequireWildcard(require_locations()),eval_consts=_interopRequireWildcard(require_eval()),eval_node_state=_interopRequireWildcard(require_eval_node_state()),special_keys=_interopRequireWildcard(require_special_keys()),db_utils=_interopRequireWildcard(require_db_utils()),notifier_topics=_interopRequireWildcard(require_notifier_topics()),plan_utils=_interopRequireWildcard(require_plan_utils()),sample=_interopRequireWildcard(require_sample()),_lib=_interopRequireDefault(require_lib()),btypes=_interopRequireWildcard(require_btypes()),_appquery=_interopRequireDefault(require_appquery()),notifier_client=_interopRequireWildcard(require_client()),_client_config=_interopRequireDefault(require_client_config2()),_locations2=_interopRequireWildcard(require_locations2()),hydrate2=_interopRequireWildcard(require_hydrate()),_query_planner=require_query_planner(),_loggable=require_loggable(),_ListWrapper=_interopRequireDefault(require_ListWrapper()),_ClientDBNode=_interopRequireDefault(require_ClientDBNode()),_plans=require_plans(),_Dynamic=_interopRequireDefault(require_Dynamic()),_StaticNode=_interopRequireDefault(require_StaticNode()),_StaticObject=_interopRequireDefault(require_StaticObject()),_NodeBase=_interopRequireDefault(require_NodeBase()),_StaticList=_interopRequireDefault(require_StaticList()),_TransformList=_interopRequireDefault(require_TransformList()),_ConcatList=_interopRequireDefault(require_ConcatList()),_IntersectList=_interopRequireDefault(require_IntersectList()),_UniqueList=_interopRequireDefault(require_UniqueList()),_SortedList=_interopRequireDefault(require_SortedList()),_NodeList=_interopRequireDefault(require_NodeList2()),_global_data_items_loaded;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}db_utils.set_lang_btypes(btypes);hydrate2.register_db(exports);_safe_require.default.safe_register("./db/db",exports);var OuterStringified={rehydrate(my_db,value){return hydrate2.rehydrate_tree(my_db,u.incremental_json_parse(value))}};exports.OuterStringified=OuterStringified;function mk_sync_run(name,fn){var _b_fiber$Fiber;mode_check.on_server()&&((_b_fiber$Fiber=b_fiber.Fiber)==null?void 0:_b_fiber$Fiber.current)==null?b_fiber.SyncRun(name,fn):fn()}var VersionSource={NOTIFIER:"NOTIFIER",EXTERNAL:"EXTERNAL"},Local=class{constructor(_db,id){this.db=void 0,this.id=void 0,this.raw=void 0,this.flushed_raw=void 0,this.type=void 0,this.version=void 0,this.latest_version=void 0,this._outstanding_set_data_promise=void 0,this.latest_version_source=void 0,this.ready_key=void 0,this.dependency=void 0,this._old_keys=void 0,this._watching=void 0,this.error=void 0,this._is_loading=void 0,this.just_created=void 0,this.treat_as_changed=void 0,this.db=_db,this.id=id,this.ready_key=u.MakeKey(void 0,"initial data for "+this.id),this.dependency=u.Dependency(),this._old_keys=[]}is_watching(){return this._watching}flush(no_invalidate){if(this.ready_key&&this._old_keys.push(this.ready_key),this.ready_key=u.MakeKey(void 0,"reloading item after stale"),this.flushed_raw=this.raw,delete this.raw,delete this.version,!no_invalidate)return this.dependency.invalidate()}mark_ready(){this.ready_key.turn();for(let key of this._old_keys)key.turn();this._old_keys=[]}watch(){if(mode_check.on_server()||!this.db.can_watch||this._watching)return;this._watching=!0;let index="".concat(this.db.appname,"_").concat((0,_locations2.get_db_version)(this.db.app_version)).concat(this.db.temp_db?"_"+this.db.temp_db:"");notifier_client.watch([notifier_topics.NotificationTopic,index,this.id],()=>{var _ref,_this$latest_version;return(_ref=(_this$latest_version=this.latest_version)!=null?_this$latest_version:this.version)!=null?_ref:0},_ref2=>{let{stale,version,message}=_ref2;stale?this.flush():version!=null&&this.set_latest_version(version,VersionSource.NOTIFIER)})}poll(interval,n){n>0&&setTimeout(()=>{this.db._reload(this.id),this.poll(interval,n-1)},interval)}set_latest_version(version,version_source){var _version2,_this$latest_version2;if((_version2=version)!=null||(version=0),(_this$latest_version2=this.latest_version)!=null||(this.latest_version=0),version>this.latest_version){var _this$version;this.latest_version=version,this.latest_version_source=version_source,this.latest_version>((_this$version=this.version)!=null?_this$version:0)&&this.db._wait_for_process_updates(this.id,this.latest_version,()=>{this.db._reload(this.id)})}}dump(){let{raw,type,version}=this,ready=this.ready_key.is_turned();return JSON.stringify({raw,type,version,ready},null,4)}},global_data_items_loaded=0;exports.global_data_items_loaded=global_data_items_loaded;var _warned_re_no_search_path=!1,FALSE_PLAN={t:"Static",value_id:"sys.bool",data:[!1]},TRUE_PLAN={t:"Static",value_id:"sys.bool",data:[!0]},get_admin_user_id=function(app_info){if(app_info==null){let lib=_lib.default.or_throw();app_info={appname:lib.appname(),app_version:lib.app_version(),temp_db:lib.temp_db()}}let db_version=_locations2.default.get_db_version(app_info.app_version),key;return app_info.temp_db?key="".concat(app_info.temp_db,"_").concat(app_info.appname,"_").concat(db_version):key="".concat(app_info.appname,"_").concat(db_version),"".concat(db_consts.ADMIN_USER_ID,"_").concat(key)};exports.get_admin_user_id=get_admin_user_id;var transform_constraint_for_db=function(type,constraint){return type==="user"&&constraint.key==="email"&&constraint.constraint_type==="equals"?u.extend({},constraint,{constraint_type:"email_equals"}):type==="user"&&constraint.key==="logged_in"?u.extend({},constraint,{key:"user_signed_up"}):constraint};exports.transform_constraint_for_db=transform_constraint_for_db;var DB=class{constructor(){this._locals=void 0,this.local_changes=void 0,this.result_cache=void 0,this._query_planner=void 0,this._search_path_cache=void 0,this.search_path=void 0,this._locals={},this.result_cache={}}inspect(){return this.constructor.name}query_planner(){var _this$_query_planner;return(_this$_query_planner=this._query_planner)!=null||(this._query_planner=new _query_planner.QueryPlanner),this._query_planner}iterate(plan,from2){var _from,_plans$plan$t;if((_from=from2)!=null||(from2=0),typeof((_plans$plan$t=_plans.plans[plan.t])==null?void 0:_plans$plan$t.load)=="function")return n=>{var _from2;(_from2=from2)!=null||(from2=0);let to;if(n!=null)to=from2+n;else{let ranges=this.get_ranges(plan,from2,from2+1);if(ranges===db_consts.range_states.PAST_END)return null;[db_consts.range_states.AVAILABLE,db_consts.range_states.LOADING].includes(ranges[0].state)&&ranges[0].to>from2?to=ranges[0].to:to=Math.min(from2+db_consts.MAX_SEARCH_CHUNK,Math.max(from2+10,from2*2))}let ret=this.execute_call_get_children(plan,from2,to-from2);return ret.length===0?null:(from2=to,ret)};{let next=_plans.plans[plan.t].fn.call(this,plan,from2);return n=>{let res=next(n);return res.length===0?null:res}}}all(plan){let ret=this.iterate(plan)(db_consts.ALL_MAX);return ret!=null?ret:[]}build_search_path(plan,to){var _this$_search_path_ca,_this$_search_path_ca2,_this$_search_path_ca3,_eval_node_state$get_,_this$_search_path_ca4;(_this$_search_path_ca=this._search_path_cache)!=null||(this._search_path_cache={});let key=JSON.stringify({plan,to});return(_this$_search_path_ca3=(_this$_search_path_ca2=this._search_path_cache)[key])!=null||(_this$_search_path_ca2[key]=(_eval_node_state$get_=eval_node_state.get_current_eval_node())==null?void 0:_eval_node_state$get_.serialize()),!this._search_path_cache[key]&&u.on_client()&&!_warned_re_no_search_path&&(_warned_re_no_search_path=!0,logger.warn("No search path found",{key})),JSON.stringify((_this$_search_path_ca4=this._search_path_cache[key])!=null?_this$_search_path_ca4:null)}get_plan_for_node(query,context){switch(query.t){case"All":{var _context$sorts_list;let all={t:"CallSearch",type:query.type,constraints:[],sorts_list:(_context$sorts_list=context.sorts_list)!=null?_context$sorts_list:[]};return context.lookup&&(all.extra={lookup:context.lookup}),all}case"Filter":{var _prev$constraints,_context$sorts_list2;let prev=this.get_plan_for_node(query.prev,{});if(prev.t!=="CallSearch")return u.extend({},query,{prev});if(((_prev$constraints=prev.constraints)==null?void 0:_prev$constraints.length)>0)throw new u.UnexpectedError("should not have constraints",{query:(0,_loggable.to_loggable)(query),prev:(0,_loggable.to_loggable)(prev)});let can=[],cannot=[];for(let constraint of query.constraints){let db_constraint=transform_constraint_for_db(prev.type,constraint);plan_utils.can_execute_in_db(prev.type,db_constraint)?can.push(db_constraint):cannot.push(constraint)}let{search,leftover}=this.query_planner().pick_search(prev.type,can,(_context$sorts_list2=context.sorts_list)!=null?_context$sorts_list2:[],context.n);return cannot.push(...leftover!=null?leftover:[]),cannot.length===0?(context.lookup&&(search.extra={lookup:context.lookup}),search):{t:"Filter",constraints:cannot,prev:search}}case"Sort":{let prev=this.get_plan_for_node(query.prev,{sorts_list:query.sorts_list,n:context.n,lookup:context.lookup}),call_search;return prev.t==="CallSearch"?call_search=prev:prev.t==="Filter"&&prev.prev.t==="CallSearch"&&(call_search=prev.prev),call_search?JSON.stringify(call_search.sorts_list)===JSON.stringify(query.sorts_list)?prev:u.extend({},query,{prev}):u.extend({},query,{prev})}case"Contains":{var _item$_type;let prev=this.get_plan_for_node(query.prev,{});if(prev.t!=="CallSearch"&&prev.t!=="Filter")return u.extend({},query,{prev});if(btypes.get(this.get_plan_ret_btype(prev)).custom_type()==null)return u.extend({},query,{prev});let item=hydrate2.rehydrate_tree(this,query.item);if(prev.t==="CallSearch"&&prev.type!==(item==null||(_item$_type=item._type)==null?void 0:_item$_type.call(item))||!(item!=null&&item.exists()))return FALSE_PLAN;let in_db=[];for(let constraint of(_prev$constraints2=prev.constraints)!=null?_prev$constraints2:[]){var _prev$constraints2;if(prev.t==="Filter"||(0,_query_planner.can_execute_in_memory)(constraint)){if(!plan_utils.local_constrain(item,constraint,prev.type))return FALSE_PLAN}else in_db.push(constraint)}if(in_db.length===0)return prev.t==="CallSearch"?TRUE_PLAN:u.extend({},query,{prev});in_db.push({key:special_keys.UNIQUE_ID,constraint_type:"equals",value:item._id()});let new_query={t:"Compare",op:">",n:0,prev:{t:"Length",prev:{t:"Filter",constraints:in_db,prev:{t:"All",type:prev.type}}}};return this.get_plan_for_node(new_query,{})}case"Compare":{if(query.prev.t==="Length"&&query.n===0){let prev_prev=this.get_plan_for_node(query.prev.prev,{});return{t:"Compare",prev:{t:"Length",bound:query.n+1,prev:prev_prev,options:query.prev.options},op:query.op,n:query.n}}let prev=this.get_plan_for_node(query.prev,{});return prev.t==="Length"&&(prev={t:"Length",bound:query.n+1,prev:prev.prev,options:query.prev.options}),{t:"Compare",prev,op:query.op,n:query.n}}case"GroupBy":{let prev=this.get_plan_for_node(query.prev,{n:db_consts.ALL_MAX}),do_in_memory=prev2=>u.extend({},query,{prev:prev2});if(prev.t!=="CallSearch")return do_in_memory(prev);let stats_node=this.query_planner().get_stats(prev.type,prev.constraints);if(stats_node!=null&&stats_node.searches&&stats_node.length!=null){for(let s_node of Object.values(stats_node.searches))if(s_node.loaded>=stats_node.length)return do_in_memory(this.query_planner().node_to_search(s_node))}return{t:"CallGroupBy",aggregations:query.aggregations,groupings:query.groupings,constraints:prev.constraints,type:prev.type}}case"Length":case"Numeric":{var _fallback;let use_existing,field,options,can_aggregate,agg_fn,fallback,prev;if(query.t==="Length")prev=this.get_plan_for_node(query.prev,{n:db_consts.ALL_MAX}),can_aggregate=prev.t==="CallSearch",fallback=prev,use_existing=s_node=>({t:"Length",prev:this.query_planner().node_to_search(s_node)}),agg_fn="count",field=void 0,options=query.options;else{let transform=query.prev;if(can_aggregate=transform.t==="Transform",transform.t==="Transform"){let message=btypes.get(transform.value_id).get_message(transform.message);can_aggregate=message.ret_btype_id()!=="null"&&message.is_lookup()}can_aggregate&&(prev=this.get_plan_for_node(transform.prev,{n:db_consts.ALL_MAX}),can_aggregate=prev.t==="CallSearch"),use_existing=s_node=>{let new_transform=u.extend({},transform,{prev:this.query_planner().node_to_search(s_node)});return u.extend({},query,{prev:new_transform})},agg_fn=query.op,field=transform.message,options=query.options}if(can_aggregate){prev=prev;let stats_node=this.query_planner().get_stats(prev.type,prev.constraints);if(stats_node!=null&&stats_node.searches){if(stats_node.length!=null){for(let s_node of Object.values(stats_node.searches))if(!s_node.from&&!s_node.has_gaps&&s_node.loaded>=stats_node.length)return use_existing(s_node)}if(!stats_node[plan_utils.aggregate_started_key(agg_fn,field,options)])for(let s_node of Object.values(stats_node.searches)){var _s_node$loaded;let remaining=s_node.loading_to-((_s_node$loaded=s_node.loaded)!=null?_s_node$loaded:0);if(!s_node.from&&!s_node.has_gaps&&remaining>0&&remaining<db_consts.MAX_SEARCH_CHUNK)return use_existing(s_node)}}return{t:"CallAggregate",type:prev.type,constraints:prev.constraints,agg_fn,field,options}}return(_fallback=fallback)!=null||(fallback=this.get_plan_for_node(query.prev,{n:db_consts.ALL_MAX})),u.extend({},query,{prev:fallback})}case"Transform":{let lookup2,message=btypes.get(query.value_id).get_message(query.message);message.is_lookup()&&message.ret_btype().custom_type()!=null?(lookup2=[query.message],context.lookup&&(lookup2=lookup2.concat(context.lookup))):lookup2=null;let prev=this.get_plan_for_node(query.prev,{lookup:lookup2});return u.extend({},query,{prev})}case"ExtraFields":{var _query$extra_field_na;let prev=this.get_plan_for_node(query.prev,{});return((_query$extra_field_na=query.extra_field_names)==null?void 0:_query$extra_field_na.length)>0&&(prev.extra={lookup:query.extra_field_names}),prev}case"Columns":{let prev=this.get_plan_for_node(query.prev,{});if(prev!=null){let columns={};for(let col of query.columns)columns[col]=!0;if(columns._id=!0,columns._version=!0,prev.sorts_list!=null)for(let sort of prev.sorts_list)columns[sort.sort_field]=!0;prev.columns=Object.keys(columns)}return prev}default:{let overwrite={};return query.prev&&(overwrite.prev=this.get_plan_for_node(query.prev,{})),query.prevs&&(overwrite.prevs=query.prevs.map(prev=>this.get_plan_for_node(prev,{}))),u.extend({},query,overwrite)}}}validate_query(query){var _plans$query$t$valida;if(!_plans.plans[query.t])throw new u.UnexpectedError("Unrecognized query",{query:(0,_loggable.to_loggable)(query)});if((_plans$query$t$valida=_plans.plans[query.t].validate)==null||_plans$query$t$valida.call(this,query),query.prev!=null&&this.validate_query(query.prev),query.prevs!=null){if(!Array.isArray(query.prevs))throw new u.UnexpectedError("Prevs must be array",{query:(0,_loggable.to_loggable)(query)});for(let prev of query.prevs)this.validate_query(prev)}}build_query_plan(query,from2,n){return query=u.json_deep_copy(query),this.validate_query(query),query=this.simplify_query(query),this.canonicalize_query(query),this.get_plan_for_node(query,{n})}execute_query(query,from2,n){let plan=this.build_query_plan(query,from2,n);return this.execute_get_children(plan,from2,n)}init_result_cache(plan){let cache_key=this.get_cache_key(plan);return this.result_cache[cache_key]||(this.result_cache[cache_key]={plan,ranges:[]}),this.result_cache[cache_key]}get_ranges(plan,from2,to){if(to<=from2)throw new u.UnexpectedError("assertion error: to must be strictly greater than from",{plan:(0,_loggable.to_loggable)(plan),from:from2,to});if(from2<0)throw new u.UnexpectedError("assertion error: from must be at least 0",{plan:(0,_loggable.to_loggable)(plan),from:from2,to});let result_cache=this.init_result_cache(plan),{ranges}=result_cache,ret=[],current_index=from2,at_end=!1;for(let range of ranges){if(current_index>=to)break;if(range.to<=current_index){if(range.state===db_consts.range_states.AVAILABLE&&range.at_end)return db_consts.range_states.PAST_END;continue}if(current_index<range.from){let range_end=Math.min(range.from,to);ret.push({state:db_consts.range_states.NOT_STARTED,from:current_index,to:range_end}),current_index=range_end}if(range.from>=to)break;if(ret.push(range),current_index=range.to,range.state===db_consts.range_states.AVAILABLE&&range.at_end){at_end=!0;break}}current_index<to&&(at_end||ret.push({state:db_consts.range_states.NOT_STARTED,from:current_index,to}));let was_available=!1;for(let range of ret)if(range.state===db_consts.range_states.AVAILABLE){if(was_available)throw new u.UnexpectedError("assertion error: adjacent available ranges");was_available=!0}else was_available=!1;return ret}get_plan_ret_btype(plan){return _plans.plans[plan.t].get_ret_btype.call(this,plan)}array_to_objects(plan,array,pre_cache){let value_id=this.get_plan_ret_btype(plan);if((!value_id||value_id==="null")&&(array==null?void 0:array.length)>0&&logger.error("null value_id in array_to_objects",{plan:(0,_loggable.to_loggable)(plan),value_id:(0,_loggable.to_loggable)(value_id),array_length:array.length}),typeof value_id=="object")if(value_id!=null&&value_id.get_message)logger.error("Got value instead of value id",{plan:(0,_loggable.to_loggable)(plan)});else throw new u.UnexpectedError("Got object value_id",{plan:(0,_loggable.to_loggable)(plan)});let wrapped_get=(id,idx)=>{if(id==null)return null;idx%10===0&&b_fiber.optional_pause("in wrapped_get");let obj=this.get(id);return pre_cache&&obj.precache(),obj},wrapped_static_get=(item,idx)=>(idx%10===0&&b_fiber.optional_pause("in wrapped_static_get"),db_utils._static_get(item,this,value_id));b_fiber.optional_pause("array_to_objects: pre");let ret;return btypes.get(value_id).custom_type()!=null?ret=array.map((id,idx)=>wrapped_get(id,idx)):ret=array.map((item,idx)=>wrapped_static_get(item,idx)),b_fiber.optional_pause("array_to_objects: post"),ret}array_to_ids(plan,array){let value_id=this.get_plan_ret_btype(plan);return(!value_id||value_id==="null")&&(array==null?void 0:array.length)>0&&logger.error("null value_id in array_to_ids",{plan:(0,_loggable.to_loggable)(plan),value_id,array_length:array.length}),db_utils.array_to_ids(value_id,array)}get_cache_key(plan){return plan.extra!=null&&(plan=u.json_deep_copy(plan),delete plan.extra),JSON.stringify(plan)}execute_get_children(plan,from2,n){var _next;let context={plan,from:from2,n};if(n<=0)throw new u.UnexpectedError("must request at least 1 result",{context:(0,_loggable.to_loggable)(context)});if(from2<0)throw new u.UnexpectedError("cannot call negative from",{context:(0,_loggable.to_loggable)(context)});return(_next=this.iterate(plan,from2)(n))!=null?_next:[]}execute_call_get_children(plan,from2,n){let to=from2+n,ranges=this.get_ranges(plan,from2,to);if(ranges===db_consts.range_states.PAST_END)return this.register_call_dependency(plan),[];if(ranges.length===1&&ranges[0].state===db_consts.range_states.AVAILABLE){let start=from2-ranges[0].from,end=start+n;return this.register_call_dependency(plan),ranges[0].results.slice(start,end)}let loading_keys=[],to_load=[];for(let range of ranges)switch(range.state){case db_consts.range_states.LOADING:loading_keys.push(range.loading_key);break;case db_consts.range_states.AVAILABLE:break;case db_consts.range_states.ERROR:throw range.err;case db_consts.range_states.NOT_STARTED:to_load.push(range);break;default:throw new u.UnexpectedError("Unrecognized range state: "+JSON.stringify(range))}if(to_load.length>0){var _async_state$CurrentN;if(((_async_state$CurrentN=_async_state.default.CurrentNotReadyCatcher)==null?void 0:_async_state$CurrentN.length)>0)return[];for(let range of to_load)loading_keys.push(this.load_get_children(plan,range.from,range.to-range.from))}let loading_key=u.TransientKeyList(loading_keys);if(loading_key.is_turned())return this.execute_call_get_children(plan,from2,n);if(u.ensure_ready(loading_key),u.on_client())return[];throw new db_consts.RetryError}add_loading_range(plan,from2,n,loading_key){let to=from2+n,result_cache=this.init_result_cache(plan),{ranges}=result_cache,idx,from_id;for(idx=0;idx<ranges.length;idx++){let range=ranges[idx];if(range.from>=to)break;if(range.from>from2)throw new u.UnexpectedError("adding overlapping range",{plan:(0,_loggable.to_loggable)(plan),from:from2,n,existing_ranges:(0,_loggable.to_loggable)(ranges)})}ranges[idx-1]&&ranges[idx-1].state===db_consts.range_states.AVAILABLE&&ranges[idx-1].to===from2&&(from_id=ranges[idx-1].results.slice(-1)[0]);let new_range={state:db_consts.range_states.LOADING,from_id,from:from2,to,loading_key,result_cache};return ranges.splice(idx,0,new_range),new_range}invalidate_plan(cache_key){let result_cache=this.result_cache[cache_key];result_cache&&(result_cache.ranges=[],this.invalidate_call_dependency(cache_key))}get_plan_version(cache_key){let min_version=null;for(let range of(_this$result_cache$ca=(_this$result_cache$ca2=this.result_cache[cache_key])==null?void 0:_this$result_cache$ca2.ranges)!=null?_this$result_cache$ca:[]){var _this$result_cache$ca,_this$result_cache$ca2;range.search_version!=null&&(min_version==null||range.search_version<min_version)&&(min_version=range.search_version)}return min_version}handle_results(plan,target_range,err,res){let cache_key=this.get_cache_key(plan);if(this.init_result_cache(plan),target_range.state!==db_consts.range_states.LOADING&&err)throw logger.error("Got an error for a non-loading range, throwing error",{plan:(0,_loggable.to_loggable)(plan),state:target_range.state}),err;if(target_range.state!==db_consts.range_states.LOADING)throw new u.UnexpectedError("assertion error: handle_results called on a non-loading range",{plan:(0,_loggable.to_loggable)(plan),range_state:target_range.state});if(target_range.loading_key.turn(),delete target_range.loading_key,err)target_range.state=db_consts.range_states.ERROR,target_range.err=err,this.schedule_discard_errors(plan);else{_plans.plans[plan.t].initialize_range.call(this,plan,target_range,res),target_range.state=db_consts.range_states.AVAILABLE;for(let id in this.local_changes){let local=this._local(id);_plans.plans[plan.t].local_change.call(this,plan,target_range,id,local.type,db_consts.DONT_KNOW,local.raw,!0)}let new_ranges=[],last_available=null;for(let range of Array.from([]).concat(this.result_cache[cache_key].ranges))range.state===db_consts.range_states.AVAILABLE?last_available&&last_available.to===range.from?_plans.plans[plan.t].merge_ranges.call(this,plan,last_available,range):(last_available=range,new_ranges.push(range)):(last_available=null,new_ranges.push(range));new_ranges=new_ranges.filter(range=>range.state!==db_consts.range_states.DELETED),this.result_cache[cache_key].ranges=new_ranges}}delete_range(plan,range){let cache_key=this.get_cache_key(plan);u.array_remove(this.result_cache[cache_key].ranges,range),range.state=db_consts.range_states.DELETED}load_get_children(plan,from2,n){var _plans$plan$t2;if(typeof((_plans$plan$t2=_plans.plans[plan.t])==null?void 0:_plans$plan$t2.load)!="function")throw new u.UnexpectedError("no load function for "+plan.t);let loading_key=u.MakeKey(void 0,JSON.stringify({plan,from:from2,n})),new_range=this.add_loading_range(plan,from2,n,loading_key);return _plans.plans[plan.t].load.call(this,{plan,from:from2,n,from_id:new_range.from_id},this.handle_results.bind(this,plan,new_range)),loading_key}canonicalize_query(query){if(_plans.plans[query.t].canonicalize&&_plans.plans[query.t].canonicalize(query),query.prev&&this.canonicalize_query(query.prev),query.prevs)for(let prev of query.prevs)this.canonicalize_query(prev);return null}simplify_query(query,context){var _context;(_context=context)!=null||(context={});let new_context={};for(let[k,v]of Object.entries(context)){var _plans$query$t$preser;(_plans$query$t$preser=_plans.plans[query.t].preserves_context)!=null&&_plans$query$t$preser[k]&&(new_context[k]=v)}if(_plans.plans[query.t].adds_context)for(let[k,v]of Object.entries(_plans.plans[query.t].adds_context))new_context[k]=v;for(query.prev&&(query=u.extend({},query,{prev:this.simplify_query(query.prev,new_context)})),query.prevs&&(query=u.extend({},query,{prevs:query.prevs.map(prev=>this.simplify_query(prev,new_context))}));;){var _plans$query$t$simpli,_query$prev;if(!_plans.plans[query.t])throw new u.UnexpectedError("Unrecognized query type",{query:(0,_loggable.to_loggable)(query)});let simplified=(_plans$query$t$simpli=_plans.plans[query.t].simplify)==null?void 0:_plans$query$t$simpli.call(this,query,context);if(simplified){query=simplified;continue}if(((_query$prev=query.prev)==null?void 0:_query$prev.t)==="Sort"&&_plans.plans[query.t].sort_neutral){var _plans$new_prev$t$sim;let sort_prev=query.prev.prev,new_prev=u.extend({},query,{prev:sort_prev});simplified=(_plans$new_prev$t$sim=_plans.plans[new_prev.t].simplify)==null?void 0:_plans$new_prev$t$sim.call(this,new_prev,context),simplified&&(new_prev=simplified),query=u.extend({},query.prev,{prev:new_prev});continue}return query}}get_node(key){let[id,...path]=key.split("."),parent=this.get_object(id);return new this.DBNODE(parent,path,this)}get_object(id){return new this.DBOBJECT(id,this)}_local(id){var _this$_locals,_this$_locals$id;return(_this$_locals$id=(_this$_locals=this._locals)[id])!=null||(_this$_locals[id]=new Local(this,id)),this._locals[id]}_has_local(id){return this._local(id).raw!==void 0}is_watching(id){return this._locals[id]!=null&&this._local(id).is_watching()}flush(id){this._local(id).flush(),this._reload(id)}_get_data(id){if(id===db_consts.NO_USER)return new NoUser().raw();let local=this._local(id);if(local.error)throw local.error;return local.raw?local.raw:null}_get_ready_key(id){return[db_consts.NO_USER,"constructor"].includes(id)?u.FakeKey():this._local(id).ready_key}_ensure_loading(id){id!==db_consts.NO_USER&&(this._has_local(id)||this._reload(id))}_wait_for_process_updates(id,version,cb){version==="local"||!this._get_ready_key(id).is_turned()||mode_check.on_server()?cb():_lib.default.or_throw().workflow.wait_for_server(cb)}_reload(id,clear_cache){var _this$_local$latest_v;if(id===db_consts.NO_USER)return;let local=this._local(id);if(local._is_loading)return;local._is_loading=!0;let latest_version=(_this$_local$latest_v=this._local(id).latest_version)!=null?_this$_local$latest_v:0;this.elasticsearch("get",{id,appname:this.appname,app_version:this.app_version,temp_db:this.cur_temp_db(),clear_cache},(err,res)=>{if(local._is_loading=!1,this._handle_get_response(id,err,res),(res==null?void 0:res._version)!=null&&res._version<latest_version)return _client_config.default.offline&&res._type==="user"&&res._source.bubble_employee_boolean?void 0:(logger.error("Got an out of date version in _reload",{id,latest_version,version:res._version}),this._reload(id,!0))})}_handle_get_response(id,err,res){if(err!=null){this._set_error(id,err);return}let{_version,found,_source,_type}=res;if(found)this._set_data(id,_source,_type,_version);else{var _this$_local$latest_v2;this._set_data(id,null,null,(_this$_local$latest_v2=this._local(id).latest_version)!=null?_this$_local$latest_v2:0)}}_register_dependency(id){id===db_consts.NO_USER&&new NoUser().register_dependency(),this._local(id).dependency.register()}_set_local(id,path,value){this._ensure_loading(id),u.WaitFor(this._get_ready_key(id),()=>{var _this$_get_data;let new_data=u.json_deep_copy((_this$_get_data=this._get_data(id))!=null?_this$_get_data:{});if(path){let to_change=new_data;for(let[i,p]of path.entries())if(i===path.length-1)to_change[p]=value;else{var _to_change,_to_change$p;(_to_change$p=(_to_change=to_change)[p])!=null||(_to_change[p]={}),to_change=to_change[p]}}else u.extend(new_data,value);this._set_data(id,new_data,null,"local")})}_delete_local(id){return this._set_data(id,null,null,"local")}_create_local(id,type){return this._set_data(id,{},type,"local")}_get_type(id){return id===db_consts.NO_USER?"user":this._local(id).type}ensure_object_updates(object_updates){let count=0;for(let id in object_updates){let version=object_updates[id];count++,count%10===0&&b_fiber.optional_pause();let local=this._local(id),was_turned;local.ready_key.is_turned()&&(version==="clear"||version>local.version)?(local.ready_key=u.MakeKey(30,"data ensure_object_updates loaded for "+id),was_turned=!0):was_turned=!1,version==="clear"?was_turned&&(local.flushed_raw=local.raw,delete local.raw,delete local.version,this._reload(id)):local.set_latest_version(version,VersionSource.EXTERNAL)}}_set_error(id,error){let local=this._local(id);local.error=error,local.mark_ready()}_set_data(id,data,type,version){let promise=u.Promise(null,"db._set_data "+id);return id===db_consts.NO_USER?(new NoUser()._write(data),promise.resolve(),promise):(version!=="local"&&(_global_data_items_loaded=global_data_items_loaded++,exports.global_data_items_loaded=global_data_items_loaded),this._wait_for_process_updates(id,version,()=>{mk_sync_run("db_set_data",()=>{var _local$version;let local=this._local(id);if(!(version==="local"||version>((_local$version=local.version)!=null?_local$version:-1)))promise.resolve();else{var _this$local_changes,_local$raw,_local$_outstanding_s2;if(local.latest_version>version){var _local$_outstanding_s;this._reload(id),(_local$_outstanding_s=local._outstanding_set_data_promise)==null||_local$_outstanding_s.resolve(promise),local._outstanding_set_data_promise=promise;return}if(version==="local"&&type!=null&&(local.just_created=!0),local.just_created&&version!=="local")if(data===null){promise.resolve();return}else local.just_created=!1;(_this$local_changes=this.local_changes)!=null||(this.local_changes={}),version==="local"?this.local_changes[id]=local.raw:(local.version=version,delete this.local_changes[id]);let old_data=(_local$raw=local.raw)!=null?_local$raw:local.flushed_raw;delete local.flushed_raw,local.raw=data,type!=null&&(local.type=type),(local.type||local.raw===null)&&(local.error=null,local.mark_ready(),this.local_item_updated(id,local.raw,local.type,version)),local.dependency.invalidate(),local.watch(),(_local$_outstanding_s2=local._outstanding_set_data_promise)==null||_local$_outstanding_s2.resolve(),promise.resolve(),(old_data!=null||version==="local"||local.latest_version_source===VersionSource.EXTERNAL)&&(local.treat_as_changed=!1,this.publish_change(id,type!=null?type:local.type,old_data,data,version==="local"))}})}),promise)}publish_change(id,type,old_raw,new_raw,is_local){for(let cache_key in this.result_cache){let result_cache=this.result_cache[cache_key],{plan}=result_cache,invalidate=!1;for(let range of Array.from([]).concat(result_cache.ranges))if(range.state===db_consts.range_states.AVAILABLE){let ret=_plans.plans[plan.t].local_change.call(this,plan,range,id,type,old_raw,new_raw,is_local);if(ret===db_consts.DONT_KNOW){let watch_search_call=_plans.plans[plan.t].watch_search_call.call(this,plan);this.notify_maybe_invalid(watch_search_call,!0)}else ret&&(invalidate=!0)}invalidate&&this.invalidate_call_dependency(cache_key)}}cur_temp_db(){if(this.temp_db)return db_utils.get_temp_db(this.temp_db,this.get_appname())}lookup_user(key,value){let constraints=[{key,constraint_type:"equals",value}];return this.find("user",constraints).get_children(0,1)[0]}find(type,constraints,sorts_list,search_path){var _constraints;constraints=hydrate2.dehydrate_tree(constraints),type==="user"&&(constraints=constraints.concat([{key:"user_signed_up",constraint_type:"equals",value:!0},{key:"_id",constraint_type:"not equal",value:this.get_admin_user_id()},{key:"_id",constraint_type:"not equal",value:get_admin_user_id({appname:this.appname,app_version:locations_consts.LIVE_VERSION})},{key:"_id",constraint_type:"not equal",value:get_admin_user_id({appname:this.appname,app_version:locations_consts.TEST_VERSION})},{key:"_id",constraint_type:"not equal",value:db_consts.ADMIN_USER_ID}]));let query={t:"All",type};((_constraints=constraints)==null?void 0:_constraints.length)>0&&(query={t:"Filter",constraints,prev:query}),(sorts_list==null?void 0:sorts_list.length)>0&&(query={t:"Sort",sorts_list,prev:query});let list_wrapper=new _ListWrapper.default(this,query);return search_path&&!eval_node_state.get_current_eval_node()&&(list_wrapper._creation_eval_node={serialize(){return search_path}}),list_wrapper}static_list(value_id,array){var _array;if(!value_id)throw new u.UnexpectedError("Value id is required",{value_id});if((_array=array)!=null||(array=[]),!Array.isArray(array))throw new u.UnexpectedError("Bad array",{array_type:typeof array,array_str:String(array),value_id:(0,_loggable.to_loggable)(value_id)});let array_of_ids=db_utils.array_to_ids(value_id,array);return this.static_list_from_ids(value_id,array_of_ids)}static_list_from_ids(value_id,array){var _array2;if(!value_id)throw new u.UnexpectedError("Value id is required",{value_id});if((_array2=array)!=null||(array=[]),!Array.isArray(array))throw new u.UnexpectedError("Bad array",{array_type:typeof array,array_str:String(array),value_id:(0,_loggable.to_loggable)(value_id)});let query={t:"Static",data:array,value_id};return new _ListWrapper.default(this,query)}retrieve(type,keys){let constraints=[];for(let key in keys){let value=keys[key];if(value==null)throw new u.UnexpectedError("retrieve: value cannot be null for key "+key);constraints.push({key,value,constraint_type:"equals"})}let search=this.find(type,constraints),retries=5;for(;search.get_children(0,1)[0]==null;){if(retries-=1,retries===0)throw new u.UnexpectedError("Retrieve failed for "+type,{keys:(0,_loggable.to_loggable)(keys)});b_fiber.pause(1e3,"db retrieve attempt cooldown")}return search.get_children(0,1)[0]}get_admin_user_id(){let tdb=this.cur_temp_db();return get_admin_user_id({appname:this.appname,app_version:this.app_version,temp_db:tdb})}id(){return this.appname+"_"+this.app_version+(this.temp_db?"_"+this.temp_db:"")}get_new_object_data(type,id){let user_id;return type==="user"?user_id=id:user_id=_lib.default.or_throw().current_user()._id(),{"Created By":eval_consts.HYDRATE_STRING+String(user_id),"Created Date":u.timestamp(),"Modified Date":u.timestamp()}}create(type,initial_data,id){var _initial_data,_id2;if((_initial_data=initial_data)!=null||(initial_data={}),id&&mode_check.on_server()&&this.get(id).exists())throw new u.UnexpectedError("cannot create object, id already exists",{id:function(_id){function id2(){return _id.apply(this,arguments)}return id2.toString=function(){return _id.toString()},id2}(()=>id),type,initial_data:(0,_loggable.to_loggable)(initial_data)});(_id2=id)!=null||(id=u.UUID());let node=this.get_object(id),data=this.get_new_object_data(type,id);return u.extend(data,initial_data),this._create_local(id,type),node.set(data,{is_insert:!0}),node}get(id){if(!id||typeof id!="string")throw new u.UnexpectedError("bad id: must be a string",{id_type:typeof id,id_as_string:String(id)});return id===db_consts.NO_USER?new NoUser:id.indexOf("sample:")===0?new sample.SampleObject(id.replace("sample:","")):this.get_object(id)}};exports.DB=DB;var _no_user_cache=null,_no_user_dependency=null,wipe_no_user=function(){if(mode_check.on_server())delete b_fiber.Fiber.current.NoUserObject;else{var _u$session_storage;_no_user_cache=null,(_u$session_storage=u.session_storage)==null||_u$session_storage.removeItem("NoUserObject")}};exports.wipe_no_user=wipe_no_user;var NoUser=class{constructor(){var _no_user_dependency2;this.ready_key=void 0,this.dependency=void 0,this.ready_key=u.FakeKey(),(_no_user_dependency2=_no_user_dependency)!=null||(_no_user_dependency=u.Dependency()),this.dependency=_no_user_dependency}key(){return db_consts.NO_USER}get(){return this}set(){}child(name){return new _ClientDBNode.default(this,[name],_lib.default.or_throw().db_instance())}_child(path){return new _ClientDBNode.default(this,path,_lib.default.or_throw().db_instance())}dehydrate(){return eval_consts.HYDRATE_STRING+db_consts.NO_USER}_id(){return db_consts.NO_USER}_type(){return"user"}is_equal_to(x){var _x$dehydrate;return(x==null||(_x$dehydrate=x.dehydrate)==null?void 0:_x$dehydrate.call(x))===this.dehydrate()}precache(){}exists(){return!1}ignore_privacy(){return this}get_email(){return null}is_logged_in(){return!1}raw(){var _u$session_storage$ge,_u$session_storage2;function get_raw_with_defaults(){let initial_values={};if(!_lib.default.or_throw().is_edit_mode()){var _custom_type$fields;let iterable=(_custom_type$fields=_appquery.default.custom_type("user").fields())!=null?_custom_type$fields:[];for(let n=0;n<iterable.length;n++){let field=iterable[n];!field.deleted()&&field.default_val()!=null&&(initial_values[field.name()]=field.default_val())}}return initial_values["Created Date"]=u.timestamp(),initial_values["Modified Date"]=u.timestamp(),initial_values}if(mode_check.on_server()){var _b_fiber$Fiber$curren,_b_fiber$Fiber2,_b_fiber$Fiber2$curre;return(_b_fiber$Fiber$curren=(_b_fiber$Fiber2=b_fiber.Fiber)==null||(_b_fiber$Fiber2$curre=_b_fiber$Fiber2.current)==null?void 0:_b_fiber$Fiber2$curre.NoUserObject)!=null?_b_fiber$Fiber$curren:get_raw_with_defaults()}return _no_user_cache!=null?_no_user_cache:u.json_parse((_u$session_storage$ge=(_u$session_storage2=u.session_storage)==null?void 0:_u$session_storage2.getItem("NoUserObject"))!=null?_u$session_storage$ge:u.json_stringify(get_raw_with_defaults()))}_write(new_raw){var _b_fiber$Fiber3,_no_user_dependency3;mode_check.on_server()&&((_b_fiber$Fiber3=b_fiber.Fiber)==null?void 0:_b_fiber$Fiber3.current)!=null&&(b_fiber.Fiber.current.NoUserObject=new_raw);try{u.session_storage.setItem("NoUserObject",JSON.stringify(new_raw))}catch(error){var _u$session_storage3;_no_user_cache=new_raw,(_u$session_storage3=u.session_storage)==null||_u$session_storage3.removeItem("NoUserObject")}return(_no_user_dependency3=_no_user_dependency)==null?void 0:_no_user_dependency3.invalidate()}register_dependency(){var _no_user_dependency4;(_no_user_dependency4=_no_user_dependency)!=null||(_no_user_dependency=u.Dependency()),_no_user_dependency.register()}};exports.NoUser=NoUser}});var require_core3=__commonJS({"node_modules/crypto-js/core.js"(exports,module){init_define_process_env();init_shim();(function(root,factory){typeof exports=="object"?module.exports=exports=factory():typeof define=="function"&&define.amd?define([],factory):root.CryptoJS=factory()})(exports,function(){var CryptoJS=CryptoJS||function(Math2,undefined2){var C={},C_lib=C.lib={},Base=C_lib.Base=function(){function F(){}return{extend:function(overrides){F.prototype=this;var subtype=new F;return overrides&&subtype.mixIn(overrides),subtype.hasOwnProperty("init")||(subtype.init=function(){subtype.$super.init.apply(this,arguments)}),subtype.init.prototype=subtype,subtype.$super=this,subtype},create:function(){var instance=this.extend();return instance.init.apply(instance,arguments),instance},init:function(){},mixIn:function(properties){for(var propertyName in properties)properties.hasOwnProperty(propertyName)&&(this[propertyName]=properties[propertyName]);properties.hasOwnProperty("toString")&&(this.toString=properties.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),WordArray=C_lib.WordArray=Base.extend({init:function(words,sigBytes){words=this.words=words||[],sigBytes!=undefined2?this.sigBytes=sigBytes:this.sigBytes=words.length*4},toString:function(encoder){return(encoder||Hex).stringify(this)},concat:function(wordArray){var thisWords=this.words,thatWords=wordArray.words,thisSigBytes=this.sigBytes,thatSigBytes=wordArray.sigBytes;if(this.clamp(),thisSigBytes%4)for(var i=0;i<thatSigBytes;i++){var thatByte=thatWords[i>>>2]>>>24-i%4*8&255;thisWords[thisSigBytes+i>>>2]|=thatByte<<24-(thisSigBytes+i)%4*8}else if(thatWords.length>65535)for(var i=0;i<thatSigBytes;i+=4)thisWords[thisSigBytes+i>>>2]=thatWords[i>>>2];else thisWords.push.apply(thisWords,thatWords);return this.sigBytes+=thatSigBytes,this},clamp:function(){var words=this.words,sigBytes=this.sigBytes;words[sigBytes>>>2]&=4294967295<<32-sigBytes%4*8,words.length=Math2.ceil(sigBytes/4)},clone:function(){var clone=Base.clone.call(this);return clone.words=this.words.slice(0),clone},random:function(nBytes){for(var words=[],r=function(m_w){var m_w=m_w,m_z=987654321,mask=4294967295;return function(){m_z=36969*(m_z&65535)+(m_z>>16)&mask,m_w=18e3*(m_w&65535)+(m_w>>16)&mask;var result=(m_z<<16)+m_w&mask;return result/=4294967296,result+=.5,result*(Math2.random()>.5?1:-1)}},i=0,rcache;i<nBytes;i+=4){var _r=r((rcache||Math2.random())*4294967296);rcache=_r()*987654071,words.push(_r()*4294967296|0)}return new WordArray.init(words,nBytes)}}),C_enc=C.enc={},Hex=C_enc.Hex={stringify:function(wordArray){for(var words=wordArray.words,sigBytes=wordArray.sigBytes,hexChars=[],i=0;i<sigBytes;i++){var bite=words[i>>>2]>>>24-i%4*8&255;hexChars.push((bite>>>4).toString(16)),hexChars.push((bite&15).toString(16))}return hexChars.join("")},parse:function(hexStr){for(var hexStrLength=hexStr.length,words=[],i=0;i<hexStrLength;i+=2)words[i>>>3]|=parseInt(hexStr.substr(i,2),16)<<24-i%8*4;return new WordArray.init(words,hexStrLength/2)}},Latin1=C_enc.Latin1={stringify:function(wordArray){for(var words=wordArray.words,sigBytes=wordArray.sigBytes,latin1Chars=[],i=0;i<sigBytes;i++){var bite=words[i>>>2]>>>24-i%4*8&255;latin1Chars.push(String.fromCharCode(bite))}return latin1Chars.join("")},parse:function(latin1Str){for(var latin1StrLength=latin1Str.length,words=[],i=0;i<latin1StrLength;i++)words[i>>>2]|=(latin1Str.charCodeAt(i)&255)<<24-i%4*8;return new WordArray.init(words,latin1StrLength)}},Utf8=C_enc.Utf8={stringify:function(wordArray){try{return decodeURIComponent(escape(Latin1.stringify(wordArray)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(utf8Str){return Latin1.parse(unescape(encodeURIComponent(utf8Str)))}},BufferedBlockAlgorithm=C_lib.BufferedBlockAlgorithm=Base.extend({reset:function(){this._data=new WordArray.init,this._nDataBytes=0},_append:function(data){typeof data=="string"&&(data=Utf8.parse(data)),this._data.concat(data),this._nDataBytes+=data.sigBytes},_process:function(doFlush){var data=this._data,dataWords=data.words,dataSigBytes=data.sigBytes,blockSize=this.blockSize,blockSizeBytes=blockSize*4,nBlocksReady=dataSigBytes/blockSizeBytes;doFlush?nBlocksReady=Math2.ceil(nBlocksReady):nBlocksReady=Math2.max((nBlocksReady|0)-this._minBufferSize,0);var nWordsReady=nBlocksReady*blockSize,nBytesReady=Math2.min(nWordsReady*4,dataSigBytes);if(nWordsReady){for(var offset=0;offset<nWordsReady;offset+=blockSize)this._doProcessBlock(dataWords,offset);var processedWords=dataWords.splice(0,nWordsReady);data.sigBytes-=nBytesReady}return new WordArray.init(processedWords,nBytesReady)},clone:function(){var clone=Base.clone.call(this);return clone._data=this._data.clone(),clone},_minBufferSize:0}),Hasher=C_lib.Hasher=BufferedBlockAlgorithm.extend({cfg:Base.extend(),init:function(cfg){this.cfg=this.cfg.extend(cfg),this.reset()},reset:function(){BufferedBlockAlgorithm.reset.call(this),this._doReset()},update:function(messageUpdate){return this._append(messageUpdate),this._process(),this},finalize:function(messageUpdate){messageUpdate&&this._append(messageUpdate);var hash=this._doFinalize();return hash},blockSize:512/32,_createHelper:function(hasher){return function(message,cfg){return new hasher.init(cfg).finalize(message)}},_createHmacHelper:function(hasher){return function(message,key){return new C_algo.HMAC.init(hasher,key).finalize(message)}}}),C_algo=C.algo={};return C}(Math);return CryptoJS})}});var require_x64_core=__commonJS({"node_modules/crypto-js/x64-core.js"(exports,module){init_define_process_env();init_shim();(function(root,factory){typeof exports=="object"?module.exports=exports=factory(require_core3()):typeof define=="function"&&define.amd?define(["./core"],factory):factory(root.CryptoJS)})(exports,function(CryptoJS){return function(undefined2){var C=CryptoJS,C_lib=C.lib,Base=C_lib.Base,X32WordArray=C_lib.WordArray,C_x64=C.x64={},X64Word=C_x64.Word=Base.extend({init:function(high,low){this.high=high,this.low=low}}),X64WordArray=C_x64.WordArray=Base.extend({init:function(words,sigBytes){words=this.words=words||[],sigBytes!=undefined2?this.sigBytes=sigBytes:this.sigBytes=words.length*8},toX32:function(){for(var x64Words=this.words,x64WordsLength=x64Words.length,x32Words=[],i=0;i<x64WordsLength;i++){var x64Word=x64Words[i];x32Words.push(x64Word.high),x32Words.push(x64Word.low)}return X32WordArray.create(x32Words,this.sigBytes)},clone:function(){for(var clone=Base.clone.call(this),words=clone.words=this.words.slice(0),wordsLength=words.length,i=0;i<wordsLength;i++)words[i]=words[i].clone();return clone}})}(),CryptoJS})}});var require_lib_typedarrays=__commonJS({"node_modules/crypto-js/lib-typedarrays.js"(exports,module){init_define_process_env();init_shim();(function(root,factory){typeof exports=="object"?module.exports=exports=factory(require_core3()):typeof define=="function"&&define.amd?define(["./core"],factory):factory(root.CryptoJS)})(exports,function(CryptoJS){return function(){if(typeof ArrayBuffer=="function"){var C=CryptoJS,C_lib=C.lib,WordArray=C_lib.WordArray,superInit=WordArray.init,subInit=WordArray.init=function(typedArray){if(typedArray instanceof ArrayBuffer&&(typedArray=new Uint8Array(typedArray)),(typedArray instanceof Int8Array||typeof Uint8ClampedArray<"u"&&typedArray instanceof Uint8ClampedArray||typedArray instanceof Int16Array||typedArray instanceof Uint16Array||typedArray instanceof Int32Array||typedArray instanceof Uint32Array||typedArray instanceof Float32Array||typedArray instanceof Float64Array)&&(typedArray=new Uint8Array(typedArray.buffer,typedArray.byteOffset,typedArray.byteLength)),typedArray instanceof Uint8Array){for(var typedArrayByteLength=typedArray.byteLength,words=[],i=0;i<typedArrayByteLength;i++)words[i>>>2]|=typedArray[i]<<24-i%4*8;superInit.call(this,words,typedArrayByteLength)}else superInit.apply(this,arguments)};subInit.prototype=WordArray}}(),CryptoJS.lib.WordArray})}});var require_enc_utf16=__commonJS({"node_modules/crypto-js/enc-utf16.js"(exports,module){init_define_process_env();init_shim();(function(root,factory){typeof exports=="object"?module.exports=exports=factory(require_core3()):typeof define=="function"&&define.amd?define(["./core"],factory):factory(root.CryptoJS)})(exports,function(CryptoJS){return function(){var C=CryptoJS,C_lib=C.lib,WordArray=C_lib.WordArray,C_enc=C.enc,Utf16BE=C_enc.Utf16=C_enc.Utf16BE={stringify:function(wordArray){for(var words=wordArray.words,sigBytes=wordArray.sigBytes,utf16Chars=[],i=0;i<sigBytes;i+=2){var codePoint=words[i>>>2]>>>16-i%4*8&65535;utf16Chars.push(String.fromCharCode(codePoint))}return utf16Chars.join("")},parse:function(utf16Str){for(var utf16StrLength=utf16Str.length,words=[],i=0;i<utf16StrLength;i++)words[i>>>1]|=utf16Str.charCodeAt(i)<<16-i%2*16;return WordArray.create(words,utf16StrLength*2)}};C_enc.Utf16LE={stringify:function(wordArray){for(var words=wordArray.words,sigBytes=wordArray.sigBytes,utf16Chars=[],i=0;i<sigBytes;i+=2){var codePoint=swapEndian(words[i>>>2]>>>16-i%4*8&65535);utf16Chars.push(String.fromCharCode(codePoint))}return utf16Chars.join("")},parse:function(utf16Str){for(var utf16StrLength=utf16Str.length,words=[],i=0;i<utf16StrLength;i++)words[i>>>1]|=swapEndian(utf16Str.charCodeAt(i)<<16-i%2*16);return WordArray.create(words,utf16StrLength*2)}};function swapEndian(word){return word<<8&4278255360|word>>>8&16711935}}(),CryptoJS.enc.Utf16})}});var require_enc_base64=__commonJS({"node_modules/crypto-js/enc-base64.js"(exports,module){init_define_process_env();init_shim();(function(root,factory){typeof exports=="object"?module.exports=exports=factory(require_core3()):typeof define=="function"&&define.amd?define(["./core"],factory):factory(root.CryptoJS)})(exports,function(CryptoJS){return function(){var C=CryptoJS,C_lib=C.lib,WordArray=C_lib.WordArray,C_enc=C.enc,Base642=C_enc.Base64={stringify:function(wordArray){var words=wordArray.words,sigBytes=wordArray.sigBytes,map=this._map;wordArray.clamp();for(var base64Chars=[],i=0;i<sigBytes;i+=3)for(var byte1=words[i>>>2]>>>24-i%4*8&255,byte2=words[i+1>>>2]>>>24-(i+1)%4*8&255,byte3=words[i+2>>>2]>>>24-(i+2)%4*8&255,triplet=byte1<<16|byte2<<8|byte3,j=0;j<4&&i+j*.75<sigBytes;j++)base64Chars.push(map.charAt(triplet>>>6*(3-j)&63));var paddingChar=map.charAt(64);if(paddingChar)for(;base64Chars.length%4;)base64Chars.push(paddingChar);return base64Chars.join("")},parse:function(base64Str){var base64StrLength=base64Str.length,map=this._map,paddingChar=map.charAt(64);if(paddingChar){var paddingIndex=base64Str.indexOf(paddingChar);paddingIndex!=-1&&(base64StrLength=paddingIndex)}for(var words=[],nBytes=0,i=0;i<base64StrLength;i++)if(i%4){var bits1=map.indexOf(base64Str.charAt(i-1))<<i%4*2,bits2=map.indexOf(base64Str.charAt(i))>>>6-i%4*2;words[nBytes>>>2]|=(bits1|bits2)<<24-nBytes%4*8,nBytes++}return WordArray.create(words,nBytes)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),CryptoJS.enc.Base64})}});var require_md52=__commonJS({"node_modules/crypto-js/md5.js"(exports,module){init_define_process_env();init_shim();(function(root,factory){typeof exports=="object"?module.exports=exports=factory(require_core3()):typeof define=="function"&&define.amd?define(["./core"],factory):factory(root.CryptoJS)})(exports,function(CryptoJS){return function(Math2){var C=CryptoJS,C_lib=C.lib,WordArray=C_lib.WordArray,Hasher=C_lib.Hasher,C_algo=C.algo,T=[];(function(){for(var i=0;i<64;i++)T[i]=Math2.abs(Math2.sin(i+1))*4294967296|0})();var MD5=C_algo.MD5=Hasher.extend({_doReset:function(){this._hash=new WordArray.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(M,offset){for(var i=0;i<16;i++){var offset_i=offset+i,M_offset_i=M[offset_i];M[offset_i]=(M_offset_i<<8|M_offset_i>>>24)&16711935|(M_offset_i<<24|M_offset_i>>>8)&4278255360}var H=this._hash.words,M_offset_0=M[offset+0],M_offset_1=M[offset+1],M_offset_2=M[offset+2],M_offset_3=M[offset+3],M_offset_4=M[offset+4],M_offset_5=M[offset+5],M_offset_6=M[offset+6],M_offset_7=M[offset+7],M_offset_8=M[offset+8],M_offset_9=M[offset+9],M_offset_10=M[offset+10],M_offset_11=M[offset+11],M_offset_12=M[offset+12],M_offset_13=M[offset+13],M_offset_14=M[offset+14],M_offset_15=M[offset+15],a=H[0],b=H[1],c=H[2],d=H[3];a=FF(a,b,c,d,M_offset_0,7,T[0]),d=FF(d,a,b,c,M_offset_1,12,T[1]),c=FF(c,d,a,b,M_offset_2,17,T[2]),b=FF(b,c,d,a,M_offset_3,22,T[3]),a=FF(a,b,c,d,M_offset_4,7,T[4]),d=FF(d,a,b,c,M_offset_5,12,T[5]),c=FF(c,d,a,b,M_offset_6,17,T[6]),b=FF(b,c,d,a,M_offset_7,22,T[7]),a=FF(a,b,c,d,M_offset_8,7,T[8]),d=FF(d,a,b,c,M_offset_9,12,T[9]),c=FF(c,d,a,b,M_offset_10,17,T[10]),b=FF(b,c,d,a,M_offset_11,22,T[11]),a=FF(a,b,c,d,M_offset_12,7,T[12]),d=FF(d,a,b,c,M_offset_13,12,T[13]),c=FF(c,d,a,b,M_offset_14,17,T[14]),b=FF(b,c,d,a,M_offset_15,22,T[15]),a=GG(a,b,c,d,M_offset_1,5,T[16]),d=GG(d,a,b,c,M_offset_6,9,T[17]),c=GG(c,d,a,b,M_offset_11,14,T[18]),b=GG(b,c,d,a,M_offset_0,20,T[19]),a=GG(a,b,c,d,M_offset_5,5,T[20]),d=GG(d,a,b,c,M_offset_10,9,T[21]),c=GG(c,d,a,b,M_offset_15,14,T[22]),b=GG(b,c,d,a,M_offset_4,20,T[23]),a=GG(a,b,c,d,M_offset_9,5,T[24]),d=GG(d,a,b,c,M_offset_14,9,T[25]),c=GG(c,d,a,b,M_offset_3,14,T[26]),b=GG(b,c,d,a,M_offset_8,20,T[27]),a=GG(a,b,c,d,M_offset_13,5,T[28]),d=GG(d,a,b,c,M_offset_2,9,T[29]),c=GG(c,d,a,b,M_offset_7,14,T[30]),b=GG(b,c,d,a,M_offset_12,20,T[31]),a=HH(a,b,c,d,M_offset_5,4,T[32]),d=HH(d,a,b,c,M_offset_8,11,T[33]),c=HH(c,d,a,b,M_offset_11,16,T[34]),b=HH(b,c,d,a,M_offset_14,23,T[35]),a=HH(a,b,c,d,M_offset_1,4,T[36]),d=HH(d,a,b,c,M_offset_4,11,T[37]),c=HH(c,d,a,b,M_offset_7,16,T[38]),b=HH(b,c,d,a,M_offset_10,23,T[39]),a=HH(a,b,c,d,M_offset_13,4,T[40]),d=HH(d,a,b,c,M_offset_0,11,T[41]),c=HH(c,d,a,b,M_offset_3,16,T[42]),b=HH(b,c,d,a,M_offset_6,23,T[43]),a=HH(a,b,c,d,M_offset_9,4,T[44]),d=HH(d,a,b,c,M_offset_12,11,T[45]),c=HH(c,d,a,b,M_offset_15,16,T[46]),b=HH(b,c,d,a,M_offset_2,23,T[47]),a=II(a,b,c,d,M_offset_0,6,T[48]),d=II(d,a,b,c,M_offset_7,10,T[49]),c=II(c,d,a,b,M_offset_14,15,T[50]),b=II(b,c,d,a,M_offset_5,21,T[51]),a=II(a,b,c,d,M_offset_12,6,T[52]),d=II(d,a,b,c,M_offset_3,10,T[53]),c=II(c,d,a,b,M_offset_10,15,T[54]),b=II(b,c,d,a,M_offset_1,21,T[55]),a=II(a,b,c,d,M_offset_8,6,T[56]),d=II(d,a,b,c,M_offset_15,10,T[57]),c=II(c,d,a,b,M_offset_6,15,T[58]),b=II(b,c,d,a,M_offset_13,21,T[59]),a=II(a,b,c,d,M_offset_4,6,T[60]),d=II(d,a,b,c,M_offset_11,10,T[61]),c=II(c,d,a,b,M_offset_2,15,T[62]),b=II(b,c,d,a,M_offset_9,21,T[63]),H[0]=H[0]+a|0,H[1]=H[1]+b|0,H[2]=H[2]+c|0,H[3]=H[3]+d|0},_doFinalize:function(){var data=this._data,dataWords=data.words,nBitsTotal=this._nDataBytes*8,nBitsLeft=data.sigBytes*8;dataWords[nBitsLeft>>>5]|=128<<24-nBitsLeft%32;var nBitsTotalH=Math2.floor(nBitsTotal/4294967296),nBitsTotalL=nBitsTotal;dataWords[(nBitsLeft+64>>>9<<4)+15]=(nBitsTotalH<<8|nBitsTotalH>>>24)&16711935|(nBitsTotalH<<24|nBitsTotalH>>>8)&4278255360,dataWords[(nBitsLeft+64>>>9<<4)+14]=(nBitsTotalL<<8|nBitsTotalL>>>24)&16711935|(nBitsTotalL<<24|nBitsTotalL>>>8)&4278255360,data.sigBytes=(dataWords.length+1)*4,this._process();for(var hash=this._hash,H=hash.words,i=0;i<4;i++){var H_i=H[i];H[i]=(H_i<<8|H_i>>>24)&16711935|(H_i<<24|H_i>>>8)&4278255360}return hash},clone:function(){var clone=Hasher.clone.call(this);return clone._hash=this._hash.clone(),clone}});function FF(a,b,c,d,x,s,t){var n=a+(b&c|~b&d)+x+t;return(n<<s|n>>>32-s)+b}function GG(a,b,c,d,x,s,t){var n=a+(b&d|c&~d)+x+t;return(n<<s|n>>>32-s)+b}function HH(a,b,c,d,x,s,t){var n=a+(b^c^d)+x+t;return(n<<s|n>>>32-s)+b}function II(a,b,c,d,x,s,t){var n=a+(c^(b|~d))+x+t;return(n<<s|n>>>32-s)+b}C.MD5=Hasher._createHelper(MD5),C.HmacMD5=Hasher._createHmacHelper(MD5)}(Math),CryptoJS.MD5})}});var require_sha12=__commonJS({"node_modules/crypto-js/sha1.js"(exports,module){init_define_process_env();init_shim();(function(root,factory){typeof exports=="object"?module.exports=exports=factory(require_core3()):typeof define=="function"&&define.amd?define(["./core"],factory):factory(root.CryptoJS)})(exports,function(CryptoJS){return function(){var C=CryptoJS,C_lib=C.lib,WordArray=C_lib.WordArray,Hasher=C_lib.Hasher,C_algo=C.algo,W=[],SHA1=C_algo.SHA1=Hasher.extend({_doReset:function(){this._hash=new WordArray.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(M,offset){for(var H=this._hash.words,a=H[0],b=H[1],c=H[2],d=H[3],e=H[4],i=0;i<80;i++){if(i<16)W[i]=M[offset+i]|0;else{var n=W[i-3]^W[i-8]^W[i-14]^W[i-16];W[i]=n<<1|n>>>31}var t=(a<<5|a>>>27)+e+W[i];i<20?t+=(b&c|~b&d)+1518500249:i<40?t+=(b^c^d)+1859775393:i<60?t+=(b&c|b&d|c&d)-1894007588:t+=(b^c^d)-899497514,e=d,d=c,c=b<<30|b>>>2,b=a,a=t}H[0]=H[0]+a|0,H[1]=H[1]+b|0,H[2]=H[2]+c|0,H[3]=H[3]+d|0,H[4]=H[4]+e|0},_doFinalize:function(){var data=this._data,dataWords=data.words,nBitsTotal=this._nDataBytes*8,nBitsLeft=data.sigBytes*8;return dataWords[nBitsLeft>>>5]|=128<<24-nBitsLeft%32,dataWords[(nBitsLeft+64>>>9<<4)+14]=Math.floor(nBitsTotal/4294967296),dataWords[(nBitsLeft+64>>>9<<4)+15]=nBitsTotal,data.sigBytes=dataWords.length*4,this._process(),this._hash},clone:function(){var clone=Hasher.clone.call(this);return clone._hash=this._hash.clone(),clone}});C.SHA1=Hasher._createHelper(SHA1),C.HmacSHA1=Hasher._createHmacHelper(SHA1)}(),CryptoJS.SHA1})}});var require_sha2562=__commonJS({"node_modules/crypto-js/sha256.js"(exports,module){init_define_process_env();init_shim();(function(root,factory){typeof exports=="object"?module.exports=exports=factory(require_core3()):typeof define=="function"&&define.amd?define(["./core"],factory):factory(root.CryptoJS)})(exports,function(CryptoJS){return function(Math2){var C=CryptoJS,C_lib=C.lib,WordArray=C_lib.WordArray,Hasher=C_lib.Hasher,C_algo=C.algo,H=[],K=[];(function(){function isPrime(n2){for(var sqrtN=Math2.sqrt(n2),factor=2;factor<=sqrtN;factor++)if(!(n2%factor))return!1;return!0}function getFractionalBits(n2){return(n2-(n2|0))*4294967296|0}for(var n=2,nPrime=0;nPrime<64;)isPrime(n)&&(nPrime<8&&(H[nPrime]=getFractionalBits(Math2.pow(n,1/2))),K[nPrime]=getFractionalBits(Math2.pow(n,1/3)),nPrime++),n++})();var W=[],SHA256=C_algo.SHA256=Hasher.extend({_doReset:function(){this._hash=new WordArray.init(H.slice(0))},_doProcessBlock:function(M,offset){for(var H2=this._hash.words,a=H2[0],b=H2[1],c=H2[2],d=H2[3],e=H2[4],f=H2[5],g=H2[6],h=H2[7],i=0;i<64;i++){if(i<16)W[i]=M[offset+i]|0;else{var gamma0x=W[i-15],gamma0=(gamma0x<<25|gamma0x>>>7)^(gamma0x<<14|gamma0x>>>18)^gamma0x>>>3,gamma1x=W[i-2],gamma1=(gamma1x<<15|gamma1x>>>17)^(gamma1x<<13|gamma1x>>>19)^gamma1x>>>10;W[i]=gamma0+W[i-7]+gamma1+W[i-16]}var ch=e&f^~e&g,maj=a&b^a&c^b&c,sigma0=(a<<30|a>>>2)^(a<<19|a>>>13)^(a<<10|a>>>22),sigma1=(e<<26|e>>>6)^(e<<21|e>>>11)^(e<<7|e>>>25),t1=h+sigma1+ch+K[i]+W[i],t2=sigma0+maj;h=g,g=f,f=e,e=d+t1|0,d=c,c=b,b=a,a=t1+t2|0}H2[0]=H2[0]+a|0,H2[1]=H2[1]+b|0,H2[2]=H2[2]+c|0,H2[3]=H2[3]+d|0,H2[4]=H2[4]+e|0,H2[5]=H2[5]+f|0,H2[6]=H2[6]+g|0,H2[7]=H2[7]+h|0},_doFinalize:function(){var data=this._data,dataWords=data.words,nBitsTotal=this._nDataBytes*8,nBitsLeft=data.sigBytes*8;return dataWords[nBitsLeft>>>5]|=128<<24-nBitsLeft%32,dataWords[(nBitsLeft+64>>>9<<4)+14]=Math2.floor(nBitsTotal/4294967296),dataWords[(nBitsLeft+64>>>9<<4)+15]=nBitsTotal,data.sigBytes=dataWords.length*4,this._process(),this._hash},clone:function(){var clone=Hasher.clone.call(this);return clone._hash=this._hash.clone(),clone}});C.SHA256=Hasher._createHelper(SHA256),C.HmacSHA256=Hasher._createHmacHelper(SHA256)}(Math),CryptoJS.SHA256})}});var require_sha2242=__commonJS({"node_modules/crypto-js/sha224.js"(exports,module){init_define_process_env();init_shim();(function(root,factory,undef){typeof exports=="object"?module.exports=exports=factory(require_core3(),require_sha2562()):typeof define=="function"&&define.amd?define(["./core","./sha256"],factory):factory(root.CryptoJS)})(exports,function(CryptoJS){return function(){var C=CryptoJS,C_lib=C.lib,WordArray=C_lib.WordArray,C_algo=C.algo,SHA256=C_algo.SHA256,SHA224=C_algo.SHA224=SHA256.extend({_doReset:function(){this._hash=new WordArray.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var hash=SHA256._doFinalize.call(this);return hash.sigBytes-=4,hash}});C.SHA224=SHA256._createHelper(SHA224),C.HmacSHA224=SHA256._createHmacHelper(SHA224)}(),CryptoJS.SHA224})}});var require_sha5122=__commonJS({"node_modules/crypto-js/sha512.js"(exports,module){init_define_process_env();init_shim();(function(root,factory,undef){typeof exports=="object"?module.exports=exports=factory(require_core3(),require_x64_core()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],factory):factory(root.CryptoJS)})(exports,function(CryptoJS){return function(){var C=CryptoJS,C_lib=C.lib,Hasher=C_lib.Hasher,C_x64=C.x64,X64Word=C_x64.Word,X64WordArray=C_x64.WordArray,C_algo=C.algo;function X64Word_create(){return X64Word.create.apply(X64Word,arguments)}var K=[X64Word_create(1116352408,3609767458),X64Word_create(1899447441,602891725),X64Word_create(3049323471,3964484399),X64Word_create(3921009573,2173295548),X64Word_create(961987163,4081628472),X64Word_create(1508970993,3053834265),X64Word_create(2453635748,2937671579),X64Word_create(2870763221,3664609560),X64Word_create(3624381080,2734883394),X64Word_create(310598401,1164996542),X64Word_create(607225278,1323610764),X64Word_create(1426881987,3590304994),X64Word_create(1925078388,4068182383),X64Word_create(2162078206,991336113),X64Word_create(2614888103,633803317),X64Word_create(3248222580,3479774868),X64Word_create(3835390401,2666613458),X64Word_create(4022224774,944711139),X64Word_create(264347078,2341262773),X64Word_create(604807628,2007800933),X64Word_create(770255983,1495990901),X64Word_create(1249150122,1856431235),X64Word_create(1555081692,3175218132),X64Word_create(1996064986,2198950837),X64Word_create(2554220882,3999719339),X64Word_create(2821834349,766784016),X64Word_create(2952996808,2566594879),X64Word_create(3210313671,3203337956),X64Word_create(3336571891,1034457026),X64Word_create(3584528711,2466948901),X64Word_create(113926993,3758326383),X64Word_create(338241895,168717936),X64Word_create(666307205,1188179964),X64Word_create(773529912,1546045734),X64Word_create(1294757372,1522805485),X64Word_create(1396182291,2643833823),X64Word_create(1695183700,2343527390),X64Word_create(1986661051,1014477480),X64Word_create(2177026350,1206759142),X64Word_create(2456956037,344077627),X64Word_create(2730485921,1290863460),X64Word_create(2820302411,3158454273),X64Word_create(3259730800,3505952657),X64Word_create(3345764771,106217008),X64Word_create(3516065817,3606008344),X64Word_create(3600352804,1432725776),X64Word_create(4094571909,1467031594),X64Word_create(275423344,851169720),X64Word_create(430227734,3100823752),X64Word_create(506948616,1363258195),X64Word_create(659060556,3750685593),X64Word_create(883997877,3785050280),X64Word_create(958139571,3318307427),X64Word_create(1322822218,3812723403),X64Word_create(1537002063,2003034995),X64Word_create(1747873779,3602036899),X64Word_create(1955562222,1575990012),X64Word_create(2024104815,1125592928),X64Word_create(2227730452,2716904306),X64Word_create(2361852424,442776044),X64Word_create(2428436474,593698344),X64Word_create(2756734187,3733110249),X64Word_create(3204031479,2999351573),X64Word_create(3329325298,3815920427),X64Word_create(3391569614,3928383900),X64Word_create(3515267271,566280711),X64Word_create(3940187606,3454069534),X64Word_create(4118630271,4000239992),X64Word_create(116418474,1914138554),X64Word_create(174292421,2731055270),X64Word_create(289380356,3203993006),X64Word_create(460393269,320620315),X64Word_create(685471733,587496836),X64Word_create(852142971,1086792851),X64Word_create(1017036298,365543100),X64Word_create(1126000580,2618297676),X64Word_create(1288033470,3409855158),X64Word_create(1501505948,4234509866),X64Word_create(1607167915,987167468),X64Word_create(1816402316,1246189591)],W=[];(function(){for(var i=0;i<80;i++)W[i]=X64Word_create()})();var SHA512=C_algo.SHA512=Hasher.extend({_doReset:function(){this._hash=new X64WordArray.init([new X64Word.init(1779033703,4089235720),new X64Word.init(3144134277,2227873595),new X64Word.init(1013904242,4271175723),new X64Word.init(2773480762,1595750129),new X64Word.init(1359893119,2917565137),new X64Word.init(2600822924,725511199),new X64Word.init(528734635,4215389547),new X64Word.init(1541459225,327033209)])},_doProcessBlock:function(M,offset){for(var H=this._hash.words,H0=H[0],H1=H[1],H2=H[2],H3=H[3],H4=H[4],H5=H[5],H6=H[6],H7=H[7],H0h=H0.high,H0l=H0.low,H1h=H1.high,H1l=H1.low,H2h=H2.high,H2l=H2.low,H3h=H3.high,H3l=H3.low,H4h=H4.high,H4l=H4.low,H5h=H5.high,H5l=H5.low,H6h=H6.high,H6l=H6.low,H7h=H7.high,H7l=H7.low,ah=H0h,al=H0l,bh=H1h,bl=H1l,ch=H2h,cl=H2l,dh=H3h,dl=H3l,eh=H4h,el=H4l,fh=H5h,fl=H5l,gh=H6h,gl=H6l,hh=H7h,hl=H7l,i=0;i<80;i++){var Wi=W[i];if(i<16)var Wih=Wi.high=M[offset+i*2]|0,Wil=Wi.low=M[offset+i*2+1]|0;else{var gamma0x=W[i-15],gamma0xh=gamma0x.high,gamma0xl=gamma0x.low,gamma0h=(gamma0xh>>>1|gamma0xl<<31)^(gamma0xh>>>8|gamma0xl<<24)^gamma0xh>>>7,gamma0l=(gamma0xl>>>1|gamma0xh<<31)^(gamma0xl>>>8|gamma0xh<<24)^(gamma0xl>>>7|gamma0xh<<25),gamma1x=W[i-2],gamma1xh=gamma1x.high,gamma1xl=gamma1x.low,gamma1h=(gamma1xh>>>19|gamma1xl<<13)^(gamma1xh<<3|gamma1xl>>>29)^gamma1xh>>>6,gamma1l=(gamma1xl>>>19|gamma1xh<<13)^(gamma1xl<<3|gamma1xh>>>29)^(gamma1xl>>>6|gamma1xh<<26),Wi7=W[i-7],Wi7h=Wi7.high,Wi7l=Wi7.low,Wi16=W[i-16],Wi16h=Wi16.high,Wi16l=Wi16.low,Wil=gamma0l+Wi7l,Wih=gamma0h+Wi7h+(Wil>>>0<gamma0l>>>0?1:0),Wil=Wil+gamma1l,Wih=Wih+gamma1h+(Wil>>>0<gamma1l>>>0?1:0),Wil=Wil+Wi16l,Wih=Wih+Wi16h+(Wil>>>0<Wi16l>>>0?1:0);Wi.high=Wih,Wi.low=Wil}var chh=eh&fh^~eh&gh,chl=el&fl^~el&gl,majh=ah&bh^ah&ch^bh&ch,majl=al&bl^al&cl^bl&cl,sigma0h=(ah>>>28|al<<4)^(ah<<30|al>>>2)^(ah<<25|al>>>7),sigma0l=(al>>>28|ah<<4)^(al<<30|ah>>>2)^(al<<25|ah>>>7),sigma1h=(eh>>>14|el<<18)^(eh>>>18|el<<14)^(eh<<23|el>>>9),sigma1l=(el>>>14|eh<<18)^(el>>>18|eh<<14)^(el<<23|eh>>>9),Ki=K[i],Kih=Ki.high,Kil=Ki.low,t1l=hl+sigma1l,t1h=hh+sigma1h+(t1l>>>0<hl>>>0?1:0),t1l=t1l+chl,t1h=t1h+chh+(t1l>>>0<chl>>>0?1:0),t1l=t1l+Kil,t1h=t1h+Kih+(t1l>>>0<Kil>>>0?1:0),t1l=t1l+Wil,t1h=t1h+Wih+(t1l>>>0<Wil>>>0?1:0),t2l=sigma0l+majl,t2h=sigma0h+majh+(t2l>>>0<sigma0l>>>0?1:0);hh=gh,hl=gl,gh=fh,gl=fl,fh=eh,fl=el,el=dl+t1l|0,eh=dh+t1h+(el>>>0<dl>>>0?1:0)|0,dh=ch,dl=cl,ch=bh,cl=bl,bh=ah,bl=al,al=t1l+t2l|0,ah=t1h+t2h+(al>>>0<t1l>>>0?1:0)|0}H0l=H0.low=H0l+al,H0.high=H0h+ah+(H0l>>>0<al>>>0?1:0),H1l=H1.low=H1l+bl,H1.high=H1h+bh+(H1l>>>0<bl>>>0?1:0),H2l=H2.low=H2l+cl,H2.high=H2h+ch+(H2l>>>0<cl>>>0?1:0),H3l=H3.low=H3l+dl,H3.high=H3h+dh+(H3l>>>0<dl>>>0?1:0),H4l=H4.low=H4l+el,H4.high=H4h+eh+(H4l>>>0<el>>>0?1:0),H5l=H5.low=H5l+fl,H5.high=H5h+fh+(H5l>>>0<fl>>>0?1:0),H6l=H6.low=H6l+gl,H6.high=H6h+gh+(H6l>>>0<gl>>>0?1:0),H7l=H7.low=H7l+hl,H7.high=H7h+hh+(H7l>>>0<hl>>>0?1:0)},_doFinalize:function(){var data=this._data,dataWords=data.words,nBitsTotal=this._nDataBytes*8,nBitsLeft=data.sigBytes*8;dataWords[nBitsLeft>>>5]|=128<<24-nBitsLeft%32,dataWords[(nBitsLeft+128>>>10<<5)+30]=Math.floor(nBitsTotal/4294967296),dataWords[(nBitsLeft+128>>>10<<5)+31]=nBitsTotal,data.sigBytes=dataWords.length*4,this._process();var hash=this._hash.toX32();return hash},clone:function(){var clone=Hasher.clone.call(this);return clone._hash=this._hash.clone(),clone},blockSize:1024/32});C.SHA512=Hasher._createHelper(SHA512),C.HmacSHA512=Hasher._createHmacHelper(SHA512)}(),CryptoJS.SHA512})}});var require_sha3842=__commonJS({"node_modules/crypto-js/sha384.js"(exports,module){init_define_process_env();init_shim();(function(root,factory,undef){typeof exports=="object"?module.exports=exports=factory(require_core3(),require_x64_core(),require_sha5122()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./sha512"],factory):factory(root.CryptoJS)})(exports,function(CryptoJS){return function(){var C=CryptoJS,C_x64=C.x64,X64Word=C_x64.Word,X64WordArray=C_x64.WordArray,C_algo=C.algo,SHA512=C_algo.SHA512,SHA384=C_algo.SHA384=SHA512.extend({_doReset:function(){this._hash=new X64WordArray.init([new X64Word.init(3418070365,3238371032),new X64Word.init(1654270250,914150663),new X64Word.init(2438529370,812702999),new X64Word.init(355462360,4144912697),new X64Word.init(1731405415,4290775857),new X64Word.init(2394180231,1750603025),new X64Word.init(3675008525,1694076839),new X64Word.init(1203062813,3204075428)])},_doFinalize:function(){var hash=SHA512._doFinalize.call(this);return hash.sigBytes-=16,hash}});C.SHA384=SHA512._createHelper(SHA384),C.HmacSHA384=SHA512._createHmacHelper(SHA384)}(),CryptoJS.SHA384})}});var require_sha3=__commonJS({"node_modules/crypto-js/sha3.js"(exports,module){init_define_process_env();init_shim();(function(root,factory,undef){typeof exports=="object"?module.exports=exports=factory(require_core3(),require_x64_core()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],factory):factory(root.CryptoJS)})(exports,function(CryptoJS){return function(Math2){var C=CryptoJS,C_lib=C.lib,WordArray=C_lib.WordArray,Hasher=C_lib.Hasher,C_x64=C.x64,X64Word=C_x64.Word,C_algo=C.algo,RHO_OFFSETS=[],PI_INDEXES=[],ROUND_CONSTANTS=[];(function(){for(var x=1,y=0,t=0;t<24;t++){RHO_OFFSETS[x+5*y]=(t+1)*(t+2)/2%64;var newX=y%5,newY=(2*x+3*y)%5;x=newX,y=newY}for(var x=0;x<5;x++)for(var y=0;y<5;y++)PI_INDEXES[x+5*y]=y+(2*x+3*y)%5*5;for(var LFSR=1,i=0;i<24;i++){for(var roundConstantMsw=0,roundConstantLsw=0,j=0;j<7;j++){if(LFSR&1){var bitPosition=(1<<j)-1;bitPosition<32?roundConstantLsw^=1<<bitPosition:roundConstantMsw^=1<<bitPosition-32}LFSR&128?LFSR=LFSR<<1^113:LFSR<<=1}ROUND_CONSTANTS[i]=X64Word.create(roundConstantMsw,roundConstantLsw)}})();var T=[];(function(){for(var i=0;i<25;i++)T[i]=X64Word.create()})();var SHA3=C_algo.SHA3=Hasher.extend({cfg:Hasher.cfg.extend({outputLength:512}),_doReset:function(){for(var state=this._state=[],i=0;i<25;i++)state[i]=new X64Word.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(M,offset){for(var state=this._state,nBlockSizeLanes=this.blockSize/2,i=0;i<nBlockSizeLanes;i++){var M2i=M[offset+2*i],M2i1=M[offset+2*i+1];M2i=(M2i<<8|M2i>>>24)&16711935|(M2i<<24|M2i>>>8)&4278255360,M2i1=(M2i1<<8|M2i1>>>24)&16711935|(M2i1<<24|M2i1>>>8)&4278255360;var lane=state[i];lane.high^=M2i1,lane.low^=M2i}for(var round=0;round<24;round++){for(var x=0;x<5;x++){for(var tMsw=0,tLsw=0,y=0;y<5;y++){var lane=state[x+5*y];tMsw^=lane.high,tLsw^=lane.low}var Tx=T[x];Tx.high=tMsw,Tx.low=tLsw}for(var x=0;x<5;x++)for(var Tx4=T[(x+4)%5],Tx1=T[(x+1)%5],Tx1Msw=Tx1.high,Tx1Lsw=Tx1.low,tMsw=Tx4.high^(Tx1Msw<<1|Tx1Lsw>>>31),tLsw=Tx4.low^(Tx1Lsw<<1|Tx1Msw>>>31),y=0;y<5;y++){var lane=state[x+5*y];lane.high^=tMsw,lane.low^=tLsw}for(var laneIndex=1;laneIndex<25;laneIndex++){var lane=state[laneIndex],laneMsw=lane.high,laneLsw=lane.low,rhoOffset=RHO_OFFSETS[laneIndex];if(rhoOffset<32)var tMsw=laneMsw<<rhoOffset|laneLsw>>>32-rhoOffset,tLsw=laneLsw<<rhoOffset|laneMsw>>>32-rhoOffset;else var tMsw=laneLsw<<rhoOffset-32|laneMsw>>>64-rhoOffset,tLsw=laneMsw<<rhoOffset-32|laneLsw>>>64-rhoOffset;var TPiLane=T[PI_INDEXES[laneIndex]];TPiLane.high=tMsw,TPiLane.low=tLsw}var T0=T[0],state0=state[0];T0.high=state0.high,T0.low=state0.low;for(var x=0;x<5;x++)for(var y=0;y<5;y++){var laneIndex=x+5*y,lane=state[laneIndex],TLane=T[laneIndex],Tx1Lane=T[(x+1)%5+5*y],Tx2Lane=T[(x+2)%5+5*y];lane.high=TLane.high^~Tx1Lane.high&Tx2Lane.high,lane.low=TLane.low^~Tx1Lane.low&Tx2Lane.low}var lane=state[0],roundConstant=ROUND_CONSTANTS[round];lane.high^=roundConstant.high,lane.low^=roundConstant.low}},_doFinalize:function(){var data=this._data,dataWords=data.words,nBitsTotal=this._nDataBytes*8,nBitsLeft=data.sigBytes*8,blockSizeBits=this.blockSize*32;dataWords[nBitsLeft>>>5]|=1<<24-nBitsLeft%32,dataWords[(Math2.ceil((nBitsLeft+1)/blockSizeBits)*blockSizeBits>>>5)-1]|=128,data.sigBytes=dataWords.length*4,this._process();for(var state=this._state,outputLengthBytes=this.cfg.outputLength/8,outputLengthLanes=outputLengthBytes/8,hashWords=[],i=0;i<outputLengthLanes;i++){var lane=state[i],laneMsw=lane.high,laneLsw=lane.low;laneMsw=(laneMsw<<8|laneMsw>>>24)&16711935|(laneMsw<<24|laneMsw>>>8)&4278255360,laneLsw=(laneLsw<<8|laneLsw>>>24)&16711935|(laneLsw<<24|laneLsw>>>8)&4278255360,hashWords.push(laneLsw),hashWords.push(laneMsw)}return new WordArray.init(hashWords,outputLengthBytes)},clone:function(){for(var clone=Hasher.clone.call(this),state=clone._state=this._state.slice(0),i=0;i<25;i++)state[i]=state[i].clone();return clone}});C.SHA3=Hasher._createHelper(SHA3),C.HmacSHA3=Hasher._createHmacHelper(SHA3)}(Math),CryptoJS.SHA3})}});var require_ripemd1602=__commonJS({"node_modules/crypto-js/ripemd160.js"(exports,module){init_define_process_env();init_shim();(function(root,factory){typeof exports=="object"?module.exports=exports=factory(require_core3()):typeof define=="function"&&define.amd?define(["./core"],factory):factory(root.CryptoJS)})(exports,function(CryptoJS){return function(Math2){var C=CryptoJS,C_lib=C.lib,WordArray=C_lib.WordArray,Hasher=C_lib.Hasher,C_algo=C.algo,_zl=WordArray.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),_zr=WordArray.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),_sl=WordArray.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),_sr=WordArray.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),_hl=WordArray.create([0,1518500249,1859775393,2400959708,2840853838]),_hr=WordArray.create([1352829926,1548603684,1836072691,2053994217,0]),RIPEMD160=C_algo.RIPEMD160=Hasher.extend({_doReset:function(){this._hash=WordArray.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(M,offset){for(var i=0;i<16;i++){var offset_i=offset+i,M_offset_i=M[offset_i];M[offset_i]=(M_offset_i<<8|M_offset_i>>>24)&16711935|(M_offset_i<<24|M_offset_i>>>8)&4278255360}var H=this._hash.words,hl=_hl.words,hr=_hr.words,zl=_zl.words,zr=_zr.words,sl=_sl.words,sr=_sr.words,al,bl,cl,dl,el,ar,br,cr,dr,er;ar=al=H[0],br=bl=H[1],cr=cl=H[2],dr=dl=H[3],er=el=H[4];for(var t,i=0;i<80;i+=1)t=al+M[offset+zl[i]]|0,i<16?t+=f1(bl,cl,dl)+hl[0]:i<32?t+=f2(bl,cl,dl)+hl[1]:i<48?t+=f3(bl,cl,dl)+hl[2]:i<64?t+=f4(bl,cl,dl)+hl[3]:t+=f5(bl,cl,dl)+hl[4],t=t|0,t=rotl(t,sl[i]),t=t+el|0,al=el,el=dl,dl=rotl(cl,10),cl=bl,bl=t,t=ar+M[offset+zr[i]]|0,i<16?t+=f5(br,cr,dr)+hr[0]:i<32?t+=f4(br,cr,dr)+hr[1]:i<48?t+=f3(br,cr,dr)+hr[2]:i<64?t+=f2(br,cr,dr)+hr[3]:t+=f1(br,cr,dr)+hr[4],t=t|0,t=rotl(t,sr[i]),t=t+er|0,ar=er,er=dr,dr=rotl(cr,10),cr=br,br=t;t=H[1]+cl+dr|0,H[1]=H[2]+dl+er|0,H[2]=H[3]+el+ar|0,H[3]=H[4]+al+br|0,H[4]=H[0]+bl+cr|0,H[0]=t},_doFinalize:function(){var data=this._data,dataWords=data.words,nBitsTotal=this._nDataBytes*8,nBitsLeft=data.sigBytes*8;dataWords[nBitsLeft>>>5]|=128<<24-nBitsLeft%32,dataWords[(nBitsLeft+64>>>9<<4)+14]=(nBitsTotal<<8|nBitsTotal>>>24)&16711935|(nBitsTotal<<24|nBitsTotal>>>8)&4278255360,data.sigBytes=(dataWords.length+1)*4,this._process();for(var hash=this._hash,H=hash.words,i=0;i<5;i++){var H_i=H[i];H[i]=(H_i<<8|H_i>>>24)&16711935|(H_i<<24|H_i>>>8)&4278255360}return hash},clone:function(){var clone=Hasher.clone.call(this);return clone._hash=this._hash.clone(),clone}});function f1(x,y,z){return x^y^z}function f2(x,y,z){return x&y|~x&z}function f3(x,y,z){return(x|~y)^z}function f4(x,y,z){return x&z|y&~z}function f5(x,y,z){return x^(y|~z)}function rotl(x,n){return x<<n|x>>>32-n}C.RIPEMD160=Hasher._createHelper(RIPEMD160),C.HmacRIPEMD160=Hasher._createHmacHelper(RIPEMD160)}(Math),CryptoJS.RIPEMD160})}});var require_hmac=__commonJS({"node_modules/crypto-js/hmac.js"(exports,module){init_define_process_env();init_shim();(function(root,factory){typeof exports=="object"?module.exports=exports=factory(require_core3()):typeof define=="function"&&define.amd?define(["./core"],factory):factory(root.CryptoJS)})(exports,function(CryptoJS){(function(){var C=CryptoJS,C_lib=C.lib,Base=C_lib.Base,C_enc=C.enc,Utf8=C_enc.Utf8,C_algo=C.algo,HMAC=C_algo.HMAC=Base.extend({init:function(hasher,key){hasher=this._hasher=new hasher.init,typeof key=="string"&&(key=Utf8.parse(key));var hasherBlockSize=hasher.blockSize,hasherBlockSizeBytes=hasherBlockSize*4;key.sigBytes>hasherBlockSizeBytes&&(key=hasher.finalize(key)),key.clamp();for(var oKey=this._oKey=key.clone(),iKey=this._iKey=key.clone(),oKeyWords=oKey.words,iKeyWords=iKey.words,i=0;i<hasherBlockSize;i++)oKeyWords[i]^=1549556828,iKeyWords[i]^=909522486;oKey.sigBytes=iKey.sigBytes=hasherBlockSizeBytes,this.reset()},reset:function(){var hasher=this._hasher;hasher.reset(),hasher.update(this._iKey)},update:function(messageUpdate){return this._hasher.update(messageUpdate),this},finalize:function(messageUpdate){var hasher=this._hasher,innerHash=hasher.finalize(messageUpdate);hasher.reset();var hmac=hasher.finalize(this._oKey.clone().concat(innerHash));return hmac}})})()})}});var require_pbkdf2=__commonJS({"node_modules/crypto-js/pbkdf2.js"(exports,module){init_define_process_env();init_shim();(function(root,factory,undef){typeof exports=="object"?module.exports=exports=factory(require_core3(),require_sha12(),require_hmac()):typeof define=="function"&&define.amd?define(["./core","./sha1","./hmac"],factory):factory(root.CryptoJS)})(exports,function(CryptoJS){return function(){var C=CryptoJS,C_lib=C.lib,Base=C_lib.Base,WordArray=C_lib.WordArray,C_algo=C.algo,SHA1=C_algo.SHA1,HMAC=C_algo.HMAC,PBKDF2=C_algo.PBKDF2=Base.extend({cfg:Base.extend({keySize:128/32,hasher:SHA1,iterations:1}),init:function(cfg){this.cfg=this.cfg.extend(cfg)},compute:function(password,salt){for(var cfg=this.cfg,hmac=HMAC.create(cfg.hasher,password),derivedKey=WordArray.create(),blockIndex=WordArray.create([1]),derivedKeyWords=derivedKey.words,blockIndexWords=blockIndex.words,keySize=cfg.keySize,iterations=cfg.iterations;derivedKeyWords.length<keySize;){var block=hmac.update(salt).finalize(blockIndex);hmac.reset();for(var blockWords=block.words,blockWordsLength=blockWords.length,intermediate=block,i=1;i<iterations;i++){intermediate=hmac.finalize(intermediate),hmac.reset();for(var intermediateWords=intermediate.words,j=0;j<blockWordsLength;j++)blockWords[j]^=intermediateWords[j]}derivedKey.concat(block),blockIndexWords[0]++}return derivedKey.sigBytes=keySize*4,derivedKey}});C.PBKDF2=function(password,salt,cfg){return PBKDF2.create(cfg).compute(password,salt)}}(),CryptoJS.PBKDF2})}});var require_evpkdf=__commonJS({"node_modules/crypto-js/evpkdf.js"(exports,module){init_define_process_env();init_shim();(function(root,factory,undef){typeof exports=="object"?module.exports=exports=factory(require_core3(),require_sha12(),require_hmac()):typeof define=="function"&&define.amd?define(["./core","./sha1","./hmac"],factory):factory(root.CryptoJS)})(exports,function(CryptoJS){return function(){var C=CryptoJS,C_lib=C.lib,Base=C_lib.Base,WordArray=C_lib.WordArray,C_algo=C.algo,MD5=C_algo.MD5,EvpKDF=C_algo.EvpKDF=Base.extend({cfg:Base.extend({keySize:128/32,hasher:MD5,iterations:1}),init:function(cfg){this.cfg=this.cfg.extend(cfg)},compute:function(password,salt){for(var cfg=this.cfg,hasher=cfg.hasher.create(),derivedKey=WordArray.create(),derivedKeyWords=derivedKey.words,keySize=cfg.keySize,iterations=cfg.iterations;derivedKeyWords.length<keySize;){block&&hasher.update(block);var block=hasher.update(password).finalize(salt);hasher.reset();for(var i=1;i<iterations;i++)block=hasher.finalize(block),hasher.reset();derivedKey.concat(block)}return derivedKey.sigBytes=keySize*4,derivedKey}});C.EvpKDF=function(password,salt,cfg){return EvpKDF.create(cfg).compute(password,salt)}}(),CryptoJS.EvpKDF})}});var require_cipher_core=__commonJS({"node_modules/crypto-js/cipher-core.js"(exports,module){init_define_process_env();init_shim();(function(root,factory){typeof exports=="object"?module.exports=exports=factory(require_core3()):typeof define=="function"&&define.amd?define(["./core"],factory):factory(root.CryptoJS)})(exports,function(CryptoJS){CryptoJS.lib.Cipher||function(undefined2){var C=CryptoJS,C_lib=C.lib,Base=C_lib.Base,WordArray=C_lib.WordArray,BufferedBlockAlgorithm=C_lib.BufferedBlockAlgorithm,C_enc=C.enc,Utf8=C_enc.Utf8,Base642=C_enc.Base64,C_algo=C.algo,EvpKDF=C_algo.EvpKDF,Cipher=C_lib.Cipher=BufferedBlockAlgorithm.extend({cfg:Base.extend(),createEncryptor:function(key,cfg){return this.create(this._ENC_XFORM_MODE,key,cfg)},createDecryptor:function(key,cfg){return this.create(this._DEC_XFORM_MODE,key,cfg)},init:function(xformMode,key,cfg){this.cfg=this.cfg.extend(cfg),this._xformMode=xformMode,this._key=key,this.reset()},reset:function(){BufferedBlockAlgorithm.reset.call(this),this._doReset()},process:function(dataUpdate){return this._append(dataUpdate),this._process()},finalize:function(dataUpdate){dataUpdate&&this._append(dataUpdate);var finalProcessedData=this._doFinalize();return finalProcessedData},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function selectCipherStrategy(key){return typeof key=="string"?PasswordBasedCipher:SerializableCipher}return function(cipher){return{encrypt:function(message,key,cfg){return selectCipherStrategy(key).encrypt(cipher,message,key,cfg)},decrypt:function(ciphertext,key,cfg){return selectCipherStrategy(key).decrypt(cipher,ciphertext,key,cfg)}}}}()}),StreamCipher=C_lib.StreamCipher=Cipher.extend({_doFinalize:function(){var finalProcessedBlocks=this._process(!0);return finalProcessedBlocks},blockSize:1}),C_mode=C.mode={},BlockCipherMode=C_lib.BlockCipherMode=Base.extend({createEncryptor:function(cipher,iv){return this.Encryptor.create(cipher,iv)},createDecryptor:function(cipher,iv){return this.Decryptor.create(cipher,iv)},init:function(cipher,iv){this._cipher=cipher,this._iv=iv}}),CBC=C_mode.CBC=function(){var CBC2=BlockCipherMode.extend();CBC2.Encryptor=CBC2.extend({processBlock:function(words,offset){var cipher=this._cipher,blockSize=cipher.blockSize;xorBlock.call(this,words,offset,blockSize),cipher.encryptBlock(words,offset),this._prevBlock=words.slice(offset,offset+blockSize)}}),CBC2.Decryptor=CBC2.extend({processBlock:function(words,offset){var cipher=this._cipher,blockSize=cipher.blockSize,thisBlock=words.slice(offset,offset+blockSize);cipher.decryptBlock(words,offset),xorBlock.call(this,words,offset,blockSize),this._prevBlock=thisBlock}});function xorBlock(words,offset,blockSize){var iv=this._iv;if(iv){var block=iv;this._iv=undefined2}else var block=this._prevBlock;for(var i=0;i<blockSize;i++)words[offset+i]^=block[i]}return CBC2}(),C_pad=C.pad={},Pkcs7=C_pad.Pkcs7={pad:function(data,blockSize){for(var blockSizeBytes=blockSize*4,nPaddingBytes=blockSizeBytes-data.sigBytes%blockSizeBytes,paddingWord=nPaddingBytes<<24|nPaddingBytes<<16|nPaddingBytes<<8|nPaddingBytes,paddingWords=[],i=0;i<nPaddingBytes;i+=4)paddingWords.push(paddingWord);var padding=WordArray.create(paddingWords,nPaddingBytes);data.concat(padding)},unpad:function(data){var nPaddingBytes=data.words[data.sigBytes-1>>>2]&255;data.sigBytes-=nPaddingBytes}},BlockCipher=C_lib.BlockCipher=Cipher.extend({cfg:Cipher.cfg.extend({mode:CBC,padding:Pkcs7}),reset:function(){Cipher.reset.call(this);var cfg=this.cfg,iv=cfg.iv,mode=cfg.mode;if(this._xformMode==this._ENC_XFORM_MODE)var modeCreator=mode.createEncryptor;else{var modeCreator=mode.createDecryptor;this._minBufferSize=1}this._mode=modeCreator.call(mode,this,iv&&iv.words)},_doProcessBlock:function(words,offset){this._mode.processBlock(words,offset)},_doFinalize:function(){var padding=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){padding.pad(this._data,this.blockSize);var finalProcessedBlocks=this._process(!0)}else{var finalProcessedBlocks=this._process(!0);padding.unpad(finalProcessedBlocks)}return finalProcessedBlocks},blockSize:128/32}),CipherParams=C_lib.CipherParams=Base.extend({init:function(cipherParams){this.mixIn(cipherParams)},toString:function(formatter){return(formatter||this.formatter).stringify(this)}}),C_format=C.format={},OpenSSLFormatter=C_format.OpenSSL={stringify:function(cipherParams){var ciphertext=cipherParams.ciphertext,salt=cipherParams.salt;if(salt)var wordArray=WordArray.create([1398893684,1701076831]).concat(salt).concat(ciphertext);else var wordArray=ciphertext;return wordArray.toString(Base642)},parse:function(openSSLStr){var ciphertext=Base642.parse(openSSLStr),ciphertextWords=ciphertext.words;if(ciphertextWords[0]==1398893684&&ciphertextWords[1]==1701076831){var salt=WordArray.create(ciphertextWords.slice(2,4));ciphertextWords.splice(0,4),ciphertext.sigBytes-=16}return CipherParams.create({ciphertext,salt})}},SerializableCipher=C_lib.SerializableCipher=Base.extend({cfg:Base.extend({format:OpenSSLFormatter}),encrypt:function(cipher,message,key,cfg){cfg=this.cfg.extend(cfg);var encryptor=cipher.createEncryptor(key,cfg),ciphertext=encryptor.finalize(message),cipherCfg=encryptor.cfg;return CipherParams.create({ciphertext,key,iv:cipherCfg.iv,algorithm:cipher,mode:cipherCfg.mode,padding:cipherCfg.padding,blockSize:cipher.blockSize,formatter:cfg.format})},decrypt:function(cipher,ciphertext,key,cfg){cfg=this.cfg.extend(cfg),ciphertext=this._parse(ciphertext,cfg.format);var plaintext=cipher.createDecryptor(key,cfg).finalize(ciphertext.ciphertext);return plaintext},_parse:function(ciphertext,format){return typeof ciphertext=="string"?format.parse(ciphertext,this):ciphertext}}),C_kdf=C.kdf={},OpenSSLKdf=C_kdf.OpenSSL={execute:function(password,keySize,ivSize,salt){salt||(salt=WordArray.random(64/8));var key=EvpKDF.create({keySize:keySize+ivSize}).compute(password,salt),iv=WordArray.create(key.words.slice(keySize),ivSize*4);return key.sigBytes=keySize*4,CipherParams.create({key,iv,salt})}},PasswordBasedCipher=C_lib.PasswordBasedCipher=SerializableCipher.extend({cfg:SerializableCipher.cfg.extend({kdf:OpenSSLKdf}),encrypt:function(cipher,message,password,cfg){cfg=this.cfg.extend(cfg);var derivedParams=cfg.kdf.execute(password,cipher.keySize,cipher.ivSize);cfg.iv=derivedParams.iv;var ciphertext=SerializableCipher.encrypt.call(this,cipher,message,derivedParams.key,cfg);return ciphertext.mixIn(derivedParams),ciphertext},decrypt:function(cipher,ciphertext,password,cfg){cfg=this.cfg.extend(cfg),ciphertext=this._parse(ciphertext,cfg.format);var derivedParams=cfg.kdf.execute(password,cipher.keySize,cipher.ivSize,ciphertext.salt);cfg.iv=derivedParams.iv;var plaintext=SerializableCipher.decrypt.call(this,cipher,ciphertext,derivedParams.key,cfg);return plaintext}})}()})}});var require_mode_cfb=__commonJS({"node_modules/crypto-js/mode-cfb.js"(exports,module){init_define_process_env();init_shim();(function(root,factory,undef){typeof exports=="object"?module.exports=exports=factory(require_core3(),require_cipher_core()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],factory):factory(root.CryptoJS)})(exports,function(CryptoJS){return CryptoJS.mode.CFB=function(){var CFB=CryptoJS.lib.BlockCipherMode.extend();CFB.Encryptor=CFB.extend({processBlock:function(words,offset){var cipher=this._cipher,blockSize=cipher.blockSize;generateKeystreamAndEncrypt.call(this,words,offset,blockSize,cipher),this._prevBlock=words.slice(offset,offset+blockSize)}}),CFB.Decryptor=CFB.extend({processBlock:function(words,offset){var cipher=this._cipher,blockSize=cipher.blockSize,thisBlock=words.slice(offset,offset+blockSize);generateKeystreamAndEncrypt.call(this,words,offset,blockSize,cipher),this._prevBlock=thisBlock}});function generateKeystreamAndEncrypt(words,offset,blockSize,cipher){var iv=this._iv;if(iv){var keystream=iv.slice(0);this._iv=void 0}else var keystream=this._prevBlock;cipher.encryptBlock(keystream,0);for(var i=0;i<blockSize;i++)words[offset+i]^=keystream[i]}return CFB}(),CryptoJS.mode.CFB})}});var require_mode_ctr=__commonJS({"node_modules/crypto-js/mode-ctr.js"(exports,module){init_define_process_env();init_shim();(function(root,factory,undef){typeof exports=="object"?module.exports=exports=factory(require_core3(),require_cipher_core()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],factory):factory(root.CryptoJS)})(exports,function(CryptoJS){return CryptoJS.mode.CTR=function(){var CTR=CryptoJS.lib.BlockCipherMode.extend(),Encryptor=CTR.Encryptor=CTR.extend({processBlock:function(words,offset){var cipher=this._cipher,blockSize=cipher.blockSize,iv=this._iv,counter2=this._counter;iv&&(counter2=this._counter=iv.slice(0),this._iv=void 0);var keystream=counter2.slice(0);cipher.encryptBlock(keystream,0),counter2[blockSize-1]=counter2[blockSize-1]+1|0;for(var i=0;i<blockSize;i++)words[offset+i]^=keystream[i]}});return CTR.Decryptor=Encryptor,CTR}(),CryptoJS.mode.CTR})}});var require_mode_ctr_gladman=__commonJS({"node_modules/crypto-js/mode-ctr-gladman.js"(exports,module){init_define_process_env();init_shim();(function(root,factory,undef){typeof exports=="object"?module.exports=exports=factory(require_core3(),require_cipher_core()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],factory):factory(root.CryptoJS)})(exports,function(CryptoJS){return CryptoJS.mode.CTRGladman=function(){var CTRGladman=CryptoJS.lib.BlockCipherMode.extend();function incWord(word){if((word>>24&255)===255){var b1=word>>16&255,b2=word>>8&255,b3=word&255;b1===255?(b1=0,b2===255?(b2=0,b3===255?b3=0:++b3):++b2):++b1,word=0,word+=b1<<16,word+=b2<<8,word+=b3}else word+=1<<24;return word}function incCounter(counter2){return(counter2[0]=incWord(counter2[0]))===0&&(counter2[1]=incWord(counter2[1])),counter2}var Encryptor=CTRGladman.Encryptor=CTRGladman.extend({processBlock:function(words,offset){var cipher=this._cipher,blockSize=cipher.blockSize,iv=this._iv,counter2=this._counter;iv&&(counter2=this._counter=iv.slice(0),this._iv=void 0),incCounter(counter2);var keystream=counter2.slice(0);cipher.encryptBlock(keystream,0);for(var i=0;i<blockSize;i++)words[offset+i]^=keystream[i]}});return CTRGladman.Decryptor=Encryptor,CTRGladman}(),CryptoJS.mode.CTRGladman})}});var require_mode_ofb=__commonJS({"node_modules/crypto-js/mode-ofb.js"(exports,module){init_define_process_env();init_shim();(function(root,factory,undef){typeof exports=="object"?module.exports=exports=factory(require_core3(),require_cipher_core()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],factory):factory(root.CryptoJS)})(exports,function(CryptoJS){return CryptoJS.mode.OFB=function(){var OFB=CryptoJS.lib.BlockCipherMode.extend(),Encryptor=OFB.Encryptor=OFB.extend({processBlock:function(words,offset){var cipher=this._cipher,blockSize=cipher.blockSize,iv=this._iv,keystream=this._keystream;iv&&(keystream=this._keystream=iv.slice(0),this._iv=void 0),cipher.encryptBlock(keystream,0);for(var i=0;i<blockSize;i++)words[offset+i]^=keystream[i]}});return OFB.Decryptor=Encryptor,OFB}(),CryptoJS.mode.OFB})}});var require_mode_ecb=__commonJS({"node_modules/crypto-js/mode-ecb.js"(exports,module){init_define_process_env();init_shim();(function(root,factory,undef){typeof exports=="object"?module.exports=exports=factory(require_core3(),require_cipher_core()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],factory):factory(root.CryptoJS)})(exports,function(CryptoJS){return CryptoJS.mode.ECB=function(){var ECB=CryptoJS.lib.BlockCipherMode.extend();return ECB.Encryptor=ECB.extend({processBlock:function(words,offset){this._cipher.encryptBlock(words,offset)}}),ECB.Decryptor=ECB.extend({processBlock:function(words,offset){this._cipher.decryptBlock(words,offset)}}),ECB}(),CryptoJS.mode.ECB})}});var require_pad_ansix923=__commonJS({"node_modules/crypto-js/pad-ansix923.js"(exports,module){init_define_process_env();init_shim();(function(root,factory,undef){typeof exports=="object"?module.exports=exports=factory(require_core3(),require_cipher_core()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],factory):factory(root.CryptoJS)})(exports,function(CryptoJS){return CryptoJS.pad.AnsiX923={pad:function(data,blockSize){var dataSigBytes=data.sigBytes,blockSizeBytes=blockSize*4,nPaddingBytes=blockSizeBytes-dataSigBytes%blockSizeBytes,lastBytePos=dataSigBytes+nPaddingBytes-1;data.clamp(),data.words[lastBytePos>>>2]|=nPaddingBytes<<24-lastBytePos%4*8,data.sigBytes+=nPaddingBytes},unpad:function(data){var nPaddingBytes=data.words[data.sigBytes-1>>>2]&255;data.sigBytes-=nPaddingBytes}},CryptoJS.pad.Ansix923})}});var require_pad_iso10126=__commonJS({"node_modules/crypto-js/pad-iso10126.js"(exports,module){init_define_process_env();init_shim();(function(root,factory,undef){typeof exports=="object"?module.exports=exports=factory(require_core3(),require_cipher_core()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],factory):factory(root.CryptoJS)})(exports,function(CryptoJS){return CryptoJS.pad.Iso10126={pad:function(data,blockSize){var blockSizeBytes=blockSize*4,nPaddingBytes=blockSizeBytes-data.sigBytes%blockSizeBytes;data.concat(CryptoJS.lib.WordArray.random(nPaddingBytes-1)).concat(CryptoJS.lib.WordArray.create([nPaddingBytes<<24],1))},unpad:function(data){var nPaddingBytes=data.words[data.sigBytes-1>>>2]&255;data.sigBytes-=nPaddingBytes}},CryptoJS.pad.Iso10126})}});var require_pad_iso97971=__commonJS({"node_modules/crypto-js/pad-iso97971.js"(exports,module){init_define_process_env();init_shim();(function(root,factory,undef){typeof exports=="object"?module.exports=exports=factory(require_core3(),require_cipher_core()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],factory):factory(root.CryptoJS)})(exports,function(CryptoJS){return CryptoJS.pad.Iso97971={pad:function(data,blockSize){data.concat(CryptoJS.lib.WordArray.create([2147483648],1)),CryptoJS.pad.ZeroPadding.pad(data,blockSize)},unpad:function(data){CryptoJS.pad.ZeroPadding.unpad(data),data.sigBytes--}},CryptoJS.pad.Iso97971})}});var require_pad_zeropadding=__commonJS({"node_modules/crypto-js/pad-zeropadding.js"(exports,module){init_define_process_env();init_shim();(function(root,factory,undef){typeof exports=="object"?module.exports=exports=factory(require_core3(),require_cipher_core()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],factory):factory(root.CryptoJS)})(exports,function(CryptoJS){return CryptoJS.pad.ZeroPadding={pad:function(data,blockSize){var blockSizeBytes=blockSize*4;data.clamp(),data.sigBytes+=blockSizeBytes-(data.sigBytes%blockSizeBytes||blockSizeBytes)},unpad:function(data){for(var dataWords=data.words,i=data.sigBytes-1;!(dataWords[i>>>2]>>>24-i%4*8&255);)i--;data.sigBytes=i+1}},CryptoJS.pad.ZeroPadding})}});var require_pad_nopadding=__commonJS({"node_modules/crypto-js/pad-nopadding.js"(exports,module){init_define_process_env();init_shim();(function(root,factory,undef){typeof exports=="object"?module.exports=exports=factory(require_core3(),require_cipher_core()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],factory):factory(root.CryptoJS)})(exports,function(CryptoJS){return CryptoJS.pad.NoPadding={pad:function(){},unpad:function(){}},CryptoJS.pad.NoPadding})}});var require_format_hex=__commonJS({"node_modules/crypto-js/format-hex.js"(exports,module){init_define_process_env();init_shim();(function(root,factory,undef){typeof exports=="object"?module.exports=exports=factory(require_core3(),require_cipher_core()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],factory):factory(root.CryptoJS)})(exports,function(CryptoJS){return function(undefined2){var C=CryptoJS,C_lib=C.lib,CipherParams=C_lib.CipherParams,C_enc=C.enc,Hex=C_enc.Hex,C_format=C.format,HexFormatter=C_format.Hex={stringify:function(cipherParams){return cipherParams.ciphertext.toString(Hex)},parse:function(input){var ciphertext=Hex.parse(input);return CipherParams.create({ciphertext})}}}(),CryptoJS.format.Hex})}});var require_aes=__commonJS({"node_modules/crypto-js/aes.js"(exports,module){init_define_process_env();init_shim();(function(root,factory,undef){typeof exports=="object"?module.exports=exports=factory(require_core3(),require_enc_base64(),require_md52(),require_evpkdf(),require_cipher_core()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],factory):factory(root.CryptoJS)})(exports,function(CryptoJS){return function(){var C=CryptoJS,C_lib=C.lib,BlockCipher=C_lib.BlockCipher,C_algo=C.algo,SBOX=[],INV_SBOX=[],SUB_MIX_0=[],SUB_MIX_1=[],SUB_MIX_2=[],SUB_MIX_3=[],INV_SUB_MIX_0=[],INV_SUB_MIX_1=[],INV_SUB_MIX_2=[],INV_SUB_MIX_3=[];(function(){for(var d=[],i=0;i<256;i++)i<128?d[i]=i<<1:d[i]=i<<1^283;for(var x=0,xi=0,i=0;i<256;i++){var sx=xi^xi<<1^xi<<2^xi<<3^xi<<4;sx=sx>>>8^sx&255^99,SBOX[x]=sx,INV_SBOX[sx]=x;var x2=d[x],x4=d[x2],x8=d[x4],t=d[sx]*257^sx*16843008;SUB_MIX_0[x]=t<<24|t>>>8,SUB_MIX_1[x]=t<<16|t>>>16,SUB_MIX_2[x]=t<<8|t>>>24,SUB_MIX_3[x]=t;var t=x8*16843009^x4*65537^x2*257^x*16843008;INV_SUB_MIX_0[sx]=t<<24|t>>>8,INV_SUB_MIX_1[sx]=t<<16|t>>>16,INV_SUB_MIX_2[sx]=t<<8|t>>>24,INV_SUB_MIX_3[sx]=t,x?(x=x2^d[d[d[x8^x2]]],xi^=d[d[xi]]):x=xi=1}})();var RCON=[0,1,2,4,8,16,32,64,128,27,54],AES=C_algo.AES=BlockCipher.extend({_doReset:function(){for(var key=this._key,keyWords=key.words,keySize=key.sigBytes/4,nRounds=this._nRounds=keySize+6,ksRows=(nRounds+1)*4,keySchedule=this._keySchedule=[],ksRow=0;ksRow<ksRows;ksRow++)if(ksRow<keySize)keySchedule[ksRow]=keyWords[ksRow];else{var t=keySchedule[ksRow-1];ksRow%keySize?keySize>6&&ksRow%keySize==4&&(t=SBOX[t>>>24]<<24|SBOX[t>>>16&255]<<16|SBOX[t>>>8&255]<<8|SBOX[t&255]):(t=t<<8|t>>>24,t=SBOX[t>>>24]<<24|SBOX[t>>>16&255]<<16|SBOX[t>>>8&255]<<8|SBOX[t&255],t^=RCON[ksRow/keySize|0]<<24),keySchedule[ksRow]=keySchedule[ksRow-keySize]^t}for(var invKeySchedule=this._invKeySchedule=[],invKsRow=0;invKsRow<ksRows;invKsRow++){var ksRow=ksRows-invKsRow;if(invKsRow%4)var t=keySchedule[ksRow];else var t=keySchedule[ksRow-4];invKsRow<4||ksRow<=4?invKeySchedule[invKsRow]=t:invKeySchedule[invKsRow]=INV_SUB_MIX_0[SBOX[t>>>24]]^INV_SUB_MIX_1[SBOX[t>>>16&255]]^INV_SUB_MIX_2[SBOX[t>>>8&255]]^INV_SUB_MIX_3[SBOX[t&255]]}},encryptBlock:function(M,offset){this._doCryptBlock(M,offset,this._keySchedule,SUB_MIX_0,SUB_MIX_1,SUB_MIX_2,SUB_MIX_3,SBOX)},decryptBlock:function(M,offset){var t=M[offset+1];M[offset+1]=M[offset+3],M[offset+3]=t,this._doCryptBlock(M,offset,this._invKeySchedule,INV_SUB_MIX_0,INV_SUB_MIX_1,INV_SUB_MIX_2,INV_SUB_MIX_3,INV_SBOX);var t=M[offset+1];M[offset+1]=M[offset+3],M[offset+3]=t},_doCryptBlock:function(M,offset,keySchedule,SUB_MIX_02,SUB_MIX_12,SUB_MIX_22,SUB_MIX_32,SBOX2){for(var nRounds=this._nRounds,s0=M[offset]^keySchedule[0],s1=M[offset+1]^keySchedule[1],s2=M[offset+2]^keySchedule[2],s3=M[offset+3]^keySchedule[3],ksRow=4,round=1;round<nRounds;round++){var t0=SUB_MIX_02[s0>>>24]^SUB_MIX_12[s1>>>16&255]^SUB_MIX_22[s2>>>8&255]^SUB_MIX_32[s3&255]^keySchedule[ksRow++],t1=SUB_MIX_02[s1>>>24]^SUB_MIX_12[s2>>>16&255]^SUB_MIX_22[s3>>>8&255]^SUB_MIX_32[s0&255]^keySchedule[ksRow++],t2=SUB_MIX_02[s2>>>24]^SUB_MIX_12[s3>>>16&255]^SUB_MIX_22[s0>>>8&255]^SUB_MIX_32[s1&255]^keySchedule[ksRow++],t3=SUB_MIX_02[s3>>>24]^SUB_MIX_12[s0>>>16&255]^SUB_MIX_22[s1>>>8&255]^SUB_MIX_32[s2&255]^keySchedule[ksRow++];s0=t0,s1=t1,s2=t2,s3=t3}var t0=(SBOX2[s0>>>24]<<24|SBOX2[s1>>>16&255]<<16|SBOX2[s2>>>8&255]<<8|SBOX2[s3&255])^keySchedule[ksRow++],t1=(SBOX2[s1>>>24]<<24|SBOX2[s2>>>16&255]<<16|SBOX2[s3>>>8&255]<<8|SBOX2[s0&255])^keySchedule[ksRow++],t2=(SBOX2[s2>>>24]<<24|SBOX2[s3>>>16&255]<<16|SBOX2[s0>>>8&255]<<8|SBOX2[s1&255])^keySchedule[ksRow++],t3=(SBOX2[s3>>>24]<<24|SBOX2[s0>>>16&255]<<16|SBOX2[s1>>>8&255]<<8|SBOX2[s2&255])^keySchedule[ksRow++];M[offset]=t0,M[offset+1]=t1,M[offset+2]=t2,M[offset+3]=t3},keySize:256/32});C.AES=BlockCipher._createHelper(AES)}(),CryptoJS.AES})}});var require_tripledes=__commonJS({"node_modules/crypto-js/tripledes.js"(exports,module){init_define_process_env();init_shim();(function(root,factory,undef){typeof exports=="object"?module.exports=exports=factory(require_core3(),require_enc_base64(),require_md52(),require_evpkdf(),require_cipher_core()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],factory):factory(root.CryptoJS)})(exports,function(CryptoJS){return function(){var C=CryptoJS,C_lib=C.lib,WordArray=C_lib.WordArray,BlockCipher=C_lib.BlockCipher,C_algo=C.algo,PC1=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],PC2=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],BIT_SHIFTS=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],SBOX_P=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],SBOX_MASK=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],DES=C_algo.DES=BlockCipher.extend({_doReset:function(){for(var key=this._key,keyWords=key.words,keyBits=[],i=0;i<56;i++){var keyBitPos=PC1[i]-1;keyBits[i]=keyWords[keyBitPos>>>5]>>>31-keyBitPos%32&1}for(var subKeys=this._subKeys=[],nSubKey=0;nSubKey<16;nSubKey++){for(var subKey=subKeys[nSubKey]=[],bitShift=BIT_SHIFTS[nSubKey],i=0;i<24;i++)subKey[i/6|0]|=keyBits[(PC2[i]-1+bitShift)%28]<<31-i%6,subKey[4+(i/6|0)]|=keyBits[28+(PC2[i+24]-1+bitShift)%28]<<31-i%6;subKey[0]=subKey[0]<<1|subKey[0]>>>31;for(var i=1;i<7;i++)subKey[i]=subKey[i]>>>(i-1)*4+3;subKey[7]=subKey[7]<<5|subKey[7]>>>27}for(var invSubKeys=this._invSubKeys=[],i=0;i<16;i++)invSubKeys[i]=subKeys[15-i]},encryptBlock:function(M,offset){this._doCryptBlock(M,offset,this._subKeys)},decryptBlock:function(M,offset){this._doCryptBlock(M,offset,this._invSubKeys)},_doCryptBlock:function(M,offset,subKeys){this._lBlock=M[offset],this._rBlock=M[offset+1],exchangeLR.call(this,4,252645135),exchangeLR.call(this,16,65535),exchangeRL.call(this,2,858993459),exchangeRL.call(this,8,16711935),exchangeLR.call(this,1,1431655765);for(var round=0;round<16;round++){for(var subKey=subKeys[round],lBlock=this._lBlock,rBlock=this._rBlock,f=0,i=0;i<8;i++)f|=SBOX_P[i][((rBlock^subKey[i])&SBOX_MASK[i])>>>0];this._lBlock=rBlock,this._rBlock=lBlock^f}var t=this._lBlock;this._lBlock=this._rBlock,this._rBlock=t,exchangeLR.call(this,1,1431655765),exchangeRL.call(this,8,16711935),exchangeRL.call(this,2,858993459),exchangeLR.call(this,16,65535),exchangeLR.call(this,4,252645135),M[offset]=this._lBlock,M[offset+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function exchangeLR(offset,mask){var t=(this._lBlock>>>offset^this._rBlock)&mask;this._rBlock^=t,this._lBlock^=t<<offset}function exchangeRL(offset,mask){var t=(this._rBlock>>>offset^this._lBlock)&mask;this._lBlock^=t,this._rBlock^=t<<offset}C.DES=BlockCipher._createHelper(DES);var TripleDES=C_algo.TripleDES=BlockCipher.extend({_doReset:function(){var key=this._key,keyWords=key.words;this._des1=DES.createEncryptor(WordArray.create(keyWords.slice(0,2))),this._des2=DES.createEncryptor(WordArray.create(keyWords.slice(2,4))),this._des3=DES.createEncryptor(WordArray.create(keyWords.slice(4,6)))},encryptBlock:function(M,offset){this._des1.encryptBlock(M,offset),this._des2.decryptBlock(M,offset),this._des3.encryptBlock(M,offset)},decryptBlock:function(M,offset){this._des3.decryptBlock(M,offset),this._des2.encryptBlock(M,offset),this._des1.decryptBlock(M,offset)},keySize:192/32,ivSize:64/32,blockSize:64/32});C.TripleDES=BlockCipher._createHelper(TripleDES)}(),CryptoJS.TripleDES})}});var require_rc4=__commonJS({"node_modules/crypto-js/rc4.js"(exports,module){init_define_process_env();init_shim();(function(root,factory,undef){typeof exports=="object"?module.exports=exports=factory(require_core3(),require_enc_base64(),require_md52(),require_evpkdf(),require_cipher_core()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],factory):factory(root.CryptoJS)})(exports,function(CryptoJS){return function(){var C=CryptoJS,C_lib=C.lib,StreamCipher=C_lib.StreamCipher,C_algo=C.algo,RC4=C_algo.RC4=StreamCipher.extend({_doReset:function(){for(var key=this._key,keyWords=key.words,keySigBytes=key.sigBytes,S=this._S=[],i=0;i<256;i++)S[i]=i;for(var i=0,j=0;i<256;i++){var keyByteIndex=i%keySigBytes,keyByte=keyWords[keyByteIndex>>>2]>>>24-keyByteIndex%4*8&255;j=(j+S[i]+keyByte)%256;var t=S[i];S[i]=S[j],S[j]=t}this._i=this._j=0},_doProcessBlock:function(M,offset){M[offset]^=generateKeystreamWord.call(this)},keySize:256/32,ivSize:0});function generateKeystreamWord(){for(var S=this._S,i=this._i,j=this._j,keystreamWord=0,n=0;n<4;n++){i=(i+1)%256,j=(j+S[i])%256;var t=S[i];S[i]=S[j],S[j]=t,keystreamWord|=S[(S[i]+S[j])%256]<<24-n*8}return this._i=i,this._j=j,keystreamWord}C.RC4=StreamCipher._createHelper(RC4);var RC4Drop=C_algo.RC4Drop=RC4.extend({cfg:RC4.cfg.extend({drop:192}),_doReset:function(){RC4._doReset.call(this);for(var i=this.cfg.drop;i>0;i--)generateKeystreamWord.call(this)}});C.RC4Drop=StreamCipher._createHelper(RC4Drop)}(),CryptoJS.RC4})}});var require_rabbit=__commonJS({"node_modules/crypto-js/rabbit.js"(exports,module){init_define_process_env();init_shim();(function(root,factory,undef){typeof exports=="object"?module.exports=exports=factory(require_core3(),require_enc_base64(),require_md52(),require_evpkdf(),require_cipher_core()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],factory):factory(root.CryptoJS)})(exports,function(CryptoJS){return function(){var C=CryptoJS,C_lib=C.lib,StreamCipher=C_lib.StreamCipher,C_algo=C.algo,S=[],C_=[],G=[],Rabbit=C_algo.Rabbit=StreamCipher.extend({_doReset:function(){for(var K=this._key.words,iv=this.cfg.iv,i=0;i<4;i++)K[i]=(K[i]<<8|K[i]>>>24)&16711935|(K[i]<<24|K[i]>>>8)&4278255360;var X=this._X=[K[0],K[3]<<16|K[2]>>>16,K[1],K[0]<<16|K[3]>>>16,K[2],K[1]<<16|K[0]>>>16,K[3],K[2]<<16|K[1]>>>16],C2=this._C=[K[2]<<16|K[2]>>>16,K[0]&4294901760|K[1]&65535,K[3]<<16|K[3]>>>16,K[1]&4294901760|K[2]&65535,K[0]<<16|K[0]>>>16,K[2]&4294901760|K[3]&65535,K[1]<<16|K[1]>>>16,K[3]&4294901760|K[0]&65535];this._b=0;for(var i=0;i<4;i++)nextState.call(this);for(var i=0;i<8;i++)C2[i]^=X[i+4&7];if(iv){var IV=iv.words,IV_0=IV[0],IV_1=IV[1],i0=(IV_0<<8|IV_0>>>24)&16711935|(IV_0<<24|IV_0>>>8)&4278255360,i2=(IV_1<<8|IV_1>>>24)&16711935|(IV_1<<24|IV_1>>>8)&4278255360,i1=i0>>>16|i2&4294901760,i3=i2<<16|i0&65535;C2[0]^=i0,C2[1]^=i1,C2[2]^=i2,C2[3]^=i3,C2[4]^=i0,C2[5]^=i1,C2[6]^=i2,C2[7]^=i3;for(var i=0;i<4;i++)nextState.call(this)}},_doProcessBlock:function(M,offset){var X=this._X;nextState.call(this),S[0]=X[0]^X[5]>>>16^X[3]<<16,S[1]=X[2]^X[7]>>>16^X[5]<<16,S[2]=X[4]^X[1]>>>16^X[7]<<16,S[3]=X[6]^X[3]>>>16^X[1]<<16;for(var i=0;i<4;i++)S[i]=(S[i]<<8|S[i]>>>24)&16711935|(S[i]<<24|S[i]>>>8)&4278255360,M[offset+i]^=S[i]},blockSize:128/32,ivSize:64/32});function nextState(){for(var X=this._X,C2=this._C,i=0;i<8;i++)C_[i]=C2[i];C2[0]=C2[0]+1295307597+this._b|0,C2[1]=C2[1]+3545052371+(C2[0]>>>0<C_[0]>>>0?1:0)|0,C2[2]=C2[2]+886263092+(C2[1]>>>0<C_[1]>>>0?1:0)|0,C2[3]=C2[3]+1295307597+(C2[2]>>>0<C_[2]>>>0?1:0)|0,C2[4]=C2[4]+3545052371+(C2[3]>>>0<C_[3]>>>0?1:0)|0,C2[5]=C2[5]+886263092+(C2[4]>>>0<C_[4]>>>0?1:0)|0,C2[6]=C2[6]+1295307597+(C2[5]>>>0<C_[5]>>>0?1:0)|0,C2[7]=C2[7]+3545052371+(C2[6]>>>0<C_[6]>>>0?1:0)|0,this._b=C2[7]>>>0<C_[7]>>>0?1:0;for(var i=0;i<8;i++){var gx=X[i]+C2[i],ga=gx&65535,gb=gx>>>16,gh=((ga*ga>>>17)+ga*gb>>>15)+gb*gb,gl=((gx&4294901760)*gx|0)+((gx&65535)*gx|0);G[i]=gh^gl}X[0]=G[0]+(G[7]<<16|G[7]>>>16)+(G[6]<<16|G[6]>>>16)|0,X[1]=G[1]+(G[0]<<8|G[0]>>>24)+G[7]|0,X[2]=G[2]+(G[1]<<16|G[1]>>>16)+(G[0]<<16|G[0]>>>16)|0,X[3]=G[3]+(G[2]<<8|G[2]>>>24)+G[1]|0,X[4]=G[4]+(G[3]<<16|G[3]>>>16)+(G[2]<<16|G[2]>>>16)|0,X[5]=G[5]+(G[4]<<8|G[4]>>>24)+G[3]|0,X[6]=G[6]+(G[5]<<16|G[5]>>>16)+(G[4]<<16|G[4]>>>16)|0,X[7]=G[7]+(G[6]<<8|G[6]>>>24)+G[5]|0}C.Rabbit=StreamCipher._createHelper(Rabbit)}(),CryptoJS.Rabbit})}});var require_rabbit_legacy=__commonJS({"node_modules/crypto-js/rabbit-legacy.js"(exports,module){init_define_process_env();init_shim();(function(root,factory,undef){typeof exports=="object"?module.exports=exports=factory(require_core3(),require_enc_base64(),require_md52(),require_evpkdf(),require_cipher_core()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],factory):factory(root.CryptoJS)})(exports,function(CryptoJS){return function(){var C=CryptoJS,C_lib=C.lib,StreamCipher=C_lib.StreamCipher,C_algo=C.algo,S=[],C_=[],G=[],RabbitLegacy=C_algo.RabbitLegacy=StreamCipher.extend({_doReset:function(){var K=this._key.words,iv=this.cfg.iv,X=this._X=[K[0],K[3]<<16|K[2]>>>16,K[1],K[0]<<16|K[3]>>>16,K[2],K[1]<<16|K[0]>>>16,K[3],K[2]<<16|K[1]>>>16],C2=this._C=[K[2]<<16|K[2]>>>16,K[0]&4294901760|K[1]&65535,K[3]<<16|K[3]>>>16,K[1]&4294901760|K[2]&65535,K[0]<<16|K[0]>>>16,K[2]&4294901760|K[3]&65535,K[1]<<16|K[1]>>>16,K[3]&4294901760|K[0]&65535];this._b=0;for(var i=0;i<4;i++)nextState.call(this);for(var i=0;i<8;i++)C2[i]^=X[i+4&7];if(iv){var IV=iv.words,IV_0=IV[0],IV_1=IV[1],i0=(IV_0<<8|IV_0>>>24)&16711935|(IV_0<<24|IV_0>>>8)&4278255360,i2=(IV_1<<8|IV_1>>>24)&16711935|(IV_1<<24|IV_1>>>8)&4278255360,i1=i0>>>16|i2&4294901760,i3=i2<<16|i0&65535;C2[0]^=i0,C2[1]^=i1,C2[2]^=i2,C2[3]^=i3,C2[4]^=i0,C2[5]^=i1,C2[6]^=i2,C2[7]^=i3;for(var i=0;i<4;i++)nextState.call(this)}},_doProcessBlock:function(M,offset){var X=this._X;nextState.call(this),S[0]=X[0]^X[5]>>>16^X[3]<<16,S[1]=X[2]^X[7]>>>16^X[5]<<16,S[2]=X[4]^X[1]>>>16^X[7]<<16,S[3]=X[6]^X[3]>>>16^X[1]<<16;for(var i=0;i<4;i++)S[i]=(S[i]<<8|S[i]>>>24)&16711935|(S[i]<<24|S[i]>>>8)&4278255360,M[offset+i]^=S[i]},blockSize:128/32,ivSize:64/32});function nextState(){for(var X=this._X,C2=this._C,i=0;i<8;i++)C_[i]=C2[i];C2[0]=C2[0]+1295307597+this._b|0,C2[1]=C2[1]+3545052371+(C2[0]>>>0<C_[0]>>>0?1:0)|0,C2[2]=C2[2]+886263092+(C2[1]>>>0<C_[1]>>>0?1:0)|0,C2[3]=C2[3]+1295307597+(C2[2]>>>0<C_[2]>>>0?1:0)|0,C2[4]=C2[4]+3545052371+(C2[3]>>>0<C_[3]>>>0?1:0)|0,C2[5]=C2[5]+886263092+(C2[4]>>>0<C_[4]>>>0?1:0)|0,C2[6]=C2[6]+1295307597+(C2[5]>>>0<C_[5]>>>0?1:0)|0,C2[7]=C2[7]+3545052371+(C2[6]>>>0<C_[6]>>>0?1:0)|0,this._b=C2[7]>>>0<C_[7]>>>0?1:0;for(var i=0;i<8;i++){var gx=X[i]+C2[i],ga=gx&65535,gb=gx>>>16,gh=((ga*ga>>>17)+ga*gb>>>15)+gb*gb,gl=((gx&4294901760)*gx|0)+((gx&65535)*gx|0);G[i]=gh^gl}X[0]=G[0]+(G[7]<<16|G[7]>>>16)+(G[6]<<16|G[6]>>>16)|0,X[1]=G[1]+(G[0]<<8|G[0]>>>24)+G[7]|0,X[2]=G[2]+(G[1]<<16|G[1]>>>16)+(G[0]<<16|G[0]>>>16)|0,X[3]=G[3]+(G[2]<<8|G[2]>>>24)+G[1]|0,X[4]=G[4]+(G[3]<<16|G[3]>>>16)+(G[2]<<16|G[2]>>>16)|0,X[5]=G[5]+(G[4]<<8|G[4]>>>24)+G[3]|0,X[6]=G[6]+(G[5]<<16|G[5]>>>16)+(G[4]<<16|G[4]>>>16)|0,X[7]=G[7]+(G[6]<<8|G[6]>>>24)+G[5]|0}C.RabbitLegacy=StreamCipher._createHelper(RabbitLegacy)}(),CryptoJS.RabbitLegacy})}});var require_crypto_js=__commonJS({"node_modules/crypto-js/index.js"(exports,module){init_define_process_env();init_shim();(function(root,factory,undef){typeof exports=="object"?module.exports=exports=factory(require_core3(),require_x64_core(),require_lib_typedarrays(),require_enc_utf16(),require_enc_base64(),require_md52(),require_sha12(),require_sha2562(),require_sha2242(),require_sha5122(),require_sha3842(),require_sha3(),require_ripemd1602(),require_hmac(),require_pbkdf2(),require_evpkdf(),require_cipher_core(),require_mode_cfb(),require_mode_ctr(),require_mode_ctr_gladman(),require_mode_ofb(),require_mode_ecb(),require_pad_ansix923(),require_pad_iso10126(),require_pad_iso97971(),require_pad_zeropadding(),require_pad_nopadding(),require_format_hex(),require_aes(),require_tripledes(),require_rc4(),require_rabbit(),require_rabbit_legacy()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy"],factory):root.CryptoJS=factory(root.CryptoJS)})(exports,function(CryptoJS){return CryptoJS})}});var require_precondition=__commonJS({"node_modules/pbkdf2/lib/precondition.js"(exports,module){init_define_process_env();init_shim();var MAX_ALLOC=Math.pow(2,30)-1;module.exports=function(iterations,keylen){if(typeof iterations!="number")throw new TypeError("Iterations not a number");if(iterations<0)throw new TypeError("Bad iterations");if(typeof keylen!="number")throw new TypeError("Key length not a number");if(keylen<0||keylen>MAX_ALLOC||keylen!==keylen)throw new TypeError("Bad key length")}}});var require_default_encoding=__commonJS({"node_modules/pbkdf2/lib/default-encoding.js"(exports,module){init_define_process_env();init_shim();var defaultEncoding;window.process&&window.process.browser?defaultEncoding="utf-8":window.process&&window.process.version?(pVersionMajor=parseInt(import_process.default.version.split(".")[0].slice(1),10),defaultEncoding=pVersionMajor>=6?"utf-8":"binary"):defaultEncoding="utf-8";var pVersionMajor;module.exports=defaultEncoding}});var require_md53=__commonJS({"node_modules/create-hash/md5.js"(exports,module){init_define_process_env();init_shim();var MD5=require_md5();module.exports=function(buffer){return new MD5().update(buffer).digest()}}});var require_to_buffer=__commonJS({"node_modules/pbkdf2/lib/to-buffer.js"(exports,module){init_define_process_env();init_shim();var Buffer3=require_safe_buffer().Buffer;module.exports=function(thing,encoding,name){if(Buffer3.isBuffer(thing))return thing;if(typeof thing=="string")return Buffer3.from(thing,encoding);if(ArrayBuffer.isView(thing))return Buffer3.from(thing.buffer);throw new TypeError(name+" must be a string, a Buffer, a typed array or a DataView")}}});var require_sync_browser=__commonJS({"node_modules/pbkdf2/lib/sync-browser.js"(exports,module){init_define_process_env();init_shim();var md5=require_md53(),RIPEMD160=require_ripemd160(),sha=require_sha2(),Buffer3=require_safe_buffer().Buffer,checkParameters=require_precondition(),defaultEncoding=require_default_encoding(),toBuffer=require_to_buffer(),ZEROS=Buffer3.alloc(128),sizes={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function Hmac(alg,key,saltLen){var hash=getDigest(alg),blocksize=alg==="sha512"||alg==="sha384"?128:64;key.length>blocksize?key=hash(key):key.length<blocksize&&(key=Buffer3.concat([key,ZEROS],blocksize));for(var ipad=Buffer3.allocUnsafe(blocksize+sizes[alg]),opad=Buffer3.allocUnsafe(blocksize+sizes[alg]),i=0;i<blocksize;i++)ipad[i]=key[i]^54,opad[i]=key[i]^92;var ipad1=Buffer3.allocUnsafe(blocksize+saltLen+4);ipad.copy(ipad1,0,0,blocksize),this.ipad1=ipad1,this.ipad2=ipad,this.opad=opad,this.alg=alg,this.blocksize=blocksize,this.hash=hash,this.size=sizes[alg]}Hmac.prototype.run=function(data,ipad){data.copy(ipad,this.blocksize);var h=this.hash(ipad);return h.copy(this.opad,this.blocksize),this.hash(this.opad)};function getDigest(alg){function shaFunc(data){return sha(alg).update(data).digest()}function rmd160Func(data){return new RIPEMD160().update(data).digest()}return alg==="rmd160"||alg==="ripemd160"?rmd160Func:alg==="md5"?md5:shaFunc}function pbkdf2(password,salt,iterations,keylen,digest){checkParameters(iterations,keylen),password=toBuffer(password,defaultEncoding,"Password"),salt=toBuffer(salt,defaultEncoding,"Salt"),digest=digest||"sha1";var hmac=new Hmac(digest,password,salt.length),DK=Buffer3.allocUnsafe(keylen),block1=Buffer3.allocUnsafe(salt.length+4);salt.copy(block1,0,0,salt.length);for(var destPos=0,hLen=sizes[digest],l=Math.ceil(keylen/hLen),i=1;i<=l;i++){block1.writeUInt32BE(i,salt.length);for(var T=hmac.run(block1,hmac.ipad1),U=T,j=1;j<iterations;j++){U=hmac.run(U,hmac.ipad2);for(var k=0;k<hLen;k++)T[k]^=U[k]}T.copy(DK,destPos),destPos+=hLen}return DK}module.exports=pbkdf2}});var require_async2=__commonJS({"node_modules/pbkdf2/lib/async.js"(exports,module){init_define_process_env();init_shim();var Buffer3=require_safe_buffer().Buffer,checkParameters=require_precondition(),defaultEncoding=require_default_encoding(),sync=require_sync_browser(),toBuffer=require_to_buffer(),ZERO_BUF,subtle=window.crypto&&window.crypto.subtle,toBrowser={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},checks=[];function checkNative(algo){if(window.process&&!window.process.browser||!subtle||!subtle.importKey||!subtle.deriveBits)return Promise.resolve(!1);if(checks[algo]!==void 0)return checks[algo];ZERO_BUF=ZERO_BUF||Buffer3.alloc(8);var prom=browserPbkdf2(ZERO_BUF,ZERO_BUF,10,128,algo).then(function(){return!0}).catch(function(){return!1});return checks[algo]=prom,prom}var nextTick;function getNextTick(){return nextTick||(window.process&&window.process.nextTick?nextTick=window.process.nextTick:window.queueMicrotask?nextTick=window.queueMicrotask:window.setImmediate?nextTick=window.setImmediate:nextTick=window.setTimeout,nextTick)}function browserPbkdf2(password,salt,iterations,length,algo){return subtle.importKey("raw",password,{name:"PBKDF2"},!1,["deriveBits"]).then(function(key){return subtle.deriveBits({name:"PBKDF2",salt,iterations,hash:{name:algo}},key,length<<3)}).then(function(res){return Buffer3.from(res)})}function resolvePromise(promise,callback){promise.then(function(out){getNextTick()(function(){callback(null,out)})},function(e){getNextTick()(function(){callback(e)})})}module.exports=function(password,salt,iterations,keylen,digest,callback){typeof digest=="function"&&(callback=digest,digest=void 0),digest=digest||"sha1";var algo=toBrowser[digest.toLowerCase()];if(!algo||typeof window.Promise!="function"){getNextTick()(function(){var out;try{out=sync(password,salt,iterations,keylen,digest)}catch(e){return callback(e)}callback(null,out)});return}if(checkParameters(iterations,keylen),password=toBuffer(password,defaultEncoding,"Password"),salt=toBuffer(salt,defaultEncoding,"Salt"),typeof callback!="function")throw new Error("No callback provided to pbkdf2");resolvePromise(checkNative(algo).then(function(resp){return resp?browserPbkdf2(password,salt,iterations,keylen,algo):sync(password,salt,iterations,keylen,digest)}),callback)}}});var require_browser4=__commonJS({"node_modules/pbkdf2/browser.js"(exports){init_define_process_env();init_shim();exports.pbkdf2=require_async2();exports.pbkdf2Sync=require_sync_browser()}});var require_obfuscate=__commonJS({"lib-browser-old/db/obfuscate.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.encode_data=void 0;require_es_json_stringify();require_es_regexp_to_string();var _cryptoJs=_interopRequireDefault(require_crypto_js()),pbkdf2=_interopRequireWildcard(require_browser4()),timestamp=_interopRequireWildcard(require_timestamp());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var encode_data=(data,appname)=>{let v="1",cur_timestamp=String(timestamp.timestamp()),timestamp_version="".concat(cur_timestamp,"_").concat(v),key=appname+cur_timestamp,iv=String(Math.random());return{z:encode(key,iv,JSON.stringify(data),appname),y:encode(appname,"po9",timestamp_version,appname),x:encode(appname,"fl1",iv,appname)}};exports.encode_data=encode_data;function encode(key,iv,text,appname){return key=pbkdf2.pbkdf2Sync(key,appname,7,32,"md5"),iv=pbkdf2.pbkdf2Sync(iv,appname,7,16,"md5"),_cryptoJs.default.AES.encrypt(text,_cryptoJs.default.lib.WordArray.create(key),{iv:_cryptoJs.default.lib.WordArray.create(iv),mode:_cryptoJs.default.mode.CBC,padding:_cryptoJs.default.pad.Pkcs7}).toString()}}});var require_cookies=__commonJS({"lib-browser-old/shared/cookies.js"(exports){"use strict";init_define_process_env();init_shim();var locations_consts=require_locations(),configuration=require_client_config2(),cookies=exports;cookies.uid_cookie_name=function(appname,app_version,temp_db){var _ref,_ref2,_configuration$cookie;let cn_prefix=(_ref=(_ref2=(_configuration$cookie=configuration.cookie_name_prefix)!=null?_configuration$cookie:configuration.environment_name)!=null?_ref2:configuration.env)!=null?_ref:"";return appname+"_u1"+(app_version!==locations_consts.LIVE_VERSION?"_"+app_version:"")+cn_prefix+(temp_db?"_"+temp_db:"")};cookies.sid_cookie_name=function(appname,app_version,temp_db){var _ref3,_ref4,_configuration$cookie2;let cn_prefix=(_ref3=(_ref4=(_configuration$cookie2=configuration.cookie_name_prefix)!=null?_configuration$cookie2:configuration.environment_name)!=null?_ref4:configuration.env)!=null?_ref3:"";return appname+"_"+app_version+"_u2"+cn_prefix+(temp_db?"_"+temp_db:"")};cookies.debug_mode_cookie_name=appname=>"".concat(appname,"_debug_mode");cookies.firebase_cookie_name=(appname,fb_name)=>appname+"-"+fb_name}});var require_client_firebase=__commonJS({"lib-browser-old/db/client_firebase.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.get_firebase=get_firebase;exports.get_token_expiration=void 0;exports.reauth=reauth;var u=_interopRequireWildcard(require_u2()),_lib=_interopRequireDefault(require_lib()),configuration=_interopRequireWildcard(require_client_config2()),cookies=_interopRequireWildcard(require_cookies());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var FB_NAME="firebase_workflow";typeof window<"u"&&window.firebase!=null&&window.firebase.initializeApp(configuration.firebase_app_config);var _ready_keys={};_ready_keys.firebase_workflow=u.MakeSwitch(null,"firebase_workflow ready key");function get_firebase(){let promise=u.Promise(null,"get workflow firebase");return u.WaitFor(_ready_keys.firebase_workflow,()=>{promise.resolve(window.firebase.database().ref())}),promise}var get_token_expiration=()=>window.firebase.auth().currentUser.getIdTokenResult().then(tokenInfo=>Date.parse(tokenInfo.expirationTime));exports.get_token_expiration=get_token_expiration;var _old_tokens={};function reauth(){let promise=u.Promise(null,"reauthing to firebase");if(!u.cookies_enabled())return promise.reject("cookies disabled"),promise;let cookie_name=cookies.firebase_cookie_name((0,_lib.default)().appname(),FB_NAME),token=u.readCookie(cookie_name);if(typeof token!="string"){let err=new u.ExpectedError("Reauthed to firebase but cookie did not contain a valid token",{cookie_name,token,cookieEnabled:navigator.cookieEnabled,dck:document.cookie});promise.reject(err)}else token!==_old_tokens[FB_NAME]?(_old_tokens[FB_NAME]=token,window.firebase.auth().signInWithCustomToken(token).then(()=>{console.log("authorized successfully for "+FB_NAME),_ready_keys[FB_NAME].turn_on(),promise.resolve()}).catch(err=>{promise.reject(err)})):promise.resolve();return promise}}});var require_ClientDBObject=__commonJS({"lib-browser-old/db/values/ClientDBObject.js"(exports,module){"use strict";init_define_process_env();init_shim();var db=require_db2(),db_utils=require_db_utils(),ClientDBNode=require_ClientDBNode().default,ClientDBObject=class _ClientDBObject extends ClientDBNode{constructor(id,db2){super(void 0,void 0,db2),this.id=id}ignore_privacy(){return this}delete(){this.db._delete_local(this.id)}is_equal_to(other_object){return!(other_object instanceof _ClientDBObject)||this.db!==other_object.db?!1:this.id===other_object.id}};(function(){for(let k in db_utils.ObjectBase){let v=db_utils.ObjectBase[k];ClientDBObject.prototype[k]=v}})();module.exports=db.ClientDBObject=ClientDBObject}});var require_languages=__commonJS({"lib-browser-old/languages.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_regexp_exec();require_es_string_split();require_es_error_cause();require_es_object_entries();require_es_json_stringify();var b_object=require_b_object(),errors=require_errors(),mode_check=require_mode_check(),safe_require=require_safe_require(),appquery=require_appquery(),btypes=require_btypes(),logger=require_logger(),Lib=require_lib(),btype_ids=require_btype_ids(),apps_utilities=require_apps_utilities(),languages=exports;safe_require.safe_register("./languages",languages);languages.available_languages=available_languages;languages.is_language_available=is_language_available;languages.get_runmode_language_data=get_runmode_language_data;languages.get_user_language_field=get_user_language_field;languages.app_language=app_language;languages.language_data=language_data;languages.get_text=get_text;languages.get_iso_code=get_iso_code;languages.format_iso_code_for_browser=format_iso_code_for_browser;languages.is_rtl=is_rtl;languages.iso_lookup_language=iso_lookup_language;languages.add_built_ins=add_built_ins;languages.get_built_in_json_from_data=get_built_in_json_from_data;languages.get_language_data=get_language_data;languages.get_languages_data=get_languages_data;var LANGUAGE_DATA_TYPE_TO_GETTER_FUNCTION={language:languages.get_server_languages_no_cache,translation:languages.get_all_languages_translations_object_no_cache,application_message:languages.get_editor_app_text_data_no_cache},LANGUAGE_DATA_TYPE_TO_KEY=Object.freeze({language:"server_languages",translation:"server_translations",application_message:"server_application_messages"});languages.LANGUAGE_DATA_TYPE_TO_GETTER_FUNCTION=LANGUAGE_DATA_TYPE_TO_GETTER_FUNCTION;languages.LANGUAGE_DATA_TYPE_TO_KEY=LANGUAGE_DATA_TYPE_TO_KEY;function available_languages(){return Object.keys(languages.get_languages_data())}function is_language_available(name){return languages.get_languages_data()[name]!=null}function get_runmode_language_data(language){if(mode_check.on_client())return window.language_data}function get_user_language_field(){let app=Lib().app(),field=app.get_public_setting("language_field");return field&&app.custom_type("user").field(field).exists()?field:null}function app_language(no_default){var _Lib$location,_Lib$location$get_que,_Lib$location$get_que2,_Lib$location$get_que3,_Lib$location$get_que4;function fix_spelling(val){return val==="portugese"?"portuguese":val}function confirm_available(language){return language=fix_spelling(language),language&&languages.is_language_available(language)?language:no_default?null:"en_us"}if(Lib().is_edit_mode())return confirm_available(appquery.get_public_setting("app_language"));if(mode_check.on_client()&&window.application_language)return window.application_language}function language_data(no_default){return languages.get_runmode_language_data(languages.app_language())}function get_text(plugin,name){let language=Lib().app_language(),user_setting_text=Lib().app().get_public_setting("text.".concat(language,".").concat(plugin,".").concat(name));if(mode_check.on_client()){let text=user_setting_text;if(text==null){var _languages$get_langua,_languages$get_langua2;if(text=(_languages$get_langua=languages.get_language_data(language))==null||(_languages$get_langua2=_languages$get_langua[plugin])==null?void 0:_languages$get_langua2[name],!text){var _languages$get_langua3,_languages$get_langua4,_languages$get_langua5;logger.owner_warn("Missing translation text",{display:"No translation available yet for text ".concat(plugin,"-").concat(name," in ").concat(language)}),text=(_languages$get_langua3=(_languages$get_langua4=languages.get_language_data("en_us"))==null||(_languages$get_langua5=_languages$get_langua4[plugin])==null?void 0:_languages$get_langua5[name])!=null?_languages$get_langua3:"(no translation)"}}return text}}function get_iso_code(language){if(language==null)return"en_US";if(mode_check.on_client())return window.language_data[language].iso_code}function format_iso_code_for_browser(iso_code){let[first,second]=iso_code.split(/[_-]/);return second!=null?"".concat(first,"-").concat(second.toUpperCase()):first}function is_rtl(language){if(mode_check.on_client()){var _window$language_data;return(_window$language_data=window.language_data[language].is_rtl)!=null?_window$language_data:!1}}function get_language_data(app_language2){if(mode_check.on_client())return window.translation_data[app_language2]!=null?window.translation_data[app_language2]:(languages.iso_based_language_obj==null&&(languages.iso_based_language_obj=languages.iso_lookup_language()),window.translation_data[languages.iso_based_language_obj[app_language2]]);throw new Error("Cannot call get_language_data on server side")}function iso_lookup_language(){let iso_based_object={};for(let[k,v]of Object.entries(languages.get_languages_data()))iso_based_object[v.iso_code]=k;return iso_based_object}function add_built_ins(language_node){if(language_node==null)throw new errors.UnexpectedError("Language node is null for add_built_ins");let yes_text=language_node.child("yes_text").get(),no_text=language_node.child("no_text").get(),day_names_text=language_node.child("day_names_text").get(),month_names_text=language_node.child("month_names_text").get();return get_built_in_json({yes_text,no_text,day_names_text,month_names_text})}function get_built_in_json_from_data(language_data2){if(language_data2==null)throw new errors.UnexpectedError("Language data is null for get_built_in_json_from_data");let yes_text=language_data2.yes,no_text=language_data2.no,day_names_text=language_data2.day_names,month_names_text=language_data2.month_names;return get_built_in_json({yes_text,no_text,day_names_text,month_names_text})}function get_built_in_json(_ref){let{yes_text,no_text,day_names_text,month_names_text}=_ref;return{BUILT_IN:{YES:yes_text,NO:no_text,DATE_FORMAT:{dayNames:day_names_text.split(","),monthNames:month_names_text.split(",")}}}}function get_languages_data(){if(mode_check.on_client()){var _window$language_data2;return(_window$language_data2=window.language_data)!=null?_window$language_data2:{}}return get_server_languages()}}});var require_new=__commonJS({"lib-browser-old/db/client_db/new.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_web_url_search_params();require_es_regexp_exec();require_es_string_search();require_web_immediate();require_es_error_cause();require_es_json_stringify();require_es_parse_int();require_es_array_includes();require_es_string_includes();var u=require_u2(),async_state=require_async_state(),scheduler=require_scheduler(),errors=require_errors(),safe_require=require_safe_require(),db=require_db2(),plans=require_plans().plans,db_utils=require_db_utils(),obfuscate=require_obfuscate(),db_consts=require_db(),time_consts=require_time(),logger=require_logger(),Lib=require_lib(),client_firebase=require_client_firebase(),cookies=require_cookies(),epoch=require_epoch2(),epoch_consts=require_epoch(),ClientDBNode=require_ClientDBNode().default,ClientDBObject=require_ClientDBObject(),languages=require_languages(),notifier_client=require_client(),notifier_topics=require_notifier_topics(),eval_node_state=require_eval_node_state(),client_db=exports;window&&new URLSearchParams(location.search).get("newautorun")==="true"&&safe_require.safe_register("./db/client_db",client_db);typeof window<"u"&&window!==null&&(window.client_db=client_db);function get_temp_db(){return u.cookies_enabled()?db_utils.get_temp_db(u.readCookie("temp_db"),Lib().appname()):null}client_db.instance=function(appname,app_version,temp_db){var _appname,_app_version,_temp_db,_db_cache$key;(_appname=appname)!=null||(appname=Lib().appname()),(_app_version=app_version)!=null||(app_version=Lib().app_version()),(_temp_db=temp_db)!=null||(temp_db=get_temp_db());let key=u.smush(appname,app_version,temp_db);return(_db_cache$key=db_cache[key])!=null||(db_cache[key]=new ClientDB(temp_db,appname,app_version,!0)),db_cache[key]};client_db.new_instance=function(appname,app_version,temp_db){var _appname2,_app_version2,_temp_db2;return(_appname2=appname)!=null||(appname=Lib().appname()),(_app_version2=app_version)!=null||(app_version=Lib().app_version()),(_temp_db2=temp_db)!=null||(temp_db=get_temp_db()),new ClientDB(temp_db,appname,app_version)};var db_cache={},_uid=u.Box();client_db.recheck_uid=function(cb,last_request_uri){var _cb;(_cb=cb)!=null||(cb=function(){}),Lib.wait_for_lib(()=>{var _new_uid,_window$bubble_sessio;let new_uid=u.readCookie(cookies.uid_cookie_name(Lib().appname(),Lib().app_version(),get_temp_db()));new_uid!=null&&new_uid!==window.bubble_session_uid&&logger.info("bubble_session_uid not updated",{last_request_uri,new_uid,bubble_session_uid:window.bubble_session_uid}),(_new_uid=new_uid)!=null||(new_uid=(_window$bubble_sessio=window.bubble_session_uid)!=null?_window$bubble_sessio:db_consts.NO_USER),new_uid!==_uid()&&(_uid(new_uid),client_db.reauth(),u.run_once(30,()=>{let current_user=Lib().current_user(),language_field=languages.get_user_language_field();return language_field!=null&&current_user.child(language_field).get(),current_user.get_email()})),cb()})};client_db.current_user=function(appname,app_version,temp_db){return client_db.recheck_uid(),client_db.instance(appname,app_version,temp_db).get(_uid())};client_db.server_time_offset_key=u.MakeKey(null,"server_time_offset");typeof window<"u"&&window!==null&&(window.server_time_offset=0,setImmediate(()=>notifier_client.get_server_time_offset(offset=>{window.server_time_offset=offset,client_db.server_time_offset_key.turn()})));var prefetchable_fetch_names=["get","search","aggregate"],prefetchable_request_names=["mget","msearch","maggregate"];client_db.reauth=official_retry=>Lib.wait_for_lib(()=>{u.rebuild_cookies()});var ClientDBWatcher=class{constructor(id,fn){this.results=new Error("Asked for value of a ClientDBWatcher before it had evaluated"),this._sources=null,this._observers=null,this._dirty=!0,this._check=!1,this.ready_key=void 0,this._running=!1,this.cur_eval_node=eval_node_state.get_current_eval_node(),this.id=id,this.fn=fn}register(){u.register_dependency(this)}needed(){return this._observers?this._observers.length>0:!1}updateIfNecessary(){let adding=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!(!this.needed()&&!adding)){if(this._check){if(this._sources){for(let source of this._sources)if(source.updateIfNecessary(),this._dirty)break}this._check=!1}this._dirty&&this.update()}}update(){if(!this._dirty)return;let results,ready_key,old_not_ready_catcher=async_state.CurrentNotReadyCatcher,old_autorun=async_state.CurrentAutoRun,prevSources=async_state.NewSources,prevSourcesIndex=async_state.NewSourcesIndex,old_eval_node=eval_node_state.get_current_eval_node();this._running=!0;try{async_state.CurrentAutoRun=this,async_state.CurrentNotReadyCatcher=null,async_state.NewSources=null,async_state.NewSourcesIndex=0,eval_node_state.set_current_eval_node(this.cur_eval_node),results=this.fn()}catch(err){let key=err instanceof errors.NotReadyError&&err.not_ready_key;if(key)key.turned_dependency().register(),ready_key=key,results=[];else throw err}finally{u.updateSources(),async_state.CurrentNotReadyCatcher=old_not_ready_catcher,async_state.CurrentAutoRun=old_autorun,async_state.NewSources=prevSources,async_state.NewSourcesIndex=prevSourcesIndex,eval_node_state.set_current_eval_node(old_eval_node),this._running=!1}let results_changed=JSON.stringify(this.results)!==JSON.stringify(results);this.results=results,this.ready_key=ready_key,this._dirty=!1,results_changed&&this._observers&&async_state.batch(()=>{for(let run of this._observers)run._invalidate(2)})}_invalidate(state){let changed=!(this._check||this._dirty);if(state===1?this._dirty||(this._check=!0):(this._dirty=!0,this._check=!1),state!==2&&this._running)throw new u.UnexpectedError("assertion error: current_result invalidated too soon",this);if(changed&&(scheduler.schedule(this),this._observers))for(let run of this._observers)run._invalidate(1)}},ClientDB=class extends db.DB{constructor(temp_db,appname,app_version,can_watch){super(),this.temp_db=temp_db,this.appname=appname,this.app_version=app_version,this.can_watch=can_watch,this._gets=[],this._searches=[],this._searches_current_count=0,this._aggregates=[],this.result_cache={},this.result_dependency_cache={},this.watch_search_status={},this.perc_ids_to_calls={},this.perc_id_update_versions={},this._notifier_client=notifier_client,this._last_run={},this._next_scheduled={},this._to_percolate=[],this._all_time_queued_fetches=0,this._prefetched_request_counts={mget:0,msearch:0,maggregate:0}}local_item_updated(id,data,type,version){var _u$session_storage;let keyname="db_latest_version_"+id;if((_u$session_storage=u.session_storage)!=null&&_u$session_storage.getItem(keyname))return u.session_storage.setItem(keyname,String(version))}initialize_data(id,data,type,version){if(this.has_session_storage=u.session_storage!=null,!!this.has_session_storage)try{var _this$_tracking_on_pa;let keyname="db_latest_version_"+id,latest_version=u.session_storage.getItem(keyname);if(latest_version==="local"||parseInt(latest_version)>version)return;u.session_storage.setItem(keyname,String(version)),(_this$_tracking_on_pa=this._tracking_on_page_load)!=null||(this._tracking_on_page_load={}),this._tracking_on_page_load[id]=!0,this._set_data(id,data,type,version)}catch(err){console.log("error in client_db.initialize_data: "+err.stack)}}schedule_discard_errors(plan){setTimeout(()=>{let result_cache=this.init_result_cache(plan);result_cache.ranges=result_cache.ranges.filter(range=>range.state!==db_consts.range_states.ERROR)},3e4)}execute_with_dependency(query,from2,n){let cache_key=JSON.stringify(query)+"_"+from2+"_"+n;if(!this.result_dependency_cache[cache_key]){var _async_state$CurrentN;if(((_async_state$CurrentN=async_state.CurrentNotReadyCatcher)==null?void 0:_async_state$CurrentN.length)>0)return[];let current_result2=new ClientDBWatcher(cache_key,()=>this.execute_query(query,from2,n));this.result_dependency_cache[cache_key]=current_result2,current_result2.update()}let current_result=this.result_dependency_cache[cache_key];return current_result.updateIfNecessary(!0),current_result.register(),current_result.ready_key&&u.ensure_ready(current_result.ready_key,!1),current_result.results}register_call_dependency(plan){var _this$result_cache$ca,_this$result_cache$ca2;if(!this.can_watch)return;let cache_key=this.get_cache_key(plan);(_this$result_cache$ca2=(_this$result_cache$ca=this.result_cache[cache_key]).dependency)!=null||(_this$result_cache$ca.dependency=u.Dependency()),this.result_cache[cache_key].dependency.register(),this.ensure_watching_plan(plan)}invalidate_call_dependency(cache_key){var _this$result_cache$ca3,_this$result_cache$ca4;(_this$result_cache$ca3=this.result_cache[cache_key])==null||(_this$result_cache$ca4=_this$result_cache$ca3.dependency)==null||_this$result_cache$ca4.invalidate()}add_plan_to_watch_search(plan){var _this$watch_search_st,_this$watch_search_st2;let watch_search_call=plans[plan.t].watch_search_call(plan);if(!watch_search_call)return;let watch_search_key=JSON.stringify(watch_search_call),plan_key=this.get_cache_key(plan);(_this$watch_search_st2=(_this$watch_search_st=this.watch_search_status)[watch_search_key])!=null||(_this$watch_search_st[watch_search_key]={plans:{},search_path:this.build_search_path(plan,"watch")}),this.watch_search_status[watch_search_key].plans[plan_key]=!0}ensure_watching_plan(plan){if(!this.can_watch)return;this.add_plan_to_watch_search(plan);let watch_search_call=plans[plan.t].watch_search_call(plan);if(!watch_search_call)return;let watch_search_key=JSON.stringify(watch_search_call);this.watch_search_status[watch_search_key].scheduled||(this.watch_search_status[watch_search_key].scheduled=!0,this.do_percolate(watch_search_call))}schedule_percolator(watch_search_call,expires){let watch_search_key=JSON.stringify(watch_search_call);this.watch_search_status[watch_search_key].scheduled=!0,this._set_timeout(()=>{this.percolate_still_needed(watch_search_call)?this.do_percolate(watch_search_call):this.watch_search_status[watch_search_key].scheduled=!1},expires-Date.now())}percolate_still_needed(watch_search_call){let watch_search_key=JSON.stringify(watch_search_call),found_one=!1,new_plans={};for(let plan_key in this.watch_search_status[watch_search_key].plans){var _this$result_cache$pl,_this$result_cache$pl2;(_this$result_cache$pl=this.result_cache[plan_key])!=null&&(_this$result_cache$pl2=_this$result_cache$pl.dependency)!=null&&_this$result_cache$pl2.needed()?this.result_cache[plan_key].dependency._observers.length===1&&!this.result_cache[plan_key].dependency._observers[0].needed()?this.invalidate_plan(plan_key):(found_one=!0,new_plans[plan_key]=!0):this.invalidate_plan(plan_key)}return this.watch_search_status[watch_search_key].plans=new_plans,found_one}set_perc_ids(watch_search_call,_ref){let{search_ids,expires}=_ref,perc_ids=search_ids;if(perc_ids==null||!this.can_watch)return;let watch_search_key=JSON.stringify(watch_search_call);this.schedule_percolator(watch_search_call,expires);for(let perc_id of perc_ids){var _search_status$perc_i;let search_status=this.watch_search_status[watch_search_key];(_search_status$perc_i=search_status.perc_ids)!=null||(search_status.perc_ids=[]),!search_status.perc_ids.includes(perc_id)&&(search_status.perc_ids.push(perc_id),this.perc_ids_to_calls[perc_id]||(this.perc_ids_to_calls[perc_id]=[],this._notifier_client.watch([notifier_topics.SearchNotificationTopic,perc_id],this.get_perc_id_version.bind(this,perc_id),this.handle_perc_updates.bind(this,perc_id))),this.perc_ids_to_calls[perc_id].push(watch_search_call))}}get_perc_id_version(perc_id){var _min_version;if(this.perc_id_update_versions[perc_id])return this.perc_id_update_versions[perc_id];let min_version;for(let watch_search_call of this.perc_ids_to_calls[perc_id]){let watch_search_key=JSON.stringify(watch_search_call);for(let plan_key in this.watch_search_status[watch_search_key].plans){let plan_version=this.get_plan_version(plan_key);plan_version!=null&&(min_version==null||plan_version<min_version)&&(min_version=plan_version)}}return(_min_version=min_version)!=null?_min_version:0}handle_perc_updates(perc_id,_ref2){let{version,message}=_ref2;if(version!=null&&(this.perc_id_update_versions[perc_id]=version),!(message&&this.is_watching(message)))for(let watch_search_call of this.perc_ids_to_calls[perc_id])this.notify_maybe_invalid(watch_search_call)}notify_maybe_invalid(watch_search_call,known_id){Lib().workflow.wait_for_server(()=>{let watch_search_key=JSON.stringify(watch_search_call);if(this._next_scheduled[watch_search_key])return;let stats_node=this.query_planner().get_stats(watch_search_call.type,watch_search_call.constraints),period;known_id?(stats_node==null?void 0:stats_node.length)!=null?stats_node.length<50?period=500:stats_node.length<1e3?period=2e3:period=1e4:watch_search_call.is_group_by?period=1e4:period=2e3:(stats_node==null?void 0:stats_node.length)!=null?stats_node.length<10?period=2e3:stats_node.length<50?period=5e3:stats_node.length<1e3?period=1e4:period=3e4:watch_search_call.is_group_by?period=3e4:period=1e4,(()=>this._last_run[watch_search_key]&&this._last_run[watch_search_key]>Date.now()-period&&!this.percolator_rate_limit_disabled)()?(this._next_scheduled[watch_search_key]=!0,this._set_timeout(()=>{Lib().workflow.wait_for_server(()=>{this._next_scheduled[watch_search_key]=!1,this._last_run[watch_search_key]=Date.now(),this.invalidate_plans(watch_search_key)})},this._last_run[watch_search_key]+period-Date.now())):(this._last_run[watch_search_key]=Date.now(),this.invalidate_plans(watch_search_key))})}_set_timeout(fn,timeout){return setTimeout(fn,timeout)}_set_immediate(fn){return setImmediate(fn)}wait_for_plan_loading(cache_key,cb){let result_cache=this.result_cache[cache_key],keys=[];for(let range of(_result_cache$ranges=result_cache==null?void 0:result_cache.ranges)!=null?_result_cache$ranges:[]){var _result_cache$ranges;range.state===db_consts.range_states.LOADING&&keys.push(range.loading_key)}if(keys.length>0)u.WaitFor(keys,()=>{this._set_timeout(()=>{u.wait_for_updates(this.wait_for_plan_loading.bind(this,cache_key,cb))},5)});else return cb()}invalidate_plans(watch_search_key){if(this.watch_search_status[watch_search_key])for(let plan_key in this.watch_search_status[watch_search_key].plans)this.wait_for_plan_loading(plan_key,()=>{this.invalidate_plan(plan_key)})}do_percolate(watch_search_call){this._to_percolate.push(watch_search_call),this._watch_percolate_scheduled||(this._watch_percolate_scheduled=!0,this._set_timeout(this.bulk_watch.bind(this),200))}bulk_watch(){this._watch_percolate_scheduled=!1;let searches=this._to_percolate;this._to_percolate=[];let build_to_send=watch_search_call=>{let watch_search_key=JSON.stringify(watch_search_call),{type,constraints}=watch_search_call,{search_path}=this.watch_search_status[watch_search_key];return{type,constraints,search_path}},to_send=searches.map(build_to_send);this.elasticsearch("bulk_watch",{appname:this.appname,app_version:this.app_version,temp_db:this.cur_temp_db(),searches:to_send},(err,res)=>{if(err)logger.log(err);else for(let[idx,watch_search_call]of searches.entries())this.set_perc_ids(watch_search_call,res[idx])})}get_appname(){return this.appname}get_app_version(){return this.app_version}get_temp_db(){return db_utils.get_temp_db(this.temp_db,this.appname)}elasticsearch(cmd,data,cb){if(prefetchable_fetch_names.includes(cmd)&&this._all_time_queued_fetches++,cmd==="get"&&!data.clear_cache){this._schedule_multi_get(),this._gets.push({id:data.id,cb});return}if(cmd==="search"&&data.n<40){this._searches.push({data,cb}),this._searches_current_count+=data.n,this._schedule_multi_search();return}if(cmd==="aggregate"){this._aggregates.push({data,cb}),this._schedule_multi_aggregate();return}let encoded=obfuscate.encode_data(data,Lib().appname()),span_details=u.extend({},epoch_consts.SPANS.data_retrieval);span_details.name="".concat(span_details.name," - ").concat(cmd);let data_span=epoch.startSpan(span_details.name,span_details.type,span_details.sync);function debug_wrapper(err,res){return(err==null?void 0:err.message)==="bad request from client"&&logger.info("report invalid params",{data,encoded,cmd,err}),epoch.endSpan(data_span),cb(err,res)}this._is_prefetching&&prefetchable_request_names.includes(cmd)&&this._prefetched_request_counts[cmd]++,Lib().location.post("server://elasticsearch/"+cmd,encoded,debug_wrapper)}_schedule_multi_get(){this._multi_get_scheduled||(this._multi_get_scheduled=!0,this._multi_get_switch||(this._multi_get_switch=u.MakeSwitch(null,"multi get switch"),this._multi_get_switch.turn_on()),u.WaitFor(this._multi_get_switch,()=>{setTimeout(()=>this._do_multi_get(10))}))}_do_multi_get(){if(this._multi_get_scheduled=!1,this._gets.length===0)return;let batch_size=this.GET_BATCH_SIZE,to_get=this._gets.slice(0,batch_size);this._gets=this._gets.slice(batch_size),this._multi_get_switch.turn_off(),this._gets.length>0&&this._schedule_multi_get();let ids=to_get.map(_ref3=>{let{id}=_ref3;return id}),params={appname:this.appname,app_version:this.app_version,temp_db:this.cur_temp_db(),ids};return this.elasticsearch("mget",params,(err,res)=>{var _res$docs;if(!err&&((_res$docs=res.docs)==null?void 0:_res$docs.length)!==to_get.length&&(err=new u.UnexpectedError("bad response from mget",{params,res})),err)for(let{cb}of to_get)cb(err);else{let skipped=[];for(let[idx,data]of res.docs.entries())data!=null?to_get[idx].cb(null,data):skipped.push(to_get[idx]);this._gets=skipped.concat(this._gets),this._schedule_multi_get()}this._multi_get_switch.turn_on()})}_schedule_multi_search(){if(this._multi_search_scheduled){(this._searches.length>30||this._searches_current_count>200)&&(clearTimeout(this._multi_search_timeout),this._do_multi_search());return}this._multi_search_scheduled=!0,this._multi_search_timeout=setTimeout(this._do_multi_search.bind(this),10)}_schedule_multi_aggregate(){if(this._multi_aggregate_scheduled){this._aggregates.length>20&&(clearTimeout(this._multi_aggregate_timeout),this._do_multi_aggregate());return}this._multi_aggregate_scheduled=!0,this._multi_aggregate_timeout=setTimeout(this._do_multi_aggregate.bind(this),10)}get_prefetched_request_counts(){return this._prefetched_request_counts}get_all_time_queued_fetches(){return this._all_time_queued_fetches}prefetch_queued_fetches(){this._is_prefetching=!0,this._multi_get_scheduled&&this._do_multi_get(),this._multi_search_scheduled&&(clearTimeout(this._multi_search_timeout),this._do_multi_search()),this._multi_aggregate_scheduled&&(clearTimeout(this._multi_aggregate_timeout),this._do_multi_aggregate()),this._is_prefetching=!1}_do_multi_search(){this._multi_search_scheduled=!1;let to_search=this._searches;this._searches=[],this._searches_current_count=0;let searches=to_search.map(_ref4=>{let{data}=_ref4;return data}),params={appname:this.appname,app_version:this.app_version,temp_db:this.cur_temp_db(),searches};this.elasticsearch("msearch",params,(err,res)=>{var _res$responses;if(!err&&((_res$responses=res.responses)==null?void 0:_res$responses.length)!==to_search.length&&(err=new u.UnexpectedError("bad response from msearch",{res,params})),err)for(let{cb}of to_search)cb(err);else for(let[idx,data]of res.responses.entries())to_search[idx].cb(null,data)})}_do_multi_aggregate(){this._multi_aggregate_scheduled=!1;let to_send=this._aggregates;this._aggregates=[];let aggregates=to_send.map(_ref5=>{let{data}=_ref5;return data}),params={appname:this.appname,app_version:this.app_version,temp_db:this.cur_temp_db(),aggregates};this.elasticsearch("maggregate",params,(err,res)=>{if(!err&&res.responses.length!==to_send.length&&(err=new u.UnexpectedError("bad response from maggregate",{res,params})),err)for(let{cb}of to_send)cb(err);else for(let[idx,data]of res.responses.entries())to_send[idx].cb(null,data)})}};ClientDB.prototype.DBNODE=ClientDBNode,ClientDB.prototype.DBOBJECT=ClientDBObject,ClientDB.prototype.GET_BATCH_SIZE=200}});var require_old=__commonJS({"lib-browser-old/db/client_db/old.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_web_url_search_params();require_es_regexp_exec();require_es_string_search();require_web_immediate();require_es_parse_int();require_es_json_stringify();require_es_array_includes();require_es_string_includes();var u=require_u2(),async_state=require_async_state3(),errors=require_errors(),safe_require=require_safe_require(),db=require_db2(),plans=require_plans().plans,db_utils=require_db_utils(),obfuscate=require_obfuscate(),db_consts=require_db(),time_consts=require_time(),logger=require_logger(),Lib=require_lib(),client_firebase=require_client_firebase(),cookies=require_cookies(),epoch=require_epoch2(),epoch_consts=require_epoch(),ClientDBNode=require_ClientDBNode().default,ClientDBObject=require_ClientDBObject(),languages=require_languages(),notifier_client=require_client(),notifier_topics=require_notifier_topics(),eval_node_state=require_eval_node_state(),client_db=exports;(!window||!window.location||new URLSearchParams(location.search).get("newautorun")!=="true")&&safe_require.safe_register("./db/client_db",client_db);typeof window<"u"&&window!==null&&(window.client_db=client_db);function get_temp_db(){return u.cookies_enabled()?db_utils.get_temp_db(u.readCookie("temp_db"),Lib().appname()):null}client_db.instance=function(appname,app_version,temp_db){var _appname,_app_version,_temp_db,_db_cache$key;(_appname=appname)!=null||(appname=Lib().appname()),(_app_version=app_version)!=null||(app_version=Lib().app_version()),(_temp_db=temp_db)!=null||(temp_db=get_temp_db());let key=u.smush(appname,app_version,temp_db);return(_db_cache$key=db_cache[key])!=null||(db_cache[key]=new ClientDB(temp_db,appname,app_version,!0)),db_cache[key]};client_db.new_instance=function(appname,app_version,temp_db){var _appname2,_app_version2,_temp_db2;return(_appname2=appname)!=null||(appname=Lib().appname()),(_app_version2=app_version)!=null||(app_version=Lib().app_version()),(_temp_db2=temp_db)!=null||(temp_db=get_temp_db()),new ClientDB(temp_db,appname,app_version)};var db_cache={},_uid=u.Box();client_db.recheck_uid=function(cb,last_request_uri){var _cb;(_cb=cb)!=null||(cb=function(){}),Lib.wait_for_lib(()=>{var _new_uid,_window$bubble_sessio;let new_uid=u.readCookie(cookies.uid_cookie_name(Lib().appname(),Lib().app_version(),get_temp_db()));new_uid!=null&&new_uid!==window.bubble_session_uid&&logger.info("bubble_session_uid not updated",{last_request_uri,new_uid,bubble_session_uid:window.bubble_session_uid}),(_new_uid=new_uid)!=null||(new_uid=(_window$bubble_sessio=window.bubble_session_uid)!=null?_window$bubble_sessio:db_consts.NO_USER),new_uid!==_uid()&&(_uid(new_uid),client_db.reauth(),u.run_once(30,()=>{let current_user=Lib().current_user(),language_field=languages.get_user_language_field();return language_field!=null&&current_user.child(language_field).get(),current_user.get_email()})),cb()})};client_db.current_user=function(appname,app_version,temp_db){return client_db.recheck_uid(),client_db.instance(appname,app_version,temp_db).get(_uid())};client_db.server_time_offset_key=u.MakeKey(null,"server_time_offset");typeof window<"u"&&window!==null&&(window.server_time_offset=0,setImmediate(()=>notifier_client.get_server_time_offset(offset=>{window.server_time_offset=offset,client_db.server_time_offset_key.turn()})));var prefetchable_fetch_names=["get","search","aggregate"],prefetchable_request_names=["mget","msearch","maggregate"];client_db.reauth=official_retry=>Lib.wait_for_lib(()=>{u.rebuild_cookies()});var ClientDB=class extends db.DB{constructor(temp_db,appname,app_version,can_watch){super(),this.temp_db=temp_db,this.appname=appname,this.app_version=app_version,this.can_watch=can_watch,this._gets=[],this._searches=[],this._searches_current_count=0,this._aggregates=[],this.result_cache={},this.result_dependency_cache={},this.watch_search_status={},this.perc_ids_to_calls={},this.perc_id_update_versions={},this._notifier_client=notifier_client,this._last_run={},this._next_scheduled={},this._to_percolate=[],this._all_time_queued_fetches=0,this._prefetched_request_counts={mget:0,msearch:0,maggregate:0}}local_item_updated(id,data,type,version){var _u$session_storage;let keyname="db_latest_version_"+id;if((_u$session_storage=u.session_storage)!=null&&_u$session_storage.getItem(keyname))return u.session_storage.setItem(keyname,String(version))}initialize_data(id,data,type,version){if(this.has_session_storage=u.session_storage!=null,!!this.has_session_storage)try{var _this$_tracking_on_pa;let keyname="db_latest_version_"+id,latest_version=u.session_storage.getItem(keyname);if(latest_version==="local"||parseInt(latest_version)>version)return;u.session_storage.setItem(keyname,String(version)),(_this$_tracking_on_pa=this._tracking_on_page_load)!=null||(this._tracking_on_page_load={}),this._tracking_on_page_load[id]=!0,this._set_data(id,data,type,version)}catch(err){console.log("error in client_db.initialize_data: "+err.stack)}}schedule_discard_errors(plan){setTimeout(()=>{let result_cache=this.init_result_cache(plan);result_cache.ranges=result_cache.ranges.filter(range=>range.state!==db_consts.range_states.ERROR)},3e4)}execute_with_dependency(query,from2,n){var _this$result_dependen,_this$result_dependen2;let cache_key=JSON.stringify(query)+"_"+from2+"_"+n;if((_this$result_dependen2=(_this$result_dependen=this.result_dependency_cache)[cache_key])!=null||(_this$result_dependen[cache_key]={}),!this.result_dependency_cache[cache_key].current_result){var _async_state$CurrentN;if(((_async_state$CurrentN=async_state.CurrentNotReadyCatcher)==null?void 0:_async_state$CurrentN.length)>0)return[];let cur_eval_node=eval_node_state.get_current_eval_node(),current_result={id:cache_key,invalidate:()=>{var _this$result_dependen3;if(current_result.invalidated=!0,current_result===((_this$result_dependen3=this.result_dependency_cache[cache_key])==null?void 0:_this$result_dependen3.current_result)){if(!current_result.dependency.needed()){delete this.result_dependency_cache[cache_key];return}this.result_dependency_cache[cache_key].old_result=this.result_dependency_cache[cache_key].current_result,this.result_dependency_cache[cache_key].current_result=null,this._set_immediate(()=>{u.run_once(120,()=>{let old_cur_eval_node;try{old_cur_eval_node=eval_node_state.get_current_eval_node(),eval_node_state.set_current_eval_node(cur_eval_node),this.execute_with_dependency(query,from2,n)}finally{eval_node_state.set_current_eval_node(old_cur_eval_node)}},!1,!0)})}}},results,old_not_ready_catcher=async_state.CurrentNotReadyCatcher,old_autorun=async_state.CurrentAutoRun;try{async_state.CurrentAutoRun=current_result,async_state.CurrentNotReadyCatcher=null,results=this.execute_query(query,from2,n)}catch(err){let key=err instanceof errors.NotReadyError&&err.not_ready_key;throw key&&old_autorun&&key.turned_dependency().register(old_autorun),err}finally{async_state.CurrentNotReadyCatcher=old_not_ready_catcher,async_state.CurrentAutoRun=old_autorun}if(current_result.invalidated)throw new u.UnexpectedError("assertion error: current_result invalidated too soon",{query,from:from2,n});let dependency;this.result_dependency_cache[cache_key].old_result?({dependency}=this.result_dependency_cache[cache_key].old_result,JSON.stringify(this.result_dependency_cache[cache_key].old_result.results)!==JSON.stringify(results)&&dependency.invalidate(),this.result_dependency_cache[cache_key].old_result=null):dependency=u.Dependency(),current_result.dependency=dependency,current_result.results=results,this.result_dependency_cache[cache_key].current_result=current_result}return this.result_dependency_cache[cache_key].current_result.dependency.register(),this.result_dependency_cache[cache_key].current_result.results}register_call_dependency(plan){var _this$result_cache$ca,_this$result_cache$ca2;if(!this.can_watch)return;let cache_key=this.get_cache_key(plan);(_this$result_cache$ca2=(_this$result_cache$ca=this.result_cache[cache_key]).dependency)!=null||(_this$result_cache$ca.dependency=u.Dependency()),this.result_cache[cache_key].dependency.register(),this.ensure_watching_plan(plan)}invalidate_call_dependency(cache_key){var _this$result_cache$ca3,_this$result_cache$ca4;(_this$result_cache$ca3=this.result_cache[cache_key])==null||(_this$result_cache$ca4=_this$result_cache$ca3.dependency)==null||_this$result_cache$ca4.invalidate()}add_plan_to_watch_search(plan){var _this$watch_search_st,_this$watch_search_st2;let watch_search_call=plans[plan.t].watch_search_call(plan);if(!watch_search_call)return;let watch_search_key=JSON.stringify(watch_search_call),plan_key=this.get_cache_key(plan);(_this$watch_search_st2=(_this$watch_search_st=this.watch_search_status)[watch_search_key])!=null||(_this$watch_search_st[watch_search_key]={plans:{},search_path:this.build_search_path(plan,"watch")}),this.watch_search_status[watch_search_key].plans[plan_key]=!0}ensure_watching_plan(plan){if(!this.can_watch)return;this.add_plan_to_watch_search(plan);let watch_search_call=plans[plan.t].watch_search_call(plan);if(!watch_search_call)return;let watch_search_key=JSON.stringify(watch_search_call);this.watch_search_status[watch_search_key].scheduled||(this.watch_search_status[watch_search_key].scheduled=!0,this.do_percolate(watch_search_call))}schedule_percolator(watch_search_call,expires){let watch_search_key=JSON.stringify(watch_search_call);this.watch_search_status[watch_search_key].scheduled=!0,this._set_timeout(()=>{this.percolate_still_needed(watch_search_call)?this.do_percolate(watch_search_call):this.watch_search_status[watch_search_key].scheduled=!1},expires-Date.now())}percolate_still_needed(watch_search_call){let watch_search_key=JSON.stringify(watch_search_call),found_one=!1,new_plans={};for(let plan_key in this.watch_search_status[watch_search_key].plans){var _this$result_cache$pl,_this$result_cache$pl2;(_this$result_cache$pl=this.result_cache[plan_key])!=null&&(_this$result_cache$pl2=_this$result_cache$pl.dependency)!=null&&_this$result_cache$pl2.needed()?(found_one=!0,new_plans[plan_key]=!0):this.invalidate_plan(plan_key)}return this.watch_search_status[watch_search_key].plans=new_plans,found_one}set_perc_ids(watch_search_call,_ref){let{search_ids,expires}=_ref,perc_ids=search_ids;if(perc_ids==null||!this.can_watch)return;let watch_search_key=JSON.stringify(watch_search_call);this.schedule_percolator(watch_search_call,expires);for(let perc_id of perc_ids){var _search_status$perc_i;let search_status=this.watch_search_status[watch_search_key];(_search_status$perc_i=search_status.perc_ids)!=null||(search_status.perc_ids=[]),!search_status.perc_ids.includes(perc_id)&&(search_status.perc_ids.push(perc_id),this.perc_ids_to_calls[perc_id]||(this.perc_ids_to_calls[perc_id]=[],this._notifier_client.watch([notifier_topics.SearchNotificationTopic,perc_id],this.get_perc_id_version.bind(this,perc_id),this.handle_perc_updates.bind(this,perc_id))),this.perc_ids_to_calls[perc_id].push(watch_search_call))}}get_perc_id_version(perc_id){var _min_version;if(this.perc_id_update_versions[perc_id])return this.perc_id_update_versions[perc_id];let min_version;for(let watch_search_call of this.perc_ids_to_calls[perc_id]){let watch_search_key=JSON.stringify(watch_search_call);for(let plan_key in this.watch_search_status[watch_search_key].plans){let plan_version=this.get_plan_version(plan_key);plan_version!=null&&(min_version==null||plan_version<min_version)&&(min_version=plan_version)}}return(_min_version=min_version)!=null?_min_version:0}handle_perc_updates(perc_id,_ref2){let{version,message}=_ref2;if(version!=null&&(this.perc_id_update_versions[perc_id]=version),!(message&&this.is_watching(message)))for(let watch_search_call of this.perc_ids_to_calls[perc_id])this.notify_maybe_invalid(watch_search_call)}notify_maybe_invalid(watch_search_call,known_id){Lib().workflow.wait_for_server(()=>{let watch_search_key=JSON.stringify(watch_search_call);if(this._next_scheduled[watch_search_key])return;let stats_node=this.query_planner().get_stats(watch_search_call.type,watch_search_call.constraints),period;known_id?(stats_node==null?void 0:stats_node.length)!=null?stats_node.length<50?period=500:stats_node.length<1e3?period=2e3:period=1e4:watch_search_call.is_group_by?period=1e4:period=2e3:(stats_node==null?void 0:stats_node.length)!=null?stats_node.length<10?period=2e3:stats_node.length<50?period=5e3:stats_node.length<1e3?period=1e4:period=3e4:watch_search_call.is_group_by?period=3e4:period=1e4,(()=>this._last_run[watch_search_key]&&this._last_run[watch_search_key]>Date.now()-period&&!this.percolator_rate_limit_disabled)()?(this._next_scheduled[watch_search_key]=!0,this._set_timeout(()=>{Lib().workflow.wait_for_server(()=>{this._next_scheduled[watch_search_key]=!1,this._last_run[watch_search_key]=Date.now(),this.invalidate_plans(watch_search_key)})},this._last_run[watch_search_key]+period-Date.now())):(this._last_run[watch_search_key]=Date.now(),this.invalidate_plans(watch_search_key))})}_set_timeout(fn,timeout){return setTimeout(fn,timeout)}_set_immediate(fn){return setImmediate(fn)}wait_for_plan_loading(cache_key,cb){let result_cache=this.result_cache[cache_key],keys=[];for(let range of(_result_cache$ranges=result_cache==null?void 0:result_cache.ranges)!=null?_result_cache$ranges:[]){var _result_cache$ranges;range.state===db_consts.range_states.LOADING&&keys.push(range.loading_key)}if(keys.length>0)u.WaitFor(keys,()=>{this._set_timeout(()=>{u.wait_for_updates(this.wait_for_plan_loading.bind(this,cache_key,cb))},5)});else return cb()}invalidate_plans(watch_search_key){if(this.watch_search_status[watch_search_key])for(let plan_key in this.watch_search_status[watch_search_key].plans)this.wait_for_plan_loading(plan_key,()=>{this.invalidate_plan(plan_key)})}do_percolate(watch_search_call){this._to_percolate.push(watch_search_call),this._watch_percolate_scheduled||(this._watch_percolate_scheduled=!0,this._set_timeout(this.bulk_watch.bind(this),200))}bulk_watch(){this._watch_percolate_scheduled=!1;let searches=this._to_percolate;this._to_percolate=[];let build_to_send=watch_search_call=>{let watch_search_key=JSON.stringify(watch_search_call),{type,constraints}=watch_search_call,{search_path}=this.watch_search_status[watch_search_key];return{type,constraints,search_path}},to_send=searches.map(build_to_send);this.elasticsearch("bulk_watch",{appname:this.appname,app_version:this.app_version,temp_db:this.cur_temp_db(),searches:to_send},(err,res)=>{if(err)logger.log(err);else for(let[idx,watch_search_call]of searches.entries())this.set_perc_ids(watch_search_call,res[idx])})}get_appname(){return this.appname}get_app_version(){return this.app_version}get_temp_db(){return db_utils.get_temp_db(this.temp_db,this.appname)}elasticsearch(cmd,data,cb){if(prefetchable_fetch_names.includes(cmd)&&this._all_time_queued_fetches++,cmd==="get"&&!data.clear_cache){this._schedule_multi_get(),this._gets.push({id:data.id,cb});return}if(cmd==="search"&&data.n<40){this._searches.push({data,cb}),this._searches_current_count+=data.n,this._schedule_multi_search();return}if(cmd==="aggregate"){this._aggregates.push({data,cb}),this._schedule_multi_aggregate();return}let encoded=obfuscate.encode_data(data,Lib().appname()),span_details=u.extend({},epoch_consts.SPANS.data_retrieval);span_details.name="".concat(span_details.name," - ").concat(cmd);let data_span=epoch.startSpan(span_details.name,span_details.type,span_details.sync);function debug_wrapper(err,res){return(err==null?void 0:err.message)==="bad request from client"&&logger.info("report invalid params",{data,encoded,cmd,err}),epoch.endSpan(data_span),cb(err,res)}this._is_prefetching&&prefetchable_request_names.includes(cmd)&&this._prefetched_request_counts[cmd]++,Lib().location.post("server://elasticsearch/"+cmd,encoded,debug_wrapper)}_schedule_multi_get(){this._multi_get_scheduled||(this._multi_get_scheduled=!0,this._multi_get_switch||(this._multi_get_switch=u.MakeSwitch(null,"multi get switch"),this._multi_get_switch.turn_on()),u.WaitFor(this._multi_get_switch,()=>{setTimeout(()=>this._do_multi_get(10))}))}_do_multi_get(){if(this._multi_get_scheduled=!1,this._gets.length===0)return;let batch_size=this.GET_BATCH_SIZE,to_get=this._gets.slice(0,batch_size);this._gets=this._gets.slice(batch_size),this._multi_get_switch.turn_off(),this._gets.length>0&&this._schedule_multi_get();let ids=to_get.map(_ref3=>{let{id}=_ref3;return id}),params={appname:this.appname,app_version:this.app_version,temp_db:this.cur_temp_db(),ids};return this.elasticsearch("mget",params,(err,res)=>{var _res$docs;if(!err&&((_res$docs=res.docs)==null?void 0:_res$docs.length)!==to_get.length&&(err=new u.UnexpectedError("bad response from mget",{params,res})),err)for(let{cb}of to_get)cb(err);else{let skipped=[];for(let[idx,data]of res.docs.entries())data!=null?to_get[idx].cb(null,data):skipped.push(to_get[idx]);this._gets=skipped.concat(this._gets),this._schedule_multi_get()}this._multi_get_switch.turn_on()})}_schedule_multi_search(){if(this._multi_search_scheduled){(this._searches.length>30||this._searches_current_count>200)&&(clearTimeout(this._multi_search_timeout),this._do_multi_search());return}this._multi_search_scheduled=!0,this._multi_search_timeout=setTimeout(this._do_multi_search.bind(this),10)}_schedule_multi_aggregate(){if(this._multi_aggregate_scheduled){this._aggregates.length>20&&(clearTimeout(this._multi_aggregate_timeout),this._do_multi_aggregate());return}this._multi_aggregate_scheduled=!0,this._multi_aggregate_timeout=setTimeout(this._do_multi_aggregate.bind(this),10)}get_prefetched_request_counts(){return this._prefetched_request_counts}get_all_time_queued_fetches(){return this._all_time_queued_fetches}prefetch_queued_fetches(){this._is_prefetching=!0,this._multi_get_scheduled&&this._do_multi_get(),this._multi_search_scheduled&&(clearTimeout(this._multi_search_timeout),this._do_multi_search()),this._multi_aggregate_scheduled&&(clearTimeout(this._multi_aggregate_timeout),this._do_multi_aggregate()),this._is_prefetching=!1}_do_multi_search(){this._multi_search_scheduled=!1;let to_search=this._searches;this._searches=[],this._searches_current_count=0;let searches=to_search.map(_ref4=>{let{data}=_ref4;return data}),params={appname:this.appname,app_version:this.app_version,temp_db:this.cur_temp_db(),searches};this.elasticsearch("msearch",params,(err,res)=>{var _res$responses;if(!err&&((_res$responses=res.responses)==null?void 0:_res$responses.length)!==to_search.length&&(err=new u.UnexpectedError("bad response from msearch",{res,params})),err)for(let{cb}of to_search)cb(err);else for(let[idx,data]of res.responses.entries())to_search[idx].cb(null,data)})}_do_multi_aggregate(){this._multi_aggregate_scheduled=!1;let to_send=this._aggregates;this._aggregates=[];let aggregates=to_send.map(_ref5=>{let{data}=_ref5;return data}),params={appname:this.appname,app_version:this.app_version,temp_db:this.cur_temp_db(),aggregates};this.elasticsearch("maggregate",params,(err,res)=>{if(!err&&res.responses.length!==to_send.length&&(err=new u.UnexpectedError("bad response from maggregate",{res,params})),err)for(let{cb}of to_send)cb(err);else for(let[idx,data]of res.responses.entries())to_send[idx].cb(null,data)})}};ClientDB.prototype.DBNODE=ClientDBNode,ClientDB.prototype.DBOBJECT=ClientDBObject,ClientDB.prototype.GET_BATCH_SIZE=200}});var require_client_db=__commonJS({"lib-browser-old/db/client_db/index.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_web_url_search_params();require_es_regexp_exec();require_es_string_search();window&&window.location&&new URLSearchParams(location.search).get("newautorun")==="true"?module.exports=require_new():module.exports=require_old()}});var require_FrozenState=__commonJS({"lib-browser-old/lang/evaluation/FrozenState.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_includes();require_es_string_trim();require_web_dom_collections_for_each();require_es_regexp_exec();require_es_string_replace();require_es_error_cause();var u=require_u2(),b_fiber=require_b_fiber(),hydrate2=require_hydrate(),async_state=require_async_state3(),logger=require_logger(),eval_consts=require_eval(),investigations=require_investigations(),decaf=require_decaf(),node_eval=require_node_eval(),core_ds_element_utilities=require_core_ds_element_utilities(),page_state=require_page_state(),state_keys=require_state_keys(),INSTANCE_NOT_FOUND="NOT_FOUND";function run_in_dehydrate_context(context,fn){let old_context=FrozenState.dehydrate_context;try{return FrozenState.dehydrate_context=context,fn()}finally{FrozenState.dehydrate_context=old_context}}var FrozenState=class _FrozenState{static from_client_state(client_state,context){let frozen_state=new _FrozenState(context);return u.extend(frozen_state,client_state),frozen_state}static deserialize(context,serialized){let frozen_state=new _FrozenState(context);return u.extend(frozen_state,serialized),frozen_state}constructor(context){if(this.context=context,this.context.frozen_state)throw new u.UnexpectedError("this frozen state already has a context");this.context.frozen_state=this,this.cache={},this.exists={},this.trustworthy={},this.element_instances={},this.element_state={},this.other_data={},this.unshrunk_keys={},this.raw_access_log=[]}_save_element_instance(instance,element_id,not_found){if(not_found){var _this$element_instanc,_this$element_instanc2;(_this$element_instanc2=(_this$element_instanc=this.element_instances)[element_id])!=null||(_this$element_instanc[element_id]=INSTANCE_NOT_FOUND)}else{var _instance$parent,_this$element_instanc3,_this$element_instanc4,_this$element_instanc5,_instance$toUniqueStr,_this$element_instanc6;this.element_instances[element_id]===INSTANCE_NOT_FOUND&&(this.element_instances[element_id]=null);let object2={dehydrated:hydrate2.dehydrate_tree(instance),parent_element_id:hydrate2.dehydrate_tree((_instance$parent=instance.parent())==null?void 0:_instance$parent.element_id())};if((_this$element_instanc4=(_this$element_instanc3=this.element_instances)[element_id])!=null||(_this$element_instanc3[element_id]=object2),(_this$element_instanc6=(_this$element_instanc5=this.element_instances)[_instance$toUniqueStr=instance.toUniqueString()])!=null||(_this$element_instanc5[_instance$toUniqueStr]=object2),instance.element.type()==="CustomElement"&&instance.element_id()!==element_id){var _this$element_instanc7,_ref,_this$element_instanc8;(_this$element_instanc8=(_this$element_instanc7=this.element_instances)[_ref="".concat(instance.toUniqueString(),":").concat(element_id)])!=null||(_this$element_instanc7[_ref]=object2)}}}instance_id_not_found(element_id){return this.element_instances[element_id]===INSTANCE_NOT_FOUND}element_id_to_instance_id(element_id,fallback_id){if(this.instance_id_not_found(element_id))throw new u.UnexpectedError("instance id not found -- should not hit this",{element_id});let res=this.element_instances[element_id];if(!res){let fallback=this.element_instances[fallback_id];if(fallback!=null)return logger.warn("using fallback dehydrated, why is this not in frozen state?",{element_id,fallback_id}),fallback.dehydrated;throw new u.UnexpectedError("could not find element id in frozen state",{element_id})}return res.dehydrated}element_id_to_parent_element_id(element_id,fallback_id){if(this.instance_id_not_found(element_id))throw new u.UnexpectedError("instance id not found -- should not hit this",{element_id});let res=this.element_instances[element_id];if(!res){let fallback=this.element_instances[fallback_id];if(fallback!=null)return logger.warn("using fallback parent_element_id, why is this not in frozen state?",{element_id,fallback_id}),fallback.parent_element_id;throw new u.UnexpectedError("could not find element id in frozen state",{element_id})}return res.parent_element_id}shorten(key){return key=String(key),key.length>50?u.incremental_digest(key):key}freeze_node(node){return this._build_freeze_promise(()=>{this._freeze_current_element(),this._find_element_references(node,"find_expressions")})}freeze_workflows(events,cb){this._build_freeze_promise(()=>{this._freeze_workflows(events)}).callback((err,res)=>{err&&err.message==="autorun.run_once timeout"&&(err=new u.OwnerError("Workflows could not run because too many events triggered at the same time.",{events:events.map(e=>({id:e.id(),type:e.type()}))})),cb(err,res)})}_build_freeze_promise(freezer){return u.run_once(60,()=>{u.ensure_ready(u.scheduled_key,!1),Lib().app_language();let seen_instances={};return run_in_dehydrate_context({instance:_instance=>{seen_instances[_instance.toUniqueString()]||(seen_instances[_instance.toUniqueString()]=!0,this._save_element_instance(_instance,_instance.element_id()))},save_to_state:(instance,state_name,value)=>{var _this$element_state,_this$element_state$i,_this$element_state$i2,_this$element_state$i3;let instance_id=hydrate2.dehydrate_tree(instance);(_this$element_state$i=(_this$element_state=this.element_state)[instance_id])!=null||(_this$element_state[instance_id]={}),(_this$element_state$i3=(_this$element_state$i2=this.element_state[instance_id])[state_name])!=null||(_this$element_state$i2[state_name]=hydrate2.dehydrate_tree(value!=null?value:null))}},()=>freezer())},null,!0,!0)}_freeze_current_element(){if(this.context.element){let parent_instance=core_ds_element_utilities.get_runtime_parent(this.context);if(parent_instance){var _this$element_state2,_instance_id,_this$element_state2$,_this$element_state$i4,_this$element_state$i5;let instance_id=hydrate2.dehydrate_tree(parent_instance);this._save_element_instance(parent_instance,parent_instance.element_id()),(_this$element_state2$=(_this$element_state2=this.element_state)[_instance_id=instance_id])!=null||(_this$element_state2[_instance_id]={}),(_this$element_state$i5=(_this$element_state$i4=this.element_state[instance_id]).group_data)!=null||(_this$element_state$i4.group_data=hydrate2.dehydrate_tree(parent_instance.state("group_data")));let group_item=parent_instance,group_item_ancestry=[];for(;group_item!=null&&group_item.element.type()!=="GroupItem";){var _group_item$parent,_group_item;group_item=(_group_item$parent=(_group_item=group_item).parent)==null?void 0:_group_item$parent.call(_group_item),group_item_ancestry.push(group_item)}if(group_item){var _this$element_state3,_instance_id2,_this$element_state3$,_this$element_state$i6,_this$element_state$i7,_this$element_state$i8,_this$element_state$i9;for(let ancestor of group_item_ancestry)instance_id=hydrate2.dehydrate_tree(ancestor),this._save_element_instance(parent_instance,instance_id);instance_id=hydrate2.dehydrate_tree(group_item),(_this$element_state3$=(_this$element_state3=this.element_state)[_instance_id2=instance_id])!=null||(_this$element_state3[_instance_id2]={}),(_this$element_state$i7=(_this$element_state$i6=this.element_state[instance_id]).cell_index)!=null||(_this$element_state$i6.cell_index=group_item.state("cell_index")),(_this$element_state$i9=(_this$element_state$i8=this.element_state[instance_id]).group_data)!=null||(_this$element_state$i8.group_data=hydrate2.dehydrate_tree(group_item.state("group_data")))}}this._save_element_instance(this.context.element,this.context.element.element_id())}}_freeze_workflows(events,_frozen_by_parent){var _frozen_by_parent2;(_frozen_by_parent2=_frozen_by_parent)!=null||(_frozen_by_parent={});for(let event of events){let item=event;for(;item;){if(this._freeze(item),["TriggerCustomEvent","TriggerCustomEventFromReusable"].includes(item.type())){let custom_event=appquery.event(item.get_static_property("custom_event"));if(custom_event.exists())if(_frozen_by_parent[custom_event.id()]!=null)_frozen_by_parent[custom_event.id()]!=="REPORTED"&&(_frozen_by_parent[custom_event.id()]="REPORTED",logger.owner_error("This custom event is triggering a custom event that triggers itself (directly or indirectly)",{event:custom_event}));else{let original_element;if(item.type()==="TriggerCustomEventFromReusable"){var _this$context$element;original_element=this.context.element,this.context.element=(_this$context$element=this.context.element)==null?void 0:_this$context$element.find_instance_by_id(item.get_static_property("element_id"))}try{let to_add={};to_add[custom_event.id()]="SEEN",this._freeze_workflows([custom_event],u.extend({},_frozen_by_parent,to_add))}finally{item.type()==="TriggerCustomEventFromReusable"&&(this.context.element=original_element)}}}item=item.next()}}this._freeze_current_element()}has_invalid_state(){for(let states of decaf.object_values(this.element_state))for(let value of decaf.object_values(states))if(value!=null&&value[eval_consts.NV_MARKER])return!0;return!1}retrieve_element_state(instance,state){var _this$element_state$i10;let instance_id=hydrate2.dehydrate_tree(instance),stored=(_this$element_state$i10=this.element_state[instance_id])==null?void 0:_this$element_state$i10[state];if(stored!=null&&stored[eval_consts.NV_MARKER])throw new u.UnexpectedError("not valid input data made it to server");if(stored!==void 0)return hydrate2.rehydrate_tree(Lib().db_instance(),stored);if(state==="value")return this.retrieve_element_state(instance,"value_that_is_valid");throw new u.UnexpectedError("trying to retrieve missing element state",{instance_id,state})}_freeze(item){if(!item.is_action())if(Lib().workflow.uses_server(item)){var _this$context,_this$context$_temp_d;(_this$context$_temp_d=(_this$context=this.context)._temp_db_instance)!=null||(_this$context._temp_db_instance=client_db.new_instance());let current_user=Lib().current_user();current_user&&(current_user=this.context._temp_db_instance.get(current_user._id())),Lib.extend({db_instance:this.context._temp_db_instance,current_user},()=>{node_eval.evaluate_event_condition(item,this.context)})}else node_eval.evaluate_event_condition(item,this.context);let referenced_element_id=item.element_id();if(referenced_element_id!=null){var _this$context$element2;let referenced_instance=(_this$context$element2=this.context.element)==null?void 0:_this$context$element2.find_instance_by_id(referenced_element_id);referenced_instance?this._save_element_instance(referenced_instance,referenced_element_id):this._save_element_instance(null,referenced_element_id,!0)}this._find_element_references(item,"find_my_expressions")}_find_element_references(node,expression_finder){let element_expressions=node[expression_finder]("GetElement");for(let exp of element_expressions){let element_id=exp.element_id();this._add_element(element_id,exp)}element_expressions=node[expression_finder]("ThisElement");for(let exp of element_expressions){let element_id=exp.context_element().id();this._add_element(element_id,exp)}element_expressions=node[expression_finder]("DefaultBreakpoint");for(let exp of element_expressions){var _exp$context_element$;let element_id=(_exp$context_element$=exp.context_element().root())==null?void 0:_exp$context_element$.id();element_id&&this._add_element(element_id,exp)}element_expressions=node[expression_finder]("ElementAncestor");for(let exp of element_expressions){let type=exp.get_static_property("ancestor_type"),save_element_instance=instance=>{this._add_element(instance.element.id(),exp)};core_ds_element_utilities.get_runmode_element_ancestor_instance(type,this.context.element,save_element_instance)}let filter_fn=node2=>{var _node$_raw$S$properti;return node2._raw[S.type]==="GetDataFromAPI"&&((_node$_raw$S$properti=node2._raw[S.properties])==null?void 0:_node$_raw$S$properti.provider)==="ipify.GetIP"};for(let exp of node[expression_finder](filter_fn))evaluate.evaluate_json(exp.json,this.context);!this.other_data["Current Position"]&&node[expression_finder]("PageData.\name=Current Position").length>0&&(this.other_data["Current Position"]=page_state.get_page_data("Current Position",this.context)),this.other_data["Current Page Scroll Position"]||(this.other_data["Current Page Scroll Position"]=page_state.page_current_scroll_position()),this.other_data["Current Page Width"]||(this.other_data["Current Page Width"]=page_state.page_width())}_add_element(element_id,exp){var _this$context$element3;let instance=(_this$context$element3=this.context.element)==null?void 0:_this$context$element3.find_instance_by_id(element_id);if(!instance)this._save_element_instance(null,element_id,!0);else{var _next$name;let instance_id=hydrate2.dehydrate_tree(instance);this._save_element_instance(instance,element_id);let next=exp.next(),message_name=next==null||(_next$name=next.name)==null?void 0:_next$name.call(next);if(message_name){var _this$element_state4,_this$element_state4$;(_this$element_state4$=(_this$element_state4=this.element_state)[instance_id])!=null||(_this$element_state4[instance_id]={});let message=btypes.get("element."+element_id).get_message(message_name),fake_instance={state:key=>{let value=instance.state(key);if(this.element_state[instance_id][key]=hydrate2.dehydrate_tree(value!=null?value:null),typeof value=="string"&&instance.is_secure()&&value.trim().length>2){var _this$other_data,_this$other_data$secu;(_this$other_data$secu=(_this$other_data=this.other_data).secure_list)!=null||(_this$other_data.secure_list=[]),this.other_data.secure_list.push(value.trim())}return value},is_visible:()=>{let value=instance.is_visible();return this.element_state[instance_id].is_visible=hydrate2.dehydrate_tree(value!=null?value:null),value},toUniqueString:()=>instance.toUniqueString(),element:instance.element,element_id:()=>instance.element_id(),find_instance_by_id:id=>instance.find_instance_by_id(id),is_destroyed:()=>instance.is_destroyed(),run_mode:()=>instance.run_mode(),get_static_property:(name,precomputed)=>instance.get_static_property(name,precomputed),_watchers:instance._watchers,_created_watchers:instance._created_watchers,is_fake_instance:!0};message.evaluate(fake_instance,null,null,null,this.context)}}}clone(context){let clone=new _FrozenState(context);for(let prop of["cache","exists","element_instances","element_state","other_data"])clone[prop]=u.json_deep_copy(this[prop]);for(let states of decaf.object_values(clone.element_state))for(let[state,value]of decaf.object_entries(states))value!=null&&value[eval_consts.NV_MARKER]&&delete states[state];return clone}get_client_state(){return{element_instances:this.element_instances,element_state:this.element_state,other_data:this.other_data,cache:this.cache,exists:this.exists}}update_from_action(action,return_value,properties_promise,context){let changes={},set_data=(k,v)=>{this.set(k,v),changes[k]={v}},previous_step_key=state_keys.PreviousStep(action.id());return return_value&&set_data(previous_step_key,return_value),action.return_value().id()&&set_data(previous_step_key+"_value",action.return_value().id()),properties_promise.then(properties=>{var _action$get_data_to_r;b_fiber.optional_pause();let to_refresh=(_action$get_data_to_r=action.get_data_to_refresh(properties,context))!=null?_action$get_data_to_r:{};return b_fiber.optional_pause(),decaf.object_entries(to_refresh).forEach(_ref2=>{let[key,value]=_ref2;if(b_fiber.optional_pause(),value!=null?(value===eval_consts.NULL_VALUE_TO_REGISTER&&(value=null),this.set(key,value),changes[key]={v:value}):(this.clear(key),changes[key]={x:!0}),u.on_server()&&key.indexOf(eval_consts.ESTATE_PREFIX)===0){let instance_id=key.replace(eval_consts.ESTATE_PREFIX,"");this.element_state[instance_id]&&decaf.object_entries(value).forEach(_ref3=>{let[state_name,new_value]=_ref3;b_fiber.optional_pause(),new_value!=null&&(this.element_state[instance_id][state_name]=hydrate2.dehydrate_tree(new_value))})}}),changes})}get(key){let short_key=this.shorten(key),value=this.exists[short_key]?this.cache[short_key]:void 0;return investigations.frozen_state_debugging.active()&&this.push_raw_access_log({action:"get",key,short_key,value:value!=null?value:null}),hydrate2.rehydrate_tree(Lib().db_instance(),value)}set(key){var _async_state$CurrentN;let value=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(((_async_state$CurrentN=async_state.CurrentNotReadyCatcher)==null?void 0:_async_state$CurrentN.length)>0)return;let short_key=this.shorten(key),dehydrated_value=hydrate2.dehydrate_tree(value);this.cache[short_key]=dehydrated_value,this.exists[short_key]=!0,investigations.frozen_state_debugging.active()&&(this.unshrunk_keys[short_key]=key,this.push_raw_access_log({action:"set",key,short_key,value:dehydrated_value}))}clear(key){let short_key=this.shorten(key);delete this.cache[short_key],delete this.exists[short_key],investigations.frozen_state_debugging.active()&&this.push_raw_access_log({action:"clear",short_key})}has_key(key){let short_key=this.shorten(key),value=this.exists[short_key];return investigations.frozen_state_debugging.active()&&this.push_raw_access_log({action:"has_key",short_key,value:value!=null?value:!1}),this.exists[short_key]}push_raw_access_log(_ref4){var _Error$stack;let{action,key,short_key,value,rehydrated}=_ref4;this.raw_access_log.push({action,short_key,key,value,rehydrated,timestamp:Date.now(),stack:((_Error$stack=new Error().stack)==null?void 0:_Error$stack.split("\n").slice(2,52).join("\n"))||"Stack unavailable."})}is_trusted(key){if(u.on_client())return!0;{let short_key=this.shorten(key);return this.trustworthy[short_key]===!0}}trust(key){if(!u.on_client()){let short_key=this.shorten(key);this.trustworthy[short_key]=!0}}serialize(){return{cache:this.cache,exists:this.exists,element_instances:this.element_instances,element_state:this.element_state,other_data:this.other_data}}};FrozenState.dehydrate_context=null;module.exports=FrozenState;var appquery=require_appquery(),Lib=require_lib(),client_db=require_client_db(),evaluate=require_evaluate(),btypes=require_btypes(),shrink=require_shrink(),{S}=shrink}});var require_drawstate=__commonJS({"lib-browser-old/renderer/drawstate.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.checkNonDeferrable=checkNonDeferrable;exports.mustRegisterId=mustRegisterId;exports.watchDraw=watchDraw;require_web_dom_collections_for_each();require_es_array_iterator();require_web_dom_collections_iterator();require_es_object_values();var _b_async=require_b_async3(),_appquery=_interopRequireDefault(require_appquery()),_uuid=require_uuid(),_shrink=require_shrink();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function waitForVisible(instance){if(instance._is_visible||instance.is_visible(!0))return(0,_b_async.FakeKey)();let key=(0,_b_async.MakeKey)(void 0,"".concat(instance.element_id()," turned visible"));return instance._is_visible_cbs.push(()=>{key.turn()}),key}function watchDraw(instance,callbacks){function sizeDraw(instance2,parentDrawn){let turnedVisible=waitForVisible(instance2),selfDrawn=(0,_b_async.MakeKeyList)([parentDrawn,turnedVisible]);function iterateChildren(cb){if(!instance2.element.draws_own_children()){let iterate=function(){instance2.children.forEach(child=>{child.element.added_to_container()&&cb(child)})};instance2.child_container==null&&instance2.children.length>0?instance2.wait_for_first_draw(iterate):iterate()}}if(selfDrawn.is_turned())callbacks.onDraw(instance2),iterateChildren(child=>{sizeDraw(child,(0,_b_async.FakeKey)())});else{let sizeDrawChildren=function(){instance2.element.ignores_child_sizes()?(0,_b_async.WaitFor)(selfDrawn,()=>{iterateChildren(child=>{sizeDraw(child,(0,_b_async.FakeKey)())})}):iterateChildren(child=>{sizeDraw(child,selfDrawn)})};callbacks.onSizeDraw(instance2),(0,_b_async.WaitFor)(selfDrawn,()=>callbacks.onDraw(instance2)),instance2.element.no_size_when_hidden()?(0,_b_async.WaitFor)(turnedVisible,sizeDrawChildren):sizeDrawChildren()}}sizeDraw(instance,(0,_b_async.FakeKey)())}var ALWAYS_DEFERRED=new Set(["Alert","AutocompleteDropdown","Button","Checkbox","CustomDefinition","DateInput","Dropdown","FileInput","FloatingGroup","GoogleMaps","Group","GroupFocus","GroupWithFocus","Icon","Image","Input","Link","MultiLineInput","Page","PictureInput","Popup","PoweredByBubble","RadioButtons","RepeatingGroup","Shape","SliderInput","TableElement","TableMainAxis","TableCrossAxis","TableCell","Text","VideoComponent"]),customsChecking=new Set,customsChecked=new Set,mustRegister=new Set;function isAlwaysDeferred(rawJson){let type=rawJson[_shrink.S.type];if(ALWAYS_DEFERRED.has(type)||(0,_uuid.is_UUID)(type))return!0;if(type==="CustomElement"){var _rawJson$S$properties;let customId=(_rawJson$S$properties=rawJson[_shrink.S.properties])==null?void 0:_rawJson$S$properties[_shrink.S.custom_id];if(customId==null)return!1;let customDefinition=_appquery.default.custom_definition(customId);if(customDefinition==null)return!1;if(!customsChecked.has(customId)){if(customsChecking.has(customId))return!1;customsChecking.add(customId),checkNonDeferrable(customDefinition),customsChecked.add(customId)}return!mustRegister.has(customId)}if(type==="HTML"){var _rawJson$S$properties2;return((_rawJson$S$properties2=rawJson[_shrink.S.properties])==null?void 0:_rawJson$S$properties2.defer_drawing)===!0}return!1}function checkNonDeferrableJson(rawJson){let nonDeferrable=!1,children2=rawJson[_shrink.S.elements];if(children2!=null){for(let childJson of Object.values(children2))if((childJson==null?void 0:childJson[_shrink.S.id])!=null){let childNonDeferrable=checkNonDeferrableJson(childJson);nonDeferrable||(nonDeferrable=childNonDeferrable)}}return nonDeferrable||!isAlwaysDeferred(rawJson)?(mustRegister.add(rawJson[_shrink.S.id]),!0):!1}function checkNonDeferrable(root){let rawJson=root.json._raw();(rawJson==null?void 0:rawJson[_shrink.S.id])!=null&&checkNonDeferrableJson(rawJson),(!root.is_responsive_v1()||root.events().some(event=>!event.deferrable()))&&mustRegister.add(root.id())}function mustRegisterId(id){return mustRegister.has(id)}}});var require_Expression=__commonJS({"lib-browser-old/lang/expressions/Expression.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();var u=require_u2(),Lib=require_lib(),logger=require_logger(),nodes=require_nodes(),btypes=require_btypes(),expression_utils=require_expression_utils(),appquery=require_appquery();module.exports=class extends nodes.HasProperties{constructor(json,owner){if(super(json),!owner)throw new u.UnexpectedError("expression created without owner");this.owner=owner,this._property_owner=this.owner}make_new(){return nodes.new_expression(...arguments)}has_next(){return!1}has_args(){return!1}is_empty(){return!1}is_literal(){return!1}get_spot(){return"DynamicAtom"}get_literal(){return null}get_eval_value(){return btypes.get("null")}raw(){return this.json.raw()}node_name(){return this.json.name()}get_tree_display(){return this.display()}display_simple(){return this.display()}element_id(){return this.get_static_property("element_id")}pretty_print(indent){try{return indent+this.get_tree_display()}catch(err){return"".concat(indent,"Error trying to pretty_print ").concat(this.constructor.name,":\n").concat(err.stack)}}context_element(){return this.owner.context_element()}parent_expression(){var _this$owner$type,_this$owner;let parent_json=this.json.parent(),owner_path=this.owner.path();return!owner_path||!parent_json||parent_json.path()===owner_path||((_this$owner$type=(_this$owner=this.owner).type)==null?void 0:_this$owner$type.call(_this$owner))==="FakeMultiElement"?null:nodes.new_expression(parent_json,this.owner)}parent_expressions(filter){let res=[],cur=this;for(;cur=cur.parent_expression();)res.push(cur);return nodes.filter_array(filter,res)}safe_search_upwards(search_fn){let search_node=this;for(search_node!=null&&typeof search_node.json.id!="function"&&logger.warn("Missing ID function",{original_node_path:this.path(),search_node_json_type:typeof search_node.json,original_node_id:this.id(),search_node_id:search_node.json.id});search_node!=null&&(search_node.id()==null||typeof search_node.id()=="string")&&appquery.by_id(search_node.id())==null;){let found=search_fn(search_node);if(found!==!1)return found;if(search_node.path().split(".").length<2)return logger.info("Blocked reading the full app",{parent_path:search_node.path(),original_node_path:this.path(),original_node_id:this.id()}),!1;search_node=search_node.parent_expression(),search_node!=null&&typeof search_node.json.id!="function"&&logger.warn("Missing ID function",{search_node_json_type:typeof search_node.json,search_node_id:search_node.json.id,original_node_path:this.path(),original_node_id:this.id(),parent_path:search_node.path()})}return!1}serialize_args(){return[this.json,this.owner]}find_expressions(filter){return nodes.from_raw_array(this.json,nodes.new_expression,expression_utils.expression_find_expressions(nodes.to_raw(this),nodes.make_filter(filter)))}}}});var require_StaticExpression=__commonJS({"lib-browser-old/lang/expressions/StaticExpression.js"(exports,module){"use strict";init_define_process_env();init_shim();var nodes=require_nodes(),Expression=require_Expression();module.exports=class extends Expression{is_static(){return!0}find_expressions(){return nodes.enhance_array([])}field_names(){return{}}}}});var require_Empty=__commonJS({"lib-browser-old/lang/expressions/Empty.js"(exports,module){"use strict";init_define_process_env();init_shim();var btypes=require_btypes(),StaticExpression=require_StaticExpression();module.exports=class extends StaticExpression{get_static(){return null}is_empty(){return!0}get_value(){return btypes.get("null")}get_eval_value(){return btypes.get("null")}display(){return""}type(){return"Empty"}get_spot(){return"Atom"}}}});var require_Literal=__commonJS({"lib-browser-old/lang/expressions/Literal.js"(exports,module){"use strict";init_define_process_env();init_shim();var btypes=require_btypes(),expression_utils=require_expression_utils(),StaticExpression=require_StaticExpression();module.exports=class extends StaticExpression{get_static(){return this.json.get()}is_literal(){return!0}get_literal(){return this.json.get()}type(){return typeof this.json.get()}get_value(){return btypes.get(expression_utils.lit_eval_value(this.type()))}get_eval_value(){return btypes.get(expression_utils.lit_eval_value(this.type()))}get_spot(){return"Atom"}get_tree_display(){let val=this.json.get();switch(this.type()){case"string":case"number":return val;case"boolean":return val?"yes":"no"}}display(){let val=this.json.get();switch(this.type()){case"string":return"\u201C"+val+"\u201D";case"boolean":return val?'"yes"':'"no"';case"number":return val}}display_simple(){let val=this.json.get();switch(this.type()){case"string":return val;case"boolean":return val?'"yes"':'"no"';case"number":return val}}}}});var require_evaluate_static=__commonJS({"lib-browser-old/lang/evaluation/evaluate_static.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_object_values();var{raw_to_child_names}=require_json_utils(),shrink=require_shrink(),evaluate_static=exports,{S}=shrink;evaluate_static.is_static=function(_raw){if(!_raw)return!0;let type=_raw[S.type];if(type){if(type==="GeoAddress"||type==="Empty")return!0;if(type==="TextExpression"){var _raw$S$entries;let entries=(_raw$S$entries=_raw[S.entries])!=null?_raw$S$entries:{};return Object.values(entries).every(v=>evaluate_static.is_static(v))}else return!1}return typeof _raw=="object"?Object.values(_raw).every(v=>evaluate_static.is_static(v)):!0};evaluate_static.get_static=function(_raw){if(_raw==null)return null;let type=_raw[S.type];if(type)switch(type){case"Empty":return null;case"Message":return null;case"TextExpression":return evaluate_static.get_static_text_expression(_raw);case"GeoAddress":return _raw[S.val];default:return null}return typeof _raw=="object"?evaluate_static.get_static_object_literal(_raw):_raw};evaluate_static.get_static_text_expression=function(_raw){let entries=_raw[S.entries];return raw_to_child_names(entries).map(_entry_name=>evaluate_static.get_static(entries[_entry_name])).join("")};evaluate_static.get_static_object_literal=function(_raw){let res={};for(let k in _raw){let v=_raw[k],evaled=evaluate_static.get_static(v);res[shrink.expand(k)]=evaled}return res}}});var require_ObjectLiteral=__commonJS({"lib-browser-old/lang/expressions/ObjectLiteral.js"(exports,module){"use strict";init_define_process_env();init_shim();require_web_dom_collections_for_each();require_es_array_reduce();require_es_array_reverse();require_es_array_flat_map();require_es_array_unscopables_flat_map();require_es_array_iterator();require_web_dom_collections_iterator();var _dec,_class;function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key]}),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce(function(desc2,decorator){return decorator(target,property,desc2)||desc2},desc),context&&desc.initializer!==void 0&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),desc.initializer===void 0&&(Object.defineProperty(target,property,desc),desc=null),desc}var nodes=require_nodes(),caching=require_caching(),evaluate_static=require_evaluate_static(),Expression=require_Expression(),ObjectLiteral=(_dec=caching.cached({type:caching.RUN_MODE}),_class=class extends Expression{set_field_data(field_data_fn){this.field_names=()=>field_data_fn().map(item=>item.name),this._fields=field_data_fn}entry(name){return nodes.new_expression(this.json.child(name),this.owner)}type(){return"ObjectLiteral"}id(){let id=super.id();return typeof id!="string"?null:id}next(){if(!this.json.child("next").empty())return this.entry("next")}display(){return this.pretty_print(" ")}pretty_print(){let indent=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",header=indent+"ObjectLiteral:",body=this.entries().flatMap(entry=>[indent+"  "+entry.json.name(),entry.pretty_print(indent+"    ",!1)]);return[header,...body].join("\n")}_process(e_fn){let res={};for(let entry of this.entries()){let evaled=e_fn(entry);res[entry.json.name()]=evaled}return res}properties(){return this.entries()}property(name){return this.entry(name)}get_static_property(name){return this.property(name).get_static()}is_static(){return this.entries().every(entry=>entry.is_static())}get_static(){return evaluate_static.get_static_object_literal(this.json._raw())}check_for_errors(){return{children:this.properties()}}entries(){return nodes.enhance_array(this.json.children().map(json=>nodes.new_expression(json,this.owner)))}},_applyDecoratedDescriptor(_class.prototype,"entries",[_dec],Object.getOwnPropertyDescriptor(_class.prototype,"entries"),_class.prototype),_class);module.exports=ObjectLiteral}});var require_TextExpression=__commonJS({"lib-browser-old/lang/expressions/TextExpression.js"(exports,module){"use strict";init_define_process_env();init_shim();require_web_dom_collections_for_each();require_es_array_reduce();require_es_array_reverse();require_es_array_iterator();require_web_dom_collections_iterator();var _dec,_class;function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key]}),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce(function(desc2,decorator){return decorator(target,property,desc2)||desc2},desc),context&&desc.initializer!==void 0&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),desc.initializer===void 0&&(Object.defineProperty(target,property,desc),desc=null),desc}var nodes=require_nodes(),caching=require_caching(),btypes=require_btypes(),shrink=require_shrink(),evaluate_static=require_evaluate_static(),Expression=require_Expression(),{S}=shrink,TextExpression=(_dec=caching.cached({type:caching.RUN_MODE}),_class=class extends Expression{entry(name){return nodes.new_expression(this.json._gchild(S.entries,shrink.shrink(name)),this.owner)}type(){return"TextExpression"}properties(){return this.entries()}is_static(){return this.entries().every(entry=>entry.is_static())}get_static(){return evaluate_static.get_static_text_expression(this.json._raw())}get_tree_display(make_dynamic_null){return this.entries().map(entry=>entry.get_tree_display(make_dynamic_null)).join("")}display(){return this.get_tree_display()}get_eval_value(){return btypes.get("text")}field_names(){return{}}entries(){return nodes.enhance_array(this.json._child(S.entries).children().map(json=>nodes.new_expression(json,this.owner)))}},_applyDecoratedDescriptor(_class.prototype,"entries",[_dec],Object.getOwnPropertyDescriptor(_class.prototype,"entries"),_class.prototype),_class);module.exports=TextExpression}});var require_LiveExpression=__commonJS({"lib-browser-old/lang/expressions/LiveExpression.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_regexp_exec();require_es_regexp_test();require_web_dom_collections_for_each();require_es_json_stringify();require_es_string_split();var u=require_u2(),Lib=require_lib(),btypes=require_btypes(),shrink=require_shrink(),nodes=require_nodes(),Expression=require_Expression(),{S}=shrink;module.exports=class extends Expression{has_next(){return!0}is_static(){return!1}get_static(){return null}get_static_property_fetcher(){return name=>this.get_static_property(name)}get_tree_display(make_dynamic_null){if(make_dynamic_null){var _this$get_eval_value,_this$get_eval_value$,_this$get_eval_value$2;return(_this$get_eval_value=this.get_eval_value)==null||(_this$get_eval_value$=_this$get_eval_value.call(this))==null||(_this$get_eval_value$2=_this$get_eval_value$.get_bubble_null)==null?void 0:_this$get_eval_value$2.call(_this$get_eval_value$)}let base_display=this.display(),args_display=this.has_args()?this.args().get_tree_display():"",next_display=this.has_next()?this.next().get_tree_display():"";return base_display+args_display+next_display}next(){return nodes.new_expression(this.json._child(S.next),this.owner)}type(){return this.json.child("type").get()}get_eval_value(report){if(this.has_args()){let args=this.args();if(!this.get_arg_btype().matches(args.get_eval_value())){if(report){let new_display=this.get_arg_btype().display(),old_display=args.get_eval_value().display_for_issue();old_display===new_display&&(old_display="different "+old_display);let an=/^[aeiou]/.test(old_display[0])?"an":"a";report("This argument should be a ".concat(new_display," but right now it is ").concat(an," ").concat(old_display),args)}return btypes.get("null")}}let next=this.next();return next.is_empty()?this.get_value():next.get_eval_value(report)}_find_used_properties(){return this.get_spot()==="SlidableAtom"?this.fields().filter(field=>Lib().getChecker(this,field).condition()).map(field=>this.property(field.name)):this.properties()}}}});var require_DataSource=__commonJS({"lib-browser-old/lang/expressions/DataSource.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();var u=require_u2(),Lib=require_lib(),btypes=require_btypes(),expression_utils=require_expression_utils(),LiveExpression=require_LiveExpression();module.exports=class extends LiveExpression{constructor(json,owner,type){var _this$D;super(json,owner),this.D=Lib().load_plugin(Lib().plugin_prefixes.datasource+type,!0),(_this$D=this.D)!=null||(this.D=expression_utils.missing_datasource(type)),this._type=type}field_names(){if(!this.D.field_names)throw new u.UnexpectedError("missing field_names for datasource "+this._type);return this.D.field_names}_fields(){return this.D.fields(this.get_static_property_fetcher(),this)}has_args(){return!1}get_value(){let value_id=this.D.get_value(this.get_static_property_fetcher(),this);return btypes.get(value_id)}display(){return this.D.display?this.D.display(this.get_static_property_fetcher(),this):"DataSource ".concat(this._type)}get_spot(){var _this$D$get_spot,_this$D$get_spot2,_this$D2;return(_this$D$get_spot=(_this$D$get_spot2=(_this$D2=this.D).get_spot)==null?void 0:_this$D$get_spot2.call(_this$D2))!=null?_this$D$get_spot:"DynamicAtom"}get_literal(){return this.raw()}serialize_args(){return[this.json,this.owner,this._type]}is_equal_to(node){return super.is_equal_to(node)&&this._type===node._type}thumbnail_id(){var _this$D$thumbnail_id,_this$D$thumbnail_id2,_this$D3;return(_this$D$thumbnail_id=(_this$D$thumbnail_id2=(_this$D3=this.D).thumbnail_id)==null?void 0:_this$D$thumbnail_id2.call(_this$D3,this.get_static_property_fetcher(),this))!=null?_this$D$thumbnail_id:super.thumbnail_id()}}}});var require_MessageNode=__commonJS({"lib-browser-old/lang/expressions/MessageNode.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_symbol_description();var u=require_u2(),nodes=require_nodes(),btypes=require_btypes(),LiveExpression=require_LiveExpression();function message_not_found(name){return{fn(){},ret_btype:()=>btypes.get("null"),arg_btype:()=>null,spot_data(){},field_names:{},_fields(){},M:()=>({}),description:()=>"[Not found: ".concat(name,"]"),NOT_FOUND:!0}}module.exports=class extends LiveExpression{constructor(json,owner){var _this$prior$get_value,_this$prior$get_value2,_this$prior,_this$_parent_value$g,_this$_parent_value;super(json,owner),this._name=this.json.child("name").get(),this._parent_value=(_this$prior$get_value=(_this$prior$get_value2=(_this$prior=this.prior()).get_value)==null?void 0:_this$prior$get_value2.call(_this$prior))!=null?_this$prior$get_value:btypes.get("null"),this._message=(_this$_parent_value$g=(_this$_parent_value=this._parent_value)==null?void 0:_this$_parent_value.get_message(this.name()))!=null?_this$_parent_value$g:message_not_found(this._name)}name(){return this._name}is_equal_to(node){return!(!super.is_equal_to(node)||this._name!==node.name()||this._parent_value.id()!==node._parent_value.id()||this.get_value().id()!==node.get_value().id())}message(){return this._message}get_value(){return this._message.ret_btype(this.json._raw())}has_args(){return this._message.arg_btype()!=null}args(){return nodes.new_expression(this.json.child("args"),this.owner)}get_arg_btype(){return this._message.arg_btype()}prior(){return nodes.new_expression(this.json.parent(),this.owner)}get_spot(){var _this$_message$spot_d;return(_this$_message$spot_d=this._message.spot_data())!=null?_this$_message$spot_d:"DynamicAtom"}field_names(){if(!this._message.field_names){var _this$_parent_value2,_this$_parent_value2$;throw new u.UnexpectedError("message "+this._name+" on  "+((_this$_parent_value2=this._parent_value)==null||(_this$_parent_value2$=_this$_parent_value2.display)==null?void 0:_this$_parent_value2$.call(_this$_parent_value2))+" is missing field_names")}return this._message.field_names()}display(){return this._message.description(this)}}}});var require_GeoAddressNode=__commonJS({"lib-browser-old/lang/expressions/GeoAddressNode.js"(exports,module){"use strict";init_define_process_env();init_shim();var b_location=require_b_location(),btypes=require_btypes(),StaticExpression=require_StaticExpression();module.exports=class extends StaticExpression{is_static(){return!0}get_address(){return b_location.get_address(this.json.child("val").raw())}get_static(){return this.json.child("val").raw()}get_literal(){return this.json.child("val").raw()}type(){return"GeoAddress"}get_eval_value(){return btypes.get("geographic_address")}get_tree_display(){return this.get_address()}display(){return this.get_address()}}}});var require_expressions=__commonJS({"lib-browser-old/lang/expressions/index.js"(exports){"use strict";init_define_process_env();init_shim();var u=require_u2(),nodes=require_nodes(),Expression=require_Expression(),Empty=require_Empty(),Literal=require_Literal(),ObjectLiteral=require_ObjectLiteral(),TextExpression=require_TextExpression(),LiveExpression=require_LiveExpression(),DataSource=require_DataSource(),MessageNode=require_MessageNode(),GeoAddressNode=require_GeoAddressNode(),expression_utils=require_expression_utils(),evaluate=require_evaluate(),evaluate_static=require_evaluate_static(),expressions=exports;expressions.make_partial_expression_evaluator=evaluate.make_partial_expression_evaluator;expressions.create_reduced=expression_utils.create_reduced;expressions.expression_find_expressions=expression_utils.expression_find_expressions;expressions.get_static=evaluate_static.get_static;expressions.is_static=evaluate_static.is_static;nodes.add(nodes.EXPRESSION,Expression);nodes.add(nodes.EMPTY,Empty);nodes.add(nodes.LITERAL,Literal);nodes.add(nodes.OBJECT_LITERAL,ObjectLiteral);nodes.add(nodes.TEXT_EXPRESSION,TextExpression);nodes.add(nodes.LIVE_EXPRESSION,LiveExpression);nodes.add(nodes.DATA_SOURCE,DataSource);nodes.add(nodes.MESSAGE_NODE,MessageNode);nodes.add(nodes.GEO_ADDRESS_NODE,GeoAddressNode);nodes.add_generic("expression",u.is_edit_mode()?create_expression_edit:create_expression_base);function create_expression_edit(json,owner){var _owner$type,_owner$type2,_owner$id,_owner$id2;let owner_type=(_owner$type=(_owner$type2=owner.type)==null?void 0:_owner$type2.call(owner))!=null?_owner$type:"no_type",owner_id=(_owner$id=(_owner$id2=owner.id)==null?void 0:_owner$id2.call(owner))!=null?_owner$id:"no_id",smart_cache_key="expression_".concat(owner_id,"_").concat(owner_type);return json.smart_cache(smart_cache_key,new_expression,owner)}function create_expression_base(json,owner){return json.smart_cache("expression",new_expression,owner)}function new_expression(json,owner){if(json.empty())return new Empty(json,owner);let type=json.child("type").get();if(type)switch(type){case"Empty":return new Empty(json,owner);case"Message":return new MessageNode(json,owner);case"TextExpression":return new TextExpression(json,owner);case"GeoAddress":return new GeoAddressNode(json,owner);default:return new DataSource(json,owner,type)}return json.raw_type()==="object"?new ObjectLiteral(json,owner):new Literal(json,owner)}}});var require_TestContext=__commonJS({"lib-browser-old/renderer/TestContext.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=exports.TestContext=void 0;var _solidJs=(init_solid(),__toCommonJS(solid_exports)),TestContext=(0,_solidJs.createContext)();exports.TestContext=TestContext;var _default=TestContext;exports.default=_default}});var require_autorun_signals=__commonJS({"lib-browser-old/renderer/solid_utils/autorun_signals.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.createAutorun=createAutorun;exports.createWatcher=createWatcher;exports.onAfterMount=onAfterMount;require_es_array_iterator();require_web_dom_collections_iterator();require_es_promise();var autorun=_interopRequireWildcard(require_autorun3()),mode_check=_interopRequireWildcard(require_mode_check()),_solidJs=(init_solid(),__toCommonJS(solid_exports)),_TestContext=_interopRequireDefault(require_TestContext()),_errors=require_errors();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function onAfterMount(fn,inputs){(0,_solidJs.createEffect)(()=>{var _inputs$map;let cleanupFn,destroyed=!1,evaluated=(_inputs$map=inputs==null?void 0:inputs.map(f=>f()))!=null?_inputs$map:[];if(mode_check.running_test()){let testContext=(0,_solidJs.useContext)(_TestContext.default);if(testContext==null)throw new _errors.UnexpectedError("Invalid test state while running solid test");testContext.afterMounts.push(()=>{cleanupFn=fn(...evaluated)})}else Promise.resolve().then(()=>{destroyed||(cleanupFn=fn(...evaluated))});(0,_solidJs.onCleanup)(()=>{var _cleanupFn;(_cleanupFn=cleanupFn)==null||_cleanupFn(),destroyed=!0})})}function createAutorun(fn){onAfterMount(()=>{let ar=autorun.autorun(fn);return()=>ar.destroy()})}function createWatcher(fn,options){let[value,setValue]=(0,_solidJs.createSignal)(options==null?void 0:options.fallback);return onAfterMount(function(){for(var _len=arguments.length,inputs=new Array(_len),_key=0;_key<_len;_key++)inputs[_key]=arguments[_key];let watcher=autorun.Watcher(()=>fn(...inputs));return watcher.on_value(setValue),()=>watcher.destroy()},options==null?void 0:options.inputs),value}}});var require_EditorContext=__commonJS({"lib-browser-old/renderer/EditorContext.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=exports.FIRST_DIVIDER=exports.EditorContext=void 0;require_es_symbol_description();var _solidJs=(init_solid(),__toCommonJS(solid_exports)),FIRST_DIVIDER=Symbol("FIRST");exports.FIRST_DIVIDER=FIRST_DIVIDER;var EditorContext=(0,_solidJs.createContext)();exports.EditorContext=EditorContext;var _default=EditorContext;exports.default=_default}});var require_LegacyComponent=__commonJS({"lib-browser-old/renderer/LegacyComponent.js"(exports){"use strict";init_define_process_env();init_shim();require_es_symbol_description();require_es_error_cause();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=LegacyComponent;require_es_regexp_exec();require_es_string_replace();var _web=(init_web(),__toCommonJS(web_exports)),_solidJs=(init_solid(),__toCommonJS(solid_exports)),_responsive_css=_interopRequireDefault(require_responsive_css()),_EditorContext=require_EditorContext(),_autorun_signals=require_autorun_signals();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}function LegacyComponent(props){let instance=props.instance;if(instance.edit_mode()){let componentBuilder=instance.element.E.edit_fallback_component;if(componentBuilder!=null){let el=Object.create(instance.element);el.should_add_extra_wrapper=()=>!1;let Component=componentBuilder.buildComponent(el,void 0);return(0,_solidJs.onMount)(()=>{instance.is_drawn||(instance.mark_skeleton_ready(),instance.initialize_canvas())}),(0,_web.createComponent)(Component,{instance})}}let addedToContainer=instance.element.added_to_container();if(instance.canvas==null){let className2=instance.edit_mode()?"inner-element":"bubble-element ".concat(instance.element.type()),html=instance.get_html();instance.canvas=$(html),instance.canvas.addClass(className2),instance.edit_mode()&&instance.canvas.attr("id",instance.element_id().replace(/[^a-zA-Z0-9]/g,"_")),instance.canvas[0].bubble_data={bubble_instance:instance},instance._observe_canvas()}if((0,_autorun_signals.onAfterMount)(()=>{let canvas=instance.canvas;!addedToContainer&&!instance.thumbnail_mode()&&instance.position_canvas(canvas),instance.has_skeleton||instance.create_child_skeletons();let ars=[];return!instance.edit_mode()&&addedToContainer&&ars.push(instance.autorun(()=>{canvas.css(_responsive_css.default.element_reset),canvas.css(instance.container.element_css(instance))}),instance.autorun(()=>{canvas.css("z-index",instance.element.get_zindex())}),instance.autorun(()=>{instance.get_static_property("collapse_when_hidden")?instance.autorun(()=>{instance.container.should_collapse(instance)?canvas.css("display","none"):canvas.css("display","")}).set_run_immediately(!0):canvas.css("display","")})),instance.edit_mode()&&!instance._is_visible_me&&instance._hide_me(),instance.mark_skeleton_ready(),instance.is_drawn||instance.initialize_canvas(),instance.get_children_drawn_key().turn(),()=>{ars.forEach(ar=>{ar.destroy()})}}),instance.edit_mode()){let editStyle=(0,_solidJs.createMemo)(()=>_objectSpread(_objectSpread({},instance.container.element_css(instance)),{},{"z-index":instance.element.get_zindex(),display:instance.get_static_property("collapse_when_hidden")&&instance.container.should_collapse(instance)?"none":""})),EditWrapper=(0,_solidJs.useContext)(_EditorContext.EditorContext).wrapper;return(0,_web.createComponent)(EditWrapper,{instance,get style(){return editStyle()},get children(){return instance.canvas[0]}})}else return addedToContainer?instance.canvas[0]:document.createTextNode("")}}});var require_RenderElement=__commonJS({"lib-browser-old/renderer/RenderElement.js"(exports){"use strict";init_define_process_env();init_shim();require_es_promise();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.RenderElement=RenderElement;require_es_array_iterator();require_web_dom_collections_iterator();var _web=(init_web(),__toCommonJS(web_exports)),_solidJs=(init_solid(),__toCommonJS(solid_exports)),logger=_interopRequireWildcard(require_logger()),_autorun_signals=require_autorun_signals(),_LegacyComponent=_interopRequireDefault(require_LegacyComponent()),_autorun=require_autorun3();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self2=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self2,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function RenderElement(props){var _instance$element$sol;let instance=props.instance;if(!instance.is_solid_initialized){logger.warn("Attempting to render an element which doesn't have solid initialized. ".concat(instance.toUniqueString()));return}(instance.element.solid_component!=null||instance.children.length===0)&&(0,_autorun_signals.onAfterMount)(()=>instance.mark_skeleton_ready());let SolidComponent=(_instance$element$sol=instance.element.solid_component)!=null?_instance$element$sol:_LegacyComponent.default,renderComponent=()=>instance.child_container?(0,_web.createComponent)(SolidComponent,(0,_web.mergeProps)(props,{get children(){return instance.children.map(child=>(0,_web.createComponent)(RenderElement,{instance:child}))}})):(0,_web.createComponent)(SolidComponent,props);if(instance.thumbnail_mode()){let[ready]=(0,_solidJs.createResource)(_asyncToGenerator(function*(){return yield(0,_autorun.run_once)(30,()=>{var _instance$element$E$c,_instance$element$E;return instance.element.raw(),(_instance$element$E$c=(_instance$element$E=instance.element.E).custom_definition)==null||_instance$element$E$c.call(_instance$element$E).raw(),!0})}));return instance.element.E.use_legacy_in_thumbnail&&(renderComponent=()=>(0,_web.createComponent)(_LegacyComponent.default,props)),(0,_web.createComponent)(_solidJs.Show,{get when(){return ready()},get children(){return renderComponent()}})}return(0,_solidJs.untrack)(()=>instance.draw_signal.get())?renderComponent():(0,_web.createComponent)(_solidJs.Show,{get when(){return instance.draw_signal.get()},get children(){return renderComponent()}})}}});var require_ElementInstance=__commonJS({"lib-browser-old/lang/elements/ElementInstance.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_reverse();require_es_symbol_description();require_es_error_cause();require_es_object_get_own_property_descriptors();require_es_weak_map();var _web=(init_web(),__toCommonJS(web_exports));require_es_object_values();require_es_array_includes();require_es_string_includes();require_web_immediate();require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_flat_map();require_es_array_unscopables_flat_map();require_es_array_reduce();require_web_queue_microtask();require_web_dom_collections_for_each();require_es_array_sort();var _solidJs=(init_solid(),__toCommonJS(solid_exports)),_decaf=_interopRequireDefault(require_decaf()),logger=_interopRequireWildcard(require_logger()),eval_consts=_interopRequireWildcard(require_eval()),_caching=_interopRequireDefault(require_caching()),_responsive_layout=_interopRequireDefault(require_responsive_layout()),elements_consts=_interopRequireWildcard(require_elements()),_elements_utils=_interopRequireDefault(require_elements_utils()),rendering_perf=_interopRequireWildcard(require_rendering_perf()),resize_observer=_interopRequireWildcard(require_resize_observer()),_debounce=_interopRequireDefault(require_debounce()),_FrozenState=_interopRequireDefault(require_FrozenState()),_page_state=_interopRequireDefault(require_page_state()),drawstate=_interopRequireWildcard(require_drawstate()),_lib=_interopRequireDefault(require_lib()),_expressions=_interopRequireDefault(require_expressions()),_client_config=_interopRequireDefault(require_client_config2()),_appquery=_interopRequireDefault(require_appquery()),hydrate2=_interopRequireWildcard(require_hydrate()),_loggable=require_loggable(),_autorun=require_autorun3(),_dependency=require_dependency3(),_errors=require_errors(),_b_async=require_b_async3(),uuid=_interopRequireWildcard(require_uuid()),_b_window=require_b_window(),_RenderElement=require_RenderElement(),_mode_check=require_mode_check(),_dec,_class,_class2;function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key]}),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce(function(desc2,decorator){return decorator(target,property,desc2)||desc2},desc),context&&desc.initializer!==void 0&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),desc.initializer===void 0&&(Object.defineProperty(target,property,desc),desc=null),desc}var Mode=function(Mode2){return Mode2.RUN="run",Mode2.EDIT="edit",Mode2.THUMBNAIL="thumbnail",Mode2.RESPONSIVE="responsive",Mode2.REUSABLE_EDIT="reusable_edit",Mode2}(Mode||{}),ALL_MODES=Object.values(Mode),lifecycle_statuses={NONE:0,CONSTRUCTED:1,REGISTERED:2,HAS_SKELETON:4,DRAWN:8,CHILDREN_REGISTERED:16,CHILDREN_DEFERRED:32,CHILDREN_DRAWN:64,SOLID_INITIALIZED:128,CHILDREN_BEING_REGISTERED:256},_used_ids={};function run_mode_unique_id(id){if(_used_ids[id]==null)return _used_ids[id]=0,id;{let ret=id+"_"+String(_used_ids[id]);return _used_ids[id]++,ret}}var ElementInstance=(_dec=_caching.default.cached({type:_caching.default.RUN_MODE}),_class=(_class2=class ElementInstance2{constructor(element,mode){if(this.element=void 0,this.mode=void 0,this.status=void 0,this.canvas=void 0,this._parent=void 0,this.container=void 0,this.child_container=void 0,this.__to_string=void 0,this._destroy_fns=[],this._watchers={},this._created_watchers={},this._msg_handlers={},this._states={},this._has_been_hidden=null,this._has_become_visible=void 0,this._is_visible=null,this._is_visible_cbs=[],this._first_draw_cbs=[],this._is_drawing=!1,this._is_visible_dependency=(0,_dependency.Dependency)(),this.repeating_layout_type=void 0,this.repeating_group_layout=void 0,this.table_element_layout=void 0,this.activeTimeouts=void 0,this._setting_visible=!1,this._is_animating_me=!1,this._instance_opacity=void 0,this._is_animating=!1,this._is_animating_dependency=void 0,this.__is_visible_me=!1,this._is_visible_me_dependency=void 0,this.evaluating_visibility=!1,this._wait_for_visible_polls=0,this._destroy_started=void 0,this._id_namespace=void 0,this._our_children_registered=void 0,this._our_skeleton_ready=void 0,this._is_ready_key=void 0,this._our_children_drawn=void 0,this.__dimension_box_width=void 0,this.__dimension_box_height=void 0,this._sizing_setup=!1,this._p_context=void 0,this._children=void 0,this.draw_signal=void 0,this._old_width=void 0,this._transforms=void 0,!ALL_MODES.includes(mode))throw new _errors.UnexpectedError("unrecognized: "+mode);this.element=element,this.mode=mode,this.status=lifecycle_statuses.CONSTRUCTED,mode!==Mode.RUN&&(this._children=[]),rendering_perf.record_lifecycle(rendering_perf.LifecycleEvent.Constructed),this.__to_string="ElementInstance:"+this.element.type(),this._has_become_visible=(0,_b_async.MakeKey)(void 0,"Become Visible Key"),this._is_visible_me=(0,_autorun.autorun_top)(()=>this.element.is_visible_on_page_load()),this.state("current_width",instance=>(instance.setup_sizing(),instance.state("current_width"))),this.state("current_height",instance=>(instance.setup_sizing(),instance.state("current_height")))}_set_immediate(fn){setImmediate(fn)}_update_visible(){let new_vis=!0;if(!this.container)new_vis=!1;else if(!this._is_visible_me)new_vis=!1;else{let parent=this.parent();if(parent&&(!parent._is_visible||parent._setting_visible)&&(this.element.added_to_container()||this.element.type()==="GroupItem")&&(new_vis=!1),this.element.type()==="TableCell"){let mainAxis=this.find_instance_by_id_no_retry(this.get_static_property("cell_main_axis_id"));mainAxis&&(!mainAxis._is_visible||mainAxis._setting_visible)&&(new_vis=!1)}}if(new_vis!==this._is_visible){this._is_visible=new_vis,this._setting_visible=!0;let to_call=this._is_visible_cbs;this._is_visible_cbs=[],(0,_autorun.autorun_top)(()=>{for(let cb of to_call)cb()}),new_vis&&this._has_become_visible.turn(),this._setting_visible=!1;for(let child of this.current_children)child._update_visible();if(this.element.type()==="TableMainAxis"){var _this$parent$children,_this$parent;let crossAxes=(_this$parent$children=(_this$parent=this.parent())==null?void 0:_this$parent.children.filter(child=>child.element.type()==="TableCrossAxis"))!=null?_this$parent$children:[];for(let crossAxis of crossAxes)for(let cell of crossAxis.children.flatMap(possibleCell=>possibleCell.element.type()==="TableCell"?[possibleCell]:possibleCell.children))cell.get_static_property("cell_main_axis_id")===this.element_id()&&cell._update_visible()}this._is_visible_dependency.invalidate()}}set_animating(state){this._is_animating_me!==state&&(this._is_animating_me=state,this._update_animating())}_update_animating(){var _this$parent2;let is_animating=this._is_animating_me||((_this$parent2=this.parent())==null?void 0:_this$parent2._is_animating);if(this._is_animating!==is_animating){var _this$_is_animating_d;this._is_animating=!!is_animating;for(let child of this.current_children)child._update_animating();(_this$_is_animating_d=this._is_animating_dependency)==null||_this$_is_animating_d.invalidate()}}is_animating(skip_dependency){if(!skip_dependency){var _this$_is_animating_d2;(_this$_is_animating_d2=this._is_animating_dependency)!=null||(this._is_animating_dependency=(0,_dependency.Dependency)()),this._is_animating_dependency.register()}return this._is_animating}set _is_visible_me(new_val){var _this$_is_visible_me_;this.__is_visible_me=new_val,(_this$_is_visible_me_=this._is_visible_me_dependency)==null||_this$_is_visible_me_.invalidate()}get _is_visible_me(){return this.__is_visible_me}is_visible_me(){var _this$_is_visible_me_2;return(_this$_is_visible_me_2=this._is_visible_me_dependency)!=null||(this._is_visible_me_dependency=(0,_dependency.Dependency)()),this._is_visible_me_dependency.register(),this._is_visible_me}is_visible(skip_dependency){if(this.evaluating_visibility){let element_name=this.element.get_name(!0);throw new _errors.OwnerError('Recursion when evaluating visibility on element "'.concat(element_name,'"'))}return this._update_visible(),skip_dependency||this._is_visible_dependency.register(),!!this._is_visible}wait_for_visible_lite(cb,wait_in_thumbnail){if(!this.is_destroyed()){if(this.thumbnail_mode()&&!wait_in_thumbnail){cb();return}if(this.canvas==null){this.wait_for_first_draw(()=>this.wait_for_visible_lite(cb,wait_in_thumbnail));return}this.is_visible(!0)?cb():this._is_visible_cbs.push(cb)}}notify_width(width){var _this$element$E$notif,_this$element$E;this._dimension_box("width",width),(_this$element$E$notif=(_this$element$E=this.element.E).notify_width)==null||_this$element$E$notif.call(_this$element$E,this,width)}wait_for_visible(cb){if(this.is_destroyed())return;if(this.canvas==null){this.wait_for_first_draw(()=>this.wait_for_visible(cb));return}let wait_for_visible_polls_one_call=0;if(this.is_visible(!0)){if(this.is_destroyed())return;if(this.canvas.is(":visible"))cb();else{let observer=new MutationObserver((mutations,obs)=>{if(this.canvas.is(":visible")){obs.disconnect(),cb();return}this._wait_for_visible_polls+=1,wait_for_visible_polls_one_call+=1,this._wait_for_visible_polls%100===0&&Math.random()<.01&&logger.info("poll from wait_for_visible increment of 100",{polls:wait_for_visible_polls_one_call,all_polls:this._wait_for_visible_polls,element_name:this.element.get_name(!0),element_type:this.element.type()}),wait_for_visible_polls_one_call>=50&&wait_for_visible_polls_one_call%50===0&&Math.random()<.05&&logger.info("polls from one wait_for_visible call over 50 increment of 50",{polls:wait_for_visible_polls_one_call,all_polls:this._wait_for_visible_polls,element_name:this.element.get_name(!0),element_type:this.element.type()})});observer.observe(this.canvas[0],{attributes:!0,childList:!0,attributeFilter:["style"]});let parent_instance=this.parent();for(;parent_instance&&parent_instance.element.type()!=="Page";){let parent_canvas=parent_instance.canvas[0];observer.observe(parent_canvas,{attributes:!0,childList:!0,attributeFilter:["style"]}),parent_instance=parent_instance.parent()}this.on_destroy(()=>{observer.disconnect()})}}else this.wait_for_visible_lite(this.wait_for_visible.bind(this,cb),!0)}ensure_visible(){let ensure_visible_lite_key=(0,_b_async.MakeKey)(void 0,"element visible lite key");this.wait_for_visible_lite(()=>ensure_visible_lite_key.turn(),!0),(0,_b_async.ensure_ready)(ensure_visible_lite_key);let ensure_visible_key=(0,_b_async.MakeKey)(void 0,"element visible key"),visibility_check=()=>{var _this$canvas;(_this$canvas=this.canvas)!=null&&_this$canvas.is(":visible")&&(this.clearInterval(interval),ensure_visible_key.turn())},interval=this.setInterval(visibility_check,150);visibility_check(),(0,_b_async.ensure_ready)(ensure_visible_key)}setTimeout(func,delay){var _this$activeTimeouts2;let timeout=setTimeout(()=>{var _this$activeTimeouts;(_this$activeTimeouts=this.activeTimeouts)==null||_this$activeTimeouts.delete(timeout),func()},delay);return this.activeTimeouts=(_this$activeTimeouts2=this.activeTimeouts)!=null?_this$activeTimeouts2:new Set,this.activeTimeouts.add(timeout),timeout}clearTimeout(timeout){var _this$activeTimeouts3;(_this$activeTimeouts3=this.activeTimeouts)==null||_this$activeTimeouts3.delete(timeout),clearTimeout(timeout)}setInterval(func,delay){var _this$activeTimeouts5;let interval=setInterval(()=>{var _this$activeTimeouts4;(_this$activeTimeouts4=this.activeTimeouts)==null||_this$activeTimeouts4.delete(interval),func()},delay);return this.activeTimeouts=(_this$activeTimeouts5=this.activeTimeouts)!=null?_this$activeTimeouts5:new Set,this.activeTimeouts.add(interval),interval}clearInterval(interval){var _this$activeTimeouts6;(_this$activeTimeouts6=this.activeTimeouts)==null||_this$activeTimeouts6.delete(interval),clearInterval(interval)}destroy(){var _this$canvas2,_this$canvas3;if(!this._destroy_started){this._destroy_started=!0,(_this$canvas2=this.canvas)!=null&&_this$canvas2[0].bubble_data&&delete this.canvas[0].bubble_data;for(let timeout of(_this$activeTimeouts7=this.activeTimeouts)!=null?_this$activeTimeouts7:[]){var _this$activeTimeouts7;clearTimeout(timeout)}for(let child of this.current_children)child.destroy();for(let fn of this._destroy_fns)try{fn()}catch(err){logger.error("Error running destroy function",{error:(0,_errors.ensure_bubble_error)(err),element_id:this.element_id()})}this._destroy_fns=[],(_this$canvas3=this.canvas)==null||_this$canvas3.trigger("destroy.dot"),this.canvas="destroyed",this._msg_handlers=void 0,this._watchers=void 0,this.children=void 0,this._is_visible_cbs=[]}}is_destroyed(){return this.canvas==="destroyed"}destroy_started(){return!!this._destroy_started}on_destroy(fn){this.is_destroyed()?fn():this._destroy_fns.push(fn)}get_canvas(){return this.canvas}get_outer_canvas(){var _this$canvas4,_this$canvas4$parent;return this.edit_mode()?(_this$canvas4=this.canvas)==null||(_this$canvas4$parent=_this$canvas4.parent)==null?void 0:_this$canvas4$parent.call(_this$canvas4):this.canvas}get_children_canvas(){var _this$element$E$get_c,_this$element$E2;return(_this$element$E$get_c=(_this$element$E2=this.element.E).get_children_canvas)==null?void 0:_this$element$E$get_c.call(_this$element$E2,this)}total_descendants(){return this.children.reduce((total,child)=>total+child.total_descendants(),this.children.length)}toString(){return this.__to_string}element_id(){return this.element.id()}parent(){var _this$_parent,_this$container;return(_this$_parent=this._parent)!=null?_this$_parent:(_this$container=this.container)==null?void 0:_this$container.get_owner()}split_namespace(){this._id_namespace={},this._id_namespace[this.element_id()]=this}mark_children_registered(){var _this$_our_children_r;this.status|=lifecycle_statuses.CHILDREN_REGISTERED,(_this$_our_children_r=this._our_children_registered)==null||_this$_our_children_r.turn()}mark_skeleton_ready(){var _this$_our_skeleton_r;if(this.status|=lifecycle_statuses.HAS_SKELETON,(_this$_our_skeleton_r=this._our_skeleton_ready)==null||_this$_our_skeleton_r.turn(),this.element.can_defer_drawing()){var _this$_is_ready_key;(_this$_is_ready_key=this._is_ready_key)==null||_this$_is_ready_key.turn()}}mark_solid_initialized(){if(this.status|=lifecycle_statuses.SOLID_INITIALIZED,this.element.can_defer_drawing()){var _this$_is_ready_key2;(_this$_is_ready_key2=this._is_ready_key)==null||_this$_is_ready_key2.turn()}}mark_drawn(){if(!this.is_drawn){var _this$_is_ready_key3;this.status|=lifecycle_statuses.DRAWN,rendering_perf.record_lifecycle(rendering_perf.LifecycleEvent.Drawn),rendering_perf.element_counts.element_instances.add(this.element.type(),1),(_this$_is_ready_key3=this._is_ready_key)==null||_this$_is_ready_key3.turn(),this.run_draw_cbs()}}get_skeleton_ready_key(){if(this.has_skeleton)return(0,_b_async.FakeKey)();var _this$_our_skeleton_r2;return(_this$_our_skeleton_r2=this._our_skeleton_ready)!=null||(this._our_skeleton_ready=(0,_b_async.MakeKey)(void 0,"_our_skeleton_ready_".concat(this.toUniqueString()))),this._our_skeleton_ready}get_children_drawn_key(){var _this$_our_children_d;return(_this$_our_children_d=this._our_children_drawn)!=null||(this._our_children_drawn=(0,_b_async.MakeKey)(void 0,"_our_children_drawn_".concat(this.toUniqueString()))),this._our_children_drawn}get_children_registered_key(){if(this.children_are_registered)return(0,_b_async.FakeKey)();var _this$_our_children_r2;return(_this$_our_children_r2=this._our_children_registered)!=null||(this._our_children_registered=(0,_b_async.MakeKey)(void 0,"_our_children_registered")),this._our_children_registered}get_is_ready_key(){if(this.is_ready)return(0,_b_async.FakeKey)();var _this$_is_ready_key4;return(_this$_is_ready_key4=this._is_ready_key)!=null||(this._is_ready_key=(0,_b_async.MakeKey)(void 0,"_self_ready")),this._is_ready_key}get_namespace(){var _this$_id_namespace,_this$parent3;return(_this$_id_namespace=this._id_namespace)!=null?_this$_id_namespace:(_this$parent3=this.parent())==null?void 0:_this$parent3.get_namespace()}add_to_namespace(instance,element_id){var _element_id;(_element_id=element_id)!=null||(element_id=instance.element_id());let namespace=this.get_namespace();namespace!=null&&(namespace[element_id]=instance)}child_namespace_prefix(){let parent=this.parent();return parent?this._id_namespace?this.toUniqueString()+":":parent.child_namespace_prefix():""}toUniqueString(){var _this$parent$child_na,_this$parent4;return((_this$parent$child_na=(_this$parent4=this.parent())==null?void 0:_this$parent4.child_namespace_prefix())!=null?_this$parent$child_na:"")+this.element_id()}dehydrate(){var _FrozenState$dehydrat,_FrozenState$dehydrat2;return(_FrozenState$dehydrat=_FrozenState.default.dehydrate_context)==null||(_FrozenState$dehydrat2=_FrozenState$dehydrat.instance)==null||_FrozenState$dehydrat2.call(_FrozenState$dehydrat,this),hydrate2.dehydrate_prefix(eval_consts.ELEMENT_INSTANCE_DEHYDRATE)+this.toUniqueString()}try_register(element,desired_id){var _instance;let instance=this.find_instance_by_id_no_retry(element.id());if(instance==null){let parent=element.parent();parent!=null&&(instance=this.try_register(parent,element.id()))}if((_instance=instance)==null||_instance.register_children(),desired_id!=null){var _instance$get_namespa,_instance2,_instance2$get_namesp;return(_instance$get_namespa=(_instance2=instance)==null||(_instance2$get_namesp=_instance2.get_namespace())==null?void 0:_instance2$get_namesp[desired_id])!=null?_instance$get_namespa:null}return null}find_instance_by_id(id){if(!id||!this.get_namespace())return null;let found=this.find_instance_by_id_no_retry(id);if(found){if(found.is_ready)return found;(0,_b_async.ensure_ready)(found.get_is_ready_key())}let ancestor_element=id.includes("_group_item_")?_appquery.default.element(id.split("_group_item_")[0]):_appquery.default.element(id).parent();ancestor_element!=null&&found==null&&queueMicrotask(this.try_register.bind(this,ancestor_element));let all_rg_ancestors=[];for(;ancestor_element;){ancestor_element.draws_own_children()&&all_rg_ancestors.push(ancestor_element.id());let instance=this.find_instance_by_id_no_retry(ancestor_element.id());instance&&(0,_b_async.ensure_ready)(instance.get_children_registered_key(),!1),ancestor_element=ancestor_element.parent()}if(all_rg_ancestors.length>0){let ancestor_instance=this.parent();for(;((_ancestor_instance=ancestor_instance)==null?void 0:_ancestor_instance.parent())!=null;){var _ancestor_instance;let element=ancestor_instance.parent().element;element.draws_own_children()&&all_rg_ancestors.includes(element.id())&&(0,_b_async.ensure_ready)(ancestor_instance.get_children_registered_key()),ancestor_instance=ancestor_instance.parent()}}return(found==null?void 0:found.element.type())==="TableMainAxis"?found:null}find_instance_by_id_no_retry(id){let scope=this;do{let namespace=scope.get_namespace();if(namespace!=null&&namespace[id])return namespace[id];scope=scope.parent()}while(scope);return null}get_visible_instances(){let instances={},namespace=this.get_namespace();_decaf.default.object_entries(namespace).forEach(_ref=>{let[id,instance]=_ref;instances[id]=instance});let parent=this.parent();for(let instance of(_parent$get_visible_i=parent==null?void 0:parent.get_visible_instances())!=null?_parent$get_visible_i:[]){var _parent$get_visible_i,_instance$element_id,_instances$_instance$;(_instances$_instance$=instances[_instance$element_id=instance.element_id()])!=null||(instances[_instance$element_id]=instance)}return Object.values(instances)}get_static_property(name,suppress_warning){return this.element.get_styleable_static_property(name,suppress_warning)}get_styleable_static_property(name,suppress_warning){return this.element.get_styleable_static_property(name,suppress_warning)}_dimension_box(name,value){var _this$key;let key="__dimension_box_".concat(name),box=(_this$key=this[key])!=null?_this$key:this[key]=(0,_autorun.Box)(value!=null?value:this.element["get_".concat(name)]());if(value!=null){box(value);return}return box()}_observe_canvas(){this._sizing_setup&&(resize_observer.observe(this.canvas[0],(0,_debounce.default)(entry=>{entry.borderBoxSize&&entry.borderBoxSize.length>0?(this.state("current_width",entry.borderBoxSize[0].inlineSize),this.state("current_height",entry.borderBoxSize[0].blockSize)):(this.state("current_width",entry.target.offsetWidth),this.state("current_height",entry.target.offsetHeight))},50,{leading:!0,trailing:!0,maxWait:100})),this.on_destroy(()=>resize_observer.unobserve(this.canvas[0])))}setup_sizing(){this._sizing_setup||(this.canvas!=null&&document.contains(this.canvas[0])?(this.state("current_width",this.canvas.outerWidth()),this.state("current_height",this.canvas.outerHeight())):(this.state("current_width",0),this.state("current_height",0)),this._sizing_setup=!0,this.canvas&&this._observe_canvas())}current_width(){return this.state("current_width")}current_height(){return this.state("current_height")}get_injected_context(value,value_btype){var _this$prop_eval_conte;let base_context=(_this$prop_eval_conte=this.prop_eval_context())!=null?_this$prop_eval_conte:{element:this,datasources:{}};return _objectSpread(_objectSpread({},base_context),{},{datasources:_objectSpread(_objectSpread({},base_context.datasources),{},{injected_value:()=>value,injected_value_btype:()=>value_btype})})}prop_eval_context(reset_random_generator){return this._p_context||(this._p_context={element:this,datasources:_page_state.default.get_basic_datasources(this.element.root()),random_seed:Math.random()}),reset_random_generator&&(this._p_context.random_generator=new uuid.Random(this._p_context.random_seed)),this._p_context}on_run_eval_error(name,err){logger.log((0,_errors.ensure_bubble_error)(err).extend({element_instance:(0,_loggable.to_loggable)(this),prop_name:name}))}autorun(fn,cleanup){let ar=(0,_autorun.autorun)(()=>this._run_if_not_destroying(fn),cleanup);return this.on_destroy(()=>ar.destroy()),ar}_run_if_not_destroying(fn){if(!this._destroy_started)return fn()}message(name){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];this.supports_message(name)||logger.error("Element does not support message name",{element_type:this.element.type(),name}),(0,_autorun.autorun_top)(()=>{var _this$_msg_handlers$n;let to_run=(_this$_msg_handlers$n=this._msg_handlers[name])!=null?_this$_msg_handlers$n:[];for(let handler of to_run)handler(...args)})}supports_message(name){var _this$element$E$get_p,_this$element$E$get_p2,_this$element$E3;return this.element.get_messages().includes(name)||((_this$element$E$get_p=(_this$element$E$get_p2=(_this$element$E3=this.element.E).get_private_messages)==null?void 0:_this$element$E$get_p2.call(_this$element$E3,this.element))!=null?_this$element$E$get_p:[]).includes(name)}get_messages(){return this.element.get_messages()}on_message(name,handler){var _this$_msg_handlers,_this$_msg_handlers$n2;((_this$_msg_handlers$n2=(_this$_msg_handlers=this._msg_handlers)[name])!=null?_this$_msg_handlers$n2:_this$_msg_handlers[name]=[]).push(handler)}state(key,value,get_raw_function){var _this$_states,_this$_states$key;let state_box=(_this$_states$key=(_this$_states=this._states)[key])!=null?_this$_states$key:_this$_states[key]=(0,_autorun.Box)(void 0);if(value!==void 0){value===elements_consts.STATE_NOT_READY?state_box(void 0,!0):state_box(value);return}else{let state=state_box();return typeof state=="function"&&!get_raw_function?state(this):state}}responsive_mode(){return this.mode===Mode.RESPONSIVE}thumbnail_mode(){return this.mode===Mode.THUMBNAIL||this.mode===Mode.REUSABLE_EDIT}reusable_edit_mode(){return this.mode===Mode.REUSABLE_EDIT}edit_mode(){return this.mode===Mode.EDIT}run_mode(){return this.mode===Mode.RUN}is_secure(){var _this$element$E$is_se,_this$element$E4;return!!((_this$element$E$is_se=(_this$element$E4=this.element.E).is_secure)!=null&&_this$element$E$is_se.call(_this$element$E4,this))}is_self_nested_custom(){let custom_id=this.element.get_static_property("custom_id");if(!custom_id)return!1;let ancestor=this.parent();for(;ancestor;){if(ancestor.element.id()===custom_id||ancestor.element.get_static_property("custom_id")===custom_id)return!0;ancestor=ancestor.parent()}return!1}get is_registered(){return!!(this.status&lifecycle_statuses.REGISTERED)}get has_skeleton(){return!!(this.status&lifecycle_statuses.HAS_SKELETON)}get is_drawn(){return!!(this.status&lifecycle_statuses.DRAWN)}get is_solid_initialized(){return!!(this.status&lifecycle_statuses.SOLID_INITIALIZED)}get is_ready(){return this.element.can_defer_drawing()?this.has_skeleton||this.is_solid_initialized:this.is_drawn}get children_are_registered(){return!!(this.status&lifecycle_statuses.CHILDREN_REGISTERED)}get children_being_registered(){return!!(this.status&lifecycle_statuses.CHILDREN_BEING_REGISTERED)}get children_are_drawn(){return!!(this.status&lifecycle_statuses.CHILDREN_DRAWN)}register(parent){this.register_self(parent),this.register_children_deep()}register_self(parent){var _this$element$E$regis,_this$element$E5;if(!this.is_registered){if(this._parent=parent,[Mode.RUN,Mode.EDIT,Mode.REUSABLE_EDIT].includes(this.mode)){var _this$parent5;(_this$parent5=this.parent())==null||_this$parent5.add_to_namespace(this)}(_this$element$E$regis=(_this$element$E5=this.element.E).register)==null||_this$element$E$regis.call(_this$element$E5,this),this.status|=lifecycle_statuses.REGISTERED,rendering_perf.record_lifecycle(rendering_perf.LifecycleEvent.Registered)}}register_children_deep(){(!this.run_mode()||drawstate.mustRegisterId(this.element_id()))&&(this.register_children(),this.children.forEach(child=>child.register_children_deep()))}register_children(){this.children_are_registered||this.children_being_registered||(this.status|=lifecycle_statuses.CHILDREN_BEING_REGISTERED,this.element.E.register_children?(this._children=[],this.element.E.register_children(this),this.status|=lifecycle_statuses.CHILDREN_REGISTERED):this._default_register_children(this.element.elements()))}_default_register_children(child_elements){this._children=[];for(let element of child_elements)if(element.exists()&&(!this.thumbnail_mode()||element.is_visible_on_page_load())){let instance=new ElementInstance2(element,this.mode);this.children.push(instance),instance.register_self(this)}this.mark_children_registered()}get children(){return this._children||(0,_autorun.autorun_top)(()=>this.register_children()),this._children}set children(children2){this._children=children2,this.status|=lifecycle_statuses.CHILDREN_BEING_REGISTERED}get current_children(){var _this$_children;return(_this$_children=this._children)!=null?_this$_children:[]}set_containers(container){if(!this.is_solid_initialized){this.container=container,this.mark_solid_initialized(),this._update_visible();let[get,set]=(0,_solidJs.createSignal)(!1);if(this.draw_signal={get,set},this.element.solid_component){var _this$_children2;if(this.element.can_have_children()&&(!this.element.draws_own_children()||this.thumbnail_mode()&&(_this$_children2=this._children)!=null&&_this$_children2.length)){let container2=this.container.create_child(this);this.child_container=container2,(0,_b_async.WaitFor)(this.get_children_registered_key(),()=>{for(let child of this.children)child.set_containers(container2);this.children.sort(container2.layout().sort_fn)})}else this.children=[]}}}create_skeleton(container){if(this.has_skeleton){logger.warn("Attempting to create skeleton for an element that already has one! "+this.toUniqueString());return}this.container=container,this.canvas=this.container.render(this.get_html()),this.canvas.addClass(this.element.type()),this._is_visible_me||this._hide_me(),this._observe_canvas(),_client_config.default.run_mode_ids&&this.run_mode()&&this.canvas.attr("id",run_mode_unique_id(this.element_id())),typeof this.element.E.position_canvas=="function"&&!this.thumbnail_mode()?this.position_canvas():this.container.add(this),this.create_child_skeletons(),this.mark_skeleton_ready()}create_child_skeletons(){var _Lib$or_throw$element;if(this.element.E.create_child_skeletons){this.element.E.create_child_skeletons(this);return}if((_Lib$or_throw$element=_lib.default.or_throw().element)!=null&&_Lib$or_throw$element.new_rendering){let custom_definition=this.element.E.custom_definition;if(custom_definition!=null&&custom_definition().get_responsive_version()>0){let container=this.container.create_child(this,this.get_children_canvas());this.child_container=container;for(let child of this.children)child.set_containers(container);this.children.sort(container.layout().sort_fn),(0,_web.render)(()=>this.children.map(child=>(0,_web.createComponent)(_RenderElement.RenderElement,{instance:child})),container.container_canvas[0]);return}}if(this.element.can_have_children()){let container_canvas=this.get_children_canvas(),container=this.container.create_child(this,container_canvas);this.child_container=container;let all_children;if(this.element.is_responsive_v1()){let layout_props=_responsive_layout.default.LAYOUT_PROPERTIES[this.element.container_layout()];all_children=this.children.sort(layout_props.sort_fn)}else{var _this$element$E$initi,_this$element$E6;(_this$element$E$initi=(_this$element$E6=this.element.E).initialize_container_width)==null||_this$element$E$initi.call(_this$element$E6,this,container),all_children=this.children}for(let child of all_children)child.create_skeleton(container);container.initialize()}}wait_for_first_draw(cb){this.is_drawn?cb():this._first_draw_cbs.push(cb)}with_canvas(canvas_cb){this.ensure_drawn(),this.wait_for_first_draw(()=>{canvas_cb(this.canvas)})}start_draw_tree(){drawstate.watchDraw(this,{onDraw:instance=>{let draw_reason=rendering_perf.get_current_phase()===rendering_perf.DrawPhase.InitialDraw?rendering_perf.DrawReason.VisibleOnPageLoad:rendering_perf.DrawReason.BecameVisible;instance.do_draw(draw_reason)},onSizeDraw:instance=>{instance.do_size_only_draw()}}),this.handle_individual_draw()}handle_individual_draw(){this.run_mode()?(!this.element.can_defer_drawing()||this.is_solid_initialized&&this.element.solid_component==null&&this.children.length>0)&&this.do_draw(rendering_perf.DrawReason.CantDefer):this.do_draw(rendering_perf.DrawReason.DeferFlagOff),this.start_child_drawing()}do_size_only_draw(){if(this.is_drawn)return;let bail_to_full_draw;this.element.E.attempt_size_only_draw?bail_to_full_draw=!this.element.E.attempt_size_only_draw(this):bail_to_full_draw=!this.element.no_size_when_hidden(),bail_to_full_draw&&this.do_draw(rendering_perf.DrawReason.SizeNeeded)}run_draw_cbs(){let do_draw_cbs=this._first_draw_cbs;this._first_draw_cbs=[];for(let cb of do_draw_cbs)cb()}setup_canvas_hooks(){this.canvas[0].bubble_data={bubble_instance:this};let debug=_lib.default.or_throw().workflow.debugger;debug&&((0,_b_window.is_on_mobile_or_tablet)()||(this.canvas.on("mouseenter.debugger",()=>debug.element_hovered(this)),this.on_destroy(()=>this.canvas.off("mouseenter.debugger"))),this.canvas.on("click.debugger",e=>{debug.element_clicked(this,this.get_partial())&&e.stopPropagation()}),this.on_destroy(()=>this.canvas.off("click.debugger")))}initialize_canvas(){var _this$element$root;(_this$element$root=this.element.root())==null||_this$element$root.get_responsive_version(),this.initialize(),this.setup_canvas_hooks(),this.mark_drawn()}do_draw(draw_reason){this.is_drawn||this._is_drawing||(rendering_perf.with_draw_reason(draw_reason,()=>{if(this._is_drawing=!0,uuid.count("draw children element created: "+this.element.type()),this.is_solid_initialized){var _this$draw_signal,_this$parent6;(_this$draw_signal=this.draw_signal)==null||_this$draw_signal.set(!0),(_this$parent6=this.parent())==null||_this$parent6.do_draw(draw_reason)}else this.initialize_canvas()}),this._is_drawing=!1)}start_child_drawing(){var _Lib$or_throw$styles_,_Lib$or_throw$styles_2,_Lib$or_throw$styles_3;if((_Lib$or_throw$styles_=_lib.default.or_throw().styles_editor)!=null&&(_Lib$or_throw$styles_2=_Lib$or_throw$styles_.element_styles_editor())!=null&&(_Lib$or_throw$styles_3=_Lib$or_throw$styles_2.owner)!=null&&_Lib$or_throw$styles_3.is_active())return;if(this.element.draws_own_children()&&this.element.E.draw_children){this.element.E.draw_children(this),this.status|=lifecycle_statuses.CHILDREN_DRAWN;return}if(this.children_are_drawn)return;let iterate_children=()=>{for(let instance of this.children)instance.element.added_to_container()?instance.handle_individual_draw():instance.start_draw_tree()};this.child_container?(0,_b_async.WaitFor)(this.get_children_registered_key(),iterate_children):this.children.length>0&&(0,_b_async.WaitFor)(this.get_skeleton_ready_key(),iterate_children),this.status|=lifecycle_statuses.CHILDREN_DRAWN,this.get_children_drawn_key().turn()}ensure_drawn(){if(this.is_drawn)return;let draw=()=>{this.do_draw(rendering_perf.DrawReason.Unknown),this.start_child_drawing()};this.is_solid_initialized?(0,_solidJs.batch)(draw):draw()}get_partial(){return _expressions.default.make_partial_expression_evaluator(this.prop_eval_context())}set_height(height,options){this.destroy_started()||(this._dimension_box("height",height),this.container.set_height(this,height,options))}position_canvas(to_position){var _this$element$E$posit,_this$element$E7;(_this$element$E$posit=(_this$element$E7=this.element.E).position_canvas)==null||_this$element$E$posit.call(_this$element$E7,to_position!=null?to_position:this.canvas,this)}attach_to_body(){var _this$element$E$attac,_this$element$E$attac2,_this$element$E8;return(_this$element$E$attac=(_this$element$E$attac2=(_this$element$E8=this.element.E).attach_to_body)==null?void 0:_this$element$E$attac2.call(_this$element$E8,this))!=null?_this$element$E$attac:!this.element.added_to_container()}on_resize(cb){var _this$element$root2;if((_this$element$root2=this.element.root())!=null&&_this$element$root2.use_responsive_algorithm())if(this.run_mode()){let event_name="resize."+this.element.type()+"-"+this.toUniqueString();$(window).on(event_name,()=>{$(window).width()!==this._old_width&&(this._old_width=$(window).width(),cb(this._old_width))}),this.on_destroy(()=>$(window).off(event_name))}else this.responsive_mode()&&(this.container.on("resize_width",cb),this.on_destroy(()=>this.container.removeListener("resize_width",cb)))}initialize(){if(this.is_drawn)throw new _errors.UnexpectedError("can only call initialize once");(0,_autorun.autorun_top)(()=>{this.element.E.initialize(this)})}get_html(){return this.element.E.get_html(this)}workflow_show(properties,options,animated){this.element.E.workflow_show?this.element.E.workflow_show(this,properties,options,animated):this.do_show(properties,options,animated)}workflow_hide(properties,options,animated){this.element.E.workflow_hide?this.element.E.workflow_hide(this,properties,options,animated):this.do_hide(properties,options,animated)}rendering_using_solid(){return this.is_solid_initialized&&this.element.solid_component!=null&&!(this.edit_mode()&&this.element.E.use_legacy_in_editor)&&!(this.thumbnail_mode()&&this.element.E.use_legacy_in_thumbnail)}_display_me(){if(this.element.is_responsive_v1()){var _this$canvas5;if(this.rendering_using_solid())return;(_this$canvas5=this.canvas)==null||_this$canvas5.css("visibility","")}else{var _this$canvas6;(_this$canvas6=this.canvas)==null||_this$canvas6.css("display","")}}_hide_me(){var _this$canvas7;this.rendering_using_solid()||(_this$canvas7=this.canvas)==null||_this$canvas7.css(this.get_hidden_css())}get_hidden_css(){return this.element.is_responsive_v1()?{visibility:"hidden",display:null}:{display:"none"}}do_show(properties,options,animated){if((0,_mode_check.on_react_native)()){this._is_visible_me=!0,this._has_been_hidden=!1,this._update_visible();return}this.with_canvas(canvas=>{if(this._has_been_hidden===!1&&!animated)return;let first_show=this._has_been_hidden==null;this._has_been_hidden=!1;let{do_show}=this.element.E;if(do_show)return do_show(this,properties,options,animated,first_show);var _canvas$velocity;this._is_visible_me=!0,(_canvas$velocity=canvas.velocity)==null||_canvas$velocity.call(canvas,"stop",!0),animated?_elements_utils.default.perform_animate_in(this,properties,options):(this._display_me(),this._update_visible())})}do_hide(properties,options,animated){if((0,_mode_check.on_react_native)()){this._is_visible_me=!1,this._has_been_hidden=!0,this._update_visible();return}if(this._has_been_hidden===!0&&!animated)return;let first_hide=this._has_been_hidden==null;this._has_been_hidden=!0;let do_hide=this.element.E.do_hide;if(do_hide)do_hide(this,properties,options,animated,first_hide);else if(animated)this.with_canvas(canvas=>{var _canvas$velocity2;(_canvas$velocity2=canvas.velocity)==null||_canvas$velocity2.call(canvas,"stop",!0),_elements_utils.default.perform_animate_out(this,properties,options)});else{var _this$canvas8,_this$canvas8$velocit;(_this$canvas8=this.canvas)==null||(_this$canvas8$velocit=_this$canvas8.velocity)==null||_this$canvas8$velocit.call(_this$canvas8,"stop",!0),this._hide_me(),this._is_visible_me=!1,this._update_visible()}}register_workflows(events){for(let event of events){let deregister=event.register(this);deregister!=null&&this.on_destroy(deregister)}}can_register_workflows(){var _this$element$E$can_r,_this$element$E$can_r2,_this$element$E9,_this$parent7;return(_this$element$E$can_r=(_this$element$E$can_r2=(_this$element$E9=this.element.E).can_register_workflows)==null?void 0:_this$element$E$can_r2.call(_this$element$E9,this))!=null?_this$element$E$can_r:(_this$parent7=this.parent())==null?void 0:_this$parent7.can_register_workflows()}get_transition_styling(){var _this$element$field_n;let E=this.element.E,field_names=(_this$element$field_n=this.element.field_names())!=null?_this$element$field_n:{};return Object.keys(field_names).map(property=>{var _E$transition_propert;if((_E$transition_propert=E.transition_properties)!=null&&_E$transition_propert[property]){let transition=this.element.transition(property);if(transition!=null&&transition.exists()){var _E$transition_propert2;let prop_name=(_E$transition_propert2=E.transition_properties)==null?void 0:_E$transition_propert2[transition.prop_name()];return"".concat(prop_name," ").concat(transition.duration(),"ms ").concat(transition.fn())}}return""}).filter(prop=>prop!=="").join(", ")}get_transition_css(css_props){let css_prop=this.get_transition_styling();if(css_prop){var _css_props$unique_id,_entry$target;let target=this.get_canvas(),unique_id=target.prop("outerHTML"),entry=(_css_props$unique_id=css_props[unique_id])!=null?_css_props$unique_id:css_props[unique_id]={};(_entry$target=entry.target)!=null||(entry.target=target),entry.css_prop?entry.css_prop.slice(-2)!==", "?entry.css_prop+=", "+css_prop:entry.css_prop+=css_prop:entry.css_prop=css_prop}}show_borders(){var _this$element$E$show_,_this$element$E10;(_this$element$E$show_=(_this$element$E10=this.element.E).show_borders)==null||_this$element$E$show_.call(_this$element$E10,this)}hide_borders(){var _this$element$E$hide_,_this$element$E11;(_this$element$E$hide_=(_this$element$E11=this.element.E).hide_borders)==null||_this$element$E$hide_.call(_this$element$E11,this)}},_class2.modes=Mode,_class2.ALL_MODES=ALL_MODES,_class2.lifecycle_statuses=lifecycle_statuses,_class2.rehydrate=function(my_db,unique_string){var _Lib$or_throw$element2;let pieces=unique_string.split(":"),current=(_Lib$or_throw$element2=_lib.default.or_throw().element)==null?void 0:_Lib$or_throw$element2.get_page();for(let piece of pieces){var _current;current=(_current=current)==null?void 0:_current.find_instance_by_id(piece)}return current},_class2),_applyDecoratedDescriptor(_class.prototype,"is_self_nested_custom",[_dec],Object.getOwnPropertyDescriptor(_class.prototype,"is_self_nested_custom"),_class.prototype),_class);module.exports=ElementInstance}});var require_ServerElementInstance=__commonJS({"lib-browser-old/lang/elements/ServerElementInstance.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();require_es_error_cause();var _ElementInstance=_interopRequireDefault(require_ElementInstance()),elements_consts=_interopRequireWildcard(require_elements()),_incremental=_interopRequireDefault(require_incremental());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ServerElementInstance=class _ServerElementInstance extends _ElementInstance.default{constructor(element){super(element,_ElementInstance.default.modes.RUN),this.cached_server_props={},this.dynamic_catcher=!1,this._server_states=void 0}state(key,value,get_raw_function){var _this$_server_states;if((_this$_server_states=this._server_states)!=null||(this._server_states={}),value!==void 0){this._server_states[key]=value;return}this.dynamic_catcher=!0;let state=this._server_states[key];if(state===elements_consts.STATE_NOT_READY&&state!==value)throw Error();return typeof state=="function"&&!get_raw_function?state():state}compute_properties(container){let E=this.element.E;if(E.solid_component){if(this.container=container,this._update_visible(),this.mark_solid_initialized(),this.children=[],this.element.can_have_children())if(E.create_server_children)E.create_server_children(this);else{let container2=this.container.create_child(this);_incremental.default.incremental_for_each(this.element.elements(),element=>{element.exists()&&this.children.push(new _ServerElementInstance(element))}),this.child_container=container2}return E.solid_component.computeProperties(this)}else return null}find_instance_by_id(id){if(id==null)return null;let namespace=this.get_namespace();if(namespace==null)return null;if(namespace[id]!=null)return namespace[id];let parent=this.parent(),p_result=parent==null?void 0:parent.find_instance_by_id(id);return p_result||null}is_visible(){return this.dynamic_catcher=!0,this.element.is_visible_on_page_load()}is_visible_me(){return this.dynamic_catcher=!0,this.element.is_visible_on_page_load()}is_animating(){return this.dynamic_catcher=!0,!1}};module.exports=ServerElementInstance}});var require_element_eval=__commonJS({"lib-browser-old/lang/evaluation/element_eval.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.eval_property_with_states=eval_property_with_states;exports.evaluate_property=evaluate_property;exports.get_property_watcher=get_property_watcher;exports.is_state_on=is_state_on;exports.on_property_change=on_property_change;exports.pre_cache=pre_cache;require_es_array_includes();require_es_string_includes();require_es_array_iterator();require_web_dom_collections_iterator();require_web_dom_collections_for_each();require_es_object_entries();var _lib=_interopRequireDefault(require_lib()),logger=_interopRequireWildcard(require_logger()),_shrink=require_shrink(),elements_consts=_interopRequireWildcard(require_elements()),_node_eval=_interopRequireDefault(require_node_eval()),errors=_interopRequireWildcard(require_errors()),b_fiber=_interopRequireWildcard(require_b_fiber()),b_async=_interopRequireWildcard(require_b_async3()),autorun=_interopRequireWildcard(require_autorun3()),_async_state=_interopRequireDefault(require_async_state3()),mode_check=_interopRequireWildcard(require_mode_check()),element_edit_eval=_interopRequireWildcard(require_element_edit_eval()),element_run_eval=_interopRequireWildcard(require_element_run_eval()),_elements_versioning=_interopRequireDefault(require_elements_versioning()),element_server_eval=_interopRequireWildcard(require_element_server_eval()),_ServerElementInstance=_interopRequireDefault(require_ServerElementInstance()),_safe_require=_interopRequireDefault(require_safe_require()),_allow_overrides_check=require_allow_overrides_check();function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_safe_require.default.safe_register("./lang/evaluation/element_eval",exports);function get_property_watcher_fn(element,name){if(_lib.default.or_throw().is_edit_mode())return instance=>element_edit_eval.edit_eval(name,instance);{var _element$_property_wa,_style$states;(_element$_property_wa=element._property_watcher_fns)!=null||(element._property_watcher_fns={});let watcher_fn;if(!mode_check.on_server()&&(watcher_fn=element._property_watcher_fns[name]))return watcher_fn;let style2=element.is_styleable_property(name)?element.get_style_if_exists():null,is_relevant=state=>state.property_names().includes(name),relevant_states=((_style$states=style2==null?void 0:style2.states())!=null?_style$states:[]).filter(is_relevant),mapped_property=_elements_versioning.default.get_mapped_property(element.element_version(!1),element.element_version(!0),name);mapped_property&&(is_relevant=state=>state.property_names().includes(mapped_property)),relevant_states.push(...element.states().filter(is_relevant));let simple_cache;if(style2&&(!(0,_allow_overrides_check.allow_overrides_check)(element,name)||element.definition_or_self.property(name).raw()==null)){if(relevant_states.length===0)return style2.get_static_property(name)}else{var _raw2;let _raw=element.property(name).json._raw();if(((_raw2=_raw)==null?void 0:_raw2[_shrink.S.type])==="Empty"&&(_raw=null),_raw==null||typeof _raw!="object"){var _ref,_raw3;simple_cache=(_ref=(_raw3=_raw)!=null?_raw3:element.get_default(name))!=null?_ref:null}else simple_cache=elements_consts.NOT_STATIC_PROP;if(simple_cache!==elements_consts.NOT_STATIC_PROP&&relevant_states.length===0)return simple_cache}return element._property_watcher_fns[name]=instance=>element_run_eval.run_eval(name,style2,relevant_states,simple_cache,instance,element),element._property_watcher_fns[name]}}function _create_property_watcher(instance,name){let evaluator_or_value=get_property_watcher_fn(instance.element,name);if(typeof evaluator_or_value!="function")return autorun.FakeWatcher(evaluator_or_value);let evaluator=evaluator_or_value,w;return name==="is_visible"?w=autorun.Watcher(()=>{instance.evaluating_visibility=!0;try{return evaluator(instance)}finally{instance.evaluating_visibility=!1}}):w=autorun.Watcher(()=>evaluator(instance)),_lib.default.or_throw().is_edit_mode()||w.on_error(err=>instance.on_run_eval_error(name,err)),instance.on_destroy(()=>w.destroy()),w}function _ensure_watcher_created(instance,name,creation_fn){return instance._watchers[name]?!0:instance._created_watchers[name]?!1:(instance._created_watchers[name]=!0,instance._watchers[name]=creation_fn(),!0)}function get_property_watcher(instance,name){if(!_ensure_watcher_created(instance,name,()=>_create_property_watcher(instance,name)))throw new errors.UnexpectedError("get_property_watcher called recursively");return instance._watchers[name]}function evaluate_property(instance,name,pre_cache2){var _b_fiber$Fiber;if(instance==null||instance.is_destroyed())return null;if(["height","width"].includes(name)){var _instance$element$roo;if(((_instance$element$roo=instance.element.root())==null?void 0:_instance$element$roo.get_responsive_version())===0||!instance.element.uses_css_responsive()){var _instance$element$roo2;if(!instance.edit_mode()&&(_instance$element$roo2=instance.element.root())!=null&&_instance$element$roo2.use_responsive_algorithm())return instance._dimension_box(name)}else return instance.state("current_".concat(name))}if(instance.run_mode()){let precomputed=instance.element.get_precomputed();if(precomputed[name]===void 0){var _instance$get_static_;precomputed[name]=(_instance$get_static_=instance.get_static_property(name,!0))!=null?_instance$get_static_:null}if(precomputed[name]!==elements_consts.NOT_STATIC_PROP)return precomputed[name]}if(!_ensure_watcher_created(instance,name,()=>_create_property_watcher(instance,name))){let element_name=instance.element.get_name(!0);throw new errors.OwnerError("Recursion when evaluating property ".concat(name,' on element "').concat(element_name,'"'))}if(pre_cache2)return;let[ready,value,error]=instance._watchers[name].get_current(!0);if(!error){if(!_async_state.default.CurrentAutoRun&&!_async_state.default.CurrentNotReadyCatcher&&!((_b_fiber$Fiber=b_fiber.Fiber)!=null&&_b_fiber$Fiber.current)&&instance.run_mode()&&logger.error("Calling evaluate_property outside of an autorun or watcher",{name}),!ready){b_async.throw_not_ready(value);return}return value}}function pre_cache(instance,properties){for(let prop of properties)evaluate_property(instance,prop,!0)}function on_property_change(instance,properties,handler){let new_handler=props=>{if(instance.element.exists()&&!instance.is_destroyed())try{handler(props)}catch(err){let key=err instanceof errors.NotReadyError&&err.not_ready_key;if(key)b_async.WaitFor(key,()=>new_handler(props));else throw err}},precomputed;if(typeof properties=="string"){if(instance.run_mode()){if(precomputed=instance.element.get_precomputed(),precomputed[properties]===void 0){var _instance$get_static_2;precomputed[properties]=(_instance$get_static_2=instance.get_static_property(properties,!0))!=null?_instance$get_static_2:null}if(precomputed[properties]!==elements_consts.NOT_STATIC_PROP){new_handler(precomputed[properties]);return}}if(!_ensure_watcher_created(instance,properties,()=>_create_property_watcher(instance,properties)))throw new errors.UnexpectedError("on_property_change called recursively");instance._watchers[properties].on_value(new_handler);return}let static_values={},watchers={};if(instance.run_mode()){precomputed=instance.element.get_precomputed();let is_watcher=!1,to_iterate=properties;for(let property of to_iterate){if(precomputed[property]===void 0){var _instance$get_static_3;precomputed[property]=(_instance$get_static_3=instance.get_static_property(property,!0))!=null?_instance$get_static_3:null}if(precomputed[property]!==elements_consts.NOT_STATIC_PROP)static_values[property]=precomputed[property];else{if(is_watcher=!0,!_ensure_watcher_created(instance,property,()=>_create_property_watcher(instance,property)))throw new errors.UnexpectedError("on_property_change called recursively");watchers[property]=instance._watchers[property]}}if(!is_watcher){new_handler(static_values);return}}else{let to_iterate=properties;for(let property of to_iterate){if(!_ensure_watcher_created(instance,property,()=>_create_property_watcher(instance,property)))throw new errors.UnexpectedError("on_property_change called recursively");watchers[property]=instance._watchers[property]}}let combined=autorun.Watcher(()=>{let combined_properties={};return Object.entries(watchers).forEach(_ref2=>{let[name3,watcher]=_ref2;combined_properties[name3]=watcher.get()}),Object.entries(static_values).forEach(_ref3=>{let[name3,val]=_ref3;combined_properties[name3]=val}),combined_properties});combined.on_value(new_handler),instance.on_destroy(()=>combined.destroy())}function is_state_on(instance,state){let state_id="state:".concat(state.toUniqueString());if(!_ensure_watcher_created(instance,state_id,()=>autorun.Watcher(()=>_node_eval.default.evaluate_state_condition(state,instance.prop_eval_context())))){let element_name=instance.element.get_name(!0);throw new errors.OwnerError('Recursion when evaluating a condition on element "'.concat(element_name,'"'))}let[ready,value]=instance._watchers[state_id].get_current();return ready&&value}function eval_property_with_states(element,name,context){let instance=context.element,relevant_states=instance.element.states().filter(state=>!state.property(name).is_empty()&&is_state_on(instance,state));if(relevant_states.length){let state=relevant_states[relevant_states.length-1];return _node_eval.default.eval_property(state,name,context)}else return _node_eval.default.eval_property(element,name,context)}}});var require_application_utilities=__commonJS({"lib-browser-old/core/property_applications/application_utilities.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.apply_css_style=apply_css_style;exports.calculate_border_width=exports.calculate_border_height=void 0;exports.patch_user_agent_styles=patch_user_agent_styles;require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_includes();var runmode_consts=_interopRequireWildcard(require_runmode()),element_eval=_interopRequireWildcard(require_element_eval()),_ElementInstance=_interopRequireDefault(require_ElementInstance()),decaf=_interopRequireWildcard(require_decaf());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function apply_css_style(divs,opts){for(let div of decaf.array_from(divs!=null?divs:[]))for(let k in opts){let v=opts[k];div.style[k]=v}}function patch_user_agent_styles(canvas){if(apply_css_style(canvas,{padding:"0px","text-align":"center",background:"none",border:"none"}),!canvas.hasClass(runmode_consts.CLICKABLE_ELEMENT))return apply_css_style(canvas,{cursor:"inherit"})}var calculate_border_height=instance=>_border_width(instance,["_top","_bottom"]);exports.calculate_border_height=calculate_border_height;var calculate_border_width=instance=>_border_width(instance,["_left","_right"]);exports.calculate_border_width=calculate_border_width;function _border_width(instance_or_element,sides){let border_style,fn=name=>{let style2;if(instance_or_element instanceof _ElementInstance.default){var _instance_or_element$,_instance_or_element$2;return style2=(_instance_or_element$=(_instance_or_element$2=instance_or_element.element).get_style_if_exists)==null?void 0:_instance_or_element$.call(_instance_or_element$2),style2?style2.get_static_property(name):element_eval.evaluate_property(instance_or_element,name)}else{var _instance_or_element$3,_instance_or_element$4;return style2=(_instance_or_element$3=instance_or_element.get_style_if_exists)==null?void 0:_instance_or_element$3.call(instance_or_element),style2?style2.get_static_property(name):(_instance_or_element$4=instance_or_element.get_static_property)==null?void 0:_instance_or_element$4.call(instance_or_element,name,!0)}};if(instance_or_element.get_static_property("four_border_style")){let total_width=0;for(let border_location of sides)border_style=fn("border_style"+border_location),[void 0,"none"].includes(border_style)||(total_width+=fn("border_width"+border_location));return total_width}else return border_style=fn("border_style"),[void 0,"none"].includes(border_style)?0:2*fn("border_width")}}});var require_PropertyApplication=__commonJS({"lib-browser-old/core/property_applications/PropertyApplication.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;require_es_array_includes();require_es_string_includes();require_es_array_iterator();require_web_dom_collections_iterator();var decaf=_interopRequireWildcard(require_decaf());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var PropertyApplication=class{constructor(sel_fn,to_remove,to_not_apply){var _this$_uses_propertie;this.sel_fn=sel_fn,this.to_remove=to_remove!=null?to_remove:[],this.to_not_apply=to_not_apply!=null?to_not_apply:[],this.uses_properties=((_this$_uses_propertie=this._uses_properties)!=null?_this$_uses_propertie:[]).filter(a=>!this.to_remove.includes(a))}get_target(canvas){return this.sel_fn&&(typeof this.sel_fn=="string"?canvas=canvas.find(this.sel_fn):canvas=this.sel_fn(canvas)),canvas}apply(data,canvas,instance){for(let r of this.to_remove)delete data[r];for(let r of this.to_not_apply)delete data[r];if(!this.sel_fn)this._apply(data,canvas,instance);else for(let target of decaf.array_from(this.get_target(canvas)))this._apply(data,$(target),instance)}apply_directly(data,canvas,instance){for(let r of this.to_remove)delete data[r];for(let r of this.to_not_apply)delete data[r];this._apply(data,canvas,instance)}get_transition_css(element,canvas,css_props){let css_prop="";for(let property of this.uses_properties){var _this$transition_prop;if((_this$transition_prop=this.transition_properties)!=null&&_this$transition_prop[property]){let transition_css=this._transition_property_to_css_string(element,property);transition_css&&(css_prop+=transition_css+", ")}}if(css_prop){var _unique_id,_css_props$_unique_id,_css_props$unique_id,_css_props$unique_id$,_css_props$unique_id$2;let unique_id,target=this.get_target(canvas);typeof this.sel_fn=="string"?unique_id=this.sel_fn:unique_id=target.prop("outerHTML"),(_css_props$_unique_id=css_props[_unique_id=unique_id])!=null||(css_props[_unique_id]={}),(_css_props$unique_id$=(_css_props$unique_id=css_props[unique_id]).target)!=null||(_css_props$unique_id.target=target),css_props[unique_id].css_prop=((_css_props$unique_id$2=css_props[unique_id].css_prop)!=null?_css_props$unique_id$2:"")+css_prop}}_transition_property_to_css_string(element,property){let css_prop="",transition=element.transition(property);if(!this._transition_should_be_applied(element,property))return css_prop;if(transition!=null&&transition.exists())if(Array.isArray(this.transition_properties[transition.prop_name()]))css_prop+=this.transition_properties[transition.prop_name()].map(prop_name=>this._combine_transformation_info_into_css(prop_name,transition)).join(", ");else{let prop_name=this.transition_properties[transition.prop_name()];css_prop+=this._combine_transformation_info_into_css(prop_name,transition)}return css_prop}_transition_should_be_applied(element,property){var _this$transition_cond;return((_this$transition_cond=this.transition_conditions)==null?void 0:_this$transition_cond[property])!=null?this.transition_conditions[property](element):!0}_combine_transformation_info_into_css(name,transition){return"".concat(name," ").concat(transition.duration(),"ms ").concat(transition.fn())}get_transition_styling(element){let transitions=[];for(let property of this.uses_properties){var _this$transition_prop2;if((_this$transition_prop2=this.transition_properties)!=null&&_this$transition_prop2[property]){let transition_css=this._transition_property_to_css_string(element,property);transition_css&&transitions.push(transition_css)}}return transitions.join(", ")}get_properties(defaults){let props=this._get_properties().filter(p=>!this.to_remove.includes(p.name));if(defaults){for(let p of props){var _this$field_names$p$n;let our_default=(_this$field_names$p$n=this.field_names[p.name])==null?void 0:_this$field_names$p$n.default;our_default&&(p.default=our_default)}for(let p of props)defaults[p.name]!=null&&(p.default=defaults[p.name])}return props}};exports.default=PropertyApplication}});var require_NoSelect=__commonJS({"lib-browser-old/core/property_applications/applications/NoSelect.js"(exports,module){"use strict";init_define_process_env();init_shim();var _class,PropertyApplication=require_PropertyApplication().default,application_utilities=require_application_utilities();module.exports=(_class=class extends PropertyApplication{_apply(data,canvas){data&&application_utilities.apply_css_style(canvas,{"-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","user-select":"none"})}},_class.prototype.apply_once=!0,_class)}});var require_Dimensions=__commonJS({"lib-browser-old/core/property_applications/applications/Dimensions.js"(exports,module){"use strict";init_define_process_env();init_shim();var _class,PropertyApplication=require_PropertyApplication().default;module.exports=(_class=class extends PropertyApplication{_apply(data,canvas){}},_class.prototype.field_names={width:{default:100,no_states:!0},height:{default:100,no_states:!0},left:{no_states:!0},top:{no_states:!0}},_class.prototype.not_in_style=!0,_class.prototype.apply_once=!0,_class.prototype.class_name="Dimensions",_class)}});var require_Opacity=__commonJS({"lib-browser-old/core/property_applications/applications/Opacity.js"(exports,module){"use strict";init_define_process_env();init_shim();var _class,PropertyApplication=require_PropertyApplication().default,application_utilities=require_application_utilities();module.exports=(_class=class extends PropertyApplication{_apply(data,canvas,instance){let opacity=data.opacity/100;instance.state("opacity_override")!=null&&(opacity=instance.state("opacity_override")),application_utilities.apply_css_style(canvas,{opacity})}},_class.prototype._uses_properties=["opacity"],_class.prototype.transition_properties={opacity:"opacity"},_class.prototype.field_names={opacity:{default:100}},_class.prototype.class_name="Opacity",_class)}});var require_MinWidth=__commonJS({"lib-browser-old/core/property_applications/applications/MinWidth.js"(exports,module){"use strict";init_define_process_env();init_shim();var _class,PropertyApplication=require_PropertyApplication().default;module.exports=(_class=class extends PropertyApplication{_apply(){}},_class.prototype.field_names={min_width:{default:20,no_states:!0},fixed_width:{no_states:!0,default:!1},use_max_width:{no_states:!0,default:!1},max_width:{default:100,optional:!0,no_states:!0},collapse_margin:{default:0,optional:!0,no_states:!0},responsive_alignment:{default:"center",no_states:!0}},_class.prototype.not_in_style=!0,_class.prototype.apply_once=!0,_class.prototype.class_name="MinWidth",_class)}});var require_RootSizing=__commonJS({"lib-browser-old/core/property_applications/applications/RootSizing.js"(exports,module){"use strict";init_define_process_env();init_shim();var _class,PropertyApplication=require_PropertyApplication().default;module.exports=(_class=class extends PropertyApplication{_apply(){}},_class.prototype.field_names={default_width:{no_states:!0,default:1200},min_width_px:{no_states:!0,default:0},max_width_px:{no_states:!0,default:null},min_height_px:{no_states:!0,default:0},max_height_px:{no_states:!0,default:null}},_class.prototype.not_in_style=!0,_class.prototype.apply_once=!0,_class.prototype.class_name="RootSizing",_class)}});var require_ResponsiveElement=__commonJS({"lib-browser-old/core/property_applications/applications/ResponsiveElement.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();var _class,PropertyApplication=require_PropertyApplication().default,u=require_u2();function get_margin_properties(){let ret={};for(let dir of["left","right","top","bottom"])ret["margin_".concat(dir)]={default:0};return ret}module.exports=(_class=class extends PropertyApplication{constructor(element,sel_fn,to_remove){var _to_remove;(_to_remove=to_remove)!=null||(to_remove=[]),super(sel_fn,to_remove),this.element=element,this.transition_properties=createTransitionProperties(this.element)}_apply(){}},_class.prototype._uses_properties=["margin_top","margin_right","margin_bottom","margin_left","min_width_css","max_width_css","min_height_css","max_height_css","width_css","height_css"],_class.prototype.transition_conditions={min_width_css(element){return!element.get_static_property("single_width")},max_width_css(element){return!element.get_static_property("single_width")},width_css(element){return element.get_static_property("single_width")},min_height_css(element){return!element.get_static_property("single_height")},max_height_css(element){return!element.get_static_property("single_height")},height_css(element){return element.get_static_property("single_height")}},_class.prototype.field_names=u.extend(get_margin_properties(),{parent_container_type_label:{no_states:!0,only_edit_mode:!0},margin_label:{no_states:!0,only_edit_mode:!0},padding_label:{no_states:!0,only_edit_mode:!0},nonant_alignment:{no_states:!1,default:"aa",no_plugin:!0},vert_alignment:{no_states:!1,default:"flex-start",no_plugin:!0},horiz_alignment:{no_states:!1,default:"flex-start",no_plugin:!0},flex_move_first:{no_states:!0,only_edit_mode:!0},flex_move_prev:{no_states:!0,only_edit_mode:!0},flex_move_next:{no_states:!0,only_edit_mode:!0},flex_move_last:{no_states:!0,only_edit_mode:!0},single_width:{no_states:!0,default:!1,no_plugin:!0},fit_width:{no_states:!0,default:!1},forced_fit_width_label:{no_states:!0,only_edit_mode:!0},min_width_css:{no_states:!1,default:"0px"},max_width_css:{no_states:!1,default:null,allow_empty_condition:!0},width_css:{no_states:!0,no_plugin:!0},single_height:{no_states:!0,default:!1,no_plugin:!0},fit_height:{no_states:!0,default:!1},forced_fit_height_label:{no_states:!0,only_edit_mode:!0},min_height_css:{no_states:!1,default:"0px"},max_height_css:{no_states:!1,default:null,allow_empty_condition:!0},height_css:{no_states:!0,no_plugin:!0},use_aspect_ratio:{no_states:!0,default:!1,no_plugin:!0},aspect_ratio_width:{no_states:!0,default:1,no_plugin:!0},aspect_ratio_height:{no_states:!0,default:1,no_plugin:!0},aspect_ratio_warning:{no_states:!0,only_edit_mode:!0},width_preview:{no_states:!0,only_edit_mode:!0},height_preview:{no_states:!0,only_edit_mode:!0},collapse_when_hidden:{no_states:!0,default:!1},order:{default:0,no_states:!0,no_plugin:!0}}),_class.prototype.not_in_style=!0,_class.prototype.apply_once=!0,_class.prototype.class_name="ResponsiveElement",_class);function should_add_implicit_transition(element,widthOrHeight){var _element$parent;return(element==null||(_element$parent=element.parent())==null?void 0:_element$parent.get_static_property("container_layout"))==="relative"&&!element.get_static_property("single_".concat(widthOrHeight))&&!element.get_static_property("fit_".concat(widthOrHeight))}function get_all_transitions(element,transition_css,implicit_transition){return should_add_implicit_transition(element,implicit_transition)?[transition_css,implicit_transition]:transition_css}function createTransitionProperties(element){return{get margin_top(){var _element$E;return element!=null&&(_element$E=element.E)!=null&&_element$E.uses_inset_instead_of_margin?"top":get_all_transitions(element,"margin-top","height")},get margin_right(){var _element$E2;return element!=null&&(_element$E2=element.E)!=null&&_element$E2.uses_inset_instead_of_margin?"right":get_all_transitions(element,"margin-right","width")},get margin_bottom(){var _element$E3;return element!=null&&(_element$E3=element.E)!=null&&_element$E3.uses_inset_instead_of_margin?"bottom":get_all_transitions(element,"margin-bottom","height")},get margin_left(){var _element$E4;return element!=null&&(_element$E4=element.E)!=null&&_element$E4.uses_inset_instead_of_margin?"left":get_all_transitions(element,"margin-left","width")},min_width_css:"min-width",max_width_css:"max-width",width_css:["min-width","max-width"],min_height_css:"min-height",max_height_css:"max-height",height_css:["min-height","max-height"]}}}});var require_ResponsiveContainer=__commonJS({"lib-browser-old/core/property_applications/applications/ResponsiveContainer.js"(exports,module){"use strict";init_define_process_env();init_shim();var _class,PropertyApplication=require_PropertyApplication().default;module.exports=(_class=class extends PropertyApplication{constructor(element,sel_fn,to_remove){var _to_remove;(_to_remove=to_remove)!=null||(to_remove=[]),super(sel_fn,to_remove),this.element=element}_apply(){}},_class.prototype.field_names={container_layout:{no_states:!0,default:"fixed"},container_horiz_alignment:{no_states:!1,default:"flex-start"},container_vert_alignment:{no_states:!1,default:"flex-start"},use_gap:{no_states:!0,default:!1},row_gap:{no_states:!1,default:0},column_gap:{no_states:!1,default:0}},_class.prototype.not_in_style=!0,_class.prototype.apply_once=!0,_class.prototype.class_name="ResponsiveContainer",_class)}});var require_ShortDimensions=__commonJS({"lib-browser-old/core/property_applications/applications/ShortDimensions.js"(exports,module){"use strict";init_define_process_env();init_shim();var _class,PropertyApplication=require_PropertyApplication().default;module.exports=(_class=class extends PropertyApplication{_apply(){}},_class.prototype.field_names={width:{default:960,no_states:!0},height:{default:600,no_states:!0}},_class.prototype.not_in_style=!0,_class.prototype.apply_once=!0,_class.prototype.class_name="ShortDimensions",_class)}});var require_PositionOnly=__commonJS({"lib-browser-old/core/property_applications/applications/PositionOnly.js"(exports,module){"use strict";init_define_process_env();init_shim();var _class,PropertyApplication=require_PropertyApplication().default;module.exports=(_class=class extends PropertyApplication{_apply(){}},_class.prototype.field_names={left:{no_states:!0},top:{no_states:!0}},_class.prototype.not_in_style=!0,_class.prototype.apply_once=!0,_class.prototype.class_name="PositionOnly",_class)}});var require_Rotation=__commonJS({"lib-browser-old/core/property_applications/applications/Rotation.js"(exports,module){"use strict";init_define_process_env();init_shim();var _class,PropertyApplication=require_PropertyApplication().default,application_utilities=require_application_utilities();module.exports=(_class=class extends PropertyApplication{_apply(data,canvas){var _data$rotation_angle;let angle=(_data$rotation_angle=data.rotation_angle)!=null?_data$rotation_angle:0;if(angle===0&&data._first_time)return;let formatted_angle="rotate("+angle+"deg)";application_utilities.apply_css_style(canvas,{"-ms-transform":formatted_angle,"-webkit-transform":formatted_angle,transform:formatted_angle})}},_class.prototype.not_in_style=!0,_class.prototype.field_names={rotation_angle:{default:0}},_class.prototype._uses_properties=["rotation_angle"],_class.prototype.class_name="Rotation",_class)}});var require_outlining=__commonJS({"lib-browser-old/outlining.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();var u=require_u2();function write_box_shadow(div,data){var _data$inset;(_data$inset=data.inset)!=null||(data.inset="");let shadow="".concat(data.horizontal,"px ").concat(data.vertical,"px ").concat(data.blur,"px ").concat(data.spread,"px ").concat(data.color," ").concat(data.inset);div.css({"-webkit-box-shadow":shadow,"-moz-box-shadow":shadow,"box-shadow":shadow})}function get_stack(div){let stack=div.data("__outline_stack");return stack||(stack=[],div.data("__outline_stack",stack)),stack}function push_outline_stack(div,outline){get_stack(div).push(outline)}function remove_from_stack(div,key){let o,stack=get_stack(div),to_remove=stack.filter(o2=>o2.key===key);for(o of to_remove)u.array_remove(stack,o)}function get_top_outline(div){let best=null,best_score=-2;for(let o of get_stack(div))o.priority>best_score&&(best_score=o.priority,best=o);return best}function update_display(div){let top=get_top_outline(div);display(div,top)}function display(div,outline){var _outline$box_shadow_p;(_outline$box_shadow_p=!(outline!=null&&outline.box_shadow_properties))!=null&&_outline$box_shadow_p?div.css({"-webkit-box-shadow":"none","-moz-box-shadow":"none","box-shadow":"none"}):write_box_shadow(div,outline.box_shadow_properties)}exports.add_outline=function(div,key,priority,horizontal,vertical,blur,spread2,color){let box_shadow_properties;if(!div){console.log("called add_outline without a div");return}vertical===void 0?box_shadow_properties=horizontal:box_shadow_properties={horizontal,vertical,blur,spread:spread2,color},remove_from_stack(div,key),push_outline_stack(div,{key,priority,box_shadow_properties}),update_display(div)};exports.remove_outline=function(div,key){div&&(remove_from_stack(div,key),update_display(div))};exports.get_default_shadow=function(div){if(!div)throw new u.UnexpectedError("called get_default_shadow without a div");for(let o of get_stack(div))if(o.key==="default")return o.box_shadow_properties}}});var require_BoxShadow=__commonJS({"lib-browser-old/core/property_applications/applications/BoxShadow.js"(exports,module){"use strict";init_define_process_env();init_shim();var _class,u=require_u2(),outlining=require_outlining(),PropertyApplication=require_PropertyApplication().default;module.exports=(_class=class extends PropertyApplication{_apply(data,canvas){if(data&&data.boxshadow_style!=="none"){var _ref,_data$boxshadow_blur,_ref2,_data$boxshadow_horiz,_ref3,_data$boxshadow_verti,_ref4,_data$boxshadow_sprea,_ref5,_data$boxshadow_color,_data$inset;data=u.extend({},data),data.blur=(_ref=(_data$boxshadow_blur=data.boxshadow_blur)!=null?_data$boxshadow_blur:data.blur)!=null?_ref:0,data.horizontal=(_ref2=(_data$boxshadow_horiz=data.boxshadow_horizontal)!=null?_data$boxshadow_horiz:data.horizontal)!=null?_ref2:0,data.vertical=(_ref3=(_data$boxshadow_verti=data.boxshadow_vertical)!=null?_data$boxshadow_verti:data.vertical)!=null?_ref3:0,data.spread=(_ref4=(_data$boxshadow_sprea=data.boxshadow_spread)!=null?_data$boxshadow_sprea:data.spread)!=null?_ref4:0,data.color=(_ref5=(_data$boxshadow_color=data.boxshadow_color)!=null?_data$boxshadow_color:data.color)!=null?_ref5:0;let inset=data.boxshadow_style==="inset"?"inset":"";data.inset=data.boxshadow_style!==void 0?inset:(_data$inset=data.inset)!=null?_data$inset:"",outlining.add_outline(canvas,"default",5,data)}else data.boxshadow_style==="none"&&!data._first_time&&outlining.remove_outline(canvas,"default")}},_class.prototype.transition_properties={boxshadow_style:"box-shadow"},_class.prototype._uses_properties=["boxshadow_style","boxshadow_horizontal","boxshadow_vertical","boxshadow_blur","boxshadow_color","boxshadow_spread"],_class.prototype.field_names={boxshadow_style:{default:"none"},boxshadow_horizontal:{default:2},boxshadow_vertical:{default:2},boxshadow_blur:{default:4},boxshadow_color:{default:"#AAAAAA"},boxshadow_spread:{default:0}},_class.prototype.class_name="BoxShadow",_class.prototype.no_solid_support=!0,_class)}});var require_PaddingFields=__commonJS({"lib-browser-old/core/property_applications/applications/PaddingFields.js"(exports,module){"use strict";init_define_process_env();init_shim();var _class,PropertyApplication=require_PropertyApplication().default;module.exports=(_class=class extends PropertyApplication{constructor(options){var _options$minimum_elem,_options$no_vertical_,_options$allow_legacy;super(options==null?void 0:options.selector),this.minimum_element_version=(_options$minimum_elem=options==null?void 0:options.minimum_element_version)!=null?_options$minimum_elem:0,this.no_vertical_if_legacy_center=(_options$no_vertical_=options==null?void 0:options.no_vertical_if_legacy_center)!=null?_options$no_vertical_:!1,this.allow_legacy=(_options$allow_legacy=options==null?void 0:options.allow_legacy)!=null?_options$allow_legacy:!1}_apply(data,canvas,instance){var _instance$element$roo;if(!((instance==null||(_instance$element$roo=instance.element.root())==null?void 0:_instance$element$roo.get_responsive_version())<1&&!((instance==null?void 0:instance.element.type())==="CustomElement"&&instance.element.E.custom_definition().get_responsive_version()>0)&&!this.allow_legacy)&&data){var _data$padding_top,_data$padding_right,_data$padding_bottom,_data$padding_left,_instance$element$roo2;if((instance==null?void 0:instance.element.element_version(!0))<this.minimum_element_version)return;if(data.container_layout==="fixed"){canvas[0].style.padding="0px";return}(_data$padding_top=data.padding_top)!=null||(data.padding_top=0),(_data$padding_right=data.padding_right)!=null||(data.padding_right=0),(_data$padding_bottom=data.padding_bottom)!=null||(data.padding_bottom=0),(_data$padding_left=data.padding_left)!=null||(data.padding_left=0),this.no_vertical_if_legacy_center&&(instance==null||(_instance$element$roo2=instance.element.root())==null?void 0:_instance$element$roo2.get_responsive_version())<1&&data.vertical_centering?(canvas[0].style["padding-left"]=data.padding_left+"px",canvas[0].style["padding-right"]=data.padding_right+"px"):data.padding_top===0&&data.padding_right===0&&data.padding_bottom===0&&data.padding_left===0&&data._first_time||(canvas[0].style.padding="".concat(data.padding_top,"px ").concat(data.padding_right,"px ").concat(data.padding_bottom,"px ").concat(data.padding_left,"px"))}}},_class.prototype._uses_properties=["padding_top","padding_right","padding_bottom","padding_left","vertical_centering","container_layout"],_class.prototype.transition_properties={padding_top:"padding-top",padding_right:"padding-right",padding_bottom:"padding-bottom",padding_left:"padding-left"},_class.prototype.field_names={padding_top:{default:0,allow_overrides:!0},padding_right:{default:0,allow_overrides:!0},padding_bottom:{default:0,allow_overrides:!0},padding_left:{default:0,allow_overrides:!0},vertical_centering:{default:!1}},_class.prototype.class_name="PaddingFields",_class.prototype.style_allows_overrides=!0,_class)}});var require_Font=__commonJS({"lib-browser-old/core/property_applications/applications/Font.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_includes();var _class,Lib=require_lib(),webfonts=require_webfonts(),PropertyApplication=require_PropertyApplication().default,application_utilities=require_application_utilities(),fonts_consts=require_fonts(),{FONT_FAMILY_VERSION}=require_elements(),valid_weights=["normal","bold","lighter","bolder","initial","inherit","unset","100","200","300","400","500","600","700","800","900"];module.exports=(_class=class extends PropertyApplication{_apply(data,canvas,instance){if(data){let font_face;instance&&instance.element.element_version(!0)>=FONT_FAMILY_VERSION?font_face=webfonts.to_font_face(data.font_family,data.font_weight):font_face=data.font_face,Lib().is_edit_mode()&&webfonts.load_font(font_face);let font_data=webfonts.get_quoted_face_and_variant(font_face);application_utilities.apply_css_style(canvas,{"font-family":font_data.font_family,"font-size":data.font_size+"px"});let weight=null;data.bold?weight="bold":font_data.variant&&valid_weights.includes(font_data.variant)?weight=font_data.variant:data._first_time&&(!font_data.variant||!valid_weights.includes(font_data.variant))||(weight="normal"),weight&&(canvas[0].style["font-weight"]=weight);let underline=null;data.underline?underline="underline":!data.underline&&!data._first_time&&(underline="none"),underline&&(canvas[0].style["text-decoration"]=underline);let italic=null;data.italic?italic="italic":!data.italic&&!data._first_time&&(italic="normal"),italic&&(canvas[0].style["font-style"]=italic),canvas[0].style.color=data.font_color,data.font_alignment==="left"&&data._first_time&&instance.element.type()!=="PictureInput"||(canvas[0].style["text-align"]=data.font_alignment)}}},_class.prototype._uses_properties=["font_face","font_family","font_weight","font_size","bold","underline","italic","font_color","font_alignment"],_class.prototype.transition_properties={font_size:"font-size",font_color:"color"},_class.prototype.field_names={font_face:{default:fonts_consts.DEFAULT_FONT},font_family:{default:fonts_consts.DEFAULT_CSS_TOKEN},font_weight:{default:fonts_consts.DEFAULT_WEIGHT},font_size:{default:14},bold:{},italic:{},underline:{},font_alignment:{default:"left"},font_color:{default:"#252525"}},_class.prototype.class_name="Font",_class)}});var require_FontShadow=__commonJS({"lib-browser-old/core/property_applications/applications/FontShadow.js"(exports,module){"use strict";init_define_process_env();init_shim();var _class,PropertyApplication=require_PropertyApplication().default;module.exports=(_class=class extends PropertyApplication{_apply(data,canvas){if(data){if(data.textshadow){let param="".concat(data.textshadow_horizontal,"px ").concat(data.textshadow_vertical,"px ").concat(data.textshadow_blur,"px ").concat(data.textshadow_color);canvas[0].style.textShadow=param}!data.textshadow&&!data._first_time&&(canvas[0].style.textShadow="none")}}},_class.prototype._uses_properties=["textshadow","textshadow_horizontal","textshadow_vertical","textshadow_blur","textshadow_color"],_class.prototype.transition_properties={textshadow:"text-shadow"},_class.prototype.field_names={textshadow:{},textshadow_horizontal:{default:1},textshadow_vertical:{default:1},textshadow_blur:{default:0},textshadow_color:{default:"#Ffffff"}},_class.prototype.class_name="FontShadow",_class)}});var require_FontSpacing=__commonJS({"lib-browser-old/core/property_applications/applications/FontSpacing.js"(exports,module){"use strict";init_define_process_env();init_shim();var _class,PropertyApplication=require_PropertyApplication().default;module.exports=(_class=class extends PropertyApplication{_apply(data,canvas){data&&(data.letter_spacing===0&&data._first_time||(canvas[0].style["letter-spacing"]=data.letter_spacing+"px"),data.word_spacing===0&&data._first_time||(canvas[0].style["word-spacing"]=data.word_spacing+"px"),canvas[0].style["line-height"]=data.line_height)}},_class.prototype._uses_properties=["letter_spacing","word_spacing","line_height"],_class.prototype.transition_properties={letter_spacing:"letter-spacing",word_spacing:"word-spacing",line_height:"line-height"},_class.prototype.field_names={word_spacing:{default:0},line_height:{default:1},letter_spacing:{default:0}},_class.prototype.class_name="FontSpacing",_class)}});var require_style=__commonJS({"lib-browser-old/constants/style.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.STYLE_PROPS=exports.BORDER_TO_CORNER_MAPPING=void 0;var BORDER_TO_CORNER_MAPPING={top:"top-left",left:"bottom-left",right:"top-right",bottom:"bottom-right"};exports.BORDER_TO_CORNER_MAPPING=BORDER_TO_CORNER_MAPPING;var STYLE_PROPS=["Opacity","Font","PlaceholderColor","CenterVertically","BackdropBackground","Stripes","Background","ButtonBackground","Border","Padding","InputPadding","FontShadow","Boxshadow"];exports.STYLE_PROPS=STYLE_PROPS}});var require_Border=__commonJS({"lib-browser-old/core/property_applications/applications/Border.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();var _window,_class,u=require_u2(),PropertyApplication=require_PropertyApplication().default,application_utilities=require_application_utilities(),style_consts=require_style(),border_properties={four_border_style:{default:(_window=window)!=null&&_window.is_maison?"connected":!1,no_states:!0}},border_transition_properties={};for(let border_location of["","_top","_right","_bottom","_left"])border_properties["border_style"+border_location]={default:"none"},border_properties["border_roundness"+border_location]={default:0},border_properties["border_width"+border_location]={default:1},border_properties["border_color"+border_location]={default:"#6B6B6B"};for(let border_location of["","top","right","bottom","left"])if(border_location==="")border_transition_properties.border_roundness="border-radius",border_transition_properties.border_width="border-width",border_transition_properties.border_color="border-color";else{let corner_location=style_consts.BORDER_TO_CORNER_MAPPING[border_location],_location="_"+border_location;border_transition_properties["border_roundness"+_location]="border-"+corner_location+"-radius",border_transition_properties["border_width"+_location]="border-"+border_location+"-width",border_transition_properties["border_color"+_location]="border-"+border_location+"-color"}module.exports=(_class=class extends PropertyApplication{constructor(sel_fn,to_remove,data){var _to_remove;(_to_remove=to_remove)!=null||(to_remove=[]),super(sel_fn,to_remove),this.data=data}_apply(data,canvas){if(data){var _this$data;if(!((_this$data=this.data)!=null&&_this$data.only_main_border)&&data.four_border_style)for(let border_location of["top","right","bottom","left"]){let options={};(data["border_style_"+border_location]!=="none"||!data._first_time)&&(options["border-"+border_location+"-style"]=data["border_style_"+border_location],options["border-"+border_location+"-width"]=data["border_width_"+border_location]+"px",options["border-"+border_location+"-color"]=u.RGBA_to_RGB(data["border_color_"+border_location]),options["border-"+border_location+"-color"]=data["border_color_"+border_location]);let border_corner=style_consts.BORDER_TO_CORNER_MAPPING[border_location];options["border-"+border_corner+"-radius"]=data["border_roundness_"+border_location]+"px",application_utilities.apply_css_style(canvas,options)}else{let options={};(data.border_style!=="none"||!data._first_time)&&(options["border-style"]=data.border_style,options["border-width"]=data.border_width+"px",options["border-color"]=u.RGBA_to_RGB(data.border_color),options["border-color"]=data.border_color),options["border-radius"]=data.border_roundness+"px",options["-moz-border-radius"]=data.border_roundness+"px",application_utilities.apply_css_style(canvas,options)}}}},_class.prototype._uses_properties=Object.keys(border_properties),_class.prototype.transition_properties=border_transition_properties,_class.prototype.field_names=border_properties,_class.prototype.class_name="Border",_class)}});var require_PaddingText=__commonJS({"lib-browser-old/core/property_applications/applications/PaddingText.js"(exports,module){"use strict";init_define_process_env();init_shim();var _class,{PADDING_VERSION}=require_elements(),PropertyApplication=require_PropertyApplication().default;module.exports=(_class=class extends PropertyApplication{_apply(data,canvas,instance){if(data){var _instance$element$roo;let use_legacy_padding=instance.element.element_version(!0)<PADDING_VERSION||instance.element.context_element().E_object().is_plugin;if(((_instance$element$roo=instance.element.root())==null?void 0:_instance$element$roo.get_responsive_version())>0){if(data.vertical_centering?canvas.addClass("bubble-r-vertical-center"):canvas.removeClass("bubble-r-vertical-center"),use_legacy_padding){var _data$padding_vertica;let vertical_padding=(_data$padding_vertica=data.padding_vertical)!=null?_data$padding_vertica:0;vertical_padding===0&&data._first_time||canvas.css({"padding-top":vertical_padding,"padding-bottom":vertical_padding})}}else{var _vertical_padding;let vertical_padding;if(data.vertical_centering)vertical_padding=(data.height-data.font_size)/2-2;else{if(!use_legacy_padding)return;vertical_padding=data.padding_vertical}(_vertical_padding=vertical_padding)!=null||(vertical_padding=0),vertical_padding===0&&data._first_time||(canvas[0].style["padding-top"]=vertical_padding+"px ",data.stretch_to_fit&&(canvas[0].style["padding-bottom"]=vertical_padding+"px "))}if(use_legacy_padding){var _data$padding_horizon;(_data$padding_horizon=data.padding_horizontal)!=null||(data.padding_horizontal=0),data.padding_horizontal===0&&data._first_time||(canvas[0].style["padding-left"]=data.padding_horizontal+"px ",canvas[0].style["padding-right"]=data.padding_horizontal+"px ")}}}},_class.prototype._uses_properties=["vertical_centering","padding_vertical","padding_horizontal","font_size","height","stretch_to_fit"],_class.prototype.transition_properties={padding_vertical:"padding-top",padding_horizontal:"padding-left"},_class.prototype.field_names={padding_vertical:{default:0},padding_horizontal:{default:0},vertical_centering:{default:!1}},_class.prototype.class_name="PaddingText",_class)}});var require_Padding=__commonJS({"lib-browser-old/core/property_applications/applications/Padding.js"(exports,module){"use strict";init_define_process_env();init_shim();var _class,PropertyApplication=require_PropertyApplication().default,{PADDING_VERSION}=require_elements();module.exports=(_class=class extends PropertyApplication{_apply(data,canvas,instance){if(data&&(instance.element.element_version(!0)<PADDING_VERSION||instance.element.context_element().E.is_plugin)){var _data$padding_vertica,_data$padding_horizon;(_data$padding_vertica=data.padding_vertical)!=null||(data.padding_vertical=0),(_data$padding_horizon=data.padding_horizontal)!=null||(data.padding_horizontal=0),data.padding_vertical===0&&data.padding_horizontal===0&&data._first_time||(canvas[0].style.padding=data.padding_vertical+"px "+data.padding_horizontal+"px")}}},_class.prototype._uses_properties=["padding_vertical","padding_horizontal"],_class.prototype.transition_properties={padding_vertical:"padding-top",padding_horizontal:"padding-left"},_class.prototype.field_names={padding_vertical:{default:0},padding_horizontal:{default:0}},_class.prototype.class_name="Padding",_class)}});var require_InputPadding=__commonJS({"lib-browser-old/core/property_applications/applications/InputPadding.js"(exports,module){"use strict";init_define_process_env();init_shim();var _class,PropertyApplication=require_PropertyApplication().default,{PADDING_VERSION}=require_elements();module.exports=(_class=class extends PropertyApplication{_apply(data,canvas,instance){if(data&&(instance.element.element_version(!0)<PADDING_VERSION||instance.element.context_element().E.is_plugin)){var _data$padding_horizon;(_data$padding_horizon=data.padding_horizontal)!=null||(data.padding_horizontal=0),canvas[0].style.padding="0px "+data.padding_horizontal+"px"}}},_class.prototype._uses_properties=["padding_horizontal"],_class.prototype.transition_properties={padding_horizontal:"padding"},_class.prototype.field_names={padding_horizontal:{default:4}},_class.prototype.class_name="InputPadding",_class)}});var require_PlaceholderColor=__commonJS({"lib-browser-old/core/property_applications/applications/PlaceholderColor.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();require_es_array_includes();var _class,PropertyApplication=require_PropertyApplication().default,u=require_u2(),{PLACEHOLDER_COLOR_VERSION}=require_elements(),classes={},previous_placeholders=new WeakMap;module.exports=(_class=class extends PropertyApplication{_apply(data,canvas,instance){if(data)if(instance&&instance.element.element_version(!0)>=PLACEHOLDER_COLOR_VERSION){let previous_color=previous_placeholders.get(canvas[0]);if(previous_color){let previous=classes[previous_color];canvas.removeClass(previous.class_name),previous.count--,previous.count<=0&&(previous.style_tag.remove(),delete classes[previous_color])}if(!(data.placeholder_color in classes)){let class_name="a"+u.LUID(),style2=document.createElement("style");style2.textContent="\n.".concat(class_name,".").concat(class_name,"::-webkit-input-placeholder {\n  color: ").concat(data.placeholder_color,";\n}\n.").concat(class_name,".").concat(class_name,"::-moz-placeholder {\n  color:    ").concat(data.placeholder_color,";\n  opacity:  1;\n}\n.").concat(class_name,".").concat(class_name,":-ms-input-placeholder {\n  color: ").concat(data.placeholder_color," !important;\n}\n.").concat(class_name,".").concat(class_name,":-moz-placeholder {\n  color: ").concat(data.placeholder_color,";\n  opacity:  1;\n}"),document.head.appendChild(style2),classes[data.placeholder_color]={class_name,style_tag:style2,count:0}}canvas.addClass(classes[data.placeholder_color].class_name),classes[data.placeholder_color].count++,previous_placeholders.set(canvas[0],data.placeholder_color)}else canvas.removeClass(["grey","black","white","blue","green","red"].join(" ")),data.placeholder_color!=="grey"&&["grey","black","white","blue","green","red"].includes(data.placeholder_color)&&canvas.addClass(data.placeholder_color)}},_class.prototype._uses_properties=["placeholder_color"],_class.prototype.transition_properties={},_class.prototype.no_solid_support=!0,_class.prototype.field_names={placeholder_color:{default:"rgba(181, 181, 181, 1)"}},_class.prototype.class_name="PlaceholderColor",_class)}});var require_ToolTip=__commonJS({"lib-browser-old/core/property_applications/applications/ToolTip.js"(exports,module){"use strict";init_define_process_env();init_shim();var _class,PropertyApplication=require_PropertyApplication().default;module.exports=(_class=class extends PropertyApplication{_apply(data,canvas,instance){data&&instance.run_mode()&&canvas.attr("title",data.title_attribute)}},_class.prototype._uses_properties=["title_attribute"],_class.prototype.transition_properties={},_class.prototype.not_in_style=!0,_class.prototype.field_names={title_attribute:{optional:!0}},_class.prototype.no_solid_support=!0,_class.prototype.class_name="ToolTip",_class)}});var require_UniqueID=__commonJS({"lib-browser-old/core/property_applications/applications/UniqueID.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_includes();var _class,configuration=require_client_config2(),appquery=require_appquery(),PropertyApplication=require_PropertyApplication().default;module.exports=(_class=class extends PropertyApplication{_apply(data,canvas,instance){data&&instance.run_mode()&&appquery.has_advanced_feature_enabled("expose_id_option")&&(data.unique_id!=null||!["",null,void 0].includes(canvas[0].id))&&(data.unique_id==null?configuration.run_mode_ids||canvas.removeAttr("id"):canvas[0].id=data.unique_id)}},_class.prototype._uses_properties=["unique_id"],_class.prototype.transition_properties={},_class.prototype.not_in_style=!0,_class.prototype.field_names={title_attribute:{optional:!0,no_states:!0}},_class.prototype.class_name="UniqueID",_class)}});var require_b_file_shared=__commonJS({"lib-browser-old/u/shared/b_file_shared.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.CDN_URL_SUFFIX=void 0;exports.get_file_cdn_url=get_file_cdn_url;exports.is_file_cdn_url=is_file_cdn_url;exports.replace_s3_with_cdn_url=replace_s3_with_cdn_url;require_es_regexp_exec();require_es_string_replace();require_es_array_includes();require_es_string_includes();var configuration=_interopRequireWildcard(require_client_config2()),_bundle=require_bundle(),hash=_interopRequireWildcard(require_hash2());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function replace_s3_with_cdn_url(bare_s3_url,appname){return configuration.user_file_url?bare_s3_url.replace(configuration.user_file_url,get_file_cdn_url(appname)):bare_s3_url}function get_file_cdn_url(appname){return appname==="meta"?"".concat(_bundle.META_APPNAME_FOR_OWN_CDN,".").concat(CDN_URL_SUFFIX):"".concat(hash.digest(appname!=null?appname:""),".").concat(CDN_URL_SUFFIX)}function is_file_cdn_url(src){let{user_file_url,user_file_cdn}=configuration;return user_file_url!=null&&src.includes(user_file_url)||user_file_cdn!=null&&src.includes(user_file_cdn)||src.includes("."+CDN_URL_SUFFIX)}var CDN_URL_SUFFIX="cdn.bubble.io/";exports.CDN_URL_SUFFIX=CDN_URL_SUFFIX}});var require_imgix=__commonJS({"lib-browser-old/imgix.js"(exports){"use strict";init_define_process_env();init_shim();require_es_regexp_to_string();require_es_array_includes();require_es_regexp_exec();require_es_string_split();require_es_array_iterator();require_web_dom_collections_iterator();var u=require_u2(),logger=require_logger(),b_file_shared=require_b_file_shared(),Lib=require_lib(),configuration=require_client_config2(),querystring=require_querystring(),imgix=exports;imgix.ignore_imgix_fn=function(src,ignore_imgix,force_imgix){return force_imgix?!1:!!(!configuration.image_optimization_service||src.indexOf("ignore_imgix")!==-1||ignore_imgix||src.indexOf(".svg")!==-1||!b_file_shared.is_file_cdn_url(src)&&!configuration.always_proxy_user_files)};function get_imgix_url(src,parameters){return src.indexOf("//")===0?src=Lib().location.parsed_url().protocol+src:src.indexOf("https://")!==0&&src.indexOf("http://")!==0&&(src=Lib().location.parsed_url().protocol+"//"+src),configuration.always_proxy_user_files?Lib().location.parsed_url().host+"/user/iop/"+u.fixedEncodeURIComponent(src)+"?"+querystring.stringify(parameters):configuration.image_optimization_service+"/"+u.fixedEncodeURIComponent(src)+"?"+querystring.stringify(parameters)}function normalize_size(size){size=size*1.1;let factor=Math.floor(Math.log2(size)),midpoint=Math.pow(2,factor)*1.5;return size>=midpoint?Math.pow(2,factor+1):midpoint}imgix.get_reduced_file_url=function(src,width,height,options){var _parameters$fit;let width_ratio;if(width){let new_width=normalize_size(width);width_ratio=new_width/width,width=new_width}else width_ratio=null;height&&(width_ratio?height=Math.round(width_ratio*height):height=normalize_size(height));function to_valid_number_string(number){if(isNaN(number)||number==null){var _Number$isNaN;return(_Number$isNaN=Number.isNaN)!=null&&_Number$isNaN.call(Number,number)&&logger.warn("Picture with NaN dimensions",{src,width,height,options}),null}else return number.toString()}let parameters={w:to_valid_number_string(width),h:to_valid_number_string(height),auto:"compress"};options&&u.extend(parameters,options);let existing_options=src.split("?")[1];return existing_options&&(existing_options=querystring.parse(existing_options),u.extend(parameters,existing_options)),(_parameters$fit=parameters.fit)!=null||(parameters.fit="max"),get_imgix_url(src.split("?")[0],parameters)};imgix.get_image_json_data=function(src,cb){let param={fm:"json"},existing_options=src.split("?")[1];if(existing_options){let querystring_options=querystring.parse(existing_options);switch(querystring_options.fm="json",u.extend(param,querystring_options),querystring_options.fit){case"crop":case"facearea":case"clamp":case"min":case"scale":if(querystring_options.w!=null&&querystring_options.h!=null){let dims={width:querystring_options.w,height:querystring_options.h};cb(dims)}else cb(null);return}if(querystring_options.ar){cb(null);return}}src=Lib().location.parsed_url().protocol+"//"+get_imgix_url(src.split("?")[0],param);let ajax_request=$.ajax(src);return ajax_request.done((data,textStatus,jqXHR)=>{let height,width;[6,8].includes(data.Orientation)?(width=data.PixelHeight,height=data.PixelWidth):(width=data.PixelWidth,height=data.PixelHeight),cb(!width||!height?null:{width,height})}),ajax_request.fail((jqXHR,textStatus,errorThrown)=>cb(null))};imgix.add_processing_options=function(src,properties){if((src==null?void 0:src.split)==null)return"";let parameters={},existing_options=src.split("?")[1];if(existing_options&&u.extend(parameters,querystring.parse(existing_options)),properties.auto_enhance&&(parameters.auto="enhance"),properties.red_eye&&(properties.auto?parameters.auto+=",redeye":parameters.auto="redeye"),properties.extract_face){var _properties$facepad;parameters.fit="facearea",parameters.facepad=(_properties$facepad=properties.facepad)!=null?_properties$facepad:1}else properties.crop_to_fit&&(parameters.fit="crop");for(let property of["blur","sepia"])properties[property]&&(parameters[property]=properties[property+"_level"]);return properties.pixel&&(parameters.px=properties.pixel_level),properties.mono&&(parameters.mono=u.rgb_to_hex(properties.mono_level).code.split("#")[1]),properties.mask&&(parameters.mask="ellipse"),properties.q!=null&&(parameters.q=properties.q),properties.fm&&(parameters.fm=properties.fm),src.split("?")[0]+"?"+querystring.stringify(parameters)}}});var require_images=__commonJS({"lib-browser-old/shared/images.js"(exports){"use strict";init_define_process_env();init_shim();var configuration=require_client_config2(),u=require_u2(),imgix=require_imgix(),images=exports,_image_dimensions_cache={};images.get_image_real_dimensions=function(src,cb){if(!src){cb({});return}if(_image_dimensions_cache[src]){cb(_image_dimensions_cache[src]);return}function get_info_through_download(){let temp_image=u.img(void 0,$("body"),src);temp_image.hide(),temp_image.on("load",()=>{let res={width:temp_image.width(),height:temp_image.height()};temp_image.remove(),_image_dimensions_cache[src]=res,cb(res)}),temp_image.on("error",()=>{temp_image.remove(),cb({})})}let fixed_file_url=u.fixedEncodeURIComponent(configuration.user_file_url),is_s3_url=src.indexOf(configuration.user_file_url)!==-1||src.indexOf(fixed_file_url)!==-1,has_imgix=configuration.image_optimization_service&&src.indexOf(configuration.image_optimization_service)!==-1;is_s3_url&&has_imgix?imgix.get_image_json_data(src,res=>{res?(_image_dimensions_cache[src]=res,cb(res)):get_info_through_download()}):get_info_through_download()}}});var require_image_utils=__commonJS({"lib-browser-old/core/core_elements/shared/image_utils.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.download_image=download_image;exports.downloaded_images=void 0;exports.keep_proportions=keep_proportions;exports.optimize_image=optimize_image;exports.rescale_image=rescale_image;exports.transparent_image=exports.reset_img_settings=void 0;require_es_regexp_exec();require_es_regexp_test();require_es_string_replace();var u=_interopRequireWildcard(require_u2()),images=_interopRequireWildcard(require_images()),element_eval=_interopRequireWildcard(require_element_eval()),configuration=_interopRequireWildcard(require_client_config2()),imgix=_interopRequireWildcard(require_imgix()),_lib=_interopRequireDefault(require_lib()),_appquery=_interopRequireDefault(require_appquery()),safe_require=_interopRequireWildcard(require_safe_require()),b_file_shared=_interopRequireWildcard(require_b_file_shared());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}safe_require.safe_register("./core/core_elements/shared/image_utils",exports);var reset_img_settings=img=>img.css({margin:"0px",width:"100%",height:"100%","object-fit":""});exports.reset_img_settings=reset_img_settings;function rescale_image(_ref){let{src,img,element_height,element_width,cb,instance,ref_version}=_ref;src.indexOf("data:image/")===0&&cb(img);function get_element_height(){return instance!=null?{element_height:element_eval.evaluate_property(instance,"height"),element_width:element_eval.evaluate_property(instance,"width")}:{element_height,element_width}}({element_height,element_width}=get_element_height()),src=optimize_image(src,element_width,element_height),images.get_image_real_dimensions(src,res=>{if(res.height==null){cb==null||cb(img);return}if(!(instance!=null&&u.autorun_top(()=>instance.state("src_version"))!==ref_version)){if(reset_img_settings(img),res.height/res.width>element_height/element_width){let new_width=res.width/res.height*element_height;img.css({"margin-left":(element_width-new_width)/2+"px",width:new_width+"px"})}else{let new_height=res.height/res.width*element_width;img.css({"margin-top":(element_height-new_height)/2+"px",height:new_height+"px"})}cb==null||cb(img)}})}function keep_proportions(instance,width,force){let height;return force||instance.get_static_property("keep_proportion_resize")?(height=width/instance.element.get_width()*instance.element.get_height(),instance.set_height(height)):height=instance.element.get_height(),height}function optimize_image(src,width,height,options,ignore_imgix,force_imgix){var _options;if(typeof src!="string")return;if(/^data:image\//.test(src)||/^blob:/.test(src)||(src=b_file_shared.replace_s3_with_cdn_url(src,_appquery.default.appname()),/\.(mov|mp4|mkv|avi|flv|webm)$/i.test(src)))return src;width===0&&(width=void 0),height===0&&(height=void 0);let was_https=src.indexOf("https://")===0;if(src.indexOf("http://")===0&&(src=src.split("http://").slice(1).join("http://")),src.indexOf("https://")===0&&(src=src.split("https://").slice(1).join("https://")),src.indexOf("//")===0&&(src=src.replace("//","")),!(configuration.image_optimization_service&&src.indexOf(configuration.image_optimization_service)!==-1||src.indexOf("/user/iop/")!==-1)&&!((_options=options)!=null&&_options.force)&&imgix.ignore_imgix_fn(src))configuration.user_file_cdn&&(src=src.replace(configuration.user_file_cdn,b_file_shared.get_file_cdn_url(_appquery.default.appname())));else{if(!(0,_lib.default)().is_edit_mode()){var _window;let dpr=normalize_dpr((_window=window)==null?void 0:_window.devicePixelRatio);if(dpr!=null){var _options2;(_options2=options)!=null||(options={}),options.dpr=dpr}}src=imgix.get_reduced_file_url(src,width,height,options)}let protocol;return was_https?protocol="https:":protocol=(0,_lib.default)().location.parsed_url().protocol,src=protocol+"//"+src,src}function download_image(src,instance,cb){if(downloaded_images[src])return cb==null?void 0:cb(src);{let download_div=u.img(void 0,void 0,src);return download_div.on("load",()=>{var _Lib$workflow$debugge;return downloaded_images[src]=!0,cb==null||cb(src),download_div.remove(),(_Lib$workflow$debugge=(0,_lib.default)().workflow.debugger)==null?void 0:_Lib$workflow$debugge.get_request_size(src,"image")}),download_div.on("error",()=>{if(download_div.remove(),cb){var _Lib$workflow$debugge2;return cb(transparent_image()),(_Lib$workflow$debugge2=(0,_lib.default)().workflow.debugger)==null?void 0:_Lib$workflow$debugge2.report_error({type:"warning",instance,error:{message:"The image could not be loaded: ".concat(src," .")}})}})}}var MIN_DPR=.5,MAX_DPR=8,DPR_INCREMENTS=.25;function normalize_dpr(dpr){return dpr==null?1:dpr>MIN_DPR?dpr<MAX_DPR?DPR_INCREMENTS*Math.floor(dpr/DPR_INCREMENTS):MAX_DPR:MIN_DPR}var transparent_image=()=>"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";exports.transparent_image=transparent_image;var downloaded_images={};exports.downloaded_images=downloaded_images}});var require_path=__commonJS({"node_modules/core-js/internals/path.js"(exports,module){init_define_process_env();init_shim();var global=require_global();module.exports=global}});var require_well_known_symbol_wrapped=__commonJS({"node_modules/core-js/internals/well-known-symbol-wrapped.js"(exports){init_define_process_env();init_shim();var wellKnownSymbol=require_well_known_symbol();exports.f=wellKnownSymbol}});var require_define_well_known_symbol=__commonJS({"node_modules/core-js/internals/define-well-known-symbol.js"(exports,module){init_define_process_env();init_shim();var path=require_path(),hasOwn=require_has_own_property(),wrappedWellKnownSymbolModule=require_well_known_symbol_wrapped(),defineProperty=require_object_define_property().f;module.exports=function(NAME){var Symbol2=path.Symbol||(path.Symbol={});hasOwn(Symbol2,NAME)||defineProperty(Symbol2,NAME,{value:wrappedWellKnownSymbolModule.f(NAME)})}}});var require_es_symbol_replace=__commonJS({"node_modules/core-js/modules/es.symbol.replace.js"(){init_define_process_env();init_shim();var defineWellKnownSymbol=require_define_well_known_symbol();defineWellKnownSymbol("replace")}});var require_colors=__commonJS({"lib-browser-old/constants/colors.js"(exports){"use strict";init_define_process_env();init_shim();require_es_error_cause();require_es_regexp_constructor();require_es_regexp_dot_all();require_es_regexp_exec();require_es_regexp_to_string();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();require_es_array_reduce();require_es_symbol_replace();require_es_string_replace();require_es_symbol_description();Object.defineProperty(exports,"__esModule",{value:!0});exports.VAR_IDENTIFIER=exports.TOKEN_NAME=exports.SORTED_DEFAULT_TOKENS=exports.RGB_VAR_IDENTIFIER=exports.RGB_TOKEN_ALPHA=exports.RGBA_TOKEN=exports.MISSING_USER_COLOR_TOKEN_TEXT=exports.MAX_USER_COLORS=exports.DEFAULT_USER_COLOR_TOKEN_RGBA=exports.DEFAULT_TOKEN_NAMES_DESCRIPTIONS=exports.DEFAULT_COLOR_TOKENS=exports.COLOR_VARIANTS=exports.CAPTURE_ALPHA=void 0;function _wrapRegExp(){_wrapRegExp=function(re,groups){return new BabelRegExp(re,void 0,groups)};var _super=RegExp.prototype,_groups=new WeakMap;function BabelRegExp(re,flags,groups){var _this=new RegExp(re,flags);return _groups.set(_this,groups||_groups.get(re)),_setPrototypeOf(_this,BabelRegExp.prototype)}function buildGroups(result,re){var g=_groups.get(re);return Object.keys(g).reduce(function(groups,name){var i=g[name];if(typeof i=="number")groups[name]=result[i];else{for(var k=0;result[i[k]]===void 0&&k+1<i.length;)k++;groups[name]=result[i[k]]}return groups},Object.create(null))}return _inherits(BabelRegExp,RegExp),BabelRegExp.prototype.exec=function(str){var result=_super.exec.call(this,str);if(result){result.groups=buildGroups(result,this);var indices=result.indices;indices&&(indices.groups=buildGroups(indices,this))}return result},BabelRegExp.prototype[Symbol.replace]=function(str,substitution){if(typeof substitution=="string"){var groups=_groups.get(this);return _super[Symbol.replace].call(this,str,substitution.replace(/\$<([^>]+)>/g,function(_,name){var group=groups[name];return"$"+(Array.isArray(group)?group.join("$"):group)}))}if(typeof substitution=="function"){var _this=this;return _super[Symbol.replace].call(this,str,function(){var args=arguments;return typeof args[args.length-1]!="object"&&(args=[].slice.call(args)).push(buildGroups(args,_this)),substitution.apply(this,args)})}return _super[Symbol.replace].call(this,str,substitution)},_wrapRegExp.apply(this,arguments)}function _inherits(subClass,superClass){if(typeof superClass!="function"&&superClass!==null)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o2,p2){return o2.__proto__=p2,o2},_setPrototypeOf(o,p)}var DEFAULT_COLOR_TOKENS={primary:{default:"rgba(2, 5, 211, 1)"},primary_contrast:{default:"rgba(255, 255, 255, 1)"},text:{default:"rgba(9, 23, 71, 1)"},surface:{default:"rgba(255, 255, 255, 1)"},background:{default:"rgba(255, 255, 255, 0)"},destructive:{default:"rgba(255, 0, 0, 1)"},success:{default:"rgba(23, 219, 78, 1)"},alert:{default:"rgba(250, 181, 21, 1)"}};exports.DEFAULT_COLOR_TOKENS=DEFAULT_COLOR_TOKENS;var DEFAULT_USER_COLOR_TOKEN_RGBA="rgba(0,0,0,1)";exports.DEFAULT_USER_COLOR_TOKEN_RGBA=DEFAULT_USER_COLOR_TOKEN_RGBA;var MISSING_USER_COLOR_TOKEN_TEXT="Custom color (MISSING)";exports.MISSING_USER_COLOR_TOKEN_TEXT=MISSING_USER_COLOR_TOKEN_TEXT;var RGBA_TOKEN=/var\(--color_[^)]*\)/g;exports.RGBA_TOKEN=RGBA_TOKEN;var RGB_TOKEN_ALPHA=/rgba\(var\(--color_[^)]*\),[^)]*\)/g;exports.RGB_TOKEN_ALPHA=RGB_TOKEN_ALPHA;var TOKEN_NAME=/var\(--color_([^)]*)\)/;exports.TOKEN_NAME=TOKEN_NAME;var CAPTURE_ALPHA=_wrapRegExp(/rgba\((.*), ?([0-9.]+)\)/,{base:1,opacity:2});exports.CAPTURE_ALPHA=CAPTURE_ALPHA;var MAX_USER_COLORS=24;exports.MAX_USER_COLORS=MAX_USER_COLORS;var VAR_IDENTIFIER="var(";exports.VAR_IDENTIFIER=VAR_IDENTIFIER;var RGB_VAR_IDENTIFIER="_rgb";exports.RGB_VAR_IDENTIFIER=RGB_VAR_IDENTIFIER;var COLOR_VARIANTS=["default"];exports.COLOR_VARIANTS=COLOR_VARIANTS;var SORTED_DEFAULT_TOKENS=["primary","primary_contrast","text","surface","background","destructive","success","alert"];exports.SORTED_DEFAULT_TOKENS=SORTED_DEFAULT_TOKENS;var DEFAULT_TOKEN_NAMES_DESCRIPTIONS={primary:{name:"Primary",description:"Color for any primary buttons, actions, or hover treatment for clickable elements."},primary_contrast:{name:"Primary contrast",description:"Color of text and icons in a primary button."},text:{name:"Text",description:"Color of static text and icons."},surface:{name:"Surface",description:"Background color for containers."},background:{name:"Background",description:"Background color for pages and page sections."},destructive:{name:"Destructive",description:"Indicates major errors, deleting, and negative values."},success:{name:"Success",description:"Indicates a successful action the user has taken, or positive numerical values."},alert:{name:"Alert",description:"Caution color that notifies a user there is an action to take."}};exports.DEFAULT_TOKEN_NAMES_DESCRIPTIONS=DEFAULT_TOKEN_NAMES_DESCRIPTIONS}});var require_SimpleGradient=__commonJS({"lib-browser-old/core/property_applications/applications/SimpleGradient.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_includes();require_es_array_iterator();require_web_dom_collections_iterator();require_es_string_includes();require_es_regexp_exec();require_es_string_replace();var _class,u=require_u2(),PropertyApplication=require_PropertyApplication().default,colors_consts=require_colors();module.exports=(_class=class extends PropertyApplication{_apply(data,canvas){if(data){let is_linear=[null,void 0,"linear"].includes(data.style),DEFAULT_RGBA="rgba(0,0,0,1)",c1=data.from,c2=data.to,direction,ms_direction,c_mid=data.mid;if(is_linear)if(data.direction==="custom"){var _data$angle;direction=((_data$angle=data.angle)!=null?_data$angle:45)+"deg"}else{var _data$direction;if(direction=(_data$direction=data.direction)!=null?_data$direction:"top",direction==="top"||direction==="bottom"){if(ms_direction=0,direction==="bottom"){let aux=c1;c1=c2,c2=aux,direction="top"}}else if((direction==="left"||direction==="right")&&(ms_direction=1,direction==="right")){let aux=c1;c1=c2,c2=aux,direction="left"}}let ms_c1=u.RGBA_to_ARGB(c1),ms_c2=u.RGBA_to_ARGB(c2),code;c_mid?code="".concat(c1," 0%, ").concat(c_mid," 50%, ").concat(c2," 100%"):code="".concat(c1," 0%, ").concat(c2," 100%");let css_line;if(is_linear)css_line="linear-gradient(".concat(direction,", ").concat(code,")");else{var _data$shape,_data$pos,_data$xpos,_data$ypos;(_data$shape=data.shape)!=null||(data.shape="ellipse"),(_data$pos=data.pos)!=null||(data.pos="farthest-corner"),(_data$xpos=data.xpos)!=null||(data.xpos=10),(_data$ypos=data.ypos)!=null||(data.ypos=10),css_line="radial-gradient(".concat(data.shape," ").concat(data.pos," at ").concat(data.xpos,"% ").concat(data.ypos,"%, ").concat(code,")")}canvas[0].style.background=c1;for(let i of["-moz-","-webkit-","-o-","-ms-",""]){if(css_line.includes("var")){let test_line=css_line.replace(colors_consts.RGB_TOKEN_ALPHA,DEFAULT_RGBA);if(test_line=test_line.replace(colors_consts.RGBA_TOKEN,DEFAULT_RGBA),!CSS.supports("background",i+test_line))continue}canvas[0].style.background=i+css_line}canvas.css("filter","progid:DXImageTransform.Microsoft.gradient( startColorstr='".concat(ms_c1,"', endColorstr='").concat(ms_c2,"',GradientType=").concat(ms_direction,")"))}}_get_properties(){return[]}},_class.prototype.class_name="SimpleGradient",_class)}});var require_Background=__commonJS({"lib-browser-old/core/property_applications/applications/Background.js"(exports,module){"use strict";init_define_process_env();init_shim();var _class,u=require_u2(),PropertyApplication=require_PropertyApplication().default,application_utilities=require_application_utilities(),image_utils=require_image_utils(),appquery=require_appquery(),SimpleGradient=require_SimpleGradient(),element_eval=require_element_eval();module.exports=(_class=class extends PropertyApplication{_apply(data,canvas,instance){if(data){let options={};if(!data._first_time&&(appquery.get_public_setting("bubble_version")<16||(instance==null?void 0:instance.element.type())!=="Dropdown"||data.background_style==="image")&&(options.background="none"),data.background_style==="bgcolor")options["background-color"]=u.RGBA_to_RGB(data.bgcolor),options["background-color"]=data.bgcolor;else if(data.background_style==="none"&&!data._first_time)options["background-color"]="transparent";else if(data.background_style==="gradient"){application_utilities.apply_css_style(canvas,options),new SimpleGradient()._apply({style:data.background_gradient_style,direction:data.background_gradient_direction,angle:data.background_gradient_custom_angle,from:data.background_gradient_from,to:data.background_gradient_to,mid:data.background_gradient_mid,shape:data.background_radial_gradient_shape,pos:data.background_radial_gradient_size,xpos:data.background_radial_gradient_xpos,ypos:data.background_radial_gradient_ypos},canvas);return}else if(data.background_style==="image"&&(data.backdrop_image_paralax||(options["background-color"]=data.background_color_if_empty_image),data.background_image)){var _instance$element$roo,_instance$element$roo2;let repeat_key=data.repeat_background_vertical&&data.repeat_background_horizontal?"repeat":data.repeat_background_vertical?"repeat-y":data.repeat_background_horizontal?"repeat-x":"no-repeat";options["background-repeat"]=repeat_key,data.center_background?data.is_backdrop?options["background-position"]="center top":options["background-position"]="center":options["background-position"]="",data.background_size_cover||instance!=null&&(_instance$element$roo=instance.element.root())!=null&&_instance$element$roo.use_responsive_algorithm()&&data.crop_responsive?(options["background-size"]="cover",options["-webkit-background-size"]="cover",options["-moz-background-size"]="cover",options["-o-background-size"]="cover"):options["background-size"]="";let prop=instance==null?void 0:instance.element.property("background_image"),is_static=prop&&(!prop.is_empty()&&prop.is_static()||prop.is_empty());if(data.background_size_cover){if((!instance||instance!=null&&instance.run_mode()||is_static)&&!data.backdrop_image_paralax){_apply_image_src(canvas,image_utils.optimize_image(data.background_image,canvas.width()),instance,options);return}}else if(data.crop_responsive&&instance!=null&&(_instance$element$roo2=instance.element.root())!=null&&_instance$element$roo2.use_responsive_algorithm()){if(instance.run_mode()){let _last_source=null,_to_load=null;instance.autorun(()=>{let width=element_eval.evaluate_property(instance,"width"),height=element_eval.evaluate_property(instance,"height"),current_image=element_eval.evaluate_property(instance,"background_image"),is_first_load_responsive_mode=instance.responsive_mode()&&width===instance.element.get_width();function do_it(){_apply_image_src(canvas,image_utils.optimize_image(current_image,width,height,{fit:"crop"}),instance,options)}_to_load=image_utils.optimize_image(current_image,width,height),current_image===_last_source&&!image_utils.downloaded_images[_to_load]||is_first_load_responsive_mode?instance.setTimeout(()=>{_to_load===image_utils.optimize_image(current_image,width,height)&&do_it()},300):(width!==0||_to_load===current_image)&&(_last_source=current_image,do_it())});return}else if(is_static){_apply_image_src(canvas,data.background_image,instance,options);return}}else if(!data.backdrop_image_paralax){_apply_image_src(canvas,image_utils.optimize_image(data.background_image),instance,options);return}if(data.backdrop_image_paralax)if(u.is_on_mobile_or_tablet()){_apply_image_src(canvas,image_utils.optimize_image(data.background_image),instance,options);return}else{options["background-image"]="none";let background_src=image_utils.optimize_image(data.background_image,canvas.width());canvas.parallax({imageSrc:background_src,speed:data.backdrop_paralax_speed}),$(".parallax-slider").attr({src:background_src})}}application_utilities.apply_css_style(canvas,options)}}},_class.prototype._uses_properties=["background_style","bgcolor","background_gradient_direction","background_gradient_custom_angle","background_gradient_from","background_gradient_to","background_gradient_mid","background_image","repeat_background_vertical","center_background","repeat_background_horizontal","background_size_cover","background_color_if_empty_image","crop_responsive","background_gradient_style","background_radial_gradient_shape","background_radial_gradient_size","background_radial_gradient_xpos","background_radial_gradient_ypos"],_class.prototype.transition_properties={background_style:"background"},_class.prototype.no_solid_support=!0,_class.prototype.field_names={background_style:{default:"none"},bgcolor:{default:"#FFFFFF"},background_gradient_direction:{default:"top"},background_gradient_custom_angle:{default:45},background_gradient_from:{default:"#FFFFFF"},background_gradient_to:{default:"#AAAAAA"},background_gradient_mid:{optional:!0},background_gradient_style:{default:"linear"},background_radial_gradient_shape:{default:"ellipse"},background_radial_gradient_size:{default:"farthest-corner"},background_radial_gradient_xpos:{default:10},background_radial_gradient_ypos:{default:10},background_image:{},center_background:{},background_size_cover:{},repeat_background_vertical:{},repeat_background_horizontal:{},background_color_if_empty_image:{default:"rgba(255, 255, 255, 0.0)"},crop_responsive:{no_states:!0,default:!0,prop_not_in_style:!0}},_class.prototype.class_name="Background",_class);function _apply_image_src(canvas,src,instance,options){canvas.data("_last_downloaded_image",src),image_utils.download_image(src,instance,()=>{src===canvas.data("_last_downloaded_image")&&(options["background-image"]='url("'.concat(src,'")'),application_utilities.apply_css_style(canvas,options))})}}});var require_property_applications=__commonJS({"lib-browser-old/core/property_applications/index.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_object_values();require_es_object_entries();var safe_require=require_safe_require(),style_properties=require_style_properties(),application_utilities=require_application_utilities(),property_applications=exports;property_applications.NoSelect=require_NoSelect();property_applications.Dimensions=require_Dimensions();property_applications.Opacity=require_Opacity();property_applications.MinWidth=require_MinWidth();property_applications.RootSizing=require_RootSizing();property_applications.ResponsiveElement=require_ResponsiveElement();property_applications.ResponsiveContainer=require_ResponsiveContainer();property_applications.ShortDimensions=require_ShortDimensions();property_applications.PositionOnly=require_PositionOnly();property_applications.Rotation=require_Rotation();property_applications.BoxShadow=require_BoxShadow();property_applications.PaddingFields=require_PaddingFields();property_applications.Font=require_Font();property_applications.FontShadow=require_FontShadow();property_applications.FontSpacing=require_FontSpacing();property_applications.Border=require_Border();property_applications.PaddingText=require_PaddingText();property_applications.Padding=require_Padding();property_applications.InputPadding=require_InputPadding();property_applications.PlaceholderColor=require_PlaceholderColor();property_applications.ToolTip=require_ToolTip();property_applications.UniqueID=require_UniqueID();property_applications.Background=require_Background();property_applications.SimpleGradient=require_SimpleGradient();property_applications.apply_css_style=application_utilities.apply_css_style;property_applications.calculate_border_height=application_utilities.calculate_border_height;property_applications.calculate_border_width=application_utilities.calculate_border_width;property_applications.patch_user_agent_styles=application_utilities.patch_user_agent_styles;for(let def of Object.values(property_applications))if(((_def$prototype=def.prototype)==null?void 0:_def$prototype.field_names)!=null&&!def.prototype.not_in_style)for(let[prop_name,data]of Object.entries(def.prototype.field_names))data.prop_not_in_style||style_properties.register_style_property(prop_name);var _def$prototype;safe_require.safe_register("./core/property_applications",property_applications)}});var require_event_element_mapping=__commonJS({"lib-browser-old/core/core_events/event_element_mapping.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.add_event=add_event;exports.all_events=all_events;exports.clear_event=clear_event;exports.has_event=has_event;exports.relevant_elements=relevant_elements;exports.relevant_events=relevant_events;require_es_array_iterator();require_web_dom_collections_iterator();var _safe_require=_interopRequireDefault(require_safe_require());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_safe_require.default.safe_register("./core/core_events/event_element_mapping",exports);var mapping=new Map;function add_event(event_name,element_name){let set=mapping.get(event_name);set||(set=new Set,mapping.set(event_name,set)),element_name&&set.add(element_name)}function clear_event(event_name){var _mapping$get;(_mapping$get=mapping.get(event_name))==null||_mapping$get.clear()}function has_event(event_name,element_name){var _mapping$get$has,_mapping$get2;return(_mapping$get$has=(_mapping$get2=mapping.get(event_name))==null?void 0:_mapping$get2.has(element_name))!=null?_mapping$get$has:!1}function all_events(){return[...mapping.keys()]}function relevant_elements(event_name){var _mapping$get3;return[...(_mapping$get3=mapping.get(event_name))!=null?_mapping$get3:[]]}function relevant_events(element_name){return all_events().filter(event=>has_event(event,element_name))}}});var require_core_actions_consts=__commonJS({"lib-browser-old/core/core_actions/utilities/core_actions_consts.js"(exports){"use strict";init_define_process_env();init_shim();var safe_require=require_safe_require(),core_actions_consts=exports;safe_require.safe_register("./core/core_actions/utilities/core_actions_consts",core_actions_consts);core_actions_consts.csv_separators={comma:",",semicolon:";",tab:"tab",pipe:"|"};core_actions_consts.basic_actions=core_actions_consts.root_actions}});var require_analytics=__commonJS({"lib-browser-old/client/analytics.js"(exports,module){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.track_with_user_badges=exports.track_with_marketing_metadata=exports.track_for_alternate_user=exports.track_count=exports.track=exports.retrieve_utm_from_header=exports.reset=exports.page=exports.package_utm_data=exports.manage_utm_data=exports.init_segment=exports.format_campaign_data=void 0;require_es_array_iterator();require_web_dom_collections_iterator();var _safe_require=_interopRequireDefault(require_safe_require());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_safe_require.default.safe_register("./client/analytics",module.exports);function wrap_analytics(name,defaultValue){return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return window.meta_analytics?window.meta_analytics[name](...args):defaultValue}}var retrieve_utm_from_header=wrap_analytics("retrieve_utm_from_header",[]);exports.retrieve_utm_from_header=retrieve_utm_from_header;var format_campaign_data=wrap_analytics("format_campaign_data",{});exports.format_campaign_data=format_campaign_data;var package_utm_data=wrap_analytics("package_utm_data","");exports.package_utm_data=package_utm_data;var manage_utm_data=wrap_analytics("manage_utm_data",void 0);exports.manage_utm_data=manage_utm_data;var init_segment=wrap_analytics("init_segment",void 0);exports.init_segment=init_segment;var reset2=wrap_analytics("reset",void 0);exports.reset=reset2;var track_with_marketing_metadata=wrap_analytics("track_with_marketing_metadata",void 0);exports.track_with_marketing_metadata=track_with_marketing_metadata;var track=wrap_analytics("track",void 0);exports.track=track;var page=wrap_analytics("page",void 0);exports.page=page;var track_count=wrap_analytics("track_count",void 0);exports.track_count=track_count;var track_for_alternate_user=wrap_analytics("track_for_alternate_user",void 0);exports.track_for_alternate_user=track_for_alternate_user;var track_with_user_badges=wrap_analytics("track_with_user_badges",void 0);exports.track_with_user_badges=track_with_user_badges}});var require_css=__commonJS({"lib-browser-old/editor/css.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.WORKFLOW_TAB=exports.VISUAL_TAB=exports.VISUAL_EDIT_TOOLBOX=exports.VISUAL_CANVAS=exports.VERSIONS_TAB=exports.VERSIONS_CANVAS=exports.TRANSITIONS=exports.TOOLBOX_PANE=exports.TEMPLATE_TAB=exports.TEMPLATE_CANVAS=exports.TAB_NAME_TO_TAB_SELECTOR=exports.TAB_NAME_TO_CANVAS_SELECTOR=exports.TABBAR_WIDTH=exports.STYLES_TAB=exports.STYLES_CANVAS=exports.STATS_TAB=exports.STATS_CANVAS=exports.SPOT=exports.SLIDABLE_PALETTE=exports.SHAREDTECH_TAB=exports.SHAREDTECH_CANVAS=exports.SETTINGS_TAB=exports.SETTINGS_CANVAS=exports.SEARCH_PALETTE=exports.PROP_ROW=exports.PROP_NAME_SELECTOR=exports.PROP_NAME=exports.PROPERTY_EDITOR=exports.PRIVACY_SUBTAB=exports.PLUGIN_TAB=exports.PLUGIN_CANVAS=exports.MESSAGE_POPUP=exports.MAIN_TABS_TAB_PLUGIN=exports.MAIN_TABS_TAB=exports.MAIN_TABS=exports.MAINWINDOW=exports.LOGS_TAB=exports.LOGS_CANVAS=exports.IMAGE_EDITOR_PALETTE=exports.HIGHLIGHT_BOX=exports.GENERAL_TAB=exports.GENERAL_CANVAS=exports.FEEDBACK_WINDOW=exports.ELEMENTS_TAB=exports.ELEMENTS_CANVAS=exports.EDITOR_CHECKLIST_ALERT_BAR=exports.DOCS_CANVAS=exports.DEFAULT_TOOLBOX_WIDTH=exports.DEDICATED_PALETTE=exports.DATA_TAB=exports.DATA_CANVAS=exports.CONTEXTUAL_VIDEO_PALETTE=exports.CONDITIONAL=exports.APPEARANCE=exports.API_TAB=exports.API_CANVAS=exports.ACTION_CANVAS=exports.ACTIONS_TAB=exports.ACTIONS_CANVAS=void 0;var _safe_require=_interopRequireDefault(require_safe_require());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}}});var require_server_rendering=__commonJS({"lib-browser-old/constants/server_rendering.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.ROOT_CLASS=exports.CSS_FLAG=exports.AT_ROOT=void 0;var AT_ROOT="@at-root";exports.AT_ROOT=AT_ROOT;var ROOT_CLASS="b-root";exports.ROOT_CLASS=ROOT_CLASS;var CSS_FLAG="--stylesheet-active";exports.CSS_FLAG=CSS_FLAG}});var require_server_css=__commonJS({"lib-browser-old/shared/server_rendering/server_css.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.fixValue=fixValue;exports.toCamelCase=toCamelCase;exports.toClass=toClass;exports.toClassDef=toClassDef;exports.toDashes=toDashes;require_es_regexp_exec();require_es_string_replace();require_es_regexp_test();require_es_string_starts_with();var _server_rendering=require_server_rendering();function toClass(id){return id.replace(/^[\d]|[A-Z]/g,"a$&")}function toDashes(prop){return prop.replace(/[A-Z]/g,s=>"-".concat(s.toLowerCase()))}function toCamelCase(prop){return prop.replace(/-./g,s=>s[1].toUpperCase())}var IS_NON_DIMENSIONAL=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function fixValue(prop,value){return typeof value=="number"&&!IS_NON_DIMENSIONAL.test(toCamelCase(prop))?"".concat(value,"px"):value}function toClassDef(id,style2,additionalDefs){let ret="";function addProp(prop,value){ret+="  ".concat(prop,": ").concat(fixValue(prop,value),";\n")}function addProps(selector,style3){ret+="".concat(selector," {\n");for(let prop in style3){let value=style3[prop];if(value!=null&&value!=="")if(Array.isArray(value))for(let i=value.length-1;i>=0;i--){let fallbackValue=value[i];fallbackValue!=null&&fallbackValue!==""&&addProp(prop,fallbackValue)}else addProp(prop,value)}ret+="}\n"}let className2=toClass(id);if(addProps(".".concat(_server_rendering.ROOT_CLASS," .bubble-element.").concat(className2),style2),additionalDefs)for(let selector in additionalDefs){let realSelector;selector.startsWith(_server_rendering.AT_ROOT)?realSelector=selector.replace(_server_rendering.AT_ROOT,".".concat(_server_rendering.ROOT_CLASS)):realSelector=".".concat(_server_rendering.ROOT_CLASS," .").concat(className2).concat(selector),addProps(realSelector,additionalDefs[selector])}return ret}}});var require_properties=__commonJS({"lib-browser-old/core/core_elements/components/utils/properties.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.Style=exports.Property=void 0;require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_includes();require_es_string_includes();var _solidJs=(init_solid(),__toCommonJS(solid_exports)),autorun=_interopRequireWildcard(require_autorun3()),server_css=_interopRequireWildcard(require_server_css()),b_ui=_interopRequireWildcard(require_b_ui()),_logger=require_logger();function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var Property=class{constructor(fn){let options=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.fn=void 0,this.fallback=void 0,this.alwaysDynamic=void 0,this.mayContainDynamic=void 0,this.noWaitVisible=void 0,this.fn=fn,this.fallback=options.fallback,this.alwaysDynamic=options.alwaysDynamic,this.mayContainDynamic=options.mayContainDynamic,this.noWaitVisible=options.noWaitVisible}computeCache(instance){instance.dynamic_catcher=!1;try{let result=this.fn(instance),isStatic=!instance.dynamic_catcher&&!this.alwaysDynamic;return this.mayContainDynamic&&!isStatic?{value:void 0,isStatic:!1}:{value:result,isStatic:!instance.dynamic_catcher&&!this.alwaysDynamic}}catch(error){return(0,_logger.propagated_error)("Error computing property",error),{value:void 0,isStatic:!1}}}createClientWatcher(instance,cachedValue,props){let[value,setValue]=(0,_solidJs.createSignal)(cachedValue!=null?cachedValue:this.fallback);return(0,_solidJs.createEffect)(()=>{if(!this.noWaitVisible&&!props.turnedVisible)return;let watcher=autorun.Watcher(()=>{var _this$fn;return(_this$fn=this.fn(instance))!=null?_this$fn:this.fallback});watcher.on_value(setValue),(0,_solidJs.onCleanup)(()=>watcher.destroy())}),value}computeStaticClient(cachedValue){return cachedValue!=null?cachedValue:this.fallback}};exports.Property=Property;function handleFallbacks(style2){let ret={};for(let prop in style2){let value=style2[prop];Array.isArray(value)?ret[prop]=b_ui.apply_css_fallbacks(server_css.toDashes(prop),value.map(v=>server_css.fixValue(prop,v))):ret[prop]=server_css.fixValue(prop,value)}return ret}var Style=class extends Property{constructor(fn){var _options$outerPositio;let options=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(fn,{fallback:{},alwaysDynamic:options.alwaysDynamic,noWaitVisible:options.noWaitVisible}),this.selector=void 0,this.notInStylesheet=void 0,this.outerPositioning=void 0,this.fn=fn,this.selector=options.selector,this.notInStylesheet=options.notInStylesheet,this.outerPositioning=(_options$outerPositio=options.outerPositioning)!=null?_options$outerPositio:!1}createClientWatcher(instance,cachedStyle,props){let signal=super.createClientWatcher(instance,cachedStyle,props);return()=>{let style2=signal(),appliedStyle=handleFallbacks(style2),overrides=appliedStyle;if(this.notInStylesheet)for(let prop in cachedStyle){let value=appliedStyle[prop];(value==null||value==="")&&(overrides[prop]=void 0)}else for(let prop in cachedStyle){let value=appliedStyle[prop];if(value==null||value==="")overrides[prop]="unset";else{let cachedValue=cachedStyle[prop];Array.isArray(cachedValue)?cachedValue.includes(value)&&(overrides[prop]=void 0):cachedValue===value&&(overrides[prop]=void 0)}}return appliedStyle}}computeStaticClient(){return{}}};exports.Style=Style}});var require_jquery_wrapper=__commonJS({"lib-browser-old/core/core_elements/components/utils/jquery_wrapper.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.convertStyle=convertStyle;exports.withMockCanvas=withMockCanvas;require_es_regexp_exec();require_es_string_replace();require_es_object_assign();require_es_string_trim();function convertStyle(prop){return prop.replace(/[A-Z]/g,s=>"-".concat(s.toLowerCase()))}function createTestCanvas(){let _data={};return Object.assign([{style:{},className:""}],{css(objOrProp,value){typeof objOrProp=="object"?Object.assign(this[0].style,objOrProp):this[0].style[objOrProp]=value},data(str,value){return arguments.length>1&&(_data[str]=value),_data[str]},width(){return 0},find(){return this},addClass(className2){this[0].className+=" "+className2},removeClass(className2){this[0].className=this[0].className.replace(className2.trim(),"")},attr(){}})}function grabStyle(canvas){let inline_style=canvas[0].style,applied_style={};for(let prop in inline_style)applied_style[convertStyle(prop)]=inline_style[prop];return applied_style}function withMockCanvas(fn){let canvas=createTestCanvas();return fn(canvas),{style:grabStyle(canvas),className:canvas[0].className.trim()}}}});var require_segment_events=__commonJS({"lib-browser-old/constants/segment_events.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.GB_SET_TO_COLUMN_CLICKED=exports.GB_PREVIEW_CLICKED=exports.GB_POPUP_SIGNUP_DRAGGED=exports.GB_KEEP_AS_IS_COLUMN_CLICKED=exports.GB_HEADER_COMPONENT_DRAGGED=exports.GB_FINISH_ON_CONGRATS_CLICKED=exports.GB_ENTRY_NO_THANKS_CLICKED=exports.GB_ENTRY_GET_STARTED_CLICKED=exports.GB_ELEMENT_POPUP_SIGNUP_LOGIN_SELECTED=exports.GB_DONE_CLICKED=exports.GB_DATA_FIELDS_ON_SIGNUP_COMPLETED=exports.GB_CONTINUE_ON_WORKFLOW_TAB_INTRO_CLICKED=exports.GB_CONTINUE_ON_INDEX_PE_CLICKED=exports.GB_CONTINUE_ON_ALMOST_THERE_CLICKED=exports.GB_CONTINUE_NAME_FIELD_CREATED_CLICKED=exports.GB_CONTINUE_HIDE_ELEMENT_ACTION_CLICKED=exports.GB_CONTINUE_FINAL_ACTIONS_WF_CLICKED=exports.GB_ADD_ACTION_FOR_SIGN_USER_UP_CLICKED=exports.GB_ADD_ACTION_FOR_SHOW_ELEMENT_CLICKED=exports.FREE_TRIAL_CREATED_FROM_CLIENT=exports.FREE_TRIAL_CANCELED=exports.FREE_APP_PLAN_SELECTED=exports.FIRST_WORKFLOW_ACTION_CREATED=exports.FIRST_TIME_REPEATING_GROUP_DATA_SET=exports.FIRST_SUBSCRIPTION=exports.FIRST_STYLES_UPDATED=exports.FIRST_REUSABLE_COMPONENT_CREATED=exports.FIRST_PREVIEW_VIEWED=exports.FIRST_PLUGIN_ADDED=exports.FIRST_PAGE_ADDED=exports.FIRST_DYNAMIC_EXPRESSION_CREATED=exports.FIRST_DEPLOY_TO_LIVE=exports.FIRST_DATA_TYPE_CREATED=exports.EVENT_CREATED=exports.ENABLE_WORKFLOW_API_AND_BACKEND_WORKFLOWS_TOGGLED=exports.ELEMENT_TEMPLATE_USED=exports.ELEMENT_STYLE_EDITED=exports.EDITOR_VISIT=exports.DYNAMIC_EXPRESSION_EDITED_V1=exports.DYNAMIC_EXPRESSION_EDITED=exports.DWD_WORKFLOW_VIDEO_POPUP_SEEN=exports.DWD_WORKFLOW_VIDEO_PLAYED=exports.DWD_VISUAL_INDICATOR_SETTING_TOGGLED=exports.DWD_DESIGN_VIDEO_POPUP_SEEN=exports.DWD_DESIGN_VIDEO_PLAYED=exports.DWD_DATA_VIDEO_POPUP_SEEN=exports.DWD_DATA_VIDEO_PLAYED=exports.DETACH_REUSABLE_CLICKED=exports.DEPLOY_TO_LIVE_CLICKED=exports.DEPLOY_FAILURE_MODAL_SEEN=exports.DATA_UPLOADED=exports.DATA_EXPORTED=exports.DAILY_EDITOR_VISIT=exports.CREVAMP_TOGGLE_FLIPPED=exports.CREATE_VARIABLE_CLICKED=exports.CONTEXT_MENU_SEGMENT_EVENTS=exports.COMPONENT_LIBRARY_ONBOARDING_VIEWED=exports.COMPONENT_LIBRARY_MENU_CLICKED=exports.COMPONENT_CREATED=exports.COLOR_PICKER_VALUE_SET=exports.COLLABORATOR_REMOVED=exports.COLLABORATOR_ADDED=exports.CHECKOUT_OPENED=exports.CHECKOUT_COMPLETED=exports.CHECKLIST_TASK_STEP_COMPLETED=exports.CHECKLIST_TASK_COMPLETED=exports.CHECKLIST_TASK_CLICKED=exports.CHECKLIST_TASK_ABANDONED=exports.CHECKLIST_OPENED=exports.CHECKLIST_CLOSED=exports.CAPACITY_USAGE_ANALYTICS_CLOSED=exports.APP_PLAN_SELECTED=exports.APP_PLAN_FREQUENCY_SELECTED=exports.APP_PLAN_CONFIRM_CLICKED=exports.APP_ASSIST_PLUGIN_NEXT_CLICKED=exports.APP_ASSIST_PLUGIN_EDITED=exports.APP_ASSIST_PLUGIN_CLICKED=exports.APP_ASSIST_FONT_NEXT_CLICKED=exports.APP_ASSIST_FONT_EDITED=exports.APP_ASSIST_FAVICON_EDITED=exports.APP_ASSIST_COMPLETED_CLICKED=exports.APP_ASSIST_COMPLETED=exports.APP_ASSIST_COLOR_NEXT_CLICKED=exports.APP_ASSIST_COLOR_EDITED=exports.APP_ASSIST_CLOSE_CLICKED=exports.APP_ASSIST_BROWSER_NEXT_CLICKED=exports.APP_ASSIST_BROWSER_EDITED=exports.APP_ASSIST_BACK_CLICKED=exports.API_CONNECTOR_INITIALIZE_CALL_SUCCESS=exports.API_CONNECTOR_INITIALIZE_CALL_FAILURE=exports.API_CONNECTOR_INITIALIZE_CALL_CLICKED=exports.API_CONNECTOR_ADD_CALL_CLICKED=exports.AI_CHAT_RATING=exports.AI_CHAT_PROMPT_SENT=exports.AI_CHAT_COMPLETION_RECEIVED=exports.ACTUALLY_BUILDING_20=exports.ACTUALLY_BUILDING_2=exports.ACTUALLY_BUILDING_10=exports.ACTUALLY_BUILDING=exports.ACTION_CREATED=void 0;exports.YOUTUBE_VIDEO_RATE_CHANGED=exports.YOUTUBE_VIDEO_QUALITY_CHANGED=exports.YOUTUBE_VIDEO_PLAYING=exports.YOUTUBE_VIDEO_PAUSED=exports.YOUTUBE_VIDEO_ENDED=exports.YOUTUBE_VIDEO_CUED=exports.YOUTUBE_VIDEO_BUFFER=exports.WORKLOAD_TIER_PLAN_SUBSCRIBED=exports.WORKLOAD_TIER_PLAN_SELECTED=exports.WORKLOAD_TIER_PLAN_CHECKOUT_CLICKED=exports.WORKLOAD_TIER_PLAN_CANCELED=exports.WORKLOAD_SPIKE_NOTIFICATION_EMAIL_TRIGGERED=exports.WORKLOAD_SPIKE_NOTIFICATION_CLICKED_IN_EDITOR=exports.WORKLOAD_PIE_CHART_CLICKED=exports.WORKLOAD_BAR_CHART_CLICKED=exports.VIEWED_APP_SETTINGS=exports.VIEWED_APP_PRICING=exports.VERIFY_SENDGRID_CLICKED=exports.VC_UPGRADE_CTA=exports.VC_UPDATE_TO_REDESIGN=exports.VC_SIDEPANEL_MORE_ACTIONS_MENU_USED=exports.VC_SIDEPANEL_MORE_ACTIONS_MENU_OPENED=exports.VC_SIDEPANEL_INTERACTION=exports.VC_SIDEPANEL_ENGAGEMENT=exports.VC_SAVEPOINT_CREATED=exports.VC_COPY_LIVE=exports.VC_BRANCH_REVERTED=exports.VC_BRANCH_NAVIGATED=exports.VC_BRANCH_MERGE_COMPLETED=exports.VC_BRANCH_MERGE_CANCELED=exports.VC_BRANCH_MERGED=exports.VC_BRANCH_DEPLOYED=exports.VC_BRANCH_DELETED=exports.VC_BRANCH_CREATED=exports.USER_SUBSCRIBED_TO_PLAN=exports.USER_APP_TRANSFER_RECEIVED=exports.USER_APP_TRANSFERRED=exports.UPGRADE_PLUGIN_CLICKED=exports.TRIAL_START_BUTTON_CLICKED=exports.TRIAL_OFFER_VIEWED=exports.TRIAL_OFFER_DISMISSED=exports.TRIAL_CC_SAVED=exports.TRIAL_CC_AUTHORIZED=exports.TRIAL_BUTTON_CLICKED=exports.TOOLBAR_ELEMENTS=exports.TOOLBAR_CLICKED=exports.STYLE_VALUE_RESET=exports.STYLE_VALUE_OVERRIDDEN=exports.STYLES_VARIABLE_EDITED=exports.STYLES_VARIABLE_DELETED=exports.STYLES_VARIABLE_CREATED=exports.STYLES_VARIABLES_TAB_CLICKED=exports.SERVER_CAPACITY_USAGE_FILTER_SET=exports.SERVER_CAPACITY_USAGE_DETAILS_PIE_CHART_CLICKED=exports.REUSABLE_PROPERTY_CREATED=exports.REUSABLE_ENGAGEMENT=exports.REUSABLE_CREATED=exports.REDIRECTED_TO_STRIPE_CHECKOUT=exports.PREVIEW_VIEWED=exports.POINT_IN_PERCENTAGE_OF_DESIGNATED_TIME_CLICKED=exports.POINT_IN_AVERAGE_CPU_USAGE_CLICKED=exports.PLUGIN_UNINSTALLED=exports.PLUGIN_INSTALLED=exports.PLUGIN_EDITOR_SUBMIT_SUCCESS=exports.PLUGIN_EDITOR_SUBMIT_NEW_VERSION=exports.PLUGIN_EDITOR_SUBMIT_FAILURE=exports.PAYWALL_MODAL_PLAN_UPGRADE_CLICKED=exports.PAYWALL_MODAL_PLAN_DOWNGRADE_CLICKED=exports.PAYWALL_MODAL_PLAN_CHOSEN=exports.PAYWALL_MODAL_OPENED=exports.PAGE_STATE_TOGGLED=exports.OPTION_SET_GUIDED_SETUP_SKIP_CLICKED=exports.OPTION_SET_GUIDED_SETUP_CREATION_SOURCE=exports.OPTION_SET_GUIDED_SETUP_CLICKED=exports.OPTION_SET_EDITOR_CREATION_SOURCE=exports.OPTION_SET_CREATED=exports.OPTION_SET_ATTRIBUTE_CREATED=exports.MASONRY_GRID_SETTING_CLICKED=exports.HTML_UPLOAD_EVENT=exports.HELP_OPENED=exports.HELP_ITEM_CLICKED=exports.GB_X_OUT_CLICKED=exports.GB_START_EDIT_WORKFLOW_ON_SIGNUP_POPUP_CLICKED=exports.GB_START_EDIT_WF_ON_SIGNUP_HEADER_CLICKED=exports.GB_SIGN_USER_UP_CLICKED=exports.GB_SIGNUP_ON_POPUP_CLICKED=exports.GB_SIGNUP_ON_HEADER_CLICKED=exports.GB_SHOW_ELEMENT_CLICKED=void 0;var ACTUALLY_BUILDING="actually building";exports.ACTUALLY_BUILDING=ACTUALLY_BUILDING;var ACTUALLY_BUILDING_2="actually building 2";exports.ACTUALLY_BUILDING_2=ACTUALLY_BUILDING_2;var ACTUALLY_BUILDING_10="actually building 10";exports.ACTUALLY_BUILDING_10=ACTUALLY_BUILDING_10;var ACTUALLY_BUILDING_20="actually building 20";exports.ACTUALLY_BUILDING_20=ACTUALLY_BUILDING_20;var DEPLOY_TO_LIVE_CLICKED="Deploy To Live Button Clicked";exports.DEPLOY_TO_LIVE_CLICKED=DEPLOY_TO_LIVE_CLICKED;var DEPLOY_FAILURE_MODAL_SEEN=" Deploy Failure Modal Seen";exports.DEPLOY_FAILURE_MODAL_SEEN=DEPLOY_FAILURE_MODAL_SEEN;var EDITOR_VISIT="editor visit";exports.EDITOR_VISIT=EDITOR_VISIT;var DAILY_EDITOR_VISIT="daily editor visit";exports.DAILY_EDITOR_VISIT=DAILY_EDITOR_VISIT;var HELP_ITEM_CLICKED="Help Item Clicked";exports.HELP_ITEM_CLICKED=HELP_ITEM_CLICKED;var HELP_OPENED="Help Opened";exports.HELP_OPENED=HELP_OPENED;var PREVIEW_VIEWED="Preview Viewed";exports.PREVIEW_VIEWED=PREVIEW_VIEWED;var TOOLBAR_CLICKED="Toolbar Clicked";exports.TOOLBAR_CLICKED=TOOLBAR_CLICKED;var PAGE_STATE_TOGGLED="Page State Toggled";exports.PAGE_STATE_TOGGLED=PAGE_STATE_TOGGLED;var UPGRADE_PLUGIN_CLICKED="Plugin editor - Upgrade plugin clicked";exports.UPGRADE_PLUGIN_CLICKED=UPGRADE_PLUGIN_CLICKED;var TOOLBAR_ELEMENTS={cursor:"Cursor Icon",undo:"Undo Button",redo:"Redo Button",grid_dropdown:"Grid Settings Menu",arrange_menu:"Arrange Menu",version_dropdown:"Version Menu",logo:"Bubble Logo",releases:"Releases Icon",edit:"Edit Menu",user_menu:"User Icon",project_menu:"Project Menu",login:"Login Button",search:"Search Icon",element_picker:"Element/Workflow Picker",selected_element:"Selected Element",selected_workflow:"Selected Workflow",feedback:"Feedback Icon"};exports.TOOLBAR_ELEMENTS=TOOLBAR_ELEMENTS;var FREE_APP_PLAN_SELECTED="Free App plan selected";exports.FREE_APP_PLAN_SELECTED=FREE_APP_PLAN_SELECTED;var TRIAL_BUTTON_CLICKED="Trial button clicked";exports.TRIAL_BUTTON_CLICKED=TRIAL_BUTTON_CLICKED;var TRIAL_CC_AUTHORIZED="Trial CC Authorized";exports.TRIAL_CC_AUTHORIZED=TRIAL_CC_AUTHORIZED;var TRIAL_CC_SAVED="Trial CC Saved";exports.TRIAL_CC_SAVED=TRIAL_CC_SAVED;var TRIAL_OFFER_DISMISSED="Trial Offer Dismissed";exports.TRIAL_OFFER_DISMISSED=TRIAL_OFFER_DISMISSED;var TRIAL_OFFER_VIEWED="Trial Offer Viewed";exports.TRIAL_OFFER_VIEWED=TRIAL_OFFER_VIEWED;var TRIAL_START_BUTTON_CLICKED="Trial Start Button Clicked";exports.TRIAL_START_BUTTON_CLICKED=TRIAL_START_BUTTON_CLICKED;var VERIFY_SENDGRID_CLICKED="Verify SendGrid button clicked";exports.VERIFY_SENDGRID_CLICKED=VERIFY_SENDGRID_CLICKED;var COMPONENT_LIBRARY_ONBOARDING_VIEWED="Component Onboarding Hoverable Viewed";exports.COMPONENT_LIBRARY_ONBOARDING_VIEWED=COMPONENT_LIBRARY_ONBOARDING_VIEWED;var ELEMENT_TEMPLATE_USED="Element template added to editor canvas";exports.ELEMENT_TEMPLATE_USED=ELEMENT_TEMPLATE_USED;var DETACH_REUSABLE_CLICKED="Detach reusable clicked";exports.DETACH_REUSABLE_CLICKED=DETACH_REUSABLE_CLICKED;var MASONRY_GRID_SETTING_CLICKED="Masonry Grid Setting Clicked";exports.MASONRY_GRID_SETTING_CLICKED=MASONRY_GRID_SETTING_CLICKED;var FIRST_SUBSCRIPTION="FirstSubscription (client)";exports.FIRST_SUBSCRIPTION=FIRST_SUBSCRIPTION;var FREE_TRIAL_CREATED_FROM_CLIENT="Free Trial created (client)";exports.FREE_TRIAL_CREATED_FROM_CLIENT=FREE_TRIAL_CREATED_FROM_CLIENT;var APP_ASSIST_BROWSER_NEXT_CLICKED="App Assist - Browser Next Clicked";exports.APP_ASSIST_BROWSER_NEXT_CLICKED=APP_ASSIST_BROWSER_NEXT_CLICKED;var APP_ASSIST_FONT_NEXT_CLICKED="App Assist - Font Next Clicked";exports.APP_ASSIST_FONT_NEXT_CLICKED=APP_ASSIST_FONT_NEXT_CLICKED;var APP_ASSIST_COLOR_NEXT_CLICKED="App Assist - Color Next Clicked";exports.APP_ASSIST_COLOR_NEXT_CLICKED=APP_ASSIST_COLOR_NEXT_CLICKED;var APP_ASSIST_PLUGIN_NEXT_CLICKED="App Assist - Plugin Next Clicked";exports.APP_ASSIST_PLUGIN_NEXT_CLICKED=APP_ASSIST_PLUGIN_NEXT_CLICKED;var APP_ASSIST_BACK_CLICKED="App Assist - Back Clicked";exports.APP_ASSIST_BACK_CLICKED=APP_ASSIST_BACK_CLICKED;var APP_ASSIST_BROWSER_EDITED="App Assist - Browser Edited";exports.APP_ASSIST_BROWSER_EDITED=APP_ASSIST_BROWSER_EDITED;var APP_ASSIST_FAVICON_EDITED="App Assist - Favicon Edited";exports.APP_ASSIST_FAVICON_EDITED=APP_ASSIST_FAVICON_EDITED;var APP_ASSIST_FONT_EDITED="App Assist - Font Edited";exports.APP_ASSIST_FONT_EDITED=APP_ASSIST_FONT_EDITED;var APP_ASSIST_COLOR_EDITED="App Assist - Color Edited";exports.APP_ASSIST_COLOR_EDITED=APP_ASSIST_COLOR_EDITED;var APP_ASSIST_PLUGIN_EDITED="App Assist - Plugin Edited";exports.APP_ASSIST_PLUGIN_EDITED=APP_ASSIST_PLUGIN_EDITED;var APP_ASSIST_PLUGIN_CLICKED="App Assist - Plugin Clicked";exports.APP_ASSIST_PLUGIN_CLICKED=APP_ASSIST_PLUGIN_CLICKED;var APP_ASSIST_COMPLETED_CLICKED="App Assist - Completed Clicked";exports.APP_ASSIST_COMPLETED_CLICKED=APP_ASSIST_COMPLETED_CLICKED;var APP_ASSIST_CLOSE_CLICKED="App Assist - Close Assistant Clicked";exports.APP_ASSIST_CLOSE_CLICKED=APP_ASSIST_CLOSE_CLICKED;var APP_ASSIST_COMPLETED="completed new app assistant";exports.APP_ASSIST_COMPLETED=APP_ASSIST_COMPLETED;var API_CONNECTOR_INITIALIZE_CALL_CLICKED="API Connector - Initialize Call clicked";exports.API_CONNECTOR_INITIALIZE_CALL_CLICKED=API_CONNECTOR_INITIALIZE_CALL_CLICKED;var API_CONNECTOR_INITIALIZE_CALL_SUCCESS="API Connector - Initialize Call success";exports.API_CONNECTOR_INITIALIZE_CALL_SUCCESS=API_CONNECTOR_INITIALIZE_CALL_SUCCESS;var API_CONNECTOR_INITIALIZE_CALL_FAILURE="API Connector - Initialize Call failure";exports.API_CONNECTOR_INITIALIZE_CALL_FAILURE=API_CONNECTOR_INITIALIZE_CALL_FAILURE;var API_CONNECTOR_ADD_CALL_CLICKED="API Connector - Add Call clicked";exports.API_CONNECTOR_ADD_CALL_CLICKED=API_CONNECTOR_ADD_CALL_CLICKED;var OPTION_SET_CREATED="Option Set Created";exports.OPTION_SET_CREATED=OPTION_SET_CREATED;var OPTION_SET_ATTRIBUTE_CREATED="Option Set Attribute Created";exports.OPTION_SET_ATTRIBUTE_CREATED=OPTION_SET_ATTRIBUTE_CREATED;var OPTION_SET_GUIDED_SETUP_CLICKED="Option Set Guided Setup Clicked";exports.OPTION_SET_GUIDED_SETUP_CLICKED=OPTION_SET_GUIDED_SETUP_CLICKED;var OPTION_SET_GUIDED_SETUP_SKIP_CLICKED="Option Set Guided Setup Skip Clicked";exports.OPTION_SET_GUIDED_SETUP_SKIP_CLICKED=OPTION_SET_GUIDED_SETUP_SKIP_CLICKED;var OPTION_SET_EDITOR_CREATION_SOURCE="editor";exports.OPTION_SET_EDITOR_CREATION_SOURCE=OPTION_SET_EDITOR_CREATION_SOURCE;var OPTION_SET_GUIDED_SETUP_CREATION_SOURCE="guided setup";exports.OPTION_SET_GUIDED_SETUP_CREATION_SOURCE=OPTION_SET_GUIDED_SETUP_CREATION_SOURCE;var PAYWALL_MODAL_OPENED="Paywall Modal Opened";exports.PAYWALL_MODAL_OPENED=PAYWALL_MODAL_OPENED;var PAYWALL_MODAL_PLAN_CHOSEN="Paywall Modal Plan Chosen";exports.PAYWALL_MODAL_PLAN_CHOSEN=PAYWALL_MODAL_PLAN_CHOSEN;var PAYWALL_MODAL_PLAN_UPGRADE_CLICKED="Paywall Modal Plan Upgrade Clicked";exports.PAYWALL_MODAL_PLAN_UPGRADE_CLICKED=PAYWALL_MODAL_PLAN_UPGRADE_CLICKED;var PAYWALL_MODAL_PLAN_DOWNGRADE_CLICKED="Paywall Modal Plan Downgrade Clicked";exports.PAYWALL_MODAL_PLAN_DOWNGRADE_CLICKED=PAYWALL_MODAL_PLAN_DOWNGRADE_CLICKED;var PLUGIN_EDITOR_SUBMIT_NEW_VERSION="Plugin editor - Submit a New Version";exports.PLUGIN_EDITOR_SUBMIT_NEW_VERSION=PLUGIN_EDITOR_SUBMIT_NEW_VERSION;var PLUGIN_EDITOR_SUBMIT_SUCCESS="Plugin editor - Submit New Version Succeeded";exports.PLUGIN_EDITOR_SUBMIT_SUCCESS=PLUGIN_EDITOR_SUBMIT_SUCCESS;var PLUGIN_EDITOR_SUBMIT_FAILURE="Plugin editor - Submit New Version Failed";exports.PLUGIN_EDITOR_SUBMIT_FAILURE=PLUGIN_EDITOR_SUBMIT_FAILURE;var SERVER_CAPACITY_USAGE_FILTER_SET="Server capacity usage filter set (start or end)";exports.SERVER_CAPACITY_USAGE_FILTER_SET=SERVER_CAPACITY_USAGE_FILTER_SET;var POINT_IN_PERCENTAGE_OF_DESIGNATED_TIME_CLICKED="Point in percentage of designated time clicked";exports.POINT_IN_PERCENTAGE_OF_DESIGNATED_TIME_CLICKED=POINT_IN_PERCENTAGE_OF_DESIGNATED_TIME_CLICKED;var POINT_IN_AVERAGE_CPU_USAGE_CLICKED="Point in Average CPU usage clicked";exports.POINT_IN_AVERAGE_CPU_USAGE_CLICKED=POINT_IN_AVERAGE_CPU_USAGE_CLICKED;var CAPACITY_USAGE_ANALYTICS_CLOSED="Capacity Usage Analytics - Closed";exports.CAPACITY_USAGE_ANALYTICS_CLOSED=CAPACITY_USAGE_ANALYTICS_CLOSED;var SERVER_CAPACITY_USAGE_DETAILS_PIE_CHART_CLICKED="Server capacity usage details - pie chart clicked";exports.SERVER_CAPACITY_USAGE_DETAILS_PIE_CHART_CLICKED=SERVER_CAPACITY_USAGE_DETAILS_PIE_CHART_CLICKED;var WORKLOAD_PIE_CHART_CLICKED="Workload Pie Chart clicked";exports.WORKLOAD_PIE_CHART_CLICKED=WORKLOAD_PIE_CHART_CLICKED;var WORKLOAD_BAR_CHART_CLICKED="Workload Bar chart clicked";exports.WORKLOAD_BAR_CHART_CLICKED=WORKLOAD_BAR_CHART_CLICKED;var WORKLOAD_SPIKE_NOTIFICATION_EMAIL_TRIGGERED="Workload Spike notification email triggered";exports.WORKLOAD_SPIKE_NOTIFICATION_EMAIL_TRIGGERED=WORKLOAD_SPIKE_NOTIFICATION_EMAIL_TRIGGERED;var WORKLOAD_SPIKE_NOTIFICATION_CLICKED_IN_EDITOR="Workload Spike notification clicked in editor";exports.WORKLOAD_SPIKE_NOTIFICATION_CLICKED_IN_EDITOR=WORKLOAD_SPIKE_NOTIFICATION_CLICKED_IN_EDITOR;var APP_PLAN_CONFIRM_CLICKED="App Plan Confirm Clicked";exports.APP_PLAN_CONFIRM_CLICKED=APP_PLAN_CONFIRM_CLICKED;var CHECKOUT_OPENED="Stripe Checkout Opened";exports.CHECKOUT_OPENED=CHECKOUT_OPENED;var CHECKOUT_COMPLETED="Stripe Checkout Completed";exports.CHECKOUT_COMPLETED=CHECKOUT_COMPLETED;var REDIRECTED_TO_STRIPE_CHECKOUT="Directed to Stripe Checkout";exports.REDIRECTED_TO_STRIPE_CHECKOUT=REDIRECTED_TO_STRIPE_CHECKOUT;var FREE_TRIAL_CANCELED="Trial Canceled";exports.FREE_TRIAL_CANCELED=FREE_TRIAL_CANCELED;var USER_SUBSCRIBED_TO_PLAN="User subscribed to plan";exports.USER_SUBSCRIBED_TO_PLAN=USER_SUBSCRIBED_TO_PLAN;var WORKLOAD_TIER_PLAN_CANCELED="Workload Tier Plan Canceled";exports.WORKLOAD_TIER_PLAN_CANCELED=WORKLOAD_TIER_PLAN_CANCELED;var WORKLOAD_TIER_PLAN_SUBSCRIBED="Workload Tier Plan Subscribed";exports.WORKLOAD_TIER_PLAN_SUBSCRIBED=WORKLOAD_TIER_PLAN_SUBSCRIBED;var WORKLOAD_TIER_PLAN_SELECTED="Workload Tier Plan Selected";exports.WORKLOAD_TIER_PLAN_SELECTED=WORKLOAD_TIER_PLAN_SELECTED;var WORKLOAD_TIER_PLAN_CHECKOUT_CLICKED="Workload Tier Plan Checkout Clicked";exports.WORKLOAD_TIER_PLAN_CHECKOUT_CLICKED=WORKLOAD_TIER_PLAN_CHECKOUT_CLICKED;var APP_PLAN_SELECTED="App Plan Selected";exports.APP_PLAN_SELECTED=APP_PLAN_SELECTED;var APP_PLAN_FREQUENCY_SELECTED="App Plan Frequency Selected";exports.APP_PLAN_FREQUENCY_SELECTED=APP_PLAN_FREQUENCY_SELECTED;var COMPONENT_CREATED="Component Added to Page";exports.COMPONENT_CREATED=COMPONENT_CREATED;var COMPONENT_LIBRARY_MENU_CLICKED="Component Library Menu Clicked";exports.COMPONENT_LIBRARY_MENU_CLICKED=COMPONENT_LIBRARY_MENU_CLICKED;var EVENT_CREATED="Created New Event";exports.EVENT_CREATED=EVENT_CREATED;var ACTION_CREATED="Created New Action";exports.ACTION_CREATED=ACTION_CREATED;var DATA_EXPORTED="Data exported";exports.DATA_EXPORTED=DATA_EXPORTED;var DATA_UPLOADED="Data uploaded";exports.DATA_UPLOADED=DATA_UPLOADED;var STYLES_VARIABLES_TAB_CLICKED="Styles Variables Tab Clicked";exports.STYLES_VARIABLES_TAB_CLICKED=STYLES_VARIABLES_TAB_CLICKED;var STYLES_VARIABLE_EDITED="Styles Variable Edited";exports.STYLES_VARIABLE_EDITED=STYLES_VARIABLE_EDITED;var CREATE_VARIABLE_CLICKED="Create Variable Clicked";exports.CREATE_VARIABLE_CLICKED=CREATE_VARIABLE_CLICKED;var STYLES_VARIABLE_CREATED="Styles Variable Created";exports.STYLES_VARIABLE_CREATED=STYLES_VARIABLE_CREATED;var STYLES_VARIABLE_DELETED="Styles Variable Deleted";exports.STYLES_VARIABLE_DELETED=STYLES_VARIABLE_DELETED;var COLOR_PICKER_VALUE_SET="Color Picker Value Set";exports.COLOR_PICKER_VALUE_SET=COLOR_PICKER_VALUE_SET;var ELEMENT_STYLE_EDITED="Element Style Edited";exports.ELEMENT_STYLE_EDITED=ELEMENT_STYLE_EDITED;var STYLE_VALUE_OVERRIDDEN="Element Style Value Overridden";exports.STYLE_VALUE_OVERRIDDEN=STYLE_VALUE_OVERRIDDEN;var STYLE_VALUE_RESET="Element Style Value Reset";exports.STYLE_VALUE_RESET=STYLE_VALUE_RESET;var DYNAMIC_EXPRESSION_EDITED="Dynamic expression edited";exports.DYNAMIC_EXPRESSION_EDITED=DYNAMIC_EXPRESSION_EDITED;var DYNAMIC_EXPRESSION_EDITED_V1="Dynamic expression edited (V1)";exports.DYNAMIC_EXPRESSION_EDITED_V1=DYNAMIC_EXPRESSION_EDITED_V1;var CREVAMP_TOGGLE_FLIPPED="Composer toggled";exports.CREVAMP_TOGGLE_FLIPPED=CREVAMP_TOGGLE_FLIPPED;var PLUGIN_INSTALLED="Plugin Installed";exports.PLUGIN_INSTALLED=PLUGIN_INSTALLED;var PLUGIN_UNINSTALLED="Plugin Uninstalled";exports.PLUGIN_UNINSTALLED=PLUGIN_UNINSTALLED;var VC_SIDEPANEL_INTERACTION="Version control side panel used";exports.VC_SIDEPANEL_INTERACTION=VC_SIDEPANEL_INTERACTION;var VC_SIDEPANEL_MORE_ACTIONS_MENU_OPENED="Version control more actions menu clicked";exports.VC_SIDEPANEL_MORE_ACTIONS_MENU_OPENED=VC_SIDEPANEL_MORE_ACTIONS_MENU_OPENED;var VC_SIDEPANEL_MORE_ACTIONS_MENU_USED="Version control more actions menu engagement";exports.VC_SIDEPANEL_MORE_ACTIONS_MENU_USED=VC_SIDEPANEL_MORE_ACTIONS_MENU_USED;var VC_SIDEPANEL_ENGAGEMENT="Version control side panel engagement";exports.VC_SIDEPANEL_ENGAGEMENT=VC_SIDEPANEL_ENGAGEMENT;var VC_BRANCH_CREATED="Version control branch created";exports.VC_BRANCH_CREATED=VC_BRANCH_CREATED;var VC_BRANCH_DELETED="Version control branch deleted";exports.VC_BRANCH_DELETED=VC_BRANCH_DELETED;var VC_BRANCH_MERGED="Version control merge started";exports.VC_BRANCH_MERGED=VC_BRANCH_MERGED;var VC_BRANCH_MERGE_CANCELED="Version control merge canceled";exports.VC_BRANCH_MERGE_CANCELED=VC_BRANCH_MERGE_CANCELED;var VC_BRANCH_MERGE_COMPLETED="Version control merge completed";exports.VC_BRANCH_MERGE_COMPLETED=VC_BRANCH_MERGE_COMPLETED;var VC_BRANCH_NAVIGATED="Version control branch navigated";exports.VC_BRANCH_NAVIGATED=VC_BRANCH_NAVIGATED;var VC_BRANCH_DEPLOYED="Version control branch deployed to Live";exports.VC_BRANCH_DEPLOYED=VC_BRANCH_DEPLOYED;var VC_BRANCH_REVERTED="Version control branch reverted";exports.VC_BRANCH_REVERTED=VC_BRANCH_REVERTED;var VC_UPGRADE_CTA="Version control upgrade cta clicked";exports.VC_UPGRADE_CTA=VC_UPGRADE_CTA;var VC_SAVEPOINT_CREATED="Version control custom savepoint created";exports.VC_SAVEPOINT_CREATED=VC_SAVEPOINT_CREATED;var VC_COPY_LIVE="Version control reset to Live";exports.VC_COPY_LIVE=VC_COPY_LIVE;var VC_UPDATE_TO_REDESIGN="Version control update to redesign";exports.VC_UPDATE_TO_REDESIGN=VC_UPDATE_TO_REDESIGN;var USER_APP_TRANSFERRED="User Transferred An App";exports.USER_APP_TRANSFERRED=USER_APP_TRANSFERRED;var USER_APP_TRANSFER_RECEIVED="User Received an App";exports.USER_APP_TRANSFER_RECEIVED=USER_APP_TRANSFER_RECEIVED;var COLLABORATOR_ADDED="User added to App as collaborator";exports.COLLABORATOR_ADDED=COLLABORATOR_ADDED;var COLLABORATOR_REMOVED="User removed from App as collaborator";exports.COLLABORATOR_REMOVED=COLLABORATOR_REMOVED;var YOUTUBE_VIDEO_ENDED="Youtube video ended";exports.YOUTUBE_VIDEO_ENDED=YOUTUBE_VIDEO_ENDED;var YOUTUBE_VIDEO_PLAYING="Youtube video playing";exports.YOUTUBE_VIDEO_PLAYING=YOUTUBE_VIDEO_PLAYING;var YOUTUBE_VIDEO_BUFFER="Youtube video buffering";exports.YOUTUBE_VIDEO_BUFFER=YOUTUBE_VIDEO_BUFFER;var YOUTUBE_VIDEO_CUED="Youtube video cued";exports.YOUTUBE_VIDEO_CUED=YOUTUBE_VIDEO_CUED;var YOUTUBE_VIDEO_PAUSED="Youtube video paused";exports.YOUTUBE_VIDEO_PAUSED=YOUTUBE_VIDEO_PAUSED;var YOUTUBE_VIDEO_RATE_CHANGED="Youtube video playback rate changed";exports.YOUTUBE_VIDEO_RATE_CHANGED=YOUTUBE_VIDEO_RATE_CHANGED;var YOUTUBE_VIDEO_QUALITY_CHANGED="Youtube video playback quality changed";exports.YOUTUBE_VIDEO_QUALITY_CHANGED=YOUTUBE_VIDEO_QUALITY_CHANGED;var FIRST_DATA_TYPE_CREATED="First Data Type Created";exports.FIRST_DATA_TYPE_CREATED=FIRST_DATA_TYPE_CREATED;var FIRST_DEPLOY_TO_LIVE="First Deploy To Live";exports.FIRST_DEPLOY_TO_LIVE=FIRST_DEPLOY_TO_LIVE;var FIRST_DYNAMIC_EXPRESSION_CREATED="First Dynamic Expression Created";exports.FIRST_DYNAMIC_EXPRESSION_CREATED=FIRST_DYNAMIC_EXPRESSION_CREATED;var FIRST_PAGE_ADDED="First Page Added";exports.FIRST_PAGE_ADDED=FIRST_PAGE_ADDED;var FIRST_PLUGIN_ADDED="First Plugin Added";exports.FIRST_PLUGIN_ADDED=FIRST_PLUGIN_ADDED;var FIRST_PREVIEW_VIEWED="First Preview Viewed";exports.FIRST_PREVIEW_VIEWED=FIRST_PREVIEW_VIEWED;var FIRST_REUSABLE_COMPONENT_CREATED="First Reusable Component Created";exports.FIRST_REUSABLE_COMPONENT_CREATED=FIRST_REUSABLE_COMPONENT_CREATED;var FIRST_STYLES_UPDATED="First Styles Updated";exports.FIRST_STYLES_UPDATED=FIRST_STYLES_UPDATED;var FIRST_TIME_REPEATING_GROUP_DATA_SET="First Time Repeating Group Data Set";exports.FIRST_TIME_REPEATING_GROUP_DATA_SET=FIRST_TIME_REPEATING_GROUP_DATA_SET;var FIRST_WORKFLOW_ACTION_CREATED="First Workflow Action Created";exports.FIRST_WORKFLOW_ACTION_CREATED=FIRST_WORKFLOW_ACTION_CREATED;var CHECKLIST_OPENED="Checklist Opened";exports.CHECKLIST_OPENED=CHECKLIST_OPENED;var CHECKLIST_CLOSED="Checklist Closed";exports.CHECKLIST_CLOSED=CHECKLIST_CLOSED;var CHECKLIST_TASK_CLICKED="Checklist Task Clicked";exports.CHECKLIST_TASK_CLICKED=CHECKLIST_TASK_CLICKED;var CHECKLIST_TASK_STEP_COMPLETED="Checklist Task Step Completed";exports.CHECKLIST_TASK_STEP_COMPLETED=CHECKLIST_TASK_STEP_COMPLETED;var CHECKLIST_TASK_COMPLETED="Checklist Task Completed";exports.CHECKLIST_TASK_COMPLETED=CHECKLIST_TASK_COMPLETED;var CHECKLIST_TASK_ABANDONED="Checklist Task Abandoned";exports.CHECKLIST_TASK_ABANDONED=CHECKLIST_TASK_ABANDONED;var GB_ENTRY_GET_STARTED_CLICKED="GB - Entry Get Started Clicked";exports.GB_ENTRY_GET_STARTED_CLICKED=GB_ENTRY_GET_STARTED_CLICKED;var GB_ENTRY_NO_THANKS_CLICKED="GB - Entry No Thanks Clicked";exports.GB_ENTRY_NO_THANKS_CLICKED=GB_ENTRY_NO_THANKS_CLICKED;var GB_SET_TO_COLUMN_CLICKED="GB - Set to Column Clicked";exports.GB_SET_TO_COLUMN_CLICKED=GB_SET_TO_COLUMN_CLICKED;var GB_KEEP_AS_IS_COLUMN_CLICKED="GB - Keep as Column Clicked";exports.GB_KEEP_AS_IS_COLUMN_CLICKED=GB_KEEP_AS_IS_COLUMN_CLICKED;var GB_CONTINUE_ON_INDEX_PE_CLICKED="GB - Continue on Index PE Clicked";exports.GB_CONTINUE_ON_INDEX_PE_CLICKED=GB_CONTINUE_ON_INDEX_PE_CLICKED;var GB_HEADER_COMPONENT_DRAGGED="GB - Header Component Dragged";exports.GB_HEADER_COMPONENT_DRAGGED=GB_HEADER_COMPONENT_DRAGGED;var GB_POPUP_SIGNUP_DRAGGED="GB - Popup Sign Up Dragged";exports.GB_POPUP_SIGNUP_DRAGGED=GB_POPUP_SIGNUP_DRAGGED;var GB_SIGNUP_ON_POPUP_CLICKED="GB - Sign Up on Popup Clicked";exports.GB_SIGNUP_ON_POPUP_CLICKED=GB_SIGNUP_ON_POPUP_CLICKED;var GB_START_EDIT_WORKFLOW_ON_SIGNUP_POPUP_CLICKED="GB - Start/Edit Workflow on Sign Up Popup Clicked";exports.GB_START_EDIT_WORKFLOW_ON_SIGNUP_POPUP_CLICKED=GB_START_EDIT_WORKFLOW_ON_SIGNUP_POPUP_CLICKED;var GB_CONTINUE_ON_WORKFLOW_TAB_INTRO_CLICKED="GB - Continue on Workflow Tab Intro Clicked";exports.GB_CONTINUE_ON_WORKFLOW_TAB_INTRO_CLICKED=GB_CONTINUE_ON_WORKFLOW_TAB_INTRO_CLICKED;var GB_ADD_ACTION_FOR_SIGN_USER_UP_CLICKED="GB - Add an Action for Sign the User Up Clicked";exports.GB_ADD_ACTION_FOR_SIGN_USER_UP_CLICKED=GB_ADD_ACTION_FOR_SIGN_USER_UP_CLICKED;var GB_SIGN_USER_UP_CLICKED='GB - "Sign the User Up" Clicked';exports.GB_SIGN_USER_UP_CLICKED=GB_SIGN_USER_UP_CLICKED;var GB_CONTINUE_NAME_FIELD_CREATED_CLICKED="GB - Continue Name Field Created Clicked";exports.GB_CONTINUE_NAME_FIELD_CREATED_CLICKED=GB_CONTINUE_NAME_FIELD_CREATED_CLICKED;var GB_DATA_FIELDS_ON_SIGNUP_COMPLETED="GB - Data Fields on Sign Up Completed";exports.GB_DATA_FIELDS_ON_SIGNUP_COMPLETED=GB_DATA_FIELDS_ON_SIGNUP_COMPLETED;var GB_CONTINUE_HIDE_ELEMENT_ACTION_CLICKED="GB - Continue Hide an Element Action Clicked";exports.GB_CONTINUE_HIDE_ELEMENT_ACTION_CLICKED=GB_CONTINUE_HIDE_ELEMENT_ACTION_CLICKED;var GB_CONTINUE_ON_ALMOST_THERE_CLICKED="GB - Continue on Almost There Clicked";exports.GB_CONTINUE_ON_ALMOST_THERE_CLICKED=GB_CONTINUE_ON_ALMOST_THERE_CLICKED;var GB_SIGNUP_ON_HEADER_CLICKED="GB - Sign Up on Header Clicked";exports.GB_SIGNUP_ON_HEADER_CLICKED=GB_SIGNUP_ON_HEADER_CLICKED;var GB_START_EDIT_WF_ON_SIGNUP_HEADER_CLICKED="GB - Start/Edit Workflow on Sign Up Header Clicked";exports.GB_START_EDIT_WF_ON_SIGNUP_HEADER_CLICKED=GB_START_EDIT_WF_ON_SIGNUP_HEADER_CLICKED;var GB_ADD_ACTION_FOR_SHOW_ELEMENT_CLICKED="GB - Add an Action for Show an Element Clicked";exports.GB_ADD_ACTION_FOR_SHOW_ELEMENT_CLICKED=GB_ADD_ACTION_FOR_SHOW_ELEMENT_CLICKED;var GB_SHOW_ELEMENT_CLICKED="GB - Show an Element Clicked";exports.GB_SHOW_ELEMENT_CLICKED=GB_SHOW_ELEMENT_CLICKED;var GB_ELEMENT_POPUP_SIGNUP_LOGIN_SELECTED="GB - Element Popup Sign Up/Log In Selected";exports.GB_ELEMENT_POPUP_SIGNUP_LOGIN_SELECTED=GB_ELEMENT_POPUP_SIGNUP_LOGIN_SELECTED;var GB_CONTINUE_FINAL_ACTIONS_WF_CLICKED="GB - Continue Final Actions Workflow Clicked";exports.GB_CONTINUE_FINAL_ACTIONS_WF_CLICKED=GB_CONTINUE_FINAL_ACTIONS_WF_CLICKED;var GB_DONE_CLICKED="GB - Done Clicked";exports.GB_DONE_CLICKED=GB_DONE_CLICKED;var GB_PREVIEW_CLICKED="GB - Preview Clicked";exports.GB_PREVIEW_CLICKED=GB_PREVIEW_CLICKED;var GB_FINISH_ON_CONGRATS_CLICKED="GB - Finish on Congrats Clicked";exports.GB_FINISH_ON_CONGRATS_CLICKED=GB_FINISH_ON_CONGRATS_CLICKED;var GB_X_OUT_CLICKED="GB - X Out Clicked";exports.GB_X_OUT_CLICKED=GB_X_OUT_CLICKED;var DWD_DESIGN_VIDEO_POPUP_SEEN="DWD Design video popup seen";exports.DWD_DESIGN_VIDEO_POPUP_SEEN=DWD_DESIGN_VIDEO_POPUP_SEEN;var DWD_DESIGN_VIDEO_PLAYED="DWD Design video played";exports.DWD_DESIGN_VIDEO_PLAYED=DWD_DESIGN_VIDEO_PLAYED;var DWD_WORKFLOW_VIDEO_POPUP_SEEN="DWD Workflow video popup seen";exports.DWD_WORKFLOW_VIDEO_POPUP_SEEN=DWD_WORKFLOW_VIDEO_POPUP_SEEN;var DWD_WORKFLOW_VIDEO_PLAYED="DWD Workflow video played";exports.DWD_WORKFLOW_VIDEO_PLAYED=DWD_WORKFLOW_VIDEO_PLAYED;var DWD_DATA_VIDEO_POPUP_SEEN="DWD Data video popup seen";exports.DWD_DATA_VIDEO_POPUP_SEEN=DWD_DATA_VIDEO_POPUP_SEEN;var DWD_DATA_VIDEO_PLAYED="DWD Data video played";exports.DWD_DATA_VIDEO_PLAYED=DWD_DATA_VIDEO_PLAYED;var DWD_VISUAL_INDICATOR_SETTING_TOGGLED="DWD Visual Indicator Setting Toggled";exports.DWD_VISUAL_INDICATOR_SETTING_TOGGLED=DWD_VISUAL_INDICATOR_SETTING_TOGGLED;var HTML_UPLOAD_EVENT="HTML file upload";exports.HTML_UPLOAD_EVENT=HTML_UPLOAD_EVENT;var REUSABLE_PROPERTY_CREATED="Reusable element property added";exports.REUSABLE_PROPERTY_CREATED=REUSABLE_PROPERTY_CREATED;var REUSABLE_CREATED="Reusable element added to page";exports.REUSABLE_CREATED=REUSABLE_CREATED;var REUSABLE_ENGAGEMENT="Reusable element engagement";exports.REUSABLE_ENGAGEMENT=REUSABLE_ENGAGEMENT;var AI_CHAT_PROMPT_SENT="AI Chat Prompt Sent";exports.AI_CHAT_PROMPT_SENT=AI_CHAT_PROMPT_SENT;var AI_CHAT_COMPLETION_RECEIVED="AI Chat Completion Received";exports.AI_CHAT_COMPLETION_RECEIVED=AI_CHAT_COMPLETION_RECEIVED;var AI_CHAT_RATING="AI Chat Rating";exports.AI_CHAT_RATING=AI_CHAT_RATING;var ENABLE_WORKFLOW_API_AND_BACKEND_WORKFLOWS_TOGGLED="Enable Workflow API and backend workflows toggled";exports.ENABLE_WORKFLOW_API_AND_BACKEND_WORKFLOWS_TOGGLED=ENABLE_WORKFLOW_API_AND_BACKEND_WORKFLOWS_TOGGLED;var VIEWED_APP_SETTINGS="Viewed App Settings";exports.VIEWED_APP_SETTINGS=VIEWED_APP_SETTINGS;var VIEWED_APP_PRICING="Viewed App Pricing";exports.VIEWED_APP_PRICING=VIEWED_APP_PRICING;var CONTEXT_MENU_SEGMENT_EVENTS={Copy:"Copy","Copy to another app":"Copy to another app",Cut:"Cut",Paste:"Paste","Select all":"Select all","Select first parent":"Select first parent","Copy with workflows":"Copy with workflows","Copy conditional expressions":"Copy conditional expressions","Copy style":"Copy style","Copy layout settings":"Copy layout settings","Paste with workflows":"Paste with workflows","Paste conditional expressions":"Paste conditional expressions","Paste style":"Paste style","Paste layout settings":"Paste layout settings"};exports.CONTEXT_MENU_SEGMENT_EVENTS=CONTEXT_MENU_SEGMENT_EVENTS}});var require_font_tokens=__commonJS({"lib-browser-old/lang/font_tokens.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.add_user_font_token=add_user_font_token;exports.default_font_tokens_to_property=default_font_tokens_to_property;exports.delete_user_font_token=delete_user_font_token;exports.font_token_to_font=font_token_to_font;exports.is_user_font_token=is_user_font_token;exports.load_font_tokens_default=load_font_tokens_default;exports.load_font_tokens_user=load_font_tokens_user;exports.user_font_tokens_to_property=user_font_tokens_to_property;require_es_symbol_description();require_web_dom_collections_for_each();require_es_regexp_exec();require_es_string_match();require_es_array_reverse();require_es_json_stringify();require_es_string_replace();var _appquery=_interopRequireDefault(require_appquery()),_fonts=require_fonts(),_tokens=require_tokens(),_webfonts=require_webfonts(),analytics=_interopRequireWildcard(require_analytics()),_segment_events=require_segment_events(),_b_object=require_b_object();function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function add_user_font_token(name,description){var _appquery$get_public_;let variant=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"default",uid=_appquery.default.uid(),font_tokens_user=(_appquery$get_public_=_appquery.default.get_public_setting("font_tokens_user"))!=null?_appquery$get_public_:(0,_b_object.json_deep_copy)(_tokens.DEFAULT_USER_TOKENS);font_tokens_user[variant][uid]={font_family:_fonts.DEFAULT_FAMILY,name,description,order:Object.keys(font_tokens_user[variant]).length,deleted:!1},analytics.track(_segment_events.STYLES_VARIABLE_CREATED,{app:_appquery.default.appname(),token:uid,variant,name,description,type:"Font"}),_appquery.default.set_setting(!0,"font_tokens_user",font_tokens_user),_appquery.default.commit()}function delete_user_font_token(variant,token){var _appquery$get_public_2;let font_tokens_user=(_appquery$get_public_2=_appquery.default.get_public_setting("font_tokens_user"))!=null?_appquery$get_public_2:(0,_b_object.json_deep_copy)(_tokens.DEFAULT_USER_TOKENS),deleted_idx=font_tokens_user[variant][token].order;for(let id in font_tokens_user[variant])font_tokens_user[variant][id].order>deleted_idx&&(font_tokens_user[variant][id].order-=1);analytics.track(_segment_events.STYLES_VARIABLE_DELETED,{app:_appquery.default.appname(),token,variant,name:font_tokens_user[variant][token].name,description:font_tokens_user[variant][token].description,type:"Font"}),font_tokens_user[variant][token].deleted=!0,font_tokens_user[variant][token].name+=_tokens.DELETED_USER_TOKEN_STRING,_appquery.default.set_setting(!0,"font_tokens_user",font_tokens_user),_appquery.default.commit()}function load_font_tokens_default(){var _appquery$get_public_3;let font_tokens=(_appquery$get_public_3=_appquery.default.get_public_setting("font_tokens"))!=null?_appquery$get_public_3:_fonts.DEFAULT_TOKENS;for(let token in font_tokens)_fonts.ALL_WEIGHTS.forEach(weight=>{(0,_webfonts.load_font)((0,_webfonts.to_font_face)(font_tokens[token],weight))})}function load_font_tokens_user(){var _appquery$get_public_4;let font_tokens_user=(_appquery$get_public_4=_appquery.default.get_public_setting("font_tokens_user"))!=null?_appquery$get_public_4:(0,_b_object.json_deep_copy)(_tokens.DEFAULT_USER_TOKENS);for(let variant in font_tokens_user)for(let uid in font_tokens_user[variant])_fonts.ALL_WEIGHTS.forEach(weight=>{(0,_webfonts.load_font)((0,_webfonts.to_font_face)(font_tokens_user[variant][uid].font_family,weight))})}function is_user_font_token(val){var _val$match,_appquery$get_public_5;let token=(_val$match=val.match(_fonts.FONT_TOKEN_NAME_AND_WEIGHT))==null?void 0:_val$match[1];return token?!((_appquery$get_public_5=_appquery.default.get_public_setting("font_tokens"))!=null?_appquery$get_public_5:_fonts.DEFAULT_TOKENS)[token]:!1}function font_token_to_font(val){var _val$match2,_appquery$get_public_6,_appquery$get_public_7;let token=(_val$match2=val.match(_fonts.FONT_TOKEN_NAME_AND_WEIGHT))==null?void 0:_val$match2[1];if(!token)return val;let default_tokens=(_appquery$get_public_6=_appquery.default.get_public_setting("font_tokens"))!=null?_appquery$get_public_6:_fonts.DEFAULT_TOKENS,user_tokens=(_appquery$get_public_7=_appquery.default.get_public_setting("font_tokens_user"))!=null?_appquery$get_public_7:(0,_b_object.json_deep_copy)(_tokens.DEFAULT_USER_TOKENS),token_parts=token.split("_").reverse();return token_parts.length===2?user_tokens[token_parts[0]][token_parts[1]].font_family:default_tokens[token]}function default_font_tokens_to_property(){var _appquery$get_public_8;let font_tokens=(_appquery$get_public_8=_appquery.default.get_public_setting("font_tokens"))!=null?_appquery$get_public_8:_fonts.DEFAULT_TOKENS,ret={};for(let token in font_tokens)ret["--font_"+token]=JSON.stringify(font_tokens[token].replace(_fonts.CUSTOM_FONT_FLAG,""));return ret}function user_font_tokens_to_property(){var _appquery$get_public_9;let font_tokens_user=(_appquery$get_public_9=_appquery.default.get_public_setting("font_tokens_user"))!=null?_appquery$get_public_9:(0,_b_object.json_deep_copy)(_tokens.DEFAULT_USER_TOKENS),ret={};for(let variant in font_tokens_user)for(let uid in font_tokens_user[variant])font_tokens_user[variant][uid].font_family&&(ret["--font_"+uid+"_"+variant]=JSON.stringify(font_tokens_user[variant][uid].font_family.replace(_fonts.CUSTOM_FONT_FLAG,"")));return ret}}});var require_color_tokens=__commonJS({"lib-browser-old/lang/color_tokens.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.add_user_color_token=add_user_color_token;exports.color_property_to_rgba=color_property_to_rgba;exports.default_color_tokens_to_property=default_color_tokens_to_property;exports.delete_user_color_token=delete_user_color_token;exports.is_user_color_token=is_user_color_token;exports.token_variant_to_properties=token_variant_to_properties;exports.user_color_tokens_to_property=user_color_tokens_to_property;exports.variable_to_token_variant=variable_to_token_variant;require_es_array_includes();require_es_string_includes();require_es_regexp_exec();require_es_string_match();require_es_string_replace();require_es_symbol_description();require_es_array_iterator();require_web_dom_collections_iterator();require_es_regexp_to_string();var _colors=require_colors(),_tokens=require_tokens(),_color=require_color(),_safe_require=_interopRequireDefault(require_safe_require()),_appquery=_interopRequireDefault(require_appquery()),analytics=_interopRequireWildcard(require_analytics()),_segment_events=require_segment_events(),_b_object=require_b_object();function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_safe_require.default.safe_register("./lang/color_tokens",exports);function variable_to_token_variant(val){if(val!=null&&val.includes(_colors.VAR_IDENTIFIER)){var _val$match;let token=(_val$match=val.match(_colors.TOKEN_NAME))==null?void 0:_val$match[1];if(!token)return null;let variant=_colors.COLOR_VARIANTS.find(variant2=>!!token.includes(variant2));if(!variant)return null;let token_set=token.replace("_".concat(variant),"").replace(_colors.RGB_VAR_IDENTIFIER,"");return{variant,token_set}}return null}function is_user_color_token(token){return!_colors.SORTED_DEFAULT_TOKENS.includes(token)}function token_variant_to_properties(token,variant){var _appquery$get_public_,_appquery$get_public_2;let color_tokens=(_appquery$get_public_=_appquery.default.get_public_setting("color_tokens"))!=null?_appquery$get_public_:_colors.DEFAULT_COLOR_TOKENS,user_color_tokens=(_appquery$get_public_2=_appquery.default.get_public_setting("color_tokens_user"))!=null?_appquery$get_public_2:(0,_b_object.json_deep_copy)(_tokens.DEFAULT_USER_TOKENS);if(is_user_color_token(token)){var _user_color_tokens$va;let current_token=(_user_color_tokens$va=user_color_tokens[variant][token])!=null?_user_color_tokens$va:{name:_colors.MISSING_USER_COLOR_TOKEN_TEXT,description:_colors.MISSING_USER_COLOR_TOKEN_TEXT,rgba:_colors.DEFAULT_USER_COLOR_TOKEN_RGBA,deleted:!1};return{name:current_token.name,description:current_token.description,rgba:current_token.rgba,deleted:current_token.deleted}}else return{name:_colors.DEFAULT_TOKEN_NAMES_DESCRIPTIONS[token].name,description:_colors.DEFAULT_TOKEN_NAMES_DESCRIPTIONS[token].description,rgba:color_tokens[token][variant],deleted:!1}}function override_alpha(val,override){if(override==null)return val;let parts=val==null?void 0:val.match(_colors.CAPTURE_ALPHA);return parts!=null?"rgba(".concat(parts.groups.base,",").concat(override,")"):"rgba(".concat(val,",").concat(override,")")}function color_property_to_rgba(val){var _val$match2,_val$match2$groups,_appquery$get_public_3,_tokens$token$token_s,_appquery$get_public_4;let token=variable_to_token_variant(val);if(token==null)return val;let original_alpha=(_val$match2=val.match(_colors.CAPTURE_ALPHA))==null||(_val$match2$groups=_val$match2.groups)==null?void 0:_val$match2$groups.opacity,tokens=(_appquery$get_public_3=_appquery.default.get_public_setting("color_tokens"))!=null?_appquery$get_public_3:_colors.DEFAULT_COLOR_TOKENS;if((_tokens$token$token_s=tokens[token.token_set])!=null&&_tokens$token$token_s[token.variant]){var _tokens$token$token_s2;return override_alpha((_tokens$token$token_s2=tokens[token.token_set])==null?void 0:_tokens$token$token_s2[token.variant],original_alpha)}let user_tokens=(_appquery$get_public_4=_appquery.default.get_public_setting("color_tokens_user"))!=null?_appquery$get_public_4:(0,_b_object.json_deep_copy)(_tokens.DEFAULT_USER_TOKENS);return override_alpha(user_tokens[token.variant][token.token_set].rgba,original_alpha)}function add_user_color_token(name,description){var _appquery$get_public_5;let variant=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"default",user_color_tokens=(_appquery$get_public_5=_appquery.default.get_public_setting("color_tokens_user"))!=null?_appquery$get_public_5:(0,_b_object.json_deep_copy)(_tokens.DEFAULT_USER_TOKENS),new_uid=_appquery.default.uid();user_color_tokens[variant][new_uid]={rgba:_colors.DEFAULT_USER_COLOR_TOKEN_RGBA,name,description,order:Object.keys(user_color_tokens[variant]).length,deleted:!1},analytics.track(_segment_events.STYLES_VARIABLE_CREATED,{app:_appquery.default.appname(),token:new_uid,variant,name,description,type:"Color"}),_appquery.default.set_setting(!0,"color_tokens_user",user_color_tokens),_appquery.default.commit()}function delete_user_color_token(variant,token){var _appquery$get_public_6;let user_color_tokens=(_appquery$get_public_6=_appquery.default.get_public_setting("color_tokens_user"))!=null?_appquery$get_public_6:(0,_b_object.json_deep_copy)(_tokens.DEFAULT_USER_TOKENS),deleted_idx=user_color_tokens[variant][token].order;for(let id in user_color_tokens[variant])user_color_tokens[variant][id].order>deleted_idx&&(user_color_tokens[variant][id].order-=1);analytics.track(_segment_events.STYLES_VARIABLE_DELETED,{app:_appquery.default.appname(),token,variant,name:user_color_tokens[variant][token].name,description:user_color_tokens[variant][token].description,type:"Color"}),user_color_tokens[variant][token].deleted=!0,user_color_tokens[variant][token].name+=_tokens.DELETED_USER_TOKEN_STRING,_appquery.default.set_setting(!0,"color_tokens_user",user_color_tokens),_appquery.default.commit()}function default_color_tokens_to_property(){var _appquery$get_public_7;let color_tokens=(_appquery$get_public_7=_appquery.default.get_public_setting("color_tokens"))!=null?_appquery$get_public_7:_colors.DEFAULT_COLOR_TOKENS,ret={};for(let token in color_tokens)for(let variant of _colors.COLOR_VARIANTS){var _rgba_to_array;ret["--color_".concat(token,"_").concat(variant)]=color_tokens[token][variant];let rgb_string=(_rgba_to_array=(0,_color.rgba_to_array)(color_tokens[token][variant]))==null?void 0:_rgba_to_array.slice(0,-1).toString();ret["--color_".concat(token,"_").concat(variant,"_rgb")]=rgb_string!=null?rgb_string:""}return ret}function user_color_tokens_to_property(){var _appquery$get_public_8;let user_color_tokens=(_appquery$get_public_8=_appquery.default.get_public_setting("color_tokens_user"))!=null?_appquery$get_public_8:(0,_b_object.json_deep_copy)(_tokens.DEFAULT_USER_TOKENS),ret={};for(let variant in user_color_tokens)for(let token in user_color_tokens[variant]){var _rgba_to_array2;if(!user_color_tokens[variant][token].rgba)continue;ret["--color_".concat(token,"_").concat(variant)]=user_color_tokens[variant][token].rgba;let rgb_string=(_rgba_to_array2=(0,_color.rgba_to_array)(user_color_tokens[variant][token].rgba))==null?void 0:_rgba_to_array2.slice(0,-1).toString();ret["--color_".concat(token,"_").concat(variant,"_rgb")]=rgb_string!=null?rgb_string:""}return ret}}});var require_element_styles=__commonJS({"lib-browser-old/core/core_elements/components/utils/element_styles.js"(exports){"use strict";init_define_process_env();init_shim();require_es_symbol_description();require_es_error_cause();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.basicStyling=basicStyling;exports.clickabilityStyles=clickabilityStyles;exports.placedStyling=placedStyling;exports.positioningStyle=positioningStyle;exports.propertyApplicationStyles=propertyApplicationStyles;exports.tokenStyling=tokenStyling;exports.transitionStyles=transitionStyles;exports.visibilityStyles=void 0;require_es_array_iterator();require_web_dom_collections_iterator();require_web_queue_microtask();var _jquery_wrapper=require_jquery_wrapper(),logger=_interopRequireWildcard(require_logger()),_properties=require_properties(),_element_eval=require_element_eval(),_font_tokens=require_font_tokens(),_color_tokens=require_color_tokens(),_server_rendering=require_server_rendering(),_lib=_interopRequireDefault(require_lib()),_web=(init_web(),__toCommonJS(web_exports));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var visibilityStyles=[new _properties.Style(instance=>!instance.is_visible_me()&&!(instance.is_animating()&&instance._is_animating_me)?{visibility:"hidden"}:{},{alwaysDynamic:!0,noWaitVisible:!0})];exports.visibilityStyles=visibilityStyles;function createPropertyApplication(pApp){return new _properties.Style(instance=>(0,_jquery_wrapper.withMockCanvas)(testCanvas=>{if(pApp.apply_once)pApp.apply_directly({},testCanvas);else{let props;instance.element.E.additional_uses_properties?props=pApp.uses_properties.concat(instance.element.E.additional_uses_properties):props=pApp.uses_properties;let values={};for(let prop of props)values[prop]=(0,_element_eval.evaluate_property)(instance,prop);values._first_time=!0,pApp.apply_directly(values,testCanvas,instance)}}).style,{selector:pApp.sel_fn!=null?" ".concat(String(pApp.sel_fn)):void 0})}function propertyApplicationStyles(element){return element.get_property_applications().filter(pApp=>!pApp.no_solid_support).map(pApp=>createPropertyApplication(pApp))}function transitionStyles(element){let selectors={};if(_lib.default.or_throw().is_edit_mode())return[];for(let pApp of element.get_property_applications())pApp.sel_fn&&(typeof pApp.sel_fn=="function"?logger.error("Property applications no longer support functions as selectors",{class_name:pApp.class_name}):selectors[pApp.sel_fn]=!0);let getTransitionStyling=selector=>instance=>{let transitions=[];for(let pApp of instance.element.get_property_applications())(selector&&pApp.sel_fn===selector||!selector&&!pApp.sel_fn)&&transitions.push(pApp.get_transition_styling(instance.element));selector||transitions.push(instance.get_transition_styling());let transition=transitions.filter(str=>!!str).join(", ");return{"-webkit-transition":transition,"-moz-transition":transition,"-o-transition":transition,"-ms-transition":transition,transition}};return[new _properties.Style(getTransitionStyling(void 0),{noWaitVisible:!0}),...Object.keys(selectors).map(selector=>new _properties.Style(getTransitionStyling(selector),{selector,noWaitVisible:!0}))]}function clickabilityStyles(element){return!_lib.default.or_throw().is_edit_mode()&&element.E.change_cursor_style_if_clickable&&element.get_related_workflows("ButtonClicked").length?[new _properties.Style(instance=>({cursor:(0,_element_eval.evaluate_property)(instance,"button_disabled")?"default":"pointer"}))]:[]}function basicStyling(element){return[...visibilityStyles,...propertyApplicationStyles(element),...transitionStyles(element),...clickabilityStyles(element)]}function positioningStyle(shouldAddWrapper){return[new _properties.Style(instance=>{let styling=instance.container.element_css(instance),ret={};for(let prop in styling)ret[(0,_jquery_wrapper.convertStyle)(prop)]=styling[prop];if(shouldAddWrapper){var _window,_window$BrowserDetect;if(instance.run_mode()&&!instance.state("flickered")&&(_web.isServer||((_window=window)==null||(_window$BrowserDetect=_window.BrowserDetect)==null?void 0:_window$BrowserDetect.browser)==="Safari"))return _web.isServer||queueMicrotask(()=>instance.state("flickered",!0)),_objectSpread(_objectSpread({},ret),{},{height:"0px"})}return ret},{noWaitVisible:!0,outerPositioning:!0,alwaysDynamic:shouldAddWrapper}),new _properties.Style(instance=>{var _instance$element$get;return{"z-index":(_instance$element$get=instance.element.get_zindex())!=null?_instance$element$get:void 0}},{noWaitVisible:!0,outerPositioning:!0}),new _properties.Style(instance=>instance.get_static_property("collapse_when_hidden")&&instance.container.should_collapse(instance)?{display:"none"}:{},{alwaysDynamic:!0,noWaitVisible:!0,notInStylesheet:!0,outerPositioning:!0})]}function placedStyling(element){return[...basicStyling(element),...positioningStyle(element.can_have_children()&&element.should_add_extra_wrapper())]}function tokenStyling(){return new _properties.Style(()=>_objectSpread(_objectSpread(_objectSpread(_objectSpread({},(0,_font_tokens.default_font_tokens_to_property)()),(0,_font_tokens.user_font_tokens_to_property)()),(0,_color_tokens.default_color_tokens_to_property)()),(0,_color_tokens.user_color_tokens_to_property)()),{noWaitVisible:!0,selector:_server_rendering.AT_ROOT})}}});var require_table_element=__commonJS({"lib-browser-old/core/core_elements/components/utils/table_element.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.createAxisReorderingOverlay=exports.TableContext=exports.PSEUDO_TABLE_ELEMENTS=exports.NUM_DEFAULT_ROWS_EDITOR=exports.NUM_DEFAULT_COLUMNS=exports.MAIN_AXIS_ZINDEX=exports.DIVIDER_ZINDEX=exports.DEFAULT_REPEATING_ROW_HEIGHT=exports.DEFAULT_HEADER_ROW_HEIGHT=exports.DEFAULT_COLUMN_WIDTH=exports.CROSS_AXIS_ZINDEX=exports.CELL_ZINDEX=void 0;exports.crossAxisStyling=crossAxisStyling;exports.deleteCells=void 0;exports.getAxes=getAxes;exports.getAxisNames=getAxisNames;exports.getLetterIndex=void 0;exports.getRelativeIndex=getRelativeIndex;exports.updateIndicesOnDelete=exports.updateIndicesOnCreate=exports.isTableDirectionHorizontal=void 0;require_es_array_sort();require_es_array_iterator();require_web_dom_collections_iterator();var _solidJs=(init_solid(),__toCommonJS(solid_exports)),_appquery=_interopRequireDefault(require_appquery()),_sorting=require_sorting(),_properties=require_properties(),_element_styles=require_element_styles(),_element_eval=require_element_eval(),element_props=_interopRequireWildcard(require_element_props());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var NUM_DEFAULT_COLUMNS=3;exports.NUM_DEFAULT_COLUMNS=NUM_DEFAULT_COLUMNS;var NUM_DEFAULT_ROWS_EDITOR=3;exports.NUM_DEFAULT_ROWS_EDITOR=NUM_DEFAULT_ROWS_EDITOR;var DEFAULT_REPEATING_ROW_HEIGHT=77;exports.DEFAULT_REPEATING_ROW_HEIGHT=DEFAULT_REPEATING_ROW_HEIGHT;var DEFAULT_HEADER_ROW_HEIGHT=43;exports.DEFAULT_HEADER_ROW_HEIGHT=DEFAULT_HEADER_ROW_HEIGHT;var DEFAULT_COLUMN_WIDTH=158;exports.DEFAULT_COLUMN_WIDTH=DEFAULT_COLUMN_WIDTH;var CELL_ZINDEX=2;exports.CELL_ZINDEX=CELL_ZINDEX;var CROSS_AXIS_ZINDEX=1;exports.CROSS_AXIS_ZINDEX=CROSS_AXIS_ZINDEX;var MAIN_AXIS_ZINDEX=0;exports.MAIN_AXIS_ZINDEX=MAIN_AXIS_ZINDEX;var DIVIDER_ZINDEX=1e5;exports.DIVIDER_ZINDEX=DIVIDER_ZINDEX;var PSEUDO_TABLE_ELEMENTS=["TableMainAxis","TableCrossAxis","TableCell"];exports.PSEUDO_TABLE_ELEMENTS=PSEUDO_TABLE_ELEMENTS;var TableContext=(0,_solidJs.createContext)();exports.TableContext=TableContext;function getAxisNames(direction){return direction==="horizontal"?{main:"row",cross:"column"}:{main:"column",cross:"row"}}var isTableDirectionHorizontal=element=>(element==null?void 0:element.get_static_property("table_direction"))==="horizontal";exports.isTableDirectionHorizontal=isTableDirectionHorizontal;var getLetterIndex=index=>String.fromCharCode("A".charCodeAt(0)+index);exports.getLetterIndex=getLetterIndex;var sortByIndex=axes=>axes.sort((a,b)=>a.get_static_property("axis_index")-b.get_static_property("axis_index")||(0,_sorting.compare)(a.id(),b.id()));function getAxes(tableElement,axisType){var _tableElement$element;return(_tableElement$element=tableElement==null?void 0:tableElement.elements().filter(element=>element.type()===axisType))!=null?_tableElement$element:[]}function getRelativeIndex(axis){let axisType=axis.type();return sortByIndex(getAxes(axis.parent(),axisType)).findIndex(element=>element.id()===axis.id())}var updateIndicesOnCreate=function(neighborId,axisType){let direction=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"after",axis=_appquery.default.element(neighborId),sorted=sortByIndex(getAxes(axis.parent(),axisType)),newIndex=sorted.indexOf(axis)+(direction==="before"?0:1);for(let i=0;i<sorted.length;i++)sorted[i].set_property("axis_index",i+(i>=newIndex?1:0));return newIndex};exports.updateIndicesOnCreate=updateIndicesOnCreate;var updateIndicesOnDelete=(id,axisType)=>{let deletedAxis=_appquery.default.element(id),sorted=sortByIndex(getAxes(deletedAxis.parent(),axisType)),subtraction=0;for(let i=0;i<sorted.length;i++){let element=sorted[i];if(element.id()===id){subtraction=1;continue}element.set_property("axis_index",i-subtraction)}};exports.updateIndicesOnDelete=updateIndicesOnDelete;var deleteCells=(table,mainAxisId)=>{let crossAxes=getAxes(table,"TableCrossAxis");for(let axis of crossAxes)for(let cell of axis.elements())if(cell.get_static_property("cell_main_axis_id")===mainAxisId){cell.delete({user_action:"Delete TableCell"}),cell.commit_merge();break}};exports.deleteCells=deleteCells;var createAxisReorderingOverlay=()=>{let overlay=document.createElement("div");return overlay.style.position="absolute",overlay.style.top="0",overlay.style.left="0",overlay.style.width="100%",overlay.style.height="100%",overlay.style.backgroundColor="rgba(0, 0, 0, 0)",overlay.style.cursor="move",overlay};exports.createAxisReorderingOverlay=createAxisReorderingOverlay;function crossAxisStyling(element){let dim=()=>{var _repeating_instance$e,_repeating_instance;return isTableDirectionHorizontal(((_repeating_instance$e=(_repeating_instance=element.repeating_instance)==null?void 0:_repeating_instance.element)!=null?_repeating_instance$e:element).parent())?"width":"height"};return[...(0,_element_styles.basicStyling)(element),new _properties.Style(instance=>({"flex-direction":dim()==="height"?"row":"column","box-sizing":"content-box"})),new _properties.Style(instance=>{var _evaluate_property;let min=(_evaluate_property=(0,_element_eval.evaluate_property)(instance,"min_".concat(dim(),"_css")))!=null?_evaluate_property:"0px";if((0,_element_eval.evaluate_property)(instance,"single_".concat(dim())))return{"z-index":CROSS_AXIS_ZINDEX,[dim()]:min,"flex-grow":0,"flex-shrink":0};let max=(0,_element_eval.evaluate_property)(instance,"max_".concat(dim(),"_css")),fitting=element_props["is_fitting_".concat(dim())](instance);return{"z-index":CROSS_AXIS_ZINDEX,["min-".concat(dim())]:min,["max-".concat(dim())]:max!=null?max:"",[dim()]:fitting?"max-content":min,"flex-grow":fitting?0:1,"flex-shrink":0}},{outerPositioning:!0}),new _properties.Style(instance=>instance.is_visible_me()?{}:{display:"none"},{alwaysDynamic:!0,noWaitVisible:!0,notInStylesheet:!0,outerPositioning:!0})]}}});var require_element_meta_actions=__commonJS({"lib-browser-old/core/core_elements/core_elements_utilities/element_meta_actions.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.select_parent_property=exports.reveal_in_tree_property=exports.replace_element_property=exports.lock_in_editor_property=exports.delete_element_property=void 0;require_es_array_includes();require_es_string_includes();var analytics=_interopRequireWildcard(require_analytics()),_lib=_interopRequireDefault(require_lib()),_appquery=_interopRequireDefault(require_appquery()),_table_element=require_table_element();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function is_responsive(){var _window;if((_window=window)!=null&&_window.is_maison)return!1;var _Lib$visual_edit,_Lib$visual_edit2,_Lib$visual_edit3;return((_Lib$visual_edit=(0,_lib.default)().visual_edit)==null?void 0:_Lib$visual_edit.responsive_version())>0&&((_Lib$visual_edit2=(0,_lib.default)().visual_edit)==null?void 0:_Lib$visual_edit2.is_active())&&((_Lib$visual_edit3=(0,_lib.default)().visual_edit)==null?void 0:_Lib$visual_edit3.responsive_mode_box())==="responsive"}function table_element_type(element){return _table_element.PSEUDO_TABLE_ELEMENTS.includes(element.type())||element.type()==="Table"}var delete_element_property=element=>({name:"delete_element",button_caption:element.type()==="Table"?"Delete table":"Delete",editor:"Button",optional:!0,condition(){return!is_responsive()&&!element.get_static_property("cross_axis_repeat")},click_cb(){if(element.type()==="TableMainAxis"){let id=element.id(),table=element.parent();element.delete({user_action:"Delete Element Button"}),element.commit(),(0,_table_element.deleteCells)(table,id)}else element.delete({user_action:"Delete Element Button"}),element.commit(),(0,_lib.default)().visual_edit.select_to_edit(null);analytics.track("PE Delete Element clicked",{app:_appquery.default.appname()})},pretty:{section:"ElementMetaActions",no_caption:!0,width:element.type()==="Table"?"":"small"}});exports.delete_element_property=delete_element_property;var select_parent_property=element=>({name:"select_parent",caption:"Select parent/child",editor:"Dropdown",no_write_child:!0,optional:!0,set:(0,_lib.default)().sets.get_set("ParentElements")(element),on_change(id){(0,_lib.default)().visual_edit.select_to_edit(id),analytics.track("PE Parent selected",{app:_appquery.default.appname()})},pretty:{section:"ElementMetaActions"}});exports.select_parent_property=select_parent_property;var reveal_in_tree_property=element=>({name:"reveal_in_tree",button_caption:"Reveal in the Elements tree",editor:"Button",optional:!0,click_cb(){(0,_lib.default)().visual_edit.reveal_in_element_tree(element),analytics.track("PE Reveal in Elements Tree clicked",{app:_appquery.default.appname()})},pretty:{section:"ElementMetaActions",no_caption:!0}});exports.reveal_in_tree_property=reveal_in_tree_property;var lock_in_editor_property=element=>{var _Lib$edit_canvas;return{name:"lock_in_editor",caption:"Lock this element (not draggable in editor)",editor:"Checkbox",optional:!0,ignore_issue_checker:!0,default:(_Lib$edit_canvas=(0,_lib.default)().edit_canvas)==null?void 0:_Lib$edit_canvas.locked_elements[element.id()],condition(){return!is_responsive()},on_change(val){var _Lib$visual_edit$curr,_Lib$visual_edit$curr2;(_Lib$visual_edit$curr=(_Lib$visual_edit$curr2=(0,_lib.default)().visual_edit.current_editor_canvas).lockElement)==null||_Lib$visual_edit$curr.call(_Lib$visual_edit$curr2,element.id(),val),analytics.track("PE Lock in Editor clicked",{app:_appquery.default.appname()})},pretty:{section:"ElementMetaActions"}}};exports.lock_in_editor_property=lock_in_editor_property;var replace_element_property=element=>({name:"switch_element",button_caption:"Replace",editor:"Button",optional:!0,condition(){return!is_responsive()&&!table_element_type(element)},click_cb(){window.ReplaceTypePanel(element),analytics.track("PE Replace Element clicked",{app:_appquery.default.appname()})},pretty:{section:"ElementMetaActions",no_caption:!0,width:"small"}});exports.replace_element_property=replace_element_property}});var require_element_visibility=__commonJS({"lib-browser-old/core/core_elements/core_elements_utilities/element_visibility.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.visibility_property=exports.visibility_field_names=void 0;var _appquery=_interopRequireDefault(require_appquery()),analytics=_interopRequireWildcard(require_analytics()),_lib=_interopRequireDefault(require_lib());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var visibility_property=element=>{var _window;return[{name:"is_visible",caption:(_window=window)!=null&&_window.is_maison?"Visible on page load":"This element is visible on page load",long_caption:"This element is visible",editor:"Checkbox",on_change(val){val===!1&&(0,_lib.default)().visual_edit.turn_element_on(element.id(),!0),analytics.track("PE Visible on Page Load toggled",{app:_appquery.default.appname(),new_value:val})},pretty:{section:"Position"}},{name:"information",label_text:"This element is not visible on page load, you can show it to edit it in the Element Tree.",click_cb(){return $(".layers-box").find("h2").click()},editor:"Label",condition(_element){return!_element.get_static_property("is_visible",!0)},pretty:{section:"Position"}}]};exports.visibility_property=visibility_property;var visibility_field_names={is_visible:{default:!0}};exports.visibility_field_names=visibility_field_names}});var require_core_ds_workflow_utilities=__commonJS({"lib-browser-old/core/core_datasources/utilities/core_ds_workflow_utilities.js"(exports){"use strict";init_define_process_env();init_shim();require_es_symbol_description();require_es_error_cause();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.build_duplicate_per_item_context=build_duplicate_per_item_context;exports.dehydrate_wf_params=dehydrate_wf_params;exports.generate_wf_param_datasource=void 0;exports.rehydrate_wf_params=rehydrate_wf_params;exports.wf_params_from_properties=wf_params_from_properties;require_es_array_iterator();require_web_dom_collections_iterator();require_es_object_entries();require_es_object_values();var safe_require=_interopRequireWildcard(require_safe_require()),core_consts=_interopRequireWildcard(require_core()),uuid=_interopRequireWildcard(require_uuid()),decaf=_interopRequireWildcard(require_decaf());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}safe_require.safe_register("./core/core_datasources/utilities/core_ds_workflow_utilities",exports);var ALL_PARAMS_ID="__ALL__",generate_wf_param_datasource=workflow_params=>function(properties){return properties.param_id===ALL_PARAMS_ID?workflow_params:typeof workflow_params[properties.param_id]=="function"?workflow_params[properties.param_id]():workflow_params[properties.param_id]};exports.generate_wf_param_datasource=generate_wf_param_datasource;function dehydrate_wf_params(context,dehydrate_fn){var _context$datasources$,_context$datasources,_context$datasources$2;let dehydrated_wf_params={},all_wf_params=(_context$datasources$=(_context$datasources=context.datasources)==null||(_context$datasources$2=_context$datasources.get_wf_param)==null?void 0:_context$datasources$2.call(_context$datasources,{param_id:ALL_PARAMS_ID}))!=null?_context$datasources$:{};for(let[datasource_name,value]of Object.entries(all_wf_params))typeof value=="function"?dehydrated_wf_params[datasource_name]=dehydrate_fn(value()):dehydrated_wf_params[datasource_name]=dehydrate_fn(value);return dehydrated_wf_params}function rehydrate_wf_params(serialized_context,rehydrate_fn){let rehydrated_wf_params={};serialized_context.current_wf_item!=null&&(rehydrated_wf_params[core_consts.LEGACY_PARAM_ID]=rehydrate_fn(serialized_context.current_wf_item));for(let[k,v]of decaf.object_entries(serialized_context.current_wf_params))rehydrated_wf_params[k]=rehydrate_fn(v);return rehydrated_wf_params}function wf_params_from_properties(properties){let wf_params={};if(properties.arguments)for(let{param_id,arg_value}of Object.values(properties.arguments))wf_params[param_id]=arg_value;else wf_params[core_consts.LEGACY_PARAM_ID]=properties.workflow_thing;return wf_params}function build_duplicate_per_item_context(context,workflow_params){let custom_context=_objectSpread({},context);return context.duplicated_from_context=context.object_id,context.object_id=uuid.UUID(),context.duplicated_at="core_ds_workflow_utilities.build_duplicate_per_item_context",custom_context.datasources=_objectSpread(_objectSpread({},context.datasources),{},{get_wf_param:generate_wf_param_datasource(workflow_params)}),custom_context}}});var require_timezone_override_settings=__commonJS({"lib-browser-old/lang/timezone_override_settings.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.has_adv_timezone_overridden=has_adv_timezone_overridden;exports.has_input_timezone_controls_on=has_input_timezone_controls_on;exports.has_rounding_operator_timezone_controls_on=has_rounding_operator_timezone_controls_on;var _appquery=_interopRequireDefault(require_appquery());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function has_adv_timezone_overridden(){return _appquery.default.get_public_setting("adv_timezone_overridden")}function has_rounding_operator_timezone_controls_on(){let current_bv=_appquery.default.get_public_setting("bubble_version"),has_legacy_timezone_improvements_on=_appquery.default.has_feature_enabled("timezone_improvements");return current_bv>=22||has_legacy_timezone_improvements_on}function has_input_timezone_controls_on(){let has_advanced_feature_enabled=_appquery.default.has_advanced_feature_enabled("timezone_controls_date_time_inputs"),has_legacy_experiment_on=_appquery.default.get_public_setting("bubble_version")<22&&(_appquery.default.has_feature_enabled("tz_info_in_date_input")||_appquery.default.get_public_setting("bubble_version")>=20);return has_advanced_feature_enabled||has_legacy_experiment_on}}});var require_custom_tz_utilities=__commonJS({"lib-browser-old/core/custom_tz_utilities.js"(exports){"use strict";init_define_process_env();init_shim();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_regexp_exec();require_es_string_replace();require_es_symbol_description();require_es_error_cause();var{has_adv_timezone_overridden}=require_timezone_override_settings(),Lib=require_lib(),b_date=require_b_date(),moment=b_date.require_moment(),custom_tz_utilities=exports;custom_tz_utilities.custom_tz_field_names={tz_type:{default:"browser",no_states:!0},tz_static:{},tz_dynamic:{},tz_type_overridden:{default:"browser",no_states:!0},tz_static_overridden:{},tz_dynamic_overridden:{}};custom_tz_utilities.get_custom_tz=_ref=>{var _dynamic_eval;let{static_eval,dynamic_eval,invalid_tz_fallback,not_overridden=!1}=_ref;if((_dynamic_eval=dynamic_eval)!=null||(dynamic_eval=static_eval),invalid_tz_fallback===void 0){var _invalid_tz_fallback;(_invalid_tz_fallback=invalid_tz_fallback)!=null||(invalid_tz_fallback=Lib().current_timezone())}let prop_suffix=has_adv_timezone_overridden()&&!not_overridden?"_overridden":"";switch(static_eval("tz_type".concat(prop_suffix))){case"browser":return Lib().current_timezone();case"static":return dynamic_eval("tz_static".concat(prop_suffix));case"dynamic":{let dynamic=dynamic_eval("tz_dynamic".concat(prop_suffix));return moment.tz.zone(dynamic)?dynamic:invalid_tz_fallback}}return Lib().current_timezone()};custom_tz_utilities.get_tz_display=timezone=>{if(timezone){var _timezone$replace;return" ("+((_timezone$replace=timezone.replace(/_/g," "))!=null?_timezone$replace:"")+")"}else return""}}});var require_is_installed=__commonJS({"lib-browser-old/services/is_installed.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_includes();require_es_string_includes();var appquery=require_appquery();module.exports=function(plugin_name){return appquery.list_plugins().includes(plugin_name)}}});var require_fs=__commonJS({"(disabled):fs"(){init_define_process_env();init_shim()}});var require_path_browserify=__commonJS({"node_modules/path-browserify/index.js"(exports,module){"use strict";init_define_process_env();init_shim();function assertPath(path){if(typeof path!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(path))}function normalizeStringPosix(path,allowAboveRoot){for(var res="",lastSegmentLength=0,lastSlash=-1,dots=0,code,i=0;i<=path.length;++i){if(i<path.length)code=path.charCodeAt(i);else{if(code===47)break;code=47}if(code===47){if(!(lastSlash===i-1||dots===1))if(lastSlash!==i-1&&dots===2){if(res.length<2||lastSegmentLength!==2||res.charCodeAt(res.length-1)!==46||res.charCodeAt(res.length-2)!==46){if(res.length>2){var lastSlashIndex=res.lastIndexOf("/");if(lastSlashIndex!==res.length-1){lastSlashIndex===-1?(res="",lastSegmentLength=0):(res=res.slice(0,lastSlashIndex),lastSegmentLength=res.length-1-res.lastIndexOf("/")),lastSlash=i,dots=0;continue}}else if(res.length===2||res.length===1){res="",lastSegmentLength=0,lastSlash=i,dots=0;continue}}allowAboveRoot&&(res.length>0?res+="/..":res="..",lastSegmentLength=2)}else res.length>0?res+="/"+path.slice(lastSlash+1,i):res=path.slice(lastSlash+1,i),lastSegmentLength=i-lastSlash-1;lastSlash=i,dots=0}else code===46&&dots!==-1?++dots:dots=-1}return res}function _format(sep,pathObject){var dir=pathObject.dir||pathObject.root,base=pathObject.base||(pathObject.name||"")+(pathObject.ext||"");return dir?dir===pathObject.root?dir+base:dir+sep+base:base}var posix={resolve:function(){for(var resolvedPath="",resolvedAbsolute=!1,cwd,i=arguments.length-1;i>=-1&&!resolvedAbsolute;i--){var path;i>=0?path=arguments[i]:(cwd===void 0&&(cwd=import_process.default.cwd()),path=cwd),assertPath(path),path.length!==0&&(resolvedPath=path+"/"+resolvedPath,resolvedAbsolute=path.charCodeAt(0)===47)}return resolvedPath=normalizeStringPosix(resolvedPath,!resolvedAbsolute),resolvedAbsolute?resolvedPath.length>0?"/"+resolvedPath:"/":resolvedPath.length>0?resolvedPath:"."},normalize:function(path){if(assertPath(path),path.length===0)return".";var isAbsolute=path.charCodeAt(0)===47,trailingSeparator=path.charCodeAt(path.length-1)===47;return path=normalizeStringPosix(path,!isAbsolute),path.length===0&&!isAbsolute&&(path="."),path.length>0&&trailingSeparator&&(path+="/"),isAbsolute?"/"+path:path},isAbsolute:function(path){return assertPath(path),path.length>0&&path.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var joined,i=0;i<arguments.length;++i){var arg=arguments[i];assertPath(arg),arg.length>0&&(joined===void 0?joined=arg:joined+="/"+arg)}return joined===void 0?".":posix.normalize(joined)},relative:function(from2,to){if(assertPath(from2),assertPath(to),from2===to||(from2=posix.resolve(from2),to=posix.resolve(to),from2===to))return"";for(var fromStart=1;fromStart<from2.length&&from2.charCodeAt(fromStart)===47;++fromStart);for(var fromEnd=from2.length,fromLen=fromEnd-fromStart,toStart=1;toStart<to.length&&to.charCodeAt(toStart)===47;++toStart);for(var toEnd=to.length,toLen=toEnd-toStart,length=fromLen<toLen?fromLen:toLen,lastCommonSep=-1,i=0;i<=length;++i){if(i===length){if(toLen>length){if(to.charCodeAt(toStart+i)===47)return to.slice(toStart+i+1);if(i===0)return to.slice(toStart+i)}else fromLen>length&&(from2.charCodeAt(fromStart+i)===47?lastCommonSep=i:i===0&&(lastCommonSep=0));break}var fromCode=from2.charCodeAt(fromStart+i),toCode=to.charCodeAt(toStart+i);if(fromCode!==toCode)break;fromCode===47&&(lastCommonSep=i)}var out="";for(i=fromStart+lastCommonSep+1;i<=fromEnd;++i)(i===fromEnd||from2.charCodeAt(i)===47)&&(out.length===0?out+="..":out+="/..");return out.length>0?out+to.slice(toStart+lastCommonSep):(toStart+=lastCommonSep,to.charCodeAt(toStart)===47&&++toStart,to.slice(toStart))},_makeLong:function(path){return path},dirname:function(path){if(assertPath(path),path.length===0)return".";for(var code=path.charCodeAt(0),hasRoot=code===47,end=-1,matchedSlash=!0,i=path.length-1;i>=1;--i)if(code=path.charCodeAt(i),code===47){if(!matchedSlash){end=i;break}}else matchedSlash=!1;return end===-1?hasRoot?"/":".":hasRoot&&end===1?"//":path.slice(0,end)},basename:function(path,ext){if(ext!==void 0&&typeof ext!="string")throw new TypeError('"ext" argument must be a string');assertPath(path);var start=0,end=-1,matchedSlash=!0,i;if(ext!==void 0&&ext.length>0&&ext.length<=path.length){if(ext.length===path.length&&ext===path)return"";var extIdx=ext.length-1,firstNonSlashEnd=-1;for(i=path.length-1;i>=0;--i){var code=path.charCodeAt(i);if(code===47){if(!matchedSlash){start=i+1;break}}else firstNonSlashEnd===-1&&(matchedSlash=!1,firstNonSlashEnd=i+1),extIdx>=0&&(code===ext.charCodeAt(extIdx)?--extIdx===-1&&(end=i):(extIdx=-1,end=firstNonSlashEnd))}return start===end?end=firstNonSlashEnd:end===-1&&(end=path.length),path.slice(start,end)}else{for(i=path.length-1;i>=0;--i)if(path.charCodeAt(i)===47){if(!matchedSlash){start=i+1;break}}else end===-1&&(matchedSlash=!1,end=i+1);return end===-1?"":path.slice(start,end)}},extname:function(path){assertPath(path);for(var startDot=-1,startPart=0,end=-1,matchedSlash=!0,preDotState=0,i=path.length-1;i>=0;--i){var code=path.charCodeAt(i);if(code===47){if(!matchedSlash){startPart=i+1;break}continue}end===-1&&(matchedSlash=!1,end=i+1),code===46?startDot===-1?startDot=i:preDotState!==1&&(preDotState=1):startDot!==-1&&(preDotState=-1)}return startDot===-1||end===-1||preDotState===0||preDotState===1&&startDot===end-1&&startDot===startPart+1?"":path.slice(startDot,end)},format:function(pathObject){if(pathObject===null||typeof pathObject!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof pathObject);return _format("/",pathObject)},parse:function(path){assertPath(path);var ret={root:"",dir:"",base:"",ext:"",name:""};if(path.length===0)return ret;var code=path.charCodeAt(0),isAbsolute=code===47,start;isAbsolute?(ret.root="/",start=1):start=0;for(var startDot=-1,startPart=0,end=-1,matchedSlash=!0,i=path.length-1,preDotState=0;i>=start;--i){if(code=path.charCodeAt(i),code===47){if(!matchedSlash){startPart=i+1;break}continue}end===-1&&(matchedSlash=!1,end=i+1),code===46?startDot===-1?startDot=i:preDotState!==1&&(preDotState=1):startDot!==-1&&(preDotState=-1)}return startDot===-1||end===-1||preDotState===0||preDotState===1&&startDot===end-1&&startDot===startPart+1?end!==-1&&(startPart===0&&isAbsolute?ret.base=ret.name=path.slice(1,end):ret.base=ret.name=path.slice(startPart,end)):(startPart===0&&isAbsolute?(ret.name=path.slice(1,startDot),ret.base=path.slice(1,end)):(ret.name=path.slice(startPart,startDot),ret.base=path.slice(startPart,end)),ret.ext=path.slice(startDot,end)),startPart>0?ret.dir=path.slice(0,startPart-1):isAbsolute&&(ret.dir="/"),ret},sep:"/",delimiter:":",win32:null,posix:null};posix.posix=posix;module.exports=posix}});var require_registry_management=__commonJS({"lib-browser-old/services/shared/shared/registry_management.js"(exports){"use strict";init_define_process_env();init_shim();var u=require_u2(),registry_management=exports;registry_management.add_to_registry=add_to_registry;function add_to_registry(name,Cls,registry){if(!registry[name]){var _instance$human;let instance=new Cls;if(instance.name=name,(_instance$human=instance.human)!=null||(instance.human=u.toTitleCase(name)),registry[name]=instance,!instance.authenticator)throw new u.UnexpectedError("Error building service "+name+": missing authenticator");typeof instance.authenticator!="function"&&(instance.authenticator._service=instance)}}}});var require_plugin_registry=__commonJS({"lib-browser-old/services/shared/plugin_registry.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_object_entries();var fs=require_fs(),path=require_path_browserify(),u=require_u2(),fakequire=__require,registry_management=require_registry_management(),appquery=require_appquery(),safe_require=require_safe_require(),plugin_registry=exports;safe_require.safe_register("./services/shared/plugin_registry",plugin_registry);plugin_registry.register_plugin=register_plugin;plugin_registry.get_hardcoded_plugin=get_hardcoded_plugin;plugin_registry.on_plugin_registration=on_plugin_registration;plugin_registry.get_app_hardcoded_plugins=get_app_hardcoded_plugins;var plugins={},registered_keys=[],service_listeners=[],defaults_for_plugins_settings={};plugin_registry.defaults_for_plugins_settings=defaults_for_plugins_settings;function on_plugin_registration(cb){for(let service of registered_keys)cb(service,plugins[service]);service_listeners.push(cb)}function register_plugin(plugin_name,raw_data){if(u.on_server()){let server_side_path="../server/"+plugin_name+"_server",service_path=path.join(__dirname,"".concat(server_side_path,".js"));fs.existsSync(service_path)&&u.extend(raw_data.cls.prototype,fakequire("./"+server_side_path))}registry_management.add_to_registry(plugin_name,raw_data.cls,plugins),registered_keys.push(plugin_name);let instance=plugins[plugin_name];for(let key in instance.keys){let data=instance.keys[key];data.default&&(defaults_for_plugins_settings[plugin_name+"_"+key]=data.default)}for(let cb of service_listeners)cb(plugin_name,instance)}function get_hardcoded_plugin(plugin_id){if(plugin_id!=null&&plugins[plugin_id]!=null)return plugins[plugin_id]}function get_app_hardcoded_plugins(){return Object.entries(appquery.get_plugin_versions()).filter(_ref=>{let[_,version]=_ref;return version===!0}).map(_ref2=>{let[plugin_id]=_ref2;return get_hardcoded_plugin(plugin_id)})}}});var require_internal_service_registry=__commonJS({"lib-browser-old/services/shared/internal_service_registry.js"(exports){"use strict";init_define_process_env();init_shim();var registry_management=require_registry_management(),safe_require=require_safe_require(),internal_service_registry=exports;safe_require.safe_register("./services/shared/internal_service_registry",internal_service_registry);internal_service_registry.services={};internal_service_registry.add_service=function(name,Cls){registry_management.add_to_registry(name,Cls,internal_service_registry.services)};internal_service_registry.get_service=function(service_id){if(service_id!=null&&internal_service_registry.services[service_id]!=null)return internal_service_registry.services[service_id]}}});var require_plugin_getter=__commonJS({"lib-browser-old/services/shared/plugin_getter.js"(exports){"use strict";init_define_process_env();init_shim();require_es_error_cause();require_es_object_entries();require_es_array_iterator();require_web_dom_collections_iterator();var u=require_u2(),appquery=require_appquery(),service_type_parser=require_service_type_parser(),safe_require=require_safe_require(),plugin_registry=require_plugin_registry(),internal_service_registry=require_internal_service_registry(),logger=require_logger(),plugin_getter=exports;plugin_getter.initialize=initialize;plugin_getter.get_plugin=get_plugin;plugin_getter.get_app_plugins=get_app_plugins;safe_require.safe_register("./services/shared/plugin_getter",plugin_getter);var _pluginservice_getter_fn;function initialize(pluginservice_getter_fn){if(_pluginservice_getter_fn==null)_pluginservice_getter_fn=pluginservice_getter_fn;else throw new Error("plugin_getter: pluginservice_getter_fn already initialized")}function assert_initialized(method_name){if(_pluginservice_getter_fn==null)throw new Error("plugin_getter.".concat(method_name," called before initialization"))}function get_app_plugins(){return assert_initialized("get_app_plugins"),Object.entries(appquery.get_plugin_versions()).map(_ref=>{let[plugin_id,version]=_ref;return get_plugin(plugin_id,version)})}function get_plugin(plugin_id,version){if(assert_initialized("get_plugin"),plugin_id==null)return;let internal_service=internal_service_registry.get_service(plugin_id);if(internal_service!=null)return logger.warn("plugin_getter: provided name is an internal service, not a plugin",{service_name:plugin_id,version}),internal_service;let hardcoded_plugin=plugin_registry.get_hardcoded_plugin(plugin_id,version);if(hardcoded_plugin!=null)return hardcoded_plugin;let actual_id=plugin_id;if(plugin_id.indexOf("_current")!==-1&&(plugin_id=service_type_parser.get_plugin_id(plugin_id),version="current"),!!u.is_UUID(plugin_id)&&!(!version&&(version=appquery.get_plugin_version(plugin_id),!version)))return _get_service_plugin(plugin_id,actual_id,version)}var _get_service_plugin=u.autorun_cache((plugin_id,actual_id,version)=>_pluginservice_getter_fn(plugin_id,actual_id,version))}});var require_nprogress=__commonJS({"vendor/jquery_plugins/nprogress.js"(exports,module){"use strict";init_define_process_env();init_shim();(function(root,factory){typeof define=="function"&&define.amd?define(factory):typeof exports=="object"?module.exports=factory():root.NProgress=factory()})(exports,function(){var NProgress={};NProgress.version="0.1.6";var Settings=NProgress.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};NProgress.configure=function(options){var key,value;for(key in options)value=options[key],value!==void 0&&options.hasOwnProperty(key)&&(Settings[key]=value);return this},NProgress.status=null,NProgress.set=function(n){var started=NProgress.isStarted();n=clamp(n,Settings.minimum,1),NProgress.status=n===1?null:n;var progress=NProgress.render(!started),bar=progress.querySelector(Settings.barSelector),speed=Settings.speed,ease=Settings.easing;return progress.offsetWidth,queue(function(next){Settings.positionUsing===""&&(Settings.positionUsing=NProgress.getPositioningCSS()),css2(bar,barPositionCSS(n,speed,ease)),n===1?(css2(progress,{transition:"none",opacity:1}),progress.offsetWidth,setTimeout(function(){css2(progress,{transition:"all "+speed+"ms linear",opacity:0}),setTimeout(function(){NProgress.remove(),next()},speed)},speed)):setTimeout(next,speed)}),this},NProgress.isStarted=function(){return typeof NProgress.status=="number"},NProgress.start=function(){NProgress.status||NProgress.set(0);var work=function(){setTimeout(function(){NProgress.status&&(NProgress.trickle(),work())},Settings.trickleSpeed)};return Settings.trickle&&work(),this},NProgress.done=function(force){return!force&&!NProgress.status?this:NProgress.inc(.3+.5*Math.random()).set(1)},NProgress.inc=function(amount){var n=NProgress.status;return n?(typeof amount!="number"&&(amount=(1-n)*clamp(Math.random()*n,.1,.95)),n=clamp(n+amount,0,.994),NProgress.set(n)):NProgress.start()},NProgress.trickle=function(){return NProgress.inc(Math.random()*Settings.trickleRate)},function(){var initial=0,current=0;NProgress.promise=function($promise){return!$promise||$promise.state()=="resolved"?this:(current==0&&NProgress.start(),initial++,current++,$promise.always(function(){current--,current==0?(initial=0,NProgress.done()):NProgress.set((initial-current)/initial)}),this)}}(),NProgress.render=function(fromStart){if(NProgress.isRendered())return document.getElementById("nprogress");addClass(document.documentElement,"nprogress-busy");var progress=document.createElement("div");progress.id="nprogress",progress.innerHTML=Settings.template;var bar=progress.querySelector(Settings.barSelector),perc=fromStart?"-100":toBarPerc(NProgress.status||0),parent=document.querySelector(Settings.parent),spinner;return css2(bar,{transition:"all 0 linear",transform:"translate3d("+perc+"%,0,0)"}),Settings.showSpinner||(spinner=progress.querySelector(Settings.spinnerSelector),spinner&&removeElement(spinner)),parent!=document.body&&addClass(parent,"nprogress-custom-parent"),parent.appendChild(progress),progress},NProgress.remove=function(){removeClass(document.documentElement,"nprogress-busy"),removeClass(document.querySelector(Settings.parent),"nprogress-custom-parent");var progress=document.getElementById("nprogress");progress&&removeElement(progress)},NProgress.isRendered=function(){return!!document.getElementById("nprogress")},NProgress.getPositioningCSS=function(){var bodyStyle=document.body.style,vendorPrefix="WebkitTransform"in bodyStyle?"Webkit":"MozTransform"in bodyStyle?"Moz":"msTransform"in bodyStyle?"ms":"OTransform"in bodyStyle?"O":"";return vendorPrefix+"Perspective"in bodyStyle?"translate3d":vendorPrefix+"Transform"in bodyStyle?"translate":"margin"};function clamp(n,min,max){return n<min?min:n>max?max:n}function toBarPerc(n){return(-1+n)*100}function barPositionCSS(n,speed,ease){var barCSS;return Settings.positionUsing==="translate3d"?barCSS={transform:"translate3d("+toBarPerc(n)+"%,0,0)"}:Settings.positionUsing==="translate"?barCSS={transform:"translate("+toBarPerc(n)+"%,0)"}:barCSS={"margin-left":toBarPerc(n)+"%"},barCSS.transition="all "+speed+"ms "+ease,barCSS}var queue=function(){var pending=[];function next(){var fn=pending.shift();fn&&fn(next)}return function(fn){pending.push(fn),pending.length==1&&next()}}(),css2=function(){var cssPrefixes=["Webkit","O","Moz","ms"],cssProps={};function camelCase(string){return string.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(match,letter){return letter.toUpperCase()})}function getVendorProp(name){var style2=document.body.style;if(name in style2)return name;for(var i=cssPrefixes.length,capName=name.charAt(0).toUpperCase()+name.slice(1),vendorName;i--;)if(vendorName=cssPrefixes[i]+capName,vendorName in style2)return vendorName;return name}function getStyleProp(name){return name=camelCase(name),cssProps[name]||(cssProps[name]=getVendorProp(name))}function applyCss(element,prop,value){prop=getStyleProp(prop),element.style[prop]=value}return function(element,properties){var args=arguments,prop,value;if(args.length==2)for(prop in properties)value=properties[prop],value!==void 0&&properties.hasOwnProperty(prop)&&applyCss(element,prop,value);else applyCss(element,args[1],args[2])}}();function hasClass(element,name){var list=typeof element=="string"?element:classList2(element);return list.indexOf(" "+name+" ")>=0}function addClass(element,name){var oldList=classList2(element),newList=oldList+name;hasClass(oldList,name)||(element.className=newList.substring(1))}function removeClass(element,name){var oldList=classList2(element),newList;hasClass(element,name)&&(newList=oldList.replace(" "+name+" "," "),element.className=newList.substring(1,newList.length-1))}function classList2(element){return(" "+(element.className||"")+" ").replace(/\s+/gi," ")}function removeElement(element){element&&element.parentNode&&element.parentNode.removeChild(element)}return NProgress})}});var require_spin_min=__commonJS({"vendor/jquery_plugins/spin.min.js"(exports,module){"use strict";init_define_process_env();init_shim();(function(t,e){typeof exports=="object"?module.exports=e():typeof define=="function"&&define.amd?define(e):t.Spinner=e()})(exports,function(){"use strict";var t=["webkit","Moz","ms","O"],e={},i;function o(t2,e2){var i2=document.createElement(t2||"div"),o2;for(o2 in e2)i2[o2]=e2[o2];return i2}function n(t2){for(var e2=1,i2=arguments.length;e2<i2;e2++)t2.appendChild(arguments[e2]);return t2}var r=function(){var t2=o("style",{type:"text/css"});return n(document.getElementsByTagName("head")[0],t2),t2.sheet||t2.styleSheet}();function s(t2,o2,n2,s2){var a2=["opacity",o2,~~(t2*100),n2,s2].join("-"),f2=.01+n2/s2*100,l2=Math.max(1-(1-t2)/o2*(100-f2),t2),d2=i.substring(0,i.indexOf("Animation")).toLowerCase(),u2=d2&&"-"+d2+"-"||"";return e[a2]||(r.insertRule("@"+u2+"keyframes "+a2+"{0%{opacity:"+l2+"}"+f2+"%{opacity:"+t2+"}"+(f2+.01)+"%{opacity:1}"+(f2+o2)%100+"%{opacity:"+t2+"}100%{opacity:"+l2+"}}",r.cssRules.length),e[a2]=1),a2}function a(e2,i2){var o2=e2.style,n2,r2;if(o2[i2]!==void 0)return i2;for(i2=i2.charAt(0).toUpperCase()+i2.slice(1),r2=0;r2<t.length;r2++)if(n2=t[r2]+i2,o2[n2]!==void 0)return n2}function f(t2,e2){for(var i2 in e2)t2.style[a(t2,i2)||i2]=e2[i2];return t2}function l(t2){for(var e2=1;e2<arguments.length;e2++){var i2=arguments[e2];for(var o2 in i2)t2[o2]===void 0&&(t2[o2]=i2[o2])}return t2}function d(t2){for(var e2={x:t2.offsetLeft,y:t2.offsetTop};t2=t2.offsetParent;)e2.x+=t2.offsetLeft,e2.y+=t2.offsetTop;return e2}var u={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:1/4,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};function p(t2){if(typeof this>"u")return new p(t2);this.opts=l(t2||{},p.defaults,u)}p.defaults={},l(p.prototype,{spin:function(t2){this.stop();var e2=this,n2=e2.opts,r2=e2.el=f(o(0,{className:n2.className}),{position:n2.position,width:0,zIndex:n2.zIndex}),s2=n2.radius+n2.length+n2.width,a2,l2;if(t2&&(t2.insertBefore(r2,t2.firstChild||null),l2=d(t2),a2=d(r2),f(r2,{left:(n2.left=="auto"?l2.x-a2.x+(t2.offsetWidth>>1):parseInt(n2.left,10)+s2)+"px",top:(n2.top=="auto"?l2.y-a2.y+(t2.offsetHeight>>1):parseInt(n2.top,10)+s2)+"px"})),r2.setAttribute("role","progressbar"),e2.lines(r2,e2.opts),!i){var u2=0,p2=(n2.lines-1)*(1-n2.direction)/2,c2,h2=n2.fps,m=h2/n2.speed,y=(1-n2.opacity)/(m*n2.trail/100),g=m/n2.lines;(function v(){u2++;for(var t3=0;t3<n2.lines;t3++)c2=Math.max(1-(u2+(n2.lines-t3)*g)%m*y,n2.opacity),e2.opacity(r2,t3*n2.direction+p2,c2,n2);e2.timeout=e2.el&&setTimeout(v,~~(1e3/h2))})()}return e2},stop:function(){var t2=this.el;return t2&&(clearTimeout(this.timeout),t2.parentNode&&t2.parentNode.removeChild(t2),this.el=void 0),this},lines:function(t2,e2){var r2=0,a2=(e2.lines-1)*(1-e2.direction)/2,l2;function d2(t3,i2){return f(o(),{position:"absolute",width:e2.length+e2.width+"px",height:e2.width+"px",background:t3,boxShadow:i2,transformOrigin:"left",transform:"rotate("+~~(360/e2.lines*r2+e2.rotate)+"deg) translate("+e2.radius+"px,0)",borderRadius:(e2.corners*e2.width>>1)+"px"})}for(;r2<e2.lines;r2++)l2=f(o(),{position:"absolute",top:1+~(e2.width/2)+"px",transform:e2.hwaccel?"translate3d(0,0,0)":"",opacity:e2.opacity,animation:i&&s(e2.opacity,e2.trail,a2+r2*e2.direction,e2.lines)+" "+1/e2.speed+"s linear infinite"}),e2.shadow&&n(l2,f(d2("#000","0 0 4px #000"),{top:"2px"})),n(t2,n(l2,d2(e2.color,"0 0 1px rgba(0,0,0,.1)")));return t2},opacity:function(t2,e2,i2){e2<t2.childNodes.length&&(t2.childNodes[e2].style.opacity=i2)}});function c(){function t2(t3,e2){return o("<"+t3+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',e2)}r.addRule(".spin-vml","behavior:url(#default#VML)"),p.prototype.lines=function(e2,i2){var o2=i2.length+i2.width,r2=2*o2;function s2(){return f(t2("group",{coordsize:r2+" "+r2,coordorigin:-o2+" "+-o2}),{width:r2,height:r2})}var a2=-(i2.width+i2.length)*2+"px",l2=f(s2(),{position:"absolute",top:a2,left:a2}),d2;function u2(e3,r3,a3){n(l2,n(f(s2(),{rotation:360/i2.lines*e3+"deg",left:~~r3}),n(f(t2("roundrect",{arcsize:i2.corners}),{width:o2,height:i2.width,left:i2.radius,top:-i2.width>>1,filter:a3}),t2("fill",{color:i2.color,opacity:i2.opacity}),t2("stroke",{opacity:0}))))}if(i2.shadow)for(d2=1;d2<=i2.lines;d2++)u2(d2,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(d2=1;d2<=i2.lines;d2++)u2(d2);return n(e2,l2)},p.prototype.opacity=function(t3,e2,i2,o2){var n2=t3.firstChild;o2=o2.shadow&&o2.lines||0,n2&&e2+o2<n2.childNodes.length&&(n2=n2.childNodes[e2+o2],n2=n2&&n2.firstChild,n2=n2&&n2.firstChild,n2&&(n2.opacity=i2))}}var h=f(o("group"),{behavior:"url(#default#VML)"});return!a(h,"transform")&&h.adj?c():i=a(h,"animation"),p})}});var require_status_bar=__commonJS({"lib-browser-old/core/status_bar.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_includes();var u=require_u2(),safe_require=require_safe_require(),appquery=require_appquery(),status_bar=exports;safe_require.safe_register("./core/status_bar",status_bar);var _number_of_shows=0,NProgress=require_nprogress();NProgress.configure({showSpinner:!1});var bar_color=null;status_bar.no_status_bar=u.MakeSwitch(null,"no_status_bar");status_bar.no_status_bar.turn_on();status_bar.show_progress_line=function(waiting_on){if(u.on_react_native())return()=>{};if(waiting_on==null)throw new u.UnexpectedError("must pass in what we are waiting on (a key or promise preferably)");if(bar_color==null){var _appquery$app$get_pub;bar_color=(_appquery$app$get_pub=appquery.app().get_public_setting("status_bar_color"))!=null?_appquery$app$get_pub:"#29d",NProgress.configure({showSpinner:!1,template:'<div class="bar" role="bar" style="background:'.concat(bar_color,';">\n    <div class="peg" style="box-shadow:0 0 10px ').concat(bar_color,", 0 0 5px ").concat(bar_color,';">\n    </div>\n</div>')})}_number_of_shows===0&&(status_bar.no_status_bar.turn_off(),setTimeout(()=>{_number_of_shows>0&&NProgress.start()},200)),_number_of_shows++;let status_timeout=setTimeout(()=>console.log("warning: status bar still waiting on "+waiting_on),10*1e3),_finished=!1,progressed=!1;return progress=>{if(!_finished)if(progress==null){if(_finished=!0,_number_of_shows--,clearTimeout(status_timeout),_number_of_shows===0)return NProgress.done(),setTimeout(()=>status_bar.no_status_bar.turn_on(),400);progressed&&NProgress.set(.5)}else progressed=!0,NProgress.set(progress)}};var bar_id="#nprogress";status_bar.hide_run_mode=()=>$(bar_id).hide();status_bar.show_run_mode=()=>$(bar_id).show();status_bar.bar_visible=()=>$(bar_id).is(":visible");status_bar.force_done=()=>NProgress.done();var elements_with_spin=[];status_bar.spinner_key=u.MakeKeyList();var Spinner=null,spinner_color=null;status_bar.spinner=function(instance){var _Spinner,_spinner_color,_appquery$app$get_pub2;let div=instance.get_canvas();if(!div[0])return()=>{};let my_key=status_bar.spinner_key.make(null,"spinner_key"),id=instance.element.id();if(elements_with_spin.includes(id))return()=>{};elements_with_spin.push(id),(_Spinner=Spinner)!=null||(Spinner=require_spin_min()),(_spinner_color=spinner_color)!=null||(spinner_color=(_appquery$app$get_pub2=appquery.app().get_public_setting("spinner_color"))!=null?_appquery$app$get_pub2:"black");let animation=null,_should_show_spinner=!0,timeout=setTimeout(()=>{if(_should_show_spinner){var _instance$element$roo;let opts={lines:13,length:10,width:2,radius:10,corners:1,rotate:0,direction:1,color:spinner_color,speed:1,trail:70,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:Math.min(Math.max(instance.element.get_height(),div.height())/2-10,100),left:div.width()/2-25};((_instance$element$roo=instance.element.root())==null?void 0:_instance$element$roo.get_responsive_version())>0&&(opts.top=Math.min(Math.max(instance.element.get_height(),div.height())/2-10,50)),animation=new Spinner(opts).spin(div[0])}},700);return()=>{var _animation;clearTimeout(timeout),_should_show_spinner=!1,(_animation=animation)==null||_animation.stop(),u.array_remove(elements_with_spin,id),my_key.turn()}}}});var require_runtime_json=__commonJS({"lib-browser-old/lang/app_json/runtime_json.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;require_es_regexp_to_string();require_es_array_iterator();require_web_dom_collections_iterator();require_web_dom_collections_for_each();require_es_object_entries();require_es_array_flat_map();require_es_array_unscopables_flat_map();require_es_array_includes();var u=_interopRequireWildcard(require_u2()),_json_base=require_json_base(),nodes_registry=_interopRequireWildcard(require_registry()),_errors=require_errors();function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function force_read(cache,key){let casted=cache;return casted==null?void 0:casted[key]}var RuntimeJSON=class _RuntimeJSON extends _json_base.JSONBase{constructor(_cache,_parent2,__name,_root2,_appname,_app_version){if(super(),this.cache=void 0,this._parent=null,this.__name=void 0,this._root=void 0,this._appname=void 0,this._app_version=void 0,this._unique_id=void 0,this._children={},this._child_names_cache=void 0,this._smart_cache=void 0,this.__path=void 0,this._indexers=void 0,this._has_indexers=void 0,this.cache=_cache,this._parent=_parent2,this.__name=String(__name),this._appname=_appname,this._app_version=_app_version,this.is_root())this._root=this,this.__path="",this.__name="";else if(this.is_leaf())this._root=_root2,this.__path=this._parent.__path?this._parent.__path+"."+this.__name:this.__name;else throw new _errors.UnexpectedError("Must be root or leaf!");this._unique_id=u.LUID()}toString(){var _this$_appname,_this$__path;return"RuntimeJSON<".concat((_this$_appname=this._appname)!=null?_this$_appname:"","_").concat(this.app_version().toString(),"_").concat((_this$__path=this.__path)!=null?_this$__path:"",">")}toUniqueString(){var _this$_unique_id;return(_this$_unique_id=this._unique_id)!=null?_this$_unique_id:""}path_cache(){var _this$_unique_id2;return(_this$_unique_id2=this._unique_id)!=null?_this$_unique_id2:""}id(){var _cache$id;let cache=this.cache;return(_cache$id=cache==null?void 0:cache.id)!=null?_cache$id:null}_name(){var _this$__name;return(_this$__name=this.__name)!=null?_this$__name:""}to_id(){return this}to_path(){return this}parent(){return this._parent}_path(){return this.__path}get(){return typeof this.cache=="object"?null:this.cache}empty(){return this.cache==null}appname(){return this._root._appname}app_version(){return this._root._app_version}exists(){return this.cache!=null}ensure_exists(){return this.exists()?this:null}_child(_name){var _this$_children,_this$_children$s_nam;let s_name=String(_name);return(_this$_children$s_nam=(_this$_children=this._children)[s_name])!=null||(_this$_children[s_name]=new _RuntimeJSON(force_read(this.cache,s_name),this,s_name,this._root,this._appname,this._app_version)),this._children[s_name]}_gchild(_n1,_n2){return this._child(_n1)._child(_n2)}_raw_child(_name){return force_read(this.cache,_name)}_raw_gchild(_n1,_n2){var _force_read;return force_read((_force_read=force_read(this.cache,_n1))!=null?_force_read:void 0,_n2)}_child_names(){return this._child_names_cache||this._rebuild_child_names(),this._child_names_cache}_rebuild_child_names(){this._child_names_cache=this._raw_to_child_names(this.cache)}pre_cache(path,shrunk){}raw_index(){var _this$_root$cache$_in,_this$_root,_this$_root$cache;let index=(_this$_root$cache$_in=(_this$_root=this._root)==null||(_this$_root$cache=_this$_root.cache)==null?void 0:_this$_root$cache._index)!=null?_this$_root$cache$_in:null;for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];for(let arg of args){var _index;index=(_index=index)==null?void 0:_index[String(arg)]}return index}root(){return this._root}application(){return nodes_registry.create("FakeApplication",this._root)}_raw(){return this.cache}raw_type(){return typeof this.cache}register_indexer(name,indexer){var _this$_indexers,_root$_has_indexers;(_this$_indexers=this._indexers)!=null||(this._indexers={}),this._indexers[name]=indexer;let root=this._root;root!=null&&((_root$_has_indexers=root._has_indexers)!=null||(root._has_indexers={}),root._has_indexers[this._path()]=this)}smart_cache(name,creator,additional_arg){var _this$_smart_cache;let cache=(_this$_smart_cache=this._smart_cache)!=null?_this$_smart_cache:this._smart_cache={};return name in cache||(cache[name]=creator(this,additional_arg)),cache[name]}clear_smart_cache(){this._smart_cache=void 0,Object.entries(this._children).forEach(_ref=>{let[_name,child]=_ref;child.clear_smart_cache()})}reset_children(){this._children={},this._child_names_cache=void 0}ensure_loading(){}add_to_tree(tree){}is_leaf(){return this._parent!=null}is_root(){return this._parent==null}};exports.default=RuntimeJSON}});var require_virtual_json=__commonJS({"lib-browser-old/lang/app_json/virtual_json.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=VirtualJSON;var shrink=_interopRequireWildcard(require_shrink()),_runtime_json=_interopRequireDefault(require_runtime_json());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function VirtualJSON(json,data){return new _runtime_json.default(shrink.shrink_object(data),json.parent(),json._name(),json.root(),json.appname(),json.app_version())}}});var require_app_json2=__commonJS({"lib-browser-old/lang/app_json/index.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});Object.defineProperty(exports,"EmptyJSON",{enumerable:!0,get:function(){return _json_base.EmptyJSON}});Object.defineProperty(exports,"JSONBase",{enumerable:!0,get:function(){return _json_base.JSONBase}});Object.defineProperty(exports,"RuntimeJSON",{enumerable:!0,get:function(){return _runtime_json.default}});Object.defineProperty(exports,"VirtualJSON",{enumerable:!0,get:function(){return _virtual_json.default}});Object.defineProperty(exports,"escape_app_json_key",{enumerable:!0,get:function(){return _json_utils.escape_app_json_key}});Object.defineProperty(exports,"raw_to_child_names",{enumerable:!0,get:function(){return _json_utils.raw_to_child_names}});Object.defineProperty(exports,"unescape_app_json_key",{enumerable:!0,get:function(){return _json_utils.unescape_app_json_key}});var _json_base=require_json_base(),_runtime_json=_interopRequireDefault(require_runtime_json()),_virtual_json=_interopRequireDefault(require_virtual_json()),_json_utils=require_json_utils();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}}});var require_RAW=__commonJS({"lib-browser-old/lang/application/RAW.js"(){"use strict";init_define_process_env();init_shim();require_es_symbol_description();require_es_error_cause();require_es_object_get_own_property_descriptors();require_es_array_iterator();require_web_dom_collections_iterator();require_web_dom_collections_for_each();require_es_object_entries()}});var require_WorkflowObject=__commonJS({"lib-browser-old/lang/workflow/WorkflowObject.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();var u=require_u2(),RAW=require_RAW(),nodes=require_nodes(),appquery=require_appquery(),css2=require_css(),Lib=require_lib(),shrink=require_shrink(),workflow_utils=require_workflow_utils(),{S}=shrink,workflow_objects_types_with_name_properties={"stripe-CreateCoupon":!0};function can_have_legacy_name_property(type){return!workflow_objects_types_with_name_properties[type]}module.exports=class extends nodes.HasID{type(){return this.json.child("type").get()}id(){return this.json.id()}is_api(){var _this$root;return(_this$root=this.root())==null?void 0:_this$root.is_api()}hide_property_editor_tabs(){return!0}pretty_print(indent,outer){var _indent,_outer,_display;(_indent=indent)!=null||(indent=""),(_outer=outer)!=null||(outer=!0);let res=[];outer&&res.push("\n"),res.push(indent);let display;try{display=this.display()}catch(_discard){}(_display=display)!=null||(display=this.type()),res.push((this.is_action()?"Action ":"Event ")+this.id()+": "+display);for(let prop of this.properties())res.push("\n"+indent+"  "+prop.json.name()+":"),res.push("\n"+prop.pretty_print(indent+"    ",!1));let n=this.next();return n&&(res.push(indent+"\n\n          \u2193\n\n"),res.push(n.pretty_print(indent,!1))),outer&&res.push("\n"),res.join("")}get_name(){let name=this.json.child("name").get();return name||!can_have_legacy_name_property(this.type())?name:this.get_static_property("name")}find_my_expressions(filter){return nodes.from_raw_array(this.json,nodes.new_expression,workflow_utils.find_my_expressions(nodes.to_raw(this),filter))}root(){var _this$event,_this$event$owner,_this$event$owner$cal;return(_this$event=this.event())==null||(_this$event$owner=_this$event.owner)==null||(_this$event$owner$cal=_this$event$owner.call(_this$event))==null?void 0:_this$event$owner$cal.root()}my_element(){let element_id=this.element_id();return element_id?appquery.element(element_id):null}element_id(){return this.json.smart_cache("element_id",json=>json._raw_gchild(S.properties,S.element_id))}next_recommended_actions(){return[]}};module.exports.prototype.make_new=nodes.new_workflow_item}});var require_migrations=__commonJS({"lib-browser-old/lang/migrations.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();var core_consts=require_core(),b_object=require_b_object(),btypes=require_btypes(),migrations=exports,all_migrations={};migrations.register_migration=migration_data=>{var _migration_data$plugi,_all_migrations$_migr;(_all_migrations$_migr=all_migrations[_migration_data$plugi=migration_data.plugin_name])!=null||(all_migrations[_migration_data$plugi]=[]),all_migrations[migration_data.plugin_name].push(migration_data)};migrations.register_migration({plugin_name:"Action:TriggerCustomEvent",original_path:"properties.workflow_thing",new_path:"properties.arguments.0.arg_value",additional_info:()=>({param_id:core_consts.LEGACY_PARAM_ID})});migrations.register_migration({plugin_name:"Action:ScheduleCustom",original_path:"properties.workflow_thing",new_path:"properties.arguments.0.arg_value",additional_info:()=>({param_id:core_consts.LEGACY_PARAM_ID})});migrations.register_migration({plugin_name:"Action:TriggerCustomEventFromReusable",original_path:"properties.workflow_thing",new_path:"properties.arguments.0.arg_value",additional_info:()=>({param_id:core_consts.LEGACY_PARAM_ID})});migrations.register_migration({plugin_name:"Event:CustomEvent",original_path:"properties.custom_event_data_type",new_path:"properties.parameters.0.btype_id",additional_info:btype_id=>{let btype=btypes.get(btype_id),name=btype.is_missing()?"Thing":btype.display();return{param_id:core_consts.LEGACY_PARAM_ID,param_name:"Workflow's "+name}}});migrations.get_raw_migration=plugin_name=>{var _all_migrations$plugi;return(_all_migrations$plugi=all_migrations[plugin_name])!=null?_all_migrations$plugi:[]};migrations.get_migration_fn=plugin_name=>{let relevant_migrations=all_migrations[plugin_name];return relevant_migrations?json=>{let ran_migration=!1;for(let migration_info of relevant_migrations){let original_data=json.child_by_path(migration_info.original_path).raw();if(original_data!=null){ran_migration=!0;let split_new_pos=migration_info.new_path.split("."),new_name=split_new_pos[split_new_pos.length-1],new_parent=migration_info.new_path.substring(0,migration_info.new_path.length-new_name.length-1);json.child_by_path(new_parent).set(b_object.extend({[new_name]:original_data},migration_info.additional_info(original_data))),json.child_by_path(migration_info.original_path).set(null)}}return ran_migration}:()=>!1}}});var require_GenericEvent=__commonJS({"lib-browser-old/lang/workflow/GenericEvent.js"(exports,module){"use strict";init_define_process_env();init_shim();require_web_dom_collections_for_each();require_es_array_reduce();require_es_array_reverse();require_es_array_iterator();require_web_dom_collections_iterator();var _dec,_class;function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key]}),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce(function(desc2,decorator){return decorator(target,property,desc2)||desc2},desc),context&&desc.initializer!==void 0&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),desc.initializer===void 0&&(Object.defineProperty(target,property,desc),desc=null),desc}var u=require_u2(),nodes=require_nodes(),caching=require_caching(),Lib=require_lib(),elements_utils=require_elements_utils(),eval_consts=require_eval(),shrink=require_shrink(),migrations=require_migrations(),WorkflowObject=require_WorkflowObject(),workflow_utils=require_workflow_utils(),{S}=shrink;function missing_event(type){return{_fields:()=>[],field_names:{},display:()=>"[missing: "+type+"]",register(){}}}var GenericEvent=(_dec=caching.cached({type:caching.RUN_MODE}),_class=class extends WorkflowObject{constructor(json){var _this$E,_this$E$field_names;json=json.to_id(),super(json);let type=this.type();if(u.is_edit_mode()&&migrations.get_migration_fn(Lib().plugin_prefixes.event+type)(this.json),type&&(this.E=Lib().load_plugin(Lib().plugin_prefixes.event+type,!0)),(_this$E=this.E)!=null||(this.E=missing_event(type)),this.E.fields&&!this.E.field_names)throw new u.UnexpectedError("missing field_names for "+type);this._field_names=(_this$E$field_names=this.E.field_names)!=null?_this$E$field_names:{},typeof this._field_names=="object"&&(this._field_names.condition={prop_type:eval_consts.EVAL_TYPE.skip}),u.is_edit_mode()&&(this._field_names=u.extend(this._field_names,{event_color:{default:"grey",only_edit_mode:!0},wf_folder:{only_edit_mode:!0}})),elements_utils._use_issue_checker()&&this.app().can_run_issue_checker()&&json.register_indexer("issues_list",()=>{if(Lib().visual_edit.allow_issue_indexer_runs()){let me=nodes.new_workflow_item(this.json),id=me.id();if(!id)return;let issues=Lib().apptests.check_issues(me);return[["issues_list",id],u.json_stringify(issues)]}})}find_expressions(filter){return nodes.from_raw_array(this.json,nodes.new_expression,workflow_utils.event_find_expressions(nodes.to_raw(this),filter))}is_action(){return!1}is_api_event(){return!1}next(){let json=this.json.child("actions").child(0);return json.exists()?nodes.new_workflow_item(json):null}all_next(filter){let actions=this.json.child("actions").children().map(json=>nodes.new_workflow_item(json));return nodes.filter_array(filter,actions)}get_next_json(){return this.json.child("actions").child(this.json.children().length)}actions(filter){return this.all_next(filter)}event(){return this}context_element(){var _this$my_element;return(_this$my_element=this.my_element())!=null?_this$my_element:this.owner()}owner(){var _this$json$parent;let json=(_this$json$parent=this.json.parent())==null?void 0:_this$json$parent.parent();if(json)return nodes.new_element(json)}register(element_instance){return this.E.register(this,element_instance)}deferrable(){var _this$E$deferrable;return(_this$E$deferrable=this.E.deferrable)!=null?_this$E$deferrable:!1}field_names(){return this._field_names}condition(){return nodes.new_expression(this.json._child(S.properties)._child(S.condition),this)}},_applyDecoratedDescriptor(_class.prototype,"condition",[_dec],Object.getOwnPropertyDescriptor(_class.prototype,"condition"),_class.prototype),_class);module.exports=GenericEvent}});var require_Event=__commonJS({"lib-browser-old/lang/workflow/Event.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_includes();require_es_string_includes();require_es_array_iterator();require_web_dom_collections_iterator();var plugin_getter=require_plugin_getter(),GenericEvent=require_GenericEvent();module.exports=class extends GenericEvent{}}});var require_apiconnectorbase=__commonJS({"lib-browser-old/constants/apiconnectorbase.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.PUBLIC_ONLY=exports.PRIVATE_ONLY=exports.IGNORE_FIELD=void 0;var _safe_require=_interopRequireDefault(require_safe_require());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_safe_require.default.safe_register("./constants/apiconnectorbase",exports);var IGNORE_FIELD="_ignore";exports.IGNORE_FIELD=IGNORE_FIELD;var PUBLIC_ONLY="public_only";exports.PUBLIC_ONLY=PUBLIC_ONLY;var PRIVATE_ONLY="private_only";exports.PRIVATE_ONLY=PRIVATE_ONLY}});var require_postgres_constraints=__commonJS({"lib-browser-old/db/postgres_constraints.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_includes();require_es_string_includes();require_es_object_values();var hydrate2=require_hydrate(),b_location=require_b_location(),appquery=require_appquery(),b_fiber=require_b_fiber(),Lib=require_lib(),postgres_constraints=exports;function special_dehydrate(field,value){return(arguments.length>2&&arguments[2]!==void 0?arguments[2]:0)+1%10===0&&b_fiber.optional_pause(),field==="_id"?typeof(value==null?void 0:value._id)=="function"?value._id():Array.isArray(value)?value.map((item,index)=>special_dehydrate(field,item,index)):value:hydrate2.dehydrate_tree(value)}function to_array(val){var _val;return(_val=val)!=null||(val=[]),typeof val.all=="function"&&(val=val.all()),val.filter(item=>item!=null)}function make_sub(sub){return postgres_constraints[sub.constraint_type](sub.key,sub.value,sub.opts)}postgres_constraints.and=function(c,v,opts){return Array.isArray(opts)?{t:"A",a:opts.map(sub=>make_sub(sub))}:!1};postgres_constraints.and.no_field_required=!0;postgres_constraints.or=function(c,v,opts){return Array.isArray(opts)?{t:"O",a:opts.map(sub=>make_sub(sub))}:!1};postgres_constraints.or.no_field_required=!0;postgres_constraints.equals=function(c,v){return v==null?{t:"C",c,n:"is_empty"}:{t:"C",c,n:"equals",v:special_dehydrate(c,v)}};postgres_constraints.equals_both=(col1,col2)=>({t:"F",n:"equals_both",a:{col1,col2}});postgres_constraints.not_equals=function(c,v){return v==null?{t:"C",c,n:"is_not_empty"}:{t:"C",c,n:"not_equals",v:special_dehydrate(c,v)}};postgres_constraints["not true"]=c=>postgres_constraints.not_equals(c,!0);postgres_constraints["not equal"]=postgres_constraints.not_equals;postgres_constraints.not_equals_both=(col1,col2)=>({t:"F",n:"not_equals_both",a:{col1,col2}});postgres_constraints.is_empty=c=>({t:"C",c,n:"is_empty"});postgres_constraints.is_not_empty=c=>({t:"C",c,n:"is_not_empty"});postgres_constraints.empty=postgres_constraints.is_empty;postgres_constraints["not empty"]=postgres_constraints.is_not_empty;postgres_constraints.is_true=c=>({t:"C",c,n:"equals",v:!0});postgres_constraints.is_false=c=>({t:"C",c,n:"equals",v:!1});postgres_constraints.contains=function(c,v){return v==null?!1:{t:"C",c,n:"contains",v:special_dehydrate(c,v)}};postgres_constraints.contains_both=(col1,col2)=>({t:"F",n:"contains_both",a:{col1,col2}});postgres_constraints.in=function(c,v){return v=to_array(v),v.length===0?!1:{t:"C",c,n:"in",v:special_dehydrate(c,v)}};postgres_constraints.not_contains=function(c,v){return v==null?null:{t:"C",c,n:"not_contains",v:special_dehydrate(c,v)}};postgres_constraints["not contains"]=postgres_constraints.not_contains;postgres_constraints.not_contains_both=(col1,col2)=>({t:"F",n:"not_contains_both",a:{col1,col2}});postgres_constraints.not_in=function(c,v){return v=to_array(v),v.length===0?null:{t:"C",c,n:"not_in",v:special_dehydrate(c,v)}};postgres_constraints["not in"]=postgres_constraints.not_in;postgres_constraints["greater than"]=function(c,v){return v==null?null:{t:"C",c,n:"greater_than",v}};postgres_constraints.gte=function(c,v){return v==null?null:{t:"C",c,n:"gte",v}};postgres_constraints["less than"]=function(c,v){return v==null?null:{t:"C",c,n:"less_than",v}};postgres_constraints.lte=function(c,v){return v==null?null:{t:"C",c,n:"lte",v}};postgres_constraints["text contains string"]=function(c,v){return v==null?null:{t:"C",c,n:"contains_string",v}};postgres_constraints["not text contains string"]=function(c,v){return v==null?null:{t:"C",c,n:"not_contains_string",v}};postgres_constraints["text contains"]=function(c,v){return v==null?null:{t:"C",c,n:"contains",v:{language:get_postgres_language(),query:v}}};postgres_constraints["not text contains"]=function(c,v){return v==null?null:{t:"C",c,n:"not_contains",v:{language:get_postgres_language(),query:v}}};postgres_constraints.contains_all_fields=function(_,v,opts){let language;return v==null?null:(opts!=null&&opts.no_language?language="simple":language=get_postgres_language(),{t:"C",c:"_all",n:"contains",v:{language,query:v}})};postgres_constraints.contains_all_fields.no_field_required=!0;postgres_constraints.prefix_search=function(c,v,opts){let language;return v==null?null:(opts!=null&&opts.no_language?language="simple":language=get_postgres_language(),{t:"C",c,n:"prefix",v:{language,query:v}})};postgres_constraints.match_phrase_prefix=postgres_constraints.prefix_search;var GEO_UNITS={miles:1609.344,kms:1e3,km:1e3};postgres_constraints.geographic_search=function(c,v){if(v==null)return null;let{range,unit,origin_address}=v!=null?v:{};if(origin_address==null||!b_location.ensure_valid_location(origin_address))return null;let lon=origin_address.lng,{lat}=origin_address,meters=GEO_UNITS[unit!=null?unit:"miles"]*(range!=null?range:1);return{t:"C",c,n:"within",v:{lon,lat,meters}}};postgres_constraints.email_prefix_search=function(c,v){if(v==null||typeof v!="string")return!1;let main={t:"O",a:[]};main.a.push(postgres_constraints.prefix_search("authentication.email.email",v.toLowerCase()));for(let oauth_provider of appquery.get_oauth_providers())main.a.push(postgres_constraints.prefix_search("authentication."+oauth_provider+".email",v.toLowerCase()));return main};postgres_constraints.email_prefix_search.no_field_required=!0;postgres_constraints.email_equals=function(_,v){if(v==null||typeof v!="string")return!1;let main={t:"O",a:[]};main.a.push(postgres_constraints.equals("authentication.email.email",v.toLowerCase()));for(let oauth_provider of appquery.get_oauth_providers())main.a.push(postgres_constraints.equals("authentication."+oauth_provider+".email",v.toLowerCase()));return main};postgres_constraints.email_equals.no_field_required=!0;postgres_constraints.email_contains_string=function(_,v){if(v==null||typeof v!="string")return!1;let base_email_path="authentication.email.email",oauth_email_paths=appquery.get_oauth_providers().map(p=>"authentication.".concat(p,".email"));return{t:"O",a:[base_email_path,...oauth_email_paths].map(p=>postgres_constraints["text contains string"](p,v.toLowerCase()))}};postgres_constraints.email_contains_string.no_field_required=!0;function get_postgres_language(){let app_language=Lib().app_language();return postgres_languages_iso[app_language]?postgres_languages_iso[app_language]:postgres_languages.includes(app_language)?app_language:"simple"}var postgres_languages_iso={da_dk:"danish",nl_nl:"dutch",en_us:"english",fi_fi:"finnish",fr_fr:"french",de_de:"german",hu_hu:"hungarian",it_it:"italian",no_no:"norwegian",pt_br:"portuguese",ro_ro:"romanian",ru_ru:"russian",es_es:"spanish",sv_se:"swedish",tr_tr:"turkish"},postgres_languages=Object.values(postgres_languages_iso),on_point=["range_contains","range_greater_than","range_less_than"],additional_constraints=["range_contains","range_contained_by","range_overlaps","range_greater_than","range_less_than"];additional_constraints.forEach(item=>{function build_constraint(n){postgres_constraints[n]=function(c,v){return v==null?!1:{t:"C",c,n,v}},on_point.includes(n)&&(postgres_constraints[n+"_point"]=postgres_constraints[n])}build_constraint(item)})}});var require_list_utilities=__commonJS({"lib-browser-old/core/core_btypes/utilities/list_utilities.js"(exports){"use strict";init_define_process_env();init_shim();var db_values=require_db_values(),btypes=require_btypes(),btype_ids=require_btype_ids(),b_fiber=require_b_fiber(),Lib=require_lib(),list_utilities=exports;list_utilities.build_is_not_contained_by_list=btype_id=>({description:" is not in ",section:"Other Operators",ret_btype:"sys.bool",arg_btype:btype_ids.list_type(btype_id),fn:(prev,arg)=>{let btype=btypes.get(btype_id);return prev=btype.cast(prev),!list_utilities.process_list_arg(btype_id,arg).contains(prev,btype)}});list_utilities.process_list_arg=(btype_id,val)=>{var _list_utilities$cast_;return(_list_utilities$cast_=list_utilities.cast_to_list(btype_id,val))!=null?_list_utilities$cast_:list_utilities.array_to_static_list(btype_id,[])};list_utilities.cast_to_list=(btype_id,val)=>db_values.registry.is(val,db_values.LIST_WRAPPER)?btypes.get(val.get_item_btype_id()).matches(btype_id)?val:list_utilities.list_get_bubble_null():Array.isArray(val)?list_utilities.array_to_static_list(btype_id,val):list_utilities.list_get_bubble_null();list_utilities.array_to_static_list=(btype_id,array)=>{let btype_object=btypes.get(btype_id),casted_array=array.map((entry,idx)=>(idx%10===9&&b_fiber.optional_pause(),btype_object.cast(entry))).filter(x=>x!=null);return Lib().db_instance().static_list(btype_id,casted_array)};list_utilities.list_get_bubble_null=()=>null}});var require_external_values=__commonJS({"lib-browser-old/constants/external_values.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.EMPTY_RAW_STRUCT_ID_ENDING=void 0;var EMPTY_RAW_STRUCT_ID_ENDING="__bubble_originally_empty";exports.EMPTY_RAW_STRUCT_ID_ENDING=EMPTY_RAW_STRUCT_ID_ENDING}});var require_baseMap=__commonJS({"node_modules/lodash/_baseMap.js"(exports,module){init_define_process_env();init_shim();var baseEach=require_baseEach(),isArrayLike=require_isArrayLike();function baseMap(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];return baseEach(collection,function(value,key,collection2){result[++index]=iteratee(value,key,collection2)}),result}module.exports=baseMap}});var require_map2=__commonJS({"node_modules/lodash/map.js"(exports,module){init_define_process_env();init_shim();var arrayMap=require_arrayMap(),baseIteratee=require_baseIteratee(),baseMap=require_baseMap(),isArray=require_isArray();function map(collection,iteratee){var func=isArray(collection)?arrayMap:baseMap;return func(collection,baseIteratee(iteratee,3))}module.exports=map}});var require_compact=__commonJS({"node_modules/lodash/compact.js"(exports,module){init_define_process_env();init_shim();function compact(array){for(var index=-1,length=array==null?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];value&&(result[resIndex++]=value)}return result}module.exports=compact}});var require_builtins=__commonJS({"lib-browser-old/lang/application/builtins.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_flat_map();require_es_array_unscopables_flat_map();var u=require_u2(),decaf=require_decaf(),appquery=require_appquery(),btypes=require_btypes(),builtins=module.exports;builtins.create_fake_field=function(_name,data){let _deleted,_display,_value;return typeof data=="object"?(_value=data.value,_deleted=data.deleted,_display=data.display):(_value=data,_deleted=!1,_display=_name),{name:()=>_name,raw:()=>!0,value:()=>_value,exists:()=>!0,display:()=>_display,deleted:()=>_deleted}};function create_fake_type(_name2,_fields,_privacy_roles){return{exists:()=>!0,name:()=>_name2,field:k=>builtins.create_fake_field(k,_fields[k]),fields:()=>decaf.object_entries(_fields).filter(_ref=>{let[k,value]=_ref;return typeof value!="object"||value.display}).map(_ref2=>{let[k,value]=_ref2;return builtins.create_fake_field(k,value)}),no_rename:!0,display:()=>_name2,privacy_roles:()=>decaf.object_entries(_privacy_roles).map(_ref3=>{let[name,data]=_ref3;return fake_privacy_role(name,data)}),privacy_role(name){if(_privacy_roles!=null&&_privacy_roles[name])return fake_privacy_role(name,_privacy_roles[name])}}}function fake_privacy_role(name,data){return{get_permissions:()=>data.permissions,condition:()=>({json:()=>({raw:data.condition}),get_eval_value:()=>btypes.get("sys.bool")})}}var both_fields={run_id:{value:"sys.uid"},charge_user_id:{value:"sys.uid"},status:{value:"sys.uid"}},subscription_order_fields={plan_id:{value:"sys.uid",display:"Plan id"},done:{value:"boolean",display:"Subscription was successful"},coupon_id:{value:"sys.uid",display:"Coupon id"},quantity:{value:"number",display:"Quantity"},trial_end:{value:"date",display:"Trial End"},tax_percent:{value:"number",display:"Tax percent"},user_id:{value:"sys.uid"},subscribe_id:{value:"sys.uid"},stringified_properties:{value:"sys.uid"}},order_fields={amount:{value:"number",display:"Amount"},amount_received:{value:"number",display:"Amount Received (including coupons)"},app_fee:{value:"number",display:"Application Fee"},currency:{value:"sys.uid",display:"Currency"},StripeChargeID:{value:"sys.uid",display:"Charge Id"},captured:{value:"boolean",display:"Captured"},payment_intent_id:{value:"text",display:"Payment intent id"},description:{value:"text",display:"Order description"},charged_user_email:{value:"sys.uid",display:"Email of charged user"},product_name:{value:"text",display:"Product name"},image:{value:"text",display:"Product image"},statement_descriptor:{value:"text",display:"Statement descriptor"},charge_user_action_id:{value:"sys.uid"},charged_user_id:{value:"sys.uid"},charged_user:{value:"sys.uid"},payee_user:{value:"sys.uid"},authorize_only:{value:"boolean"},allow_promotion_codes:{value:"boolean"}},fake_order=create_fake_type("Order",u.extend({},both_fields,order_fields)),fake_subscription_order=create_fake_type("SubscriptionOrder",u.extend({},both_fields,subscription_order_fields)),password_reset_fields={used:"boolean",user_id:"custom",token_text:"text",email:"text"},password_reset_privacy={everyone:{permissions:{}},no_one:{condition:!1,permissions:{}}},magic_link_fields={used:"boolean",user_id:"custom",email:"text",validity_ms:"number",spage_thing:"text",fpage_thing:"text",succ_page_name:"text",fail_page_name:"text",s_additional_parameters:"text",f_additional_parameters:"text",success_page:"text",failure_page:"text"},fake_pw_reset=create_fake_type("password_reset",password_reset_fields,password_reset_privacy),fake_magic_link=create_fake_type("magic_link",magic_link_fields,password_reset_privacy),fake_confirmation_email=create_fake_type("confirmation email entry",password_reset_fields,password_reset_privacy);builtins.SPECIAL_TYPES=[fake_order,fake_subscription_order,fake_pw_reset,fake_confirmation_email,fake_magic_link];builtins.SPECIAL_ALL={"Modified Date":"date","Created Date":"date","Created By":"custom",Slug:"text",recurring_scheduling:"json"};var SPECIAL_USER={StripeCustomerID:"custom",stripeauthtoken:"not_indexed",email:"custom",user_signed_up:"boolean"},SPECIAL_META_USER={max_number_of_app:"long"};builtins.get_special_fields=function(custom_type,additional){let sets_to_include=[builtins.SPECIAL_ALL];return additional&&sets_to_include.push(additional),custom_type.name()==="user"&&(sets_to_include.push(SPECIAL_USER),appquery.app().plugin_special()==="meta"&&sets_to_include.push(SPECIAL_META_USER)),sets_to_include.flatMap(set=>decaf.object_entries(set).map(_ref4=>{let[field_name,value]=_ref4;return builtins.create_fake_field(field_name,value)}))}}});var require_plugin2=__commonJS({"lib-browser-old/strings/plugin.js"(exports){"use strict";init_define_process_env();init_shim();var plugin_strings=exports;plugin_strings.MISSING_PLUGIN="could not find plugin"}});var require_generic_actions_utilities=__commonJS({"lib-browser-old/core/core_actions/utilities/generic_actions_utilities.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_object_values();require_es_array_includes();require_es_string_includes();require_es_regexp_exec();require_es_string_search();var u=require_u2(),state_keys=require_state_keys(),btypes=require_btypes(),safe_require=require_safe_require(),plugin_strings=require_plugin2(),decaf=require_decaf(),Lib=require_lib(),appquery=require_appquery(),url=require_url(),generic_actions_utilities=exports;safe_require.safe_register("./core/core_actions/utilities/generic_actions_utilities",generic_actions_utilities);generic_actions_utilities.make_pre_process_properties=_ref=>{let{prop_name,thing_btype_id}=_ref;return function(properties){var _properties$prop_name;let thing_custom_type=btypes.get(thing_btype_id,{miss_okay:!0}).custom_type();(_properties$prop_name=properties[prop_name])!=null||(properties[prop_name]={});for(let entry of Object.values(properties[prop_name])){var _field_value,_field_value$inner,_field_value2;if(entry===void 0)continue;let field_value;if(thing_custom_type){let field_value_id=thing_custom_type.field(entry.key).value();field_value=btypes.get(field_value_id)}if(entry.action!=null&&!((_field_value=field_value)!=null&&(_field_value$inner=(_field_value2=_field_value).inner)!=null&&_field_value$inner.call(_field_value2))&&(entry.action=null),["add_list","remove_list","set_list"].includes(entry==null?void 0:entry.action)){var _entry$value$all,_entry$value,_entry$value$all2,_entry$value2;entry.value=((_entry$value$all=(_entry$value=entry.value)==null||(_entry$value$all2=(_entry$value2=_entry$value).all)==null?void 0:_entry$value$all2.call(_entry$value2))!=null?_entry$value$all:[]).map(a=>{var _a$all,_a$all2;return(_a$all=a==null||(_a$all2=a.all)==null?void 0:_a$all2.call(a))!=null?_a$all:a})}}return properties}};generic_actions_utilities.pre_process_properties=_ref2=>{let{properties,prop_name,thing_btype_id}=_ref2;return generic_actions_utilities.make_pre_process_properties({prop_name,thing_btype_id})(properties)};generic_actions_utilities.apply_default_fields=(prop_name,type,properties)=>{var _properties$prop_name2,_ref3;if(typeof type!="string")return properties;let custom_type;try{custom_type=btypes.get(type).custom_type()}catch(err){if(String(err==null?void 0:err.message).indexOf(plugin_strings.MISSING_PLUGIN)===-1)throw err;return properties}(_properties$prop_name2=properties[prop_name])!=null||(properties[prop_name]={});let setup_fields=Object.values(properties[prop_name]).filter(change=>change==null?void 0:change.key).map(change=>change==null?void 0:change.key),idx=Object.values(properties[prop_name]).length,default_fields=(_ref3=custom_type.default()||custom_type.get_default_fields())!=null?_ref3:{};for(let field of default_fields)!field.deleted&&!setup_fields.includes(field.name)&&field.default_val!=null&&(properties[prop_name][idx]={key:field.name,value:field.default_val},idx++);return properties};generic_actions_utilities.change_field_names=function(prop_type){return{changes:{prop_type}}};generic_actions_utilities.get_page=function(id){var _page;let page=appquery.page(id);return(_page=page)!=null||(page=appquery.get_page_by_name(id)),page};generic_actions_utilities.get_velocity_animation_duration=function(animation){var _$$Velocity,_ref4,_stock_effects$animat,_stock_effects$animat2,_custom_effects$anima;let stock_effects=(_$$Velocity=$.Velocity)==null?void 0:_$$Velocity.RegisterEffect.packagedEffects,custom_effects=u.custom_transitions;return(_ref4=(_stock_effects$animat=(_stock_effects$animat2=stock_effects[animation])==null?void 0:_stock_effects$animat2.defaultDuration)!=null?_stock_effects$animat:(_custom_effects$anima=custom_effects[animation])==null?void 0:_custom_effects$anima.defaultDuration)!=null?_ref4:300};generic_actions_utilities.get_data_to_refresh_for_change_action=function(_ref5){let{to_change,to_change_value_id,changes}=_ref5;if(to_change==null&&Lib().bubble_version()>=9)return{};let to_refresh={};for(let change of decaf.object_values(changes))if(change.key){let key_to_refresh=state_keys.Message({prev:to_change,message:change.key,prior_btype_id:to_change_value_id});change.action?to_refresh[key_to_refresh]=null:to_refresh[key_to_refresh]=change.value}return to_refresh[state_keys.Message({prev:to_change,message:"Modified Date",prior_btype_id:to_change_value_id})]=null,to_refresh};generic_actions_utilities.prepare_raw_thing_to_copy=function(raw){return raw?(delete raw["Created By"],delete raw["Created Date"],delete raw["Modified Date"],delete raw.Slug,raw):null};generic_actions_utilities.sub_node_key_to_value=function(main,key){var _main$get_message;return!main||!key?null:(_main$get_message=main.get_message(key))==null?void 0:_main$get_message.ret_btype()};generic_actions_utilities.APIEvent_param_prefix="_wf_param_";generic_actions_utilities.get_run_mode_api_event_name=function(event_id){if(event_id&&!Lib().is_edit_mode()){let api_index=Lib().derived("APIWFByName",!0).content();for(let name in api_index)if(api_index[name]===event_id)return name}};generic_actions_utilities.get_resume_url=function(context,action,server_workflow_terminated){let originalURL=url.parse(document.location.href,!0);delete originalURL.search;let resume_key=Lib().workflow.make_resume_key(context,action,server_workflow_terminated);return resume_key&&(originalURL.query.resume=resume_key),url.format(originalURL)}}});var require_core_ds_db_ops_utilities=__commonJS({"lib-browser-old/core/core_datasources/utilities/core_ds_db_ops_utilities.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports._get_sortable_btypes=_get_sortable_btypes;exports.constraints_without_values=void 0;exports.convert_api_call_to_db_object=convert_api_call_to_db_object;exports.get_key_value=get_key_value;exports.get_sorts_list=get_sorts_list;exports.is_field_okay=is_field_okay;exports.resolve_constraints=void 0;require_es_array_includes();require_es_string_includes();require_es_string_starts_with();require_es_array_iterator();require_web_dom_collections_iterator();require_es_symbol_description();var safe_require=_interopRequireWildcard(require_safe_require()),errors=_interopRequireWildcard(require_errors()),logger=_interopRequireWildcard(require_logger()),decaf=_interopRequireWildcard(require_decaf()),constraint_defs=_interopRequireWildcard(require_constraint_defs()),btypes=_interopRequireWildcard(require_btypes()),special_keys=_interopRequireWildcard(require_special_keys()),b_location=_interopRequireWildcard(require_b_location()),_map=_interopRequireDefault(require_map2()),_compact=_interopRequireDefault(require_compact()),_appquery=_interopRequireDefault(require_appquery()),_lib=_interopRequireDefault(require_lib()),app_builtins=_interopRequireWildcard(require_builtins()),generic_actions_utilities=_interopRequireWildcard(require_generic_actions_utilities());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}safe_require.safe_register("./core/core_datasources/utilities/core_ds_db_ops_utilities",exports);function _get_sortable_btypes(db_fields_only){let white_list_btypes=["boolean","text","number","date","dateinterval","file","image"];return db_fields_only&&white_list_btypes.push("geographic_address"),white_list_btypes}function is_field_okay(field_name,value_id){let value=btypes.get(value_id);if(field_name===special_keys.RANDOM_SORTING)return!0;let option_set=value.option_set();if(option_set!=null&&option_set.exists())return!!(field_name==="display"||option_set.attribute(field_name).exists());let custom_type=value.custom_type();return[special_keys.ALL_DB_FIELDS,special_keys.UNIQUE_ID].includes(field_name)||custom_type!=null&&custom_type.exists()&&(field_name==="email"&&custom_type.id()==="user"||custom_type.field(field_name).exists()||app_builtins.get_special_fields(custom_type).map(field=>field.name()).includes(field_name))||value_id.startsWith("api")&&value.plugin.get_message_names().includes(field_name)||value.is_aggregate()?!0:(logger.warn("bad field name in search",{field_name,value_id}),!1)}function get_sorts_list(properties,db_fields_only){let list=[],value=btypes.get(properties.type_to_find),custom_type=value.custom_type(),boolean_value=btypes.get("boolean");if(value.is_missing())return[{sort_field:get_actual_sort_field(properties,properties.type_to_find,db_fields_only),descending:boolean_value.cast(properties.descending)}];function process_item(item){let sort_field=get_actual_sort_field(item,properties.type_to_find,db_fields_only),descending=boolean_value.cast(item.descending);return custom_type!=null&&custom_type.exists()&&custom_type.field(sort_field).value()==="geographic_address"?b_location.ensure_valid_location(item.geo_reference)?sort_field={location_field:sort_field,geo_reference:item.geo_reference}:sort_field=null:sort_field&&!is_field_okay(sort_field,properties.type_to_find)?(sort_field=null,descending=null):(sort_field===special_keys.RANDOM_SORTING||[null,void 0].includes(sort_field))&&(descending=null),{sort_field,descending}}if(list.push(process_item(properties)),properties.sort_field===special_keys.RANDOM_SORTING)return list;for(let item of decaf.object_values(properties.additional_sort_fields))list.push(process_item(item));return list}function get_actual_sort_field(properties,type_to_find,db_fields_only){if(properties.sort_field!==special_keys.DYNAMIC_SORTING_FIELD)return properties.sort_field;if(!properties.dynamic_sort_field)return null;let value=btypes.get(type_to_find);if(value.is_missing())return null;let to_find=properties.dynamic_sort_field.toLowerCase(),fields=[];if(db_fields_only){let custom_type=value.custom_type();for(let field of custom_type.fields())fields.push({display:field.display(),name:field.name(),value:field.value()});fields.push({display:"Created Date",name:"Created Date",value:"date"}),fields.push({display:"Modified Date",name:"Modified Date",value:"date"})}else{let messages=value.get_messages();for(let message of messages)(message==null?void 0:message.arg_btype())==null&&fields.push({display:message.description(void 0,!0),name:message.name(),value:message.ret_btype_id()});to_find==="created date"&&(to_find="creation date")}let sortable_btypes=_get_sortable_btypes(db_fields_only);for(let field of fields)if(field.display.toLowerCase()===to_find){if(!sortable_btypes.includes(field.value))throw new errors.OwnerError("The dynamic sort field "+properties.dynamic_sort_field+" on the type "+value.display()+" cannot be used for sorting");return field.name}throw new errors.OwnerError("Dynamic sort field not recognized",{display:"The dynamic sort field "+properties.dynamic_sort_field+" is not recognized as a field on the type "+value.display()})}var resolve_constraints=(constraints,null_not_dropped)=>(0,_compact.default)((0,_map.default)(constraints!=null?constraints:{},entry=>errors.error_append_args({entry},()=>{if(!entry)return;if(entry.key===special_keys.ADVANCED_SEARCH_CONSTRAINT)return entry;if(entry.key===special_keys.UNIQUE_ID){var _entry$constraint_typ;(_entry$constraint_typ=entry.constraint_type)!=null||(entry.constraint_type="equals")}return entry.constraint_type?constraint_defs.get(entry.constraint_type).resolve_constraint({entry,null_not_dropped}):void 0})));exports.resolve_constraints=resolve_constraints;function convert_api_call_to_db_object(result,call){let val=btypes.get(call.value_id);if(!val.plugin.convert_to_bubble_instance)throw new errors.UnexpectedError("value "+val.id()+" missing convert_to_bubble_instance",{value_id:val.id(),appname:_appquery.default.appname(),result});if(call.is_list){let raw_array=decaf.array_from(result!=null?result:[]).map(a=>val.plugin.convert_to_bubble_instance(a));return(0,_lib.default)().db_instance().static_list(call.value_id,raw_array)}return val.plugin.convert_to_bubble_instance(result)}function get_key_value(key_name,to_find_name){let to_find_value=to_find_name?btypes.get(to_find_name):null,key_value,key_value_delisted;if(key_name==="email"&&to_find_name==="user")key_value="email";else if([special_keys.ALL_DB_FIELDS,special_keys.ADVANCED_SEARCH_CONSTRAINT,special_keys.UNIQUE_ID,"StripeCustomerID"].includes(key_name))key_value=key_name;else{var _key_value;key_value=generic_actions_utilities.sub_node_key_to_value(to_find_value,key_name),key_value_delisted=(_key_value=key_value)!=null&&_key_value.is_list()?key_value.inner():key_value}return{key_value_delisted,key_value}}var constraints_without_values=constraint_defs.all().filter(c=>c.takes_no_value()).map(c=>c.name);exports.constraints_without_values=constraints_without_values}});var require_make_call_fn=__commonJS({"lib-browser-old/external/make_call_fn.js"(exports,module){"use strict";init_define_process_env();init_shim();var errors=require_errors(),core_ds_db_ops_utilities=require_core_ds_db_ops_utilities();module.exports=function(call){return function(a,b,properties,_raw,context){if(b)throw new errors.UnexpectedError("external.js make_call_fn - This line should be unreachable");if(!a)return this.ret_btype_null();if(call.is_authenticated()){let result=call.execute(a,properties,null,_raw,context);return core_ds_db_ops_utilities.convert_api_call_to_db_object(result,call)}}}}});var require_ExternalValue=__commonJS({"lib-browser-old/external/ExternalValue.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_symbol_description();require_es_object_entries();require_es_string_ends_with();var b_array=require_b_array(),b_fiber=require_b_fiber(),b_object=require_b_object(),b_string=require_b_string(),incremental=require_incremental(),btypes=require_btypes(),plugin_getter=require_plugin_getter(),postgres_constraints=require_postgres_constraints(),list_utilities=require_list_utilities(),Lib=require_lib(),{EMPTY_RAW_STRUCT_ID_ENDING}=require_external_values(),make_call_fn=require_make_call_fn();function generate_call_message(message_definition){var _message_definition$c;let[plugin_name,call_name]=message_definition.call.split("."),call=plugin_getter.get_plugin(plugin_name).get_call(call_name),caption=(_message_definition$c=message_definition.caption)!=null?_message_definition$c:b_string.toTitleCase(call_name),data={ret_btype:call.get_value_id(),fn:make_call_fn(call)};if(call.field_names){var _call$description_for;data.field_names=call.field_names}return data.section="Data Fields",data}var ExternalValue=class{_fields(){if(typeof this.fields=="function"){var _this$fields;return(_this$fields=this.fields())!=null?_this$fields:{}}else{var _this$fields2;return(_this$fields2=this.fields)!=null?_this$fields2:{}}}is_missing(){return!1}flatten_raw(raw){if(!raw)return{};let result={};for(let[key,key_data]of Object.entries(this._fields())){incremental.optional_pause_tick(20);let val;if(key_data.extract)val=key_data.extract(raw);else if(key_data.no_key)val=raw;else{var _key_data$path;let path=(_key_data$path=key_data.path)!=null?_key_data$path:[key];val=b_object.extract_from_object(raw,path)}if(key_data.post_call_processing&&(val=key_data.post_call_processing(val,raw)),key_data.cast_on_fetch&&val!=null){var _key_data$ret_value;val=btypes.get((_key_data$ret_value=key_data.ret_value)!=null?_key_data$ret_value:"text").cast(val)}val!=null&&(result[key]=val)}return b_fiber.optional_pause("finished flatten raw"),result}get_bubble_null(){return null}export_to_string(){return"(Data from an API)"}debugging_display(){return"(Data from an API)"}get_message_names(options){var _options;(_options=options)!=null||(options={});let field_names=Object.keys(this._fields());return options.exclude_special_messages||field_names.push(...Object.keys(this.get_special_messages())),b_array.unique(field_names)}get_message(name){let message_definition=this._fields()[name],special_messages={};if(!(!message_definition&&(special_messages=this.get_special_messages(),message_definition=special_messages[name],message_definition==null)))return message_definition.call?generate_call_message(message_definition):special_messages[name]?message_definition:this.get_basic_message(name,message_definition)}get_basic_message(name,message_definition){var _message_definition$c2,_ref,_message_definition$r;return{description:"'s "+((_message_definition$c2=message_definition.caption)!=null?_message_definition$c2:b_string.toTitleCase(name)),ret_btype:(_ref=(_message_definition$r=message_definition.ret_btype)!=null?_message_definition$r:message_definition.ret_value)!=null?_ref:"text",fields:message_definition.fields,field_names:message_definition.field_names,spot_data:message_definition.spot_data,section:"Data Fields",description_for_sliding_palette:message_definition.description_for_sliding_palette}}get_special_messages(){return this.no_special_messages?{}:{bubble_is_empty:{description:" is empty",section:"Operators",ret_btype:"sys.bool",fn(a,b){var _a$data;let empty_struct_except_for_id=Lib().bubble_version()>=24&&(a==null||(_a$data=a.data)==null?void 0:_a$data._id.endsWith(EMPTY_RAW_STRUCT_ID_ENDING));return a==null||a===""||empty_struct_except_for_id},build_pg_constraint:postgres_constraints.is_empty},bubble_is_not_empty:{description:" is not empty",section:"Operators",ret_btype:"sys.bool",fn(a,b){var _a$data2;let empty_struct_except_for_id=Lib().bubble_version()>=24&&(a==null||(_a$data2=a.data)==null?void 0:_a$data2._id.endsWith(EMPTY_RAW_STRUCT_ID_ENDING));return a!=null&&a!==""&&!empty_struct_except_for_id},build_pg_constraint:postgres_constraints.is_not_empty},is_not_contained_by_list:list_utilities.build_is_not_contained_by_list(this.full_name)}}};module.exports=ExternalValue}});var require_StructValue=__commonJS({"lib-browser-old/external/StructValue.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_object_assign();require_es_array_iterator();require_web_dom_collections_iterator();require_es_object_entries();var hash=require_hash2(),sample=require_sample(),btypes=require_btypes(),StaticObject=require_StaticObject().default,StaticList=require_StaticList().default,Dynamic2=require_Dynamic(),ExternalValue=require_ExternalValue(),Lib=require_lib(),{EMPTY_RAW_STRUCT_ID_ENDING}=require_external_values(),StructValue=class _StructValue extends ExternalValue{constructor(human,fields,options){var _options;super(),(_options=options)!=null||(options={}),this.human=human,this.fields=fields,this.fields||(this.fields={},this.no_extract=!0),Object.assign(this,{storable:!0,bindable:!0,is_lookup:!0},options)}display(){return this.human}editable(){return!1}short_id(){return this.name}debugging_display(val){return'(Data with ID "'.concat(val==null?void 0:val._id(),'" from an API)')}equals(a,b){return(a==null?void 0:a._id())===(b==null?void 0:b._id())}get_sample(){return new sample.SampleObject(this.full_name)}cast(val){return val instanceof Dynamic2?val:typeof val=="object"&&val!=null?new StaticObject(val,null,this.full_name):null}get_basic_message(){return Object.assign(super.get_basic_message(...arguments),{is_lookup:!0})}extract(raw){if(this.no_extract||typeof raw==="string")return raw;let result=this.flatten_raw(raw);return result._id||(result._id=hash.incremental_digest(result),Lib().bubble_version()>=24&&!raw&&(result._id+=EMPTY_RAW_STRUCT_ID_ENDING)),result}convert_to_bubble_instance(js_obj){if(Array.isArray(js_obj)){let sub_btype=btypes.get(this.full_name);if(sub_btype.plugin.convert_to_bubble_instance){let converted=js_obj.map(inner=>sub_btype.plugin.convert_to_bubble_instance(inner));return new StaticList(converted,void 0,this.full_name)}else return new StaticList(js_obj,void 0,this.full_name)}else if(js_obj!=null&&typeof js_obj=="object"){let res={};for(let[key,key_data]of Object.entries(this._fields())){let sub_btype=btypes.get(key_data.ret_value);if(sub_btype.is_list()){let inner_val=sub_btype.inner();inner_val.plugin instanceof _StructValue?res[key]=inner_val.plugin.convert_to_bubble_instance(js_obj[key]):res[key]=sub_btype.cast(js_obj[key])}else{var _sub_btype$plugin$con,_sub_btype$plugin$con2,_sub_btype$plugin;res[key]=(_sub_btype$plugin$con=(_sub_btype$plugin$con2=(_sub_btype$plugin=sub_btype.plugin).convert_to_bubble_instance)==null?void 0:_sub_btype$plugin$con2.call(_sub_btype$plugin,js_obj[key]))!=null?_sub_btype$plugin$con:js_obj[key]}}return res._id=js_obj._id,new StaticObject(res,void 0,this.full_name)}else return this.cast(js_obj)}get_JS_object(raw){if(raw==null)return null;raw.raw!=null&&(raw=raw.raw());let result_object={};for(let message_name of this.get_message_names({exclude_special_messages:!0})){let message=this.get_message(message_name);result_object[message_name]=btypes.get(message.ret_btype).get_JS_object(raw[message_name])}return result_object}JS_to_bubble(raw){let result_object={};for(let message_name of this.get_message_names({exclude_special_messages:!0})){let message=this.get_message(message_name);result_object[message_name]=btypes.get(message.ret_btype).JS_to_bubble(raw[message_name])}return new StaticObject(result_object,void 0,this.full_name)}};module.exports=StructValue}});var require_APIConnectorStructValue=__commonJS({"lib-browser-old/apiconnectorbase/APIConnectorStructValue.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;require_es_object_assign();require_es_object_entries();require_es_array_iterator();require_web_dom_collections_iterator();require_es_regexp_exec();require_es_string_replace();var u=_interopRequireWildcard(require_u2()),logger=_interopRequireWildcard(require_logger()),b_fiber=_interopRequireWildcard(require_b_fiber()),incremental=_interopRequireWildcard(require_incremental()),btypes=_interopRequireWildcard(require_btypes()),btype_ids=_interopRequireWildcard(require_btype_ids()),_StructValue=_interopRequireDefault(require_StructValue()),_StaticObject=_interopRequireDefault(require_StaticObject()),_StaticList=_interopRequireDefault(require_StaticList()),apiconnectorbase_consts=_interopRequireWildcard(require_apiconnectorbase());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var APIConnectorStructValue=class _APIConnectorStructValue extends _StructValue.default{constructor(human,fields,options,key_prefix){var _options;(_options=options)!=null||(options={});let fields_with_raw=Object.assign(fields,{body_raw_text:{extract(raw){return u.incremental_json_stringify(raw.body)},caption:"raw body text",ret_value:"text"}});super(human,fields_with_raw,options),this.key_prefix=key_prefix}get_message_names(){var _this$_fields;return Object.entries((_this$_fields=this._fields())!=null?_this$_fields:{}).filter(_ref=>{let[field,field_data]=_ref;return field_data.ret_value!==apiconnectorbase_consts.IGNORE_FIELD}).map(_ref2=>{let[field]=_ref2;return field})}flatten_raw(raw){if(!raw)return{};let result={},object2=this._fields();for(let key in object2){let key_data=object2[key];incremental.optional_pause_tick(20,"flatten raw call field key (".concat(key,")"));let val;if(key_data.extract)val=key_data.extract(raw);else if(key_data.no_key)val=raw;else{var _key_data$path;let path=(_key_data$path=key_data.path)!=null?_key_data$path:[key.replace(this.key_prefix,"")];val=u.extract_from_object(raw,path)}if(key_data.post_call_processing&&(val=key_data.post_call_processing(val,raw)),val!=null&&typeof val!="function"){if(key_data.ret_value){let sub_btype=btypes.get(key_data.ret_value);if(btype_ids.is_list(key_data.ret_value)&&Array.isArray(val)){let inner_val=sub_btype.inner();if(inner_val.is_missing())throw new u.OwnerError("Issue with call",{display:"Issue with the call "+this.human+". Please initialize it again"});val=val.map(a=>{var _inner_val$plugin$ext,_inner_val$plugin$ext2,_inner_val$plugin;return(_inner_val$plugin$ext=(_inner_val$plugin$ext2=(_inner_val$plugin=inner_val.plugin).extract)==null?void 0:_inner_val$plugin$ext2.call(_inner_val$plugin,a))!=null?_inner_val$plugin$ext:a})}else{var _sub_btype$plugin$ext,_sub_btype$plugin$ext2,_sub_btype$plugin;if(sub_btype.is_missing())throw new u.OwnerError("Issue with call",{display:"Issue with the call "+this.human+". Please initialize it again"});val=(_sub_btype$plugin$ext=(_sub_btype$plugin$ext2=(_sub_btype$plugin=sub_btype.plugin).extract)==null?void 0:_sub_btype$plugin$ext2.call(_sub_btype$plugin,val))!=null?_sub_btype$plugin$ext:val}}result[key]=val}}return b_fiber.optional_pause("finished flatten raw"),result}convert_to_bubble_instance(result){let res,sub_btype;if(Array.isArray(result))if(res=[],sub_btype=btypes.get(this.full_name),sub_btype.plugin.convert_to_bubble_instance){for(let r of result)res.push(sub_btype.plugin.convert_to_bubble_instance(r));return new _StaticList.default(res,void 0,this.full_name)}else return new _StaticList.default(result,void 0,this.full_name);else if(result!=null&&typeof result=="object"){res={};let object2=this._fields();for(let key in object2){let key_data=object2[key];if(sub_btype=btypes.get(key_data.ret_value),btype_ids.is_list(key_data.ret_value)&&Array.isArray(result[key])){let inner_val=sub_btype.inner();inner_val.plugin instanceof _APIConnectorStructValue?res[key]=inner_val.plugin.convert_to_bubble_instance(result[key]):res[key]=sub_btype.cast(result[key])}else{var _sub_btype$plugin$con,_sub_btype$plugin$con2,_sub_btype$plugin2;sub_btype.is_missing()&&logger.owner_error("Missing API connector response type data",{display:"Cannot properly interpret response from API call ".concat(this.human,", please reinitialize the call")}),res[key]=(_sub_btype$plugin$con=(_sub_btype$plugin$con2=(_sub_btype$plugin2=sub_btype.plugin).convert_to_bubble_instance)==null?void 0:_sub_btype$plugin$con2.call(_sub_btype$plugin2,result[key]))!=null?_sub_btype$plugin$con:result[key]}}return res._id=result._id,new _StaticObject.default(res,void 0,this.full_name)}else return result}export_to_string(){return"(data from API connector)"}},_default=APIConnectorStructValue;exports.default=_default}});var require_call_btypes=__commonJS({"lib-browser-old/apiconnectorbase/call_btypes.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.get_btypes_from_call=get_btypes_from_call;require_es_array_includes();require_es_string_includes();var btypes=_interopRequireWildcard(require_btypes()),apiconnectorbase_consts=_interopRequireWildcard(require_apiconnectorbase()),_APIConnectorStructValue=_interopRequireDefault(require_APIConnectorStructValue());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function get_btypes_from_call(api_id,api_data,vals,key_prefix){for(let _ in api_data.calls){let call_data=api_data.calls[_];for(let val_name in call_data.types){let val_data=call_data.types[val_name];for(let k in val_data.fields){let field=val_data.fields[k];if([null,void 0,apiconnectorbase_consts.IGNORE_FIELD].includes(field.ret_value))delete val_data.fields[k];else{let is_unix;field.ret_value==="date_unix"&&(is_unix=!0,field.ret_value="date"),field.post_call_processing=function(obj){let ret_btype;return field.ret_value==="geographic_address"?(ret_btype=btypes.get(field.ret_value),ret_btype.plugin.cast(obj)):field.ret_value==="date"?(is_unix?typeof obj=="number"&&(obj=obj*1e3):typeof obj=="number"&&String(obj).length<10&&(obj=obj*1e3),ret_btype=btypes.get(field.ret_value),ret_btype.plugin.cast(obj)):obj}}}vals[val_name]=new _APIConnectorStructValue.default(val_data.caption,val_data.fields,{storable:!0},key_prefix)}}}}});var require_APIEventObject=__commonJS({"lib-browser-old/lang/workflow/APIEventObject.js"(exports,module){"use strict";init_define_process_env();init_shim();require_web_dom_collections_for_each();require_es_array_reduce();require_es_array_reverse();require_es_array_iterator();require_web_dom_collections_iterator();require_es_string_trim();var _dec,_class;function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key]}),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce(function(desc2,decorator){return decorator(target,property,desc2)||desc2},desc),context&&desc.initializer!==void 0&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),desc.initializer===void 0&&(Object.defineProperty(target,property,desc),desc=null),desc}var u=require_u2(),nodes=require_nodes(),caching=require_caching(),appquery=require_appquery(),call_btypes=require_call_btypes(),btype_ids=require_btype_ids(),GenericEvent=require_GenericEvent(),APIEventObject=(_dec=caching.cached({type:caching.AUTORUN}),_class=class extends GenericEvent{owner(){return nodes.create(nodes.API_WORKFLOWS,this.json.parent())}is_api_event(){return!0}get_custom_parameters(){if(this.type()!=="APIEvent")return super.get_custom_parameters();let is_get=this.get_static_property("trigger_option")==="get"&&this.get_static_property("expose");if(this.get_static_property("parameter_def")==="auto"&&!is_get){var _this$get_static_prop;let{is_list}=u.json_parse((_this$get_static_prop=this.get_static_property("data_type"))!=null?_this$get_static_prop:"{}"),base_id="api_wf_data."+this.id();return[{param_id:"_wf_request_data",name:"_wf_request_data",btype_id:is_list?btype_ids.list_type(base_id):base_id}]}else{var _param_node$entries,_param_node$entries2;let param_node=this.property("parameters");return((_param_node$entries=(_param_node$entries2=param_node.entries)==null?void 0:_param_node$entries2.call(param_node))!=null?_param_node$entries:[]).map((entry,i)=>{var _entry$get_static_pro,_entry$get_static_pro2;return{param_id:(_entry$get_static_pro=entry.get_static_property("key"))!=null?_entry$get_static_pro:"[Missing key: ".concat(i,"]"),name:(_entry$get_static_pro2=entry.get_static_property("key"))!=null?_entry$get_static_pro2:"[Missing key: ".concat(i,"]"),optional:entry.get_static_property("optional"),btype_id:entry.get_static_property("is_list")?btype_ids.list_type(entry.get_static_property("value")):entry.get_static_property("value"),in_url:is_get||entry.get_static_property("in_url")}})}}is_exposed(){return this.get_static_property("expose")}creates_session(){return this.actions("SignUp").length>0||this.actions("LogIn").length>0}return_data_actions(){return this.actions("APIReturnData")}wf_name(preserve_capitalization){if(preserve_capitalization){var _this$get_static_prop2;return(_this$get_static_prop2=this.get_static_property("wf_name"))==null?void 0:_this$get_static_prop2.trim()}else{var _this$get_static_prop3;return(_this$get_static_prop3=this.get_static_property("wf_name"))==null?void 0:_this$get_static_prop3.toLowerCase().trim()}}get_value(){let res={};if(this.get_static_property("parameter_def")==="auto"){var _this$get_static_prop4;let fake_api={calls:{}},{types}=u.json_parse((_this$get_static_prop4=this.get_static_property("data_type"))!=null?_this$get_static_prop4:"{}");fake_api.calls[this.id()]={types},call_btypes.get_btypes_from_call("api_event",fake_api,res,"_wf_");for(let value_name in res){let value=res[value_name];value.name=value_name,value.full_name="api_wf_data."+value_name}}return res}},_applyDecoratedDescriptor(_class.prototype,"get_value",[_dec],Object.getOwnPropertyDescriptor(_class.prototype,"get_value"),_class.prototype),_class);module.exports=APIEventObject}});var require_Action=__commonJS({"lib-browser-old/lang/workflow/Action.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_includes();require_es_parse_int();require_es_string_includes();require_es_array_iterator();require_web_dom_collections_iterator();var u=require_u2(),nodes=require_nodes(),btypes=require_btypes(),appquery=require_appquery(),Lib=require_lib(),plugin_getter=require_plugin_getter(),migrations=require_migrations(),apm=require_apm(),WorkflowObject=require_WorkflowObject(),workflow_utils=require_workflow_utils();function missing_action(type){return{field_names:{},fields:()=>[],display:()=>"[missing: "+type+"]"}}module.exports=class extends WorkflowObject{constructor(json){var _this$A,_this$A$field_names;json=json.to_id(),super(json);let type=this.type();if(u.is_edit_mode()&&migrations.get_migration_fn(Lib().plugin_prefixes.action+type)(this.json),type&&(this.A=Lib().load_plugin(Lib().plugin_prefixes.action+type,!0)),(_this$A=this.A)!=null||(this.A=missing_action(type)),!this.A.field_names)throw new u.UnexpectedError("Missing field names for "+type);this._field_names=(_this$A$field_names=this.A.field_names)!=null?_this$A$field_names:{},typeof this._field_names=="object"&&(this._field_names.condition={})}is_action(){return!0}check_use_visible(){return this.A.check_use_visible}is_mergeable(){return this.A.is_mergeable}can_server_side_redirect(){var _this$A$can_redirect,_this$A2;return(_this$A$can_redirect=(_this$A2=this.A).can_redirect)==null?void 0:_this$A$can_redirect.call(_this$A2,this)}server_side_redirect(context){return this.A.server_side_redirect(this,context)}find_expressions(filter){return nodes.from_raw_array(this.json,nodes.new_expression,workflow_utils.find_my_expressions(nodes.to_raw(this),filter))}safe_to_send(){return!this.A.do_not_send_result_to_client}safe_to_log(){return!this.A.do_not_log_result}return_value(){var _this$A$return_value,_this$A$return_value2,_this$A3;let value_id=(_this$A$return_value=(_this$A$return_value2=(_this$A3=this.A).return_value)==null?void 0:_this$A$return_value2.call(_this$A3,this))!=null?_this$A$return_value:"null";return btypes.get(value_id)}_custom_event_actions_requires(type,_seen_events){if(!["TriggerCustomEvent","TriggerCustomEventFromReusable"].includes(this.type()))return!1;let custom_event=appquery.event(this.get_static_property("custom_event"));return!custom_event||!custom_event.exists()||_seen_events[custom_event.id()]?!1:(_seen_events[custom_event.id()]=!0,custom_event.actions().some(action=>action["requires_"+type](_seen_events)))}requires_server(){let _seen_events=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return typeof this.A.requires_server=="function"?this.A.requires_server():this.A.server_method?!0:this._custom_event_actions_requires("server",_seen_events)}requires_cookies(){let _seen_events=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.A.requires_cookies?!0:this._custom_event_actions_requires("cookies",_seen_events)}server_method(){return this.A.server_method}terminate_server_workflow(){var _this$A$terminate_ser;return(_this$A$terminate_ser=this.A.terminate_server_workflow)!=null?_this$A$terminate_ser:this.A.server_method_resume!=null}server_method_resume(){return this.A.server_method_resume}display(verb_only){let name=this.get_name();return name&&typeof name=="string"?name:this.A.display(this,verb_only)}use_injected_datasource(node){return this.A.use_injected_datasource?this.A.use_injected_datasource(this,node):[!1,!0]}get_injected_value(node){var _this$A$get_injected_,_this$A4;return(_this$A$get_injected_=(_this$A4=this.A).get_injected_value)==null?void 0:_this$A$get_injected_.call(_this$A4,this,node)}get_injected_display(node){var _this$A$get_injected_2,_this$A5;return(_this$A$get_injected_2=(_this$A5=this.A).get_injected_display)==null?void 0:_this$A$get_injected_2.call(_this$A5,this,node)}next(){var _this$json$parent;let idx=parseInt(this.json.name()),json=(_this$json$parent=this.json.parent())==null?void 0:_this$json$parent.child(idx+1);return json!=null&&json.exists()?nodes.new_workflow_item(json):null}all_next(filter){let idx=parseInt(this.json.name());if(!this.json.parent())return[];let workflow_items=this.json.parent().children().slice(idx+1).map(json=>nodes.new_workflow_item(json));return nodes.filter_array(filter,workflow_items)}get_next_json(){var _this$json$parent2;let idx=parseInt(this.json.name());return(_this$json$parent2=this.json.parent())==null?void 0:_this$json$parent2.child(idx+1)}previous(){var _this$json$parent3;let idx=parseInt(this.json.name());if(idx===0)return this.event();let json=(_this$json$parent3=this.json.parent())==null?void 0:_this$json$parent3.child(idx-1);return json!=null&&json.exists()?nodes.new_workflow_item(json):null}event(){var _this$json$parent4;return nodes.new_workflow_item((_this$json$parent4=this.json.parent())==null?void 0:_this$json$parent4.parent())}context_element(){var _this$event;return(_this$event=this.event())==null?void 0:_this$event.context_element()}field_names(){return this._field_names}get_data_to_refresh(properties,context){if(this.A.data_to_refresh&&properties.condition)return this.A.data_to_refresh(this,properties,context.element)}preprocess_properties(properties,context){return this.A.preprocess_properties?apm.traceSpan("preprocess action properties",{"workflow.action.id":this.id(),"workflow.action.type":this.type()},()=>this.A.preprocess_properties(properties,this,context)):properties}can_fall_back_to_server(){return this.A.fall_back_to_server}does_fall_back_to_server(){return this.A.fall_back_to_server&&this.requires_server()}needs_clientside_properties(){return this.A.run||this.A.data_to_refresh}run(context,properties_promise,cb){if(!this.A.run){cb();return}properties_promise.callback((err,data)=>{if(err){this.does_fall_back_to_server()?context.get_server_outcome(this,cb):cb(err);return}try{return context.page_context_id<Lib().workflow.page_context_id?cb():data.condition||this.A.handle_condition_internally?this.A.run(this,data,context,cb):cb()}catch(error){return cb(error)}})}resume(context,cb){if(this.A.resume)try{return this.A.resume(this,context,cb)}catch(err){return cb(err)}else return cb()}delete(options){if(!this.exists())return;let data=this.json.raw();Lib().changes.create_change("RemoveAction",{parent_id:this.previous().id(),id:this.id(),data,intent_details:{user_interaction:"Direct Action Delete",user_action:options==null?void 0:options.user_action,parent_user_action:options==null?void 0:options.parent_user_action,parent_id:options==null?void 0:options.parent_id}}).execute()}}}});var require_workflow2=__commonJS({"lib-browser-old/lang/workflow/index.js"(exports){"use strict";init_define_process_env();init_shim();var nodes=require_nodes(),Lib=require_lib(),appquery=require_appquery(),WorkflowObject=require_WorkflowObject(),GenericEvent=require_GenericEvent(),Event=require_Event(),APIEventObject=require_APIEventObject(),Action=require_Action(),workflow_utils=require_workflow_utils(),workflow=exports;nodes.add(nodes.WORKFLOW_OBJECT,WorkflowObject);nodes.add(nodes.GENERIC_EVENT,GenericEvent);nodes.add(nodes.EVENT,Event);nodes.add(nodes.API_EVENT_OBJECT,APIEventObject);nodes.add(nodes.ACTION,Action);nodes.add_generic("workflow_item",new_workflow_item);function new_workflow_item(json){var _json$parent,_json$parent2;return json?((_json$parent=json.parent())==null?void 0:_json$parent.name())==="workflows"?new Event(json):((_json$parent2=json.parent())==null?void 0:_json$parent2.name())==="api"?new APIEventObject(json):new Action(json):null}workflow.event_find_expressions=workflow_utils.event_find_expressions;workflow.get_api_event=function(endpoint_name){var _id;let id=Lib().derived("APIWFByName",!0).content()[endpoint_name];if((_id=id)!=null||(id=Lib().derived("APIWFByName").content()[endpoint_name]),id){var _evt$is_api_event;let evt=appquery.event(id);if((_evt$is_api_event=evt.is_api_event)!=null&&_evt$is_api_event.call(evt))return evt}return null}}});var require_elements_state=__commonJS({"lib-browser-old/lang/elements/elements_state.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.toggle_state_edit_mode=exports.seen_default_names=exports.seen_custom_names=exports.is_state_on_edit_mode=void 0;var _autorun=require_autorun3(),seen_custom_names={};exports.seen_custom_names=seen_custom_names;var seen_default_names={};exports.seen_default_names=seen_default_names}});var require_State=__commonJS({"lib-browser-old/lang/elements/State.js"(exports,module){"use strict";init_define_process_env();init_shim();require_web_dom_collections_for_each();require_es_array_reduce();require_es_array_reverse();require_es_array_iterator();require_web_dom_collections_iterator();require_es_json_stringify();var _dec,_dec2,_class;function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key]}),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce(function(desc2,decorator){return decorator(target,property,desc2)||desc2},desc),context&&desc.initializer!==void 0&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),desc.initializer===void 0&&(Object.defineProperty(target,property,desc),desc=null),desc}var u=require_u2(),Lib=require_lib(),nodes=require_nodes(),caching=require_caching(),shrink=require_shrink(),elements_utils=require_elements_utils(),{S}=shrink,State=(_dec=caching.cached({type:caching.RUN_MODE}),_dec2=caching.cached({type:caching.RUN_MODE}),_class=class extends nodes.AppNode{property(name){return nodes.new_expression(this.json._gchild(S.properties,shrink.shrink(name)),this)}get_injected_value(){var _this$context_element,_this$context_element2;return(_this$context_element=(_this$context_element2=this.context_element().E).get_injected_value)==null?void 0:_this$context_element.call(_this$context_element2,this.context_element())}get_injected_display(){var _this$context_element3,_this$context_element4;return(_this$context_element3=(_this$context_element4=this.context_element().E).get_injected_display)==null?void 0:_this$context_element3.call(_this$context_element4)}properties(){return this.json._child(S.properties).child_names().map(name=>this.property(name))}find_expressions(filter){return nodes.from_raw_array(this.json,nodes.new_expression,elements_utils.state_find_expressions(nodes.to_raw(this),filter))}rel_path(){return"states."+this.json.name()}get_static_property(name){return this.property(name).get_static()}context_element(){return nodes.new_element(this.json.parent().parent())}root(){return this.context_element().root()}no_margins(){return this.context_element().no_margins()}get_containing_element(){return this.context_element().get_containing_element()}added_to_container(){return this.context_element().added_to_container()}force_fixed(){return this.context_element().force_fixed()}not_resizable(){return this.context_element().not_resizable()}uses_css_responsive(){return this.context_element().uses_css_responsive()}has_fixed_aspect_ratio(){return this.context_element().has_fixed_aspect_ratio()}is_fixed_dimension(dimension){return this.context_element().is_fixed_dimension(dimension)}can_be_variable_width(){return this.context_element().can_be_variable_width()}not_max_adjustable(){return this.context_element().not_max_adjustable()}type(){return this.context_element().type()}get_style_if_exists(){return this.context_element().get_style_if_exists()}element_version(styleable){return this.context_element().element_version(styleable)}get_type_display(){return this.context_element().get_type_display()}property_names(){return this.json._child(S.properties).children().map(json=>json.name())}condition(){return nodes.new_expression(this.json._child(S.condition),this)}},_applyDecoratedDescriptor(_class.prototype,"property_names",[_dec],Object.getOwnPropertyDescriptor(_class.prototype,"property_names"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"condition",[_dec2],Object.getOwnPropertyDescriptor(_class.prototype,"condition"),_class.prototype),_class);module.exports=State}});var require_Transition=__commonJS({"lib-browser-old/lang/elements/Transition.js"(exports,module){"use strict";init_define_process_env();init_shim();var _class,u=require_u2(),logger=require_logger(),Lib=require_lib(),nodes=require_nodes(),transition_fns=["ease","ease-in","ease-out","ease-in-out","linear","step-start","step-end"];module.exports=(_class=class extends nodes.HasProperties{constructor(json,owner){super(json),this.owner=owner,this.owner||logger.error("transition created without owner")}context_element(){var _this$owner;return(_this$owner=this.owner)!=null?_this$owner:nodes.new_element(this.json.parent().parent())}prop_name(){return this.json.name()}prop_name_display(){var _property$long_captio;let property=this.context_element().fields(!0).find(p=>p.name===this.prop_name());return property||console.log("could not find property "+this.prop_name()+" on node "+this.context_element()),(_property$long_captio=property.long_caption)!=null?_property$long_captio:property.caption}duration_node(){return this.json.child("duration")}duration(){return this.duration_node().get()}fn_node(){return this.json.child("fn")}fn(){return this.fn_node().get()}find_in_editor(with_div,cb,is_page_owner){u.run_once(30,()=>this.context_element(),(err,element)=>{element.find_in_editor_raw(()=>{var _element$root;((_element$root=element.root())==null?void 0:_element$root.get_responsive_version())>0?Lib().property_editor.current_tab("appearance"):Lib().property_editor.current_tab("transitions"),u.wait_for_updates(()=>{with_div?cb==null||cb($("#".concat(this.prop_name(),".transition.section"))):cb==null||cb()})},is_page_owner)})}},_class.transition_fns=transition_fns,_class.default_transition={duration:200,fn:"ease"},_class)}});var require_responsive_algorithm=__commonJS({"lib-browser-old/shared/responsive/responsive_algorithm.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_sort();require_es_array_iterator();require_web_dom_collections_iterator();require_es_parse_int();var element_edit_eval=require_element_edit_eval(),responsive_algorithm=exports;responsive_algorithm.get_default_sizing=_ref=>{let{width,height,can_fit_height}=_ref;return{single_width:!0,min_width_css:"".concat(width,"px"),horiz_alignment:"flex-start",min_height_css:"".concat(height,"px"),fit_height:can_fit_height,single_height:!can_fit_height}};responsive_algorithm.on_container_layout_change_from_fixed=function(element){let props;element.is_root()?props=responsive_algorithm.get_default_root_sizing({width:element.get_width(),height:element.get_height()}):props=responsive_algorithm.get_default_sizing({width:element.get_width(),height:element.get_height(),can_fit_height:element.can_fit_height()});for(let prop in props){let val=props[prop];element.set_property(prop,val)}};responsive_algorithm.get_default_root_sizing=_ref2=>{let{width,height}=_ref2;return{default_width:width,min_width_px:0,min_height_px:height}};responsive_algorithm.calculate_flexbox=function(_ref3){let{container_height,container_width,element_data,layout_type,only_order}=_ref3,elements={};function clean_element(element){delete element.cross_base,delete element.cross_size,delete element.cross_end,delete element.main_base,delete element.main_size,delete element.main_end,only_order&&(delete element.margin_left,delete element.margin_right,delete element.margin_top,delete element.margin_bottom)}let allow_wrapping,cross_margin_end,cross_margin_start,main_margin_end,main_margin_start,parent_cross_size,parent_main_size;if(layout_type==="row")main_margin_start="margin_left",main_margin_end="margin_right",cross_margin_start="margin_top",cross_margin_end="margin_bottom",allow_wrapping=!0,parent_cross_size=container_height,parent_main_size=container_width;else if(layout_type==="column")cross_margin_start="margin_left",cross_margin_end="margin_right",main_margin_start="margin_top",main_margin_end="margin_bottom",allow_wrapping=!1,parent_main_size=container_height,parent_cross_size=container_width;else return elements;let child_ids=[];for(let child_id in element_data){let data=element_data[child_id],{ih,it,il,iw}=data;child_ids.push(child_id),layout_type==="row"?elements[child_id]={cross_size:ih,cross_base:it,cross_end:it+ih,main_base:il,main_size:iw,main_end:il+iw}:elements[child_id]={main_size:il,main_base:it,main_end:it+ih,cross_base:il,cross_size:iw,cross_end:il+iw}}if(child_ids.length===0)return elements;child_ids.sort((a,b)=>elements[a].cross_base-elements[b].cross_base);let rows=[],current_row=null;for(let id of child_ids)current_row==null||allow_wrapping&&elements[id].cross_base>current_row.end?(current_row={elements:[id],base:elements[id].cross_base,end:elements[id].cross_end},rows.push(current_row)):(current_row.elements.push(id),current_row.end=Math.max(current_row.end,elements[id].cross_end));let prev_row_end=0,prev_element_end=0,order=1;for(let row_idx=0;row_idx<rows.length;row_idx++){let row=rows[row_idx];row.elements.sort((a,b)=>elements[a].main_base-elements[b].main_base);for(let elem_idx=0;elem_idx<row.elements.length;elem_idx++){let id=row.elements[elem_idx],element=elements[id];element[cross_margin_start]=element.cross_base-prev_row_end,element[main_margin_start]=element.main_base-prev_element_end,elem_idx===row.elements.length-1?element[main_margin_end]=parent_main_size-element.main_end:element[main_margin_end]=0,row_idx===rows.length-1?element[cross_margin_end]=parent_cross_size-element.cross_end:element[cross_margin_end]=0,prev_element_end=element.main_end,element.order=order,order+=1,clean_element(element)}prev_row_end=row.end}return elements};responsive_algorithm.calculate_nonant=function(_ref4){let{left,top,width,height,margins,container_width,container_height}=_ref4;function calculate_alignment(_ref5){let{dist_start,dist_end}=_ref5;return dist_start<dist_end/2?"a":dist_end<dist_start/2?"c":"b"}return calculate_alignment({dist_start:left-margins.left,dist_end:container_width-(left+width+margins.right)})+calculate_alignment({dist_start:top-margins.top,dist_end:container_height-(top+height+margins.bottom)})};responsive_algorithm.calculate_instance_nonant=function(container,instance){let canvas=container.to_canvas(instance),offset=canvas.offset(),container_corner=container.container_corner(),margins={};for(let side of["top","left","right","bottom"])margins[side]=element_edit_eval.edit_eval("margin_".concat(side),instance);return responsive_algorithm.calculate_nonant({left:offset.left-container_corner.left,top:offset.top-container_corner.top,width:canvas.outerWidth(),height:canvas.outerHeight(),margins,container_width:container.container_canvas.innerWidth(),container_height:container.container_canvas.innerHeight()})};responsive_algorithm.calculate_nonants=function(container){let elements={};for(let child_id in container.instances){let child=container.instances[child_id];child.element.added_to_container()&&(elements[child_id]={nonant_alignment:responsive_algorithm.calculate_instance_nonant(container,child)})}return elements};responsive_algorithm.calculate_fixed_positions=function(container){let container_corner=container.container_corner(),elements={};for(let child_id in container.instances){let child=container.instances[child_id];if(child.element.added_to_container()){let canvas=container.to_canvas(child),offset=canvas.offset();elements[child_id]={top:offset.top-container_corner.top,left:offset.left-container_corner.left,width:parseInt(canvas.outerWidth()),height:parseInt(canvas.outerHeight())}}}return elements}}});var require_types=__commonJS({"lib-browser-old/lang/elements/types.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.EditorType=void 0;var EditorType=function(EditorType2){return EditorType2.ShortText="ShortText",EditorType2.LongText="LongText",EditorType2.Basic="Basic",EditorType2.NoEditor="NoEditor",EditorType2.CheckBox="Checkbox",EditorType2.StaticText="StaticText",EditorType2.StaticDate="StaticDate",EditorType2.StaticMultiLineText="StaticMultiLineText",EditorType2.StaticNumber="StaticNumber",EditorType2.CSSDimension="CSSDimension",EditorType2.Color="Color",EditorType2.Image="Image",EditorType2.IconPicker="IconPicker",EditorType2.DynamicImage="DynamicImage",EditorType2.DynamicFile="DynamicFile",EditorType2.Dropdown="Dropdown",EditorType2.Label="Label",EditorType2.Button="Button",EditorType2.CropButton="Crop_Button",EditorType2.GeographicSearch="GeographicSearch",EditorType2.CheckboxList="CheckboxList",EditorType2.StaticList="StaticList",EditorType2.ObjectList="ObjectList",EditorType2.FlyoutObjectList="FlyoutObjectList",EditorType2.DropdownButton="Dropdown_Button",EditorType2}({});exports.EditorType=EditorType}});var require_missing_element=__commonJS({"lib-browser-old/lang/elements/missing_element.js"(exports,module){"use strict";init_define_process_env();init_shim();var element_meta_actions=require_element_meta_actions(),{EditorType}=require_types(),{PLUGIN_TAB}=require_css();module.exports={get_html(){return"<div>missing element</div>"},field_names:{},is_visible_on_page_load(){return!0},initialize(){},property_applications:[],add_an_invisible_div_on_the_top:!1}}});var require_property_sections=__commonJS({"lib-browser-old/lang/elements/property_sections.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.for_mode=void 0}});var require_evaluation_cache=__commonJS({"lib-browser-old/shared/server_rendering/evaluation_cache.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.getPropertyCache=getPropertyCache;function getPropertyCache(id){var _window$_bubble_watch;return(_window$_bubble_watch=window._bubble_watcher_cache)==null?void 0:_window$_bubble_watch[id]}}});var require_responsive_v0=__commonJS({"lib-browser-old/shared/responsive_v0.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_sort();require_es_array_includes();require_es_string_includes()}});var require_lang_utils=__commonJS({"lib-browser-old/lang/lang_utils.js"(exports){"use strict";init_define_process_env();init_shim();require_es_parse_int();var u=require_u2(),logger=require_logger(),State=require_State()}});var require_custom_elements=__commonJS({"lib-browser-old/constants/custom_elements.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.ON_ELEMENT_LIST=exports.ON_ELEMENT=exports.GROUP_TYPES=exports.CUSTOM_PROP_IDENTIFIER=void 0;require_es_array_includes();require_es_string_includes();require_es_string_starts_with();var GROUP_TYPES={Group:"Group",Popup:"Popup",FloatingGroup:"Floating Group"};exports.GROUP_TYPES=GROUP_TYPES;var CUSTOM_PROP_IDENTIFIER="param_";exports.CUSTOM_PROP_IDENTIFIER=CUSTOM_PROP_IDENTIFIER;var ON_ELEMENT={includes:key=>ON_ELEMENT_LIST.includes(key)||key.startsWith(CUSTOM_PROP_IDENTIFIER)};exports.ON_ELEMENT=ON_ELEMENT;var ON_ELEMENT_LIST=["lock_in_editor","is_visible","top","left","zindex","data_source","custom_id","greyout_color","greyout_blur","responsive_alignment","prevent_user_from_closing_through_esc","collapse_margin","fixed_width","min_width","use_max_width","max_width","responsive_show","responsive_show_width","width","height","floating_reference","floating_reference_horizontal","unique_id","floating_reference_horizontal_resp","float_zindex","parallax","nonant_alignment","vert_alignment","horiz_alignment","order","collapse_when_hidden","collapse_animation","animation_type","single_width","min_width_css","max_width_css","fit_width","single_height","min_height_css","max_height_css","fit_height","margin_left","margin_right","margin_top","margin_bottom","overflow_scroll"];exports.ON_ELEMENT_LIST=ON_ELEMENT_LIST}});var require_GenericElement=__commonJS({"lib-browser-old/lang/elements/GenericElement.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_reduce();require_es_array_reverse();require_es_symbol_description();require_es_error_cause();require_es_object_get_own_property_descriptors();require_es_weak_map();require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_includes();require_es_string_includes();require_web_dom_collections_for_each();require_es_object_entries();require_es_array_flat_map();require_es_array_unscopables_flat_map();require_es_regexp_exec();require_es_string_replace();var u=_interopRequireWildcard(require_u2()),_decaf=_interopRequireDefault(require_decaf()),logger=_interopRequireWildcard(require_logger()),_style_properties2=_interopRequireDefault(require_style_properties()),_caching=_interopRequireDefault(require_caching()),_nodes=_interopRequireDefault(require_nodes()),_RAW=_interopRequireDefault(require_RAW()),_evaluate_static=_interopRequireDefault(require_evaluate_static()),_responsive_algorithm=_interopRequireDefault(require_responsive_algorithm()),_responsive_layout=_interopRequireDefault(require_responsive_layout()),elements_consts=_interopRequireWildcard(require_elements()),_elements_utils=_interopRequireDefault(require_elements_utils()),elements_state=_interopRequireWildcard(require_elements_state()),_missing_element=_interopRequireDefault(require_missing_element()),property_sections=_interopRequireWildcard(require_property_sections()),_State=_interopRequireDefault(require_State()),_Transition=_interopRequireDefault(require_Transition()),evaluation_cache=_interopRequireWildcard(require_evaluation_cache()),_elements_versioning=_interopRequireDefault(require_elements_versioning()),_lib=_interopRequireDefault(require_lib()),_btypes=_interopRequireDefault(require_btypes()),css2=_interopRequireWildcard(require_css()),shrink=_interopRequireWildcard(require_shrink()),_appquery=_interopRequireDefault(require_appquery()),_responsive_v=_interopRequireDefault(require_responsive_v0()),property_applications=_interopRequireWildcard(require_property_applications()),_lang_utils=_interopRequireDefault(require_lang_utils()),_nodes_utils=_interopRequireDefault(require_nodes_utils()),_registry=_interopRequireDefault(require_registry()),_node_types=_interopRequireDefault(require_node_types()),btype_ids=_interopRequireWildcard(require_btype_ids()),_lang=require_lang(),_custom_elements=require_custom_elements(),_loggable=require_loggable(),_allow_overrides_check=require_allow_overrides_check(),_dec,_dec2,_dec3,_dec4,_dec5,_dec6,_class;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key]}),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce(function(desc2,decorator){return decorator(target,property,desc2)||desc2},desc),context&&desc.initializer!==void 0&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),desc.initializer===void 0&&(Object.defineProperty(target,property,desc),desc=null),desc}var gen_name_cache={},currently_computing_gen_name={},_shrunk_style_properties;function get_shrunk_style_properties(){if(!_shrunk_style_properties){_shrunk_style_properties={};let object2=_style_properties2.default.get_style_properties();for(let k in object2){let v=object2[k];_shrunk_style_properties[shrink.shrink(k)]=v}}return _shrunk_style_properties}function _is_loop(elem,properties){let seen={};for(let i=0;i<properties.length;i++){let p=properties[i],expr=elem.property(p),f1=_nodes_utils.default.make_filter("GetElement"),f2=_nodes_utils.default.make_filter("ThisElement"),entries=[...expr.find_expressions(f1),...expr.find_expressions(f2)];_lib.default.or_throw().is_edit_mode()?seen[elem.json._id]=!0:seen[elem.json.id()]=!0;for(let k=0;k<entries.length;k++){var _entry$raw,_entry_props$element_,_entry_props$element_2;let entry=entries[k],entry_props=(_entry$raw=entry.raw())==null?void 0:_entry$raw.properties;if(entry_props==null){logger.debug("missing entry properties object",{raw:(0,_loggable.to_loggable)(entry.raw()),path:entry.path()});continue}if(seen[(_entry_props$element_=entry_props.element_id)!=null?_entry_props$element_:""])return!0;seen[(_entry_props$element_2=entry_props.element_id)!=null?_entry_props$element_2:""]=!0}}return!1}var GenericElement=(_dec=_caching.default.cached({type:_caching.default.AUTORUN}),_dec2=_caching.default.cached({type:_caching.default.RUN_MODE,parameters:1}),_dec3=_caching.default.cached({type:_caching.default.RUN_MODE}),_dec4=_caching.default.cached({type:_caching.default.ALL_MODES}),_dec5=_caching.default.cached({type:_caching.default.RUN_MODE}),_dec6=_caching.default.cached({type:_caching.default.RUN_MODE,parameters:1}),_class=class extends _nodes.default.HasID{make_new(){return _registry.default.new_element(...arguments)}constructor(json,fake){var _ref,_options$_type;let options=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(json=json.to_id(),super(json),this.E=void 0,this.fake=void 0,this._type=void 0,this.json=void 0,this.definition_or_self=void 0,this.style_override_properties=void 0,this.num_style_overrides=void 0,this._property_watcher_fns=void 0,this.is_missing=void 0,this.__solid_component=void 0,this._get_responsive_data_watcher=void 0,this._precomputed=void 0,this.json=json,this.fake=fake,this._type=(_ref=(_options$_type=options._type)!=null?_options$_type:json.child("type").get())!=null?_ref:_lang.MISSING_TYPE,this.style_override_properties=new Set,this.num_style_overrides=u.Box(0),this.definition_or_self=this,this._type==="CustomElement"){let plugin=_lib.default.or_throw().load_custom(this);this.E=plugin,this.definition_or_self=plugin.custom_definition();let old_property=this.property.bind(this),old_default=this.get_default.bind(this),old_get_static_property=this.get_static_property.bind(this);if(this.property=plugin.property_transformer(this,old_property),this.get_static_property=plugin.get_static_property_transformer(this,old_get_static_property),this.get_default=plugin.default_transformer(this,old_default),this.get_style_if_exists=plugin.get_style_if_exists_transformer(),this.get_responsive_data=()=>{var _this$property$get_st;let custom_id=(_this$property$get_st=this.property("custom_id").get_static())!=null?_this$property$get_st:"";return this.app().custom_definition(custom_id).get_responsive_data()},this.get_visible_workflows=function(){return plugin.get_visible_workflows(this)},this.get_related_workflows=plugin.get_related_workflows(this),!_lib.default.or_throw().is_edit_mode()){var _plugin$custom_states,_plugin$custom_states2;let plugin_states=(_plugin$custom_states=(_plugin$custom_states2=plugin.custom_states)==null?void 0:_plugin$custom_states2.call(plugin))!=null?_plugin$custom_states:_nodes_utils.default.enhance_array([]),element_states=_elements_utils.default.get_states_from_raw_json(this.json).map(json2=>new _State.default(json2)),_states=[...plugin_states,...element_states];this.states=()=>_states}}else if(!this._type)this.E=_missing_element.default;else{var _Lib$or_throw$load_pl;this.E=(_Lib$or_throw$load_pl=_lib.default.or_throw().load_plugin("".concat(_lib.default.or_throw().plugin_prefixes.element).concat(this._type),!0))!=null?_Lib$or_throw$load_pl:_missing_element.default}this.is_missing=this.E===_missing_element.default}get solid_component(){return this.__solid_component==null&&this.build_solid_component(),this.__solid_component}build_solid_component(){var _this$E$solid_compone;return this.__solid_component=(_this$E$solid_compone=this.E.solid_component)==null?void 0:_this$E$solid_compone.buildComponent(this,evaluation_cache.getPropertyCache(this.ssr_key())),this.__solid_component}display(skip_is_loop){return this.get_name(skip_is_loop)}E_object(){return this.E}get_name(runmode_show){var _this$E$generate_name,_this$E;if((_this$E$generate_name=(_this$E=this.E).generate_name)!=null&&_this$E$generate_name.call(_this$E,this))return this.E.generate_name(this);let name=this.json.child("name").get();if(name)return elements_state.seen_custom_names[name]=!0,name;{var _this$gen_name;!runmode_show&&_lib.default.or_throw().workflow.debugger!=null&&(runmode_show=!0);let temp_name=(_this$gen_name=this.gen_name(runmode_show))!=null?_this$gen_name:this.default_name();return elements_state.seen_default_names[temp_name]=!0,temp_name}}name_for_datasource(){var _this$E$name_for_data,_this$E$name_for_data2,_this$E2;return(_this$E$name_for_data=(_this$E$name_for_data2=(_this$E2=this.E).name_for_datasource)==null?void 0:_this$E$name_for_data2.call(_this$E2,this))!=null?_this$E$name_for_data:this.get_name()}get_responsive_data(){if(!this.exists())return{};if(u.is_edit_mode())return this._get_responsive_data_watcher=u.Watcher(()=>{let data;return this.root().use_responsive_algorithm()?data=_responsive_v.default.calculate_lines(this):data=_responsive_v.default.build_push_tree(this),_lang_utils.default.simplify_data(data)}),this._get_responsive_data_watcher.get();let derived=_lib.default.or_throw().derived("Responsive",this.root().json._path(),this.root().use_responsive_algorithm());return derived.set_app(this.app()),derived.content()[this.id()]}default_name(){return this.json.child("default_name").get()}gen_name(runmode_show){var _gen_name_cache$node_;if(!_lib.default.or_throw().is_edit_mode()&&!runmode_show)return;let properties=["text","placeholder","label","icon","group_type"];if(_is_loop(this,properties))return this.default_name();let node_path=this.toUniqueString();if(currently_computing_gen_name[node_path])return this.default_name();currently_computing_gen_name[node_path]=!0,(_gen_name_cache$node_=gen_name_cache[node_path])!=null||(gen_name_cache[node_path]=u.Watcher(()=>{let get_short_type=addition=>{let a=_elements_utils.default.get_short_display(this.type());if(a==="CustomElement"){var _appquery$custom_defi;let custom_id=this.get_static_property("custom_id"),name=(_appquery$custom_defi=_appquery.default.custom_definition(custom_id))==null?void 0:_appquery$custom_defi.name();if(name)return name}return a+" "+addition};for(let p of properties)if(p==="group_type"){let gt=this.get_static_property(p);if(gt){var _btypes$get;let type=(_btypes$get=_btypes.default.get(gt))==null?void 0:_btypes$get.display();if(type)return get_short_type(type)}}else{let expr=this.property(p);if(!expr.is_empty()){let val=expr.get_tree_display().slice(0,20);return get_short_type(val)}}})),delete currently_computing_gen_name[node_path];let[ready,value]=gen_name_cache[node_path].get_current();return ready?value:void 0}get_type_display(){var _this$E$get_type_disp,_this$E$get_type_disp2,_this$E3;return(_this$E$get_type_disp=(_this$E$get_type_disp2=(_this$E3=this.E).get_type_display)==null?void 0:_this$E$get_type_disp2.call(_this$E3,this))!=null?_this$E$get_type_disp:_elements_utils.default.get_short_display(this.type())}is_equal_to(elem){if(!super.is_equal_to(elem)||this._type!==elem._type)return!1;if(this._type==="CustomElement"){var _this$E4,_elem$E;return((_this$E4=this.E)==null?void 0:_this$E4.base_name)===((_elem$E=elem.E)==null?void 0:_elem$E.base_name)}return!0}toUniqueString(){return super.toUniqueString()+this._type}type(){return this._type}is_input(){var _this$E$is_input,_this$E5;return(_this$E$is_input=(_this$E5=this.E)==null?void 0:_this$E5.is_input)!=null?_this$E$is_input:!1}is_root(){var _this$is_page,_this$is_custom_defin;return((_this$is_page=this.is_page)==null?void 0:_this$is_page.call(this))||((_this$is_custom_defin=this.is_custom_definition)==null?void 0:_this$is_custom_defin.call(this))}is_page(){return!1}is_custom_definition(){return!1}id(){return this.json.id()}ssr_key(){return this.id()}get_styleable_static_property(name,suppress_warning){if(this.is_styleable_property(name)){let style2=this.get_style_if_exists();if(style2)if((0,_allow_overrides_check.allow_overrides_check)(this,name)){let val=this.definition_or_self.property(name).raw();return val==null?style2.get_static_property(name):val}else return style2.get_static_property(name)}return this.get_static_property(name,suppress_warning)}get_precomputed(){if(this._precomputed)return this._precomputed;{let element_properties=this.json._raw_child(shrink.S.properties);if(this.type()==="CustomElement"){for(let k in element_properties)_custom_elements.ON_ELEMENT.includes(shrink.expand(k))||delete element_properties[k];let custom_definition_properties=this.E.custom_definition().json._child(shrink.S.properties)._raw();for(let k in custom_definition_properties)!_custom_elements.ON_ELEMENT.includes(shrink.expand(k))&&!["height","width"].includes(shrink.expand(k))&&(element_properties[k]=custom_definition_properties[k])}let style2=this.get_style_if_exists(),_style_properties=style2?get_shrunk_style_properties():{},_precomputed={};for(let _name1 in element_properties){if(style2&&(_style_properties[_name1]||this.is_styleable_property(_name1))&&!(0,_allow_overrides_check.allow_overrides_check)(this,_name1))continue;let value=element_properties[_name1];_evaluate_static.default.is_static(value)?_precomputed[_name1]=_evaluate_static.default.get_static(value):_precomputed[_name1]=elements_consts.NOT_STATIC_PROP}let precomputed={};Object.entries(_precomputed).forEach(_ref2=>{let[_name1,value]=_ref2;precomputed[shrink.expand(_name1)]=value}),style2&&_decaf.default.object_entries(style2.get_precomputed()).forEach(_ref3=>{let[name,value]=_ref3;if(this.is_styleable_property(name)){var _precomputed$name;(_precomputed$name=precomputed[name])!=null||(precomputed[name]=value)}});let element_version=this.element_version(!1),style_version=this.element_version(!0),states=this.states();style2&&_appquery.default.get_public_setting("bubble_version")>=26&&(states=states.concat(style2.states()));for(let state of states)for(let name of state.property_names()){precomputed[name]=elements_consts.NOT_STATIC_PROP;for(let unmapped of _elements_versioning.default.get_unmapped_properties(element_version,style_version,name))precomputed[unmapped]=elements_consts.NOT_STATIC_PROP}return this._precomputed=precomputed,this._precomputed}}default_states(){var _this$E$default_state;return(_this$E$default_state=this.E.default_states)!=null?_this$E$default_state:[]}added_to_container(){return typeof this.E.added_to_container=="function"?this.E.added_to_container(this):this.E.position_canvas==null}container_layout(){var _this$E$standard_cont;return(_this$E$standard_cont=this.E.standard_container_layout)!=null?_this$E$standard_cont:this.get_static_property("container_layout")}should_add_extra_wrapper(){if(this.container_layout()!==_responsive_layout.default.FIXED_LAYOUT){for(let child of this.definition_or_self.elements()){var _child$get_static_pro,_child$get_static_pro2;let min_height=(_child$get_static_pro=child.get_static_property("min_height_css",!0))!=null?_child$get_static_pro:"",max_height=(_child$get_static_pro2=child.get_static_property("max_height_css",!0))!=null?_child$get_static_pro2:"";if(min_height.includes("%")||max_height.includes("%"))return!0;for(let state of child.states()){var _state$get_static_pro,_state$get_static_pro2;let min_height2=(_state$get_static_pro=state.get_static_property("min_height_css"))!=null?_state$get_static_pro:"",max_height2=(_state$get_static_pro2=state.get_static_property("max_height_css"))!=null?_state$get_static_pro2:"";if(min_height2.indexOf("%")!==-1||max_height2.indexOf("%")!==-1)return!0}}if(["FloatingGroup","GroupFocus","Popup"].includes(this.type())&&this.definition_or_self.elements().find(child=>child.type()==="RepeatingGroup"&&!child.get_static_property("fit_height"))||this.container_layout()==="column"&&!this.never_fits_height()&&this.definition_or_self.elements().find(child=>child.container_layout()==="relative"&&!child.get_static_property("single_height")&&!child.fit_height()))return!0}return!1}container_locked(){let layout_type=this.container_layout();return layout_type!=null&&layout_type!=="fixed"}get_new_event_json(){return this.json.child("workflows").child(u.LUID())}events(filter){return this.json.smart_cache("events_"+String(filter),json=>{let items=json.child("workflows").children().map(j=>_registry.default.new_workflow_item(j));return _nodes_utils.default.filter_array(filter,items)})}find_events(filter){return this.events(filter)}find_actions(filter){return this.events().flatMap(event=>event.all_next(filter))}find_customs(){let app=this.app(),visited=new Set,to_visit=[this],result=[],element;for(;(element=to_visit.pop())!=null;)element.find_elements("CustomElement").forEach(custom=>{let custom_id=custom.get_static_property("custom_id"),custom_def=app.custom_definition(custom_id);custom_def!=null&&!visited.has(custom_id)&&(visited.add(custom_id),to_visit.push(custom_def),result.push(custom_def))});return result}find_actions_custom(filter){let from_self=this.find_actions(filter),from_customs=this.find_customs().flatMap(element=>element.find_actions(filter));return[...from_self,...from_customs]}elements(filter){if(!this.can_have_children())return _nodes_utils.default.enhance_array([]);let elements=this.json.child("elements").children().filter(json=>json.child("id").exists()).map(json=>_registry.default.create_generic("element",json)),results=_nodes_utils.default.enhance_array(elements);return _nodes_utils.default.filter_array(filter,results)}find_elements(filter){let raw_elements=u.autorun_return(()=>_elements_utils.default.find_elements(_nodes_utils.default.to_raw(this),filter));return _nodes_utils.default.from_raw_array(this.json,_registry.default.new_element,raw_elements)}find_elements_custom(filter){let filter_fn=_nodes_utils.default.make_filter(filter),children2=this.elements().filter(element=>filter_fn(element)),descendants=this.elements().flatMap(element=>element.find_elements_custom(filter_fn)),custom_descendants=this.find_customs().flatMap(custom_def=>custom_def.find_elements(filter_fn)),results=[...children2,...descendants,...custom_descendants];return _nodes_utils.default.enhance_array(results)}find_expressions(filter){let raw_expressions=u.autorun_return(()=>_elements_utils.default.element_find_expressions(_nodes_utils.default.to_raw(this),filter));return _nodes_utils.default.from_raw_array(this.json,_registry.default.new_expression,raw_expressions)}parent(){var _this$json$parent;if(this.fake)return null;let pnode=(_this$json$parent=this.json.parent())==null?void 0:_this$json$parent.parent();return pnode?_registry.default.new_element(pnode):null}parents(filter){let res=[],targ=this;for(;targ=targ.parent();)res.push(targ);return _nodes_utils.default.filter_array(filter,res)}context_element(){return this}root(){var _this$parent;return(_this$parent=this.parent())==null?void 0:_this$parent.root()}get_width(){return this.get_static_property("width")}get_height(){return this.get_static_property("height")}get_left(){return this.get_static_property("left")}get_top(){return this.get_static_property("top")}get_zindex(){return this.get_static_property("zindex")}can_be_variable_width(){return this.E.must_be_fixed_size!=null?!this.E.must_be_fixed_size(this):this.E.get_min_width!=null}fixed_width(){return!this.can_be_variable_width()||this.get_static_property("fixed_width")}min_width_adjustable_legacy(){return this.can_be_variable_width()&&!this.get_static_property("fixed_width")&&this.E.get_min_width(this)<this.get_width()}max_width_adjustable_legacy(){return this.min_width_adjustable_legacy()&&!this.E.not_max_adjustable_legacy&&!this.not_max_adjustable()}not_max_adjustable(){if(typeof this.E.not_max_adjustable=="function")return this.E.not_max_adjustable(this);var _this$E$not_max_adjus;return(_this$E$not_max_adjus=this.E.not_max_adjustable)!=null?_this$E$not_max_adjus:!1}default_min_width(){var _this$root$get_width,_this$root;return((_this$root$get_width=(_this$root=this.root())==null?void 0:_this$root.get_width())!=null?_this$root$get_width:0)>600?Math.round(this.get_width()*.2):this.get_width()}get_min_width(){if(this.E.get_min_width==null||this.get_static_property("fixed_width"))return this.get_width();let min_width_percent=this.get_static_property("min_width"),width=this.get_width(),user_set=(min_width_percent!=null?min_width_percent:0)/100*width,element_determined=this.E.get_min_width(this);return Math.max(user_set,element_determined)}get_max_width(){if(this.E.get_min_width==null||this.get_static_property("fixed_width"))return this.get_width();if(!this.get_static_property("use_max_width"))return null;let max_width_percent=this.get_static_property("max_width"),width=this.get_width();return(max_width_percent!=null?max_width_percent:100)/100*width}responsive_show(){return this.get_static_property("responsive_show")}responsive_show_width(){return this.get_static_property("responsive_show_width")}is_fixed_dimension(dimension){return this.get_static_property("single_".concat(dimension))}force_fixed(){return!this.E.no_fixed_sizing&&this.container_layout()==="fixed"}root_min_width(){return this.force_fixed()?this.get_width():this.get_static_property("min_width_px")}root_max_width(){return this.force_fixed()?this.get_width():this.not_max_adjustable()?null:this.get_static_property("max_width_px")}root_min_height(){return this.force_fixed()?this.get_height():this.get_static_property("min_height_px")}root_max_height(){return this.force_fixed()?this.get_height():this.not_max_adjustable()?null:this.get_static_property("max_height_px")}can_fit_width(){if(typeof this.E.can_fit_width=="function")return this.E.can_fit_width(this);var _this$E$can_fit_width;return(_this$E$can_fit_width=this.E.can_fit_width)!=null?_this$E$can_fit_width:!1}can_fit_height(){if(typeof this.E.can_fit_height=="function")return this.E.can_fit_height(this);var _this$E$can_fit_heigh;return(_this$E$can_fit_heigh=this.E.can_fit_height)!=null?_this$E$can_fit_heigh:!1}fit_width(){return this.E.uses_css_responsive&&this.can_fit_width()&&!this.force_fixed()&&!this.get_static_property("single_width")?this.get_static_property("fit_width"):!1}fit_height(){return this.E.uses_css_responsive?this.can_fit_height()&&!this.force_fixed()&&!this.get_static_property("single_height")?this.get_static_property("fit_height"):!1:!0}never_fits_width(){var _this$parent2;if(!this.can_fit_width()||this.force_fixed())return!0;let container_layout=(_this$parent2=this.parent())==null?void 0:_this$parent2.container_layout();if(container_layout===_responsive_layout.default.DIMENSION_TO_CROSS_AXIS.width){if(!this.get_static_property("fit_width"))return!0;let initial_halign=this.get_static_property("horiz_alignment",!0),state_changes_halign=this.states().some(state=>state.get_static_property("horiz_alignment")!=="stretch");return initial_halign==="stretch"&&!state_changes_halign}else return container_layout===_responsive_layout.default.FIXED_LAYOUT?!0:!this.get_static_property("fit_width")}never_fits_height(){var _this$parent3;if(!this.can_fit_height()||this.force_fixed())return!0;let container_layout=(_this$parent3=this.parent())==null?void 0:_this$parent3.container_layout();if(container_layout===_responsive_layout.default.DIMENSION_TO_CROSS_AXIS.height){if(this.get_static_property("single_height"))return!0;let initial_valign=this.get_static_property("vert_alignment",!0),state_changes_valign=this.states().some(state=>state.get_static_property("vert_alignment")!=="stretch");return initial_valign==="stretch"&&!state_changes_valign}else return container_layout===_responsive_layout.default.FIXED_LAYOUT?!0:!this.get_static_property("fit_height")}can_fix_aspect_ratio(){var _this$E$can_fix_aspec,_this$E$can_fix_aspec2,_this$E7;return(_this$E$can_fix_aspec=(_this$E$can_fix_aspec2=(_this$E7=this.E).can_fix_aspect_ratio)==null?void 0:_this$E$can_fix_aspec2.call(_this$E7,this))!=null?_this$E$can_fix_aspec:!1}has_fixed_aspect_ratio(){var _this$parent4;return this.can_fix_aspect_ratio()&&((_this$parent4=this.parent())==null?void 0:_this$parent4.container_layout())!=="fixed"&&this.get_static_property("use_aspect_ratio")}uses_css_responsive(){var _this$E$uses_css_resp;return(_this$E$uses_css_resp=this.E.uses_css_responsive)!=null?_this$E$uses_css_resp:!1}get_containing_element(){return this.parent()}no_margins(){var _this$E$no_margins,_this$E$no_margins2,_this$E8;return(_this$E$no_margins=(_this$E$no_margins2=(_this$E8=this.E).no_margins)==null?void 0:_this$E$no_margins2.call(_this$E8,this))!=null?_this$E$no_margins:!1}state_by_name(name){return new _State.default(this.json.child("states").child(name))}get_messages(){var _this$E$get_messages,_this$E$get_messages2,_this$E9;return(_this$E$get_messages=(_this$E$get_messages2=(_this$E9=this.E).get_messages)==null?void 0:_this$E$get_messages2.call(_this$E9,this))!=null?_this$E$get_messages:[]}add_specific_messages(messages){var _this$E$add_specific_,_this$E10;(_this$E$add_specific_=(_this$E10=this.E).add_specific_messages)==null||_this$E$add_specific_.call(_this$E10,messages,this)}get_states(){var _this$E$get_states,_this$E$get_states2,_this$E11;return(_this$E$get_states=(_this$E$get_states2=(_this$E11=this.E).get_states)==null?void 0:_this$E$get_states2.call(_this$E11,this))!=null?_this$E$get_states:[]}get_state_value(name){var _this$E$get_state_val,_this$E$get_state_val2,_this$E12;return _btypes.default.get((_this$E$get_state_val=(_this$E$get_state_val2=(_this$E12=this.E).get_state_value)==null?void 0:_this$E$get_state_val2.call(_this$E12,this,name))!=null?_this$E$get_state_val:"null")}_fields(include_all_properties){return this.E.fields(this,include_all_properties)}field(name){var _this$fields;return(_this$fields=this.fields)==null?void 0:_this$fields.call(this).find(a=>a.name===name)}field_names(){return this.E.field_names}is_styleable_property(prop_name){return this.get_styleable_properties()[prop_name]}get_property_applications(){var _this$E$property_appl;let a=(_this$E$property_appl=this.E.property_applications)!=null?_this$E$property_appl:[];return typeof a=="function"&&(a=a(this)),this._type==="CustomDefinition"?a:[...a,new property_applications.UniqueID]}get_value_id(){var _this$E$get_value_id,_this$E$get_value_id2,_this$E13;return(_this$E$get_value_id=(_this$E$get_value_id2=(_this$E13=this.E).get_value_id)==null?void 0:_this$E$get_value_id2.call(_this$E13,this))!=null?_this$E$get_value_id:"element."+this.id()}get_visible_workflows(){return _nodes_utils.default.filter_array(x=>!x.json._raw_gchild(shrink.S.properties,"workflow_disabled"),this.parents().flatMap(el=>el.events()))}get_related_workflows(event_type){let id=this.id(),res=this.get_visible_workflows().filter(event=>event.element_id()===id&&event.type()===event_type);return _nodes_utils.default.enhance_array(res)}can_have_children(){var _this$E$can_have_chil,_this$E$can_have_chil2,_this$E14;return(_this$E$can_have_chil=(_this$E$can_have_chil2=(_this$E14=this.E).can_have_children)==null?void 0:_this$E$can_have_chil2.call(_this$E14,this))!=null?_this$E$can_have_chil:!1}tell_editcanvas(){return!0}is_visible_on_page_load(){return this.E.is_visible_on_page_load(this)}modal(){var _this$E$modal,_this$E$modal2,_this$E15;return(_this$E$modal=(_this$E$modal2=(_this$E15=this.E).modal)==null?void 0:_this$E$modal2.call(_this$E15,this))!=null?_this$E$modal:!1}not_draggable(){var _this$E$not_draggable,_this$E$not_draggable2,_this$E16;return(_this$E$not_draggable=(_this$E$not_draggable2=(_this$E16=this.E).not_draggable)==null?void 0:_this$E$not_draggable2.call(_this$E16,this))!=null?_this$E$not_draggable:!1}not_resizable(){var _this$E$not_resizable,_this$E$not_resizable2,_this$E17;return(_this$E$not_resizable=(_this$E$not_resizable2=(_this$E17=this.E).not_resizable)==null?void 0:_this$E$not_resizable2.call(_this$E17,this))!=null?_this$E$not_resizable:!1}goes_on_document(){var _this$E$goes_on_docum,_this$E$goes_on_docum2,_this$E18;return(_this$E$goes_on_docum=(_this$E$goes_on_docum2=(_this$E18=this.E).goes_on_document)==null?void 0:_this$E$goes_on_docum2.call(_this$E18,this))!=null?_this$E$goes_on_docum:!1}draws_own_children(){var _this$E$draws_own_chi,_this$E$draws_own_chi2,_this$E19;return(_this$E$draws_own_chi=(_this$E$draws_own_chi2=(_this$E19=this.E).draws_own_children)==null?void 0:_this$E$draws_own_chi2.call(_this$E19,this))!=null?_this$E$draws_own_chi:!1}can_reference(){var _this$E$can_reference,_this$E$can_reference2,_this$E20;return(_this$E$can_reference=(_this$E$can_reference2=(_this$E20=this.E).can_reference)==null?void 0:_this$E$can_reference2.call(_this$E20,this))!=null?_this$E$can_reference:!0}get_style_node(){return _registry.default.new_expression(this.json.child("style"),this)}get_style_id(){var _this$json$child$get;return(_this$json$child$get=this.json.child("style").get())!=null?_this$json$child$get:void 0}get_style(){return this.app().style(this.get_style_id())}property_supports_states(){var _this$E$property_supp;return(_this$E$property_supp=this.E.property_supports_states)!=null?_this$E$property_supp:!0}property_supports_transitions(){var _this$E$property_supp2;return(_this$E$property_supp2=this.E.property_supports_transitions)!=null?_this$E$property_supp2:!0}hide_property_editor_tabs(){var _this$E$hide_property;return(_this$E$hide_property=this.E.hide_property_editor_tabs)!=null?_this$E$hide_property:!1}primary_field(){var _this$E$primary_field,_this$E23;return(_this$E$primary_field=(_this$E23=this.E).primary_field)==null?void 0:_this$E$primary_field.call(_this$E23,this)}mandatory_sections(){var _this$E$mandatory_sec,_this$E$mandatory_sec2,_this$E24;return(_this$E$mandatory_sec=(_this$E$mandatory_sec2=(_this$E24=this.E).mandatory_sections)==null?void 0:_this$E$mandatory_sec2.call(_this$E24,this))!=null?_this$E$mandatory_sec:null}can_copy_style(){var _this$E$can_copy_styl;return(_this$E$can_copy_styl=this.E.can_copy_style)!=null?_this$E$can_copy_styl:!0}property_sections(mode){var _property_sections$fo;return(_property_sections$fo=property_sections.for_mode[mode])!=null?_property_sections$fo:property_sections.for_mode.all}exclusively_responsive_sections(){return[{name:"Responsive",show_title:!1},{name:"Margins",show_title:!1},{name:"PaddingFields",show_title:!1},{name:"ResponsiveContainer",show_title:!1}]}element_custom_states(){return this.E.element_custom_states?this.E.element_custom_states():this.json.child("custom_states").children().map(json=>_registry.default.create(_node_types.default.CUSTOM_STATE,json))}element_custom_state(name){if(!name)return null;if(this.E.element_custom_state)return this.E.element_custom_state(name);{let base_name=btype_ids.custom_type_name(name),json=this.json.child("custom_states").child(base_name);return _registry.default.create(_node_types.default.CUSTOM_STATE,json)}}transitions(){let transitions=this.json.child("transitions").children().map(json=>new _Transition.default(json,this));return _nodes_utils.default.enhance_array(transitions)}transition(prop_name){if(this.E.transition)return this.E.transition(prop_name);let element_transition=this.json.child("transitions").child(prop_name);if(element_transition.exists())return new _Transition.default(element_transition,this);let style2=this.get_style_if_exists();if(style2)return style2.transition(prop_name)}add_transition(prop_name){_lib.default.or_throw().changes.create_change("AddTransition",{element_id:this.id(),prop_name,data:_Transition.default.default_transition}).execute(),this.commit()}find_events_using_this_element(){var _Lib$or_throw$visual_,_Lib$or_throw$visual_2;let element_id=this.id();return((_Lib$or_throw$visual_=(_Lib$or_throw$visual_2=_lib.default.or_throw().visual_edit.root_node())==null?void 0:_Lib$or_throw$visual_2.events())!=null?_Lib$or_throw$visual_:[]).filter(event=>event.element_id()===element_id||event.find_my_expressions("GetElement.element_id="+element_id).length)}find_actions_using_this_element(){var _Lib$or_throw$visual_3,_Lib$or_throw$visual_4;let element_id=this.id();return((_Lib$or_throw$visual_3=(_Lib$or_throw$visual_4=_lib.default.or_throw().visual_edit.root_node())==null?void 0:_Lib$or_throw$visual_4.events())!=null?_Lib$or_throw$visual_3:[]).flatMap(event=>event.actions()||[]).filter(action=>action.element_id()===element_id||action.find_my_expressions("GetElement.element_id="+element_id).length)}find_elements_using_this_element(){var _Lib$or_throw$visual_5,_Lib$or_throw$visual_6,_Lib$or_throw$visual_7;let element_id=this.id();return((_Lib$or_throw$visual_5=(_Lib$or_throw$visual_6=_lib.default.or_throw().visual_edit.root_node())==null||(_Lib$or_throw$visual_7=_Lib$or_throw$visual_6.find_elements)==null?void 0:_Lib$or_throw$visual_7.call(_Lib$or_throw$visual_6))!=null?_Lib$or_throw$visual_5:[]).filter(element=>element.id()!==element_id&&element.find_expressions("GetElement.element_id="+element_id).length)}states(){let states=_elements_utils.default.get_states_from_raw_json(this.json).map(json=>new _State.default(json));return _nodes_utils.default.enhance_array(states)}get_styleable_properties(){var _this$E$styleable_pro;let general_style_properties=_style_properties2.default.get_style_properties(),element_style_properties=(_this$E$styleable_pro=this.E.styleable_properties)!=null?_this$E$styleable_pro:{};return u.extend({},general_style_properties,element_style_properties)}get_style_if_exists(){let id=this.json._child(shrink.S.style).get();if(id==null)return null;let style2=this.app().style(String(id));return style2.exists()?style2:null}has_overridden_style(){let has_element_padding_overridden=["top","bottom","left","right"].filter(dir=>this.property("padding_".concat(dir)).raw()!=null).length>0,overridden=!1;return this.get_style_if_exists()&&this.element_version()>=elements_consts.VERSION_STYLE_OVERRIDES&&(this.num_style_overrides()>0||has_element_padding_overridden)&&(overridden=!0),overridden}can_defer_drawing(){return typeof this.E.can_defer_drawing!="function"?!1:this.E.can_defer_drawing(this)}no_size_when_hidden(){var _this$parent6;let collapses=this.get_static_property("collapse_when_hidden"),out_of_document=!this.added_to_container(),in_fixed=this.is_responsive_v1()&&((_this$parent6=this.parent())==null?void 0:_this$parent6.container_layout())===_responsive_layout.default.FIXED_LAYOUT;return collapses||out_of_document||in_fixed}ignores_child_sizes(){return this.is_responsive_v1()&&this.uses_css_responsive()&&this.never_fits_width()&&this.never_fits_height()}element_version(styleable){var _Lib,_Lib$derived_name,_Lib2,_Lib2$derived_name,_this$root$get_static,_this$root2;return styleable&&this.get_style_if_exists()!=null?_appquery.default.get_public_setting("style_version"):((_Lib=(0,_lib.default)())==null||(_Lib$derived_name=_Lib.derived_name)==null?void 0:_Lib$derived_name.call(_Lib))==="Responsive"||((_Lib2=(0,_lib.default)())==null||(_Lib2$derived_name=_Lib2.derived_name)==null?void 0:_Lib2$derived_name.call(_Lib2))==="ResponsiveDependencies"?elements_consts.VERSION_STYLE_OVERRIDES-1:(_this$root$get_static=(_this$root2=this.root())==null?void 0:_this$root2.get_static_property("element_version"))!=null?_this$root$get_static:elements_consts.LATEST_ELEMENT_VERSION}is_responsive_v1(){var _this$root$get_respon,_this$root3;return((_this$root$get_respon=(_this$root3=this.root())==null?void 0:_this$root3.get_responsive_version())!=null?_this$root$get_respon:1)>0}},_applyDecoratedDescriptor(_class.prototype,"should_add_extra_wrapper",[_dec],Object.getOwnPropertyDescriptor(_class.prototype,"should_add_extra_wrapper"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"get_related_workflows",[_dec2],Object.getOwnPropertyDescriptor(_class.prototype,"get_related_workflows"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"states",[_dec3],Object.getOwnPropertyDescriptor(_class.prototype,"states"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"get_styleable_properties",[_dec4],Object.getOwnPropertyDescriptor(_class.prototype,"get_styleable_properties"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"get_style_if_exists",[_dec5],Object.getOwnPropertyDescriptor(_class.prototype,"get_style_if_exists"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"element_version",[_dec6],Object.getOwnPropertyDescriptor(_class.prototype,"element_version"),_class.prototype),_class);module.exports=GenericElement}});var require_Element=__commonJS({"lib-browser-old/lang/elements/Element.js"(exports,module){"use strict";init_define_process_env();init_shim();require_web_queue_microtask();require_es_regexp_exec();require_es_string_match();require_es_array_includes();require_es_string_includes();var u=require_u2(),Lib=require_lib(),logger=require_logger(),plugin_getter=require_plugin_getter();require_plugin_registry();var nodes=require_nodes(),elements_utils=require_elements_utils(),GenericElement=require_GenericElement(),dot_regex=/\./g;module.exports=class extends GenericElement{constructor(json,fake,options){super(json,fake,options),this.maybe_register_issue_indexers(),this.setup_autofixer()}maybe_register_issue_indexers(){!this.fake&&elements_utils._use_issue_checker()&&this.is_top_level()&&this.app().can_run_issue_checker()&&!this.issue_checker_registered&&(this.issue_checker_registered=!0,this.json.register_indexer("issues_list",()=>{if(Lib().visual_edit.allow_issue_indexer_runs()){let me=nodes.new_element(this.json),id=me.id();if(!id)return;let issues=Lib().apptests.check_issues(me);return[["issues_list",id],u.json_stringify(issues)]}}))}setup_autofixer(){u.is_edit_mode()&&!this.fake&&this.E.autofix_issues!=null&&queueMicrotask(()=>{let destroyed=!1,ar=null;ar=u.autotop(()=>{var _Lib$visual_edit$get_;if(this.root()==null){var _ar;destroyed=!0,(_ar=ar)==null||_ar.destroy();return}this.root().id()===((_Lib$visual_edit$get_=Lib().visual_edit.get_root())==null?void 0:_Lib$visual_edit$get_.id())&&this.E.autofix_issues(this)}),destroyed&&ar.destroy()})}can_animate(){return this.E.can_animate?this.E.can_animate(this):!(this.E.do_show||this.E.workflow_show)}is_top_level(){var _path$match;let path=this.json.path();return(path==null||(_path$match=path.match(dot_regex))==null?void 0:_path$match.length)===3}check_for_errors(report,compute_cross_page,derived_mode){var _this$E$check_for_err,_this$E;if(((_this$E$check_for_err=(_this$E=this.E).check_for_errors)==null?void 0:_this$E$check_for_err.call(_this$E,this,report,compute_cross_page))===!0)return;let properties_to_check=super.check_for_errors(report),our_plugins=plugin_getter.get_app_plugins().filter(Boolean).map(p=>p.name);if(this.E.is_plugin&&!our_plugins.includes(this.E.service)){let element=this.display(),plugin=plugin_getter.get_plugin(this.E.service).display();report("".concat(element," - You're using this element but haven't installed the plugin ").concat(plugin))}let children2=this.events().concat(this.states(),properties_to_check.children);if(!derived_mode){let direct_child_elements=this.elements();direct_child_elements.maybe_register_issue_indexers(),children2=children2.concat(direct_child_elements)}return{children:children2}}}}});var require_Style=__commonJS({"lib-browser-old/lang/elements/Style.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_reduce();require_es_array_reverse();require_es_array_iterator();require_web_dom_collections_iterator();require_es_json_stringify();require_web_dom_collections_for_each();var _dec,_dec2,_class;function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key]}),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce(function(desc2,decorator){return decorator(target,property,desc2)||desc2},desc),context&&desc.initializer!==void 0&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),desc.initializer===void 0&&(Object.defineProperty(target,property,desc),desc=null),desc}var u=require_u2(),decaf=require_decaf(),Lib=require_lib(),logger=require_logger(),caching=require_caching(),evaluate_static=require_evaluate_static(),nodes=require_nodes(),RAW=require_RAW(),shrink=require_shrink(),elements_consts=require_elements(),elements_utils=require_elements_utils(),elements_state=require_elements_state(),property_sections=require_property_sections(),missing_element=require_missing_element(),Transition2=require_Transition(),debounce=require_debounce(),appquery=require_appquery(),css2=require_css(),{S}=shrink,Style=(_dec=caching.cached({type:caching.RUN_MODE}),_dec2=caching.cached({type:caching.RUN_MODE}),_class=class extends nodes.HasProperties{constructor(){super(...arguments)}is_style(){return!0}root(){return null}is_responsive_v1(){return!0}get_type_display(){return elements_utils.get_short_display(this.type())}name(){return this.json.name()}id(){return this.name()}type(){return this.json.child("type").get()}property_supports_states(){return!0}property_supports_transitions(){return!0}mandatory_sections(){return[]}get_styleable_static_property(name){return this.get_static_property(name)}get_element_from_style(){return this.json.exists()?((!this.json.child("id").get()||!this.json.to_id().child("type").get())&&(logger.warn("legacy situation, no id or type on style",{path:this.json.path(),value:this.json.raw()}),this.json.child("id").set(this.name(),{name:"LegacyStyleChange"}),Lib().changes.set_id_cache({json:this.json,data:this.json.raw()})),nodes.new_element(this.json,!0)):null}E_object(){var _Lib$load_plugin;return this.type()&&(_Lib$load_plugin=Lib().load_plugin(Lib().plugin_prefixes.element+this.type(),!0))!=null?_Lib$load_plugin:missing_element}get_width(){return this.get_default("width")}get_height(){return this.get_default("height")}get_default(name){var _this$field_names,_this$field_names$nam;return(_this$field_names=this.field_names())==null||(_this$field_names$nam=_this$field_names[name])==null?void 0:_this$field_names$nam.default}context_element(){return this}force_fixed(){return!1}get_value_id(){return"style."+this.type()}get_style_id(){return null}get_style_if_exists(){return null}element_version(styleable){return appquery.get_public_setting("style_version")}state_by_name(name){return nodes.create(nodes.STYLE_STATE,this.json.child("states").child(name))}transitions(){return nodes.enhance_array(this.json.child("transitions").children().map(json=>nodes.create(nodes.TRANSITION,json,this)))}transition(prop_name){return nodes.create(nodes.TRANSITION,this.json.child("transitions").child(prop_name),this)}_fields(include_all_properties){return this.E_object().fields(this,include_all_properties)}use_responsive_algorithm(){return appquery.get_public_setting("no_legacy_responsive")}get_property_applications(){let E=this.E_object();return typeof E.property_applications=="function"?E.property_applications(this):E.property_applications}property_sections(mode){var _property_sections$fo;return(_property_sections$fo=property_sections.for_mode[mode])!=null?_property_sections$fo:property_sections.for_mode.all}get_precomputed(){if(!this._precomputed){let object2=this.json._raw_child(S.properties),precomputed={};decaf.object_entries(object2).forEach(_ref=>{let[_name1,value]=_ref,name1=shrink.expand(_name1);precomputed[name1]=evaluate_static.get_static(value)});for(let state of this.states())for(let name of state.property_names())precomputed[name]=elements_consts.NOT_STATIC_PROP;this._precomputed=precomputed}return this._precomputed}field_names(){return this.E_object()?this.E_object().field_names:null}states(){return nodes.enhance_array(elements_utils.get_states_from_raw_json(this.json).map(json=>nodes.create(nodes.STYLE_STATE,json)))}},_applyDecoratedDescriptor(_class.prototype,"field_names",[_dec],Object.getOwnPropertyDescriptor(_class.prototype,"field_names"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"states",[_dec2],Object.getOwnPropertyDescriptor(_class.prototype,"states"),_class.prototype),_class);module.exports=Style}});var require_StyleState=__commonJS({"lib-browser-old/lang/elements/StyleState.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_json_stringify();var Lib=require_lib(),elements_utils=require_elements_utils(),State=require_State(),Style=require_Style();module.exports=class extends State{context_element(){return new Style(this.json.parent().parent())}toUniqueString(){return new State(this.json).toUniqueString()}}}});var require_CustomFieldState=__commonJS({"lib-browser-old/lang/application/CustomFieldState.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_includes();var nodes=require_nodes(),btype_ids=require_btype_ids(),defaultable=["text","number","date","boolean","file","image","geographic_address"];module.exports=class extends nodes.AppNode{display(){return this.json.child("display").get()}value(){return this.json.child("value").get()}default_val(){return this.can_have_default()?this.json.child("default_val").raw():null}can_have_default(){if(this.name()==null||this.is_list())return!1;let value=this.value();return defaultable.includes(value)||btype_ids.is_option_set(value)}is_list(){return btype_ids.is_list(this.value())}exists(){return this.json.child("value").get()!=null}id(){return this.name()}}}});var require_CustomState=__commonJS({"lib-browser-old/lang/elements/CustomState.js"(exports,module){"use strict";init_define_process_env();init_shim();var u=require_u2(),Lib=require_lib(),nodes=require_nodes(),missing_btype=require_missing_btype(),btype_ids=require_btype_ids(),CustomFieldState=require_CustomFieldState();module.exports=class extends CustomFieldState{name(){return btype_ids.custom_type(this.json.name())}make_static(){return this.json.child("make_static").get()}parent(){return nodes.create(nodes.ELEMENT,this.json.parent().parent())}default_val(){return this.is_list()?[]:super.default_val()}}}});var require_Root=__commonJS({"lib-browser-old/lang/elements/Root.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();var u=require_u2(),mode_check=require_mode_check(),nodes=require_nodes(),Lib=require_lib(),RAW=require_RAW(),elements_utils=require_elements_utils(),GenericElement=require_GenericElement(),logger=require_logger(),appquery=require_appquery(),css2=require_css();module.exports=class extends GenericElement{constructor(json,options){super(json,!1,options)}use_responsive_algorithm(){return appquery.get_public_setting("no_legacy_responsive")||this.get_responsive_version()>0||this.get_static_property("new_responsive")}get_responsive_version(force_server_access){var _ref,_this$get_static_prop;return mode_check.on_server()&&!Lib().force_responsive_version&&!force_server_access?0:(_ref=(_this$get_static_prop=this.get_static_property("responsive_version"))!=null?_this$get_static_prop:appquery.get_public_setting("base_responsive_version"))!=null?_ref:0}default_width(){return this.get_static_property("default_width")}run_indexers(timeout){return this.json.run_indexers(timeout)}parent(){return null}root(){return this}is_api(){return!1}name(){return this.json.child("name").get()}}}});var require_Page=__commonJS({"lib-browser-old/lang/elements/Page.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_regexp_exec();require_es_regexp_test();require_es_array_includes();var Lib=require_lib(),shrink=require_shrink(),service_type_parser=require_service_type_parser(),Root=require_Root(),app_json_consts=require_app_json(),moment=require_moment_timezone_min(),{has_adv_timezone_overridden}=require_timezone_override_settings();module.exports=class extends Root{constructor(json){super(json,{_type:"Page"})}get_plugin_element_headers(){let long_path=this.json.path(),short_path=shrink.shrink(long_path.split(".")[0])+"."+long_path.split(".")[1];return Lib().derived("PagePluginHeaders",short_path).content()}load_plugin_element_headers(){let headers=[];for(let element_type of this.get_element_types()){var _Lib$load_plugin,_Lib$load_plugin$elem,_Lib$load_plugin2;let[plugin_key,element_name]=service_type_parser.get_plugin_and_type(element_type),no_cache=/_current/.test(plugin_key),val=(_Lib$load_plugin=Lib().load_plugin(Lib().plugin_prefixes.element+element_type,!0,no_cache))==null||(_Lib$load_plugin$elem=(_Lib$load_plugin2=_Lib$load_plugin).element_html_header)==null?void 0:_Lib$load_plugin$elem.call(_Lib$load_plugin2);![null,void 0,""].includes(val)&&!headers.includes(val)&&headers.push("<!-- ".concat(element_name," -->\n")+val+"\n")}return headers}is_custom_definition(){return!1}is_page(){return!0}is_api(){return!1}is_editor(){return this.json.child("is_editor").get()}is_plugin_editor(){return this.json.child("is_plugin_editor").get()}required_js_files(){return this.E.required_js_files(this)}required_css_files(){return this.E.required_css_files(this)}get_page_timezone(){let prop_suffix=has_adv_timezone_overridden()?"_overridden":"";switch(this.get_static_property("tz_type".concat(prop_suffix))){case"static":return this.get_static_property("tz_static".concat(prop_suffix));default:return moment.tz.guess()}}}}});var require_CustomDefinition=__commonJS({"lib-browser-old/lang/elements/CustomDefinition.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();var _Root=_interopRequireDefault(require_Root());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CustomDefinition=class extends _Root.default{constructor(json){super(json,{_type:"CustomDefinition"})}is_custom_definition(){return!0}is_page(){return!1}is_api(){return!1}get_default_value(custom_param){var _this$property$entrie,_this$property,_this$property$entrie2;return this==null||(_this$property$entrie=(_this$property=this.property("parameters")).entries)==null||(_this$property$entrie2=_this$property$entrie.call(_this$property).find(prop=>prop.get_static_property("param_id")===custom_param.split("_")[1]))==null?void 0:_this$property$entrie2.property("default_value").raw()}element_type(){return this.get_static_property("element_type")}};module.exports=CustomDefinition}});var require_elements2=__commonJS({"lib-browser-old/lang/elements/index.js"(exports){"use strict";init_define_process_env();init_shim();var elements=exports,nodes=require_nodes(),elements_utils=require_elements_utils(),elements_state=require_elements_state(),ElementInstance=require_ElementInstance(),ServerElementInstance=require_ServerElementInstance(),State=require_State(),Transition2=require_Transition(),GenericElement=require_GenericElement(),Element2=require_Element(),Style=require_Style(),StyleState=require_StyleState(),CustomState=require_CustomState(),Root=require_Root(),Page=require_Page(),CustomDefinition=require_CustomDefinition(),elements_consts=require_elements(),db=require_db2();require_workflow2();require_expressions();nodes.add(nodes.STATE,State);nodes.add(nodes.TRANSITION,Transition2);nodes.add(nodes.GENERIC_ELEMENT,GenericElement);nodes.add(nodes.ELEMENT,Element2);nodes.add(nodes.STYLE,Style);nodes.add(nodes.STYLE_STATE,StyleState);nodes.add(nodes.CUSTOM_STATE,CustomState);nodes.add(nodes.ROOT,Root);nodes.add(nodes.PAGE,Page);nodes.add(nodes.CUSTOM_DEFINITION,CustomDefinition);nodes.add_generic("element",(json,fake)=>json.smart_cache("element",new_element,fake));function new_element(json,fake){let type=json.child("type").get();return type==="Page"?new Page(json):type==="CustomDefinition"?new CustomDefinition(json):new Element2(json,fake)}elements.ElementInstance=function(element,mode){return new ElementInstance(element,mode)};elements.ServerElementInstance=element=>new ServerElementInstance(element);elements.STATE_NOT_READY=elements_consts.STATE_NOT_READY;elements.NOT_STATIC=elements_consts.NOT_STATIC_PROP;elements.seen_custom_names=elements_state.seen_custom_names;elements.seen_default_names=elements_state.seen_default_names;elements.create_layout_resizing_keylist=elements_utils.create_layout_resizing_keylist;elements.add_layout_resizing_key=elements_utils.add_layout_resizing_key;elements.perform_animate_in=elements_utils.perform_animate_in;elements.get_short_display=elements_utils.get_short_display;for(let k in ElementInstance.modes){let v=ElementInstance.modes[k];elements[k]=v}elements.transition_fns=Transition2.transition_fns;db.ElementInstance=ElementInstance}});var require_FakeApplication=__commonJS({"lib-browser-old/lang/application/FakeApplication.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports=class{constructor(version_json){this.version_json=version_json}domain(){return this.version_json.child("primary_domain").get()}appname(){return this.version_json.child("_id").get()}}}});var require_Application=__commonJS({"lib-browser-old/lang/application/Application.js"(exports,module){"use strict";init_define_process_env();init_shim();var Lib=require_lib();module.exports=class{constructor(_appname){this._appname=_appname}appname(){return this._appname}domain(){return Lib().app_domain()}}}});var require_consolidate_paths=__commonJS({"lib-browser-old/lang/consolidate_paths.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_string_starts_with();require_web_dom_collections_for_each();var consolidate_paths=exports;consolidate_paths.consolidate=function(paths){var _options$prefer_roots;let options=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if((_options$prefer_roots=options.prefer_roots)!=null||(options.prefer_roots=!1),paths.length===0)return paths;let root=new Map,leafs=new Set;for(let path of paths){let targ=root;for(let piece of path.split("."))targ.has(piece)||targ.set(piece,new Map),targ=targ.get(piece);leafs.add(targ)}let to_return=[];function walk(node,depth,path){let effective_depth=path.startsWith("api")?depth+1:depth;leafs.has(node)||effective_depth===2&&node.size>0&&options.prefer_roots||effective_depth===2&&node.size>4||effective_depth>2&&node.size>1?to_return.push(path):node.forEach((child,piece)=>walk(child,depth+1,path===""?piece:path+"."+piece))}return walk(root,0,""),to_return}}});var require_known_plugins=__commonJS({"lib-browser-old/constants/known_plugins.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.ZIGGEO=exports.TWILIO=exports.STRIPE=exports.SENDGRID=exports.SEGMENT=exports.RECAPTCHA=exports.PEXELS=exports.MAILCHIMP=exports.LOLLIPOP=exports.LEGACY_API_CONNECTOR=exports.DOCUSIGN=exports.DB_CONNECTOR=exports.BUBBLE_PLUGIN=exports.BUBBLEBOT=exports.BRAINTREE=exports.BOX=exports.BLOCKSPRING=exports.API_CONNECTOR=exports.ADD_TO_ANY=void 0;var _safe_require=_interopRequireDefault(require_safe_require());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_safe_require.default.safe_register("./constants/known_plugins",exports);var API_CONNECTOR="apiconnector2";exports.API_CONNECTOR=API_CONNECTOR;var BLOCKSPRING="Blockspring";exports.BLOCKSPRING=BLOCKSPRING;var BOX="box";exports.BOX=BOX;var BRAINTREE="braintree";exports.BRAINTREE=BRAINTREE;var BUBBLE_PLUGIN="bubble_plugin";exports.BUBBLE_PLUGIN=BUBBLE_PLUGIN;var BUBBLEBOT="bubblebot";exports.BUBBLEBOT=BUBBLEBOT;var DB_CONNECTOR="dbconnector";exports.DB_CONNECTOR=DB_CONNECTOR;var DOCUSIGN="docusign";exports.DOCUSIGN=DOCUSIGN;var LEGACY_API_CONNECTOR="apiconnector";exports.LEGACY_API_CONNECTOR=LEGACY_API_CONNECTOR;var MAILCHIMP="mailchimp";exports.MAILCHIMP=MAILCHIMP;var PEXELS="pexels";exports.PEXELS=PEXELS;var RECAPTCHA="recaptcha";exports.RECAPTCHA=RECAPTCHA;var SEGMENT="segment";exports.SEGMENT=SEGMENT;var SENDGRID="sendgrid";exports.SENDGRID=SENDGRID;var STRIPE="stripe";exports.STRIPE=STRIPE;var TWILIO="twilio";exports.TWILIO=TWILIO;var ZIGGEO="ziggeo";exports.ZIGGEO=ZIGGEO;var ADD_TO_ANY="addtoany";exports.ADD_TO_ANY=ADD_TO_ANY;var LOLLIPOP="lollipop";exports.LOLLIPOP=LOLLIPOP}});var require_plugin3=__commonJS({"lib-browser-old/lang/plugin.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.Plugin=void 0;require_es_symbol_description();require_es_array_includes();require_es_string_includes();require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_reverse();var _plugin_getter=_interopRequireDefault(require_plugin_getter()),_plugin_registry=_interopRequireDefault(require_plugin_registry()),service_type_parser=_interopRequireWildcard(require_service_type_parser()),_appquery=_interopRequireDefault(require_appquery()),u=_interopRequireWildcard(require_u2()),logger=_interopRequireWildcard(require_logger()),plugin_consts=_interopRequireWildcard(require_plugin()),known_plugins_consts=_interopRequireWildcard(require_known_plugins()),image_utils=_interopRequireWildcard(require_image_utils());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var plugin=exports;plugin.is_hardcoded=id=>{let trimed_id=service_type_parser.get_plugin_id(id);return!u.is_UUID(trimed_id)};var parse_plugin_history=plugin_history=>typeof plugin_history=="string"?JSON.parse(plugin_history):[],Plugin=class{constructor(id,data){this.id=id,this.data=data}_raw(){return this.data?this.data:null}exists(){return this.data!=null}is_missing(){var _this$_raw;return((_this$_raw=this._raw())==null?void 0:_this$_raw.display)==null}deleted(){var _this$_raw2;return this.is_missing()||((_this$_raw2=this._raw())==null?void 0:_this$_raw2.deleted)}display(){var _this$_raw3;return this.is_missing()?"Removed plugin ("+this.id+")":(_this$_raw3=this._raw())==null?void 0:_this$_raw3.display}description(){var _this$_raw$descriptio,_this$_raw4;let t=(_this$_raw$descriptio=(_this$_raw4=this._raw())==null?void 0:_this$_raw4.description)!=null?_this$_raw$descriptio:"";return this.deleted()&&(t+=" \n\nNote that the plugin author has removed this plugin from the marketplace. You can still use it in your application but it cannot be installed in new ones."),t}is_official(){var _this$_raw5,_this$_raw$creator_na,_this$_raw6,_this$_raw7;let official_flag=(_this$_raw5=this._raw())==null?void 0:_this$_raw5.official,creator_not_found=[plugin_consts.NO_CREATOR_NAME,plugin_consts.LEGACY_NO_CREATOR_NAME].includes((_this$_raw$creator_na=(_this$_raw6=this._raw())==null?void 0:_this$_raw6.creator_name)!=null?_this$_raw$creator_na:""),creator_id=(_this$_raw7=this._raw())==null?void 0:_this$_raw7.creator_id,creator_bubble_team_member=!creator_id||plugin_consts.BUBBLE_TEAM_MEMBER_IDS.includes(creator_id);return!!official_flag||!creator_not_found&&creator_bubble_team_member}help(){var _this$_raw$help,_this$_raw8;return(_this$_raw$help=(_this$_raw8=this._raw())==null?void 0:_this$_raw8.help)!=null?_this$_raw$help:""}icon(){var _this$_raw9;let icon=(_this$_raw9=this._raw())==null?void 0:_this$_raw9.icon;if(icon)return image_utils.optimize_image(icon+"?ignore_imgix")}has_version(){return!plugin.is_hardcoded(this.id)&&!this.is_testing()&&!this.is_missing()}versions(){var _this$data;if(!this.has_version())return{};let raw=parse_plugin_history((_this$data=this.data)==null?void 0:_this$data.history),res={};for(let{version,description}of raw==null?void 0:raw.reverse())res[version]="".concat(version," - ").concat(description);return res}latest_version(){var _this$_raw10;if(this.has_version())return(_this$_raw10=this._raw())==null?void 0:_this$_raw10.last_version}current_version(){return _appquery.default.get_public_setting("plugins.".concat(this.id))}get_service(){var _plugin_getter$get_pl;return(_plugin_getter$get_pl=_plugin_getter.default.get_plugin(this.id,this.current_version()))!=null?_plugin_getter$get_pl:MISSING_SERVICE}is_paid(){let price=this.price(),one_time_price=this.one_time_price(),has_price=price?price>0:!1,has_one_time_price=one_time_price?one_time_price>0:!1;return(has_price||has_one_time_price)&&this.license()===plugin_consts.LICENSE_COMMERCIAL}};exports.Plugin=Plugin;var MISSING_SERVICE={is_missing(){return!0}};plugin.Plugin=Plugin}});var require_plugins=__commonJS({"lib-browser-old/lang/plugins.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_object_entries();var safe_require=require_safe_require(),Lib=require_lib(),plugin_consts=require_plugin(),known_plugins_consts=require_known_plugins(),decaf=require_decaf(),plugin_class=require_plugin3(),plugin_registry=require_plugin_registry(),appquery=require_appquery(),plugins=exports;safe_require.safe_register("./lang/plugins",plugins);plugins.is_hardcoded=plugin_class.is_hardcoded}});var require_editor=__commonJS({"lib-browser-old/constants/editor.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.PUBLIC_ACTIVE_EXPERIMENTS=exports.MAX_FILE_COMPOSER_SIZE=exports.LEGACY_EXPERIMENTS=exports.FEATURE_FLAGS_PATH=exports.DEPRECATED_EXPERIMENTS=void 0;var _byte=require_byte(),MAX_FILE_COMPOSER_SIZE=50*_byte.MEBIBYTE;exports.MAX_FILE_COMPOSER_SIZE=MAX_FILE_COMPOSER_SIZE;var FEATURE_FLAGS_PATH="feature_flags.";exports.FEATURE_FLAGS_PATH=FEATURE_FLAGS_PATH;var PUBLIC_ACTIVE_EXPERIMENTS={parens:{display:"Expression parentheses",description:"Automatically add parentheses to all dynamic expressions in the editor. Makes \u201CCurrent Page Width +2 *3\u201D display as \u201C(Current Page Width + 2) * 3\u201D. This feature lets you add to any part of a dynamic expression, and indicate where to apply a piece of a dynamic expression.",launch_date:1650973876351,modification_date:1650973876351,alters_app_json:!0,overridden_by:"composer_revamp"},reference_snippet:{display:"Show snippets of the reference on hover",description:"When hovering any feature in the editor, show the beginning of the manual entry.",launch_date:1650973876351,modification_date:1650973876351,alters_app_json:!1},composer_revamp:{display:"New expression composer",description:"Intuitively edit in the middle, view implicit parentheses, debug errors, and use keyboard shortcuts in this new interaction model for the expression composer. \n\nNote: This feature overrides the experimental parentheses feature.",launch_date:1692117e6,modification_date:1695219821e3,alters_app_json:!0}};exports.PUBLIC_ACTIVE_EXPERIMENTS=PUBLIC_ACTIVE_EXPERIMENTS;var LEGACY_EXPERIMENTS=["deferred_drawing","tz_info_in_date_input","react_upgrade","reorg_component_selection","defer_element_instances","defer_edit_mode"];exports.LEGACY_EXPERIMENTS=LEGACY_EXPERIMENTS;var DEPRECATED_EXPERIMENTS={timezone_improvements:{display:"Overriding timezones more broadly (deprecated)",description:"This feature set allows you to set an overriding timezone for any page, any backend workflow (API workflow, recurring event, and database trigger event), and when using the :rounding to operator.",launch_date:1657566861888,modification_date:1657566861888,alters_app_json:!1,has_been_previously_used:!1,deprecation_bv:20,test_app_exceptions:["test_app_elements"]},react_upgrade:{display:"New, more performant elements rendering (deprecated)",description:"This feature enables a new experimental rendering pipeline which more optimally renders any elements you have on the page. It does so by precomputing a lot of the properties on the server beforehand, and shipping a static CSS file to the client to avoid repeated work. \n\nNote: This feature only affects new responsive pages.",launch_date:1659456830513,modification_date:1659456830513,alters_app_json:!1,deprecation_bv:21}};exports.DEPRECATED_EXPERIMENTS=DEPRECATED_EXPERIMENTS}});var require_advanced_features=__commonJS({"lib-browser-old/constants/advanced_features.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.ORDERED_ADVANCED_FEATURES=exports.ADVANCED_FEATURE_JSON_SETTINGS_PATH=exports.ADVANCED_FEATURES=void 0;var ADVANCED_FEATURE_JSON_SETTINGS_PATH="advanced_features";exports.ADVANCED_FEATURE_JSON_SETTINGS_PATH=ADVANCED_FEATURE_JSON_SETTINGS_PATH;var ORDERED_ADVANCED_FEATURES=["timezone_controls","expose_id_option"];exports.ORDERED_ADVANCED_FEATURES=ORDERED_ADVANCED_FEATURES;var ADVANCED_FEATURES={timezone_controls:{display:"Enable timezone override controls",enabled_by_default:!0,children_advanced_features:["timezone_controls_date_time_inputs","timezone_controls_page","timezone_controls_backend_workflows"]},timezone_controls_date_time_inputs:{display:"Date-time inputs (Date-Time Picker and Input)",enabled_by_default:!0,parent_advanced_feature:"timezone_controls"},timezone_controls_page:{display:"Page (at the individual page level)",enabled_by_default:!1,parent_advanced_feature:"timezone_controls",fallback:["experimental_feature","timezone_improvements"]},timezone_controls_backend_workflows:{display:"Backend workflows (API workflows, scheduled workflows, data triggers",enabled_by_default:!1,parent_advanced_feature:"timezone_controls",fallback:["experimental_feature","timezone_improvements"]},expose_id_option:{display:"Expose the option to add an ID attribute to HTML elements",enabled_by_default:!1,fallback:["raw_path","settings.client_safe.expose_id_option"]}};exports.ADVANCED_FEATURES=ADVANCED_FEATURES}});var require_pricing_configs=__commonJS({"lib-browser-old/shared/pricing_configs.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.getPricingPlanKey=getPricingPlanKey;exports.isStateR=isStateR;exports.registerIsStateRHook=registerIsStateRHook;exports.registerPricingPlanKeyHook=registerPricingPlanKeyHook;var logger=_interopRequireWildcard(require_logger());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var isNewPricingReleasedHook,pricingPlanKeyHook;function isStateR(){return isNewPricingReleasedHook?isNewPricingReleasedHook():!1}function getPricingPlanKey(appname){if(!pricingPlanKeyHook){logger.warn("No function registered to getPricingPlanKey");return}return pricingPlanKeyHook(appname)}function registerIsStateRHook(fn){isNewPricingReleasedHook=fn}function registerPricingPlanKeyHook(fn){pricingPlanKeyHook=fn}}});var require_breakpoints=__commonJS({"lib-browser-old/constants/breakpoints.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.DEFAULT_BREAKPOINTS=exports.BUILT_IN_BREAKPOINTS=void 0;var BUILT_IN_BREAKPOINTS={"built-in-mobile":{name:"Mobile",size:320,default:!1,builtin:!0},"built-in-mobile-landing":{name:"Mobile Landscape",size:768,default:!1,builtin:!0},"built-in-tablet":{name:"Tablet",size:992,default:!1,builtin:!0},"built-in-desktop":{name:"Desktop",size:1200,default:!1,builtin:!0}};exports.BUILT_IN_BREAKPOINTS=BUILT_IN_BREAKPOINTS;var DEFAULT_BREAKPOINTS={builtin_mobile:{icon:"breakpoint-mobile",display:"Mobile",width:320},builtin_mobile_landscape:{icon:"breakpoint-mobile-landscape",display:"Mobile landscape",width:768},builtin_tablet:{icon:"breakpoint-tablet",display:"Tablet",width:992},builtin_desktop:{icon:"breakpoint-desktop",display:"Destkop",width:1200}};exports.DEFAULT_BREAKPOINTS=DEFAULT_BREAKPOINTS}});var require_page_name_utilities=__commonJS({"lib-browser-old/shared/page_name_utilities.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_regexp_exec();require_es_string_replace();require_es_array_includes();require_es_string_includes();var routes_consts=require_routes(),appquery=require_appquery(),{UnexpectedError}=require_errors(),page_name_utilities=exports;page_name_utilities.throw_if_invalid_page_name=name=>{let error_message;if([error_message,name]=__array__(page_name_utilities.validate_page_name(name)),error_message)throw new UnexpectedError(error_message)};page_name_utilities.sanitize_page_name=name=>(name!=null?name:{}).toLowerCase().replace(/[^a-z0-9-]/g,"_");page_name_utilities.validate_page_name=function(name,allow_duplicates){return name?(name=page_name_utilities.sanitize_page_name(name),!allow_duplicates&&(appquery.get_page_by_name(name)||appquery.get_custom_by_name(name))?["You already have a page or reusable element named "+name+" in your app, please use a different name"]:routes_consts.ILLEGAL_PAGE_NAMES.includes(name)?["Unfortunately, you can't name a page "+name+" because it is a reserved keyword on the Bubble platform.  Please try a different name"]:[null,name]):["Please enter a page name"]};page_name_utilities.validate_custom_name=function(name){return name?appquery.get_custom_by_name(name)||appquery.get_page_by_name(name)?["You already have a page or reuseable element named "+name+" in your app, please use a different name"]:[null,name]:["Please enter a name"]};function __array__(x){return Array.from(x)}}});var require_id_to_path_utilities=__commonJS({"lib-browser-old/shared/id_to_path_utilities.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.push_id_to_path=push_id_to_path;exports.reset_id_to_path=reset_id_to_path;exports.set_path=set_path;require_es_array_iterator();require_web_dom_collections_iterator();var appquery=require_appquery(),ID_TO_PATH="_index.id_to_path";function reset_id_to_path(){let app=arguments.length>0&&arguments[0]!==void 0?arguments[0]:appquery.app(),new_paths={};get_paths(app.json,(id,path)=>{new_paths[id]=path}),app.json.by_path(ID_TO_PATH).set(new_paths)}function push_id_to_path(json){let app=arguments.length>1&&arguments[1]!==void 0?arguments[1]:appquery.app();get_paths(json,(id,path)=>{set_path(id,path,app)})}function set_path(id,path){(arguments.length>2&&arguments[2]!==void 0?arguments[2]:appquery.app()).json.by_path("".concat(ID_TO_PATH,".").concat(id)).set(path)}function get_paths(json,callback){let id=json.id();id&&callback(id,json._path());for(let c_name of json._child_names())get_paths(json._child(c_name),callback)}}});var require_pages=__commonJS({"lib-browser-old/core/core_elements/shared/pages.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();var u=require_u2(),pages=exports;pages.get_stripes=function(element){var _element$get_style;let stripes_expressions;return(_element$get_style=element.get_style)!=null&&_element$get_style.call(element).exists()?stripes_expressions=element.get_style().property("stripes"):stripes_expressions=element.property("stripes"),stripes_expressions.is_empty()?[]:stripes_expressions.entries()};pages.stripe_defaults={bgcolor:"#AAAAAA",background_style:"bgcolor",boxshadow_horizontal:0,border_style:"none",border_roundness:0,border_width:1,border_color:"#6B6B6B"}}});var require_ApplicationVersion=__commonJS({"lib-browser-old/lang/application/ApplicationVersion.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_reduce();require_es_array_reverse();require_es_symbol_description();require_es_error_cause();require_es_object_get_own_property_descriptors();require_es_array_flat_map();require_es_array_unscopables_flat_map();require_es_array_iterator();require_web_dom_collections_iterator();require_web_dom_collections_for_each();require_es_string_trim();require_es_object_entries();require_es_regexp_exec();require_es_string_split();require_es_array_includes();require_es_array_sort();require_es_string_starts_with();require_es_string_includes();require_es_string_replace();var _dec,_class;function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key]}),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce(function(desc2,decorator){return decorator(target,property,desc2)||desc2},desc),context&&desc.initializer!==void 0&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),desc.initializer===void 0&&(Object.defineProperty(target,property,desc),desc=null),desc}var u=require_u2(),decaf=require_decaf(),nodes=require_nodes(),caching=require_caching(),btype_ids=require_btype_ids(),plugin_consts=require_plugin(),locations_consts=require_locations(),domain_consts=require_domain(),security_consts=require_security(),domain_utilities=require_domain_utilities(),analytics=require_analytics(),consolidate_paths=require_consolidate_paths(),environment_utilities=require_environment_utilities(),Lib=require_lib(),locations=require_locations2(),appquery=require_appquery(),plugin_registry=require_plugin_registry(),plugin_getter=require_plugin_getter(),service_type_parser=require_service_type_parser(),plugins=require_plugins(),{GROUP_TYPES}=require_custom_elements(),RAW=require_RAW(),{DEPRECATED_EXPERIMENTS,FEATURE_FLAGS_PATH}=require_editor(),{ADVANCED_FEATURES,ADVANCED_FEATURE_JSON_SETTINGS_PATH}=require_advanced_features(),mode_check=require_mode_check(),notifier_client=require_client(),notifier_topics=require_notifier_topics(),segment_events=require_segment_events(),shared_pricing_configs=require_pricing_configs(),{SETTINGS_TAB,PLUGIN_TAB}=require_css(),{BUILT_IN_BREAKPOINTS}=require_breakpoints(),{NEW_PAGE_DEFAULTS}=require_elements(),{throw_if_invalid_page_name}=require_page_name_utilities(),{set_path}=require_id_to_path_utilities(),pages=require_pages(),configuration=require_client_config2(),builtins=require_builtins(),{LATEST_ELEMENT_VERSION}=require_elements();u.on_server()&&(configuration=__require("../../configuration"));var SECURABLE=security_consts.SECURABLE_PREFIX,APPS_DOMAIN_SUFFIX="-no-reply@bubbleapps.io";module.exports=(_dec=caching.cached({type:caching.AUTORUN}),_class=class extends nodes.AppNode{constructor(json){if(super(json),this._styles_cache={},this._paid_plugin_install_checked=!1,mode_check.is_edit_mode()){let construct_time=Date.now();notifier_client.watch([notifier_topics.AppPlanChangeTopic,this.appname()],()=>construct_time,()=>{this.invalidate_app_plan()})}}find_expressions(filter){let page_expressions=this.pages().flatMap(page=>page.find_expressions(filter)),custom_definition_expressions=this.custom_definitions().flatMap(custom_definition=>custom_definition.find_expressions(filter)),api_expressions=this.api().find_expressions(filter);return[...page_expressions,...custom_definition_expressions,...api_expressions]}application(){return this.json.application()}appname(){return this.application().appname()}app_version(){return this.json.app_version()}creation_date(){return this.json.child("creation_date").get()}exists(){var _version_node$get;let version_node=this.json.child("settings").child("client_safe").child("bubble_version"),last_change_node=this.json.child("last_change");return((_version_node$get=version_node.get())!=null?_version_node$get:last_change_node.get())!=null}domain(){return this.application().domain()}app_plan(check_admin){var _check_admin;if((_check_admin=check_admin)!=null||(check_admin=!1),Lib().is_edit_mode()){var _ref,_this$_ref;(_this$_ref=this[_ref="_plan_invalidation_box_"+check_admin])!=null||(this[_ref]=u.Box(!1))}else return Lib().app_plan()}display(){var _this$domain;return(_this$domain=this.domain())!=null?_this$domain:this.appname()}use_shared_sendgrid_key(){return this.appname()==="meta"?!1:Lib().app_plan().custom_domain?!appquery.get_public_setting("sendgrid_verified"):!0}get_sendgrid_key(){return this.use_shared_sendgrid_key()?configuration.shared_sendgrid_key:appquery.get_private_setting("sendgrid_key")}admin_email(){let hostname=this.admin_email_hostname(),appname=this.appname();return appname?hostname===configuration.PROD_DOMAINS.main&&appname!=="meta"||this.use_shared_sendgrid_key()&&this.get_public_setting("use_sendgrid")?appname.indexOf("_")!==-1?configuration.ADMIN_NO_REPLY:this.appname()+APPS_DOMAIN_SUFFIX:this.custom_domain_admin_email():configuration.ADMIN_NO_REPLY}custom_domain_admin_email(){var _this$get_public_sett;return((_this$get_public_sett=this.get_public_setting("admin_email"))!=null?_this$get_public_sett:"admin").trim()+"@"+this.admin_email_hostname()}admin_email_hostname(){var _this$domain2;if(this.get_public_setting("app_topdomain"))return this.get_public_setting("app_topdomain");let hostname=(_this$domain2=this.domain())!=null?_this$domain2:domain_consts.META_HOSTNAME,{top_domain}=u.get_domain_components(hostname);return domain_utilities.is_host_aws(top_domain)&&(hostname=domain_consts.META_HOSTNAME),top_domain}find_oauth_providers(){return Object.entries(this.get_plugin_versions()).filter(_ref4=>{let[_,version]=_ref4;return version}).flatMap(_ref5=>{let[plugin_name,version]=_ref5,plugin=plugin_getter.get_plugin(plugin_name,version);if(plugin!=null&&plugin.is_oauth_provider()){var _plugin$get_oauth_pro;return(_plugin$get_oauth_pro=plugin.get_oauth_providers_simple())!=null?_plugin$get_oauth_pro:[]}else return[]})}get_oauth_providers(){var _Lib$derived$content;return(_Lib$derived$content=Lib().derived("OAuthProviders").content())!=null?_Lib$derived$content:[]}get_user_calls(){return u.is_plugin_edit_mode()?[]:Lib().derived("UserCalls").content()}find_user_calls(){return Object.entries(this.get_plugin_versions()).filter(_ref9=>{let[_,version]=_ref9;return version}).flatMap(_ref10=>{var _plugin$get_user_call;let[plugin_name,version]=_ref10,plugin=plugin_getter.get_plugin(plugin_name,version);return((_plugin$get_user_call=plugin==null?void 0:plugin.get_user_calls())!=null?_plugin$get_user_call:[]).map(call_name=>plugin_name+plugin_consts.PLUGIN_SEPARATOR+call_name)})}_get_stripe_version(){return environment_utilities.is_production()?locations.get_db_version(this.app_version()):locations_consts.TEST_VERSION}stripe_client_id(){let setting_name="stripe_client_id_"+this._get_stripe_version();return this.get_public_setting(setting_name)}stripe_public_key(){let setting_name="stripe_public_key_"+this._get_stripe_version();return this.get_public_setting(setting_name)}get_public_setting_node(name){if(!name)throw new u.UnexpectedError("missing name");let pieces=name.split("."),json=this.json.child("settings").child("client_safe");for(let piece of pieces)json=json.child(piece);return nodes.new_expression(json,this)}get_public_setting(name){var _configuration$public,_configuration$public2,_this$get_public_sett2;let appname=this.appname(),override=(_configuration$public=configuration.public_app_settings_override)==null||(_configuration$public2=_configuration$public[appname])==null?void 0:_configuration$public2[name];return override!=null?override:(_this$get_public_sett2=this.get_public_setting_node(name).get_static())!=null?_this$get_public_sett2:this.settings_default(!0,name)}get_private_setting_node(name){if(!name)throw new u.UnexpectedError("missing name");let pieces=name.split("."),json=this.json.child("settings").child("secure");for(let piece of pieces)json=json.child(piece);return nodes.new_expression(json,this)}get_private_setting(name){var _configuration$privat,_configuration$privat2,_this$get_private_set;let appname=this.appname(),override=(_configuration$privat=configuration.private_app_settings_override)==null||(_configuration$privat2=_configuration$privat[appname])==null?void 0:_configuration$privat2[name];return override!=null?override:(_this$get_private_set=this.get_private_setting_node(name).get_static())!=null?_this$get_private_set:this.settings_default(!1,name)}settings_default(is_public,name){if(is_public&&name==="admin_email")return"admin";if(is_public&&name==="app_language")return"en_us";var _plugin_registry$defa;return(_plugin_registry$defa=plugin_registry.defaults_for_plugins_settings[name])!=null?_plugin_registry$defa:null}_id(){return this.appname()}id(){return this.appname()}is_template(){return this.json.child("is_template").get()}from_template(){return![null,void 0,""].includes(this.template_id())}template_id(){return this.json.child("template_id").get()}page(id){return id?nodes.create(nodes.PAGE,this.json.by_id(id)):null}custom_definition(id){return id?nodes.create(nodes.CUSTOM_DEFINITION,this.json.by_id(id)):null}custom_definitions(filter){let definitions=this.json.child("element_definitions").children().map(json=>nodes.create(nodes.CUSTOM_DEFINITION,json));return nodes.filter_array(filter,definitions)}custom_type(name){if(!name)return null;if(btype_ids.is_custom_type(name))throw new u.UnexpectedError("This is a value id, not a custom type: "+name+".  Please do values.get(id).custom_type() instead.");if(name.startsWith(SECURABLE)){let pieces=name.split(SECURABLE);return this.securable_type(pieces[1],pieces[2])}return nodes.create(nodes.CUSTOM_TYPE,this.json.child("user_types").child(name))}securable_type(plugin,name){return nodes.create(nodes.SECURABLE_TYPE,plugin,name,this.json.child("user_types").child(SECURABLE+plugin+SECURABLE+name))}custom_types(filter,include_special_types,only_non_deleted){this.json.child("user_types").pre_cache();let is_custom_name=name=>name!=="user"&&!name.startsWith(SECURABLE),custom_types=this.json.child("user_types").children().filter(json=>is_custom_name(json.name())).map(json=>nodes.create(nodes.CUSTOM_TYPE,json)),user_type=nodes.create(nodes.CUSTOM_TYPE,this.json.child("user_types").child("user")),special_types=include_special_types?builtins.SPECIAL_TYPES:[],types=[...custom_types,user_type,...special_types];return only_non_deleted&&(types=types.filter(a=>!a.deleted())),nodes.filter_array(filter,types)}option_set(name){if(!name)return null;if(btype_ids.is_option_set(name))throw new u.UnexpectedError("This is a value id, not a custom option set: "+name+".");return nodes.create(nodes.OPTION_SET,this.json.child("option_sets").child(name))}option_sets(filter,only_non_deleted){let types=this.json.child("option_sets").children().map(json=>nodes.create(nodes.OPTION_SET,json));return only_non_deleted&&(types=types.filter(a=>!a.deleted())),nodes.filter_array(filter,types)}element(id){var _json$parent;if(!id)return null;let json=this.json.by_id(id);return json&&u.on_server()&&(json.child("type").ensure_loading(),json.child("id").ensure_loading(),json.child("properties").ensure_loading(),json.child("custom_states").ensure_loading()),((_json$parent=json.parent())==null?void 0:_json$parent.name())==="styles"?nodes.new_element(json,!0):nodes.new_element(json)}workflow_item(id){return id?nodes.new_workflow_item(this.json.by_id(id)):null}event(id){return id?nodes.new_workflow_item(this.json.by_id(id)):null}action(id){return id?nodes.new_workflow_item(this.json.by_id(id)):null}by_id(id){var _json$parent2,_json$parent3,_json$parent3$parent;if(!id)return null;let json=this.json.by_id(id);if(!json.exists())return null;let parent_name=(_json$parent2=json.parent())==null?void 0:_json$parent2.name(),is_event=["workflows","actions","api"].includes(parent_name),is_action=((_json$parent3=json.parent())==null||(_json$parent3$parent=_json$parent3.parent())==null?void 0:_json$parent3$parent.name())==="actions";return is_event||is_action?this.workflow_item(id):this.element(id)}get_page_by_name(name){if(!name)return null;let derived=Lib().derived("PageByName");derived.set_app(this);let pages_by_name=derived.content();if(pages_by_name[name]){let json=this.json.by_path(pages_by_name[name]._path);return nodes.create(nodes.PAGE,json)}else return null}get_custom_by_name(name){var _derived$content$name;let derived=Lib().derived("CustomByName");derived.set_app(this);let id=(_derived$content$name=derived.content()[name])==null?void 0:_derived$content$name.id;return id?this.custom_definition(id):null}last_change(){var _this$json$child$get;return(_this$json$child$get=this.json.child("last_change").get())!=null?_this$json$child$get:"no_last_change"}favicon(){let f=this.json.child("favicon").get();return["//s3.amazonaws.com/appforest_uf/f1438203816318x881656567333266200/favicon_rounded.png","//s3.amazonaws.com/appforest_uf/f1462750401796x354019699618220350/apple_touch_icon_precomposed.png"].includes(f)?"//a3f482aa37473c68f97b76bd2e4a3782.cdn.bubble.io/f1530294839424x143528842134401200/Icon-no-clearspace.png":f}plugin_special(){return this.json.child("plugin_special").get()}style(id){var _this$_styles_cache,_this$_styles_cache$i;let json=this.json.child("styles").child(id);return(_this$_styles_cache$i=(_this$_styles_cache=this._styles_cache)[id])!=null||(_this$_styles_cache[id]=nodes.create(nodes.STYLE,json)),this._styles_cache[id]}get_style_default(element_type){var _this$get_public_sett3;return(_this$get_public_sett3=this.get_public_setting("default_styles"))==null?void 0:_this$get_public_sett3[element_type]}get_plugin_versions(){var _this$get_public_sett4;return(_this$get_public_sett4=this.get_public_setting("plugins"))!=null?_this$get_public_sett4:{}}get_plugin_version(plugin_id){return this.get_public_setting_node("plugins").json.child(plugin_id).get()}has_plugin(plugin_id){return!!this.get_plugin_version(plugin_id)}list_plugins(){return Object.keys(this.get_plugin_versions())}get_editor_link(local){let base=local?"https://local.bubble.is":Lib().location.get_base_for_meta(),id=appquery.appname(),version=appquery.app_version(),r="".concat(base,"/page?id=").concat(id,"&version=").concat(version),name=Lib().location.get_pieces().path[0];return name&&(r+="&name=".concat(name)),r}with_feature_flag(_ref13){let{feature_name,old_fn,new_fn}=_ref13;return u.error_append("with limited_rollout: ".concat(feature_name),()=>this.has_feature_enabled(feature_name)?new_fn():old_fn())}has_feature_enabled(feature_name){var _DEPRECATED_EXPERIMEN;return DEPRECATED_EXPERIMENTS[feature_name]&&!((_DEPRECATED_EXPERIMEN=DEPRECATED_EXPERIMENTS[feature_name].test_app_exceptions)!=null&&_DEPRECATED_EXPERIMEN.includes(this.appname()))&&this.get_public_setting("bubble_version")>=DEPRECATED_EXPERIMENTS[feature_name].deprecation_bv?!1:this.get_public_setting("".concat(FEATURE_FLAGS_PATH).concat(feature_name))===!0}has_fallback_path_enabled(fallback){var _this$json$by_path$ra,_this$json$by_path;switch(fallback[0]){case"experimental_feature":return this.has_feature_enabled(fallback[1]);case"raw_path":return(_this$json$by_path$ra=(_this$json$by_path=this.json.by_path(fallback[1]))==null?void 0:_this$json$by_path.raw())!=null?_this$json$by_path$ra:!1;default:return!1}}app_breakpoints(){var _this$get_public_sett8;return _objectSpread(_objectSpread({},BUILT_IN_BREAKPOINTS),(_this$get_public_sett8=this.get_public_setting("responsive_breakpoints"))!=null?_this$get_public_sett8:{})}has_advanced_feature_enabled(feature_name){var _advanced_feature_inf;let advanced_feature_info=ADVANCED_FEATURES[feature_name];if(this.get_public_setting("bubble_version")<22)return advanced_feature_info!=null&&advanced_feature_info.fallback?this.has_fallback_path_enabled(advanced_feature_info.fallback):!1;if(advanced_feature_info!=null&&advanced_feature_info.parent_advanced_feature){let parent_advanced_feature=advanced_feature_info.parent_advanced_feature;if(!this.has_advanced_feature_enabled(parent_advanced_feature))return!1}let advanced_feature_is_enabled=this.get_public_setting("".concat(ADVANCED_FEATURE_JSON_SETTINGS_PATH,".").concat(feature_name));return advanced_feature_is_enabled!=null?advanced_feature_is_enabled:advanced_feature_info!=null&&advanced_feature_info.fallback?this.has_fallback_path_enabled(advanced_feature_info.fallback):(_advanced_feature_inf=advanced_feature_info==null?void 0:advanced_feature_info.enabled_by_default)!=null?_advanced_feature_inf:!1}set_advanced_feature_enabled(feature_name,enabled_status){var _this$json$by_path2,_this$json$by_path3;let advanced_feature_info=ADVANCED_FEATURES[feature_name];if(advanced_feature_info){if(this.set_setting(!0,"".concat(ADVANCED_FEATURE_JSON_SETTINGS_PATH,".").concat(feature_name),enabled_status),advanced_feature_info.fallback)switch(advanced_feature_info.fallback[0]){case"experimental_feature":(_this$json$by_path2=this.json.by_path(advanced_feature_info.fallback[1]))==null||_this$json$by_path2.set(enabled_status);break;case"raw_path":(_this$json$by_path3=this.json.by_path(advanced_feature_info.fallback[1]))==null||_this$json$by_path3.set(enabled_status);break}this.commit()}}can_run_issue_checker(){return this.app_version()!=="live"||locations.is_hardcode(this.appname(),this.app_version())}toString(){return this.app_version()}context_element(){return null}},_applyDecoratedDescriptor(_class.prototype,"get_user_calls",[_dec],Object.getOwnPropertyDescriptor(_class.prototype,"get_user_calls"),_class.prototype),_class)}});var require_API=__commonJS({"lib-browser-old/lang/application/API.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_flat_map();require_es_array_unscopables_flat_map();var u=require_u2(),nodes=require_nodes(),Lib=require_lib(),appquery=require_appquery(),RAW=require_RAW();module.exports=class extends nodes.AppNode{constructor(json){var _Lib$visual_edit$issu,_Lib$visual_edit;super(json)}id(){return"api"}type(){return"API"}get_name(){return"Backend workflows"}is_api(){return!0}is_page(){return!1}is_custom_definition(){return!1}root(){return this}get_new_event_json(){return this.json.child(u.LUID())}parent(){return null}events(filter){let unfiltered=this.json.children().map(j=>nodes.new_workflow_item(j));return nodes.filter_array(filter,unfiltered)}find_events(filter){return this.events(filter)}find_actions(filter){return this.events().flatMap(e=>{var _e$all_next;return(_e$all_next=e.all_next(filter))!=null?_e$all_next:[]})}find_expressions(filter){return this.events().flatMap(e=>{var _e$find_expressions;return(_e$find_expressions=e.find_expressions(filter))!=null?_e$find_expressions:[]})}}}});var require_CustomType=__commonJS({"lib-browser-old/lang/application/CustomType.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_regexp_exec();require_es_string_replace();require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_includes();require_es_object_values();require_es_string_includes();var u=require_u2(),nodes=require_nodes(),Lib=require_lib(),appquery=require_appquery(),btypes=require_btypes(),btype_ids=require_btype_ids(),{DATA_TAB}=require_css();module.exports=class extends nodes.AppNode{constructor(json){json.ensure_loading(),super(json)}name(){return this.json.name()}id(){return this.name()}to_value(){let name=this.name();return name==="user"?"user":btype_ids.custom_type(name)}deleted(){return this.json.child("deleted").get()}display(){return this.json.child("display").get()}exposed_api(){return this.json.child("exposed_api").get()}fields(){return this.json.child("fields").children().map(json=>nodes.create(nodes.CUSTOM_FIELD,json))}field(name){return nodes.create(nodes.CUSTOM_FIELD,this.json.child("fields").child(name))}privacy_roles(){return this.json.child("privacy_role").children().map(json=>nodes.create(nodes.PRIVACY_ROLE,json))}privacy_role(name){let json=this.json.child("privacy_role").child(name);return nodes.create(nodes.PRIVACY_ROLE,json)}default(){return Lib().derived("DefaultValues").content()[this.name()]}get_default_fields(skip_default_values_and_deleted){var _skip_default_values_;return(_skip_default_values_=skip_default_values_and_deleted)!=null||(skip_default_values_and_deleted=!1),this.json.child("fields").children().map(json=>{let field=nodes.create(nodes.CUSTOM_FIELD,json),current={};return current.name=field.name(),current.value=field.value(),current.display=field.display(),skip_default_values_and_deleted||(field.default_val()!=null&&(btype_ids.is_option_set(field.value())?current.default_val=field.default_val():current.default_val=btypes.get(field.value()).cast(field.default_val())),current.deleted=field.deleted()),current})}}}});var require_SecurableType=__commonJS({"lib-browser-old/lang/application/SecurableType.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();var decaf=require_decaf(),appquery=require_appquery(),plugin_getter=require_plugin_getter(),CustomType=require_CustomType(),builtins=require_builtins(),btype_ids=require_btype_ids();module.exports=class extends CustomType{constructor(plugin,_name,json){super(json),this.no_special_messages=!0,this.not_writeable=!0,this.plugin=plugin,this._name=_name}name(){return this._name}to_value(){return btype_ids.custom_type(this.json.name())}my_data(){var _plugin_getter$get_pl;return(_plugin_getter$get_pl=plugin_getter.get_plugin(this.plugin).securable)==null?void 0:_plugin_getter$get_pl[this.name()]}display(){var _this$my_data$display,_this$my_data;return(_this$my_data$display=(_this$my_data=this.my_data())==null?void 0:_this$my_data.display)!=null?_this$my_data$display:"[missing: "+this.plugin+" "+this.name()+"]"}get_permissions_editors(){var _this$my_data$permiss,_this$my_data2;return(_this$my_data$permiss=(_this$my_data2=this.my_data())==null?void 0:_this$my_data2.permissions_editors)!=null?_this$my_data$permiss:{}}starting_permissions(){var _this$my_data$startin,_this$my_data3;return(_this$my_data$startin=(_this$my_data3=this.my_data())==null?void 0:_this$my_data3.starting_permissions)!=null?_this$my_data$startin:{}}fields(){var _this$my_data$fields,_this$my_data4;return decaf.object_entries((_this$my_data$fields=(_this$my_data4=this.my_data())==null?void 0:_this$my_data4.fields)!=null?_this$my_data$fields:{}).map(_ref=>{let[name,data]=_ref;return builtins.create_fake_field(name,data)})}field(name){var _this$my_data$fields$,_this$my_data5;let data=(_this$my_data$fields$=(_this$my_data5=this.my_data())==null?void 0:_this$my_data5.fields[name])!=null?_this$my_data$fields$:{display:"Missing: "+name,value:"null"};return builtins.create_fake_field(name,data)}permissions_node(type_name){return appquery.app().json.child_by_path("user_types.".concat(type_name,".privacy_role"))}}}});var require_CustomField=__commonJS({"lib-browser-old/lang/application/CustomField.js"(exports,module){"use strict";init_define_process_env();init_shim();var u=require_u2(),Lib=require_lib(),btypes=require_btypes(),nodes=require_nodes(),CustomFieldState=require_CustomFieldState();module.exports=class extends CustomFieldState{deleted(){return this.json.child("deleted").get()}name(){return this.json.name()}parent(){return nodes.create(nodes.CUSTOM_TYPE,this.json.parent().parent())}is_custom(){return btypes.is_custom_type(this.value())}}}});var require_PrivacyRole=__commonJS({"lib-browser-old/lang/application/PrivacyRole.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_json_stringify();var u=require_u2(),nodes=require_nodes(),Lib=require_lib(),appquery=require_appquery(),btypes=require_btypes(),btype_ids=require_btype_ids();module.exports=class extends nodes.AppNode{display(){return this.name()==="everyone"?"everyone":this.json.child("display").get()}name(){return this.json.name()}id(){return this.name()}parent(){let parent_json=this.json.parent().parent();return this.app().custom_type(parent_json.name())}condition(){return nodes.new_expression(this.json.child("condition"),this)}}}});var require_option_sets=__commonJS({"lib-browser-old/constants/option_sets.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.ALL_OPTIONS=void 0;var ALL_OPTIONS="all values";exports.ALL_OPTIONS=ALL_OPTIONS}});var require_OptionSet=__commonJS({"lib-browser-old/lang/application/OptionSet.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_object_entries();require_es_array_iterator();require_es_object_from_entries();require_web_dom_collections_iterator();require_es_object_values();require_es_array_sort();require_web_dom_collections_for_each();var u=require_u2(),nodes=require_nodes(),Lib=require_lib(),option_sets_consts=require_option_sets(),lang_consts=require_lang(),appquery=require_appquery(),btype_ids=require_btype_ids(),{DATA_TAB}=require_css();module.exports=class extends nodes.AppNode{name(){return this.json.name()}id(){return this.name()}to_value(){let name=this.name();return btype_ids.option_set_type(name)}deleted(){return this.json.child("deleted").get()}display(){return this.json.child("display").get()}attributes(){return this.json.child("attributes").children().map(json=>nodes.create(nodes.OPTION_ATTRIBUTE,json))}attribute(name){let json=this.json.child("attributes").child(name);return nodes.create(nodes.OPTION_ATTRIBUTE,json)}values(){let jsons=this.json.child("values").children(),value_format=this.json.child("attributes").child("db_value").exists()?lang_consts.OPTION_VALUE_FORMATS.name_is_key:lang_consts.OPTION_VALUE_FORMATS.name_is_db_value_with_fallback;return jsons.map(json=>nodes.create(nodes.OPTION_VALUE,json,value_format))}get_id_to_name_mapping(){let db_value_is_attr=this.json.child("attributes").child("db_value").exists(),do_get_mapping=()=>{var _this$json$child$raw;let children2=Object.entries((_this$json$child$raw=this.json.child("values").raw())!=null?_this$json$child$raw:{});return Object.fromEntries(children2.map(_ref=>{let[key,ov]=_ref;return!db_value_is_attr&&ov.db_value?[ov.db_value,key]:[key,key]}))};return this.json.smart_cache("OptionSetValueMapping",do_get_mapping)}value(name){var _this$get_id_to_name_;let child_path=(_this$get_id_to_name_=this.get_id_to_name_mapping()[name])!=null?_this$get_id_to_name_:"null",value_format=this.json.child("attributes").child("db_value").exists()?lang_consts.OPTION_VALUE_FORMATS.name_is_key:lang_consts.OPTION_VALUE_FORMATS.name_is_db_value_with_fallback;return nodes.create(nodes.OPTION_VALUE,this.json.child("values").child(child_path),value_format)}reserved_attributes(){return["_id","_rev","type","display","deleted","sort_factor","db_value",...Object.values(lang_consts.LIST_OPERATOR_NAMES)]}reserved_values(){return["_id","_rev","type",option_sets_consts.ALL_OPTIONS,"null","undefined"]}}}});var require_OptionAttribute=__commonJS({"lib-browser-old/lang/application/OptionAttribute.js"(exports,module){"use strict";init_define_process_env();init_shim();var u=require_u2(),nodes=require_nodes(),Lib=require_lib(),CustomFieldState=require_CustomFieldState();module.exports=class extends CustomFieldState{deleted(){return this.json.child("deleted").get()}name(){return this.json.name()}parent(){return nodes.create(nodes.OPTION_SET,this.json.parent().parent())}}}});var require_OptionValue=__commonJS({"lib-browser-old/lang/application/OptionValue.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_regexp_exec();require_es_string_match();require_web_dom_collections_for_each();require_es_object_entries();require_es_array_iterator();require_web_dom_collections_iterator();require_es_parse_int();var u=require_u2(),nodes=require_nodes(),Lib=require_lib(),lang_consts=require_lang();module.exports=class extends nodes.AppNode{constructor(json,format){super(json),this.format=format}deleted(){return this.json.child("deleted").get()}name(){if(this.format===lang_consts.OPTION_VALUE_FORMATS.name_is_key)return this.json.name();var _this$json$child$get;return(_this$json$child$get=this.json.child("db_value").get())!=null?_this$json$child$get:this.json.name()}id(){return this.name()}display(){return this.json.child("display").get()}sort_factor(){return this.json.child("sort_factor").get()}parent(){return nodes.create(nodes.OPTION_SET,this.json.parent().parent())}attr(attr){let ret=this.json.child(attr).raw();if(ret&&typeof ret=="object"&&Object.keys(ret).every(key=>key.match(/^\d+$/))){let arr=[];return Object.entries(ret).forEach(_ref=>{let[i,val]=_ref;arr[parseInt(i)]=val}),arr}return ret}}}});var require_Comment=__commonJS({"lib-browser-old/lang/application/Comment.js"(){"use strict";init_define_process_env();init_shim();require_es_array_includes()}});var require_application_utils=__commonJS({"lib-browser-old/lang/application/application_utils.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_flat_map();require_es_array_unscopables_flat_map();require_es_array_includes();require_es_array_sort();require_es_array_iterator();require_web_dom_collections_iterator();var Lib=require_lib(),appquery=require_appquery(),decaf=require_decaf(),application_utils=exports;application_utils.page_name_to_id=name=>{var _Lib$derived$content$;return(_Lib$derived$content$=Lib().derived("PageByName").content()[name])==null?void 0:_Lib$derived$content$.id};application_utils.page_id_to_name=function(id_to_find){let pages=Lib().derived("PageByName").content(),found=decaf.object_keys(pages).find(name=>pages[name].id===id_to_find);return found!=null?found:null};application_utils.custom_name_to_id=name=>{var _Lib$derived$content$2;return(_Lib$derived$content$2=Lib().derived("CustomByName").content()[name])==null?void 0:_Lib$derived$content$2.id};application_utils.custom_id_to_name=function(id_to_find){let customs=Lib().derived("CustomByName").content(),found=decaf.object_keys(customs).find(name=>customs[name].id===id_to_find);return found!=null?found:null}}});var require_application=__commonJS({"lib-browser-old/lang/application/index.js"(exports){"use strict";init_define_process_env();init_shim();var nodes=require_nodes(),FakeApplication=require_FakeApplication(),Application=require_Application(),ApplicationVersion=require_ApplicationVersion(),API=require_API(),CustomType=require_CustomType(),SecurableType=require_SecurableType(),CustomFieldState=require_CustomFieldState(),CustomField=require_CustomField(),PrivacyRole=require_PrivacyRole(),OptionSet=require_OptionSet(),OptionAttribute=require_OptionAttribute(),OptionValue=require_OptionValue(),Comment=require_Comment(),builtins=require_builtins(),application_utils=require_application_utils(),application=exports;nodes.add(nodes.FAKE_APPLICATION,FakeApplication);nodes.add(nodes.APPLICATION,Application);nodes.add(nodes.APPLICATION_VERSION,ApplicationVersion);nodes.add(nodes.API_WORKFLOWS,API);nodes.add(nodes.CUSTOM_TYPE,CustomType);nodes.add(nodes.SECURABLE_TYPE,SecurableType);nodes.add(nodes.CUSTOM_FIELD_STATE,CustomFieldState);nodes.add(nodes.CUSTOM_FIELD,CustomField);nodes.add(nodes.PRIVACY_ROLE,PrivacyRole);nodes.add(nodes.OPTION_SET,OptionSet);nodes.add(nodes.OPTION_ATTRIBUTE,OptionAttribute);nodes.add(nodes.OPTION_VALUE,OptionValue);application.get_special_fields=builtins.get_special_fields;application.SPECIAL_TYPES=builtins.SPECIAL_TYPES;application.show_privacy_warning=application_utils.show_privacy_warning;application.page_name_to_id=application_utils.page_name_to_id;application.page_id_to_name=application_utils.page_id_to_name;application.custom_name_to_id=application_utils.custom_name_to_id;application.custom_id_to_name=application_utils.custom_id_to_name;application.get_sorted_list_of_pages=application_utils.get_sorted_list_of_pages;application.get_sorted_list_of_custom_definitions=application_utils.get_sorted_list_of_custom_definitions}});var require_lang2=__commonJS({"lib-browser-old/lang/lang.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_symbol_description();require_es_error_cause();require_es_object_get_own_property_descriptors();require_web_dom_collections_for_each();require_es_object_values();require_es_object_assign();function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var lang=exports,safe_require=require_safe_require();safe_require.safe_register("./lang/lang",lang);var lang_consts=require_lang();lang.DETECT_FIELD_NAMES=lang_consts.DETECT_FIELD_NAMES;var node_types=require_node_types(),nodes=require_nodes(),json=require_app_json2(),caching=require_caching(),expressions=require_expressions(),workflow=require_workflow2(),RAW=require_RAW();require_elements2();require_application();var appquery=require_appquery();appquery.add_methods(nodes.get(node_types.APPLICATION_VERSION));var all_nodes={};Object.values(node_types).forEach(name=>{nodes.has(name)&&(all_nodes[name]=nodes.get(name))});lang.make_run_app=function(data,appname,app_version){return new lang.ApplicationVersion(new lang.RuntimeJSON(data,null,null,null,appname,app_version))};var re_exported=_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread({},nodes),workflow),expressions),json),caching),all_nodes),{},{RAW,EnhancedArray:nodes.get_EnhancedArray(),DETECT_FIELD_NAMES:lang_consts.DETECT_FIELD_NAMES});module.exports=Object.assign(lang,re_exported)}});var require_core_events=__commonJS({"lib-browser-old/core/core_events/index.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_includes();require_es_array_iterator();require_web_dom_collections_iterator();require_es_string_includes();require_es_regexp_exec();require_es_regexp_test();require_es_string_trim();var _core_events$plugin_g,u=require_u2(),Lib=require_lib(),safe_require=require_safe_require(),b_object=require_b_object(),logger=require_logger(),workflow_consts=require_workflow(),core_consts=require_core(),appquery=require_appquery(),core_ds_workflow_utilities=require_core_ds_workflow_utilities(),custom_tz_utilities=require_custom_tz_utilities(),FrozenState=require_FrozenState(),page_state=require_page_state(),decaf=require_decaf(),service_type_parser=require_service_type_parser(),event_element_mapping=require_event_element_mapping(),is_installed=require_is_installed(),plugin_registry=require_plugin_registry(),plugin_getter=require_plugin_getter(),StaticObject=require_StaticObject().default,status_bar=require_status_bar(),lang=require_lang2(),node_eval=require_node_eval(),core_events=exports;safe_require.safe_register("./core/core_events",core_events);(_core_events$plugin_g=core_events.plugin_general_events)!=null||(core_events.plugin_general_events={});var make_gen_event=core_events.make_gen_event=function(name,data){core_events[name]=data,data.register=function(workflow,element_instance){let run_workflow=()=>{let context={element:element_instance};return Lib().workflow.run_workflows(context,[workflow]).callback(err=>core_events.handle_uncaught_error({original_error:err,caught_from:workflow_consts.ERROR_SOURCES.GENERAL_WORKFLOW,cb(err2){if(err2)return console.log("Workflow failed:"),logger.log(err2)}}))};return Lib().workflow.on_event(name,run_workflow),()=>Lib().workflow.off_event(name,run_workflow)}},make_element_event=core_events.make_element_event=function(name,data,not_add_core_events,is_testing){var _data$field_names,_data$_display;not_add_core_events||(core_events[name]=data),(_data$field_names=data.field_names)!=null||(data.field_names={element_id:{}}),data.register=function(){},data.deferrable=!0};make_gen_event("LoggedIn",{display(){return"User is logged in"},can_redirect:!0,server_side_redirect(){return Lib().current_user().is_logged_in()}});make_gen_event("LoggedOut",{display(){return"User is logged out"},can_redirect:!0,server_side_redirect(){return!Lib().current_user().is_logged_in()}});make_gen_event("PageLoaded",{display(){return"Page is loaded"},can_redirect:!0,server_side_redirect(){return!0}});var is_running=u.MakeSwitch(null,"conditiontrue is running");is_running.turn_on();core_events.ConditionTrue={field_names:{run_when:{default:"just_once"}},condition_not_optional:!0,register(workflow,element_instance){let run_when=workflow.get_static_property("run_when"),watcher=null;return u.WaitFor(element_instance.get_is_ready_key(),()=>{let timestamp=new Date(u.timestamp());watcher=u.Watcher(()=>{u.ensure_ready(is_running),timestamp||(timestamp=new Date(u.timestamp()));let context={element:element_instance,datasources:page_state.get_basic_datasources(element_instance.element.root()),_current_date_time:timestamp};return new FrozenState(context),[node_eval.evaluate_event_condition(workflow,context),context]});let can_run=!0;watcher.on_value(_ref2=>{let[passes,context]=_ref2;timestamp=null,passes?can_run&&(is_running.turn_off(),Lib().workflow.run_workflows(context,[workflow]).callback(err=>core_events.handle_uncaught_error({original_error:err,caught_from:workflow_consts.ERROR_SOURCES.GENERAL_WORKFLOW,cb(err2){return err2&&logger.log(err2),is_running.turn_on()}})),can_run=!1,run_when!=="every_time"&&watcher.destroy()):can_run=!0})}),()=>{var _watcher;return(_watcher=watcher)==null?void 0:_watcher.destroy()}}};var _on_page_errors=[],_ope_id=0;core_events.OnPageError={display(event){return"An unhandled error occurs"},fields(){return[{name:"caught_error_origins",caption:"Catch ",editor:"Dropdown",set:Lib().sets.get_set("Object")(workflow_consts.ERROR_CATCHER_TYPES)}]},field_names:{caught_error_origins:{default:workflow_consts.DEFAULT_CATCHER_TYPE}},register(workflow,element_instance){let my_id=_ope_id;_ope_id++;let error_origin=workflow.get_static_property("caught_error_origins");return _on_page_errors.push({id:my_id,workflow,element_instance,error_origin}),()=>{_on_page_errors=_on_page_errors.filter(x=>x.id!==my_id)}}};core_events.build_wf_error_object=function(original_error){let code=original_error.message;code||(original_error instanceof u.errors.ExpectedError?code="MISCELLANEOUS":code="TEMPORARY_BUG");let message=logger.human_friendly(original_error);return{code,message}};core_events.handle_uncaught_error=function(_ref3){let{original_error,caught_from,cb}=_ref3;if(original_error==null){cb(null);return}if(_on_page_errors.length===0){cb(original_error);return}let error_object=core_events.build_wf_error_object(original_error),promises=[];for(let{workflow,element_instance,error_origin}of _on_page_errors){let error_handler_type=error_origin!=null?error_origin:workflow_consts.DEFAULT_CATCHER_TYPES,handled_error_sources=workflow_consts.CAUGHT_ERROR_SOURCES[error_handler_type];if(caught_from!=null&&!handled_error_sources.includes(caught_from))continue;let error_context={element:element_instance,datasources:page_state.get_basic_datasources(element_instance.element.root())},wf_params={};wf_params[core_consts.LEGACY_PARAM_ID]=new StaticObject(error_object,null,"sys.error"),error_context.datasources.get_wf_param=core_ds_workflow_utilities.generate_wf_param_datasource(wf_params),promises.push(Lib().workflow.run_workflows(error_context,[workflow],!0))}promises.length===0&&cb(original_error),u.promise_array(promises).callback((err,outcome)=>{if(err){cb(err);return}for(let wf of outcome)if(wf.length!==0){cb(null);return}cb(original_error)})};core_events.DoInterval={display(event){var _event$get_static_pro;return"Do every "+((_event$get_static_pro=event==null?void 0:event.get_static_property("interval"))!=null?_event$get_static_pro:"X")+" seconds"},field_names:{interval:{default:5}},fields(){return[{name:"interval",caption:"Interval (seconds)",editor:"StaticNumber",optional:!1}]},register(workflow,element_instance){let interval=workflow.get_static_property("interval"),_is_on=!0;function do_it(){_is_on&&setTimeout(()=>{let context={element:element_instance};Lib().workflow.run_workflows(context,[workflow]).callback(err=>core_events.handle_uncaught_error({original_error:err,caught_from:workflow_consts.ERROR_SOURCES.GENERAL_WORKFLOW,cb(){}})),u.WaitFor(Lib().workflow.everything_done_key(),do_it)},interval*1e3)}return do_it(),()=>{_is_on=!1}}};make_element_event("ButtonClicked",{display(){return" is clicked"}});make_element_event("InputChanged",{display(){return"'s value is changed"},element_name:"An input"});make_element_event("PopupClosed",{display(){return" is closed"},element_name:"A popup "});make_element_event("PopupOpened",{display(){return" is opened"},element_name:"A popup "});make_element_event("MapMarkerClicked",{display(){return"'s marker is clicked"},element_name:"A map"});make_element_event("OnError",{display(){return" has an error running a workflow"}});core_events.CustomEvent={display(event){let event_name=event==null?void 0:event.get_static_property("event_name");return event_name||"Create a custom event..."},field_names:{event_name:{},parameters:{}},register(){},deferrable:!0};core_events.APIEvent={display(event,generic){var _event$wf_name;let wf_name=event==null||(_event$wf_name=event.wf_name)==null?void 0:_event$wf_name.call(event);return wf_name||(generic?"API Workflow":"New API workflow...")},field_names:u.extend({wf_name:{},expose:{default:!0},auth_unecessary:{default:!1},ignore_privacy_rules:{default:!1},trigger_option:{default:"post"},return_200_if_not_run:{default:!1},parameters:{},detect_request:{},include_headers:{},parameter_def:{default:"manual"},modify_types:{},response_type:{default:"json"},redirect_page_success:{},redirect_page_error:{}},custom_tz_utilities.custom_tz_field_names),register(){},deferrable:!0,check_for_errors(event,report){event.wf_name()?event.wf_name().indexOf(" ")!==-1&&event.get_static_property("expose")?report(this.display(event)+" - the API workflow name should not have any spaces, since it can be used via the Workflow API"):u.firebase_illegal(event.wf_name())&&report(this.display(event)+" - the API workflow should not contain illegal characters, since it can be used via the Workflow API"):report(this.display(event)+" - the API workflow name should not be empty");for(let{param_id}of event.get_custom_parameters())param_id&&param_id.trim()!==param_id&&report(this.display(event)+" - the parameter "+param_id.trim()+" has some spaces around it")}};core_events.RecurringEvent={display(event,generic){let wf_name=event==null?void 0:event.get_static_property("event_name");return wf_name||(generic?"Recurring event":"New recurring event...")},field_names:u.extend({event_name:{},custom_event_data_type:{},ignore_privacy_rules:{default:!1}},custom_tz_utilities.custom_tz_field_names),register(){},deferrable:!0};core_events.DatabaseTriggerEvent={display(event,generic){let event_name=event==null?void 0:event.get_static_property("event_name");return event_name||(generic?"Database trigger event":"New database trigger event...")},field_names:u.extend({event_name:{},data_trigger_type:{}},custom_tz_utilities.custom_tz_field_names),register(){},deferrable:!0};core_events.get_event_object=function(type){if(core_events[type])return core_events[type];{var _plugin_getter$get_pl;let[plugin_name]=service_type_parser.get_plugin_and_type(type);return(_plugin_getter$get_pl=plugin_getter.get_plugin(plugin_name))==null?void 0:_plugin_getter$get_pl.get_event(type)}};plugin_registry.on_plugin_registration((_,instance)=>{if(instance.plugin_general_events!==null){var _core_events$plugin_g2;(_core_events$plugin_g2=core_events.plugin_general_events)!=null||(core_events.plugin_general_events={}),b_object.extend(core_events.plugin_general_events,instance.plugin_general_events)}})}});var require_element_workflows=__commonJS({"lib-browser-old/core/core_elements/core_elements_utilities/element_workflows.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.find_inputs_to_check=find_inputs_to_check;exports.find_invalid_inputs=find_invalid_inputs;exports.run_element_workflow=run_element_workflow;exports.start_workflow_field_names=void 0;require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_includes();require_es_string_includes();var u=_interopRequireWildcard(require_u2()),safe_require=_interopRequireWildcard(require_safe_require()),logger=_interopRequireWildcard(require_logger()),core_events=_interopRequireWildcard(require_core_events()),core_ds_workflow_utilities=_interopRequireWildcard(require_core_ds_workflow_utilities()),_FrozenState=_interopRequireDefault(require_FrozenState()),page_state=_interopRequireWildcard(require_page_state()),runmode_consts=_interopRequireWildcard(require_runmode()),workflow_consts=_interopRequireWildcard(require_workflow()),core_consts=_interopRequireWildcard(require_core()),_lib=_interopRequireDefault(require_lib()),_StaticObject=_interopRequireDefault(require_StaticObject()),status_bar=_interopRequireWildcard(require_status_bar()),element_eval=_interopRequireWildcard(require_element_eval()),hydrate2=_interopRequireWildcard(require_hydrate()),_appquery=_interopRequireDefault(require_appquery());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}safe_require.safe_register("./core/core_elements/core_elements_utilities/element_workflows",exports);var start_workflow_field_names={start_workflow:{no_states:!0},button_disabled:{}};exports.start_workflow_field_names=start_workflow_field_names;function run_element_workflow(instance,event_type,e,events_to_run,additional_datasources,is_plugin){if(!is_plugin&&!u.on_react_native()&&(e&&u.did_event_pass_through(e,"."+runmode_consts.CLICKABLE_ELEMENT)||instance.state("force_pressed")))return;let events=events_to_run!=null?events_to_run:instance.element.get_related_workflows(event_type);if(!(events!=null&&events.length))return;let evaluation_complete=u.Promise(null,"button press evaluation");is_plugin||instance.state("force_pressed",!0);let status=status_bar.show_progress_line(evaluation_complete),handle_errors=cb=>function(original_error){if(!original_error){cb();return}let error_events=instance.element.get_related_workflows("OnError");if(error_events.length===0){cb(original_error);return}let error_object=core_events.build_wf_error_object(original_error),error_context={element:instance,datasources:page_state.get_basic_datasources(instance.element.root())},wf_params={};wf_params[core_consts.LEGACY_PARAM_ID]=new _StaticObject.default(error_object,null,"sys.error"),error_context.datasources.get_wf_param=core_ds_workflow_utilities.generate_wf_param_datasource(wf_params),additional_datasources!=null&&u.extend(error_context.datasources,additional_datasources),new _FrozenState.default(error_context).freeze_workflows(error_events,err=>{if(err){cb(err);return}(0,_lib.default)().workflow.run_workflows(error_context,error_events,!0).callback((err2,_events)=>{if(err2){cb(err2);return}if(_events.length===0){cb(original_error);return}return cb()})})};return evaluation_complete.callback(handle_errors(err=>core_events.handle_uncaught_error({original_error:err,caught_from:workflow_consts.ERROR_SOURCES.ELEMENT_WORKFLOW,cb(err2){return err2&&window.alert(logger.human_friendly(err2)),is_plugin||instance.state("force_pressed",!1),status()}}))),u.run_once(5,()=>is_plugin?!1:element_eval.evaluate_property(instance,"button_disabled"),(err,button_disabled)=>{if(err){evaluation_complete.reject(err);return}if(button_disabled){evaluation_complete.resolve();return}!is_plugin&&!u.on_react_native()&&instance.get_canvas().removeClass("show-outline");let context={element:instance,inputs_must_be_valid:!0,datasources:page_state.get_basic_datasources(instance.element.root())};additional_datasources!=null&&u.extend(context.datasources,additional_datasources),new _FrozenState.default(context).freeze_workflows(events,err2=>{if(err2){evaluation_complete.reject(err2);return}return u.run_once(30,()=>find_invalid_inputs(instance,events,context),(err3,data)=>{if(err3){evaluation_complete.reject(err3);return}let{validation_fail,min_top}=data;if(validation_fail)if(evaluation_complete.resolve(!0),min_top.instance.canvas!=null&&!u.isScrolledIntoView(min_top.instance.canvas).status){var _min_top$instance;return u.velocity((_min_top$instance=min_top.instance)==null?void 0:_min_top$instance.get_canvas(),"scroll",{duration:200,offset:-100,complete_cb(){return min_top.instance.message("set_focus")}})}else return min_top.instance.message("set_focus");else return evaluation_complete.resolve((0,_lib.default)().workflow.run_workflows(context,events,!0))})})}),evaluation_complete}function find_inputs_to_check(instance,events,context,ignore_event_condition){let to_run=[],input_instances_raw=[];for(let event of events){let is_input_used_with_invalid=function(exp){var _exp$next,_exp$next$name;return((_exp$next=exp.next())==null||(_exp$next$name=_exp$next.name)==null?void 0:_exp$next$name.call(_exp$next))==="isnt_valid"},find_input_in_custom_workflow=function(custom_workflow,parents){var _parents;let custom_event=_appquery.default.event(custom_workflow.get_static_property("custom_event"));if((_parents=parents)!=null||(parents={}),parents[custom_event.id()])return;parents[custom_event.id()]=!0;let parent_instance=instance.find_instance_by_id(custom_workflow.element_id());if(custom_event!=null&&custom_event.exists()){for(let exp of custom_event.find_expressions("GetElement"))is_input_used_with_invalid(exp)||related_inputs.push({instance_id:exp.element_id(),parent_instance});for(let sub_custom_workflow of custom_event.actions("TriggerCustomEvent").concat(custom_event.actions("TriggerCustomEventFromReusable")))find_input_in_custom_workflow(sub_custom_workflow,u.extend({},parents))}};if(!ignore_event_condition&&!(0,_lib.default)().workflow.should_workflow_run(context,event))continue;to_run.push(event);let related_inputs=[];for(let exp of event.find_expressions("GetElement"))is_input_used_with_invalid(exp)||related_inputs.push({instance_id:exp.element_id()});for(let exp of event.find_expressions("ThisElement"))is_input_used_with_invalid(exp)||related_inputs.push({instance_id:instance.element_id()});for(let custom_workflow of event.actions("TriggerCustomEvent").concat(event.actions("TriggerCustomEventFromReusable")))find_input_in_custom_workflow(custom_workflow);for(let{instance_id,parent_instance}of related_inputs){let input_instance=(parent_instance!=null?parent_instance:instance).find_instance_by_id(instance_id);input_instance&&input_instance.is_visible()&&input_instances_raw.push(input_instance)}}let _seen_toUniqueString={},input_instances=[];for(let a of input_instances_raw)_seen_toUniqueString[a.toUniqueString()]||(_seen_toUniqueString[a.toUniqueString()]=!0,input_instances.push(a));return{input_instances,to_run}}function find_invalid_inputs(instance,events,context){let min_top={top:0,left:0,instance:null},validation_fail=!1,{input_instances,to_run}=find_inputs_to_check(instance,events,context);for(let input_instance of input_instances)if(input_instance.get_messages().includes("display_validity")){var _context$frozen_state,_context$frozen_state2;input_instance.message("display_validity"),(input_instance.state("display_invalid")||(_context$frozen_state=context.frozen_state.element_state[hydrate2.dehydrate_tree(input_instance)])!=null&&(_context$frozen_state2=_context$frozen_state.value_that_is_valid)!=null&&_context$frozen_state2.not_valid)&&(validation_fail=!0,(min_top.top>input_instance.element.get_top()||!min_top.instance)&&(min_top.left>=input_instance.element.get_left()||!min_top.instance)&&(min_top.top=input_instance.element.get_top(),min_top.left=input_instance.element.get_left(),min_top.instance=input_instance))}return{validation_fail,min_top,to_run}}}});var require_data_updates=__commonJS({"lib-browser-old/core/data_updates.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.update_thing=exports.update_modified_date=void 0;require_es_array_includes();var u=_interopRequireWildcard(require_u2()),b_fiber=_interopRequireWildcard(require_b_fiber()),logger=_interopRequireWildcard(require_logger()),investigations=_interopRequireWildcard(require_investigations()),btypes=_interopRequireWildcard(require_btypes());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var update_modified_date=thing=>thing.child("Modified Date").set(u.timestamp());exports.update_modified_date=update_modified_date;var update_thing=function(thing,new_values,expected_value_id){var _thing$_id,_thing$_id2;let promise=u.Promise(null,"updating ".concat(String(thing==null||(_thing$_id=thing._id)==null?void 0:_thing$_id.call(thing))));if(!thing)return console.log("trying to update something that does not exist.  this is likely an application error..."),promise.resolve(void 0),promise;if(typeof thing.child!="function")return console.log("trying to update something that doesn't look like a DB object.  This can legitimately happen in preview mode, if the to_change expression isn't valid."),promise.resolve(void 0),promise;let upsert_log_object={thing_id:thing==null||(_thing$_id2=thing._id)==null?void 0:_thing$_id2.call(thing),new_values,expected_value_id,inner_value_check:{}};return promise.resolve(u.run_once(30,()=>thing._type()).then(_type=>{if(upsert_log_object.thing_type=_type,expected_value_id!=null&&expected_value_id!==_type)return null;let custom_type=btypes.get(_type).custom_type();if(custom_type!=null)return b_fiber.optional_pause(),u.run_once(30,()=>{var _ref;let new_values2={},object2=(_ref=new_values)!=null?_ref:{};for(let idx in object2){let entry=object2[idx];if(entry!=null&&entry.key){var _inner_btype;if(!custom_type.field(entry.key).exists())continue;new_values2[idx]=u.extend({},entry);let field_btype=btypes.get(custom_type.field(entry.key).value()),inner_btype=field_btype.inner();if(upsert_log_object.inner_value_check[entry.key]=inner_btype!=null,(_inner_btype=inner_btype)!=null||(inner_btype={cast(){return null}}),!entry.action&&field_btype.is_list()&&(entry.action="set_list"),!entry.action)new_values2[idx].value=field_btype.cast(entry.value);else if(["add","remove"].includes(entry.action))new_values2[idx].value=inner_btype.cast(entry.value);else{var _value;new_values2[idx].value=[];let iterable=(_value=entry.value)!=null?_value:[];for(let i=0;i<iterable.length;i++){let list_entry=iterable[i];new_values2[idx].value.push(inner_btype.cast(list_entry)),u.optional_pause_tick()}}}}return upsert_log_object.new_values2=new_values2,new_values2}).then(new_values2=>{investigations.action_update_thing.active()&&logger.debug("update_thing processed values",upsert_log_object);let object2=new_values2!=null?new_values2:{};for(let idx in object2){let entry=object2[idx];if(!entry.action)thing.child(entry.key).set(entry.value);else{let add_entry=val=>thing.child(entry.key).push(val),remove_entry=val=>thing.child(entry.key).remove(val);if(entry.action==="add")add_entry(entry.value);else if(entry.action==="remove")remove_entry(entry.value);else if(entry.action==="set_list")thing.child(entry.key).set(entry.value);else if(entry.action==="add_list")for(let i=0;i<entry.value.length;i++){let list_entry=entry.value[i];add_entry(list_entry),u.optional_pause_tick()}else if(entry.action==="remove_list")for(let i=0;i<entry.value.length;i++){let list_entry=entry.value[i];remove_entry(list_entry),u.optional_pause_tick()}else if(entry.action==="clear_list")thing.child(entry.key).set([]);else throw new u.UnexpectedError("unrecognized action: ".concat(entry.action))}b_fiber.optional_pause()}return update_modified_date(thing),null})})),promise};exports.update_thing=update_thing}});var require_inputs=__commonJS({"lib-browser-old/core/core_elements/shared/inputs.js"(exports){"use strict";init_define_process_env();init_shim();require_es_symbol_description();require_es_error_cause();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_array_includes();require_es_string_includes();require_es_regexp_exec();require_es_string_match();require_es_array_iterator();require_web_dom_collections_iterator();function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var debounce=require_debounce(),u=require_u2(),hydrate2=require_hydrate(),mode_check=require_mode_check(),obfuscate=require_obfuscate(),logger=require_logger(),eval_consts=require_eval(),core_events=require_core_events(),element_workflows=require_element_workflows(),appquery=require_appquery(),data_updates=require_data_updates(),property_applications=require_property_applications(),workflow_consts=require_workflow(),Lib=require_lib(),btypes=require_btypes(),status_bar=require_status_bar(),element_eval=require_element_eval(),safe_require=require_safe_require(),inputs=exports;safe_require.safe_register("./core/core_elements/shared/inputs",inputs);inputs.get_max_file_size_field_name={max_size:{default:50}};inputs.get_file_upload_condition_field_name={file_upload_condition:{}};inputs.type_content_format_mapping={text:["_all"],number:["int_number","float_number","currency","percentage"],geographic_address:["geographic_address"],date:["date","date_2"],file:["text"],image:["text"],number_range:[],dateinterval:[]};inputs.register_input_states=function(data,states,instance){let _in_get_content=!1;function get_content(){if(_in_get_content)return logger.owner_error("Circular reference evaluating the input's initial content",{element_instance:instance,prop_name:"content"}),null;if(!data.get_starting_content)return null;try{return _in_get_content=!0,data.get_starting_content(instance)}finally{_in_get_content=!1}}function refresh_value(){instance.state("has_been_changed")||instance.state("value",get_content)}if(instance.autorun(refresh_value),instance.run_mode()){let do_change=function(new_value){return u.compare(new_value,instance.state("value",void 0,!0))?!1:(new_value===void 0&&(new_value=null),instance.state("has_been_changed",!0),instance.state("value",new_value),!0)},submit_message_handler=function(new_value){var _instance$get_canvas;!do_change(new_value)&&!unsubmitted||(unsubmitted=!1,(_instance$get_canvas=instance.get_canvas())==null||_instance$get_canvas.blur(),instance.state("is_focused",!1),inputs.run_auto_binding(instance,new_value),element_workflows.run_element_workflow(instance,"InputChanged"),Lib().element.emit("user_changed_input",{instance,val:new_value}))};states.includes("is_invalid")&&instance.state("is_invalid",()=>!data.content_validated(instance.state("value"),instance)),instance.state("value_that_is_valid",()=>{if(states.includes("is_invalid")&&instance.state("is_invalid")){let not_valid={};return not_valid[eval_consts.NV_MARKER]=!0,not_valid}else return instance.state("value")}),states.includes("display_invalid")&&instance.state("display_invalid",()=>instance.state("is_invalid")&&(instance.state("has_been_changed")||instance.state("force_display_validity"))),instance.on_message("display_validity",()=>{instance.state("force_display_validity",!0)});let unsubmitted=!1;instance.on_message("user_change",new_value=>{do_change(new_value)&&(unsubmitted=!0)}),instance.on_message("user_submit",new_value=>{submit_message_handler(new_value)}),instance.on_message("reset_input",()=>{instance.state("force_display_validity",!1),instance.state("has_been_changed")&&(instance.state("has_been_changed",!1),refresh_value())})}};inputs.input_change_autorun=(instance,fn)=>instance.autorun(()=>{instance.state("has_been_changed")||fn(instance.state("value"))});inputs.register_focus=function(instance,target){target.focus(()=>instance.state("is_focused",!0)),target.blur(()=>instance.state("is_focused",!1))};inputs.get_input_autobind_thing=function(instance,type_only){var _instance$parent,_parent$element,_parent$element2,_instance$element$roo,_instance$element,_instance$element$roo2;let thing,type,parent=(_instance$parent=instance.parent)==null?void 0:_instance$parent.call(instance);return parent!=null&&parent.get_static_property("group_type")?(type=parent.get_static_property("group_type"),type_only||(thing=instance.parent().state("group_data"))):(parent==null||(_parent$element=parent.element)==null?void 0:_parent$element.type())==="GroupItem"?(type=parent.parent().get_static_property("group_type"),type_only||(thing=parent.state("group_data"))):(parent==null||(_parent$element2=parent.element)==null?void 0:_parent$element2.type())==="TableCell"?(type=parent.parent().parent().get_static_property("group_type"),type_only||(thing=parent.parent().state("group_data"))):(_instance$element$roo=(_instance$element=instance.element).root)!=null&&(_instance$element$roo2=_instance$element$roo.call(_instance$element))!=null&&_instance$element$roo2.get_static_property("page_item_type")&&(type=instance.element.root().get_static_property("page_item_type"),type_only||(thing=Lib().pageparam.get())),{type,thing}};inputs.get_input_autobind_thing_field=function(instance){var _thing$exists;let{type,thing}=inputs.get_input_autobind_thing(instance);if(type==null||!(thing!=null&&(_thing$exists=thing.exists)!=null&&_thing$exists.call(thing)))return null;let bind_field=instance.get_static_property("bind_field");return bind_field?btypes.get(type).get_message(bind_field).evaluate(thing):null};inputs.do_auto_binding=function(instance,thing,type,bind_field,val,changes){var _changes;(_changes=changes)!=null||(changes={0:{key:bind_field,value:val}}),data_updates.update_thing(thing,changes);let data_to_send={appname:appquery.appname(),app_version:appquery.app_version(),temp_db:Lib().db_instance().cur_temp_db(),data:{type,items:[{id:thing._id(),changes:hydrate2.dehydrate_tree(changes)}]}},encoded=obfuscate.encode_data(data_to_send,Lib().appname()),promise;appquery.get_public_setting("bubble_version")>=27?promise=Lib().location.post("server://elasticsearch/modify",_objectSpread(_objectSpread({},encoded),{},{timezone_string:Lib().current_timezone()})):promise=Lib().location.post("server://elasticsearch/modify",encoded);let status=status_bar.show_progress_line(promise);return Lib().workflow.all_server_completed.add_promise(promise),promise.callback((err,res)=>{if(Lib().db_instance().ensure_object_updates(res),instance.state("currently_binding",!1),status(),err&&(Lib().db_instance().flush(thing._id()),core_events.handle_uncaught_error({original_error:err,caught_from:workflow_consts.ERROR_SOURCES.ELEMENT,cb(err2){err2&&window.alert(logger.human_friendly(err2))}})),instance.supports_message("reset_input")&&instance.message("reset_input"),!err&&instance.get_static_property("show_alert_on_sucess"))return u.run_once(30,()=>{let alert_instance=instance.find_instance_by_id(instance.get_static_property("alert_element")),element_text=element_eval.evaluate_property(instance,"alert_message"),alert_text=element_eval.evaluate_property(alert_instance,"text");return{alert_instance,element_text,alert_text}},(err2,data)=>{if(err2){logger.log(err2);return}let{alert_instance,element_text,alert_text}=data;if(alert_instance!=null){let properties={fade_in:500,hold:500,fade_out:500};[null,void 0,""].includes(element_text)?properties.message=alert_text:properties.message=element_text,alert_instance.message("show_alert",properties)}})})};inputs.run_auto_binding=function(instance,value,is_plugin){if(!instance.get_static_property("auto_binding"))return;let bind_field=instance.get_static_property("bind_field"),sent_key=Lib().workflow.all_sent_to_server.make(30,"run_aut_bonding");return u.run_once(30,()=>{let current_val,thing_type=inputs.get_input_autobind_thing(instance),{thing}=thing_type;return thing!=null&&(current_val=thing.child(bind_field).get()),{current_val,is_invalid:is_plugin?void 0:instance.state("is_invalid"),thing_type,val:typeof value=="function"?value():value}},(err,res)=>{if(sent_key.turn(),err){logger.log(err);return}if(!is_plugin){if(res.is_invalid)return;instance.state("currently_binding",!0)}let{type,thing}=res.thing_type;if(thing==null)return;let{val}=res,field_type=btypes.get(type).custom_type().field(bind_field).value();if(!btypes.get(field_type).equals(res.current_val,val)&&!(!type||thing==null||!bind_field)){if(!is_plugin&&instance.element.E.field_names.content_format){let content_format=instance.get_static_property("content_format");if(inputs.type_content_format_mapping[field_type][0]!=="_all"&&!inputs.type_content_format_mapping[field_type].includes(content_format))return}return inputs.do_auto_binding(instance,thing,type,bind_field,val)}})};inputs.get_disabled_field_name={disabled:{default:!1}};inputs.get_auto_binding_field_names={auto_binding:{default:!1,no_states:!0},information:{no_states:!0},bind_field:{no_states:!0},show_alert_on_sucess:{no_states:!0},alert_element:{no_states:!0,optional:!0},alert_message:{no_states:!0,optional:!0}};inputs.additional_field_names_for_text_inputs=u.extend({mandatory:{},limit_number_of_characters:{no_states:!0,default:!1},character_limit:{no_states:!0}},inputs.get_disabled_field_name,inputs.get_auto_binding_field_names);inputs.switch_disabled_or_not=instance=>element_eval.on_property_change(instance,"disabled",value=>instance.get_canvas()[0].disabled=value);inputs.set_character_limit_on_input=instance=>element_eval.on_property_change(instance,["limit_number_of_characters","character_limit","content_format"],_ref=>{let{limit_number_of_characters,character_limit,content_format}=_ref;return limit_number_of_characters&&character_limit&&[null,void 0,"text","numerical_ref"].includes(content_format)?instance.get_canvas().attr("maxlength",character_limit):instance.get_canvas().attr("maxlength","")});inputs.assign_change_keyup_handlers=function(instance,get_value){let canvas=instance.get_canvas();u.on_phonegap()&&canvas.css("-webkit-user-select","text"),inputs.register_focus(instance,instance.canvas);let input_user_change_timeout=null,input_has_changed=!1,input_event_handler=()=>{input_has_changed=!0,input_user_change_timeout&&instance.clearTimeout(input_user_change_timeout);let timeout;if(instance.get_static_property("content_format")==="geographic_address")timeout=3e3;else{let val=canvas.val();[null,void 0,""].includes(val)||val.length===1?timeout=0:timeout=1500}return input_user_change_timeout=instance.setTimeout(()=>{instance.message("user_change",get_value()),input_user_change_timeout=null},timeout),!0};canvas.on("input",input_event_handler),canvas.on("paste",input_event_handler);let content_format=instance.get_static_property("content_format"),using_input_mask=["int_number","float_number"].includes(content_format),old_input_value="";using_input_mask&&canvas.on("keyup",e=>{let key_is_backspace=e.key==="Backspace",input_canvas=canvas.get(0),old_value_is_negative_number=old_input_value[0]==="-";old_input_value=canvas.val();let caret_is_right_after_the_minus_sign=input_canvas.selectionStart===0&&input_canvas.selectionEnd===0;if(key_is_backspace&&caret_is_right_after_the_minus_sign&&old_value_is_negative_number)return input_event_handler()}),canvas.on("keydown",e=>{let is_multiline_input=canvas.hasClass("MultiLineInput");e.keyCode!==13||is_multiline_input||canvas.blur()}),canvas.blur(()=>{input_has_changed&&(input_has_changed=!1,change_handler()),change_debouncer.flush(),input_user_change_timeout!=null&&(instance.message("user_change",get_value()),instance.clearTimeout(input_user_change_timeout),input_user_change_timeout=null)});function change_handler(){instance.message("user_submit",get_value())}let change_debouncer=debounce(change_handler,50);return canvas.change(()=>{mode_check.running_test()?change_handler():change_debouncer()})};inputs.default_for_inputs={font_size:14,font_color:"#3D3D3D",background_style:"bgcolor",border_style:"solid",border_width:1,border_color:"#BDBDBD",border_roundness:3,border_style_top:"solid",border_width_top:1,border_color_top:"#BDBDBD",border_roundness_top:3,border_style_left:"solid",border_width_left:1,border_color_left:"#BDBDBD",border_roundness_left:3,border_style_bottom:"solid",border_width_bottom:1,border_color_bottom:"#BDBDBD",border_roundness_bottom:3,border_style_right:"solid",border_width_right:1,border_color_right:"#BDBDBD",border_roundness_right:3,padding_horizontal:4,padding_vertical:0};inputs.input_content_options={text:"Text",email:"Email",password:"Password",int_number:"Integer",float_number:"Decimal",geographic_address:"Address"};inputs.is_pw_valid=function(pwd){if(typeof pwd!="string"||pwd.length===0||pwd.length>1e4)return!1;if(!appquery.get_public_setting("have_pw_policy"))return!0;let minimum_length=appquery.get_public_setting("pw_length");typeof minimum_length!="number"&&(minimum_length=null);let require_capital_letter=appquery.get_public_setting("pw_require_capital_letter"),require_number2=appquery.get_public_setting("pw_require_number"),require_special_char=appquery.get_public_setting("pw_require_special_char");return!(minimum_length&&pwd.length<minimum_length||require_capital_letter&&!pwd.match(/[A-Z]/)||require_number2&&!pwd.match(/\d/)||require_special_char&&!pwd.match(/[^a-zA-Z\d\s:]/))};inputs.assign_enter_handler_in_input=function(instance,needs_meta_key_pressed){var _instance$element$get,_instance$element$get2,_instance$element2;let canvas=instance.get_canvas(),button_with_submission_click_wf=null,possibly_related_workflows=(_instance$element$get=(_instance$element$get2=(_instance$element2=instance.element).get_visible_workflows)==null?void 0:_instance$element$get2.call(_instance$element2))!=null?_instance$element$get:[],input_el_id=instance.element_id();for(let wf of possibly_related_workflows){var _wf$element_id;if(wf.find_expressions("GetElement.element_id=".concat(input_el_id)).length<1)continue;let button=instance.find_instance_by_id((_wf$element_id=wf.element_id)==null?void 0:_wf$element_id.call(wf));if(button!=null&&button.is_visible()){var _button_with_submissi;if((_button_with_submissi=button_with_submission_click_wf)!=null||(button_with_submission_click_wf=button),button!==button_with_submission_click_wf){button_with_submission_click_wf=null;break}}}if(canvas.off("keydown.click_the_button"),!!button_with_submission_click_wf)return canvas.on("keydown.click_the_button",event=>{if(event.shiftKey)return;let cmd_or_ctrl=u.meta(event);if(needs_meta_key_pressed&&!cmd_or_ctrl)return;let enter_key_code=13;if(event.keyCode===enter_key_code){let button_canvas=button_with_submission_click_wf.get_canvas();if(button_canvas.is(":visible"))return u.trigger_blur(canvas),button_canvas.click()}})};inputs.reset_input_div=div=>property_applications.apply_css_style(div,{border:"none","background-color":"transparent"})}});var require_hover_state_manager=__commonJS({"lib-browser-old/core/core_elements/shared/hover_state_manager.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_web_queue_microtask();var hover_state_manager=exports,currently_hovered=new Set,move_event=e=>{for(let instance of currently_hovered)instance.canvas!=="destroyed"&&!instance.canvas[0].matches(":hover")&&instance.element.type()!=="TableMainAxis"&&(instance.state("is_hovered",!1),currently_hovered.delete(instance));currently_hovered.size===0&&window.removeEventListener("mousemove",move_event)};hover_state_manager.setup_hover=function(instance){let supports_matches=instance.canvas[0].matches!=null;instance.canvas.mouseenter(()=>{instance.state("is_hovered",!0),supports_matches&&(currently_hovered.size===0&&window.addEventListener("mousemove",move_event),currently_hovered.add(instance))}),instance.canvas.mouseleave(()=>{instance.state("is_hovered",!1),currently_hovered.delete(instance)});let is_hovered=supports_matches&&instance.canvas[0].matches(":hover");return queueMicrotask(()=>instance.state("is_hovered",is_hovered)),is_hovered}}});var require_Page2=__commonJS({"lib-browser-old/core/core_elements/legacy/responsive_v0/Page.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_object_entries();require_es_parse_float();require_web_immediate();var u=require_u2(),property_applications=require_property_applications(),image_utils=require_image_utils(),page_state=require_page_state(),lang_consts=require_lang(),evaluate=require_evaluate(),eval_node_state=require_eval_node_state(),pages=require_pages(),color_tokens=require_color_tokens(),font_tokens=require_font_tokens(),element_eval=require_element_eval();function evaluate_stripes(instance){let stripes_expressions=pages.get_stripes(instance.element);if(!stripes_expressions.length)return[];let stripes=[];for(let stripe_expression of stripes_expressions)eval_node_state.with_eval_node(stripe_expression,()=>stripes.push(evaluate.evaluate_properties(stripe_expression.json._raw(),instance.prop_eval_context(),lang_consts.DETECT_FIELD_NAMES,[],stripe_expression.json._path())));return stripes}module.exports={property_applications(element){return!element||!(element!=null&&element.use_responsive_algorithm())?[new property_applications.Background]:[]},position_canvas(to_position,instance){if(instance.responsive_mode()){instance.container.add(instance);return}let start_width=this.calculate_run_mode_width(instance);property_applications.apply_css_style(to_position,{width:start_width+"px",height:instance.element.get_height()+"px"}),instance.edit_mode()?$(".canvas").append(to_position):($("html, body").css("height","100%"),$(window.document.body).append(to_position),to_position[0].style["min-height"]="100%"),property_applications.apply_css_style(to_position,{"margin-right":"auto","margin-left":"auto",position:"relative","z-index":2})},register(instance){instance.on_message("child_movement",max_delta=>{instance.state("last_delta",max_delta)})},initialize(instance){instance.run_mode()&&instance.register_workflows(instance.element.events()),element_eval.on_property_change(instance,"title",title=>{instance.edit_mode()?$(".edit-date").text(title):instance.run_mode()&&$(document).ready(()=>window.document.title=title)});let root=document.documentElement;instance.edit_mode()&&(instance.autorun(()=>{font_tokens.load_font_tokens_default(),font_tokens.load_font_tokens_user()}),element_eval.on_property_change(instance,"preset_width",val=>{pages.preset_page_widths[val].width!=null&&(instance.element.set_property("width",pages.preset_page_widths[val].width),instance.element.commit_merge())}),element_eval.on_property_change(instance,"width",width=>{let preset_width=instance.get_static_property("preset_width");for(let preset_name in pages.preset_page_widths){let data=pages.preset_page_widths[preset_name];if(width===data.width){preset_name!==preset_width&&(instance.element.set_property("preset_width",preset_name),instance.element.commit_merge());return}}preset_width!=="custom"&&(instance.element.set_property("preset_width","custom"),instance.element.commit_merge())})),instance.autorun(()=>{for(let[property,value]of Object.entries(font_tokens.default_font_tokens_to_property()))root.style.setProperty(property,value)}),instance.autorun(()=>{for(let[property,value]of Object.entries(font_tokens.user_font_tokens_to_property()))root.style.setProperty(property,value)}),instance.autorun(()=>{for(let[property,value]of Object.entries(color_tokens.default_color_tokens_to_property()))root.style.setProperty(property,value)}),instance.autorun(()=>{for(let[property,value]of Object.entries(color_tokens.user_color_tokens_to_property()))root.style.setProperty(property,value)}),instance.run_mode()&&(page_state.page_width($(window).width()),$(window).on("resize",()=>page_state.page_width($(window).width())),page_state.page_current_scroll_position($(window).scrollTop()),$(window).on("scroll wheel touchmove",()=>page_state.page_current_scroll_position($(window).scrollTop())));let properties_to_load=["background_style","bgcolor","background_gradient_direction","background_gradient_from","background_gradient_mid","background_gradient_to","background_image","center_background","background_size_cover","repeat_background_vertical","repeat_background_horizontal","background_color_if_empty_image","background_gradient_style","background_radial_gradient_shape","background_radial_gradient_size","background_radial_gradient_xpos","background_radial_gradient_ypos","background_gradient_custom_angle"];function style_page(){let additional_correction_for_debugger,background_div,main_page;instance.element.use_responsive_algorithm()?background_div=instance.get_canvas():(background_div=u.div("stripe-container Backdrop",instance.container.get_canvas()),instance.run_mode()&&($(window).off("resize.backdrop-non-responsive"),$(window).on("resize.backdrop-non-responsive",()=>background_div[0].style.width=Math.max($(".main-page").width(),$(window).width())+"px"))),instance.thumbnail_mode()?background_div.css({"z-index":1,position:"absolute",top:0,width:instance.element.get_width(),height:instance.element.get_height(),overflow:"hidden"}):property_applications.apply_css_style(background_div,{"z-index":1,position:instance.get_static_property("fixed_width")?"relative":"absolute",top:"0px",width:instance.get_static_property("fixed_width")?instance.element.get_width():"100%",overflow:"hidden"}),u.is_debug_mode()?(additional_correction_for_debugger=300,$(".main-page").css("height",$(".main-page").height()+additional_correction_for_debugger)):additional_correction_for_debugger=0;let set_height=()=>{let height;instance.thumbnail_mode()?height=instance.element.get_height():(height=Math.max(background_div.parent().height(),$(".main-page").height()),height===0&&(height=instance.element.get_height())),background_div[0].style.height=height+"px"};set_height(),window.fix_backdrop_height=set_height,instance.edit_mode()&&instance.autorun(()=>background_div.css("height",element_eval.evaluate_property(instance,"height")+20));let BV=null;if(element_eval.pre_cache(instance,properties_to_load.map(prop=>"backdrop_".concat(prop))),element_eval.pre_cache(instance,["backdrop_paralax_speed","backdrop_image_paralax"]),instance.autorun(()=>{let backdrop_background_data={is_backdrop:!0};for(let prop of properties_to_load)backdrop_background_data[prop]=element_eval.evaluate_property(instance,"backdrop_"+prop);if(instance.run_mode())for(let prop of["backdrop_paralax_speed","backdrop_image_paralax"])backdrop_background_data[prop]=element_eval.evaluate_property(instance,prop);if(backdrop_background_data.background_style==="video")if(instance.run_mode()&&!u.is_on_mobile_or_tablet()){BV||(BV=new $.BigVideo,BV.init()),$("#big-video-wrap").css("background","black");let video_container=$("#big-video-wrap video");video_container.attr("muted","");let video_url=image_utils.optimize_image(element_eval.evaluate_property(instance,"backdrop_video_source"),void 0,void 0,void 0,!0);BV.show(video_url,{forceAutoplay:!0,doLoop:!0,ambient:!0}),instance.autorun(()=>{element_eval.evaluate_property(instance,"backdrop_video_silence")?(video_container.attr("muted",""),BV.getPlayer().muted(!0)):(BV.getPlayer().volume(.8),video_container.removeAttr("muted"),BV.getPlayer().muted(!1))})}else{background_div.css("background","black");let image_fallback=element_eval.evaluate_property(instance,"backdrop_video_image_fallback");image_fallback&&background_div.css({"background-image":"url(".concat(image_utils.optimize_image(image_fallback,background_div.width()),")"),"background-position":"center top"})}else new property_applications.Background()._apply(backdrop_background_data,background_div)}),!instance.element.use_responsive_algorithm()){let stripes_drawn=u.MakeKey(null,"stripe_drawn"),stripe_divs=[];$(window).off("resize.withstripe",set_height),$(window).on("resize.withstripe",set_height),instance.on_destroy(()=>$(window).off("resize.withstripe",set_height)),instance.autorun(()=>{let stripe_top=0,stripe_bottom=0;function build_stripe(stripe){let options={},stripe_div=u.div("backdrop-stripe",background_div);return stripe.floating?options["z-index"]=5e3:options["z-index"]=zcountdown,zcountdown-=1,options.width="100%",options["box-sizing"]="border-box",options["-moz-box-sizing"]="border-box",options.height=stripe.stripe_height+"px",stripe.border_width>0&&(options["border-bottom"]="".concat(stripe.border_width,"px ").concat(stripe.border_style," ").concat(stripe.border_color),options["border-radius"]=stripe.border_roundness+"px"),property_applications.apply_css_style(stripe_div,options),new property_applications.Background()._apply(stripe,stripe_div),new property_applications.BoxShadow()._apply(stripe,stripe_div),stripe_div}let set_stripe_positioning=(stripe_div,stripe)=>{let position;stripe.floating&&!instance.edit_mode()?(position="fixed",stripe_div.addClass("floating")):position="absolute",stripe_div.css("position",position)},zcountdown=5e3;background_div.find(".backdrop-stripe").remove();let stripes=evaluate_stripes(instance);if(stripes.length!==0){for(let stripe of stripes){let stripe_div=build_stripe(stripe);set_stripe_positioning(stripe_div,stripe),stripe.floating!==!0||stripe.floating&&stripe.floating_reference==="top"?(stripe_div.css("top",stripe_top+"px"),stripe_divs.push({div:stripe_div,top:stripe_top,height:parseFloat(stripe.stripe_height)}),stripe_top+=parseFloat(stripe.stripe_height)):(stripe_div.css("bottom",stripe_bottom+"px"),stripe_divs.push({}),stripe_bottom+=parseFloat(stripe.stripe_height))}return stripes_drawn.turn()}}),main_page=$(".main-page"),instance.on_message("movement_in_stripe",(current_stripe,max_delta)=>u.WaitFor(stripes_drawn,()=>{let height_change_above=0;for(let i=0;i<stripe_divs.length;i++){var _stripe$height_change;let stripe=stripe_divs[i];if(stripe.top===void 0)continue;let height_change;i>=current_stripe&&(i===current_stripe?height_change=max_delta-height_change_above:height_change=stripe.height_change,stripe.div.height(stripe.height+height_change),stripe.div.css("top",stripe.top+height_change_above+"px"),stripe.height_change=height_change),height_change_above+=(_stripe$height_change=stripe.height_change)!=null?_stripe$height_change:0}let height=instance.element.get_height()+height_change_above+additional_correction_for_debugger;background_div.css("height",height),main_page.css("height",height)}))}instance.autorun(()=>{let max_delta=instance.state("last_delta");if(max_delta!=null){var _main_page;let height=instance.element.get_height()+max_delta+additional_correction_for_debugger;background_div.css("height",height),(_main_page=main_page)==null||_main_page.css("height",height)}})}instance.edit_mode()?(element_eval.pre_cache(instance,properties_to_load),instance.autorun(()=>{instance.container.get_canvas().find(".stripe-container.Backdrop").remove(),instance.autorun(()=>{if(!instance.is_destroyed()){let props={};for(let prop of properties_to_load)props[prop]=element_eval.evaluate_property(instance,prop);new property_applications.Background()._apply(props,instance.get_canvas())}}),style_page()})):instance.thumbnail_mode()?instance.autorun(style_page):style_page()},additional_data:{is_responsive_mode(instance){return instance.run_mode()&&instance.element.use_responsive_algorithm()},calculate_run_mode_width(instance){if(this.is_responsive_mode(instance)&&!instance.get_static_property("fixed_width")){let window_width=$(window).width();return Math.max(instance.element.get_min_width(),window_width)}else return instance.element.get_width()},initialize_container_width(instance,container){if(!this.is_responsive_mode(instance))return;container.resize_width(this.calculate_run_mode_width(instance)),setImmediate(()=>{container.resize_width(this.calculate_run_mode_width(instance))});let old_width=null;$(window).resize(()=>{let new_width=this.calculate_run_mode_width(instance);if(new_width!==old_width){if(u.is_fullscreen())return;old_width=new_width,container.resize_width(new_width),instance.get_canvas()[0].style.width=new_width+"px"}})}}}}});var require_element_utils=__commonJS({"lib-browser-old/core/core_elements/core_elements_utilities/element_utils.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_includes();require_es_string_includes();var u=require_u2(),safe_require=require_safe_require(),elements=require_elements2(),element_eval=require_element_eval(),element_utils=exports;safe_require.safe_register("./core/core_elements/core_elements_utilities/element_utils",element_utils);element_utils.reset_inputs_and_groups=function(instance){for(let type of["reset_input","reset_group","clear_list"])for(let child of instance.current_children)child.element.get_messages().includes(type)&&child.message(type)};element_utils.register_tab_index_listener=function(instance,cb){instance.autorun(()=>{let tabindex=instance.state("tab_index");tabindex!=null&&cb(tabindex)})};element_utils.register_group_data=function(data,instance){instance.state("group_data",elements.STATE_NOT_READY);function refresh_group_data(){if(!instance.state("datasource_changed_by_workflow_action")){let retrieve;return data.default_group_data?retrieve=data.default_group_data():retrieve=()=>{var _element_eval$evaluat;return(_element_eval$evaluat=element_eval.evaluate_property(instance,"data_source"))!=null?_element_eval$evaluat:null},instance.state("group_data",retrieve)}}instance.on_message("reset_group",()=>(instance.state("datasource_changed_by_workflow_action",!1),refresh_group_data(),element_utils.reset_inputs_and_groups(instance))),instance.on_message("set_group_data",new_data=>{var _new_data;return(_new_data=new_data)!=null||(new_data=null),instance.state("datasource_changed_by_workflow_action",!0),instance.state("group_data",new_data),check_reset_inputs_and_groups()}),instance.autorun(refresh_group_data);let old_data=null;function check_reset_inputs_and_groups(){let new_data=instance.state("group_data");if(!u.compare(new_data,old_data))return old_data=new_data,element_utils.reset_inputs_and_groups(instance)}instance.autorun(check_reset_inputs_and_groups)}}});var require_clipping=__commonJS({"lib-browser-old/core/core_elements/shared/clipping.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.unwatchClip=unwatchClip;exports.watchClip=watchClip;require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();require_web_dom_collections_for_each();var intersectionObservers=new WeakMap,mutationObserver;function handleMutations(mutations){for(let mutation of mutations){let io=intersectionObservers.get(mutation.target);io!=null&&(mutation.removedNodes.forEach(n=>{n instanceof Element&&io.unobserve(n)}),mutation.addedNodes.forEach(n=>{n instanceof Element&&io.observe(n)}))}}function watchClip(element,cb){if(typeof MutationObserver<"u"&&typeof IntersectionObserver<"u"){var _mutationObserver;if(intersectionObservers.has(element))return;let io=new IntersectionObserver((entries,observer)=>{entries.some(entry=>entry.boundingClientRect.height>0&&entry.intersectionRatio<1)&&(observer.disconnect(),intersectionObservers.delete(element),cb())},{root:element,threshold:[0,1]});intersectionObservers.set(element,io),element.childNodes.forEach(child=>{child instanceof Element&&io.observe(child)}),(_mutationObserver=mutationObserver)!=null||(mutationObserver=new MutationObserver(handleMutations)),mutationObserver.observe(element,{childList:!0})}else cb()}function unwatchClip(element){var _intersectionObserver;(_intersectionObserver=intersectionObservers.get(element))==null||_intersectionObserver.disconnect(),intersectionObservers.delete(element)}}});var require_text_elements=__commonJS({"lib-browser-old/core/core_elements/shared/text_elements.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.apply_dotdotdot=apply_dotdotdot;exports.apply_text=apply_text;exports.could_clip=could_clip;exports.remove_dotdotdot=remove_dotdotdot;exports.replace_links_emails=replace_links_emails;require_es_array_iterator();require_web_dom_collections_iterator();require_es_string_trim();require_es_array_includes();require_es_string_includes();require_es_regexp_exec();require_es_string_replace();require_es_regexp_test();var logger=_interopRequireWildcard(require_logger()),u=_interopRequireWildcard(require_u2()),_appquery=_interopRequireDefault(require_appquery()),property_applications=_interopRequireWildcard(require_property_applications()),clipping=_interopRequireWildcard(require_clipping()),element_eval=_interopRequireWildcard(require_element_eval()),element_props=_interopRequireWildcard(require_element_props()),colors_consts=_interopRequireWildcard(require_colors()),_color_tokens=require_color_tokens(),_tokens=require_tokens(),_b_object=require_b_object();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var regex_for_links=/(?:(?:https?|ftp|file):\/\/|www\.|ftp\.)(?:\([-A-Z0-9+&@#/%=~_|$?!:,.']*\)|[-A-Z0-9+&@#/%=~_|$?!:,.'])*(?:\([-A-Z0-9+&@#/%=~_|$?!:,.']*\)|[-A-Z0-9+&@#/%=~_|$])/gim,regex_for_emails=/(?:[a-zA-Z0-9+._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9_-]+)/gim,dotdotdot_observer;typeof ResizeObserver<"u"&&ResizeObserver!==null&&(dotdotdot_observer=new ResizeObserver(entries=>{for(let entry of entries)$(entry.target).trigger("update.dot")}));function apply_dotdotdot(instance,wrap2){let canvas=instance.get_canvas();if(instance.thumbnail_mode()){canvas.css("overflow","hidden");return}function apply_dotdotdot2(){canvas.dotdotdot({wrap:wrap2,callback:(isTruncated,orgContent)=>{u.run_once(30,()=>{var _instance$canvas,_instance$canvas$text;return instance.run_mode()&&instance.canvas.text().trim()===""&&instance.canvas.append(" "),instance.edit_mode()&&orgContent.length!==0&&((_instance$canvas=instance.canvas)==null||(_instance$canvas$text=_instance$canvas.text)==null?void 0:_instance$canvas$text.call(_instance$canvas))&&instance.canvas.text().trim()===""&&element_eval.evaluate_property(instance,"text")!==""},(err,add_placeholder)=>{if(err){logger.log(err);return}if(add_placeholder){let dot_placeholder=u.div("dots-placeholder",canvas);dot_placeholder.css({"line-height":0,"font-size":20,"text-align":instance.get_static_property("font_alignment",!0)}),dot_placeholder.text("............")}})}})}instance.setTimeout(()=>{instance.run_mode()?clipping.watchClip(canvas[0],()=>{apply_dotdotdot2()}):apply_dotdotdot2()},1),instance.autorun(()=>{var _canvas$trigger;for(let prop of["font_size","font_family","font_weight","padding_vertical","line_height","word_spacing","letter_spacing","fit_width","fit_height","min_width_css","max_width_css","min_height_css","max_height_css","single_width","single_height"])element_eval.evaluate_property(instance,prop);(_canvas$trigger=canvas.trigger)==null||_canvas$trigger.call(canvas,"update.dot")}),dotdotdot_observer!=null?dotdotdot_observer.observe(canvas[0]):canvas.css("overflow","hidden")}function remove_dotdotdot(instance){if(instance.canvas!=="destroyed"){var _instance$canvas$trig,_instance$canvas2,_dotdotdot_observer;(_instance$canvas$trig=(_instance$canvas2=instance.canvas).trigger)==null||_instance$canvas$trig.call(_instance$canvas2,"destroy.dot"),clipping.unwatchClip(instance.canvas[0]),(_dotdotdot_observer=dotdotdot_observer)==null||_dotdotdot_observer.unobserve(instance.canvas[0])}}function could_clip(instance){var _instance$element$par;if(element_props.max_height_css(instance)!=null)return!0;if(((_instance$element$par=instance.element.parent())==null?void 0:_instance$element$par.container_layout())==="row"){if(element_eval.evaluate_property(instance,"vert_alignment")!=="stretch")return!1}else if(instance.element.fit_height())return!1;return!0}function apply_text(instance,div,props){function wrap_html(html){return instance.element.is_responsive_v1()&&(props.vertical_centering||instance.run_mode()&&could_clip(instance))?"<div>".concat(html,"</div>"):html}let is_pre_wrap=_appquery.default.get_public_setting("bubble_version")>=10,canvas=instance.get_canvas(),recognize_links=instance.get_static_property("recognize_links"),no_bbcode=instance.get_static_property("no_bbcode"),text;if(instance.run_mode()||!props.editor_preview_text||!props.text||instance.element.property("text").is_static()?text=props.text:text=props.editor_preview_text,no_bbcode)if(u.has_bbcode(text)){if(instance.element.is_responsive_v1()&&could_clip(instance)){var _div$trigger;let inner_div=u.div("");inner_div.text(text),div.append(inner_div),(_div$trigger=div.trigger)==null||_div$trigger.call(div,"update.dot")}else div.text(text);property_applications.apply_css_style(canvas,{"white-space":"pre-wrap"})}else{let formatted_text;recognize_links?formatted_text=u.bbcode_to_html(replace_links_emails(instance,props),is_pre_wrap):formatted_text=u.bbcode_to_html(text,is_pre_wrap),div.html(wrap_html(formatted_text))}else recognize_links&&(text=replace_links_emails(instance,props)),div.html(wrap_html(u.bbcode_to_html(text,is_pre_wrap)))}function replace_links_emails(instance,_ref){let{text,editor_preview_text,link_color,nofollow}=_ref;if(!instance.run_mode()&&editor_preview_text&&text&&!instance.element.property("text").is_static())return editor_preview_text;if(typeof text!="string"||!instance.run_mode())return text;let url_opening_bbcode=["[url=","[url]","[video]","[youtube]"],url_closing_bbcode=["[/url]","[/img]","[/video]","[/youtube]"];function check_url_bbcode(string,link,idx,test_bbcode,check_behind){return check_behind?idx+link.length+test_bbcode.length<=string.length&&string.substring(idx+link.length,idx+link.length+test_bbcode.length)===test_bbcode:idx>=test_bbcode.length&&string.substring(idx-test_bbcode.length,idx)===test_bbcode&&idx+link.length<string.length&&string[idx+link.length]==="]"}function check_email_in_url(string,email,idx){for(let index=0;index<url_opening_bbcode.length;index++){let opening_test_bbcode=url_opening_bbcode[index],closing_test_bbcode=url_closing_bbcode[index];if(string.substring(0,idx).includes(opening_test_bbcode)&&string.substring(idx).includes(closing_test_bbcode)){let substring_after_email=string.substring(idx),idx_url_opening_bbcode=substring_after_email.indexOf(opening_test_bbcode);if(idx_url_opening_bbcode<0||idx_url_opening_bbcode>0&&idx_url_opening_bbcode>substring_after_email.indexOf(closing_test_bbcode))return!0}}return!1}function apply_link_color(string){if(link_color==null)return string;if(link_color.includes(colors_consts.VAR_IDENTIFIER)){var _appquery$get_public_;let color_tokens=(_appquery$get_public_=_appquery.default.get_public_setting("color_tokens"))!=null?_appquery$get_public_:colors_consts.DEFAULT_COLOR_TOKENS,{token_set,variant}=(0,_color_tokens.variable_to_token_variant)(link_color);if(color_tokens[token_set])link_color=color_tokens[token_set][variant];else{var _appquery$get_public_2;link_color=((_appquery$get_public_2=_appquery.default.get_public_setting("color_tokens_user"))!=null?_appquery$get_public_2:(0,_b_object.json_deep_copy)(_tokens.DEFAULT_USER_TOKENS))[variant][token_set].rgba}}let color=u.rgb_to_hex(link_color);return"[color=".concat(color.code,"]").concat(string,"[/color]")}let no_follow_tag=nofollow?" nofollow=true":"",formatted_text=text.replace(regex_for_links,(link,idx)=>{let test_bbcode;for(test_bbcode of url_opening_bbcode)if(check_url_bbcode(text,link,idx,test_bbcode))return link;for(test_bbcode of url_closing_bbcode)if(check_url_bbcode(text,link,idx,test_bbcode,!0))return link;let link_url=/^http/.test(link)?link:"http://".concat(link);return apply_link_color("[url=".concat(link_url).concat(no_follow_tag,"]").concat(link,"[/url]"))});return formatted_text=formatted_text.replace(regex_for_emails,(email,idx)=>{if(check_email_in_url(formatted_text,email,idx))return email;for(let test_bbcode of["[url=https://mailto:","[url=mailto:","[url]"])if(check_url_bbcode(formatted_text,email,idx,test_bbcode))return email;return check_url_bbcode(formatted_text,email,idx,"[/url]",!0)?email:apply_link_color("[email=".concat(email,"]").concat(email,"[/email]"))}),formatted_text}}});var require_text_elements2=__commonJS({"lib-browser-old/core/core_elements/legacy/responsive_v0/shared/text_elements.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_json_stringify();require_es_array_includes();require_es_string_includes();require_es_promise();require_es_promise_finally();require_es_regexp_to_string();require_es_string_trim();var property_applications=require_property_applications(),element_utils=require_element_utils(),u=require_u2(),elements=require_elements2(),webfonts=require_webfonts(),logger=require_logger(),element_eval=require_element_eval(),element_props=require_element_props(),{PADDING_VERSION}=require_elements(),text_elements_v1=require_text_elements(),text_elements=exports;text_elements.wait_for_img_tags_loaded=function(div,cb){if(!(div instanceof $)){cb();return}let imgs=div.find("img").not(function(){return this.complete});if(!imgs.length){cb();return}let count=imgs.length;imgs.on("load",()=>{count--,count===0&&cb()})};text_elements.apply_dynamic_properties_text=function(instance){let canvas=instance.get_canvas(),shrink_if_less_high=instance.get_static_property("shrink_if_less_high"),last_props=null,applied_props=null,last_height=null;instance.autorun(()=>{instance.state("notify_width");let props_to_evaluate=["text","font_size","padding_vertical","line_height","rotation_angle","link_color","nofollow"],props={};for(let prop of props_to_evaluate)props[prop]=element_eval.evaluate_property(instance,prop);if(props.notify_width=instance.state("notify_width"),props.font_face=element_props.get_font_face(instance),last_props=props,!instance.is_animating())if(instance.run_mode()||instance.responsive_mode()){var _instance$element$roo;if((_instance$element$roo=instance.element.root())!=null&&_instance$element$roo.use_responsive_algorithm()&&instance.element.element_version(!0)<PADDING_VERSION){var _props$padding_vertic;canvas[0].style["padding-bottom"]=((_props$padding_vertic=props.padding_vertical)!=null?_props$padding_vertic:0)+"px"}if(text_elements.text_should_stretch_vertically(instance)){let adjust_height=function(cb){if(instance.is_animating(!0)){cb();return}if(!instance.is_visible(!0)){cb();return}applied_props=JSON.stringify(last_props),text_elements_v1.apply_text(instance,content,last_props),text_elements.wait_for_img_tags_loaded(content,()=>{let border_margin_dif=canvas.outerHeight()-canvas.height();if(props.rotation_angle!=null&&![0,180].includes(props.rotation_angle)){cb();return}let inner_height=content.height(),min_height=instance.element.get_height();shrink_if_less_high?(last_height=inner_height+border_margin_dif,instance.set_height(last_height)):(last_height=Math.max(min_height,inner_height+border_margin_dif),instance.set_height(last_height)),cb()})};if(!instance.is_visible()){text_elements.set_text_height_to_invisibility_state(instance);return}if(JSON.stringify(props)===applied_props){last_height&&instance.set_height(last_height);return}let content=canvas.find(".content");content.length===0&&(content=u.div("content",canvas));let dummy_image_div=u.div("content-for-img"),key=elements.add_layout_resizing_key();u.wait_for_updates(()=>{let div_to_watch_for_images;u.has_bbcode(last_props.text)&&!instance.get_static_property("no_bbcode")&&last_props.text.indexOf("[/img]")>-1?(text_elements_v1.apply_text(instance,dummy_image_div,last_props),div_to_watch_for_images=dummy_image_div):div_to_watch_for_images=null,text_elements.wait_for_img_tags_loaded(div_to_watch_for_images,()=>{let{font_family}=webfonts.get_quoted_face_and_variant(props.font_face),{font_size}=props;adjust_height(()=>{var _font_family;(_font_family=font_family)!=null&&_font_family.includes("var(")&&(font_family=webfonts.font_token_to_font(font_family).font_family),text_elements.wait_for_font_loaded("".concat(font_size,"px ").concat(font_family),loaded_instantly=>{if(loaded_instantly){key.turn();return}adjust_height(()=>key.turn())})})})})}else instance.is_visible()&&(property_applications.apply_css_style(canvas,{"word-break":"break-word"}),text_elements_v1.apply_text(instance,canvas,props))}else text_elements_v1.apply_text(instance,canvas,props),element_utils.do_add_an_invisible_div_on_the_top(instance)})};text_elements.wait_for_font_loaded=function(font_code,cb){if(font_code==null){cb(!0);return}if(document.fonts==null){cb(!0);return}if(document.fonts.check(font_code)){cb(!0);return}let font_load_promise=document.fonts.load(font_code);if(font_load_promise.finally!=null)font_load_promise.finally(()=>cb(!1));else if(font_load_promise.then!=null){if(font_load_promise.then(()=>cb(!1)).catch(()=>cb(!1)),Math.random()>.99){var _Promise$prototype$fi,_Promise$prototype$th;logger.info("odd missing Promise.prototype.finally",{type:typeof font_load_promise,this_then:font_load_promise.then.toString(),finally:Promise==null||(_Promise$prototype$fi=Promise.prototype.finally)==null?void 0:_Promise$prototype$fi.toString(),then:Promise==null||(_Promise$prototype$th=Promise.prototype.then)==null?void 0:_Promise$prototype$th.toString()})}}else{var _Promise$prototype$th2;logger.info("document.font polyfill but not Promise",{type:typeof font_load_promise,then:Promise==null||(_Promise$prototype$th2=Promise.prototype.then)==null?void 0:_Promise$prototype$th2.toString()}),cb(!0)}};text_elements.apply_dotdotdot=function(instance,wrap2){let canvas=instance.get_canvas();if(instance.thumbnail_mode()){canvas.css("overflow","hidden");return}return instance.setTimeout(()=>canvas.dotdotdot({wrap:wrap2,callback:(isTruncated,orgContent)=>{u.run_once(30,()=>{var _instance$canvas,_instance$canvas$text;return instance.edit_mode()&&orgContent.length!==0&&((_instance$canvas=instance.canvas)==null||(_instance$canvas$text=_instance$canvas.text)==null?void 0:_instance$canvas$text.call(_instance$canvas))&&instance.canvas.text().trim()===""&&element_eval.evaluate_property(instance,"text")!==""},(err,add_placeholder)=>{if(err){logger.log(err);return}if(add_placeholder){let dot_placeholder=u.div("dots-placeholder",canvas);property_applications.apply_css_style(dot_placeholder,{"line-height":0,"font-size":"20px","text-align":instance.get_static_property("font_alignment",!0)}),dot_placeholder.text("............")}})}}),1),element_eval.pre_cache(instance,["width","height","font_size","padding_vertical","line_height","word_spacing","letter_spacing"]),instance.autorun(()=>{var _canvas$trigger;for(let prop of["width","height","font_size","padding_vertical","line_height","word_spacing","letter_spacing"])element_eval.evaluate_property(instance,prop);instance.element.get_style_id(),(_canvas$trigger=canvas.trigger)==null||_canvas$trigger.call(canvas,"update.dot")})};text_elements.text_should_stretch_vertically=function(instance){var _instance$element$roo2;let use_responsive=(_instance$element$roo2=instance.element.root())==null?void 0:_instance$element$roo2.use_responsive_algorithm(),cut_off_content=instance.get_static_property("cut_off_content"),stretch_to_fit=instance.get_static_property("stretch_to_fit");return use_responsive&&!cut_off_content||!use_responsive&&stretch_to_fit};text_elements.set_text_height_to_invisibility_state=function(instance){instance.get_static_property("shrink_if_less_high")?instance.set_height(0):instance.set_height(instance.element.get_height())}}});var require_Text=__commonJS({"lib-browser-old/core/core_elements/legacy/responsive_v0/Text.js"(exports,module){"use strict";init_define_process_env();init_shim();var appquery=require_appquery(),property_applications=require_property_applications(),Lib=require_lib(),text_elements=require_text_elements2(),element_eval=require_element_eval();module.exports={property_applications:[new property_applications.MinWidth],attempt_size_only_draw(instance){return(instance.run_mode()||instance.responsive_mode())&&Lib().bubble_version()>=4&&!instance.is_visible()&&text_elements.text_should_stretch_vertically(instance)?(text_elements.set_text_height_to_invisibility_state(instance),!1):!0},initialize(instance){let canvas=instance.get_canvas();this.attempt_size_only_draw(instance),instance.autorun(()=>{appquery.get_public_setting("bubble_version")>=10?property_applications.apply_css_style(canvas,{"white-space":"pre-wrap"}):property_applications.apply_css_style(canvas,{"white-space":""})}),instance.wait_for_visible_lite(()=>{var _instance$element$roo,_instance$element$roo2;let wrap2;instance.edit_mode()||instance.responsive_mode()?(wrap2="letter",instance.responsive_mode()&&(canvas[0].style.overflow="hidden")):(wrap2="words",canvas[0].style.overflow="visible");let stretch=instance.get_static_property("stretch_to_fit"),cut_off_content=instance.get_static_property("cut_off_content");element_eval.pre_cache(instance,["text","font_size","padding_vertical","line_height","rotation_angle"]),Lib().bv().apply_dynamic_properties_text(instance),(instance.edit_mode()||instance.thumbnail_mode()||(_instance$element$roo=instance.element.root())!=null&&_instance$element$roo.use_responsive_algorithm()&&cut_off_content||!((_instance$element$roo2=instance.element.root())!=null&&_instance$element$roo2.use_responsive_algorithm())&&!stretch)&&text_elements.apply_dotdotdot(instance,wrap2),instance.responsive_mode()&&(canvas[0].style["pointer-events"]="none")})},additional_data:{notify_width(instance,width){instance.state("notify_width",width)}}}}});var require_Button=__commonJS({"lib-browser-old/core/core_elements/legacy/responsive_v0/Button.js"(exports,module){"use strict";init_define_process_env();init_shim();var property_applications=require_property_applications();module.exports={property_applications:[new property_applications.MinWidth]}}});var require_icons=__commonJS({"lib-browser-old/core/core_elements/legacy/responsive_v0/shared/icons.js"(exports){"use strict";init_define_process_env();init_shim();var element_eval=require_element_eval(),property_applications=require_property_applications(),safe_require=require_safe_require(),icons=exports;safe_require.safe_register("./core/core_elements/legacy/responsive_v0/shared/icons",icons);icons.calculate_font_size_for_fontawesome=function(instance){instance.autorun(()=>{var _instance$state;let height=element_eval.evaluate_property(instance,"height"),width=(_instance$state=instance.state("notify_width"))!=null?_instance$state:element_eval.evaluate_property(instance,"width");function calculate_font_size(){let val=Math.min(height,width),border_correction=Math.max(property_applications.calculate_border_height(instance),property_applications.calculate_border_width(instance));return border_correction!==0&&(val-=border_correction+5),val}instance.get_canvas()[0].style["font-size"]=calculate_font_size()+"px"})}}});var require_Icon=__commonJS({"lib-browser-old/core/core_elements/legacy/responsive_v0/Icon.js"(exports,module){"use strict";init_define_process_env();init_shim();var property_applications=require_property_applications(),runmode_consts=require_runmode(),icons=require_icons(),element_eval=require_element_eval();module.exports={property_applications:[new property_applications.MinWidth],initialize(instance){instance.wait_for_visible_lite(()=>{let canvas=instance.get_canvas();property_applications.patch_user_agent_styles(canvas),element_eval.on_property_change(instance,"icon",icon=>{let add;canvas.hasClass(runmode_consts.CLICKABLE_ELEMENT)&&(add=!0),canvas.attr("class",""),canvas.addClass(icon+" inner-element bubble-element"),add&&canvas.addClass(runmode_consts.CLICKABLE_ELEMENT)}),element_eval.on_property_change(instance,"icon_color",icon_color=>{canvas[0].style.color=icon_color}),element_eval.on_property_change(instance,"spin_icon",spin_icon=>{spin_icon||(spin_icon=!1),canvas.toggleClass("fa-spin",spin_icon)}),icons.calculate_font_size_for_fontawesome(instance)})},additional_data:{notify_width(instance,width){instance.state("notify_width",width)}}}}});var require_url_data=__commonJS({"lib-browser-old/core/url_data.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.get_data_to_send=get_data_to_send;exports.make_URL_friendly_string=make_URL_friendly_string;require_es_array_iterator();require_web_dom_collections_iterator();require_es_regexp_exec();require_es_string_replace();var db_values=_interopRequireWildcard(require_db_values());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function get_data_to_send(data,field){if(!data)return data;if(db_values.registry.is(data,db_values.STATIC_NODE))return null;if(data._id){let slug_value=data.child("Slug").get();if(slug_value!=null&&slug_value!=="")return slug_value;let id,readable;return typeof data._id=="function"?id=data._id():id=data.id,field&&typeof data.child=="function"&&(readable=data.child(field).get()),readable?make_URL_friendly_string(readable)+"-"+id:id}else return data}var space_regex=/ /g,weird_char_regex=/[.,/#!$%^&*;':\\{}=_`~()<>?"@]/g,new_line_regex=/\n/g,dot_regex=/\./g,MAX_READABLE_LENGTH=75;function make_URL_friendly_string(readable,max_length){var _max_length;(_max_length=max_length)!=null||(max_length=MAX_READABLE_LENGTH);let splitted=readable.split(" "),processed_readable=splitted[0];if(processed_readable.length>max_length)processed_readable=processed_readable.slice(0,+max_length+1||void 0);else for(let a of splitted.slice(1)){if(processed_readable.length+a.length>max_length)break;processed_readable+=" "+a}return processed_readable=processed_readable.toLowerCase().replace(space_regex,"-").replace(weird_char_regex,"").replace(new_line_regex,"-").replace(dot_regex,"-"),processed_readable}}});var require_links=__commonJS({"lib-browser-old/core/core_elements/shared/links.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.check_parameters=check_parameters;exports.href_attributes=exports.forbidden_url_keys=void 0;require_es_array_iterator();require_web_dom_collections_iterator();require_es_object_values();require_es_array_includes();var shrink=_interopRequireWildcard(require_shrink());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var href_attributes=["mailto","tel","sms","skype"];exports.href_attributes=href_attributes;var forbidden_url_keys=["id","debug_mode","resume","record_debugging_session"];exports.forbidden_url_keys=forbidden_url_keys;function check_parameters(element,report){if(element.get_static_property("add_parameters")){let object2=element.get_static_property("url_parameters");if(object2!=null)for(let entry of Object.values(object2))forbidden_url_keys.includes(entry[shrink.shrink("key")])&&report(element.display()+": The parameter "+entry[shrink.shrink("key")]+" cannot be used.")}}}});var require_bubble_banner=__commonJS({"lib-browser-old/client/bubble_banner.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_includes();require_es_array_iterator();require_web_dom_collections_iterator();require_es_object_entries();require_es_string_includes();require_web_dom_collections_for_each();var appquery=require_appquery(),configuration=require_client_config2(),Lib=require_lib(),logger=require_logger(),u=require_u2(),bubble_banner=exports;bubble_banner.add_bubble_marketing=add_bubble_marketing;bubble_banner.hide_banner=hide_banner;var hide_banner_fn;function hide_banner(){var _hide_banner_fn;(_hide_banner_fn=hide_banner_fn)==null||_hide_banner_fn()}function show_banner(page_name){if((!appquery.app_plan().no_branding&&!configuration.is_dedicated||appquery.app_version()==="live"&&appquery.app_plan().force_branding_live)&&(appquery.appname()!=="meta"||!["invoice","payout_receipt","poststripeauth"].includes(page_name))){let icon="https://a3f482aa37473c68f97b76bd2e4a3782.cdn.bubble.io/f1585607370503x914556455591480200/banner-icon.svg",div=$('<div style="width: 128px !important; position: fixed !important; bottom: 10px !important; right: 10px !important; height: 29px !important; z-index: 100000000000 !important; box-shadow: 0px 0px 20px 0 #00000069 !important; background: #0205D3 !important; border-radius: 3px !important;"></div>'),wrapper=$('<div style="position: absolute;" class="notranslate" translate="no"></div>'),link=$('<a target="'.concat(appquery.appname()==="meta"?"_self":"_blank",'" style="width: 100%; height: 100%; position: absolute;"></a>')),sub_wrapper=$('<div style=""></div>');sub_wrapper.append($('<img alt="Bubble" src="'.concat(icon,'" style="width: 15px !important; margin-top: 7px !important; margin-left: 6px !important; float: left;"></img>')));let text=$('<div style="color: white; font-size: 12px; font-family: Arial, sans-serif; margin-top: 9px; float: left; margin-left: 8px; width: 95px; font-weight: bold;"></div>');sub_wrapper.append(text),div.append(wrapper.append(sub_wrapper)),div.append(link);let link_url="https://bubble.io?utm_source=app_mention&utm_content="+appquery.appname();link.attr("href",link_url),window.self!==window.top?$(window.frameElement).parent().append(div):$("body").append(div);let long_text="Built on Bubble";text.html(long_text);let div_html=div.html();if(!["meta","pioneer","bubblepodcasts"].includes(appquery.appname())&&window.self===window.top){var _get_native_fn;let banner_interval=((_get_native_fn=get_native_fn("setInterval"))!=null?_get_native_fn:window.setInterval).call(window,()=>handle_banner_cheating(div,div_html),2e3);hide_banner_fn=()=>{document.body.innerHTML===""&&clearInterval(banner_interval)}}}}function handle_banner_cheating(div,div_html){let cheats={tampered_banner:div.html()!==div_html,banner_not_visible:!div.is(":visible"),moved_div:div.parent()[0]!==$("body")[0],not_in_document:!$.contains(document,div[0])},details;cheats.tampered_banner&&(details={original_html:div_html,tampered_html:div.html()});for(let[broken_rule,did_cheat]of Object.entries(cheats))if(did_cheat){logger.info("User bypassed free branding",{broken_rule,details}),alert("This app is a free plan and should have a Bubble banner. Please upgrade to remove this banner. Removing or altering the banner in any way is against Bubble terms and can lead to your account termination."),document.location=Lib().location.get_base_for_meta();return}}function get_native_fn(fn_name){let dummyIframe=document.createElement("iframe");document.body.appendChild(dummyIframe);let native_fn=dummyIframe.contentWindow[fn_name];return document.body.removeChild(dummyIframe),native_fn}function add_bubble_marketing(page_name){setTimeout(()=>{setTimeout(()=>{(!(appquery.app_plan().no_branding&&appquery.get_public_setting("remove_bubble_console"))||appquery.app_plan().force_branding_live)&&(u.console_with_styling("This web application is entirely built without code on Bubble"),console.log("Visit https://bubble.io to build your own apps"))},3e3),setTimeout(()=>{$.migrateWarnings.filter(warning=>!warning.includes("deprecated")).forEach(warning=>{logger.info("JQMIGRATE WARNING "+warning)})},1e4),u.is_debug_mode()||setTimeout(()=>show_banner(page_name),100)},200)}}});var require_internal_navigation=__commonJS({"lib-browser-old/client/internal_navigation.js"(exports){"use strict";init_define_process_env();init_shim();require_es_symbol_description();require_es_error_cause();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.FORCE_INTERNAL_NAV_PARAM=exports.EXPERIMENT_PARAM=void 0;exports.add_internal_navigation_handlers=add_internal_navigation_handlers;exports.add_popstate_handler=add_popstate_handler;exports.in_experimental_control_group=in_experimental_control_group;exports.internal_navigation_enabled=internal_navigation_enabled;exports.internal_navigation_handler=internal_navigation_handler;exports.navigate_to_page=navigate_to_page;exports.push_initial_browser_state=push_initial_browser_state;exports.unload_page=unload_page;exports.update_url=update_url;require_es_array_includes();require_es_array_iterator();require_web_dom_collections_iterator();var _lib=_interopRequireDefault(require_lib()),logger=_interopRequireWildcard(require_logger()),_locations=_interopRequireDefault(require_locations2()),bubble_banner=_interopRequireWildcard(require_bubble_banner()),_u=require_u2();function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var EXPERIMENT_PROBABILITY=0,FORCE_INTERNAL_NAV_PARAM="__internalNav";exports.FORCE_INTERNAL_NAV_PARAM=FORCE_INTERNAL_NAV_PARAM;var EXPERIMENT_PARAM="navigate_internally";exports.EXPERIMENT_PARAM=EXPERIMENT_PARAM;function update_url(path,query){let url=_lib.default.or_throw().location.get_page_url(path,query);window.history.pushState({path,query},"",url),_lib.default.or_throw().pageparam.invalidate()}function push_initial_browser_state(page_id){if(!internal_navigation_enabled())return;let path=_lib.default.or_throw().location.get_pieces().path.join("/"),query=_lib.default.or_throw().location.get_pieces().query;window.history.pushState({path,query},"",_lib.default.or_throw().location.get_page_url(path,query))}function add_popstate_handler(){window.onpopstate=function(e){_lib.default.or_throw().pageparam.invalidate(),!(!internal_navigation_enabled()||!e.state)&&(e.preventDefault(),navigate_internally(e.state.path,e.state.query))}}function internal_navigation_enabled(){return _lib.default.or_throw().location.get_query()[FORCE_INTERNAL_NAV_PARAM]==="true"}function internal_navigation_handler(event){if(!internal_navigation_enabled())return;let element=event.currentTarget,opens_in_another_tab=element.target!=="_self",modified_click=event.button!==0||event.altKey||event.ctrlKey||event.metaKey||event.shiftKey,unknown_protocol=!["http:","https:"].includes(element.protocol);if(opens_in_another_tab||modified_click||unknown_protocol)return;let target=classify_link(element.href);if(target.type!=="external"){if(!_lib.default.or_throw().workflow.prompt_to_leave_page()){event.preventDefault();return}event.preventDefault(),navigate_to_page(target.path.join("/"),target.query)}}function navigate_to_page(path,query){if(!internal_navigation_enabled())navigate_normally(path,query);else if(in_experimental_control_group()){let data=_objectSpread(_objectSpread({},query),{},{[EXPERIMENT_PARAM]:"false"});navigate_normally(path,data)}else navigate_internally(path,query)}function navigate_normally(path,query){_lib.default.or_throw().location.change_page(path,query)}function navigate_internally(path,query){let url=_lib.default.or_throw().location.get_page_url(path,query),page_name=new _locations.default.Location(url).get_page();window.switch_page(page_name,()=>update_url(path,query))||navigate_normally(path,query)}function classify_link(destinationUrl){var _Lib;let sourcePieces=(_Lib=(0,_lib.default)())==null?void 0:_Lib.location.get_pieces(),destinationLocation=new _locations.default.Location(destinationUrl),destinationPieces=destinationLocation.get_pieces();if((sourcePieces==null?void 0:sourcePieces.appname)===destinationPieces.appname&&(sourcePieces==null?void 0:sourcePieces.app_version)===destinationPieces.app_version&&(sourcePieces==null?void 0:sourcePieces.domain)===destinationPieces.domain){let page_name=destinationLocation.get_page(),{path,query}=destinationPieces;return{type:"page",page_name,path,query}}else return{type:"external",url:destinationUrl}}function add_internal_navigation_handlers(element){let a_tags=element.getElementsByTagName("a");for(let el of a_tags)el.addEventListener("click",internal_navigation_handler)}function unload_page(){try{_lib.default.or_throw().element.get_page().destroy(),_lib.default.or_throw().workflow.cancel_all_workflows()}catch(err){logger.error("Error while unloading page",{error:(0,_u.ensure_bubble_error)(err)})}document.body.innerHTML="",bubble_banner.hide_banner()}function in_experimental_control_group(){let res=!1;return Math.random()<EXPERIMENT_PROBABILITY&&!window._bubble_page_load_data.navigated&&(res=!0),window._bubble_page_load_data.navigated=!0,res}}});var require_Link=__commonJS({"lib-browser-old/core/core_elements/legacy/responsive_v0/Link.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_string_trim();require_es_parse_int();require_es_regexp_exec();require_es_string_replace();require_es_object_values();require_es_array_includes();require_es_string_includes();var u=require_u2(),property_applications=require_property_applications(),runmode_consts=require_runmode(),application=require_application(),appquery=require_appquery(),url_data=require_url_data(),lang_consts=require_lang(),evaluate=require_evaluate(),eval_node_state=require_eval_node_state(),Lib=require_lib(),querystring=require_querystring(),element_utils=require_element_utils(),text_elements=require_text_elements2(),links=require_links(),element_eval=require_element_eval(),internal_navigation=require_internal_navigation();module.exports={property_applications:[new property_applications.MinWidth],additional_data:{notify_width(instance,width){instance.state("notify_width",width)}},initialize(instance){let canvas=instance.get_canvas();instance.wait_for_visible_lite(()=>{canvas.addClass(runmode_consts.CLICKABLE_ELEMENT),property_applications.apply_css_style(canvas,{"white-space":"pre-wrap","text-decoration":"none"});let dotdotdot_initialized=!1;element_eval.pre_cache(instance,["text","font_size","icon","show_icon","background_style","no_html"]),instance.canvas[0].addEventListener("click",e=>{internal_navigation.internal_navigation_handler(e)}),instance.autorun(()=>{let props={};for(let prop of["text","font_size","icon","show_icon","background_style","no_html"])props[prop]=element_eval.evaluate_property(instance,prop);let{text,icon,show_icon,background_style,no_html}=props;if(instance.state("notify_width"),background_style==="image")canvas.text("");else if(show_icon){var _canvas$trigger;dotdotdot_initialized=!1,(_canvas$trigger=canvas.trigger)==null||_canvas$trigger.call(canvas,"destroy"),canvas.empty();let icon_div=u.div(icon+" inner-element");property_applications.apply_css_style(icon_div,{"font-family":"FontAwesome","padding-left":"3px"}),canvas.append(icon_div)}else{let inject_text=function(div){no_html?div.html(u.bbcode_to_html(text).trim()):div.html(text)};instance.get_static_property("wrap_when_squizzed")&&(instance.run_mode()||instance.responsive_mode())?(property_applications.apply_css_style(canvas,{"word-break":"break-word"}),instance.wait_for_visible_lite(()=>instance.setTimeout(()=>{let content=canvas.find(".content");content.length===0&&(content=u.div("content",canvas)),inject_text(content);let border_margin_dif=canvas.outerHeight()-canvas.height(),inner_height=parseInt(content.css("height").replace("px","")),min_height=instance.element.get_height();instance.set_height(Math.max(min_height,inner_height+border_margin_dif))},1))):(inject_text(canvas),(instance.run_mode()||instance.thumbnail_mode())&&!dotdotdot_initialized&&(dotdotdot_initialized=!0,text_elements.apply_dotdotdot(instance,instance.edit_mode()||instance.responsive_mode()?"letter":"words"))),instance.run_mode()||element_utils.do_add_an_invisible_div_on_the_top(instance)}background_style==="none"&&new property_applications.NoSelect()._apply(!0,canvas)}),instance.run_mode()&&(element_eval.on_property_change(instance,"open_in_new_tab",open_in_new_tab=>{open_in_new_tab?canvas[0].target="_blank":canvas[0].target="_self"}),element_eval.on_property_change(instance,"link_disabled",link_disabled=>{instance.state("link_disabled",link_disabled),link_disabled?(instance.get_canvas()[0].style.cursor="not-allowed",instance.get_canvas()[0].style["pointer-events"]="none"):(instance.get_canvas()[0].style.cursor="pointer",instance.get_canvas()[0].style["pointer-events"]="auto")}),element_eval.on_property_change(instance,"nofollow",nofollow=>{nofollow&&(canvas[0].rel="nofollow")}),instance.autorun(()=>{let linktype=element_eval.evaluate_property(instance,"linktype");function get_page_name(page){var _name,_appquery$get_page_by;let name=application.page_id_to_name(page);return(_name=name)!=null||(name=(_appquery$get_page_by=appquery.get_page_by_name(page))==null?void 0:_appquery$get_page_by.name()),name}let link;if(linktype==="pagelink"){var _get_page_name;let page=element_eval.evaluate_property(instance,"page"),page_name=(_get_page_name=get_page_name(page))!=null?_get_page_name:"",data_to_send=element_eval.evaluate_property(instance,"data_to_send");if(data_to_send){let page_element=appquery.get_page_by_name(page_name);page_element!=null&&(data_to_send=url_data.get_data_to_send(data_to_send,page_element.get_static_property("readable_field")),data_to_send&&(page_name+="/"+data_to_send))}let params={};if(instance.get_static_property("keep_current_page_params")&&u.extend(params,Lib().location.get_query()),u.is_debug_mode()&&(params.debug_mode=!0),element_eval.evaluate_property(instance,"add_parameters")){let param_nodes=instance.element.property("url_parameters");eval_node_state.with_eval_node(param_nodes,()=>{let url_parameters=evaluate.evaluate_properties(param_nodes.json._raw(),instance.prop_eval_context(),lang_consts.DETECT_FIELD_NAMES,[],param_nodes.json._path());for(let{key,value}of Object.values(url_parameters!=null?url_parameters:{}))links.forbidden_url_keys.includes(key)||(params[key]=value)})}page_name==="index"&&(page_name=""),link=Lib().location.get_server_base()+page_name,u.is_empty(params)||(link+="?"+querystring.stringify(params))}else{var _link;link=element_eval.evaluate_property(instance,"url"),((_link=link)==null?void 0:_link.indexOf("//"))===-1&&!links.href_attributes.includes(link.split(":")[0])&&link[0]!=="#"&&(link="//"+link)}canvas[0].href=link,u.on_phonegap()&&(canvas.on("touchend",()=>window.open(link,"_blank","location=yes,enableViewportScale=yes")),canvas.on("click",e=>(e.preventDefault(),!1)))}))})}}}});var require_Image=__commonJS({"lib-browser-old/core/core_elements/legacy/responsive_v0/Image.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();var property_applications=require_property_applications(),apps_utilities=require_apps_utilities(),images=require_images(),appquery=require_appquery(),u=require_u2(),image_utils=require_image_utils(),element_eval=require_element_eval();function is_src_static(element){let prop=element.property("src");if(!prop.is_empty()&&prop.is_static()&&element.get_static_property("src",!0)!=="")return!0}module.exports={property_applications:[new property_applications.MinWidth],can_defer_drawing(){return!0},register(instance){instance.state("src_version",0)},initialize(instance){let canvas=instance.get_canvas();canvas.addClass("bubble-legacy-image"),instance.wait_for_visible_lite(()=>{let display_text,img=u.img(void 0,canvas);img[0].style.display="block",instance.run_mode()||(display_text=u.div("display_text",canvas),img[0].style.float="left");let _last_autorun_execution=null,_last_saved_source=null;instance.run_mode()&&element_eval.on_property_change(instance,"alt_tag",val=>img[0].alt=val!=null?val:""),element_eval.pre_cache(instance,["src","stretch_or_rescale","width","height","crop_data"]),instance.autorun(()=>{let current_autorun_execution,properties={};for(let prop of["src","stretch_or_rescale","width","height","crop_data"])properties[prop]=element_eval.evaluate_property(instance,prop);let is_static=is_src_static(instance.element);if(!instance.run_mode())if(is_static)display_text[0].style.display="none",img[0].style.display="block";else{var _properties$src;display_text.html((_properties$src=properties.src)!=null?_properties$src:""),property_applications.apply_css_style(display_text,{display:"block",overflow:"hidden",width:"100%",color:"grey"}),img[0].style.display="none";return}if(_last_autorun_execution=current_autorun_execution=u.LUID(),properties.src&&!u.is_empty(properties.src)){let assign_image_to_element=function(source,width,height,imgix_options){function begin_download(optimized_source2){_last_autorun_execution===current_autorun_execution&&image_utils.download_image(optimized_source2,instance,new_src=>{_last_autorun_execution===current_autorun_execution&&(_last_saved_source=source,img[0].src=new_src)})}let optimized_source=image_utils.optimize_image(source,width,height,imgix_options),delay=source===_last_saved_source&&!image_utils.downloaded_images[optimized_source];delay&&apps_utilities.is_test(appquery.appname())&&(delay=!1),delay?instance.setTimeout(begin_download.bind(null,optimized_source),300):begin_download(optimized_source)};if(img[0].src||(img[0].src=image_utils.transparent_image(),image_utils.reset_img_settings(img)),is_static){var _instance$element$roo;let imgix_responsive_options;if((_instance$element$roo=instance.element.root())!=null&&_instance$element$roo.use_responsive_algorithm()&&!instance.get_static_property("keep_proportion_resize")?imgix_responsive_options={fit:"crop"}:imgix_responsive_options={},image_utils.reset_img_settings(img),assign_image_to_element(properties.src,properties.width,properties.height,imgix_responsive_options),properties.crop_data){let make_css_percentage=num=>"".concat(Math.floor(num*100),"%");property_applications.apply_css_style(img,{width:make_css_percentage(properties.crop_data.width_factor),height:make_css_percentage(properties.crop_data.height_factor),"margin-left":make_css_percentage(properties.crop_data.left_offset),"margin-top":properties.crop_data.top_offset*properties.height+"px"})}}else{let src_version=u.autorun_top(()=>instance.state("src_version"));src_version+=1,instance.state("src_version",src_version),properties.stretch_or_rescale==="rescale"?image_utils.rescale_image({src:properties.src,img,instance,ref_version:src_version,cb(){assign_image_to_element(properties.src,element_eval.evaluate_property(instance,"width"),element_eval.evaluate_property(instance,"height"))}}):properties.stretch_or_rescale==="adjust_height"?images.get_image_real_dimensions(properties.src,res=>{if(res.height==null){assign_image_to_element(properties.src,properties.width,properties.height);return}let cur_version=u.autorun_top(()=>instance.state("src_version"));if(src_version!==cur_version)return;image_utils.reset_img_settings(img);let height=res.height/res.width*properties.width;assign_image_to_element(properties.src,properties.width,height),instance.set_height(height)}):properties.stretch_or_rescale==="stretch"?(image_utils.reset_img_settings(img),assign_image_to_element(properties.src,properties.width,properties.height)):properties.stretch_or_rescale==="zoom"&&(image_utils.reset_img_settings(img),property_applications.apply_css_style(img,{"object-fit":"cover"}),assign_image_to_element(properties.src,properties.width,properties.height))}}else img[0].src=image_utils.transparent_image(),_last_saved_source=null,image_utils.reset_img_settings(img)}),instance.autorun(()=>{if(element_eval.evaluate_property(instance,"four_border_style"))for(let border_location of["top","right","bottom","left"])img[0].style["border-radius-"+border_location]=element_eval.evaluate_property(instance,"border_roundness_"+border_location)+"px";else img[0].style["border-radius"]=element_eval.evaluate_property(instance,"border_roundness")+"px"})})},additional_data:{notify_width(instance,width){image_utils.keep_proportions(instance,width)}}}}});var require_Shape=__commonJS({"lib-browser-old/core/core_elements/legacy/responsive_v0/Shape.js"(exports,module){"use strict";init_define_process_env();init_shim();var property_applications=require_property_applications(),image_utils=require_image_utils();module.exports={property_applications:[new property_applications.MinWidth],initialize(){},additional_data:{notify_width(instance,width){return image_utils.keep_proportions(instance,width)}}}}});var require_Alert=__commonJS({"lib-browser-old/core/core_elements/legacy/responsive_v0/Alert.js"(exports,module){"use strict";init_define_process_env();init_shim();var u=require_u2(),property_applications=require_property_applications(),image_utils=require_image_utils(),element_eval=require_element_eval();module.exports={property_applications:[new property_applications.MinWidth],can_defer_drawing(){return!0},register(instance){instance.on_message("show_alert",properties=>{if(instance.is_drawn){instance.message("do_show_alert",properties);return}instance.state("pending_alert",{orig_props:properties,start_time:Date.now()}),instance.run_mode()&&instance.get_static_property("at_to_top")&&instance.ensure_drawn()})},initialize(instance){let canvas=instance.get_canvas();instance.edit_mode()?canvas.empty():(instance.run_mode()||instance.responsive_mode())&&(canvas[0].style.display="none",instance.responsive_mode()&&(instance._has_been_hidden=!0)),element_eval.on_property_change(instance,"text",text=>{canvas.html(u.bbcode_to_html(text))}),instance.on_message("do_show_alert",properties=>{var _properties$fin_start;property_applications.apply_css_style(canvas,{display:"block",opacity:(_properties$fin_start=properties.fin_starting_opacity)!=null?_properties$fin_start:0}),instance._is_visible_me=!0,instance._update_visible(),canvas.html(u.bbcode_to_html(properties.message)),u.velocity(canvas,{opacity:1},{duration:properties.fade_in,complete_cb:()=>{instance.setTimeout(()=>{var _properties$fout_star;canvas.css("opacity",(_properties$fout_star=properties.fout_starting_opacity)!=null?_properties$fout_star:1),u.velocity(canvas,{opacity:0},{duration:properties.fade_out,complete_cb:()=>{canvas[0].style.display="none",instance._is_visible_me=!1,instance._update_visible()}})},properties.hold)}})});let pending_alert=instance.state("pending_alert");pending_alert&&instance.message("do_show_alert",this._convert_pending_alert(pending_alert))},position_canvas(to_position,instance){instance.run_mode()&&instance.get_static_property("at_to_top")?($("body").append(to_position),property_applications.apply_css_style(to_position,{position:"fixed",top:"0px",left:"0px",width:"100%","min-height":instance.element.get_height()+"px","z-index":"20000"})):instance.container.add(instance)},additional_data:{notify_width(instance,width){return image_utils.keep_proportions(instance,width)}}}}});var require_video_elements=__commonJS({"lib-browser-old/core/core_elements/shared/video_elements.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.should_block_cookies=void 0;var _appquery=_interopRequireDefault(require_appquery()),_lib=_interopRequireDefault(require_lib()),db_consts=_interopRequireWildcard(require_db());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var should_block_cookies=()=>_appquery.default.get_public_setting("cookie_opt_in")&&(0,_lib.default)().current_user()._id()===db_consts.NO_USER;exports.should_block_cookies=should_block_cookies}});var require_VideoComponent=__commonJS({"lib-browser-old/core/core_elements/legacy/responsive_v0/VideoComponent.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_regexp_exec();require_es_string_replace();var u=require_u2(),known_plugins_consts=require_known_plugins(),property_applications=require_property_applications(),plugin_registry=require_plugin_registry(),video_elements=require_video_elements(),image_utils=require_image_utils(),element_eval=require_element_eval(),prev_key=u.MakeKey(null,"always turned");prev_key.turn();function video_queue(cb,instance){let new_key=u.MakeKey(null,"next video");u.WaitFor(prev_key,()=>setTimeout(()=>{instance!=null&&instance.is_destroyed()||cb(),new_key.turn()},10)),prev_key=new_key}module.exports={property_applications:[new property_applications.MinWidth],additional_data:{notify_width(instance,width){image_utils.keep_proportions(instance,width,!0)}},initialize(instance){instance.wait_for_visible_lite(()=>{let canvas=instance.get_canvas();instance.setTimeout(()=>{element_eval.pre_cache(instance,["video_source","video_id","autoplay","control_color_vimeo","width","height","padding_horizontal","padding_vertical","loop","auth_token"]);let current_properties={};instance.autorun(()=>{let html_as_jquery_element,prop,token,video_src,actual_changes={},changes={};for(prop of["video_source","video_id","autoplay","control_color_vimeo","width","height","padding_horizontal","padding_vertical","loop","auth_token"])changes[prop]=element_eval.evaluate_property(instance,prop),changes[prop]!==current_properties[prop]&&(actual_changes[prop]=changes[prop],current_properties[prop]=changes[prop]);changes.available_width=changes.width-2*changes.padding_horizontal-property_applications.calculate_border_width(instance),changes.available_height=changes.height-2*changes.padding_vertical-property_applications.calculate_border_height(instance);for(prop of["available_width","available_height"])changes[prop]!==current_properties[prop]&&(actual_changes[prop]=changes[prop],current_properties[prop]=changes[prop]);let html='<iframe allow="autoplay; fullscreen" width="'.concat(changes.available_width,'" height="').concat(changes.available_height,'" ');if(video_elements.should_block_cookies()&&(html+=' sandbox="allow-scripts" '),changes.video_source==="youtube"){var _changes$video_id;((_changes$video_id=changes.video_id)==null?void 0:_changes$video_id.indexOf)!=null&&changes.video_id.indexOf("watch?v=")!==-1&&(changes.video_id=changes.video_id.split("watch?v=")[1]),video_src="//www.youtube.com/embed/"+changes.video_id+"?rel=0",changes.autoplay&&instance.run_mode()&&(video_src+="&autoplay=1"),changes.loop&&instance.run_mode()&&(video_src+="&loop=1&playlist="+changes.video_id),html+=' frameborder="0" allowfullscreen modestbranding="1" autohide="1"'}if(changes.video_source==="vimeo"){var _changes$video_id2;((_changes$video_id2=changes.video_id)==null?void 0:_changes$video_id2.indexOf)!=null&&changes.video_id.indexOf("https://vimeo.com/")!==-1&&(changes.video_id=changes.video_id.split("https://vimeo.com/")[1]);let color=u.rgb_to_hex(changes.control_color_vimeo).code.slice(1);video_src="//player.vimeo.com/video/"+changes.video_id+"?title=0&byline=0&portrait=0&color="+color,changes.autoplay&&instance.run_mode()&&(video_src+="&autoplay=1"),changes.loop&&instance.run_mode()&&(video_src+="&loop=1"),html+=' frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'}if(changes.video_source===known_plugins_consts.ZIGGEO){let service=plugin_registry.get_hardcoded_plugin(known_plugins_consts.ZIGGEO);if(token=changes.auth_token||(service==null?void 0:service.get_key(service.key_for_html_header)),token){var _changes$video_id3,_changes$autoplay,_changes$loop;html_as_jquery_element=$("<ziggeoplayer/>"),html_as_jquery_element.attr({video:(_changes$video_id3=changes.video_id)!=null?_changes$video_id3:"no_video",application:token,auth:"true",width:"100%",height:"100%",autoplay:(_changes$autoplay=changes.autoplay)!=null?_changes$autoplay:"false",loop:(_changes$loop=changes.loop)!=null?_changes$loop:"false",theme:"modern"});let ziggeo_html=html_as_jquery_element[0].outerHTML.replace(/"/g,"'");html+=" frameborder=\"0\" webkitAllowFullScreen mozallowfullscreen allowFullScreen\n                                style='overflow:hidden'\n                                srcdoc=\"\n<html style='overflow:hidden'>\n<head style='overflow:hidden'>\n<meta http-equiv='Content-Security-Policy' content='upgrade-insecure-requests'>\n<link rel='stylesheet' href='https://assets.ziggeo.com/v2-stable/ziggeo.css' />\n<script src='https://assets.ziggeo.com/v2-stable/ziggeo.js'><\/script>\n</head>\n<body style='margin:0px'>\n".concat(ziggeo_html,'\n</body>\n</html>\n"')}else video_src="https://ziggeo.io/p/".concat(changes.video_id),html+='height="'.concat(changes.width,'"\nframeborder="0"\nscrolling="no"\nreferrerpolicy="no-referrer"\nallowspeakers ').concat(changes.autoplay?"allowautoplay":"",' allowfullscreen\nallow="').concat(changes.autoplay?"autoplay *; ":"",'  fullscreen *"\nstyle="width:').concat(changes.width,"px;height:").concat(changes.height,'px" ')}html+="></iframe>",(changes.video_source!=="ziggeo"||!token)&&(html_as_jquery_element=$(html),html_as_jquery_element.attr("src",video_src));let only_has_dimension_changes=changes.video_source!=="ziggeo",dim_only_changes={width:!0,height:!0,available_width:!0,available_height:!0};for(let change in actual_changes)if(!dim_only_changes[change]){only_has_dimension_changes=!1;break}if(instance.run_mode()){if(only_has_dimension_changes){canvas.children().attr({width:changes.available_width,height:changes.available_height});return}changes.video_id?video_queue(()=>{canvas.empty(),canvas.append(html_as_jquery_element)},instance):canvas.empty()}else canvas.empty(),canvas.append('<img style="width: '.concat(changes.available_width,"px; height: ").concat(changes.available_height,'px;" src="//s3.amazonaws.com/appforest_uf/f1665093563671x395094029933674050/video.png"></img>'))})},20)})}}}});var require_HTML=__commonJS({"lib-browser-old/core/core_elements/legacy/responsive_v0/HTML.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_parse_int();require_es_regexp_exec();require_es_string_replace();var elements=require_elements2(),u=require_u2(),property_applications=require_property_applications(),logger=require_logger(),element_utils=require_element_utils(),image_utils=require_image_utils(),video_elements=require_video_elements(),text_elements=require_text_elements2(),element_eval=require_element_eval();function UNMANGLED_html_wrap(fn){return fn()}module.exports={property_applications:[new property_applications.MinWidth],additional_data:{notify_width(instance,width){return image_utils.keep_proportions(instance,width)}},can_defer_drawing(element){return element.get_static_property("defer_drawing")},register(instance){if(instance.run_mode()&&window.bubble_safe_mode)return logger.owner_warn(new u.OwnerError("This HTML element is not rendered in safe mode",{element_instance:instance}))},initialize(instance){function do_initialize(){if(instance.run_mode()&&window.bubble_safe_mode)return;let canvas=instance.get_canvas(),scheduled_time_out_call_for_html_iframe=null,iframe=null,_content_window_ready=()=>iframe[0].contentWindow,last_visible_status=!1,last_html=!1;element_eval.pre_cache(instance,["html","useiframe","width","height"]),instance.autorun(()=>{var _html;let content,props={};for(let prop of["html","useiframe","width","height"])props[prop]=element_eval.evaluate_property(instance,prop);let{html,useiframe,width,height}=props;if((_html=html)!=null||(html=""),instance.run_mode())if(useiframe){let set_html=html_aux=>{instance.clearTimeout(scheduled_time_out_call_for_html_iframe),iframe||(iframe=$('<iframe src="about:blank"></iframe>'),video_elements.should_block_cookies()&&iframe.attr("sandbox","allow-scripts allow-same-origin"),canvas.append(iframe)),iframe[0].style.width=width+"px",iframe[0].style.height=height+"px",_content_window_ready()?(last_html!==html_aux&&(iframe[0].contentWindow.contents=html_aux,last_html=html_aux),iframe[0].src='javascript:window["contents"]'):scheduled_time_out_call_for_html_iframe=instance.setTimeout(()=>set_html(html_aux),100)};set_html(html)}else try{if(instance.get_static_property("stretch_to_fit")){let adjust_height=function(cb){if(instance.is_animating(!0)){cb==null||cb();return}let is_visible=instance.is_visible(!0);if(!is_visible&&!last_visible_status){cb==null||cb();return}last_visible_status=is_visible;let border_margin_dif=canvas.outerHeight()-canvas.height(),inner_height=parseInt(content.css("height").replace("px",""));inner_height===0&&content.find(" > *").length&&(inner_height=parseInt(content.find(" > *").css("height").replace("px","")));let min_height=instance.element.get_height();instance.set_height(Math.max(min_height,inner_height+border_margin_dif)),cb==null||cb()};if(content=canvas.find(".content"),content.length===0&&(content=u.div("content",canvas)),last_html!==html&&(UNMANGLED_html_wrap(()=>content.html(html)),last_html=html),!instance.is_animating()){let key=elements.add_layout_resizing_key();u.wait_for_updates(()=>text_elements.wait_for_img_tags_loaded(content,()=>adjust_height(()=>key.turn()))),instance.is_visible()&&(instance.setTimeout(adjust_height,500),instance.setTimeout(adjust_height,2e3))}}else UNMANGLED_html_wrap(()=>canvas.html(html))}catch(error){let err=error;logger.owner_only_error("html bug",{display:"Bug in custom html:\n"+err.stack,element_instance:instance,prop_name:"html"})}else{canvas.empty();let iframe2=$("          <iframe\n              id='user_preview_iframe'\n              width=\"".concat(width,'"\n              height="').concat(height,'"\n              sandbox="allow-scripts"\n          >\n              (this browser does not support HTML element preview rendering)\n          </iframe>          '));iframe2[0].srcdoc=html,canvas.append(iframe2),element_utils.do_add_an_invisible_div_on_the_top(instance)}})}instance.get_static_property("defer_drawing")?instance.wait_for_visible_lite(do_initialize):do_initialize()}}}});var require_google_maps=__commonJS({"lib-browser-old/geolocation/client/google_maps.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_includes();require_es_string_trim();var Lib=require_lib(),languages=require_languages(),querystring=require_querystring(),appquery=require_appquery(),logger=require_logger(),apps_utilities=require_apps_utilities(),errors=require_errors(),b_async=require_b_async3(),autorun=require_autorun3(),google_maps=exports,google_map_api_loaded=null,bubble_key=null;function get_map_key(){return bubble_key||(bubble_key=window.gm_key,delete window.gm_key),bubble_key}google_maps.load_google_map_api=function(){if(!google_map_api_loaded){google_map_api_loaded=b_async.MakeKey(null,"google_map_api_loaded"),window.initialize_google_map_api=()=>{google_map_api_loaded.turn()};let script=document.createElement("script");script.type="text/javascript";let query={v:3,callback:"initialize_google_map_api"};google_maps.using_bubble_key()||(query.libraries="places"),autorun.run_once(30,()=>({map_key:get_map_key(),app_language:Lib().app_language(!0)}),(err,_ref)=>{let{map_key,app_language}=_ref;if(err)throw errors.ensure_bubble_error(err);app_language&&(app_language=languages.get_iso_code(app_language).split("_")[0],query.language=app_language),map_key&&(query.key=map_key),script.src="https://maps.googleapis.com/maps/api/js?"+querystring.stringify(query),document.getElementsByTagName("head")[0].appendChild(script)})}return google_map_api_loaded};google_maps.using_bubble_key=function(){var _appquery$get_public_;let appname=appquery.appname();return apps_utilities.is_hardcoded(appname)||appname==="meta"?!1:[null,void 0,""].includes((_appquery$get_public_=appquery.get_public_setting("general_keys.google_map_key"))==null?void 0:_appquery$get_public_.trim())};google_maps.proxy_geolocation_request=function(data,hash,cb){data.language=Lib().app_language(),data.appname=appquery.appname();let url=!google_maps.using_bubble_key()&&data.request_type==="timezone"?"server://api/1.1/geolocation/google_proxy":"server://api/1.1/places";Lib().location.post(url,data,(err,results)=>{err&&(logger.log(err),cb({status:err.message},hash)),cb(results,hash)})}}});var require_GoogleMaps=__commonJS({"lib-browser-old/core/core_elements/legacy/responsive_v0/GoogleMaps.js"(exports,module){"use strict";init_define_process_env();init_shim();var u=require_u2(),property_applications=require_property_applications(),google_maps=require_google_maps(),element_utils=require_element_utils(),image_utils=require_image_utils(),element_eval=require_element_eval();module.exports={property_applications:[new property_applications.MinWidth],additional_data:{notify_width(instance,width){image_utils.keep_proportions(instance,width)}},initialize(instance){instance.wait_for_visible_lite(()=>{var _instance$currently_d;(_instance$currently_d=instance.currently_displayed_markers)!=null||(instance.currently_displayed_markers={});let google_map_api_loaded=google_maps.load_google_map_api(),canvas=instance.get_canvas();if(instance.thumbnail_mode()){canvas.css({"background-color":"#E6E6E6"});return}let map=null;u.WaitFor(google_map_api_loaded,()=>{let build=()=>{map=this._get_map(instance,{height:"100%",width:"100%",position:null,top:null,left:null,right:null,bottom:null}),instance.edit_mode()&&element_utils.do_add_an_invisible_div_on_the_top(instance),element_eval.pre_cache(instance,["height","width","four_border_style","border_width","border_style","padding_vertical","padding_horizontal"]),instance.autorun(()=>{this._refresh_border(instance,map)}),element_eval.on_property_change(instance,["allow_zoom_drag","map_style","custom_style","disable_zoom_scroll"],props=>{this._handle_map_option_change(map,props)}),element_eval.on_property_change(instance,"map_type",map_type=>{map.setMapTypeId(window.google.maps.MapTypeId[map_type])}),instance.autorun(()=>{this._render_markers(instance,map)}),instance.autorun(()=>{this._set_center_and_zoom(instance,map)})};instance.wait_for_visible(()=>{instance.setTimeout(build,1)})})})}}}});var require_groups=__commonJS({"lib-browser-old/core/core_elements/legacy/responsive_v0/shared/groups.js"(exports){"use strict";init_define_process_env();init_shim();require_es_parse_int();require_es_regexp_exec();require_es_string_replace();var u=require_u2(),elements=require_elements2(),groups=exports,COLLAPSE_ANIMATION_LENGTH=15;groups.group_collapse_definition={do_show(instance,properties,options,animated,first_show){var _canvas$velocity;instance._is_visible_me=!0,instance.ensure_drawn();let canvas=instance.get_canvas(),was_sliding=instance.group_slide_timeout!==null;if(canvas[0].style.display="",instance._update_visible(),!instance.run_mode())return;(_canvas$velocity=canvas.velocity)==null||_canvas$velocity.call(canvas,"stop"),instance.group_slide_timeout!=null&&(instance.clearTimeout(instance.group_slide_timeout),instance.group_slide_timeout=void 0);let collapse_when_hidden=instance.get_static_property("collapse_when_hidden");function instance_height(){var _instance$state;return(_instance$state=instance.state("actual_height"))!=null?_instance$state:instance.element.get_height()}if(collapse_when_hidden&&!animated)if(instance.get_static_property("collapse_animation")&&!first_show)switch(instance.get_static_property("animation_type")){case"slide":{let _increase_size=function(){let current_instance_height=instance_height();if(current_instance_height!==instance_height_constant&&(instance_height_constant=current_instance_height,pixels_per_ms=instance_height_constant/COLLAPSE_ANIMATION_LENGTH),current_size>=current_instance_height){instance.set_height(current_instance_height),instance.canvas.css("overflow","visible"),instance.group_slide_timeout=void 0;return}current_size+=pixels_per_ms,instance.set_height(current_size),instance.group_slide_timeout=instance.setTimeout(()=>_increase_size(),1)};instance.canvas.css("overflow","hidden");let instance_height_constant=instance_height(),pixels_per_ms=instance_height_constant/COLLAPSE_ANIMATION_LENGTH,current_size=was_sliding?parseInt(canvas.css("height").replace("px","")):0;instance.set_height(current_size),_increase_size();break}case"fade":canvas[0].style.opacity=0,instance.set_height(instance_height()),u.velocity(canvas,"fadeIn",{duration:400}),instance.canvas.css("overflow","visible")}else instance.set_height(instance_height());else animated?(instance.set_height(instance_height()),elements.perform_animate_in(instance,properties,options,!0)):instance.set_height(instance_height())},do_hide(instance,properties,options,animated,first_hide){var _canvas$velocity2;instance.ensure_drawn();let canvas=instance.get_canvas();if(!instance.run_mode()){instance._is_visible_me=!1,instance._update_visible(),canvas[0].style.display="none";return}(_canvas$velocity2=canvas.velocity)==null||_canvas$velocity2.call(canvas,"stop"),instance.group_slide_timeout!=null&&(instance.clearTimeout(instance.group_slide_timeout),instance.group_slide_timeout=void 0);let collapse_when_hidden=instance.get_static_property("collapse_when_hidden"),instance_height=parseInt(canvas.css("height").replace("px",""));if(collapse_when_hidden&&!animated)if(instance.get_static_property("collapse_animation")&&!first_hide)switch(instance.get_static_property("animation_type")){case"slide":{let _reduce_size=function(){if(current_size<=0){instance.set_height(0),canvas[0].style.display="none",instance.canvas.css("overflow","visible"),instance.group_slide_timeout=void 0;return}current_size-=pixels_per_ms,instance.set_height(current_size),instance.canvas.css("height",current_size),instance.group_slide_timeout=instance.setTimeout(()=>_reduce_size(),1)};instance.canvas.css("overflow","hidden");let pixels_per_ms=instance_height/COLLAPSE_ANIMATION_LENGTH,current_size=instance_height;_reduce_size();break}case"fade":{u.velocity(canvas,"fadeOut",{duration:400,complete_cb(){return canvas[0].style.display="none",instance.set_height(0)}});break}}else instance.set_height(0),canvas[0].style.display="none";else if(animated){var _instance$_transforms,_instance$_transforms2,_instance$_transforms3,_instance$_transforms4,_instance$_transforms5;(_instance$_transforms=instance._transforms)!=null||(instance._transforms={}),(_instance$_transforms3=(_instance$_transforms2=instance._transforms).initial_transform)!=null||(_instance$_transforms2.initial_transform=canvas[0].style.transform),(_instance$_transforms5=(_instance$_transforms4=instance._transforms).initial_opacity)!=null||(_instance$_transforms4.initial_opacity=canvas[0].style.opacity),instance.set_animating(!0),u.velocity(canvas,properties.animation,{duration:options.duration,complete_cb(){instance.set_animating(!1),canvas[0].style.transform=instance._transforms.initial_transform,canvas[0].style.opacity=instance._transforms.initial_opacity,instance._transforms=void 0,collapse_when_hidden&&instance.set_height(0)}})}else canvas[0].style.display="none";return instance._is_visible_me=!1,instance._update_visible()}}}});var require_Group=__commonJS({"lib-browser-old/core/core_elements/legacy/responsive_v0/Group.js"(exports,module){"use strict";init_define_process_env();init_shim();var u=require_u2(),property_applications=require_property_applications(),groups=require_groups();module.exports=u.extend({property_applications:[new property_applications.MinWidth],attempt_size_only_draw(instance){return instance.get_static_property("collapse_when_hidden")?(instance.set_height(0),instance.canvas[0].style.display="none",instance.canvas.css("overflow","visible"),!1):!0},register(instance){instance.on_message("child_movement",max_delta=>{let height=instance.element.get_height()+max_delta;(instance.is_visible()||!instance._has_been_hidden)&&instance.set_height(height),instance.state("actual_height",height)})},initialize(instance){}},groups.group_collapse_definition)}});var require_repeating_group_utils=__commonJS({"lib-browser-old/core/core_elements/shared/repeating_group_utils.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.evaluate_extra_fields=void 0;require_web_dom_collections_for_each();require_es_array_iterator();require_web_dom_collections_iterator();var btypes=_interopRequireWildcard(require_btypes());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var is_parent_datasource=property=>property.type()==="ElementParent",is_text_expression=property=>property.type()==="TextExpression",get_lookup_column=datasource=>{let node=datasource.next();return node.type()==="Message"&&node.message().is_lookup()&&btypes.is_custom_type(node.message().ret_btype_id())?node.message().get_lookup_name():null},add_field_name=(property,extra_field_names)=>{if(is_parent_datasource(property)){let extra_field=get_lookup_column(property);extra_field&&extra_field_names.add(extra_field)}return extra_field_names},get_nested_fields=(element,extra_field_names)=>(element.elements().forEach(child_element=>{if(is_repeating_group(child_element))return;is_pass_through_group(child_element)&&(extra_field_names=get_nested_fields(child_element,extra_field_names)),child_element.properties().forEach(property=>{is_text_expression(property)?property.entries().forEach(entry=>{extra_field_names=add_field_name(entry,extra_field_names)}):extra_field_names=add_field_name(property,extra_field_names)})}),extra_field_names),is_repeating_group=element=>element.type()==="RepeatingGroup",is_pass_through_group=element=>{if(element.type()==="Group"){let data_source=element.property("data_source");return is_parent_datasource(data_source)&&!data_source.has_next()}return!1},evaluate_extra_fields=element=>{let extra_field_names=new Set;return extra_field_names=get_nested_fields(element,extra_field_names),Array.from(extra_field_names)};exports.evaluate_extra_fields=evaluate_extra_fields}});var require_repeating_groups=__commonJS({"lib-browser-old/core/core_elements/shared/repeating_groups.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports._get_cell_height=_get_cell_height;exports._get_cell_width=_get_cell_width;exports._get_separator_width=_get_separator_width;exports.check_astable_loop=check_astable_loop;exports.get_external_border_width=void 0;exports.get_fixed_cell_rg_column_count=get_fixed_cell_rg_column_count;require_es_array_includes();require_es_array_iterator();require_web_dom_collections_iterator();require_web_dom_collections_for_each();var mode_check=_interopRequireWildcard(require_mode_check()),_lib=_interopRequireDefault(require_lib()),u=_interopRequireWildcard(require_u2()),element_eval=_interopRequireWildcard(require_element_eval());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _get_separator_width(element){let get_property=(name,suppress_warning)=>{var _element$root;return(!mode_check.on_server()||(0,_lib.default)().force_responsive_version)&&((_element$root=element.root())==null?void 0:_element$root.get_responsive_version())>=1?element.get_styleable_static_property(name,suppress_warning):element.get_static_property(name,suppress_warning)};return[void 0,null,"none"].includes(get_property("separator_style",!0))?0:get_property("separator_width",!0)}function _get_external_border(sides){return function(instance){let border_style;if(instance.get_static_property("four_border_style",!0)){let total_width=0;for(let border_location of sides)border_style=instance.get_static_property("border_style"+border_location,!0),border_style&&border_style!=="none"&&(total_width+=instance.get_static_property("border_width"+border_location,!0));return total_width}else return border_style=instance.get_static_property("border_style",!0),border_style&&border_style!=="none"?2*instance.get_static_property("border_width",!0):0}}var get_external_border_width=_get_external_border(["_left","_right"]);exports.get_external_border_width=get_external_border_width;var get_external_border_height=_get_external_border(["_top","_bottom"]);function _get_cell_width(element){let separator_width=_get_separator_width(element),num_columns=element.get_static_property("columns",!0);return(element.get_width()-separator_width*(num_columns-1)-get_external_border_width(element))/num_columns}function _get_cell_height(element){let separator_width=_get_separator_width(element),num_rows=element.get_static_property("rows",!0);return(element.get_height()-separator_width*(num_rows-1)-get_external_border_height(element))/num_rows}function get_fixed_cell_rg_column_count(instance){var _instance$element2,_instance$element3;let default_value=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;if(instance==null)return default_value;let initial_columns;if(instance.element.is_responsive_v1()>0){var _element_eval$evaluat;initial_columns=(_element_eval$evaluat=element_eval.evaluate_property(instance,"columns"))!=null?_element_eval$evaluat:default_value}else{var _instance$element$get,_instance$element;initial_columns=(_instance$element$get=(_instance$element=instance.element)==null?void 0:_instance$element.get_static_property("columns",!0))!=null?_instance$element$get:default_value}if((_instance$element2=instance.element)!=null&&_instance$element2.parent().is_root()||(_instance$element3=instance.element)!=null&&_instance$element3.get_static_property("fixed_width")){var _instance$columns;return(_instance$columns=instance.columns)!=null?_instance$columns:initial_columns}else{var _instance$columns2;return Math.min((_instance$columns2=instance.columns)!=null?_instance$columns2:1,initial_columns)}}var NORMAL_REFRESH_THRESHOLD=1e3,ASTABLE_REFRESH_COUNT_ERR_THRESHOLD=10;function check_astable_loop(instance,data_source,used_data_sources_cache){let has_key=!1,check_date=Date.now();used_data_sources_cache.forEach((value,key)=>{let{since_timestamp,count}=value;if(check_date-since_timestamp>NORMAL_REFRESH_THRESHOLD){used_data_sources_cache.delete(key);return}if(u.compare(key,data_source)){if(count>ASTABLE_REFRESH_COUNT_ERR_THRESHOLD){let page_or_reusable=instance.element.root();throw new u.OwnerError("Astable data source in repeating group",{display:"".concat(page_or_reusable.type()," ").concat(page_or_reusable.display(),': Data source on repeating group "').concat(instance.element.display(),'" is not stable, please fix or remove conditional data source. Some elements may be able to render and workflows may time out.')})}used_data_sources_cache.set(key,{since_timestamp,count:count+1}),has_key=!0}}),has_key||used_data_sources_cache.set(data_source,{since_timestamp:check_date,count:1})}}});var require_element_registry=__commonJS({"lib-browser-old/core/core_elements/core_elements_utilities/element_registry.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_includes();var safe_require=require_safe_require(),plugins=require_plugins(),service_type_parser=require_service_type_parser(),plugin_getter=require_plugin_getter(),decaf=require_decaf(),element_registry=exports;safe_require.safe_register("./core/core_elements/core_elements_utilities/element_registry",element_registry);element_registry.registered_elements={};element_registry.get_element_object=function(type,no_cache){var _no_cache;if((_no_cache=no_cache)!=null||(no_cache=!1),type!=="CustomElement"){if(element_registry.registered_elements[type])return element_registry.registered_elements[type];{var _plugin_getter$get_pl;let[plugin_name]=service_type_parser.get_plugin_and_type(type);return(_plugin_getter$get_pl=plugin_getter.get_plugin(plugin_name))==null?void 0:_plugin_getter$get_pl.get_element(type,no_cache)}}}}});var require_GroupItem=__commonJS({"lib-browser-old/core/core_elements/GroupItem.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_includes();require_es_string_includes();var _autorun=require_autorun3(),_runtime_json=_interopRequireDefault(require_runtime_json()),_Element=_interopRequireDefault(require_Element()),_responsive_layout=_interopRequireDefault(require_responsive_layout()),_element_registry=_interopRequireDefault(require_element_registry()),_appquery=_interopRequireDefault(require_appquery());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}module.exports=class extends _Element.default{constructor(repeating_instance,height,num,data_instance){let json=new _runtime_json.default(repeating_instance.repeating_layout_type==="Table"?repeating_instance.element.json._raw():void 0,null,"",void 0,_appquery.default.appname(),_appquery.default.app_version());super(json,!1,{_type:"GroupItem"}),this.repeating_instance=void 0,this.height=void 0,this.num=void 0,this.data_instance=void 0,this.repeating_layout=void 0,this.instance=void 0,this.id_watcher=void 0,this.repeating_instance=repeating_instance,this.height=height,this.num=num,this.E=_element_registry.default.get_element_object("GroupItem"),this.data_instance=data_instance!=null?data_instance:repeating_instance,this.repeating_layout=repeating_instance.repeating_layout_type}exists(){return!0}id(){var _this$id_watcher;(_this$id_watcher=this.id_watcher)!=null||(this.id_watcher=(0,_autorun.Watcher)(()=>{var _this$instance,_this$instance$state,_this$instance$state$;let element_id=this.repeating_instance.element.id(),data_id=(_this$instance=this.instance)==null||(_this$instance$state=_this$instance.state("group_data"))==null||(_this$instance$state$=_this$instance$state._id)==null?void 0:_this$instance$state$.call(_this$instance$state);return"".concat(element_id,"_group_item_").concat(data_id!=null?data_id:"undefined","_").concat(this.num)}));let[ready,value]=this.id_watcher.get_current();if(ready)return value;{let element_id=this.repeating_instance.element.id();return"".concat(element_id,"_group_item_null")}}ssr_key(){let element_id=this.repeating_instance.element.id();return"".concat(element_id,"-cell")}parent(){return this.repeating_instance.element}elements(){return this.repeating_instance.element.elements()}get_height(){return this.height}get_responsive_data(){return this.repeating_instance.element.get_responsive_data()}get_static_property(name,suppress_warnings){return _responsive_layout.default.CONTAINER_PROPERTIES.includes(name)?this.repeating_instance.get_static_property(name,suppress_warnings):super.get_static_property(name,suppress_warnings)}container_layout(){return this.repeating_instance.element.container_layout()}get_property_applications(){return this.repeating_layout==="Table"?this.repeating_instance.element.get_property_applications():super.get_property_applications()}_fields(include_all_properties){return this.repeating_layout==="Table"?this.repeating_instance.element._fields(include_all_properties):super._fields(include_all_properties)}field_names(){return this.repeating_layout==="Table"?this.repeating_instance.element.field_names():super.field_names()}get_value_id(){return this.repeating_layout==="Table"?this.repeating_instance.element.get_value_id():super.get_value_id()}can_fit_width(){return this.repeating_layout==="Table"?this.repeating_instance.element.can_fit_width():super.can_fit_width()}can_fit_height(){return this.repeating_layout==="Table"?this.repeating_instance.element.can_fit_height():super.can_fit_height()}}}});var require_RepeatingGroup=__commonJS({"lib-browser-old/core/core_elements/legacy/responsive_v0/RepeatingGroup.js"(exports,module){"use strict";init_define_process_env();init_shim();require_web_immediate();require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_includes();require_es_parse_int();require_es_regexp_exec();require_es_string_replace();var u=require_u2(),elements=require_elements2(),property_applications=require_property_applications(),Lib=require_lib(),languages=require_languages(),status_bar=require_status_bar(),logger=require_logger(),sample=require_sample(),btypes=require_btypes(),element_utils=require_element_utils(),epoch=require_epoch2(),epoch_consts=require_epoch(),repeating_group_utils=require_repeating_group_utils(),repeating_groups=require_repeating_groups(),GroupItem=require_GroupItem(),element_eval=require_element_eval(),BORDER_BOX_COLOR="#CCCCCC",MAX_NUMBER_OF_CELLS=5e3,display_data_span=epoch_consts.SPANS.rg_display_data_in_cells,add_cells_span=epoch_consts.SPANS.rg_add_cells;function rows(instance){return instance.get_static_property("layout_style")==="horizontal_scroll"?1:instance.get_static_property("rows",!0)}module.exports={register(instance){instance.repeating_group_layout={max_index:null,add_cells:null,has_written_a_list:!1,do_create_container:()=>({}),finished_loading_switch:u.MakeSwitch(null,"loading_switch"),raw_list_data(){return null}},instance.repeating_layout_type="RepeatingGroup";let previous_search=null;function write_data(new_data){let dehydrated;new_data!==void 0&&(instance.repeating_group_layout.has_written_a_list=!0),new_data&&new_data.dehydrate?dehydrated=new_data.dehydrate():(dehydrated="no data",new_data=null),dehydrated!==previous_search&&(previous_search=dehydrated,instance.state("list_data",new_data),instance.state("show_range",0))}if(instance.responsive_mode())setImmediate(()=>{var _instance$get_static_;let btype_id=(_instance$get_static_=instance.get_static_property("group_type"))!=null?_instance$get_static_:"user";return write_data(Lib().db_instance().static_list(btype_id,[new sample.SampleObject(btype_id)]))});else if(instance.run_mode()){instance.state("list_data",elements.STATE_NOT_READY);let used_data_sources_cache=new Map;instance.autorun(()=>{if(!instance.state("datasource_changed_by_workflow_action")){let data_source=element_eval.evaluate_property(instance,"data_source");repeating_groups.check_astable_loop(instance,data_source,used_data_sources_cache),write_data(data_source)}}),instance.on_message("set_list_data",new_list=>{instance.state("datasource_changed_by_workflow_action",!0),write_data(new_list)}),instance.on_message("clear_list",()=>{instance.state("datasource_changed_by_workflow_action",!1);let layout_style=instance.get_static_property("layout_style");if(layout_style==="limit_items")instance.state("show_range",0);else if(layout_style==="infinite_scroll"){var _instance$get_canvas;(_instance$get_canvas=instance.get_canvas())==null||_instance$get_canvas.scrollTop(0)}else if(layout_style==="horizontal_scroll"){var _instance$get_canvas2;(_instance$get_canvas2=instance.get_canvas())==null||_instance$get_canvas2.scrollLeft(0)}for(let child of(_instance$children=instance.children)!=null?_instance$children:[]){var _instance$children;element_utils.reset_inputs_and_groups(child)}}),instance.on_message("show_next",wrap_to_beginning=>{var _wrap_to_beginning;(_wrap_to_beginning=wrap_to_beginning)!=null||(wrap_to_beginning=!1),u.run_once(30,()=>{var _instance$state;return(_instance$state=instance.state("list_data"))==null?void 0:_instance$state.length()},(err,length)=>{let is_last_page;if(err){logger.log(err);return}let layout_cells_count=rows(instance)*repeating_groups.get_fixed_cell_rg_column_count(instance),to_show=instance.state("show_range");if(to_show+=layout_cells_count,instance.get_static_property("stable_pagination")){if(is_last_page=to_show>=length,is_last_page&&wrap_to_beginning)to_show=0;else if(is_last_page)return}else{is_last_page=to_show===length;let is_filler_last_page=to_show+layout_cells_count>length;is_last_page&&wrap_to_beginning?to_show=0:is_filler_last_page&&(to_show=Math.max(length-layout_cells_count,0))}instance.state("show_range",to_show)})}),instance.on_message("show_previous",wrap_to_end=>{var _wrap_to_end;return(_wrap_to_end=wrap_to_end)!=null||(wrap_to_end=!1),u.run_once(30,()=>{var _instance$state2;return(_instance$state2=instance.state("list_data"))==null?void 0:_instance$state2.length()},(err,length)=>{if(err){logger.log(err);return}let layout_cells_count=rows(instance)*repeating_groups.get_fixed_cell_rg_column_count(instance),to_show=instance.state("show_range");return to_show===0&&wrap_to_end?instance.get_static_property("stable_pagination")?to_show=Math.max(length-layout_cells_count+length%layout_cells_count,0):to_show=Math.max(length-layout_cells_count,0):to_show=Math.max(to_show-layout_cells_count,0),instance.state("show_range",to_show)})}),instance.on_message("go_to_page",val=>u.run_once(30,()=>{var _instance$state3;return(_instance$state3=instance.state("list_data"))==null?void 0:_instance$state3.length()},(err,length)=>{if(err){logger.log(err);return}let layout_cells_count=rows(instance)*repeating_groups.get_fixed_cell_rg_column_count(instance),to_show=(val-1)*layout_cells_count;return to_show+layout_cells_count>length&&!instance.get_static_property("stable_pagination")&&(to_show=Math.max(0,length-layout_cells_count)),instance.state("show_range",to_show)})),instance.on_message("draw_till",index=>{let layout_style=instance.get_static_property("layout_style");!["infinite_scroll","horizontal_scroll","vertical_extendable"].includes(layout_style)||!instance.repeating_group_layout.max_index||instance.repeating_group_layout.max_index()>index||(instance.repeating_group_layout.add_cells(index+1),instance.repeating_group_layout.max_index(index))}),instance.on_message("scroll_to",properties=>{instance.get_static_property("layout_style")!=="limit_items"&&u.WaitFor(instance.get_children_drawn_key(),()=>{u.run_once(30,()=>{let list=instance.state("list_data");return list==null&&!instance.state("loading")?-1:list==null?void 0:list.position(properties.entry,btypes.get(instance.get_static_property("group_type")))},(err,index)=>{var _instance$children2,_instance$children2$i;if(err){logger.log(err);return}if(index===-1)return;function do_scroll(){let scroll_postion,child=instance.children[index],layout_style=instance.get_static_property("layout_style");if(layout_style==="infinite_scroll")return scroll_postion=child.get_canvas().position().top+instance.get_canvas().scrollTop()+properties.offset,properties.animate?instance.get_canvas().animate({scrollTop:scroll_postion},300):instance.get_canvas().scrollTop(scroll_postion);if(layout_style==="horizontal_scroll")return scroll_postion=child.get_canvas().position().left+instance.get_canvas().scrollLeft(),properties.animate?instance.get_canvas().animate({scrollLeft:scroll_postion},300):instance.get_canvas().scrollLeft(scroll_postion);if(properties.animate)return u.velocity(child.get_canvas(),"scroll",{duration:300,offset:-properties.offset});{let div,parent=child.get_canvas();for(;parent.length&&!parent.hasClass("main-page")&&!div;)parent.css("position")==="fixed"&&(div=parent),parent=parent.parent();return(!parent.length||parent.hasClass("main-page"))&&(div=$(window)),div.scrollTop(child.get_canvas().offset().top+properties.offset)}}(_instance$children2=instance.children)!=null&&(_instance$children2$i=_instance$children2[index])!=null&&_instance$children2$i.is_visible()?do_scroll():u.wait_for_updates(()=>{instance.message("draw_till",index);function wait(){instance.setTimeout(()=>{var _instance$children3,_instance$children3$i,_instance$children4;(_instance$children3=instance.children)!=null&&(_instance$children3$i=_instance$children3[index])!=null&&_instance$children3$i.is_visible()&&(_instance$children4=instance.children)!=null&&_instance$children4[index].canvas.is(":visible")?do_scroll():wait()},50)}wait()})})})})}},initialize(instance){let list_item,canvas=instance.get_canvas(),is_on_window=()=>{var _window,_window$BrowserDetect;return((_window=window)==null||(_window$BrowserDetect=_window.BrowserDetect)==null?void 0:_window$BrowserDetect.OS)==="Windows"},is_rtl=()=>languages.is_rtl(Lib().app_language()),static_columns=()=>instance.get_static_property("columns",!0),columns=()=>{var _instance$columns;return(_instance$columns=instance.columns)!=null?_instance$columns:static_columns()},num_to_row=num=>Math.floor((num-1)/columns())+1,num_to_col=num=>(num-1)%columns()+1;function has_top_border(num){return instance.get_static_property("layout_style")==="horizontal_scroll"?!1:num_to_row(num)>1}function has_left_border(num){return instance.get_static_property("layout_style")==="horizontal_scroll"?num>1:num_to_col(num)>1}let _SEPARATOR_WIDTH=1,_show_border_outline=()=>instance.edit_mode()&&instance.state("show_borders")&&(instance.get_static_property("separator_width")===0||instance.get_static_property("separator_style")==="none");function get_separator_width(){return _show_border_outline()?_SEPARATOR_WIDTH:repeating_groups._get_separator_width(instance.element)}function get_iwidth(){let available_width=instance.element.get_width()-repeating_groups.get_external_border_width(instance)-get_separator_width()*(columns()-1);return Math.floor(10*available_width/(columns()+0))/10}function get_iheight(){let available_height=instance.element.get_height()-repeating_groups.get_external_border_width(instance)-get_separator_width()*(rows(instance)-1);return Math.floor(10*available_height/(rows(instance)+0))/10}let get_zindex=()=>instance.element.get_zindex();function add_sep(num,div){return has_top_border(num)?property_applications.apply_css_style(div,{"border-top-width":get_separator_width()+"px","border-top-color":_show_border_outline()?BORDER_BOX_COLOR:instance.get_static_property("separator_color"),"border-top-style":_show_border_outline()?"solid":instance.get_static_property("separator_style")}):div[0].style["border-top-style"]="none",instance.autorun(()=>{let side;if(is_rtl()?side="right":side="left",has_left_border(num)){let opts={};return opts["border-"+side+"-width"]=get_separator_width()+"px",opts["border-"+side+"-color"]=_show_border_outline()?BORDER_BOX_COLOR:instance.get_static_property("separator_color"),opts["border-"+side+"-style"]=_show_border_outline()?"solid":instance.get_static_property("separator_style"),property_applications.apply_css_style(div,opts)}else div[0].style["border-"+side+"-style"]="none"})}let _width_scrollbar;function get_width_scrollbar(){if(_width_scrollbar==null)if(["show_all","vertical_extendable","limit_items"].includes(instance.get_static_property("layout_style")))_width_scrollbar=0;else{let div=u.div("div-for-scrollbar",$("body"));div.css("overflow-y","scroll"),_width_scrollbar=Math.max(div[0].offsetWidth-div[0].clientWidth,0),div.remove()}return _width_scrollbar}let isize=(num,child)=>instance.autorun(()=>(property_applications.apply_css_style(child.canvas,{float:is_rtl()?"right":"left",position:"relative","box-sizing":"border-box","-moz-box-sizing":"border-box","z-index":get_zindex(),height:get_iheight()+(has_top_border(num)?get_separator_width():0)+"px"}),resize_cell_width(num,child)));function resize_cell_width(num,child,width){var _ref,_child$child_containe;let iwidth=(_ref=width!=null?width:instance.repeating_group_layout.cell_width)!=null?_ref:get_iwidth();return instance.get_static_property("layout_style")!=="horizontal_scroll"&&num_to_col(num)===columns()&&columns()>1&&(iwidth-=get_width_scrollbar()+1),property_applications.apply_css_style(child.canvas,{width:iwidth+(has_left_border(num)?get_separator_width():0)+"px"}),add_sep(num,child.canvas),child==null||(_child$child_containe=child.child_container)==null||_child$child_containe.resize_width(iwidth),setImmediate(()=>{var _child$child_containe2;return child==null||(_child$child_containe2=child.child_container)==null?void 0:_child$child_containe2.resize_width(iwidth)})}function get_dummy_cells(){let dummies;return instance.edit_mode()||instance.thumbnail_mode()?dummies=$("> .list-dummy",canvas):$("> .rows",canvas).length?dummies=$("> .rows > .list-dummy",canvas):dummies=$("> .list-dummy",canvas),dummies}instance.on_message("resize_cell",(num,child,width)=>resize_cell_width(num,child,width)),instance.on_message("resize_dummies",width=>{let iterable=get_dummy_cells();for(let n=0;n<iterable.length;n++){let dummy=iterable[n];resize_cell_width(n+1,{canvas:$(dummy)},width)}}),instance.run_mode()||instance.responsive_mode()||(list_item=u.div("list-item",instance.canvas)),instance.wait_for_visible_lite(()=>{if(instance.run_mode()||instance.responsive_mode()){let container,layout_style=instance.get_static_property("layout_style");instance.children=[];let dummies=[],extra_fields=repeating_group_utils.evaluate_extra_fields(instance.element),init_raw_list_watcher=(start_fn,end_fn)=>{var _instance$repeating_g;(_instance$repeating_g=instance.repeating_group_layout._raw_list_data_watcher)==null||_instance$repeating_g.destroy(),instance.repeating_group_layout._raw_list_data_watcher=u.Watcher(()=>{var _list_data$with_extra,_list_data$with_extra2,_list_data$with_extra3,_list_data$with_extra4;let start_index=start_fn(),last_index=end_fn(),list_data=instance.state("list_data");return(_list_data$with_extra=list_data==null||(_list_data$with_extra2=list_data.with_extra_fields)==null||(_list_data$with_extra3=(_list_data$with_extra4=_list_data$with_extra2.call(list_data,extra_fields)).get_children)==null?void 0:_list_data$with_extra3.call(_list_data$with_extra4,start_index,last_index))!=null?_list_data$with_extra:[]}),instance.repeating_group_layout._raw_list_data_watcher.on_value(()=>{instance.state("loading",!0),instance.repeating_group_layout.finished_loading_switch.turn_off()}),instance.repeating_group_layout.raw_list_data=()=>instance.repeating_group_layout._raw_list_data_watcher.get()},create_cell=(num,cells_canvas)=>{if(!(instance.responsive_mode()&&num>1)){let group_item=new GroupItem(instance,get_iheight(),num),child=elements.ElementInstance(group_item,instance.mode);child.state("group_data",elements.STATE_NOT_READY),child.drawn_key=u.MakeKey(null,"cell_drawn"),group_item.instance=child,instance.children.push(child),child.state("cell_index",num),child._is_visible_me=!1,child.register(instance),child.create_skeleton(container),child.start_draw_tree(),isize(num,child),add_sep(num,child.canvas),child.do_hide(),child.drawn_key.turn()}if(layout_style!=="show_all"){let dummy=u.div("list-dummy",cells_canvas);isize(num,{canvas:dummy}),add_sep(num,dummy),dummies.push(dummy)}},rows_div,display_data_in_cells=()=>epoch.traceSpan(display_data_span.name,display_data_span.type,()=>{let _spinner=null;return instance.autorun(()=>{var _spinner3;let dummy;if(!instance.is_visible()){var _spinner2;(_spinner2=_spinner)==null||_spinner2();return}instance.state("loading",!0),instance.repeating_group_layout.finished_loading_switch.turn_off(),_spinner||(_spinner=status_bar.spinner(instance));let list=instance.repeating_group_layout.raw_list_data(),list_data=instance.state("list_data");instance.responsive_mode()||(list=list.filter(item=>item!=null)),(_spinner3=_spinner)==null||_spinner3(),_spinner=null;let n;for(n=0;n<list.length;n++){let item=list[n];if(instance.children[n]!=null){var _dummies$n;let child2=instance.children[n];u.WaitFor(u.page_loaded_key,()=>child2.can_register_workflows().turn()),child2.message("set_group_data",item),child2.do_show(),["show_all","vertical_extendable"].includes(layout_style)&&child2.message("child_shown");let dummy2=(_dummies$n=dummies[n])==null?void 0:_dummies$n[0];dummy2!=null&&(dummy2.style.display="none")}}instance.last_cell=n;let child=instance.children[n-1];child&&["show_all","vertical_extendable"].includes(layout_style)&&child.message("child_shown");let first_dummy=n;if(["show_all","vertical_extendable"].includes(layout_style)){for(let m=first_dummy;m<instance.children.length;m++)if(instance.children[m].do_hide(),layout_style==="vertical_extendable"){var _dummies$m;dummy=(_dummies$m=dummies[m])==null?void 0:_dummies$m[0],dummy!=null&&(dummy.style.display="none")}first_dummy<instance.children.length&&instance.children[instance.children.length-1].message("child_shown")}else{let total_number_of_cells=rows(instance)*columns();for(let p=first_dummy;p<dummies.length;p++){var _instance$children$p;if(p<total_number_of_cells){var _dummies$p;dummy=(_dummies$p=dummies[p])==null?void 0:_dummies$p[0],dummy!=null&&(dummy.style.display="block")}(_instance$children$p=instance.children[p])==null||_instance$children$p.do_hide()}if(["infinite_scroll","horizontal_scroll"].includes(layout_style)&&first_dummy<dummies.length)for(let p=first_dummy;p<dummies.length;p++)dummy=dummies[p][0],dummy!=null&&(dummy.style.display="none")}layout_style==="horizontal_scroll"&&(rows_div[0].style.width=n*get_iwidth()+(n-1)*get_separator_width()+10+"px"),list_data!=null&&layout_style==="limit_items"&&columns()===1&&rows(instance)===1&&instance.state("show_range")===(list_data==null?void 0:list_data.length())&&list_data.length()>1&&instance.state("show_range",list_data.length()-1),instance.repeating_group_layout.has_written_a_list&&u.wait_for_updates(()=>(instance.mark_children_registered(),instance.get_children_drawn_key().turn())),u.wait_for_updates(()=>{let[error,ready]=instance.repeating_group_layout._raw_list_data_watcher.get_current_status_array(),still_loading=!ready||error!=null;instance.state("loading",still_loading),still_loading?instance.repeating_group_layout.finished_loading_switch.turn_off():instance.repeating_group_layout.finished_loading_switch.turn_on()})})});if(["infinite_scroll","horizontal_scroll","show_all","vertical_extendable"].includes(layout_style)){let old_max_index=0;if(rows_div=u.div("rows",canvas),rows_div[0].style["-webkit-transform"]="translateZ(0)",layout_style==="infinite_scroll"&&(rows_div[0].style["min-height"]=instance.element.get_height()+1+"px"),instance.repeating_group_layout.add_cells=last_cell=>{epoch.traceSpan(add_cells_span.name,add_cells_span.type,()=>{if(last_cell>old_max_index){for(let start=old_max_index+1,num=start,end=last_cell,asc=start<=end;asc?num<=end:num>=end;asc?num++:num--)create_cell(num,rows_div);old_max_index=last_cell,instance.last_cell=old_max_index}layout_style==="horizontal_scroll"&&(rows_div[0].style.width=last_cell*get_iwidth()+(last_cell-1)*get_separator_width()+10+"px")})},container=instance.container.create_child(instance,rows_div),["infinite_scroll","horizontal_scroll","vertical_extendable"].includes(layout_style)){let add_cells_cb=function(additional_to_add,cb_no){var _additional_to_add;(_additional_to_add=additional_to_add)!=null||(additional_to_add=1),started_adding_cells=!0,u.run_once(30,()=>{var _instance$state$with_,_instance$state4,_instance$state4$with;return(_instance$state$with_=(_instance$state4=instance.state("list_data"))==null||(_instance$state4$with=_instance$state4.with_extra_fields)==null?void 0:_instance$state4$with.call(_instance$state4,extra_fields).get_children(instance.repeating_group_layout.max_index(),additional_to_add))!=null?_instance$state$with_:[]},(err,last_entry)=>{if(err){logger.log(err),started_adding_cells=!1;return}if(last_entry.length){let offset,to_add=Math.min(last_entry.length,additional_to_add);layout_style==="infinite_scroll"?offset=columns():offset=0,instance.repeating_group_layout.add_cells(instance.repeating_group_layout.max_index()+to_add+offset),instance.repeating_group_layout.max_index(instance.repeating_group_layout.max_index()+to_add+offset-1),u.wait_for_updates(()=>started_adding_cells=!1)}else started_adding_cells=!1,cb_no==null||cb_no()})},element_inner_height=instance.element.get_height()-repeating_groups.get_external_border_width(instance),canvas_height=canvas.height(),options={"overflow-scrolling":"touch","-webkit-overflow-scrolling":"touch"};instance.responsive_mode()?options["overflow-y"]="hidden":layout_style==="infinite_scroll"?is_on_window()?options["overflow-y"]="scroll":options["overflow-y"]="auto":layout_style==="vertical_extendable"?options["overflow-y"]="hidden":layout_style==="horizontal_scroll"&&(is_on_window()?options["overflow-x"]="scroll":options["overflow-x"]="auto"),property_applications.apply_css_style(canvas,options),instance.autorun(()=>rows_div[0].style.float=is_rtl()?"right":"left");let is_fixed_width=instance.get_static_property("fixed_width");if(layout_style==="vertical_extendable"){let get_possible_cells=function(){let inner_cell_height=get_iheight();if(inner_cell_height===0)return 0;let possible_cells=Math.ceil(($(window).scrollTop()+$(window).height()-canvas.offset().top)/inner_cell_height);return columns()*Math.max(rows(instance),possible_cells)-1};instance.repeating_group_layout.max_index=u.Box(get_possible_cells()),instance.setTimeout(()=>{let to_add=get_possible_cells()-instance.repeating_group_layout.max_index();if(to_add>0)return add_cells_cb(to_add)},100)}else if(layout_style==="horizontal_scroll"&&!is_fixed_width){let get_columns_that_fit=()=>Math.ceil(canvas.width()/get_iwidth());instance.repeating_group_layout.max_index=u.Box(Math.max(columns(),get_columns_that_fit())),instance.setTimeout(()=>{let to_add=get_columns_that_fit()-instance.repeating_group_layout.max_index();to_add>0&&add_cells_cb(to_add)},100)}else instance.repeating_group_layout.max_index=u.Box(rows(instance)*columns());let started_adding_cells=!1,scroll_events="scroll wheel";if(["infinite_scroll","horizontal_scroll"].includes(layout_style))canvas.on(scroll_events,evt=>{let window_height=$(window).height();if(layout_style==="infinite_scroll"){var _window$BrowserDetect2;if(!(u.is_on_mobile_or_tablet()||((_window$BrowserDetect2=window.BrowserDetect)==null?void 0:_window$BrowserDetect2.OS)==="Windows")){var _evt$originalEvent;let canvas_bottom=canvas.offset().top+canvas_height;if(started_adding_cells&&canvas_bottom<$(window).scrollTop()+window_height){evt.preventDefault();return}else if(((_evt$originalEvent=evt.originalEvent)==null?void 0:_evt$originalEvent.wheelDelta)<0&&canvas_bottom>$(window).scrollTop()+window_height){canvas[0].style["overflow-y"]="hidden";return}else canvas[0].style["overflow-y"]="auto"}canvas.scrollTop()+element_inner_height>parseInt(rows_div.css("height").replace("px",""))-50&&add_cells_cb(2*columns())}else if(layout_style==="horizontal_scroll"){if(started_adding_cells){evt.preventDefault();return}let do_it=()=>add_cells_cb(2,()=>rows_div.css("width",instance.last_cell*get_iwidth()+(instance.last_cell-1)*get_separator_width()));is_rtl()?canvas.scrollLeft()<get_iwidth()&&do_it():canvas.scrollLeft()+canvas.width()>parseInt(rows_div.css("width").replace("px",""))-get_iwidth()&&do_it()}});else if(layout_style==="vertical_extendable"){let scroll_event_handing=function(div){let _last_cell_add_timeout=null;div.on("DOMMouseScroll mousewheel scroll wheel",evt=>{started_adding_cells||(instance.clearTimeout(_last_cell_add_timeout),_last_cell_add_timeout=instance.setTimeout(()=>{let canvas_bottom=canvas.offset().top+canvas.height(),screen_height=$(window).height();if(canvas_bottom<$(window).scrollTop()+Math.max(screen_height+get_iheight()*2,100)){let number_of_rows=Math.ceil(($(window).scrollTop()+screen_height-canvas_bottom)/get_iheight()+2);add_cells_cb(Math.max(number_of_rows+1,3)*columns())}},20))})},floating_group_parents=instance.element.parents("FloatingGroup");if(floating_group_parents.length){var _floating_group_paren,_floating_group_paren2;u.wait_for_attached(canvas,()=>{var _fixed_parent;let fixed_parent,parent=canvas;for(;parent.length&&!parent.is("body");)parent.css("position")==="fixed"&&(fixed_parent=parent),parent=parent.parent();(_fixed_parent=fixed_parent)!=null||(fixed_parent=$(window)),scroll_event_handing(fixed_parent)},{error_message:'Dynamic data necessary to render vertically-extending Repeating Group "'.concat(instance.element.display(),'" inside Floating Group "').concat((_floating_group_paren=floating_group_parents[0])==null||(_floating_group_paren2=_floating_group_paren.display)==null?void 0:_floating_group_paren2.call(_floating_group_paren),'" was not ready on page load.\nFor better performance, please set the repeating group to "full list" or re-structure the page to have the repeating group\'s data load earlier elsewhere on the page.')})}else scroll_event_handing($(window))}instance.repeating_group_layout.add_cells(instance.repeating_group_layout.max_index()+1),init_raw_list_watcher(()=>0,()=>instance.repeating_group_layout.max_index()+1),display_data_in_cells()}else rows_div[0].style.overflow="hidden",instance.repeating_group_layout.max_index=u.Box(null,!0),init_raw_list_watcher(()=>0,()=>instance.repeating_group_layout.max_index()),display_data_in_cells(),instance.autorun(()=>{var _instance$state$lengt,_instance$state5;let n=Math.min((_instance$state$lengt=(_instance$state5=instance.state("list_data"))==null?void 0:_instance$state5.length())!=null?_instance$state$lengt:0,MAX_NUMBER_OF_CELLS);if(n>100&&logger.owner_warn(new u.OwnerError("repeating group showing more than 100 items",{display:"This repeating group is showing more than 100 items, which can considerably slow down your page. You should consider using infinite scrolling",element_instance:instance})),u.autorun_top(()=>{instance.repeating_group_layout.add_cells(n),instance.repeating_group_layout.max_index(n)}),n===0)return instance.set_height(0)})}else{container=instance.container.create_child(instance,instance.canvas);for(let num=1,end=rows(instance)*columns(),asc=end>=1;asc?num<=end:num>=end;asc?num++:num--)create_cell(num,instance.canvas);return init_raw_list_watcher(()=>instance.state("show_range"),()=>rows(instance)*columns()),display_data_in_cells()}}else{var _Lib$styles_editor,_Lib$styles_editor$el,_Lib$styles_editor$el2;instance.thumbnail_mode()&&!((_Lib$styles_editor=Lib().styles_editor)!=null&&(_Lib$styles_editor$el=_Lib$styles_editor.element_styles_editor())!=null&&(_Lib$styles_editor$el2=_Lib$styles_editor$el.owner)!=null&&_Lib$styles_editor$el2.is_active())&&u.run_once(60,()=>instance.start_child_drawing())}})},get_container_width(element){let sep_width,columns=element.get_static_property("columns",!0);return[void 0,null,"none"].includes(element.get_static_property("separator_style",!0))?sep_width=element.get_static_property("separator_width",!0):sep_width=0,(element.get_width()-sep_width*(columns-1)-repeating_groups.get_external_border_width(element))/columns},additional_data:{notify_width(instance,total_width){if(!instance.get_static_property("fixed_width")){let cell_width,separator_width=repeating_groups._get_separator_width(instance.element),num_columns=instance.get_static_property("columns",!0),iwidth=repeating_groups._get_cell_width(instance.element);if(instance.get_static_property("layout_style")!=="horizontal_scroll"){if(total_width){var _instance$children6,_child;let cells_to_show,child;if(num_columns===1&&!instance.get_static_property("allow_more_than_one_colum"))cells_to_show=1,cell_width=total_width-repeating_groups.get_external_border_width(instance);else{let min_cell_width=this.get_min_width(instance.element),width=(total_width-separator_width*(num_columns-1)-repeating_groups.get_external_border_width(instance))/num_columns;width<min_cell_width?cell_width=min_cell_width:total_width>instance.element.get_width()?cell_width=iwidth:cell_width=width,cells_to_show=Math.max(Math.floor(total_width/cell_width),1),cell_width=(total_width-separator_width*(cells_to_show-1)-repeating_groups.get_external_border_width(instance))/cells_to_show;let remaining_space=total_width-repeating_groups.get_external_border_width(instance)-cells_to_show*cell_width-separator_width*(cells_to_show-1);cell_width=cell_width+remaining_space/cells_to_show}instance.columns=cells_to_show,instance.repeating_group_layout.cell_width=cell_width;let iterable=(_instance$children6=instance.children)!=null?_instance$children6:[];for(let n=0;n<iterable.length;n++)child=iterable[n],instance.message("resize_cell",n+1,child,cell_width);(_child=child)==null||_child.message("child_shown");let is_responsive_canvas=instance.responsive_mode(),is_runmode_responsive=instance.run_mode()&&!instance.get_static_property("fixed_width");(is_responsive_canvas||is_runmode_responsive)&&instance.message("resize_dummies",cell_width)}}else{let pos=instance.get_canvas().scrollLeft();instance.get_canvas().find("> .rows").css("width",instance.last_cell*iwidth+(instance.last_cell-1)*separator_width+10),instance.get_canvas().scrollLeft(pos),instance.responsive_mode()&&instance.message("resize_dummies",cell_width)}}}}}}});var require_callbacks=__commonJS({"lib-browser-old/u/shared/callbacks.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.ignoreError=ignoreError;function ignoreError(cb){return(_err,arg)=>cb(arg)}}});var require_popups=__commonJS({"lib-browser-old/core/core_elements/shared/popups.js"(exports){"use strict";init_define_process_env();init_shim();require_web_immediate();var u=require_u2(),Lib=require_lib(),property_applications=require_property_applications(),runmode_consts=require_runmode(),elements=require_elements2(),{ignoreError}=require_callbacks(),popups=exports,_layers=[];popups.top_layer=()=>_layers[0];popups.previous_layer=()=>_layers[1];popups.add_layer=popup=>{var _popups$top_layer$sta,_popups$top_layer;popup.state("popup_zindex",Lib().bubble_version()>18?((_popups$top_layer$sta=(_popups$top_layer=popups.top_layer())==null?void 0:_popups$top_layer.state("popup_zindex"))!=null?_popups$top_layer$sta:-1)+1:0),_layers.unshift(popup)};popups.remove_layer=function(popup){let is_popup=element=>element.toUniqueString()===popup.toUniqueString(),idx=_layers.findIndex(is_popup);if(idx>=0)return _layers.splice(idx,1)[0]};function _top_layer_overflow(){var _current$state;let current=popups.top_layer();return(_current$state=current==null?void 0:current.state("body_positioning"))!=null?_current$state:"auto"}popups.set_body_overflow=()=>document.body.style.overflow=_top_layer_overflow();popups.get_popup_top=function(instance,element_height){if(u.is_on_mobile_or_tablet())return 20;{var _element_height;(_element_height=element_height)!=null||(element_height=instance.element.get_height());let screen_height=$(window).height();return element_height>screen_height-100?30:element_height>screen_height-200?50:100}};popups.get_popup_positioning=function(instance,height){var _height,_window$innerHeight;let position;if(instance._has_been_hidden)return;let canvas=instance.get_canvas();(_height=height)!=null||(height=canvas.outerHeight());let window_height=(_window$innerHeight=window.innerHeight)!=null?_window$innerHeight:$(window).height();height>window_height-popups.get_popup_top(instance,height)+10||instance.state("has_been_absolutely_positioned")!=null?(position="absolute",instance.state("body_positioning","visible"),u.on_phonegap()&&$(window).off("touchmove.popup_opened")):instance.responsive_mode()||(position="fixed",instance.state("body_positioning","hidden"),u.on_phonegap()&&(instance.element.find_elements_custom("RepeatingGroup").length||$(window).on("touchmove.popup_opened",evt=>evt.preventDefault()))),popups.set_body_overflow(),canvas[0].style.position=position,position==="absolute"?(instance.state("has_been_absolutely_positioned")==null&&instance.state("has_been_absolutely_positioned",$(window).scrollTop()),canvas[0].style.top=instance.state("has_been_absolutely_positioned")+50+"px"):canvas[0].style.top=popups.get_popup_top(instance,height)+"px"};var POPUP_GREYOUT_CSS={editor:{position:"absolute","z-index":runmode_consts.POPUP_ZINDEX-1},runmode:{position:"fixed","z-index":runmode_consts.POPUP_ZINDEX}};popups.get_greyout=function(instance){if(!instance.state("greyout")){let greyout=u.div("greyout");greyout.hide(),instance.state("greyout",greyout),instance.on_destroy(()=>greyout.remove()),property_applications.apply_css_style(greyout,{top:"0px",left:"0px",width:"100%",height:"100%","background-color":"rgba(0,0,0,0.7)"}),instance.edit_mode()?($(".canvas").append(greyout),greyout.css(POPUP_GREYOUT_CSS.editor)):instance.responsive_mode()?(Lib().visual_edit.responsive_canvas.get_current_preview_canvas().find("> .r-wrapper").append(greyout),greyout.css(POPUP_GREYOUT_CSS.editor)):(greyout.insertBefore(instance.get_canvas()),greyout.css(POPUP_GREYOUT_CSS.runmode))}return instance.state("greyout")};popups.get_elements_to_blur=function(instance){var _found_elements;let found_elements;return instance.edit_mode()&&(found_elements=$(".element",$(css.VISUAL_CANVAS)).not($(".element.Popup,.element.CustomElement.non-draggable",$(css.VISUAL_CANVAS))).not($("*",$(".element.Popup,.element.CustomElement.non-draggable")))),instance.run_mode()&&(found_elements=$("body > div").not(instance.get_canvas().parents()).not(instance.get_canvas()).not(".debugger-canvas").not(".highlight-box").not("span.tt-dropdown-menu").not(".bad-revision").not(".GroupFocus").not(".db-limit-reached")),(_found_elements=found_elements)==null?void 0:_found_elements.add(".stripe-container")};popups.apply_blur_effect_to_greyout=function(instance,value){var _currently_blurred,_popups$get_elements_;let currently_blurred,previous_layer=popups.previous_layer();previous_layer!=null&&(currently_blurred=popups.get_elements_to_blur(previous_layer)),(_currently_blurred=currently_blurred)!=null||(currently_blurred=$());let elements_to_blur=(_popups$get_elements_=popups.get_elements_to_blur(instance))==null?void 0:_popups$get_elements_.not(".Popup:not(:visible)"),elements_to_unblur=currently_blurred.not(elements_to_blur);elements_to_unblur==null||elements_to_unblur.css({"-webkit-filter":"none",filter:"none"});let prop_value="blur(".concat(value,"px)");elements_to_blur==null||elements_to_blur.css({"-webkit-filter":prop_value,filter:prop_value})};popups.remove_blur_effect_to_greyout=function(instance){let elements_to_unblur=popups.get_elements_to_blur(instance);elements_to_unblur==null||elements_to_unblur.css({"-webkit-filter":"none",filter:"none"})};popups.apply_greyout_color=function(instance,value){let greyout=popups.get_greyout(instance);greyout[0].style["background-color"]=value};popups.resize_popup=function(instance,new_width){let key=elements.add_layout_resizing_key();return instance.get_canvas()[0].style["margin-left"]="-"+new_width/2+"px",instance.get_canvas()[0].style.width=new_width+"px",u.WaitFor(instance.get_children_drawn_key(),()=>u.run_once(30,()=>property_applications.calculate_border_width(instance),ignoreError(border_width=>{instance.child_container.resize_width(new_width-border_width),instance._has_been_hidden?key.turn():instance.wait_for_visible(()=>setImmediate(()=>{var _u$real_inner_width;instance.child_container.resize_width((_u$real_inner_width=u.real_inner_width(instance.get_canvas()))!=null?_u$real_inner_width:new_width-border_width),popups.get_popup_positioning(instance),key.turn()}))})))};popups.resize_popup_if_legacy=function(instance,new_width){if(!instance.element.E.uses_css_responsive){let key=elements.add_layout_resizing_key();return u.WaitFor(instance.get_children_drawn_key(),()=>u.run_once(30,()=>property_applications.calculate_border_width(instance),ignoreError(border_width=>{instance.child_container.resize_width(new_width-border_width),instance._has_been_hidden?key.turn():instance.wait_for_visible(()=>setImmediate(()=>{var _u$real_inner_width2;instance.child_container.resize_width((_u$real_inner_width2=u.real_inner_width(instance.get_canvas()))!=null?_u$real_inner_width2:new_width-border_width),popups.get_popup_positioning(instance),key.turn()}))})))}};popups.greyout_field_names={prevent_user_from_closing_through_esc:{no_states:!0},greyout_color:{default:"rgba(0,0,0,0.7)",in_style:!0},greyout_blur:{default:0,no_states:!0,in_style:!0}}}});var require_Popup=__commonJS({"lib-browser-old/core/core_elements/legacy/responsive_v0/Popup.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_includes();require_web_queue_microtask();require_web_immediate();require_es_array_iterator();require_web_dom_collections_iterator();require_es_string_includes();require_es_array_sort();var u=require_u2(),Lib=require_lib(),elements=require_elements2(),property_applications=require_property_applications(),runmode_consts=require_runmode(),popups=require_popups(),element_eval=require_element_eval(),{ignoreError}=require_callbacks();module.exports={property_applications:[new property_applications.MinWidth],initialize(instance){instance.wait_for_visible_lite(()=>{element_eval.on_property_change(instance,"greyout_color",greyout_color=>{popups.apply_greyout_color(instance,greyout_color)}),element_eval.on_property_change(instance,"greyout_blur",greyout_blur=>{[null,void 0,0].includes(greyout_blur)||instance.wait_for_visible(()=>{popups.apply_blur_effect_to_greyout(instance,greyout_blur)})});let _last_max_delta=0;instance.on_message("child_movement",max_delta=>{_last_max_delta=max_delta,instance.wait_for_visible(()=>{let height=instance.element.get_height()+_last_max_delta;popups.get_popup_positioning(instance,height),instance.get_canvas()[0].style.height=height+"px"})}),instance.on_destroy(()=>{(![null,void 0,0].includes(instance.get_static_property("greyout_blur"))||instance.edit_mode())&&popups.remove_blur_effect_to_greyout(instance)})})},position_canvas(to_position,instance){let position;if(instance.responsive_mode()){position="absolute";let div=u.div("r-wrapper popup");div.append(to_position),Lib().visual_edit.responsive_canvas.get_current_preview_canvas().find("> .r-wrapper").append(div),instance.container.add_to_instances(instance),Lib().visual_edit.responsive_canvas.register_wrapper(instance.element_id(),div,!0),to_position.hide()}else instance.edit_mode()?($(".canvas").append(to_position),position="absolute"):($(window.document.body).append(to_position),position="fixed",to_position.css("display","none"));let width=instance.element.get_width();if(property_applications.apply_css_style(to_position,{height:instance.element.get_height()+"px",top:popups.get_popup_top(instance)+"px",position,left:"50%"}),instance.autorun(()=>{var _instance$state;to_position.css("z-index",runmode_consts.POPUP_ZINDEX+((_instance$state=instance.state("popup_zindex"))!=null?_instance$state:0))}),to_position.data("overwrite-left","50%"),instance.run_mode()||instance.responsive_mode()){let get_width=function(window_width){if(instance.run_mode()){var _window_width;(_window_width=window_width)!=null||(window_width=$(window).width())}else if(instance.responsive_mode()){var _window_width2;(_window_width2=window_width)!=null||(window_width=Lib().visual_edit.responsive_canvas.current_width_without_dependency)}return Math.max(instance.element.get_min_width(),Math.min(instance.element.get_width(),window_width-20))};instance.on_resize(window_width=>{instance.is_visible()&&popups.resize_popup(instance,get_width(window_width))});let _screen_height=null;$(window).on("resize.popup_"+instance.element_id(),()=>{let _height=$(window).height();_height!==_screen_height&&(_screen_height=_height,popups.get_popup_positioning(instance))});let last_height=null;queueMicrotask(()=>{instance.autorun(()=>{let height=instance.current_height();height!==last_height&&(last_height=height,popups.get_popup_positioning(instance,height))})}),instance.on_destroy(()=>$(window).off("resize.popup_"+instance.element_id()))}else property_applications.apply_css_style(to_position,{width:width+"px","margin-left":"-"+width/2+"px"})},do_show(instance,properties,options,animated){instance.ensure_drawn();let canvas=instance.get_canvas();instance.state("has_been_absolutely_positioned",null),popups.add_layer(instance),canvas=instance.get_canvas();let grey_out=popups.get_greyout(instance);if(instance.run_mode()){var _instance$state2;grey_out.css("z-index",runmode_consts.POPUP_ZINDEX+((_instance$state2=instance.state("popup_zindex"))!=null?_instance$state2:0))}(![null,void 0,0].includes(instance.get_static_property("greyout_blur"))||instance.edit_mode())&&popups.apply_blur_effect_to_greyout(instance,instance.get_static_property("greyout_blur")),instance.run_mode()?(popups.get_popup_positioning(instance),u.run_once(30,()=>({height:element_eval.evaluate_property(instance,"height"),width:element_eval.evaluate_property(instance,"width")}),ignoreError(_ref=>{var _canvas$velocity,_canvas,_grey_out$velocity;let{height,width}=_ref;(_canvas$velocity=(_canvas=canvas).velocity)==null||_canvas$velocity.call(_canvas,"stop"),(_grey_out$velocity=grey_out.velocity)==null||_grey_out$velocity.call(grey_out,"stop"),popups.get_popup_positioning(instance,height),property_applications.apply_css_style(canvas,{opacity:0,"margin-left":"-"+width/2+"px",width:width+"px"});let new_width=Math.max(instance.element.get_min_width(),Math.min(width,$(window).width()-20));canvas[0].style.display="block",animated?(elements.perform_animate_in(instance,properties,options,!0),setImmediate(()=>{popups.resize_popup(instance,new_width),canvas[0].style.display="block"})):(properties={animation:"transition.fadeIn"},options={duration:300},setImmediate(()=>{popups.resize_popup(instance,new_width)}),elements.perform_animate_in(instance,properties,options,!0)),property_applications.apply_css_style(grey_out,{opacity:0,display:"block"}),u.velocity(grey_out,"fadeIn",{duration:300,complete_cb(){grey_out[0].style.top="-1px",instance.setTimeout(()=>{grey_out[0].style.top="0px"},151)}}),instance.setTimeout(()=>{let focusable_children=[],dont_do_it=!1;function find_focusable_children(parent){for(let child of(_parent$children=parent.children)!=null?_parent$children:[]){var _parent$children;if(child.element.get_messages().includes("set_focus")){if(!child.get_canvas())continue;if(child.get_canvas().is(":focus")){dont_do_it=!0;return}focusable_children.push(child)}find_focusable_children(child)}}if(find_focusable_children(instance),!dont_do_it){focusable_children=focusable_children.filter(a=>a.state("tab_index")&&a.is_visible()),focusable_children.sort((a,b)=>a.state("tab_index")<=b.state("tab_index")?-1:1);for(let a of focusable_children)if(a.is_visible()){a.element.type()!=="DateInput"&&a.message("set_focus");break}}},400),instance.get_static_property("prevent_user_from_closing_through_esc")||($(document).off("keydown.escape"),$(document).on("keydown.escape",event=>{event.keyCode===27&&(instance.do_hide(),$(document).off("keydown.escape"))}),grey_out.off("click"),grey_out.on("click",()=>{instance.do_hide()})),instance.message("popup_opened")}))):(canvas[0].style.display="block",instance._is_visible_me=!0,instance._update_visible(),instance.thumbnail_mode()||(grey_out[0].style.display="block"),instance.responsive_mode()&&(grey_out[0].style.height=grey_out.parents(".res-preview").find(".main-page").height()+"px",u.run_once(30,()=>element_eval.evaluate_property(instance,"width"),ignoreError(width=>{let window_width=Lib().visual_edit.responsive_canvas.current_width_without_dependency;width=Math.max(instance.element.get_min_width(),Math.min(width,window_width-20)),popups.resize_popup(instance,width)}))))},do_hide(instance,properties,options,animated){if(!instance.is_drawn)return;instance.set_animating(!0),u.on_phonegap()&&$(window).off("touchmove.popup_opened");let canvas=instance.get_canvas(),grey_out=popups.get_greyout(instance);if((![null,void 0,0].includes(instance.get_static_property("greyout_blur"))||instance.edit_mode())&&popups.remove_blur_effect_to_greyout(instance),!instance.edit_mode()&&canvas.is(":visible")){var _canvas$velocity2,_grey_out$velocity2;if((_canvas$velocity2=canvas.velocity)==null||_canvas$velocity2.call(canvas,"stop"),(_grey_out$velocity2=grey_out.velocity)==null||_grey_out$velocity2.call(grey_out,"stop"),animated){var _instance$_transforms,_instance$_transforms2,_instance$_transforms3,_instance$_transforms4,_instance$_transforms5;(_instance$_transforms=instance._transforms)!=null||(instance._transforms={}),(_instance$_transforms3=(_instance$_transforms2=instance._transforms).initial_opacity)!=null||(_instance$_transforms2.initial_opacity=canvas[0].style.opacity),(_instance$_transforms5=(_instance$_transforms4=instance._transforms).initial_transform)!=null||(_instance$_transforms4.initial_transform=canvas[0].style.transform),u.velocity(canvas,properties.animation,{duration:options.duration,transform:"",complete_cb(){instance.set_animating(!1),canvas[0].style.transform=instance._transforms.initial_transform,canvas[0].style.opacity=instance._transforms.initial_opacity,instance._transform=void 0}})}else u.velocity(canvas,"fadeOut",{duration:300,complete_cb(){instance.set_animating(!1),canvas[0].style.display="none"}});u.velocity(grey_out,"fadeOut",{duration:300,complete_cb:()=>{grey_out[0].style.display="none"}}),instance.message("popup_closed")}else canvas[0].style.display="none",grey_out[0].style.display="none",instance.set_animating(!1);instance._is_visible_me=!1,instance._update_visible(),popups.remove_layer(instance),popups.set_body_overflow()}}}});var require_FloatingGroup=__commonJS({"lib-browser-old/core/core_elements/legacy/responsive_v0/FloatingGroup.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_includes();var u=require_u2(),Lib=require_lib(),property_applications=require_property_applications(),runmode_consts=require_runmode(),containers=require_containers(),element_edit_eval=require_element_edit_eval(),PRESUMED_GRAYOUT_ZINDEX=runmode_consts.POPUP_ZINDEX,FLOATING_GROUP_ZINDEX_OFFSET=500;module.exports={property_applications:[new property_applications.MinWidth],position_canvas(to_position,instance){let{element}=instance,parent=instance.element.parent();function get_zindex(){if(element.get_static_property("float_zindex")==="back")return 0;{let zindex,greyout_element=$(".greyout");return greyout_element.length===0?zindex=PRESUMED_GRAYOUT_ZINDEX-FLOATING_GROUP_ZINDEX_OFFSET:zindex=greyout_element.css("z-index")-FLOATING_GROUP_ZINDEX_OFFSET,(!zindex||zindex<=0)&&(zindex=2),zindex+instance.element.get_zindex()}}if(!(instance.run_mode()||instance.responsive_mode())||parent.type()!=="Page"){instance.container.add(instance,!0),instance.container.container_canvas.append(instance.get_canvas()),instance.wait_for_visible_lite(()=>{property_applications.apply_css_style(instance.get_canvas(),{position:"absolute",width:instance.element.get_width()+"px",top:instance.element.get_top()+"px",left:instance.element.get_left()+"px",height:instance.element.get_height()+"px"}),u.WaitFor(instance.get_children_drawn_key(),()=>containers.resize_container_width(instance))});return}instance.responsive_mode()&&(instance.container.wrap(instance),instance.container.add_to_instances(instance),to_position=instance.container.to_canvas(instance)),instance.wait_for_visible_lite(()=>{if(element.root().use_responsive_algorithm()&&!element.root().get_static_property("fixed_width")){let calculate_horizontal=()=>{let fat_ratio,margin_ratio,initial_width=element.get_width(),min_width=element.get_min_width(),max_width=element.get_max_width(),left_margin=element.get_left(),{container_width}=instance.container,initial_container_width=element_edit_eval.get_container_width(parent),right_margin=initial_container_width-(left_margin+initial_width),total_margin=left_margin+right_margin,fat=initial_width-min_width,shrink=initial_container_width-container_width;switch(fat===0?fat_ratio=1:fat>=shrink?(fat_ratio=(fat-shrink)/fat,shrink=0):(fat_ratio=0,shrink-=fat),total_margin===0||shrink===0?margin_ratio=1:total_margin>=shrink?margin_ratio=(total_margin-shrink)/total_margin:margin_ratio=0,element.get_static_property("floating_reference_horizontal_resp")){case"left":to_position.css("left",left_margin*margin_ratio);break;case"right":to_position.css("right",right_margin*margin_ratio);break}let new_width=min_width+fat*fat_ratio;max_width&&(new_width=Math.min(new_width,max_width)),to_position.css("width",new_width),u.WaitFor(instance.get_children_drawn_key(),()=>containers.resize_container_width(instance,new_width))};instance.container.on("resize_width",calculate_horizontal),u.WaitFor(instance.container.flow_created,()=>{let bottom,position,top,initial_height=element.get_height(),floating_reference=element.get_static_property("floating_reference"),overflow_y;return["bottom","top","both"].includes(floating_reference)?(position=instance.responsive_mode()?"absolute":"fixed",floating_reference==="top"?(top=element.get_top(),bottom=void 0):floating_reference==="bottom"?(top=void 0,bottom=parent.get_height()-element.get_top()-element.get_height(),u.is_debug_mode()&&(bottom+=50)):floating_reference==="both"&&(top=element.get_top(),bottom=parent.get_height()-element.get_top()-element.get_height(),u.is_debug_mode()&&(bottom+=50),initial_height=void 0,overflow_y="auto")):(position="absolute",top=element.get_top(),bottom=void 0),instance.responsive_mode()?instance.container.container_canvas.append(to_position):$("body").append(to_position),to_position.addClass("floating-group"),to_position.css({position,"z-index":get_zindex(),height:initial_height,top,bottom,"overflow-y":overflow_y}),calculate_horizontal()})}else{let computed_bottom,computed_left,computed_margin_left,computed_right,computed_top,position,top=computed_top=element.get_top(),left=computed_left=element.get_left(),height=element.get_height(),width=element.get_width();switch(element.get_static_property("floating_reference_horizontal")){case"left":computed_left=left,computed_right=void 0;break;case"right":computed_right=parent.get_width()-left-width,computed_left=void 0;break;default:computed_left="50%",computed_margin_left=-parent.get_width()/2+left}if(["bottom","top"].includes(element.get_static_property("floating_reference")))switch(position="fixed",element.get_static_property("floating_reference")){case"top":computed_top=element.get_top(),computed_bottom=void 0;break;case"bottom":if(computed_bottom=parent.get_height()-top-height,u.is_debug_mode()){let debugger_canvas=Lib().workflow.debugger.canvas;computed_bottom+=debugger_canvas.children(".element-area").height()}computed_top=void 0;break}else position="absolute";$("body").append(to_position),to_position.addClass("floating-group"),to_position.css({position,"z-index":get_zindex(),width,height,top:computed_top,bottom:computed_bottom,left:computed_left,right:computed_right,"margin-left":computed_margin_left}),element.root().use_responsive_algorithm()&&u.WaitFor(instance.get_children_drawn_key(),()=>containers.resize_container_width(instance,width))}let parallax_factor=instance.get_static_property("parallax");instance.run_mode()&&![null,void 0,1].includes(parallax_factor)&&$(window).on("scroll",()=>window.requestAnimationFrame(()=>property_applications.apply_css_style(to_position,{transform:"translate3d(0,"+(1-parallax_factor)*$(window).scrollTop()+"px, 0)"})))})},register(instance){instance.get_static_property("floating_reference")!=="both"&&instance.on_message("child_movement",max_delta=>{instance.state("child_movement_delta",max_delta)})},initialize(instance){instance.get_static_property("floating_reference")!=="both"&&instance.autorun(()=>{let max_delta=instance.state("child_movement_delta");if(max_delta!=null){let height=instance.element.get_height()+max_delta;instance.get_canvas().height(height)}})},additional_data:{notify_width(instance,width){u.WaitFor(instance.get_children_drawn_key(),()=>containers.resize_container_width(instance,width))}}}}});var require_GroupFocus=__commonJS({"lib-browser-old/core/core_elements/legacy/responsive_v0/GroupFocus.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_regexp_exec();require_es_string_match();require_es_array_iterator();require_web_dom_collections_iterator();var u=require_u2(),elements=require_elements2(),property_applications=require_property_applications(),Lib=require_lib(),logger=require_logger(),appquery=require_appquery(),containers=require_containers(),element_eval=require_element_eval(),mode_check=require_mode_check();module.exports={initialize(instance){let canvas=instance.get_canvas(),about_to_hide=!1;if(instance.run_mode()){let event_name;u.is_on_mobile_or_tablet()?event_name="touchend.groupfocus, inputmaskclick":event_name="click.groupfocus, inputmaskclick",$("body").on(event_name,evt=>{var _$$attr;let searchbox_dropdown=$(".tt-dropdown-menu");instance.is_visible()&&!canvas.data("GroupWithFocus_loading")&&canvas[0]!==evt.target&&!$.contains(canvas[0],evt.target)&&!((_$$attr=$(evt.target).attr("class"))!=null&&_$$attr.match(/\bselect2-/))&&!(searchbox_dropdown.length>0&&$.contains(searchbox_dropdown[0],evt.target))&&(mode_check.running_test()?instance.do_hide():(about_to_hide=!0,instance.setTimeout(()=>{u.WaitFor(Lib().workflow.everything_done_key(),()=>{about_to_hide=!1,instance.do_hide()})},10)))}),instance.on_message("child_movement",max_delta=>{let height=instance.element.get_height()+max_delta;instance.get_canvas()[0].style.height=height+"px"})}instance.autorun(()=>{let manual_position=instance.state("manual_position");manual_position&&property_applications.apply_css_style(instance.get_canvas(),manual_position)})},position_canvas(to_position,instance){let options;if(instance.responsive_mode()){options={position:"absolute"};let div=u.div("r-wrapper groupfocus");div.append(to_position),Lib().visual_edit.responsive_canvas.get_current_preview_canvas().find("> .r-wrapper").append(div),instance.container.add_to_instances(instance),Lib().visual_edit.responsive_canvas.register_wrapper(instance.element_id(),div,!0),to_position.hide()}else instance.edit_mode()?($(".container.page-element").parent(".non-draggable").append(to_position),options={position:"absolute"}):($(window.document.body).append(to_position),options={position:"fixed"});if(u.extend(options,{width:instance.element.get_width()+"px",height:instance.element.get_height()+"px","z-index":Lib().bv().MAX_POPUP_ZINDEX+instance.element.get_zindex()}),property_applications.apply_css_style(to_position,options),instance.run_mode()||instance.responsive_mode()){let resize_group=width=>{u.WaitFor(instance.get_children_drawn_key(),()=>instance.wait_for_visible_lite(()=>{instance.get_canvas().css({width}),containers.resize_container_width(instance,width)}))};resize_group(u.real_inner_width(instance.get_canvas())),instance.on_resize(window_width=>u.run_once(30,()=>instance.find_instance_by_id(instance.get_static_property("reference")),(err,reference)=>{if(err){logger.log(err);return}if(!reference)return;let left=reference.get_canvas().offset().left+instance.get_static_property("offset_left"),new_width=Math.max(instance.element.get_min_width(),Math.min(instance.element.get_width(),window_width-20-left));resize_group(new_width)}))}},do_show(instance,properties,options,animated){instance._is_visible_me=!0,instance.ensure_drawn(),instance._update_visible();let canvas=instance.get_canvas();if(!instance.run_mode()){if(canvas[0].style.display="",instance.responsive_mode()){let greyout=u.div("groupfocus-greyout",Lib().visual_edit.responsive_canvas.get_current_preview_canvas().find("> .r-wrapper"));property_applications.apply_css_style(greyout,{"background-color":"rgba(0, 0, 0, 0.701961)",top:"0px",left:"0px",position:"absolute",width:"100%",height:greyout.parents(".res-preview").find(".main-page").height()+"px","z-index":2001+instance.element.get_zindex()})}return}u.run_once(30,()=>instance.find_instance_by_id(instance.get_static_property("reference")),(err,reference)=>{var _canvas$velocity;if(err){logger.log(err);return}if(!reference)return;(_canvas$velocity=canvas.velocity)==null||_canvas$velocity.call(canvas,"stop"),animated?elements.perform_animate_in(instance,properties,options):(canvas[0].style.display="",instance._is_visible_me=!0,instance._update_visible());function locate(){let reference_bottom,reference_left;if(instance.state("manual_position"))return;let reference_canvas=reference.get_canvas();reference_canvas?(reference_left=reference_canvas.offset().left,reference_bottom=reference_canvas.offset().top+reference_canvas.height()):(reference_left=0,reference_bottom=0);let left=reference_left+instance.get_static_property("offset_left"),top=reference_bottom+instance.get_static_property("offset_top")-$(window).scrollTop();canvas.css({top,left})}if(locate(),!u.is_on_mobile_or_tablet()){let old_width=null;$(window).off("resize.groupfocus"+instance.toUniqueString()),$(window).on("resize.groupfocus"+instance.toUniqueString(),()=>{let new_width=$(window).width();old_width!==new_width&&(old_width=new_width,instance.is_visible()&&!instance.get_canvas().data("GroupWithFocus_loading")&&instance.do_hide())})}let event_name="scroll.groupfocus"+instance.toUniqueString();$(window).off(event_name),$(window).on(event_name,locate)})},do_hide(instance,properties,options,animated){var _canvas$velocity2;instance._is_visible_me=!1,instance._update_visible();let canvas=instance.get_canvas();if((_canvas$velocity2=canvas.velocity)==null||_canvas$velocity2.call(canvas,"stop"),animated){var _instance$_transforms,_instance$_transforms2,_instance$_transforms3,_instance$_transforms4,_instance$_transforms5;(_instance$_transforms=instance._transforms)!=null||(instance._transforms={}),(_instance$_transforms3=(_instance$_transforms2=instance._transforms).initial_opacity)!=null||(_instance$_transforms2.initial_opacity=canvas[0].style.opacity),(_instance$_transforms5=(_instance$_transforms4=instance._transforms).initial_transform)!=null||(_instance$_transforms4.initial_transform=canvas[0].style.transform),instance.set_animating(!0),u.velocity(canvas,properties.animation,{duration:options.duration,complete_cb(){instance.set_animating(!1),canvas[0].style.transform=instance._transforms.initial_transform,canvas[0].style.opacity=instance._transforms.initial_opacity,instance._transforms=void 0}})}else canvas[0].style.display="none";$(window).off("resize.groupfocus"+instance.toUniqueString()),$(window).off("scroll.groupfocus"+instance.toUniqueString()),instance.responsive_mode()&&Lib().visual_edit.responsive_canvas.get_current_preview_canvas().find("> .r-wrapper").find(".groupfocus-greyout").remove()}}}});var require_GroupWithFocus=__commonJS({"lib-browser-old/core/core_elements/legacy/responsive_v0/GroupWithFocus.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_regexp_exec();require_es_string_match();var u=require_u2(),property_applications=require_property_applications(),groups=require_groups();module.exports=u.extend({property_applications:[new property_applications.MinWidth],initialize(instance){let canvas=instance.get_canvas();if(instance.do_hide(),instance.run_mode()){let event_name;u.is_on_mobile_or_tablet()?event_name="touchend.groupfocus":event_name="click.groupfocus",$("body").on(event_name,evt=>{var _$$attr;instance.is_visible()&&!canvas.data("GroupWithFocus_loading")&&canvas[0]!==evt.target&&!$.contains(canvas[0],evt.target)&&!((_$$attr=$(evt.target).attr("class"))!=null&&_$$attr.match(/\bselect2-/))&&instance.do_hide()}),instance.on_message("child_movement",max_delta=>{let height=instance.element.get_height()+max_delta;instance.get_canvas()[0].style.height=height+"px"})}}},groups.group_collapse_definition)}});var require_Input=__commonJS({"lib-browser-old/core/core_elements/legacy/responsive_v0/Input.js"(exports,module){"use strict";init_define_process_env();init_shim();var property_applications=require_property_applications();module.exports={property_applications:[new property_applications.MinWidth]}}});var require_MultiLineInput=__commonJS({"lib-browser-old/core/core_elements/legacy/responsive_v0/MultiLineInput.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_parse_int();require_es_regexp_exec();require_es_string_replace();var property_applications=require_property_applications(),element_utils=require_element_utils(),Lib=require_lib(),u=require_u2(),inputs=require_inputs(),element_eval=require_element_eval();module.exports={property_applications:[new property_applications.MinWidth],initialize(instance){instance.wait_for_visible_lite(()=>{let canvas=instance.get_canvas();inputs.reset_input_div(canvas),canvas.attr("data-gramm_editor","false"),element_utils.register_tab_index_listener(instance,tabindex=>{canvas.attr("tabindex",tabindex)}),instance.autorun(()=>{canvas.attr("placeholder",element_eval.evaluate_property(instance,"placeholder")),window.optional_modules.autosize.update(canvas)}),instance.run_mode()||(canvas.attr("readonly","true"),canvas[0].style.resize="none"),inputs.set_character_limit_on_input(instance),instance.autorun(()=>{inputs.assign_enter_handler_in_input(instance,!0)});let override_disable=u.Box(0);inputs.input_change_autorun(instance,val=>{instance.state("is_focused")||(canvas.val(val!=null?val:""),instance.run_mode()&&instance.get_static_property("stretch_to_fit")&&instance.is_visible()&&(canvas[0].disabled?(override_disable(override_disable.dangerously_peek()+1),instance.setTimeout(()=>{window.optional_modules.autosize.update(canvas),override_disable(override_disable.dangerously_peek()-1)},5)):window.optional_modules.autosize.update(canvas)))}),instance.run_mode()&&(instance.on_message("set_focus",()=>canvas.focus()),inputs.assign_change_keyup_handlers(instance,()=>instance.get_canvas().val()),instance.autorun(()=>{override_disable()>0?canvas[0].disabled=!1:canvas[0].disabled=element_eval.evaluate_property(instance,"disabled")}),instance.get_static_property("stretch_to_fit")&&(canvas[0].style["min-height"]=instance.element.get_height()+"px",Lib().bubble_version()>=8&&canvas.attr("rows",1),window.optional_modules.autosize(canvas),canvas.on("autosize:resized",()=>{let height=parseInt(canvas.css("height").replace("px",""));instance.set_height(height)}),instance.wait_for_visible(()=>window.optional_modules.autosize.update(canvas)),instance.on_destroy(()=>window.optional_modules.autosize.destroy(canvas))))})}}}});var require_Checkbox=__commonJS({"lib-browser-old/core/core_elements/legacy/responsive_v0/Checkbox.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_includes();var u=require_u2(),property_applications=require_property_applications(),runmode_consts=require_runmode(),element_utils=require_element_utils(),inputs=require_inputs(),element_eval=require_element_eval();module.exports={property_applications:[new property_applications.MinWidth],can_defer_drawing(){return!0},initialize(instance){instance.wait_for_visible_lite(()=>{let canvas=instance.get_canvas();canvas[0].style.overflow="visible";let inner_id=u.LUID(),ip=$('<input type="checkbox" id="'+inner_id+'" style="background-color: white;"></input>'),label_div=$('<label for="'+inner_id+'"></label>');canvas.append(ip),canvas.append(label_div),element_utils.register_tab_index_listener(instance,tabindex=>{ip.attr("tabindex",tabindex)}),inputs.register_focus(instance,ip),instance.on_message("set_focus",()=>ip.focus()),instance.run_mode()&&(canvas.addClass(runmode_consts.CLICKABLE_ELEMENT),ip.change(()=>{var _ip$0$checked;return instance.message("user_submit",(_ip$0$checked=ip[0].checked)!=null?_ip$0$checked:!1),!0}),element_eval.on_property_change(instance,"disabled",value=>{ip[0].disabled=value})),element_eval.on_property_change(instance,"label",label=>{label_div.text(label)}),(instance.run_mode()||instance.responsive_mode())&&instance.autorun(()=>{var _instance$element$roo;(_instance$element$roo=instance.element.root())!=null&&_instance$element$roo.use_responsive_algorithm()&&(element_eval.evaluate_property(instance,"width"),instance.set_height(Math.max(instance.element.get_height(),label_div.height())))}),inputs.input_change_autorun(instance,val=>{typeof val=="string"&&["false","no","null","none","undefined"].includes(val.toLowerCase())&&(val=!1),val?ip[0].checked=!0:ip[0].checked=!1})})}}}});var require_Dropdown=__commonJS({"lib-browser-old/core/core_elements/legacy/responsive_v0/Dropdown.js"(exports,module){"use strict";init_define_process_env();init_shim();var property_applications=require_property_applications();module.exports={property_applications:[new property_applications.MinWidth]}}});var require_AutocompleteDropdown=__commonJS({"lib-browser-old/core/core_elements/legacy/responsive_v0/AutocompleteDropdown.js"(exports,module){"use strict";init_define_process_env();init_shim();var property_applications=require_property_applications();module.exports={property_applications:[new property_applications.MinWidth]}}});var require_dropdowns=__commonJS({"lib-browser-old/core/core_elements/shared/dropdowns.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_string_trim();require_es_array_includes();require_es_regexp_exec();require_es_string_replace();require_es_string_includes();var u=require_u2(),hydrate2=require_hydrate(),Lib=require_lib(),element_eval=require_element_eval(),safe_require=require_safe_require(),dropdowns=exports;safe_require.safe_register("./core/core_elements/shared/dropdowns",dropdowns);dropdowns._get_raw_btype_dropdown=function(element){if(element.get_static_property("choices_style")==="static"){if(!Lib().is_edit_mode()){let saved_value=element.get_static_property("computed_value");if(saved_value!=null)return saved_value}return value_is_text_or_number(element.get_static_property("choices",!0))}else if(element.get_static_property("dynamic_type"))return element.get_static_property("dynamic_type");return"text"};function value_is_text_or_number(choices){typeof choices!="string"&&(choices="");for(let c of choices.split("\n").map(c2=>c2.trim()))if(c.length>0&&(["0","00","000","0000"].includes(c)||(c.indexOf("0.")!==0&&c.indexOf("00.")!==0&&c.indexOf("000.")!==0&&(c=c.replace(/^0+/g,"")),c=c.replace(/(\.[0-9]*?)0+$/,"$1"),c=c.replace(/\.$/,"")),![c,"0"].includes(String(Lib().locale().parse_float(c)))))return"text";return"number"}dropdowns._get_raw_choice_list_dropdown=function(instance,element_def){let btype_id=element_def._get_raw_btype(instance.element);if(element_eval.evaluate_property(instance,"choices_style")==="static"){let list,choices=element_eval.evaluate_property(instance,"choices");return typeof choices!="string"?list=[]:(list=choices.split("\n").map(c=>c.trim()).filter(c=>c),btype_id==="number"&&(list=list.map(c=>Lib().locale().parse_float(c)))),Lib().db_instance().static_list(btype_id,list)}else{let res=element_eval.evaluate_property(instance,"data_source");if(typeof(res==null?void 0:res.get_children)=="function"){if(!res.contains)throw new u.UnexpectedError("Get children but no contains: "+res.constructor.name+" "+res.constructor);return res}else return Lib().db_instance().static_list(btype_id,[])}};dropdowns._get_display_option=function(instance){return element_eval.evaluate_property(instance,"choices_style")==="static"?v=>v:v=>{let context=instance.get_injected_context(v,this.get_injected_value(instance.element));return element_eval.eval_property_with_states(instance.element,"option_display_expression",context)}};dropdowns.rehydrate_dropdown_value=function(val){if(val==="")return null;var _hydrate$rehydrate_tr;return(_hydrate$rehydrate_tr=hydrate2.rehydrate_tree(Lib().db_instance(),val))!=null?_hydrate$rehydrate_tr:null}}});var require_radiobuttons=__commonJS({"lib-browser-old/core/core_elements/shared/radiobuttons.js"(exports){"use strict";init_define_process_env();init_shim();var radiobuttons=exports;radiobuttons.bootstrap_colors=["black","primary","danger","info","warning","success"]}});var require_RadioButtons=__commonJS({"lib-browser-old/core/core_elements/legacy/responsive_v0/RadioButtons.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_object_values();require_web_immediate();require_es_parse_int();require_es_regexp_exec();require_es_string_replace();var u=require_u2(),property_applications=require_property_applications(),runmode_consts=require_runmode(),hydrate2=require_hydrate(),logger=require_logger(),element_utils=require_element_utils(),dropdowns=require_dropdowns(),radiobuttons=require_radiobuttons(),inputs=require_inputs(),element_eval=require_element_eval(),MAX_RADIO_OPTIONS=50;module.exports={property_applications:[new property_applications.MinWidth],can_defer_drawing(){return!0},register(instance){let bad_value_watcher=u.Watcher(()=>{if(!instance.state("has_been_changed"))return!1;let val=instance.state("value");return val==null?!1:!this._choice_list_contains(instance,val)});instance.on_destroy(()=>bad_value_watcher.destroy()),bad_value_watcher.on_value(is_bad=>{is_bad&&instance.message("reset_input")})},initialize(instance){instance.wait_for_visible_lite(()=>{let inner_id=u.LUID(),canvas=instance.get_canvas(),wrapper=u.div("radio-v0",canvas);instance.run_mode()&&canvas.addClass(runmode_consts.CLICKABLE_ELEMENT),instance.on_message("set_focus",()=>canvas.find("input:first").focus()),element_utils.register_tab_index_listener(instance,tabindex=>{canvas.find("input:first").attr("tabindex",tabindex)}),instance.edit_mode()&&(wrapper[0].style.height="100%"),element_eval.on_property_change(instance,"color",value=>{for(let class_name of radiobuttons.bootstrap_colors)wrapper.removeClass("radio-"+class_name);wrapper.addClass("radio-"+value)});let options_div_mapping={};function create_option(c,i){let dehydrated_value=hydrate2.dehydrate_tree_to_string_safe(c.value),choice=$('<input type="radio" value="'+dehydrated_value+'" name="'+inner_id+'" id="'+inner_id+"_option_"+i+'"><label for="'+inner_id+"_option_"+i+'">'+c.display+"</label>");return choice.data("bubble_val",dehydrated_value),options_div_mapping[dehydrated_value]=choice,choice}let get_choice_list=()=>{let raw_choices;if(instance.edit_mode()&&element_eval.evaluate_property(instance,"choices_style")==="dynamic")return raw_choices=["Dynamic choice 1","Dynamic choice 2","Dynamic choice 3","Dynamic choice 4"],instance.get_canvas().data("Dynamic choice 1"),raw_choices.map(a=>({display:a,value:a}));raw_choices=this._get_raw_choice_list(instance);let get_display=this._get_display_option(instance),raw_choice_list=raw_choices.get_children(0,MAX_RADIO_OPTIONS);u.run_once(30,()=>raw_choice_list.map(raw_choice=>get_display(raw_choice)));let choice_list=[];for(let raw_choice of raw_choice_list)choice_list.push({display:get_display(raw_choice),value:raw_choice});return choice_list},current_displayed_value=null;function select_value(val){var _options_div_mapping3,_options_div_mapping4;if(current_displayed_value=val,options_div_mapping=canvas.data("options_div_mapping"),!val)if(instance.edit_mode()){var _options_div_mapping;let div=Object.values((_options_div_mapping=options_div_mapping)!=null?_options_div_mapping:{})[0];if(div!=null){div[0].checked=!0;return}}else for(let div of Object.values((_options_div_mapping2=options_div_mapping)!=null?_options_div_mapping2:{})){var _options_div_mapping2;div[0].checked=!1}let dehydrated_value=hydrate2.dehydrate_tree_to_string_safe(val),selected_div=(_options_div_mapping3=options_div_mapping)==null||(_options_div_mapping4=_options_div_mapping3[dehydrated_value])==null?void 0:_options_div_mapping4[0];selected_div!=null&&(selected_div.checked=!0)}let update_choice_list=()=>{let div;wrapper.empty(),options_div_mapping={};let original_columns=instance.get_static_property("columns"),element_width=element_eval.evaluate_property(instance,"width"),actual_columns=Math.max(Math.floor(original_columns/instance.element.get_width()*element_width),1),width_buffer=10,anti_overlap_margin=20,width=(element_width-property_applications.calculate_border_width(instance))/actual_columns-width_buffer;width-=anti_overlap_margin;let iterable=get_choice_list();for(let i=0;i<iterable.length;i++){let c=iterable[i];div=create_option(c,i),wrapper.append(div);let label=$(div[1]);label[0].style.width=width+"px",label[0].style["margin-right"]=anti_overlap_margin+"px",i<actual_columns?label[0].style["margin-top"]="3px":label[0].style["margin-top"]="12px"}canvas.data("options_div_mapping",options_div_mapping),wrapper.find("input[type=radio]").on("change",function(){let val=dropdowns.rehydrate_dropdown_value($(this).data("bubble_val"));instance.message("user_submit",val),select_value(val)}),select_value(current_displayed_value);let value=element_eval.evaluate_property(instance,"disabled");for(let div2 of Object.values((_options_div_mapping5=options_div_mapping)!=null?_options_div_mapping5:{})){var _options_div_mapping5;div2[0].disabled=value}if(!instance.edit_mode()&&!instance.thumbnail_mode()){let border_margin_dif=canvas.outerHeight()-canvas.height(),min_height=instance.element.get_height();setImmediate(()=>{let wrapper_drawn=u.MakeKey(null,"wrapper_drawn");u.run_once(30,()=>{let inner_height=parseInt(wrapper.css("height").replace("px",""));if(inner_height>0)return inner_height},(err,inner_height)=>{if(err){logger.log(err);return}if(inner_height>0)return wrapper_drawn.turn(),instance.set_height(Math.max(min_height,inner_height+border_margin_dif))})})}};inputs.input_change_autorun(instance,val=>select_value(val)),u.autorun(()=>{let value=element_eval.evaluate_property(instance,"disabled");for(let div of Object.values((_options_div_mapping6=options_div_mapping)!=null?_options_div_mapping6:{})){var _options_div_mapping6;div[0].disabled=value}}),instance.autorun(()=>{instance.is_visible()&&update_choice_list()})})}}}});var require_SliderInput=__commonJS({"lib-browser-old/core/core_elements/legacy/responsive_v0/SliderInput.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_web_immediate();var u=require_u2(),property_applications=require_property_applications(),element_utils=require_element_utils(),runmode_consts=require_runmode(),inputs=require_inputs(),element_eval=require_element_eval();module.exports={property_applications:[new property_applications.MinWidth],initialize(instance){instance.wait_for_visible_lite(()=>{let canvas=instance.get_canvas(),slider_init=u.MakeKey(null,"slider_init"),slider=u.div("jquery-slider",canvas);slider.slider(),canvas.css("padding",8);let is_slider_initialized=()=>slider.slider("instance");instance.on_destroy(()=>{is_slider_initialized()&&slider.slider("destroy")}),instance.run_mode()||slider.off(),instance.run_mode()&&(canvas.addClass(runmode_consts.CLICKABLE_ELEMENT),instance.wait_for_visible(()=>{u.WaitFor(slider_init,()=>{element_eval.on_property_change(instance,"disabled",value=>{slider.slider("option","disabled",value)}),instance.on_message("set_focus",()=>canvas.find(".ui-slider-handle").focus())})})),element_eval.pre_cache(instance,["min_value","max_value","step","range_type","orientation","height","width","handle_color","range_area_color","border_color","background_color"]),instance.autorun(()=>{var _props$min_value,_props$max_value;let slider_value_property;instance.get_styleable_static_property("range_type")==="range"?slider_value_property="values":slider_value_property="value";let props={};for(let prop of["min_value","max_value","step","range_type","orientation","height","width","handle_color","range_area_color","border_color","background_color"])props[prop]=element_eval.evaluate_property(instance,prop);let options={min:(_props$min_value=props.min_value)!=null?_props$min_value:0,max:(_props$max_value=props.max_value)!=null?_props$max_value:9,step:props.step,range:props.range_type==="range",orientation:props.orientation,slide:(event,ui)=>(setImmediate(()=>{instance.message("user_change",slider.slider(slider_value_property))}),!0),stop:(event,ui)=>(setImmediate(()=>{instance.message("user_submit",slider.slider(slider_value_property))}),!0)};if(!instance.thumbnail_mode()||is_slider_initialized())for(let k in options){let v=options[k];slider.slider("option",k,v)}let slider_css_options={"margin-left":3,"margin-right":3,cursor:element_eval.evaluate_property(instance,"disabled")?"default":"pointer",background:props.background_color,"border-color":props.border_color},handle_css_options={cursor:element_eval.evaluate_property(instance,"disabled")?"default":"pointer",outline:"none","border-color":props.border_color};props.orientation==="horizontal"?(slider_css_options.height=props.height-16,slider_css_options.width=props.width-23,handle_css_options.top=-8,handle_css_options.height=props.height-1,handle_css_options.width=19,slider.find(".ui-slider-range").css({height:"100%"})):(slider_css_options.width=props.width-22,slider_css_options.height=props.height-20,handle_css_options.width=props.width-11,handle_css_options.height=19,slider.find(".ui-slider-range").css({width:"100%"})),handle_css_options.background=props.handle_color,props.range_type==="range"&&slider.find(".ui-slider-range").css({background:props.range_area_color}),slider.css(slider_css_options),slider.find(".ui-slider-handle").css(handle_css_options),slider_init.turn(),element_utils.register_tab_index_listener(instance,tabindex=>{canvas.find(".ui-slider-handle").attr("tabindex",tabindex)}),!(instance.thumbnail_mode()&&!is_slider_initialized())&&inputs.input_change_autorun(instance,val=>{slider_value_property==="values"&&val==null&&(val=[]),slider.slider(slider_value_property,val)})})})}}}});var require_DateInput=__commonJS({"lib-browser-old/core/core_elements/legacy/responsive_v0/DateInput.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_web_queue_microtask();var u=require_u2(),btypes=require_btypes(),property_applications=require_property_applications(),appquery=require_appquery(),Lib=require_lib(),runmode_consts=require_runmode(),webfonts=require_webfonts(),logger=require_logger(),element_utils=require_element_utils(),inputs=require_inputs(),b_date=require_b_date(),element_eval=require_element_eval(),element_props=require_element_props(),custom_tz_utilities=require_custom_tz_utilities(),{PADDING_VERSION}=require_elements(),{has_input_timezone_controls_on}=require_timezone_override_settings(),moment=u.require_moment();function _get_array_from_date(instance,val){if(!val)return;let date=btypes.get("date").cast(val);if(!date)return;let tz=get_timezone(instance),m=moment(date).tz(tz);return[m.year(),m.month(),m.date()]}function get_timezone(instance){return has_input_timezone_controls_on()?custom_tz_utilities.get_custom_tz({static_eval:prop=>instance.get_static_property(prop),dynamic_eval:prop=>element_eval.evaluate_property(instance,prop),not_overridden:!0}):Lib().current_timezone()}function get_dateFormat_fmt_string(instance,val){let res="";switch(val){case"number1":res+="d/mm/yyyy";break;case"number2":res+="m/dd/yyyy";break;case"alpha":res+="d mmmm, yyyy";break;case"alphalong":res+="dddd, d mmmm, yyyy";break;case"alphashort":res+="d-mmm-yyyy";break;case"us_short":res+="mmmm d, yyyy";break;case"us_long":res+="dddd, mmmm d, yyyy";break;case"custom":res+=instance.get_static_property("custom_format");break}return res}module.exports={property_applications:[new property_applications.MinWidth],initialize(instance){instance.wait_for_visible_lite(()=>{let date_picker,time_input,time_picker,canvas=instance.get_canvas(),date_input=time_input=date_picker=time_picker=null,input_div_drawn=u.MakeKey(null,"dateinput_drawn");if(instance.on_message("add_tab_index",num=>u.WaitFor(input_div_drawn,()=>{})),canvas.addClass("date_picker_element"),canvas[0].style.overflow="visible",element_eval.on_property_change(instance,"input_type",input_type=>{canvas.empty(),date_input=$('<input type="text" class="date_div"></input>'),inputs.reset_input_div(date_input),canvas.append(date_input),element_utils.register_tab_index_listener(instance,tabindex=>{date_input.attr("tabindex",tabindex)}),input_type==="date_time"&&(time_input=$('<input type="text" class="time_div"></input>'),inputs.reset_input_div(time_input),canvas.append(time_input))}),element_eval.on_property_change(instance,"disabled",value=>{property_applications.apply_css_style(date_input,{cursor:value?"default":"pointer"}),property_applications.apply_css_style(time_input,{cursor:value?"default":"pointer"})}),element_eval.pre_cache(instance,["input_type","width","height","padding_horizontal","date_format","time_format","placeholder","overwrite_placeholder"]),instance.autorun(()=>{var _time_input;let available_width,placeholder,time_placeholder,changes={};for(let prop of["input_type","width","height","padding_horizontal","date_format","time_format","placeholder","overwrite_placeholder","padding_top","padding_bottom","padding_left","padding_right"])changes[prop]=element_eval.evaluate_property(instance,prop);let border_height=property_applications.calculate_border_height(instance),border_width=property_applications.calculate_border_width(instance),horizontal_padding=instance.element.element_version(!0)<PADDING_VERSION?2*changes.padding_horizontal:changes.padding_left+changes.padding_right,vertical_padding=instance.element.element_version(!0)<PADDING_VERSION?0:changes.padding_top+changes.padding_bottom,bv_check=appquery.get_public_setting("bubble_version")<18,date_input_height=bv_check?"calc(100% - ".concat(border_height,"px)"):"calc(100% - ".concat(vertical_padding+border_height,"px)");if(property_applications.apply_css_style(date_input,{height:date_input_height,"box-sizing":"content-box"}),changes.input_type==="date_time"){let time_input_width=bv_check?70:72,gap_spacing=bv_check?5:8;property_applications.apply_css_style(date_input,{width:"calc(100% - ".concat(2*horizontal_padding+2*border_width,"px - ").concat(time_input_width+gap_spacing,"px)"),float:"left"}),property_applications.apply_css_style(time_input,{width:"".concat(time_input_width,"px"),float:"right",height:"calc(100% - ".concat(vertical_padding+border_height,"px)"),"box-sizing":"content-box"})}else available_width=changes.width-horizontal_padding-border_width,date_input[0].style.width=available_width+"px";if(changes.input_type==="date"&&changes.overwrite_placeholder)placeholder=changes.placeholder;else{let placeholder_date;if(appquery.app().id()==="test_app"){var _get_timezone;let tz=(_get_timezone=get_timezone(instance))!=null?_get_timezone:Lib().current_timezone();placeholder_date=moment.tz("1/15/2013",tz).toDate()}else placeholder_date=new Date;let fmt_str=get_dateFormat_fmt_string(instance,changes.date_format);placeholder=b_date.format_date(placeholder_date,fmt_str,Lib().get_text("BUILT_IN","DATE_FORMAT"),get_timezone(instance))}switch(date_input.attr("placeholder",placeholder),changes.time_format){case"full":time_placeholder="12:00";break;case"ampm":time_placeholder="12:00 AM";break}return(_time_input=time_input)==null?void 0:_time_input.attr("placeholder",time_placeholder)}),instance.run_mode()){let get_datepicker_val=function(){var _date_picker;if((_date_picker=date_picker)!=null&&_date_picker.get()){let date_only=date_picker.get("select"),full_date={year:date_only.year,month:date_only.month,day:date_only.date};if(instance.get_static_property("input_type")==="date_time"){let time_only=time_picker.get("select");if(time_only){var _time_only$hour,_time_only$mins;full_date.hour=(_time_only$hour=time_only==null?void 0:time_only.hour)!=null?_time_only$hour:"",full_date.minute=(_time_only$mins=time_only==null?void 0:time_only.mins)!=null?_time_only$mins:""}else return}return moment.tz(full_date,get_timezone(instance)).toDate()}else return null},onclose_handler=function(){return this.$holder.blur(),u.run_once(30,get_datepicker_val,(_,val)=>{instance.state("is_focused",!1),val!==void 0&&instance.message("user_submit",val)}),!0},position_function=function(_ref){let{$holder,$root}=_ref;$holder.css("transition","0.05s ease-in-out"),$holder.position({my:"left top",at:"left bottom",of:instance.get_canvas(),collision:"fit flip"}),Lib().bubble_version()<19&&$root.addClass("datepicker-legacy-font")},onrender_handler=function(){position_function(this)},onopen_handler=function(){queueMicrotask(()=>{position_function(this),instance.setTimeout(()=>position_function(this),100)}),$(window).on("resize",()=>position_function(this));let parent=instance.get_canvas();u.run_once(30,()=>({width:parent.width(),"font-family":webfonts.get_face_and_variant(element_props.get_font_face(instance)).font_family}),(err,location_info)=>{var _time_picker;if(err){logger.log(err);return}date_picker.$root.css(location_info),(_time_picker=time_picker)==null||_time_picker.$root.css(location_info)})},_get_array_from_hour=function(raw){if(!raw)return!1;let hour=Math.floor(raw),minute=Math.round((raw-hour)*60);return[hour,minute]};canvas.addClass(runmode_consts.CLICKABLE_ELEMENT);let should_show_month_year=instance.get_static_property("show_month_year_picker");date_input.pickadate({container:"html",firstDay:instance.get_static_property("start_monday"),selectMonths:should_show_month_year,selectYears:should_show_month_year&&200,format:get_dateFormat_fmt_string(instance,instance.get_static_property("date_format")),onOpen:onopen_handler,onClose:onclose_handler}),date_picker=date_input.pickadate("picker"),instance.wait_for_visible(()=>{onopen_handler.apply(date_picker),instance.setTimeout(()=>onopen_handler.apply(date_picker),100)}),u.autorun(()=>date_picker.$root.css({"margin-top":element_eval.evaluate_property(instance,"height"),"max-width":element_eval.evaluate_property(instance,"width")}));let is_time_picker=!1,time_option={};if(instance.get_static_property("input_type")==="date_time"){switch(is_time_picker=!0,time_option.container="html",time_option.interval=instance.get_static_property("time_interval"),instance.get_static_property("time_format")){case"full":time_option.format="H:i";break;case"ampm":time_option.format="h:i A";break}time_option.onClose=onclose_handler,time_option.onOpen=onopen_handler,time_option.onRender=onrender_handler,time_input.pickatime(time_option),time_picker=time_input.pickatime("picker"),u.autorun(()=>time_picker.$root.css({"margin-top":element_eval.evaluate_property(instance,"height"),"max-width":element_eval.evaluate_property(instance,"width")}))}instance.autorun(()=>{var _get_array_from_date2,_get_array_from_date3;let min_date=element_eval.evaluate_property(instance,"min_date"),max_date=element_eval.evaluate_property(instance,"max_date");if(date_picker.set({min:(_get_array_from_date2=_get_array_from_date(instance,min_date))!=null?_get_array_from_date2:-1/0,max:(_get_array_from_date3=_get_array_from_date(instance,max_date))!=null?_get_array_from_date3:1/0}),is_time_picker){let min_hour=element_eval.evaluate_property(instance,"min_hour"),max_hour=element_eval.evaluate_property(instance,"max_hour");time_picker.set({min:_get_array_from_hour(min_hour),max:_get_array_from_hour(max_hour)})}let prev_tz=Lib().current_timezone();instance.autorun(()=>{let current_tz=get_timezone(instance);if(instance.state("has_been_changed")&&current_tz===prev_tz)return;prev_tz=current_tz;let val=instance.state("value");if(!u.autorun_top(()=>instance.state("is_focused")))if(val){if(date_picker.set("select",_get_array_from_date(instance,val)),is_time_picker){let tz=get_timezone(instance),m=moment(val).tz(tz);time_picker.set("select",[m.hours(),m.minutes()])}}else date_picker.clear(),is_time_picker&&time_picker.clear()})}),instance.autorun(()=>{let min_date=element_eval.evaluate_property(instance,"min_date"),max_date=element_eval.evaluate_property(instance,"max_date"),val=instance.state("value",void 0,!0);if(typeof val!="function"&&date_picker.get("select")&&val!=null){if(min_date!=null&&val<min_date)date_picker.set("select",_get_array_from_date(instance,min_date)),instance.state("value",min_date);else if(max_date!=null&&val>max_date){let date_to_set=max_date>=min_date?max_date:min_date!=null?min_date:val;date_picker.set("select",_get_array_from_date(instance,date_to_set)),instance.state("value",date_to_set)}}}),element_eval.on_property_change(instance,"disabled",value=>{date_input[0].disabled=value,time_input!=null&&(time_input[0].disabled=value)})}if(inputs.register_focus(instance,canvas.find("input")),instance.on_message("set_focus",()=>{date_input[0].disabled||date_picker.open()}),!instance.run_mode()){var _time_input2;date_input.attr("readonly","true"),(_time_input2=time_input)==null||_time_input2.attr("readonly","true")}})}}}});var require_PictureInput=__commonJS({"lib-browser-old/core/core_elements/legacy/responsive_v0/PictureInput.js"(exports,module){"use strict";init_define_process_env();init_shim();var property_applications=require_property_applications(),image_utils=require_image_utils();module.exports={property_applications:[new property_applications.MinWidth],additional_data:{notify_width(instance,width){return image_utils.keep_proportions(instance,width)}}}}});var require_FileInput=__commonJS({"lib-browser-old/core/core_elements/legacy/responsive_v0/FileInput.js"(exports,module){"use strict";init_define_process_env();init_shim();var property_applications=require_property_applications();module.exports={property_applications:[new property_applications.MinWidth]}}});var require_responsive_v02=__commonJS({"lib-browser-old/core/core_elements/legacy/responsive_v0/index.js"(exports){"use strict";init_define_process_env();init_shim();var safe_require=require_safe_require(),property_applications=require_property_applications(),responsive_v0=exports;safe_require.safe_register("./core/core_elements/legacy/responsive_v0",responsive_v0);var element_modifications={Page:require_Page2(),Text:require_Text(),Button:require_Button(),Icon:require_Icon(),Link:require_Link(),Image:require_Image(),Shape:require_Shape(),Alert:require_Alert(),Video:require_VideoComponent(),HTML:require_HTML(),GoogleMap:require_GoogleMaps(),Group:require_Group(),RepeatingGroup:require_RepeatingGroup(),Popup:require_Popup(),FloatingGroup:require_FloatingGroup(),GroupFocus:require_GroupFocus(),GroupWithFocus:require_GroupWithFocus(),Input:require_Input(),MultiLineInput:require_MultiLineInput(),Checkbox:require_Checkbox(),Dropdown:require_Dropdown(),AutocompleteDropdown:require_AutocompleteDropdown(),RadioButtons:require_RadioButtons(),SliderInput:require_SliderInput(),DateInput:require_DateInput(),PictureInput:require_PictureInput(),FileInput:require_FileInput()};responsive_v0.get_element_modifications=name=>element_modifications[name];responsive_v0.set_legacy_element_modifications=function(name,modifications){var _modifications;(_modifications=modifications)!=null||(modifications={property_applications:[new property_applications.MinWidth]}),element_modifications[name]=modifications}}});var require_responsive_versioning_wrapper=__commonJS({"lib-browser-old/core/core_elements/legacy/responsive_versioning_wrapper.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_includes();var property_applications=require_property_applications(),elements=require_elements2(),u=require_u2(),Lib=require_lib(),responsive_v0=require_responsive_v02(),responsive_versioning_wrapper=exports,DEFAULT_METHODS={do_show(instance,properties,options,animated){var _canvas$velocity;instance._is_visible_me=!0,instance.ensure_drawn();let canvas=instance.get_canvas();(_canvas$velocity=canvas.velocity)==null||_canvas$velocity.call(canvas,"stop",!0),animated?elements.perform_animate_in(instance,properties,options,!0):(instance._display_me(),instance._update_visible())},do_hide(instance,properties,options,animated){var _canvas$velocity2;let canvas=instance.get_canvas();if((_canvas$velocity2=canvas.velocity)==null||_canvas$velocity2.call(canvas,"stop",!0),!animated)instance._hide_me(),instance._is_visible_me=!1,instance._update_visible();else{var _instance$_transforms,_instance$_transforms2,_instance$_transforms3,_instance$_transforms4,_instance$_transforms5;(_instance$_transforms=instance._transforms)!=null||(instance._transforms={}),(_instance$_transforms3=(_instance$_transforms2=instance._transforms).initial_opacity)!=null||(_instance$_transforms2.initial_opacity=canvas[0].style.opacity),(_instance$_transforms5=(_instance$_transforms4=instance._transforms).initial_transform)!=null||(_instance$_transforms4.initial_transform=canvas[0].style.transform),instance._is_visible_me=!1,instance._update_visible(),instance.set_animating(!0);let animate_options={duration:options.duration,complete_cb(){instance.set_animating(!1),canvas[0].style.transform=instance._transforms.initial_transform,canvas[0].style.opacity=instance._transforms.initial_opacity,instance._transforms=void 0}};options.visibility="hidden",u.velocity(canvas,properties.animation,animate_options)}}},MODIFIED_METHODS={position_canvas:1,do_show:0,do_hide:0,get_container_width:0,attempt_size_only_draw:0,register:0};responsive_versioning_wrapper.wrap_core_element=function(data){var _legacy_data$initiali;let legacy_data=responsive_v0.get_element_modifications(data.plugin_name);(legacy_data==null?void 0:legacy_data.additional_data)!=null&&u.extend(data,legacy_data.additional_data);let use_new_responsive_functions=(element,method)=>(element==null?void 0:element.is_responsive_v1())&&(element.E_object().uses_css_responsive||["position_canvas","do_show","do_hide"].includes(method)),old_property_applications=data.property_applications;data.property_applications=function(element){let prop_array;if(typeof old_property_applications=="function"?prop_array=old_property_applications(element):prop_array=old_property_applications,prop_array=prop_array.slice(),data.uses_css_responsive||prop_array.push(new property_applications.ResponsiveElement(element)),use_new_responsive_functions(element,"property_applications"))return prop_array;{let legacy_props;return typeof(legacy_data==null?void 0:legacy_data.property_applications)=="function"?legacy_props=legacy_data==null?void 0:legacy_data.property_applications(element):legacy_props=legacy_data==null?void 0:legacy_data.property_applications,legacy_props!=null?prop_array.concat(legacy_props):prop_array}};function modify_method(method,element_index){var _legacy_data$method;let original_method=data[method],legacy_method=(_legacy_data$method=legacy_data==null?void 0:legacy_data[method])!=null?_legacy_data$method:original_method;(original_method!=null||legacy_method!=null)&&(data[method]=function(){var _instance_or_element$;let instance_or_element=arguments[element_index],element=(_instance_or_element$=instance_or_element.element)!=null?_instance_or_element$:instance_or_element;if((!u.on_server()||Lib().force_responsive_version)&&use_new_responsive_functions(element,method)){var _ref;return method==="position_canvas"&&instance_or_element.responsive_mode()||(_ref=original_method!=null?original_method:DEFAULT_METHODS[method])==null?void 0:_ref.apply(data,arguments)}else return legacy_method.apply(data,arguments)})}for(let method in MODIFIED_METHODS){let element_index=MODIFIED_METHODS[method];modify_method(method,element_index)}let original_initialize=data.initialize,legacy_initialize=(_legacy_data$initiali=legacy_data==null?void 0:legacy_data.initialize)!=null?_legacy_data$initiali:original_initialize;return data.initialize=function(instance){if(use_new_responsive_functions(instance.element,"initialize")?original_initialize.call(data,instance):legacy_initialize.call(data,instance),instance.element.is_responsive_v1()&&!instance.element.E_object().uses_css_responsive){if(!instance.thumbnail_mode()){if(typeof ResizeObserver<"u"&&ResizeObserver!==null){let observer=new ResizeObserver(entries=>{let{width}=entries[0].contentRect;instance.notify_width(width)});observer.observe(instance.canvas[0]),instance.on_destroy(()=>{observer.disconnect()})}instance.notify_width(instance.canvas.width())}instance.autorun(()=>{instance.canvas.css({height:instance.element.get_height()})})}},data}}});var require_element_transformer=__commonJS({"lib-browser-old/core/core_elements/core_elements_utilities/element_transformer.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_object_entries();require_es_array_includes();require_es_string_includes();var u=require_u2(),safe_require=require_safe_require(),event_element_mapping=require_event_element_mapping(),core_actions_consts=require_core_actions_consts(),property_applications=require_property_applications(),runmode_consts=require_runmode(),analytics=require_analytics(),Lib=require_lib(),appquery=require_appquery(),css2=require_css(),element_meta_actions=require_element_meta_actions(),element_visibility=require_element_visibility(),element_workflows=require_element_workflows(),inputs=require_inputs(),hover_state_manager=require_hover_state_manager(),responsive_versioning_wrapper=require_responsive_versioning_wrapper(),mode_check=require_mode_check(),element_registry=require_element_registry(),element_utils=require_element_utils(),element_eval=require_element_eval(),{VERSION_STYLE_OVERRIDES}=require_elements(),{PSEUDO_TABLE_ELEMENTS}=require_table_element(),style_properties=require_style_properties(),{apply_css_style}=property_applications,element_transformer=exports;safe_require.safe_register("./core/core_elements/core_elements_utilities/element_transformer",element_transformer);element_transformer.make_element=function(name,data,not_add_core_elements){var _data$events,_data$events2,_data$actions;let processsed_data=element_transformer.transform_element(name,data);if(!not_add_core_elements&&(element_registry.registered_elements[name]=processsed_data,processsed_data.field_names))for(let[name2,data2]of Object.entries(processsed_data.field_names))data2.in_style&&style_properties.register_style_property(name2);if((_data$events=data.events)!=null&&_data$events.length&&(data.events=data.events.concat("OnError")),(_data$events2=data.events)!=null&&_data$events2.length)for(let event of data.events)event_element_mapping.add_event(event,name)};var instance_hook_transformers={};element_transformer.register_hook_transformer=(name,fn)=>instance_hook_transformers[name]=fn;element_transformer.run_transformers=function(instance){for(let _ in instance_hook_transformers){let transformer=instance_hook_transformers[_];transformer(instance)}};element_transformer.transform_element=function(name,data){var _data,_data$field_names,_data$get_states,_data$get_messages,_data$get_private_mes;data.plugin_name=name,data=responsive_versioning_wrapper.wrap_core_element(data);for(let key of["is_input","contains_group_data","change_cursor_style_if_clickable","initialize","add_an_invisible_div_on_the_top"])if(data[key]==null)throw new u.UnexpectedError("Error building "+name+": no value for "+key);let use_is_visible=!data.starts_hidden&&!data.always_visible;(_data$field_names=(_data=data).field_names)!=null||(_data.field_names={});let prop_applications=typeof data.property_applications=="function"?data.property_applications():data.property_applications;for(let application of prop_applications){var _application$field_na;let object2=(_application$field_na=application.field_names)!=null?_application$field_na:{};for(let k in object2){let v=object2[k];data.field_names[k]=u.json_deep_copy(v)}}if(["Page"].includes(name)||(data.field_names.delete_element={no_states:!0,only_edit_mode:!0}),!["CustomDefinition","CustomElement","Page"].includes(name)&&!PSEUDO_TABLE_ELEMENTS.includes(name)&&(data.field_names.switch_element={no_states:!0,only_edit_mode:!0}),["CustomDefinition","Page"].includes(name)||(data.field_names.select_parent={no_states:!0,only_edit_mode:!0},data.field_names.reveal_in_tree={no_states:!0,only_edit_mode:!0},data.field_names.lock_in_editor={no_states:!0,only_edit_mode:!0}),data.field_names.element_style={no_states:!0},data.field_names.delete_style={no_states:!0,only_edit_mode:!0},data.field_names.edit_style={no_states:!0,only_edit_mode:!0},use_is_visible&&u.extend(data.field_names,element_visibility.visibility_field_names),data.defaults)for(let field_name in data.field_names){let field_data=data.field_names[field_name],default_value=data.defaults[field_name];default_value!=null&&(field_data.default=default_value)}if(data.starts_hidden)data.is_visible_on_page_load=instance=>!1;else if(data.always_visible)data.is_visible_on_page_load=instance=>!0;else if(use_is_visible)data.is_visible_on_page_load=element=>element.get_static_property("is_visible",!0);else throw new u.UnexpectedError("should not get here");let states;data.dont_add_hover_pressed?states=[]:states=["is_hovered","is_pressed","force_pressed"],data.plugin_name==="Link"&&states.push("is_link_disabled");let private_states=["invisible_div_drawn"],messages=["add_tab_index"],private_messages=[],old_add_specific_messages=data.add_specific_messages;data.contains_group_data&&(states.push("group_data"),data.add_specific_messages=function(messages2,element){let suck_value=element.get_state_value("group_data");return suck_value&&suck_value.id()!=="null"&&u.extend(messages2,{get_group_data:{description:"'s "+suck_value.display(),section:"Data Sources",ret_btype:suck_value,fn(a,b){return this.ret_btype().cast(a==null?void 0:a.state("group_data"))}}}),old_add_specific_messages==null?void 0:old_add_specific_messages(messages2,element)},private_states.push("datasource_changed_by_workflow_action"),messages.push("set_group_data","reset_group"),private_messages.push()),data.is_pseudo&&(data.add_specific_messages=function(messages2,element){if(element.type()==="TableMainAxis"){var _element$parent$get_v,_element$parent$get_v2,_element$parent;return u.extend(messages2,{get_data:{description:"'s Table",section:"States",ret_btype:(_element$parent$get_v=(_element$parent$get_v2=(_element$parent=element.parent()).get_value_id)==null?void 0:_element$parent$get_v2.call(_element$parent))!=null?_element$parent$get_v:"null",fn(a,b){return a.parent()}}}),old_add_specific_messages==null?void 0:old_add_specific_messages(messages2,element)}}),data.is_input&&(states.push("value"),data.add_specific_messages=function(messages2,element){return u.extend(messages2,{get_data:{description:data.is_checkbox?" is checked":"'s value",section:"States",ret_btype:element.get_state_value("value"),fn(a,b,properties,_raw,context){return context!=null&&context.inputs_must_be_valid&&a!=null&&a.is_visible()&&(a==null||a.state("value_that_is_valid")),this.ret_btype().cast(a==null?void 0:a.state("value"))}}}),data.is_checkbox&&u.extend(messages2,{get_not_data:{description:" isn't checked",section:"States",ret_btype:element.get_state_value("value"),fn(a,b){return!(a!=null&&a.state("value"))}}}),old_add_specific_messages==null?void 0:old_add_specific_messages(messages2,element)},states.push("value_that_is_valid"),states.push("currently_binding"),data.no_is_focused||states.push("is_focused"),private_states.push("has_been_changed","force_display_validity"),messages.push("reset_input","set_focus"),data.content_validated&&(states.push("display_invalid","is_invalid"),messages.push("display_validity")),private_messages.push("user_change","user_submit"),event_element_mapping.add_event("InputChanged",name)),data.is_file_uploader&&messages.push("cancel_upload");function use_reusable_visibility(instance){if(!instance.edit_mode)return!1;let root=instance.element.root();return root!=null&&root.type()==="CustomDefinition"&&root.get_responsive_version()>0}let original_register=data.register;data.register=function(instance){if(original_register==null||original_register.call(data,instance),instance.run_mode()&&(instance.on_message("add_tab_index",num=>{instance.state("tab_index",num)}),data.contains_group_data&&element_utils.register_group_data(data,instance)),use_is_visible&&!mode_check.on_server()&&(instance.run_mode()||instance.responsive_mode()||use_reusable_visibility(instance))){let handle_visibility=function(){visibility_handler_waiting=!1,instance._is_visible_me?(was_hidden&&instance._has_been_hidden==null&&instance.do_hide(),instance.do_show()):instance.is_drawn?instance.do_hide():(instance._hide_me(),was_hidden=!0,instance.wait_for_first_draw(()=>{instance._is_visible_me||instance.do_hide()}))},was_hidden=!1,visibility_handler_waiting=!1,parent=instance.parent();element_eval.on_property_change(instance,"is_visible",visible=>{instance._is_visible_me=visible,visibility_handler_waiting||(visibility_handler_waiting=!0,u.WaitFor(instance.get_skeleton_ready_key(),()=>{parent?u.WaitFor(parent._has_become_visible,handle_visibility):handle_visibility()}))})}data.is_input&&inputs.register_input_states(data,states,instance)};let original_initialize=data.initialize;data.initialize=function(instance){let margin_left_initally_set,margin_top_initally_set;original_initialize.call(data,instance),margin_top_initally_set=margin_left_initally_set=!1,instance.edit_mode()&&(element_eval.on_property_change(instance,"margin_top",new_margin_top=>{margin_top_initally_set&&instance.get_static_property("top")<new_margin_top&&(instance.element.set_property("top",new_margin_top),instance.element.commit_merge()),margin_top_initally_set=!0}),element_eval.on_property_change(instance,"margin_left",new_margin_left=>{margin_left_initally_set&&instance.get_static_property("left")<new_margin_left&&(instance.element.set_property("left",new_margin_left),instance.element.commit_merge()),margin_left_initally_set=!0}));function apply_property_applications(){for(let p_app of instance.element.get_property_applications())(function(p_app2){if(p_app2.apply_once)return p_app2.apply({},instance.canvas);{let props;data.additional_uses_properties?props=p_app2.uses_properties.concat(data.additional_uses_properties):props=p_app2.uses_properties;let _first_time=!0;return element_eval.on_property_change(instance,props,values=>{values._first_time=_first_time,p_app2.apply(values,instance.canvas,instance),_first_time=!1})}})(p_app)}instance.wait_for_visible_lite(()=>apply_property_applications()),instance.run_mode()&&instance.wait_for_visible_lite(()=>{let css_props={};for(let p_app of instance.element.get_property_applications())p_app.get_transition_css(instance.element,instance.canvas,css_props);instance.get_transition_css(css_props),instance.setTimeout(()=>{for(let _ in css_props){let{target,css_prop}=css_props[_];[void 0,""].includes(css_prop)||(css_prop.slice(-2)===", "&&(css_prop=css_prop.slice(0,css_prop.length-2)),apply_css_style(target,{"-webkit-transition":css_prop,"-moz-transition":css_prop,"-o-transition":css_prop,"-ms-transition":css_prop,transition:css_prop}))}},0)}),data.change_cursor_style_if_clickable&&instance.run_mode()&&instance.element.get_related_workflows("ButtonClicked").length&&(element_utils.register_tab_index_listener(instance,num=>{instance.get_canvas().attr("tabindex",num)}),instance.get_canvas().addClass(runmode_consts.CLICKABLE_ELEMENT),instance.wait_for_visible_lite(()=>element_eval.on_property_change(instance,"button_disabled",button_disabled=>{button_disabled?(instance.get_canvas()[0].style.cursor="default",instance.get_canvas()[0].tabindex="-1"):instance.get_canvas()[0].style.cursor="pointer"}))),instance.run_mode()&&instance.element.get_related_workflows("ButtonClicked").length&&(instance.get_canvas().focus(()=>{instance.get_canvas().addClass("show-outline")}),instance.get_canvas().blur(()=>{instance.get_canvas().removeClass("show-outline")}),data.specific_click_handler||instance.get_canvas().click(e=>{let stop_workflows,debug=Lib().workflow.debugger;if(debug!=null&&(stop_workflows=debug.element_clicked(instance,instance.get_partial())),!stop_workflows)return element_workflows.run_element_workflow(instance,"ButtonClicked",e)})),data.add_an_invisible_div_on_the_top&&!instance.run_mode()&&element_utils.do_add_an_invisible_div_on_the_top(instance),instance.run_mode()&&!data.dont_add_hover_pressed&&(u.is_on_mobile_or_tablet()?instance.canvas.on("touchstart",()=>{instance.state("is_pressed",!0),$(document).one("touchend",()=>{let remove_pressed_timeout=instance.setTimeout(()=>instance.state("is_pressed",!1),100);$(document).one("scroll",()=>(instance.state("is_pressed",!1),instance.clearTimeout(remove_pressed_timeout)))})}):(instance.state("is_hovered",hover_state_manager.setup_hover,!0),instance.canvas.mousedown(()=>{instance.state("is_pressed",!0),$(document).one("mouseup",()=>{instance.state("is_pressed",!1)})}))),instance.run_mode()&&element_transformer.run_transformers(instance),data.always_visible&&instance._display_me()};let element_states=(_data$get_states=data.get_states)!=null?_data$get_states:()=>[];data.get_states=element=>states.concat(element_states(element));let element_messages=(_data$get_messages=data.get_messages)!=null?_data$get_messages:()=>[];data.get_messages=element=>messages.concat(element_messages(element));let element_private_messages=(_data$get_private_mes=data.get_private_messages)!=null?_data$get_private_mes:()=>[];return data.get_private_messages=element=>private_messages.concat(element_private_messages(element)),data}}});var require_PortalContext=__commonJS({"lib-browser-old/renderer/PortalContext.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _solidJs=(init_solid(),__toCommonJS(solid_exports)),_default=(0,_solidJs.createContext)({addElement(el){document.body.appendChild(el)},removeElement(el){document.body.removeChild(el)}});exports.default=_default}});var require_BodyPortal=__commonJS({"lib-browser-old/renderer/BodyPortal.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_web_queue_microtask();require_web_dom_collections_for_each();var _solidJs=(init_solid(),__toCommonJS(solid_exports)),_web=(init_web(),__toCommonJS(web_exports)),_PortalContext=_interopRequireDefault(require_PortalContext());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}module.exports=function(props){if(_web.isServer)return"";let marker=document.createTextNode("");function renderPortal(){if(_solidJs.sharedConfig.context){let[s,set]=(0,_solidJs.createSignal)(!1);return queueMicrotask(()=>set(!0)),()=>s()&&props.children}else return()=>props.children}let portalContext=(0,_solidJs.useContext)(_PortalContext.default);function appendChild(node){portalContext.addElement(node),(0,_solidJs.onCleanup)(()=>portalContext.removeElement(node))}function addElement(element){element!=null&&appendChild(typeof element=="object"?element:document.createTextNode(String(element)))}let elements=(0,_solidJs.children)(renderPortal());return(0,_solidJs.createRenderEffect)(()=>{let resolvedElements=elements();Array.isArray(resolvedElements)?resolvedElements.forEach(addElement):addElement(resolvedElements)}),marker}}});var require_element_utils2=__commonJS({"lib-browser-old/core/core_elements/components/utils/element_utils.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.createCanvasRef=createCanvasRef;exports.createVisibilityLatch=createVisibilityLatch;require_es_array_iterator();require_web_dom_collections_iterator();var _solidJs=(init_solid(),__toCommonJS(solid_exports)),_element_transformer=_interopRequireDefault(require_element_transformer());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function createVisibilityLatch(instance){let[visible,setVisible]=(0,_solidJs.createSignal)(!1);return(0,_solidJs.onMount)(()=>{instance.wait_for_visible_lite(()=>setVisible(!0))}),visible}function createCanvasRef(instance){return node=>{node!=null&&(instance.canvas=$(node),instance.setup_canvas_hooks(),instance._observe_canvas(),instance.run_mode()&&_element_transformer.default.run_transformers(instance))}}}});var require_createElement=__commonJS({"lib-browser-old/core/core_elements/components/utils/createElement.js"(exports){"use strict";init_define_process_env();init_shim();require_es_symbol_description();require_es_error_cause();require_es_object_get_own_property_descriptors();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.createElement=createElement2;exports.default=void 0;var _web=(init_web(),__toCommonJS(web_exports));require_es_regexp_exec();require_es_string_replace();require_web_dom_collections_for_each();require_es_object_assign();require_es_array_iterator();require_web_dom_collections_iterator();var _solidJs=(init_solid(),__toCommonJS(solid_exports)),server_css=_interopRequireWildcard(require_server_css()),_properties=require_properties(),_element_eval=require_element_eval(),_errors=require_errors(),_BodyPortal=_interopRequireDefault(require_BodyPortal()),_EditorContext=_interopRequireDefault(require_EditorContext()),_element_utils=require_element_utils2(),_appquery=_interopRequireDefault(require_appquery()),_autorun=require_autorun3();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var idProperty=new _properties.Property(instance=>{if(instance.edit_mode())return instance.element_id().replace(/[^a-zA-Z0-9]/g,"_");if(instance.run_mode()&&_appquery.default.has_advanced_feature_enabled("expose_id_option"))return(0,_element_eval.evaluate_property)(instance,"unique_id")},{noWaitVisible:!0});function createElement2(Component,preCompute,listProperties){return{buildComponent:(element,cachedProperties)=>(0,_autorun.autorun_warn)(()=>{var _cachedProperties$pre;let preCached=(_cachedProperties$pre=cachedProperties==null?void 0:cachedProperties.preCached)!=null?_cachedProperties$pre:preCompute==null?void 0:preCompute(element),result=listProperties(element,preCached),properties=_objectSpread(_objectSpread({},result.properties),{},{id:idProperty}),styles=result.styles,baseProps={},baseStyle={},baseChildStyles={},dynamicProperties=[],dynamicStyles={};for(let prop in properties)cachedProperties!=null&&cachedProperties.statics[prop]?baseProps[prop]=properties[prop].computeStaticClient(cachedProperties.props[prop]):dynamicProperties.push(prop);return styles.forEach((style2,index)=>{if((cachedProperties==null||cachedProperties.styles[index]!=null)&&(dynamicStyles[index]=style2),style2.notInStylesheet&&(cachedProperties==null?void 0:cachedProperties.styles[index])!=null)if(style2.selector){var _style$selector2,_baseChildStyles$_sty;Object.assign((_baseChildStyles$_sty=baseChildStyles[_style$selector2=style2.selector])!=null?_baseChildStyles$_sty:baseChildStyles[_style$selector2]={},cachedProperties.styles[index])}else Object.assign(baseStyle,cachedProperties.styles[index])}),props=>(0,_autorun.autorun_warn)(()=>{let instance=props.instance,turnedVisible=(0,_element_utils.createVisibilityLatch)(instance),builtins={get turnedVisible(){return turnedVisible()}},newProps={};function addProp(name,signal){Object.defineProperty(newProps,name,{get:signal})}for(let prop of dynamicProperties){let signal=properties[prop].createClientWatcher(instance,cachedProperties==null?void 0:cachedProperties.props[prop],builtins);addProp(prop,signal)}let childStyleFns={},styleFns=[],outerStyleFns=[];for(let index in dynamicStyles){let style2=dynamicStyles[index],signal=style2.createClientWatcher(instance,cachedProperties==null?void 0:cachedProperties.styles[index],builtins);if(style2.selector){var _style$selector3,_childStyleFns$_style;(_childStyleFns$_style=childStyleFns[_style$selector3=style2.selector])!=null||(childStyleFns[_style$selector3]=[]),childStyleFns[style2.selector].push(signal)}else style2.outerPositioning?instance.edit_mode()?outerStyleFns.push(signal):(!instance.thumbnail_mode()||instance.parent()!=null)&&styleFns.push(signal):styleFns.push(signal)}let appliedStyle=()=>Object.assign({},baseStyle,...styleFns.map(fn=>fn())),childStyles={};for(let selector in childStyleFns)Object.defineProperty(childStyles,selector,{get:()=>Object.assign({},baseChildStyles[selector],...childStyleFns[selector].map(fn=>fn()))});let legacyApps=instance.element.get_property_applications().filter(pApp=>pApp.no_solid_support);legacyApps.length>0&&(0,_solidJs.onMount)(()=>{(0,_autorun.autorun_warn)(()=>{for(let pApp of legacyApps){let props2;instance.element.E.additional_uses_properties?props2=pApp.uses_properties.concat(instance.element.E.additional_uses_properties):props2=pApp.uses_properties;let _first_time=!0;(0,_element_eval.on_property_change)(instance,props2,values=>{pApp.apply(Object.assign(values,{_first_time}),instance.canvas,instance),_first_time=!1})}})}),(0,_solidJs.onMount)(()=>{instance.mark_drawn(),instance.element.draws_own_children()||instance.get_children_drawn_key().turn()});function innerElement(classList2,wrapper){return(0,_web.createComponent)(Component,(0,_web.mergeProps)(preCached,baseProps,builtins,newProps,props,{ref(r$){let _ref$=(0,_element_utils.createCanvasRef)(instance);typeof _ref$=="function"&&_ref$(r$)},classList:classList2,get style(){return appliedStyle()},childStyles,wrapper,get children(){return instance.element.type()==="CustomElement"&&instance.is_self_nested_custom()?"This is a circular Reusable Element... Reusable Elements cannot contain themselves (or other Reusable Elements that contain them).":props.children}}))}if(instance.edit_mode()){let classList2={"inner-element":!0},renderedElement=(0,_solidJs.children)(()=>{var _useContext;if(instance.destroy_started())return null;let outerStyle=(0,_solidJs.createMemo)(()=>Object.assign({},...outerStyleFns.map(fn=>fn()))),EditWrapper=(_useContext=(0,_solidJs.useContext)(_EditorContext.default))==null?void 0:_useContext.wrapper;if(EditWrapper==null)throw new _errors.UnexpectedError("Edit-mode should define the context");return instance.element.E.manual_wrapper?(0,_autorun.autorun_top)(()=>innerElement(classList2,props2=>(0,_web.createComponent)(EditWrapper,{instance,get style(){return _objectSpread(_objectSpread({},outerStyle()),props2.style)},get children(){return props2.children}}))):(0,_web.createComponent)(EditWrapper,{instance,get style(){return outerStyle()},get children(){return(0,_autorun.autorun_top)(()=>innerElement(classList2))}})});return(0,_web.createComponent)(_solidJs.Show,{get when(){return instance.attach_to_body()},get fallback(){return renderedElement()},get children(){return(0,_web.createComponent)(_BodyPortal.default,{get children(){return renderedElement()}})}})}else{let classList2={"bubble-element":!0,[element.type()]:!0,[server_css.toClass(element.ssr_key())]:!0};return instance.attach_to_body()&&!instance.thumbnail_mode()?(0,_web.createComponent)(_BodyPortal.default,{get children(){return innerElement(classList2)}}):innerElement(classList2)}})})}}var _default=createElement2;exports.default=_default}});var require_directives=__commonJS({"lib-browser-old/core/core_elements/components/utils/directives.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.defaultEventHandlers=defaultEventHandlers;exports.enterHandler=enterHandler;exports.inputChangeKeyupHandlers=inputChangeKeyupHandlers;exports.jqueryHTML=jqueryHTML;require_es_array_iterator();require_web_dom_collections_iterator();var b_window=_interopRequireWildcard(require_b_window()),b_ui=_interopRequireWildcard(require_b_ui()),mode_check=_interopRequireWildcard(require_mode_check()),_debounce=_interopRequireDefault(require_debounce()),autorun_signals=_interopRequireWildcard(require_autorun_signals()),_solidJs=(init_solid(),__toCommonJS(solid_exports)),runmode_consts=_interopRequireWildcard(require_runmode()),_lib=_interopRequireDefault(require_lib()),element_workflows=_interopRequireWildcard(require_element_workflows()),logger=_interopRequireWildcard(require_logger()),_hover_state_manager=require_hover_state_manager();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function defaultEventHandlers(el,accessor){let instance=accessor(),canvas=$(el);instance.run_mode()&&!instance.element.E.dont_add_hover_pressed&&(b_window.is_on_mobile_or_tablet()?canvas.on("touchstart",()=>{instance.state("is_pressed",!0),$(document).one("touchend",()=>{let remove_pressed_timeout=instance.setTimeout(()=>{instance.state("is_pressed",!1)},100);$(document).one("scroll",()=>{instance.state("is_pressed",!1),instance.clearTimeout(remove_pressed_timeout)})})}):(instance.state("is_hovered",_hover_state_manager.setup_hover,!0),canvas.mousedown(()=>{instance.state("is_pressed",!0),$(document).one("mouseup",()=>{instance.state("is_pressed",!1)})})));let hasClick=instance.run_mode()&&instance.element.get_related_workflows("ButtonClicked").length;hasClick&&instance.element.E.change_cursor_style_if_clickable&&canvas.addClass(runmode_consts.CLICKABLE_ELEMENT),hasClick&&(canvas.focus(()=>{canvas.addClass("show-outline")}),canvas.blur(()=>{canvas.removeClass("show-outline")}),instance.element.E.specific_click_handler||canvas.click(e=>{let debug=(0,_lib.default)().workflow.debugger,stop_workflows=!1;debug&&(stop_workflows=debug.element_clicked(instance,instance.get_partial())),stop_workflows||element_workflows.run_element_workflow(instance,"ButtonClicked",e)}))}function inputChangeKeyupHandlers(el,accessor){let[instance,getValue]=accessor(),canvas=$(el);mode_check.on_phonegap()&&canvas.css("-webkit-user-select","text");let timeout=null,hasChanged=!1,inputEventHandler=()=>{hasChanged=!0,timeout&&instance.clearTimeout(timeout);let timeoutLength;if(instance.get_static_property("content_format")==="geographic_address")timeoutLength=3e3;else{let val=instance.canvas.val();!val||val.length===1?timeoutLength=0:timeoutLength=1500}return timeout=instance.setTimeout(function(){instance.message("user_change",getValue()),timeout=null},timeoutLength),!0};canvas.on("input",inputEventHandler),canvas.on("paste",inputEventHandler),canvas.on("keydown",inputEventHandler),canvas.on("keydown",e=>{let is_multiline_input=canvas.hasClass("MultiLineInput");e.keyCode!==13||is_multiline_input||canvas.blur()});let changeHandler=function(){instance.message("user_submit",getValue())};canvas.focus(()=>{instance.state("is_focused",!0)});let changeDebouncer=(0,_debounce.default)(changeHandler,50);canvas.blur(()=>{instance.state("is_focused",!1),hasChanged&&(hasChanged=!1,changeHandler()),changeDebouncer.flush(),timeout!=null&&(instance.message("user_change",getValue()),instance.clearTimeout(timeout),timeout=null)}),canvas.change(()=>mode_check.running_test()?changeHandler():changeDebouncer())}function enterHandler(el,accessor){let canvas=$(el),instance=accessor()[0],foundButton=autorun_signals.createWatcher(()=>{var _instance$element$get,_instance$element$get2,_instance$element;let foundButton2=null,possiblyRelatedWorkflows=(_instance$element$get=(_instance$element$get2=(_instance$element=instance.element).get_visible_workflows)==null?void 0:_instance$element$get2.call(_instance$element))!=null?_instance$element$get:[],id=instance.element_id();for(let wf of possiblyRelatedWorkflows){var _wf$element_id;if(wf.find_expressions("GetElement.element_id=".concat(id)).length<1)continue;let button=instance.find_instance_by_id((_wf$element_id=wf.element_id)==null?void 0:_wf$element_id.call(wf));if(button!=null&&button.is_visible()){var _foundButton;if((_foundButton=foundButton2)!=null||(foundButton2=button),button!==foundButton2){foundButton2=null;break}}}return foundButton2});(0,_solidJs.createEffect)(()=>{foundButton()&&(canvas.on("keydown.click_the_button",event=>{if(event.shiftKey||accessor()[1]&&!b_ui.meta(event))return;let enterKeyCode=13;if(event.keyCode===enterKeyCode){canvas.hasClass("MultiLineInput")||canvas.blur();let buttonCanvas=foundButton().canvas;buttonCanvas.is(":visible")&&(b_ui.trigger_blur(canvas),buttonCanvas.click())}}),(0,_solidJs.onCleanup)(()=>{canvas.off("keydown.click_the_button")}))})}function UNMANGLED_html_wrap(fn){return fn()}function jqueryHTML(el,accessor){let canvas=$(el);(0,_solidJs.createEffect)(prev=>{let v=accessor();if(!_solidJs.sharedConfig.context&&prev!==v)try{UNMANGLED_html_wrap(()=>{canvas.html(v)})}catch(err){logger.owner_only_error("html bug",{display:"Bug in custom html:\n"+err.stack,prop_name:"html",element:canvas[0].outerHTML})}return v},void 0)}}});var require_AlertComponent=__commonJS({"lib-browser-old/core/core_elements/components/AlertComponent.js"(exports){"use strict";init_define_process_env();init_shim();require_es_symbol_description();require_es_error_cause();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _web=(init_web(),__toCommonJS(web_exports));require_es_array_iterator();require_web_dom_collections_iterator();var b_ui=_interopRequireWildcard(require_b_ui()),mode_check=_interopRequireWildcard(require_mode_check()),_solidJs=(init_solid(),__toCommonJS(solid_exports)),_createElement=require_createElement(),element_styles=_interopRequireWildcard(require_element_styles()),_directives=require_directives(),_properties=require_properties(),element_eval=_interopRequireWildcard(require_element_eval()),element_props=_interopRequireWildcard(require_element_props());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var _tmpl$=(0,_web.template)("<div></div>",2);function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}function AlertComponent(props){let instance=props.instance,[displayed,setDisplayed]=(0,_solidJs.createSignal)(null);(0,_solidJs.onMount)(()=>{if(instance.run_mode()){instance.canvas.css("display","none");let displayed_count=0;instance.on_message("do_show_alert",function(properties){var _properties$fin_start;let my_count=++displayed_count;setDisplayed(properties.message),instance._display_me(),instance._is_visible_me=!0,instance._update_visible();let canvas=instance.canvas;canvas.css({display:"",opacity:(_properties$fin_start=properties.fin_starting_opacity)!=null?_properties$fin_start:0}),!mode_check.running_test()&&b_ui.velocity(canvas,{opacity:1},{duration:properties.fade_in,complete_cb:()=>{instance.setTimeout(()=>{var _properties$fout_star;canvas.css("opacity",(_properties$fout_star=properties.fout_starting_opacity)!=null?_properties$fout_star:1),b_ui.velocity(canvas,{opacity:0},{duration:properties.fade_out,complete_cb:()=>{canvas.css("display","none"),instance._hide_me(),instance._is_visible_me=!1,instance._update_visible(),my_count===displayed_count&&setDisplayed(null)},display:""})},properties.hold)}})}),instance.manual_position=!1,instance.on_message("position_element",position=>{instance.manual_position=!0,instance.state("manual_position",{top:"".concat(position.Y,"px"),left:"".concat(position.X,"px"),position:position.position})})}});let html=()=>{var _displayed;let html2=b_ui.bbcode_to_html((_displayed=displayed())!=null?_displayed:props.text);return props.verticalCenter?"<div>".concat(html2,"</div>"):html2};return(()=>{let _el$=_tmpl$.cloneNode(!0);(0,_web.use)(_directives.defaultEventHandlers,_el$,()=>props.instance);let _ref$=props.ref;return typeof _ref$=="function"?(0,_web.use)(_ref$,_el$):props.ref=_el$,(0,_web.effect)(_p$=>{let _v$=props.id,_v$2=props.style,_v$3=_objectSpread(_objectSpread({},props.classList),{},{"bubble-r-vertical-center":props.verticalCenter}),_v$4=html();return _v$!==_p$._v$&&(0,_web.setAttribute)(_el$,"id",_p$._v$=_v$),_p$._v$2=(0,_web.style)(_el$,_v$2,_p$._v$2),_p$._v$3=(0,_web.classList)(_el$,_v$3,_p$._v$3),_v$4!==_p$._v$4&&(_el$.innerHTML=_p$._v$4=_v$4),_p$},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),_el$})()}var _default=(0,_createElement.createElement)(AlertComponent,element=>({attachToTop:element.get_static_property("at_to_top")}),(element,_ref)=>{let{attachToTop}=_ref;return{properties:{text:new _properties.Property(instance=>element_eval.evaluate_property(instance,"text")),verticalCenter:new _properties.Property(instance=>element_eval.evaluate_property(instance,"vertical_centering"))},styles:attachToTop?[new _properties.Style(instance=>{let props={position:instance.run_mode()?"fixed":"absolute","margin-left":"auto","margin-right":"auto","margin-top":"","margin-bottom":"","min-width":element_props.min_width_css(instance),"min-height":element_props.min_height_css(instance),"max-height":element_props.max_height_css(instance),"z-index":2e4};for(let side of["left","right","top","bottom"])props[side]=element_eval.evaluate_property(instance,"margin_".concat(side));let max_width=element_props.max_width_css(instance);if(element.fit_width()){props.width="auto";let bounded_width="calc(100% - ".concat(props.left+props.right,"px)");max_width!=null?props["max-width"]=["min(".concat(max_width,", ").concat(bounded_width,")"),max_width]:props["max-width"]=bounded_width}else props.width="initial",props["max-width"]=max_width;return element.fit_height()?(props.bottom="unset",props.height="auto"):props.height="initial",props},{outerPositioning:!0}),new _properties.Style(instance=>{var _instance$state;return(_instance$state=instance.state("manual_position"))!=null?_instance$state:{}},{alwaysDynamic:!0}),...element_styles.basicStyling(element)]:element_styles.placedStyling(element)}});exports.default=_default}});var require_Alert2=__commonJS({"lib-browser-old/core/core_elements/elements/Alert.js"(){"use strict";init_define_process_env();init_shim();require_es_weak_map();require_es_array_iterator();require_web_dom_collections_iterator();var u=_interopRequireWildcard(require_u2()),property_applications=_interopRequireWildcard(require_property_applications()),element_transformer=_interopRequireWildcard(require_element_transformer()),element_eval=_interopRequireWildcard(require_element_eval()),element_props=_interopRequireWildcard(require_element_props()),_elements=require_elements(),_AlertComponent=_interopRequireDefault(require_AlertComponent());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}element_transformer.make_element("Alert",{category:"visual elements",glyph_id:"alert",list_order:6,keyboard_shortcut:null,defaults:{font_color:"#947739",background_style:"bgcolor",bgcolor:"#FFF6B2",border_style:"none",border_width:1,border_color:"#FFDFC2",boxshadow_style:"none",padding_vertical:10,padding_horizontal:0,font_alignment:"center",width:200,height:37,fixed_width:!0},updated_default_sizing:{width:280,height:48},field_names:{text:{default:"...edit me..."},at_to_top:{no_states:!0,default:!1}},property_applications(element){return[new property_applications.Dimensions,new property_applications.PaddingText,new property_applications.PaddingFields({minimum_element_version:_elements.PADDING_VERSION,no_vertical_if_legacy_center:!0,allow_legacy:!0}),new property_applications.Border,new property_applications.BoxShadow,new property_applications.Font,new property_applications.FontShadow,new property_applications.FontSpacing,new property_applications.Background,new property_applications.ResponsiveElement(element),new property_applications.Opacity]},uses_css_responsive:!0,solid_component:_AlertComponent.default,can_fit_width:!0,can_fit_height:!0,get_html(instance){return"<div></div>"},can_defer_drawing(){return!0},get_messages(element){return["show_alert"]},register(instance){instance.on_message("show_alert",properties=>{if(instance.run_mode()&&instance.ensure_drawn(),instance.is_drawn){instance.message("do_show_alert",properties);return}instance.state("pending_alert",{orig_props:properties,start_time:Date.now()})})},initialize(instance){let canvas=instance.get_canvas(),do_collapse=()=>instance.get_static_property("at_to_top")||instance.get_static_property("collapse_when_hidden");instance.edit_mode()?canvas.css("visibility","hidden"):(instance.run_mode()||instance.responsive_mode())&&(instance._hide_me(),do_collapse()&&canvas.css("display","none"),instance.responsive_mode()&&(instance._has_been_hidden=!0));let content_div=null;instance.autorun(()=>{let html=u.bbcode_to_html(element_eval.evaluate_property(instance,"text"));element_eval.evaluate_property(instance,"vertical_centering")?(content_div==null&&(canvas.empty(),content_div=u.div("",canvas)),content_div.html(html)):(content_div=null,canvas.html(html))}),instance.on_message("do_show_alert",properties=>{var _content_div,_properties$fin_start;((_content_div=content_div)!=null?_content_div:canvas).html(u.bbcode_to_html(properties.message)),instance._display_me(),instance._is_visible_me=!0,instance._update_visible(),canvas.css({display:"",opacity:(_properties$fin_start=properties.fin_starting_opacity)!=null?_properties$fin_start:0}),u.velocity(canvas,{opacity:1},{duration:properties.fade_in,complete_cb:()=>{instance.setTimeout(()=>{var _properties$fout_star;canvas.css("opacity",(_properties$fout_star=properties.fout_starting_opacity)!=null?_properties$fout_star:1),u.velocity(canvas,{opacity:0},{duration:properties.fade_out,complete_cb:()=>{do_collapse()&&canvas.css("display","none"),instance._hide_me(),instance._is_visible_me=!1,instance._update_visible()},display:""})},properties.hold)}})});let pending_alert=instance.state("pending_alert");pending_alert&&instance.message("do_show_alert",this._convert_pending_alert(pending_alert))},starts_hidden:!0,manual_position:!1,change_cursor_style_if_clickable:!1,add_an_invisible_div_on_the_top:!1,is_input:!1,contains_group_data:!1,get_min_width(element){return 0},position_canvas(to_position,instance){let{element}=instance;instance.get_static_property("at_to_top")?(instance.autorun(()=>{var _element_props$max_he;let props={position:instance.run_mode()?"fixed":"absolute","margin-left":"auto","margin-right":"auto","margin-top":"","margin-bottom":"","min-width":element_props.min_width_css(instance),"min-height":element_props.min_height_css(instance),"max-height":(_element_props$max_he=element_props.max_height_css(instance))!=null?_element_props$max_he:"","z-index":2e4},max_width=element_props.max_width_css(instance);for(let side of["left","right","top","bottom"])props[side]=element_eval.evaluate_property(instance,"margin_".concat(side));if(element.fit_width()){props.width="auto";let bounded_width="calc(100% - ".concat(props.left+props.right,"px)");max_width!=null?props["max-width"]=u.apply_css_fallbacks("max-width",["min(".concat(max_width,", ").concat(bounded_width,")"),max_width]):props["max-width"]=bounded_width}else props.width="initial",props["max-width"]=max_width!=null?max_width:"";element.fit_height()?(props.bottom="unset",props.height="auto"):props.height="initial",to_position.css(props)}),instance.run_mode()?$("body").append(to_position):instance.edit_mode()?(instance.container.setup_margins(instance),$(".canvas").append(to_position)):instance.container.container_canvas.append(to_position)):instance.container.add(instance)},added_to_container(element){return!element.get_static_property("at_to_top")},goes_on_document(element){var _element$root;return element==null?!1:((_element$root=element.root())==null?void 0:_element$root.get_responsive_version())>0&&element.get_static_property("at_to_top")},not_draggable(element){return this.goes_on_document(element)},_convert_pending_alert(_ref){let{start_time,orig_props}=_ref,clamp=num=>Math.min(Math.max(num,0),1),cur_time=Date.now(),in_progress=clamp((cur_time-start_time)/orig_props.fade_in),end_in=start_time+orig_props.fade_in,hold_progress=clamp((cur_time-end_in)/orig_props.hold),end_hold=end_in+orig_props.hold,out_progress=clamp((cur_time-end_hold)/orig_props.fade_out);return u.extend(orig_props,{fin_starting_opacity:in_progress,fade_in:orig_props.fade_in*(1-in_progress),hold:orig_props.hold*(1-hold_progress),fout_starting_opacity:1-out_progress,fade_out:orig_props.fade_out*(1-out_progress)})},get_private_messages(){return["do_show_alert","position_element"]},update_show(properties){}})}});var require_AutocompleteDropdown2=__commonJS({"lib-browser-old/core/core_elements/elements/AutocompleteDropdown.js"(){"use strict";init_define_process_env();init_shim();require_es_weak_map();require_es_array_iterator();require_web_dom_collections_iterator();require_es_object_entries();require_es_array_includes();require_es_string_includes();require_es_string_trim();require_es_regexp_exec();require_es_symbol_description();var _isEqual=_interopRequireDefault(require_isEqual()),_escape=_interopRequireDefault(require_escape()),u=_interopRequireWildcard(require_u2()),hydrate2=_interopRequireWildcard(require_hydrate()),mode_check=_interopRequireWildcard(require_mode_check()),_lib=_interopRequireDefault(require_lib()),property_applications=_interopRequireWildcard(require_property_applications()),btypes=_interopRequireWildcard(require_btypes()),b_location=_interopRequireWildcard(require_b_location()),google_maps=_interopRequireWildcard(require_google_maps()),location_lookups=_interopRequireWildcard(require_location_lookups()),languages=_interopRequireWildcard(require_languages()),logger=_interopRequireWildcard(require_logger()),webfonts=_interopRequireWildcard(require_webfonts()),element_utils=_interopRequireWildcard(require_element_utils()),element_workflows=_interopRequireWildcard(require_element_workflows()),element_optional_utils=_interopRequireWildcard(require_element_optional_utils()),page_state=_interopRequireWildcard(require_page_state()),inputs=_interopRequireWildcard(require_inputs()),element_eval=_interopRequireWildcard(require_element_eval()),element_props=_interopRequireWildcard(require_element_props()),_elements=require_elements(),color_tokens=_interopRequireWildcard(require_color_tokens()),element_transformer=_interopRequireWildcard(require_element_transformer());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}element_transformer.make_element("AutocompleteDropdown",{category:"input forms",display:"Search Box",glyph_id:"search",list_order:5,defaults:u.extend({},inputs.default_for_inputs,{width:400,height:45,use_max_width:!0,max_width:150}),updated_default_sizing:{width:250,height:48},default_states:inputs.default_states_for_inputs,properties_for_new:{no_language:!0},field_names:u.extend({placeholder:{default:"Start typing..."},choices_style:{default:"dynamic",no_states:!0},choices:{no_states:!0},data_source:{no_states:!0},field_to_search:{no_states:!0},no_language:{no_states:!0},location:{optional:!0},radius:{optional:!0},default:{optional:!0},allow_not_in_list:{no_states:!0},mandatory:{},ac_list_max:{default:10}},inputs.get_disabled_field_name,inputs.get_auto_binding_field_names),property_applications(element){return[new property_applications.Dimensions,new property_applications.Background("input:first-of-type"),new property_applications.Border("input"),new property_applications.BoxShadow("input:first-of-type"),new property_applications.Font("input"),new property_applications.FontSpacing("input",["line_height"]),new property_applications.InputPadding("input"),new property_applications.PaddingFields({selector:"input",minimum_element_version:_elements.PADDING_VERSION,allow_legacy:!0}),new property_applications.PlaceholderColor("input"),new property_applications.ResponsiveElement(element),new property_applications.Opacity]},uses_css_responsive:!0,get_html(instance){return"<div></div>"},get_min_width(element){return 0},can_defer_drawing(){return!0},initialize(instance){instance.wait_for_visible_lite(()=>{var _instance$element$roo;let canvas=instance.get_canvas(),input_div=$('<input type="text"></input>');inputs.reset_input_div(input_div),input_div[0].style["box-sizing"]="border-box",canvas.append(input_div),canvas[0].style.overflow="visible",((_instance$element$roo=instance.element.root())==null?void 0:_instance$element$roo.get_responsive_version())>0?input_div.css({height:"100%",width:"100%"}):(element_eval.pre_cache(instance,["height","width"]),instance.autorun(()=>{let changes={};for(let prop of["height","width"])changes[prop]=element_eval.evaluate_property(instance,prop);canvas.find("input").css({height:changes.height,width:changes.width})}),element_utils.register_tab_index_listener(instance,tabindex=>{input_div.attr("tabindex",tabindex)}));let object_value_matcher={},text_match_to_field_name={},choices_style=instance.get_static_property("choices_style"),field_to_search=instance.get_static_property("field_to_search"),field_to_display=instance.get_static_property("field_to_display"),google_place_id_store={},google_place_id_to_name_store={},val_to_text=(val,searched_field)=>{if(val==null)return"";if(choices_style==="geographic_places")return instance.edit_mode()&&!instance.element.property("default").is_static()?instance.element.property("default").get_tree_display():btypes.get("geographic_address").runmode_display(val);if(choices_style==="dynamic"){let text=val.child(field_to_search).get();if(object_value_matcher[text]!=null&&object_value_matcher[text]!==val){let found=!1,similar_entries=0;for(let[t,v]of Object.entries(object_value_matcher))if((t===text||t.indexOf(text+" (")===0)&&(similar_entries++,(0,_isEqual.default)(hydrate2.dehydrate_tree(val),hydrate2.dehydrate_tree(v)))){text=t,found=!0;break}found||(text=text+" ("+similar_entries+")")}return object_value_matcher[text]=val,text}else return choices_style==="algolia_search"?val.child(searched_field!=null?searched_field:field_to_display).get():val},text_to_value=text=>{if(choices_style=instance.get_static_property("choices_style"),choices_style==="geographic_places"){let fn,place_id=google_place_id_store[text];return place_id?(fn=function(){let place_name=google_place_id_to_name_store[place_id],place=b_location.from_place_id(place_id);return place&&(place.name=place_name),place},fn.toUniqueString=()=>place_id):(fn=()=>b_location.from_address(text),fn.toUniqueString=()=>text),fn}else return["dynamic","algolia_search"].includes(choices_style)?object_value_matcher[text]:this._get_static_choices(instance).includes(text)?text:null};if(instance.autorun(()=>{input_div.focus(()=>{page_state.input_focused(!0)}),input_div.blur(()=>{page_state.input_focused(!1)}),input_div.attr("placeholder",element_eval.evaluate_property(instance,"placeholder"))}),instance.autorun(()=>{languages.is_rtl((0,_lib.default)().app_language())?canvas.find("input").attr("dir","rtl"):canvas.find("input").attr("dir","ltr")}),instance.run_mode()){let clear_input=function(){instance.get_static_property("allow_not_in_list")||input_div.typeahead("val","")},submit_current_text=function(){let text=input_div.typeahead("val");if(!text){u.run_once(10,()=>({existing_val:instance.state("value"),typed_content:instance.state("typed_content")}),(err,res)=>{if(err){logger.log(err);return}let{existing_val,typed_content}=res;(existing_val||typed_content)&&submit(null)});return}let val=text_to_value(text);val==null?(clear_input(),submit(null)):submit(val)},submit=function(val){["dynamic","static","algolia_search"].includes(choices_style)&&!val&&instance.get_static_property("allow_not_in_list")?instance.state("typed_content")!==input_div.typeahead("val")&&(instance.state("typed_content",input_div.typeahead("val")),instance.state("has_been_changed",!0),instance.state("value",null),element_workflows.run_element_workflow(instance,"InputChanged")):(instance.state("typed_content",null),instance.message("user_submit",val))};var _instance$element$roo2;let source;switch(choices_style=instance.get_static_property("choices_style"),choices_style){case"static":{let my_choices=this._get_static_choices(instance).map(c=>({value:c}));source=function(q,cb){let matches=my_choices.filter(entry=>entry.value.toLowerCase().indexOf(q.trim().toLowerCase())!==-1);return cb(matches)};break}case"dynamic":{source=(q,cb)=>{if(!field_to_search){cb([]);return}u.run_once(30,()=>{let data_source=element_eval.evaluate_property(instance,"data_source");if(!data_source)return[];let new_contraint={constraint_type:/[^a-zA-Z0-9]/.exec(q)!=null?"match_phrase_prefix":"prefix_search",key:field_to_search,value:q.trim().toLowerCase(),opts:{no_language:instance.get_static_property("no_language")}},current_eval_node=data_source._creation_eval_node,search=data_source.filter([new_contraint]);return search._creation_eval_node=current_eval_node,search.get_children(0,element_eval.evaluate_property(instance,"ac_list_max")).map(entry=>({value:val_to_text(entry)}))},(err,matches)=>{if(err){logger.log(err);return}return cb(matches)})};break}case"geographic_places":{google_maps.load_google_map_api();let types=["geocode"];source=(q,cb)=>u.run_once(30,()=>({location:element_eval.evaluate_property(instance,"location"),radius:element_eval.evaluate_property(instance,"radius")}),(err,_ref)=>{let{location:location2,radius}=_ref;return google_place_id_store={},google_place_id_to_name_store={},location_lookups.get_address_place_autocomplete({input:q,types,location:location2,radius},entries=>{for(let entry of entries)google_place_id_store[entry.description]=entry.place_id,google_place_id_to_name_store[entry.place_id]=entry.structured_formatting.main_text;return cb(entries.map(entry=>({value:entry.description})))})});break}case"algolia_search":{let algolia_source=instance.element.property("algolia_source"),type_to_find=algolia_source.property("type_to_find").get_static();if(field_to_search=algolia_source.property("field_to_search").get_static(),(element_optional_utils==null?void 0:element_optional_utils.optional_modules.algolia_autocomplete_source)==null)throw new u.UnexpectedError("Missing algolia autocomplete source");source=(query,cb)=>element_optional_utils.optional_modules.algolia_autocomplete_source({query,type_to_find,field_to_display,field_to_search,cb,cache_text_to_object:object_value_matcher,cache_text_to_field_name:text_match_to_field_name});break}default:throw new u.UnexpectedError("Invalid choices_style property in Autocomplete Dropdown",{choices_style})}let use_hint=element_eval.evaluate_property(instance,"font_alignment")==="left",limited_source=(q,cb)=>source(q,results=>{var _element_eval$evaluat;let sanitized_results=results.slice(0,(_element_eval$evaluat=element_eval.evaluate_property(instance,"ac_list_max"))!=null?_element_eval$evaluat:void 0);return cb(sanitized_results),style_dropdown()});input_div.typeahead({minLength:2,highlight:!0,hint:use_hint},{source:limited_source,templates:{suggestion(entry){return"<p>".concat((0,_escape.default)(entry.value),"</p>")}}}),((_instance$element$roo2=instance.element.root())==null?void 0:_instance$element$roo2.get_responsive_version())>0&&canvas.find(".twitter-typeahead").css("height","100%"),inputs.register_focus(instance,input_div),canvas.find("input:first-of-type").css("border-radius",element_eval.evaluate_property(instance,"border_roundness")),instance.on_message("set_focus",()=>input_div.focus());let dropdown_div=null,style_dropdown=()=>u.run_once(30,()=>({font_color:element_eval.evaluate_property(instance,"font_color"),font_face:element_props.get_font_face(instance),font_size:element_eval.evaluate_property(instance,"font_size"),width:element_eval.evaluate_property(instance,"width"),border_radius:element_eval.evaluate_property(instance,"border_roundness"),is_rtl:languages.is_rtl((0,_lib.default)().app_language())}),(err,data)=>{if(err){logger.log(err);return}let lighter_color=u.lighten_color(u.rgb_to_hex(color_tokens.color_property_to_rgba(data.font_color)).code,.5);canvas.find(".tt-hint").css("color",lighter_color);let{left,top}=canvas.offset();u.is_fixed(input_div)?top=top+canvas.height()-1-$(window).scrollTop():top=top+canvas.height()-1;let options={"font-family":webfonts.get_face_and_variant(data.font_face).font_family,"font-size":data.font_size+"px","min-width":data.width+"px","border-radius":data.border_radius+"px",top:top+"px",left:left+"px",right:"initial","z-index":1e4,position:u.is_fixed(canvas)?"fixed":"absolute","text-align":data.is_rtl?"right":"left"};property_applications.apply_css_style(dropdown_div,options),u.is_on_mobile_or_tablet()&&(dropdown_div.off("touchend"),dropdown_div.on("click",evt=>{var _input_div$typeahead3;evt.stopPropagation();let target=$(evt.target),text_match=target.prop("tagName")==="STRONG"?target.parent().text():target.text(),val=text_to_value(text_match);if(val)if(submit(val),choices_style==="geographic_places"){var _input_div$typeahead;(_input_div$typeahead=input_div.typeahead)==null||_input_div$typeahead.call(input_div,"val",text_match)}else u.run_once(30,()=>val_to_text(val,text_match_to_field_name[text_match]),(err2,text)=>{var _input_div$typeahead2;if(err2){logger.log(err2);return}(_input_div$typeahead2=input_div.typeahead)==null||_input_div$typeahead2.call(input_div,"val",text)});else clear_input(),submit(null);return(_input_div$typeahead3=input_div.typeahead)==null?void 0:_input_div$typeahead3.call(input_div,"close")}))});if(instance.wait_for_visible(()=>{dropdown_div=canvas.find(".tt-dropdown-menu"),dropdown_div.detach(),$("body").append(dropdown_div),style_dropdown()}),input_div.on("typeahead:opened touchstart",()=>style_dropdown()),instance.on_message("reset_input",()=>{instance.get_static_property("allow_not_in_list")&&instance.state("typed_content",null)}),u.is_on_mobile_or_tablet())input_div.on("blur",()=>{submit_current_text()});else{let last_submit=Date.now();input_div.on("typeahead:closed",()=>{(Date.now()-last_submit>200||mode_check.running_test())&&(last_submit=Date.now(),submit_current_text())}),input_div.on("blur.autocomplete",()=>{(Date.now()-last_submit>200||mode_check.running_test())&&(last_submit=Date.now(),submit_current_text())})}if(input_div.on("keydown",e=>{e.keyCode===13&&input_div.blur()}),instance.autorun(()=>{let needs_meta_key_pressed=element_eval.evaluate_property(instance,"not_submit_on_enter");inputs.assign_enter_handler_in_input(instance,needs_meta_key_pressed)}),choices_style==="dynamic"){let bad_value_watcher=u.Watcher(()=>{if(!instance.state("has_been_changed"))return!1;let val=instance.state("value");if(val==null)return!1;let dynamic_list=element_eval.evaluate_property(instance,"data_source");if(!dynamic_list)return!0;let btype=btypes.get(instance.element.property("data_source").property("type_to_find").json.get());return!dynamic_list.contains(val,btype)});instance.on_destroy(()=>bad_value_watcher.destroy()),bad_value_watcher.on_value(is_bad=>{is_bad&&instance.message("reset_input")})}instance.on_destroy(()=>{var _input_div$typeahead4;return(_input_div$typeahead4=input_div.typeahead)==null?void 0:_input_div$typeahead4.call(input_div,"destroy")}),element_eval.on_property_change(instance,"disabled",value=>input_div[0].disabled=value)}inputs.input_change_autorun(instance,val=>{let text=val_to_text(val);if(instance.run_mode()){var _input_div$typeahead5;(_input_div$typeahead5=input_div.typeahead)==null||_input_div$typeahead5.call(input_div,"val",text)}else input_div.val(text)})})},_get_static_choices(instance){let choices=instance.get_static_property("choices");return typeof choices!="string"&&(choices=""),choices.split("\n").map(c=>c.trim())},get_starting_content(instance){let starting_value;if(instance.run_mode()&&instance.get_static_property("auto_binding")?starting_value=inputs.get_input_autobind_thing_field(instance):starting_value=element_eval.evaluate_property(instance,"default"),starting_value==null)return null;let choices_style=instance.get_static_property("choices_style");if(choices_style==="geographic_places"){if(!instance.run_mode()&&!instance.element.property("default").is_static()&&(starting_value={address:starting_value}),!btypes.get("geographic_address").runmode_display(starting_value)&&(starting_value=b_location.from_address(starting_value),!btypes.get("geographic_address").runmode_display(starting_value)))return null}else if(choices_style==="static"){if(this._get_static_choices(instance).indexOf(starting_value)===-1)return null}else{let choice_list=element_eval.evaluate_property(instance,"data_source"),btype=btypes.get(instance.element.property("data_source").property("type_to_find").get_static());if(!choice_list||!choice_list.contains(starting_value,btype))return null}return starting_value},content_validated(val,instance){if(!element_eval.evaluate_property(instance,"mandatory")||val!=null)return!0;if(instance.get_static_property("allow_not_in_list"))return instance.state("typed_content")!=null},get_state_value(element,name){var _element$property$pro,_element$property$pro2;if(name==="value")switch(element.get_static_property("choices_style")){case"static":return"text";case"geographic_places":return"geographic_address";case"dynamic":return(_element$property$pro=element.property("data_source").property("type_to_find").json.get())!=null?_element$property$pro:"text";case"algolia_search":return(_element$property$pro2=element.property("algolia_source").property("type_to_find").json.get())!=null?_element$property$pro2:"text"}else if(name==="typed_content")return"text"},get_states(element){return["typed_content"]},add_specific_messages(messages,element){if(element.get_static_property("choices_style")!=="geographic_places"&&u.extend(messages,{get_typed_content:{description:"'s typed text",section:"States",ret_btype:"text",fn(a,b,properties,_raw,context){var _a$state;return(_a$state=a==null?void 0:a.state("typed_content"))!=null?_a$state:this.ret_btype_null()}}}),element.get_static_property("choices_style")==="geographic_places")return u.extend(messages,{get_place_name:{description:"'s place name",section:"States",ret_btype:"text",fn(a,b,properties,_raw,context){var _a$state$name;return(a==null?void 0:a.state("value"))?(_a$state$name=a==null?void 0:a.state("value").name)!=null?_a$state$name:this.ret_btype_null():this.ret_btype_null()}}})},change_cursor_style_if_clickable:!1,add_an_invisible_div_on_the_top:!0,is_input:!0,contains_group_data:!1,only_send_to_client_in_runmode:!0,jquery_plugins(){return["jquery_plugins/typeahead.jquery.min"]},css_files:["css/optional/typeahead.css"]})}});var require_ButtonComponent=__commonJS({"lib-browser-old/core/core_elements/components/ButtonComponent.js"(exports,module){"use strict";init_define_process_env();init_shim();var _web=(init_web(),__toCommonJS(web_exports));require_es_array_iterator();require_web_dom_collections_iterator();var _createElement=_interopRequireDefault(require_createElement()),_element_styles=require_element_styles(),_directives=require_directives(),_properties=require_properties(),_element_eval=require_element_eval();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _tmpl$=(0,_web.template)("<button> </button>",2);module.exports=(0,_createElement.default)(ButtonComponent,void 0,element=>({properties:{text:new _properties.Property(instance=>(0,_element_eval.evaluate_property)(instance,"text"),{fallback:""})},styles:[new _properties.Style(instance=>(0,_element_eval.evaluate_property)(instance,"background_style")==="none"?{"-webkit=touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","user-select":"none"}:{}),...(0,_element_styles.placedStyling)(element)]}));function ButtonComponent(props){return(()=>{let _el$=_tmpl$.cloneNode(!0),_el$2=_el$.firstChild;(0,_web.use)(_directives.defaultEventHandlers,_el$,()=>props.instance);let _ref$=props.ref;return typeof _ref$=="function"?(0,_web.use)(_ref$,_el$):props.ref=_el$,(0,_web.effect)(_p$=>{let _v$=props.id,_v$2=props.style,_v$3=props.classList,_v$4=props.text;return _v$!==_p$._v$&&(0,_web.setAttribute)(_el$,"id",_p$._v$=_v$),_p$._v$2=(0,_web.style)(_el$,_v$2,_p$._v$2),_p$._v$3=(0,_web.classList)(_el$,_v$3,_p$._v$3),_v$4!==_p$._v$4&&(_el$2.data=_p$._v$4=_v$4),_p$},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),_el$})()}}});var require_Button2=__commonJS({"lib-browser-old/core/core_elements/elements/Button.js"(){"use strict";init_define_process_env();init_shim();var u=require_u2(),property_applications=require_property_applications(),element_transformer=require_element_transformer(),element_workflows=require_element_workflows(),element_eval=require_element_eval(),ButtonComponent=require_ButtonComponent();element_transformer.make_element("Button",{category:"visual elements",glyph_id:"button",list_order:2,keyboard_shortcut:null,defaults:{font_alignment:"center",font_color:"#FFFFFF",background_style:"bgcolor",bgcolor:"#7F95EB",border_style:"none",border_roundness:3,border_width:1,border_color:"#7F95EB",boxshadow_style:"none",border_style_top:"none",border_roundness_top:3,border_width_top:1,border_color_top:"#7F95EB",border_style_left:"none",border_roundness_left:3,border_width_left:1,border_color_left:"#7F95EB",border_style_bottom:"none",border_roundness_bottom:3,border_width_bottom:1,border_color_bottom:"#7F95EB",border_style_right:"none",border_roundness_right:3,border_width_right:1,border_color_right:"#7F95EB",width:150,height:45,use_max_width:!0,max_width:100,min_width:50},field_names:u.extend({text:{default:"...edit me..."}},element_workflows.start_workflow_field_names),uses_css_responsive:!0,can_fit_width:!0,can_fit_height:!0,property_applications(element){return[new property_applications.Dimensions,new property_applications.Font,new property_applications.FontShadow,new property_applications.FontSpacing,new property_applications.Border,new property_applications.BoxShadow,new property_applications.Background,new property_applications.ResponsiveElement(element),new property_applications.ToolTip,new property_applications.Rotation,new property_applications.PaddingFields,new property_applications.Opacity]},get_html(instance){return"<button></button>"},change_cursor_style_if_clickable:!0,can_defer_drawing(){return!0},initialize(instance){let canvas=instance.get_canvas();property_applications.apply_css_style(canvas,{padding:"0px",cursor:"inherit",background:"none",border:"none","text-align":"left"}),instance.wait_for_visible_lite(()=>element_eval.on_property_change(instance,["text","background_style"],_ref=>{let{text,background_style}=_ref;canvas.text(text),background_style==="none"&&new property_applications.NoSelect()._apply(!0,canvas)}))},is_input:!1,contains_group_data:!1,add_an_invisible_div_on_the_top:!1,events:["ButtonClicked"],get_min_width(element){return 0},solid_component:ButtonComponent})}});var require_input_utils=__commonJS({"lib-browser-old/core/core_elements/components/utils/input_utils.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.createInputChange=createInputChange;var _solidJs=(init_solid(),__toCommonJS(solid_exports));function createInputChange(instance,fn){(0,_solidJs.onMount)(()=>{let autorun=instance.autorun(()=>{instance.state("has_been_changed")||fn(instance.state("value"))});(0,_solidJs.onCleanup)(()=>{autorun.destroy()})})}}});var require_CheckboxComponent=__commonJS({"lib-browser-old/core/core_elements/components/CheckboxComponent.js"(exports){"use strict";init_define_process_env();init_shim();require_es_symbol_description();require_es_error_cause();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _web=(init_web(),__toCommonJS(web_exports));require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_includes();var uuid=_interopRequireWildcard(require_uuid()),runmode_consts=_interopRequireWildcard(require_runmode()),_createElement=require_createElement(),element_styles=_interopRequireWildcard(require_element_styles()),_directives=require_directives(),_properties=require_properties(),_solidJs=(init_solid(),__toCommonJS(solid_exports)),input_utils=_interopRequireWildcard(require_input_utils()),element_eval=_interopRequireWildcard(require_element_eval());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var _tmpl$=(0,_web.template)('<div><input type="checkbox"><label></label></div>',5);function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var INPUT_SELECTOR=" input",_default=(0,_createElement.createElement)(CheckboxComponent,null,element=>({properties:{isDisabled:new _properties.Property(instance=>element_eval.evaluate_property(instance,"disabled")),label:new _properties.Property(instance=>element_eval.evaluate_property(instance,"label"))},styles:[...element_styles.placedStyling(element)]}));exports.default=_default;function CheckboxComponent(props){let runMode=props.instance.run_mode(),innerId=String(uuid.LUID()),inputRef;return(0,_solidJs.onMount)(()=>{runMode&&$(inputRef).change(event=>{var _event$target$checked;props.instance.message("user_submit",(_event$target$checked=event.target.checked)!=null?_event$target$checked:!1)})}),input_utils.createInputChange(props.instance,val=>{typeof val=="string"&&["false","no","null","none","undefined"].includes(val.toLowerCase())&&(val=!1),inputRef.checked=!!val}),(()=>{let _el$=_tmpl$.cloneNode(!0),_el$2=_el$.firstChild,_el$3=_el$2.nextSibling;(0,_web.use)(_directives.defaultEventHandlers,_el$,()=>props.instance);let _ref$=props.ref;typeof _ref$=="function"?(0,_web.use)(_ref$,_el$):props.ref=_el$;let _ref$2=inputRef;return typeof _ref$2=="function"?(0,_web.use)(_ref$2,_el$2):inputRef=_el$2,(0,_web.setAttribute)(_el$2,"id",innerId),(0,_web.setAttribute)(_el$3,"for",innerId),(0,_web.insert)(_el$3,()=>props.label),(0,_web.effect)(_p$=>{let _v$=props.id,_v$2=props.style,_v$3=_objectSpread(_objectSpread({},props.classList),{},{[runmode_consts.CLICKABLE_ELEMENT]:runMode}),_v$4=_objectSpread(_objectSpread({},props.childStyles[INPUT_SELECTOR]),{},{"background-color":"white"}),_v$5=runMode&&props.isDisabled;return _v$!==_p$._v$&&(0,_web.setAttribute)(_el$,"id",_p$._v$=_v$),_p$._v$2=(0,_web.style)(_el$,_v$2,_p$._v$2),_p$._v$3=(0,_web.classList)(_el$,_v$3,_p$._v$3),_p$._v$4=(0,_web.style)(_el$2,_v$4,_p$._v$4),_v$5!==_p$._v$5&&(_el$2.disabled=_p$._v$5=_v$5),_p$},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),_el$})()}}});var require_Checkbox2=__commonJS({"lib-browser-old/core/core_elements/elements/Checkbox.js"(){"use strict";init_define_process_env();init_shim();require_es_array_includes();var u=require_u2(),property_applications=require_property_applications(),runmode_consts=require_runmode(),element_transformer=require_element_transformer(),inputs=require_inputs(),element_eval=require_element_eval(),CheckboxComponent=require_CheckboxComponent().default;element_transformer.make_element("Checkbox",{category:"input forms",glyph_id:"checkbox",list_order:3,keyboard_shortcut:null,defaults:{width:180,height:20,min_width:50},field_names:u.extend({label:{default:"...edit me...",optional:!0},contents:{default:"unchecked"},dynamic:{},mandatory:{}},inputs.get_disabled_field_name,inputs.get_auto_binding_field_names),property_applications(element){return[new property_applications.Dimensions,new property_applications.Font,new property_applications.FontShadow,new property_applications.FontSpacing,new property_applications.BoxShadow("input"),new property_applications.ResponsiveElement(element),new property_applications.PaddingFields,new property_applications.Opacity]},uses_css_responsive:!0,can_fit_width:!0,can_fit_height:!0,can_defer_drawing(){return!0},solid_component:CheckboxComponent,use_legacy_in_editor:!0,use_legacy_in_thumbnail:!0,get_html(instance){return"<div></div>"},get_min_width(element){return 0},initialize(instance){return instance.wait_for_visible_lite(()=>{let canvas=instance.get_canvas();canvas[0].style.overflow="visible";let inner_id=u.LUID(),ip=$('<input type="checkbox" id="'.concat(inner_id,'" style="background-color: white;"></input>')),label_div=$('<label for="'.concat(inner_id,'"></label>'));canvas.append(ip),canvas.append(label_div),inputs.register_focus(instance,ip),instance.on_message("set_focus",()=>ip.focus()),instance.run_mode()&&(canvas.addClass(runmode_consts.CLICKABLE_ELEMENT),ip.change(()=>{var _ip$0$checked;return instance.message("user_submit",(_ip$0$checked=ip[0].checked)!=null?_ip$0$checked:!1),!0}),element_eval.on_property_change(instance,"disabled",value=>{ip[0].disabled=value})),element_eval.on_property_change(instance,"label",label=>{label_div.text(label)}),inputs.input_change_autorun(instance,val=>{typeof val=="string"&&["false","no","null","none","undefined"].includes(val.toLowerCase())&&(val=!1),val?ip[0].checked=!0:ip[0].checked=!1})})},get_starting_content(instance){if(instance.run_mode()&&instance.get_static_property("auto_binding"))return inputs.get_input_autobind_thing_field(instance);let content=element_eval.evaluate_property(instance,"contents");return content==="checked"?!0:content==="unchecked"?!1:element_eval.evaluate_property(instance,"dynamic")},get_state_value(element,name){if(name==="value")return"sys.bool"},content_validated(val,instance){return!(!val&&element_eval.evaluate_property(instance,"mandatory"))},change_cursor_style_if_clickable:!1,add_an_invisible_div_on_the_top:!0,is_input:!0,is_checkbox:!0,contains_group_data:!1})}});var require_datepickerTranslationsList=__commonJS({"lib-browser-old/u/client/datepickerTranslationsList.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports={ar:["ar"],bg:["bg_BG"],bs:["bs_BA"],ca:["ca_ES"],cs:["cs_CZ"],da:["da_DK"],de:["de_DE"],el:["el_GR"],es:["es_ES"],et:["et_EE"],eu:["eu_ES"],fa:["fa_ir"],fi:["fi_FI"],fr:["fr_FR"],gl:["gl_ES"],he:["he_IL"],hi:["hi_IN"],hr:["hr_HR"],hu:["hu_HU"],id:["id_ID"],is:["is_IS"],it:["it_IT"],ja:["ja_JP"],ko:["ko_KR"],lt:["lt_LT"],lv:["lv_LV"],nb:["nb_NO"],ne:["ne_NP"],nl:["nl_NL"],no:["no_NO"],pl:["pl_PL"],pt:["pt_PT","pt_BR"],ro:["ro_RO"],ru:["ru_RU"],sk:["sk_SK"],sl:["sl_SI"],sv:["sv_SE"],th:["th_TH"],tr:["tr_TR"],uk:["uk_UA"],vi:["vi_VN"],zh:["zh_CN","zh_TW"]}}});var require_DateInput2=__commonJS({"lib-browser-old/core/core_elements/elements/DateInput.js"(){"use strict";init_define_process_env();init_shim();require_es_weak_map();require_es_array_iterator();require_web_dom_collections_iterator();require_web_queue_microtask();require_es_regexp_exec();require_es_string_split();require_es_array_includes();require_es_string_includes();var _appquery=_interopRequireDefault(require_appquery()),btypes=_interopRequireWildcard(require_btypes()),element_transformer=_interopRequireWildcard(require_element_transformer()),inputs=_interopRequireWildcard(require_inputs()),languages=_interopRequireWildcard(require_languages()),_lib=_interopRequireDefault(require_lib()),logger=_interopRequireWildcard(require_logger()),property_applications=_interopRequireWildcard(require_property_applications()),runmode_consts=_interopRequireWildcard(require_runmode()),supported_date_languages=_interopRequireWildcard(require_datepickerTranslationsList()),_elements=require_elements(),u=_interopRequireWildcard(require_u2()),b_date=_interopRequireWildcard(require_b_date()),custom_tz_utilities=_interopRequireWildcard(require_custom_tz_utilities()),webfonts=_interopRequireWildcard(require_webfonts()),element_eval=_interopRequireWildcard(require_element_eval()),element_props=_interopRequireWildcard(require_element_props()),_timezone_override_settings=require_timezone_override_settings();require_web_queue_microtask();function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var moment=u.require_moment();function _bind_date(instance,val){if(val==null)return val;let min_date=element_eval.evaluate_property(instance,"min_date"),max_date=element_eval.evaluate_property(instance,"max_date");return min_date!=null&&val<min_date?min_date:max_date!=null&&val>max_date?max_date>=min_date?max_date:min_date!=null?min_date:val:val}function _get_array_from_date(instance,val){if(!val)return;let date=btypes.get("date").cast(val);if(!date)return;let tz=get_timezone(instance),m=moment(date).tz(tz);return[m.year(),m.month(),m.date()]}function get_timezone(instance){return(0,_timezone_override_settings.has_input_timezone_controls_on)()?custom_tz_utilities.get_custom_tz({static_eval:prop=>instance.get_static_property(prop),dynamic_eval:prop=>element_eval.evaluate_property(instance,prop),not_overridden:!0}):(0,_lib.default)().current_timezone()}function get_dateFormat_fmt_string(instance,val){let res="";switch(val){case"number1":res+="d/mm/yyyy";break;case"number2":res+="m/dd/yyyy";break;case"alpha":res+="d mmmm, yyyy";break;case"alphalong":res+="dddd, d mmmm, yyyy";break;case"alphashort":res+="d-mmm-yyyy";break;case"us_short":res+="mmmm d, yyyy";break;case"us_long":res+="dddd, mmmm d, yyyy";break;case"custom":res+=instance.get_static_property("custom_format");break}return res}element_transformer.make_element("DateInput",{display:"Date/Time Picker",category:"input forms",glyph_id:"datetime",list_order:8,keyboard_shortcut:null,defaults:{font_size:14,font_color:"#3D3D3D",background_style:"bgcolor",border_style:"solid",border_color:"#BDBDBD",border_roundness:3,border_width:1,border_roundness_top:3,border_style_left:"solid",border_width_left:1,border_color_left:"#BDBDBD",border_roundness_left:3,border_style_bottom:"solid",border_width_bottom:1,border_color_bottom:"#BDBDBD",border_roundness_bottom:3,border_style_right:"solid",border_width_right:1,border_color_right:"#BDBDBD",border_roundness_right:3,padding_horizontal:4,padding_vertical:0,width:250,height:45,use_max_width:!0,max_width:150},updated_default_sizing:{height:48},default_states:inputs.default_states_for_inputs,field_names:u.extend({input_type:{default:"date",no_states:!0},content:{},overwrite_placeholder:{no_states:!0},placeholder:{optional:!0},date_format:{default:"number2",no_states:!0,in_style:!0},custom_format:{default:"ddd, m/dd/yy, mmmm (mmm) dS, yyyy",no_states:!0,in_style:!0},start_monday:{no_states:!0},time_interval:{default:30,no_states:!0},time_format:{default:"full",no_states:!0},min_date:{},max_date:{},min_hour:{},max_hour:{},show_month_year_picker:{no_states:!0},mandatory:{}},inputs.get_disabled_field_name,inputs.get_auto_binding_field_names,custom_tz_utilities.custom_tz_field_names),property_applications(element){return[new property_applications.Dimensions,new property_applications.Background("input"),new property_applications.Border("input"),new property_applications.BoxShadow("input"),new property_applications.Font("input"),new property_applications.FontSpacing("input",["line_height"]),new property_applications.InputPadding("input"),new property_applications.PaddingFields({selector:"input",minimum_element_version:_elements.PADDING_VERSION,allow_legacy:!0}),new property_applications.PlaceholderColor("input"),new property_applications.ResponsiveElement(element),new property_applications.Opacity]},uses_css_responsive:!0,additional_uses_properties:["input_type"],get_html(instance){return"<div></div>"},get_min_width(){return 0},can_defer_drawing(){return!0},initialize(instance){instance.wait_for_visible_lite(()=>{let date_picker,time_picker,canvas=instance.get_canvas();canvas.addClass("date_picker_element"),canvas[0].style.overflow="visible";let date_input=$('<input type="text" class="date_div"></input>');inputs.reset_input_div(date_input),canvas.append(date_input);let time_input=$('<input type="text" class="time_div"></input>');if(inputs.reset_input_div(time_input),element_eval.on_property_change(instance,"input_type",input_type=>{input_type==="date_time"?canvas.append(time_input):time_input.detach()}),element_eval.on_property_change(instance,"disabled",value=>{property_applications.apply_css_style(date_input,{cursor:value?"default":"pointer"}),property_applications.apply_css_style(time_input,{cursor:value?"default":"pointer"})}),element_eval.pre_cache(instance,["input_type","padding_horizontal","date_format","time_format","placeholder","overwrite_placeholder"]),instance.autorun(()=>{let placeholder,time_placeholder,changes={};for(let prop of["input_type","padding_horizontal","date_format","time_format","placeholder","overwrite_placeholder","padding_top","padding_bottom","padding_left","padding_right"])changes[prop]=element_eval.evaluate_property(instance,prop);let border_height=property_applications.calculate_border_height(instance),border_width=property_applications.calculate_border_width(instance),horizontal_padding=instance.element.element_version(!0)<_elements.PADDING_VERSION?2*changes.padding_horizontal:changes.padding_left+changes.padding_right,vertical_padding=instance.element.element_version(!0)<_elements.PADDING_VERSION?0:changes.padding_top+changes.padding_bottom,bv_check=_appquery.default.get_public_setting("bubble_version")<18,date_input_height=bv_check?"calc(100% - ".concat(border_height,"px)"):"calc(100% - ".concat(vertical_padding+border_height,"px)");if(property_applications.apply_css_style(date_input,{height:date_input_height,"box-sizing":"content-box"}),changes.input_type==="date_time"){let time_input_width=bv_check?70:72,gap_spacing=bv_check?5:8;property_applications.apply_css_style(date_input,{width:"calc(100% - ".concat(2*horizontal_padding+2*border_width,"px - ").concat(time_input_width+gap_spacing,"px)"),float:"left"}),property_applications.apply_css_style(time_input,{width:"".concat(time_input_width,"px"),float:"right",height:"calc(100% - ".concat(vertical_padding+border_height,"px)"),"box-sizing":"content-box"})}else date_input[0].style.width="calc(100% - ".concat(horizontal_padding+border_width,"px)");if(changes.input_type==="date"&&changes.overwrite_placeholder)placeholder=changes.placeholder;else{let placeholder_date;if(_appquery.default.app().id()==="test_app"){var _get_timezone;let tz=(_get_timezone=get_timezone(instance))!=null?_get_timezone:(0,_lib.default)().current_timezone();placeholder_date=moment.tz("1/15/2013",tz).toDate()}else placeholder_date=new Date;let fmt_str=get_dateFormat_fmt_string(instance,changes.date_format);placeholder=b_date.format_date(placeholder_date,fmt_str,(0,_lib.default)().get_text("BUILT_IN","DATE_FORMAT"),get_timezone(instance))}switch(date_input.attr("placeholder",placeholder),changes.time_format){case"full":time_placeholder="12:00";break;case"ampm":time_placeholder="12:00 AM";break}return time_input==null?void 0:time_input.attr("placeholder",time_placeholder)}),instance.run_mode()){let get_datepicker_val=function(){var _date_picker;if((_date_picker=date_picker)!=null&&_date_picker.get()){let date_only=date_picker.get("select"),full_date={year:date_only.year,month:date_only.month,day:date_only.date};if(instance.get_static_property("input_type")==="date_time"){let time_only=time_picker.get("select");if(time_only){var _time_only$hour,_time_only$mins;full_date.hour=(_time_only$hour=time_only==null?void 0:time_only.hour)!=null?_time_only$hour:"",full_date.minute=(_time_only$mins=time_only==null?void 0:time_only.mins)!=null?_time_only$mins:""}else return}return moment.tz(full_date,get_timezone(instance)).toDate()}else return null},onclose_handler=function(){return this.$holder.blur(),instance.state("has_been_changed",!0),u.run_once(30,get_datepicker_val,(_,val)=>{instance.state("is_focused",!1),val!==void 0&&instance.message("user_submit",val)}),!0},position_function=function(_ref){let{$holder,$root}=_ref;$holder.css("transition","0.05s ease-in-out"),$holder.position({my:"left top",at:"left bottom",of:instance.get_canvas(),collision:"fit flip"}),(0,_lib.default)().bubble_version()<19&&$root.addClass("datepicker-legacy-font")},onrender_handler=function(){return position_function(this)},run_positioning=function(data){queueMicrotask(()=>{position_function(data),instance.setTimeout(()=>position_function(data),100)}),$(window).on("resize",()=>position_function(data));let parent=instance.get_canvas();u.run_once(30,()=>({width:parent.width(),"font-family":webfonts.get_face_and_variant(element_props.get_font_face(instance)).font_family,top:0}),(err,location_info)=>{var _time_picker;err&&logger.log(err),date_picker.$root.css(location_info),(_time_picker=time_picker)==null||_time_picker.$root.css(location_info)})},onopen_handler=function(){instance.state("is_focused",!0),run_positioning(this)},_get_array_from_hour=function(raw){if(!raw)return!1;let hour=Math.floor(raw),minute=Math.round((raw-hour)*60);return[hour,minute]};canvas.addClass(runmode_consts.CLICKABLE_ELEMENT);let should_show_month_year=instance.get_static_property("show_month_year_picker");date_input.pickadate({container:"html",firstDay:instance.get_static_property("start_monday"),selectMonths:should_show_month_year,selectYears:should_show_month_year&&200,onOpen:onopen_handler,onClose:onclose_handler,format:get_dateFormat_fmt_string(instance,instance.get_static_property("date_format"))}),date_picker=date_input.pickadate("picker"),instance.wait_for_visible(()=>{run_positioning(date_picker),instance.setTimeout(()=>run_positioning(date_picker),100)});let is_time_picker=!1,time_option={};if(instance.get_static_property("input_type")==="date_time"){switch(is_time_picker=!0,time_option.container="html",time_option.interval=instance.get_static_property("time_interval"),instance.get_static_property("time_format")){case"full":time_option.format="H:i";break;case"ampm":time_option.format="h:i A";break}time_option.onClose=onclose_handler,time_option.onOpen=onopen_handler,time_option.onRender=onrender_handler,time_input.pickatime(time_option),time_picker=time_input.pickatime("picker")}instance.autorun(()=>{var _get_array_from_date2,_get_array_from_date3;let min_date=element_eval.evaluate_property(instance,"min_date"),max_date=element_eval.evaluate_property(instance,"max_date");if(date_picker.set({min:(_get_array_from_date2=_get_array_from_date(instance,min_date))!=null?_get_array_from_date2:-1/0,max:(_get_array_from_date3=_get_array_from_date(instance,max_date))!=null?_get_array_from_date3:1/0}),is_time_picker){let min_hour=element_eval.evaluate_property(instance,"min_hour"),max_hour=element_eval.evaluate_property(instance,"max_hour");time_picker.set({min:_get_array_from_hour(min_hour),max:_get_array_from_hour(max_hour)})}let prev_tz;instance.autorun(()=>{let current_tz=get_timezone(instance);if(instance.state("has_been_changed")&&current_tz===prev_tz)return;prev_tz=current_tz;let val=instance.state("value");if(!u.autorun_top(()=>instance.state("is_focused")))if(val){if(date_picker.set("select",_get_array_from_date(instance,val)),is_time_picker){let tz=get_timezone(instance),m=moment(val).tz(tz);time_picker.set("select",[m.hours(),m.minutes()])}}else date_picker.clear(),is_time_picker&&time_picker.clear()})}),instance.autorun(()=>{let val=instance.state("value",void 0,!0);if(typeof val!="function"&&date_picker.get("select")){let bound_val=_bind_date(instance,val);bound_val!==val&&(date_picker.set("select",_get_array_from_date(instance,bound_val)),instance.state("value",bound_val))}}),instance.autorun(()=>{date_picker.$root.css({"margin-top":instance.current_height(),"max-width":instance.current_width()}),instance.get_static_property("input_type")==="date_time"&&time_picker.$root.css({"margin-top":instance.current_height(),"max-width":instance.current_width()})}),element_eval.on_property_change(instance,"disabled",value=>{date_input[0].disabled=value,time_input!=null&&(time_input[0].disabled=value)})}inputs.register_focus(instance,canvas.find("input")),instance.on_message("set_focus",()=>{date_input[0].disabled||date_picker.open()}),instance.run_mode()||(date_input.attr("readonly","true"),time_input==null||time_input.attr("readonly","true"))})},get_starting_content(instance){return instance.run_mode()&&instance.get_static_property("auto_binding")?_bind_date(instance,inputs.get_input_autobind_thing_field(instance)):_bind_date(instance,element_eval.evaluate_property(instance,"content"))},content_validated(val,instance){return val||!element_eval.evaluate_property(instance,"mandatory")},change_cursor_style_if_clickable:!1,add_an_invisible_div_on_the_top:!1,is_input:!0,contains_group_data:!1,get_state_value(element,name){if(name==="value")return"date"},jquery_plugins(appname,app_version,app_language){let files=["jquery_plugins/datepicker/picker","jquery_plugins/datepicker/picker.date","jquery_plugins/datepicker/picker.time","jquery_plugins/jquery-ui.position.min"];if(typeof(0,_lib.default)().appname=="function"){var _lang_file$split;let lang_file=languages.get_iso_code(app_language),language=(_lang_file$split=lang_file.split(/[-_]/))==null?void 0:_lang_file$split[0];if(language==="en")return files;let relevant_translations=supported_date_languages[language];if(relevant_translations==null)return logger.warn("Missing datepicker translation",{lang_file}),files;relevant_translations.includes(lang_file)||(lang_file=relevant_translations[0]),files.push("jquery_plugins/datepicker/".concat(lang_file))}return files},css_files:["css/optional/datepicker.css"]})}});var require_Dropdown2=__commonJS({"lib-browser-old/core/core_elements/elements/Dropdown.js"(){"use strict";init_define_process_env();init_shim();require_es_json_stringify();require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_includes();var u=require_u2(),hydrate2=require_hydrate(),Lib=require_lib(),appquery=require_appquery(),property_applications=require_property_applications(),create_hash=require_browser3(),logger=require_logger(),btypes=require_btypes(),element_utils=require_element_utils(),element_transformer=require_element_transformer(),inputs=require_inputs(),dropdowns=require_dropdowns(),element_eval=require_element_eval(),BLANK="BLANK_1427118194589",PLACEHOLDER="PLACEHOLDER_1427118222253",MAX_DROPDOWN=5e3;element_transformer.make_element("Dropdown",{category:"input forms",glyph_id:"dropdown",list_order:4,keyboard_shortcut:null,defaults:{font_size:14,background_style:"bgcolor",bgcolor:"#E6E6E6",border_style:"solid",border_width:1,border_color:"#858585",border_roundness:3,border_style_top:"solid",border_width_top:1,border_color_top:"#858585",border_roundness_top:3,border_style_left:"solid",border_width_left:1,border_color_left:"#858585",border_roundness_left:3,border_style_bottom:"solid",border_width_bottom:1,border_color_bottom:"#858585",border_roundness_bottom:3,border_style_right:"solid",border_width_right:1,border_color_right:"#858585",border_roundness_right:3,width:250,height:45,placeholder:"Choose an option...",use_max_width:!0,max_width:150,placeholder_color:"#9C9C9C",padding_left:5,padding_right:15},updated_default_sizing:{height:48},default_states:inputs.default_states_for_inputs,field_names:u.extend({placeholder:{},choices_style:{default:"static",no_states:!0},choices:{},dynamic_type:{no_states:!0},data_source:{},option_display_expression:{},default:{},mandatory:{},placeholder_color:{in_style:!0},computed_value:{optional:!0,no_states:!0}},inputs.get_disabled_field_name,inputs.get_auto_binding_field_names),property_applications(element){return[new property_applications.Dimensions,new property_applications.Font(null,null,["font_color"]),new property_applications.Background,new property_applications.Border,new property_applications.BoxShadow,new property_applications.ResponsiveElement(element),new property_applications.ToolTip,new property_applications.FontSpacing(null,["line_height"]),new property_applications.PaddingFields,new property_applications.Opacity]},get_html(instance){return"<select></select>"},get_min_width(element){return 0},_get_display_option:dropdowns._get_display_option,can_defer_drawing(){return!0},register(instance){let bad_value_watcher=u.Watcher(()=>{if(!instance.state("has_been_changed"))return!1;let val=instance.state("value");return val==null?!1:!this._choice_list_contains(instance,val)});instance.on_destroy(()=>bad_value_watcher.destroy()),bad_value_watcher.on_value(is_bad=>{if(is_bad)return instance.message("reset_input")})},initialize(instance){return instance.wait_for_visible_lite(()=>{var _instance$element$roo;let canvas=instance.get_canvas();appquery.get_public_setting("bubble_version")>=16&&canvas.addClass("dropdown-chevron"),((_instance$element$roo=instance.element.root())==null?void 0:_instance$element$roo.get_responsive_version())>0?canvas.css("display","block"):(canvas.css({"padding-left":5,"padding-right":15}),instance.run_mode()&&element_utils.register_tab_index_listener(instance,tabindex=>{canvas.attr("tabindex",tabindex)})),inputs.reset_input_div(canvas);let choice_list=[],our_color=null;function get_value_key(value){if(typeof value=="object"){let hasher=create_hash("md5");return hasher.update(JSON.stringify(value)),hasher.digest("hex")}return value}let choices_cache=null;function create_option(c){let choice=$('<option class="dropdown-choice"></option>');choice.text(c.display);let safe_val=c.value,dehydrated_value=hydrate2.dehydrate_tree(safe_val);return choice.attr("value",JSON.stringify(dehydrated_value)),our_color!=null&&(choice[0].style.color=our_color),choice}let is_placeholder_selected=u.Box();if(u.autorun(()=>{our_color=element_eval.evaluate_property(instance,"font_color"),is_placeholder_selected()?canvas[0].style.color=element_eval.evaluate_property(instance,"placeholder_color"):canvas[0].style.color=our_color,canvas.find("option").css("color",our_color)}),instance.run_mode()){let val_to_text=function(val){return val==null&&(element_eval.evaluate_property(instance,"mandatory")||!instance.state("has_been_changed")?val=PLACEHOLDER:val=BLANK),JSON.stringify(hydrate2.dehydrate_tree(val))},select_value=function(val){return current_displayed_value=val,update_displayed_value(val)},update_displayed_value=function(val){let text=val_to_text(val),placeholder_element=canvas.find(".dropdown-placeholder")[0];return text===JSON.stringify(PLACEHOLDER)?(is_placeholder_selected(!0),placeholder_element!=null&&(placeholder_element.disabled=!1)):(is_placeholder_selected(!1),placeholder_element!=null&&(placeholder_element.disabled=!0)),canvas.val(text)},get_placeholder_div=function(){let placeholder_div=canvas.find(".dropdown-placeholder");return placeholder_div.length===0&&(placeholder_div=create_option({display:"",value:PLACEHOLDER}),placeholder_div.addClass("dropdown-placeholder"),placeholder_div[0].style.display="none",canvas.prepend(placeholder_div)),placeholder_div};inputs.switch_disabled_or_not(instance),canvas.on("click",evt=>evt.stopPropagation());let get_choice_list=()=>{let raw_choices=this._get_raw_choice_list(instance),get_display=this._get_display_option(instance),raw_choice_list=raw_choices.get_children(0,MAX_DROPDOWN);u.run_once(30,()=>raw_choice_list.map(raw_choice=>get_display(raw_choice))),choice_list=[];for(let raw_choice of raw_choice_list)choice_list.push({display:get_display(raw_choice),value:raw_choice});return element_eval.evaluate_property(instance,"mandatory")||(choice_list=[{display:"",value:BLANK}].concat(choice_list)),choice_list},current_displayed_value=null;instance.autorun(()=>{if(element_eval.evaluate_property(instance,"choices_style")!=="static")return element_eval.get_property_watcher(instance,"data_source").on_not_ready(()=>u.run_once(30,()=>Lib().get_text("CORE","LOADING"),(err,loading_message)=>(err&&logger.log(err),get_placeholder_div().text(loading_message!=null?loading_message:""),update_displayed_value(PLACEHOLDER))))});let update_choice_list=()=>{choice_list=get_choice_list();let placeholder_text=element_eval.evaluate_property(instance,"placeholder"),new_choices=[];for(let entry of choice_list){let safe_val=entry.value,dehydrated_value=hydrate2.dehydrate_tree(safe_val),value_key=get_value_key(dehydrated_value);new_choices.push([value_key,entry.display])}let placeholder_div;if(choices_cache!=null&&u.compare(new_choices,choices_cache)){placeholder_div=get_placeholder_div(),placeholder_div.text(placeholder_text);return}else choices_cache=new_choices;canvas.empty(),placeholder_div=get_placeholder_div(),placeholder_div.text(placeholder_text);let previous_div=placeholder_div,dedupe_record={};for(let c of choice_list){let value_key=get_value_key(hydrate2.dehydrate_tree(c.value));if(dedupe_record[value_key])continue;dedupe_record[value_key]=!0;let div=create_option(c);previous_div.after(div),previous_div=div}return select_value(current_displayed_value)};canvas.change(()=>{let new_val=dropdowns.rehydrate_dropdown_value(JSON.parse(canvas.find("option:selected").attr("value")));return[PLACEHOLDER,BLANK].includes(new_val)&&(new_val=null),instance.message("user_submit",new_val),select_value(new_val)}),inputs.input_change_autorun(instance,val=>select_value(val));let is_dropdown_focused=u.Box(!1);canvas.on("focus",()=>is_dropdown_focused(!0)),canvas.on("blur",()=>is_dropdown_focused(!1)),inputs.register_focus(instance,canvas);let succesfully_updated_once=u.Box(!1);instance.autorun(()=>{if(instance.is_visible()&&(!succesfully_updated_once()||!is_dropdown_focused()))return update_choice_list(),succesfully_updated_once(!0)}),instance.on_message("set_focus",()=>canvas.focus())}})},_get_raw_btype(element){return dropdowns._get_raw_btype_dropdown(element)},_get_raw_choice_list(instance){return dropdowns._get_raw_choice_list_dropdown(instance,this)},_choice_list_contains(instance,val){let V=btypes.get(this._get_raw_btype(instance.element));return this._get_raw_choice_list(instance).contains(val,V)},get_starting_content(instance){let starting_content;return instance.run_mode()&&instance.get_static_property("auto_binding")?starting_content=inputs.get_input_autobind_thing_field(instance):starting_content=element_eval.evaluate_property(instance,"default"),typeof starting_content=="string"&&this._get_raw_btype(instance.element)==="number"&&(starting_content=Lib().locale().parse_float(starting_content)),starting_content==null||!this._choice_list_contains(instance,starting_content)?null:starting_content},get_state_value(element,name){if(name==="value")return this._get_raw_btype(element)},get_injected_value(element){return element.get_static_property("dynamic_type")},get_injected_display(){return"Current option"},use_injected_datasource(node){return dropdowns.use_injected_datasource("option_display_expression",node)},content_validated(val,instance){return val!=null||!element_eval.evaluate_property(instance,"mandatory")},uses_css_responsive:!0,change_cursor_style_if_clickable:!1,add_an_invisible_div_on_the_top:!0,is_input:!0,contains_group_data:!1})}});var require_array_buffer_native=__commonJS({"node_modules/core-js/internals/array-buffer-native.js"(exports,module){init_define_process_env();init_shim();module.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"}});var require_to_index=__commonJS({"node_modules/core-js/internals/to-index.js"(exports,module){init_define_process_env();init_shim();var global=require_global(),toIntegerOrInfinity=require_to_integer_or_infinity(),toLength=require_to_length(),RangeError2=global.RangeError;module.exports=function(it){if(it===void 0)return 0;var number=toIntegerOrInfinity(it),length=toLength(number);if(number!==length)throw RangeError2("Wrong length or index");return length}}});var require_ieee7542=__commonJS({"node_modules/core-js/internals/ieee754.js"(exports,module){init_define_process_env();init_shim();var global=require_global(),Array2=global.Array,abs=Math.abs,pow=Math.pow,floor=Math.floor,log=Math.log,LN2=Math.LN2,pack=function(number,mantissaLength,bytes){var buffer=Array2(bytes),exponentLength=bytes*8-mantissaLength-1,eMax=(1<<exponentLength)-1,eBias=eMax>>1,rt=mantissaLength===23?pow(2,-24)-pow(2,-77):0,sign=number<0||number===0&&1/number<0?1:0,index=0,exponent,mantissa,c;for(number=abs(number),number!=number||number===1/0?(mantissa=number!=number?1:0,exponent=eMax):(exponent=floor(log(number)/LN2),c=pow(2,-exponent),number*c<1&&(exponent--,c*=2),exponent+eBias>=1?number+=rt/c:number+=rt*pow(2,1-eBias),number*c>=2&&(exponent++,c/=2),exponent+eBias>=eMax?(mantissa=0,exponent=eMax):exponent+eBias>=1?(mantissa=(number*c-1)*pow(2,mantissaLength),exponent=exponent+eBias):(mantissa=number*pow(2,eBias-1)*pow(2,mantissaLength),exponent=0));mantissaLength>=8;)buffer[index++]=mantissa&255,mantissa/=256,mantissaLength-=8;for(exponent=exponent<<mantissaLength|mantissa,exponentLength+=mantissaLength;exponentLength>0;)buffer[index++]=exponent&255,exponent/=256,exponentLength-=8;return buffer[--index]|=sign*128,buffer},unpack=function(buffer,mantissaLength){var bytes=buffer.length,exponentLength=bytes*8-mantissaLength-1,eMax=(1<<exponentLength)-1,eBias=eMax>>1,nBits=exponentLength-7,index=bytes-1,sign=buffer[index--],exponent=sign&127,mantissa;for(sign>>=7;nBits>0;)exponent=exponent*256+buffer[index--],nBits-=8;for(mantissa=exponent&(1<<-nBits)-1,exponent>>=-nBits,nBits+=mantissaLength;nBits>0;)mantissa=mantissa*256+buffer[index--],nBits-=8;if(exponent===0)exponent=1-eBias;else{if(exponent===eMax)return mantissa?NaN:sign?-1/0:1/0;mantissa=mantissa+pow(2,mantissaLength),exponent=exponent-eBias}return(sign?-1:1)*mantissa*pow(2,exponent-mantissaLength)};module.exports={pack,unpack}}});var require_array_fill=__commonJS({"node_modules/core-js/internals/array-fill.js"(exports,module){"use strict";init_define_process_env();init_shim();var toObject=require_to_object(),toAbsoluteIndex=require_to_absolute_index(),lengthOfArrayLike=require_length_of_array_like();module.exports=function(value){for(var O=toObject(this),length=lengthOfArrayLike(O),argumentsLength=arguments.length,index=toAbsoluteIndex(argumentsLength>1?arguments[1]:void 0,length),end=argumentsLength>2?arguments[2]:void 0,endPos=end===void 0?length:toAbsoluteIndex(end,length);endPos>index;)O[index++]=value;return O}}});var require_array_buffer=__commonJS({"node_modules/core-js/internals/array-buffer.js"(exports,module){"use strict";init_define_process_env();init_shim();var global=require_global(),uncurryThis=require_function_uncurry_this(),DESCRIPTORS=require_descriptors(),NATIVE_ARRAY_BUFFER=require_array_buffer_native(),FunctionName=require_function_name(),createNonEnumerableProperty=require_create_non_enumerable_property(),redefineAll=require_redefine_all(),fails=require_fails(),anInstance=require_an_instance(),toIntegerOrInfinity=require_to_integer_or_infinity(),toLength=require_to_length(),toIndex=require_to_index(),IEEE754=require_ieee7542(),getPrototypeOf=require_object_get_prototype_of(),setPrototypeOf=require_object_set_prototype_of(),getOwnPropertyNames=require_object_get_own_property_names().f,defineProperty=require_object_define_property().f,arrayFill=require_array_fill(),arraySlice=require_array_slice_simple(),setToStringTag=require_set_to_string_tag(),InternalStateModule=require_internal_state(),PROPER_FUNCTION_NAME=FunctionName.PROPER,CONFIGURABLE_FUNCTION_NAME=FunctionName.CONFIGURABLE,getInternalState=InternalStateModule.get,setInternalState=InternalStateModule.set,ARRAY_BUFFER="ArrayBuffer",DATA_VIEW="DataView",PROTOTYPE="prototype",WRONG_LENGTH="Wrong length",WRONG_INDEX="Wrong index",NativeArrayBuffer=global[ARRAY_BUFFER],$ArrayBuffer=NativeArrayBuffer,ArrayBufferPrototype=$ArrayBuffer&&$ArrayBuffer[PROTOTYPE],$DataView=global[DATA_VIEW],DataViewPrototype=$DataView&&$DataView[PROTOTYPE],ObjectPrototype=Object.prototype,Array2=global.Array,RangeError2=global.RangeError,fill=uncurryThis(arrayFill),reverse=uncurryThis([].reverse),packIEEE754=IEEE754.pack,unpackIEEE754=IEEE754.unpack,packInt8=function(number){return[number&255]},packInt16=function(number){return[number&255,number>>8&255]},packInt32=function(number){return[number&255,number>>8&255,number>>16&255,number>>24&255]},unpackInt32=function(buffer){return buffer[3]<<24|buffer[2]<<16|buffer[1]<<8|buffer[0]},packFloat32=function(number){return packIEEE754(number,23,4)},packFloat64=function(number){return packIEEE754(number,52,8)},addGetter=function(Constructor,key2){defineProperty(Constructor[PROTOTYPE],key2,{get:function(){return getInternalState(this)[key2]}})},get=function(view,count,index,isLittleEndian){var intIndex=toIndex(index),store=getInternalState(view);if(intIndex+count>store.byteLength)throw RangeError2(WRONG_INDEX);var bytes=getInternalState(store.buffer).bytes,start=intIndex+store.byteOffset,pack=arraySlice(bytes,start,start+count);return isLittleEndian?pack:reverse(pack)},set=function(view,count,index,conversion,value,isLittleEndian){var intIndex=toIndex(index),store=getInternalState(view);if(intIndex+count>store.byteLength)throw RangeError2(WRONG_INDEX);for(var bytes=getInternalState(store.buffer).bytes,start=intIndex+store.byteOffset,pack=conversion(+value),i=0;i<count;i++)bytes[start+i]=pack[isLittleEndian?i:count-i-1]};if(!NATIVE_ARRAY_BUFFER)$ArrayBuffer=function(length){anInstance(this,ArrayBufferPrototype);var byteLength=toIndex(length);setInternalState(this,{bytes:fill(Array2(byteLength),0),byteLength}),DESCRIPTORS||(this.byteLength=byteLength)},ArrayBufferPrototype=$ArrayBuffer[PROTOTYPE],$DataView=function(buffer,byteOffset,byteLength){anInstance(this,DataViewPrototype),anInstance(buffer,ArrayBufferPrototype);var bufferLength=getInternalState(buffer).byteLength,offset=toIntegerOrInfinity(byteOffset);if(offset<0||offset>bufferLength)throw RangeError2("Wrong offset");if(byteLength=byteLength===void 0?bufferLength-offset:toLength(byteLength),offset+byteLength>bufferLength)throw RangeError2(WRONG_LENGTH);setInternalState(this,{buffer,byteLength,byteOffset:offset}),DESCRIPTORS||(this.buffer=buffer,this.byteLength=byteLength,this.byteOffset=offset)},DataViewPrototype=$DataView[PROTOTYPE],DESCRIPTORS&&(addGetter($ArrayBuffer,"byteLength"),addGetter($DataView,"buffer"),addGetter($DataView,"byteLength"),addGetter($DataView,"byteOffset")),redefineAll(DataViewPrototype,{getInt8:function(byteOffset){return get(this,1,byteOffset)[0]<<24>>24},getUint8:function(byteOffset){return get(this,1,byteOffset)[0]},getInt16:function(byteOffset){var bytes=get(this,2,byteOffset,arguments.length>1?arguments[1]:void 0);return(bytes[1]<<8|bytes[0])<<16>>16},getUint16:function(byteOffset){var bytes=get(this,2,byteOffset,arguments.length>1?arguments[1]:void 0);return bytes[1]<<8|bytes[0]},getInt32:function(byteOffset){return unpackInt32(get(this,4,byteOffset,arguments.length>1?arguments[1]:void 0))},getUint32:function(byteOffset){return unpackInt32(get(this,4,byteOffset,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(byteOffset){return unpackIEEE754(get(this,4,byteOffset,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(byteOffset){return unpackIEEE754(get(this,8,byteOffset,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(byteOffset,value){set(this,1,byteOffset,packInt8,value)},setUint8:function(byteOffset,value){set(this,1,byteOffset,packInt8,value)},setInt16:function(byteOffset,value){set(this,2,byteOffset,packInt16,value,arguments.length>2?arguments[2]:void 0)},setUint16:function(byteOffset,value){set(this,2,byteOffset,packInt16,value,arguments.length>2?arguments[2]:void 0)},setInt32:function(byteOffset,value){set(this,4,byteOffset,packInt32,value,arguments.length>2?arguments[2]:void 0)},setUint32:function(byteOffset,value){set(this,4,byteOffset,packInt32,value,arguments.length>2?arguments[2]:void 0)},setFloat32:function(byteOffset,value){set(this,4,byteOffset,packFloat32,value,arguments.length>2?arguments[2]:void 0)},setFloat64:function(byteOffset,value){set(this,8,byteOffset,packFloat64,value,arguments.length>2?arguments[2]:void 0)}});else{if(INCORRECT_ARRAY_BUFFER_NAME=PROPER_FUNCTION_NAME&&NativeArrayBuffer.name!==ARRAY_BUFFER,!fails(function(){NativeArrayBuffer(1)})||!fails(function(){new NativeArrayBuffer(-1)})||fails(function(){return new NativeArrayBuffer,new NativeArrayBuffer(1.5),new NativeArrayBuffer(NaN),INCORRECT_ARRAY_BUFFER_NAME&&!CONFIGURABLE_FUNCTION_NAME})){for($ArrayBuffer=function(length){return anInstance(this,ArrayBufferPrototype),new NativeArrayBuffer(toIndex(length))},$ArrayBuffer[PROTOTYPE]=ArrayBufferPrototype,keys=getOwnPropertyNames(NativeArrayBuffer),j=0;keys.length>j;)(key=keys[j++])in $ArrayBuffer||createNonEnumerableProperty($ArrayBuffer,key,NativeArrayBuffer[key]);ArrayBufferPrototype.constructor=$ArrayBuffer}else INCORRECT_ARRAY_BUFFER_NAME&&CONFIGURABLE_FUNCTION_NAME&&createNonEnumerableProperty(NativeArrayBuffer,"name",ARRAY_BUFFER);setPrototypeOf&&getPrototypeOf(DataViewPrototype)!==ObjectPrototype&&setPrototypeOf(DataViewPrototype,ObjectPrototype),testView=new $DataView(new $ArrayBuffer(2)),$setInt8=uncurryThis(DataViewPrototype.setInt8),testView.setInt8(0,2147483648),testView.setInt8(1,2147483649),(testView.getInt8(0)||!testView.getInt8(1))&&redefineAll(DataViewPrototype,{setInt8:function(byteOffset,value){$setInt8(this,byteOffset,value<<24>>24)},setUint8:function(byteOffset,value){$setInt8(this,byteOffset,value<<24>>24)}},{unsafe:!0})}var INCORRECT_ARRAY_BUFFER_NAME,keys,j,key,testView,$setInt8;setToStringTag($ArrayBuffer,ARRAY_BUFFER);setToStringTag($DataView,DATA_VIEW);module.exports={ArrayBuffer:$ArrayBuffer,DataView:$DataView}}});var require_es_array_buffer_slice=__commonJS({"node_modules/core-js/modules/es.array-buffer.slice.js"(){"use strict";init_define_process_env();init_shim();var $2=require_export(),uncurryThis=require_function_uncurry_this(),fails=require_fails(),ArrayBufferModule=require_array_buffer(),anObject=require_an_object(),toAbsoluteIndex=require_to_absolute_index(),toLength=require_to_length(),speciesConstructor=require_species_constructor(),ArrayBuffer2=ArrayBufferModule.ArrayBuffer,DataView2=ArrayBufferModule.DataView,DataViewPrototype=DataView2.prototype,un$ArrayBufferSlice=uncurryThis(ArrayBuffer2.prototype.slice),getUint8=uncurryThis(DataViewPrototype.getUint8),setUint8=uncurryThis(DataViewPrototype.setUint8),INCORRECT_SLICE=fails(function(){return!new ArrayBuffer2(2).slice(1,void 0).byteLength});$2({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:INCORRECT_SLICE},{slice:function(start,end){if(un$ArrayBufferSlice&&end===void 0)return un$ArrayBufferSlice(anObject(this),start);for(var length=anObject(this).byteLength,first=toAbsoluteIndex(start,length),fin=toAbsoluteIndex(end===void 0?length:end,length),result=new(speciesConstructor(this,ArrayBuffer2))(toLength(fin-first)),viewSource=new DataView2(this),viewTarget=new DataView2(result),index=0;first<fin;)setUint8(viewTarget,index++,getUint8(viewSource,first++));return result}})}});var require_image_processor=__commonJS({"lib-browser-old/shared/image_processor.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_buffer_slice();function browser_handles_orientation(){return $("body").css("imageOrientation")==="from-image"}function reorient_image(_ref){let{orientation,canvas,context}=_ref;if(!browser_handles_orientation()){if(orientation>4){let{width,height}=canvas;canvas.width=height,canvas.height=width}switch(orientation){case 2:context.translate(canvas.width,0),context.scale(-1,1);break;case 3:context.translate(canvas.width,canvas.height),context.rotate(Math.PI);break;case 4:context.translate(0,canvas.height),context.scale(1,-1);break;case 5:context.rotate(.5*Math.PI),context.scale(1,-1);break;case 6:context.rotate(.5*Math.PI),context.translate(0,-canvas.width);break;case 7:context.rotate(.5*Math.PI),context.translate(canvas.height,-canvas.width),context.scale(-1,1);break;case 8:context.rotate(-.5*Math.PI),context.translate(-canvas.height,0);break}}}function get_orientation(_ref2){let{image_url,file,_cb}=_ref2,reader=new FileReader;reader.onload=function(e){let view=new window.DataView(e.target.result);if(view.getUint16(0,!1)!==65496){_cb(-2);return}let length=view.byteLength,offset=2;for(;offset<length;){let marker=view.getUint16(offset,!1);if(offset+=2,marker===65505){if(view.getUint32(offset+=2,!1)!==1165519206){_cb(-1);return}let little=view.getUint16(offset+=6,!1)===18761;offset+=view.getUint32(offset+4,little);let tags=view.getUint16(offset,little);offset+=2;for(let i=0,end=tags,asc=end>=0;asc?i<end:i>end;asc?i++:i--)if(view.getUint16(offset+i*12,little)===274){_cb(view.getUint16(offset+i*12+8,little));return}}else{if((marker&65280)!==65280)break;offset+=view.getUint16(offset,!1)}}_cb(-1)},reader.readAsArrayBuffer(file)}var PREVIEW_MAX_SIZE={WIDTH:800,HEIGHT:600};module.exports=function(_ref3){let{file,image_url,extension,success_callback,fail_callback,progress_bar_hide_fn}=_ref3,mimetype=extension==="png"?"image/png":"image/jpeg",img=document.createElement("img");img.src=image_url,img.onerror=function(){progress_bar_hide_fn(),fail_callback==null||fail_callback()},img.onload=function(){let canvas=document.createElement("canvas"),{width}=img,{height}=img;width>height?width>PREVIEW_MAX_SIZE.WIDTH&&(height*=PREVIEW_MAX_SIZE.WIDTH/width,width=PREVIEW_MAX_SIZE.WIDTH):height>PREVIEW_MAX_SIZE.HEIGHT&&(width*=PREVIEW_MAX_SIZE.HEIGHT/height,height=PREVIEW_MAX_SIZE.HEIGHT),get_orientation({file,_cb(orientation){let context=canvas.getContext("2d");canvas.width=width,canvas.height=height,reorient_image({orientation,canvas,context}),context.drawImage(img,0,0,width,height),file.contents=canvas.toDataURL(mimetype,.8).split(",")[1],success_callback()}})}}}});var require_Widget=__commonJS({"lib-browser-old/core/widgets/Widget.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var events=_interopRequireWildcard(require_events());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var Widget=class extends events.EventEmitter{get_canvas(){return this.canvas}},_default=Widget;exports.default=_default}});var require_widgets=__commonJS({"lib-browser-old/core/widgets/index.js"(exports){"use strict";init_define_process_env();init_shim();require_es_json_stringify();var u=require_u2(),logger=require_logger(),safe_require=require_safe_require(),image_processor=require_image_processor(),editor_consts=require_editor(),Widget=require_Widget().default,b_file_shared=require_b_file_shared(),Lib=require_lib(),status_bar=require_status_bar(),configuration=require_client_config2(),appquery=require_appquery();safe_require.safe_register("./core/widgets",exports);exports.Widget=Widget;exports.get_uploaded_file_id=function(filename,uid){let id="f"+(uid!=null?uid:u.UUID())+"/"+filename;return configuration.is_dedicated&&(id=configuration.environment_name+"/"+id),id};exports.get_uploaded_file_endpoint=function(_ref){let{key,with_protocol,appname}=_ref,without_protocol="//".concat(b_file_shared.get_file_cdn_url(appname)).concat(key);return with_protocol?"https:".concat(without_protocol):without_protocol};function NO_DATA(cb){return cb(null,{})}exports.upload_file=function(file,text,get_additional_data,cb_success,cb_start,cb_fail,limit_size,file_name){var _get_additional_data;(_get_additional_data=get_additional_data)!=null||(get_additional_data=NO_DATA);let upload_url=Lib().location.get_server_base()+"fileupload";function upload_content(fr,contents){var _ref2,_file;let status;cb_start==null||cb_start(),Lib().is_edit_mode()?status_bar.show_general_message(text):status=status_bar.show_progress_line("image uploader");function hide_progress_bar(){Lib().is_edit_mode()?status_bar.hide_general_message():status()}function do_it(){let request_data={success(url){hide_progress_bar(),cb_success(url)},error(xhr){var _err;let err;hide_progress_bar(),xhr.status>=400&&xhr.status<=499&&xhr.responseText.indexOf("Error parsing request body: request entity too large")!==-1&&(err=new u.UserError("FILE_TOO_LARGE")),(_err=err)!=null||(err=Lib().location.response_to_error(xhr)),cb_fail==null||cb_fail(err)},processData:!1,type:"post"};get_additional_data((err,data)=>{if(err)window.alert(logger.human_friendly(err)),request_data.success(null);else{var _data_object$name;Lib().is_edit_mode()&&u.extend(data,{appname:appquery.appname(),app_version:appquery.app_version()});let data_object=u.extend(data,file);(_data_object$name=data_object.name)!=null||(data_object.name=file_name),request_data.data=JSON.stringify(data_object),request_data.contentType="application/json",$.ajax(upload_url,request_data)}})}let extension=(_ref2=file_name||((_file=file)==null?void 0:_file.name))==null?void 0:_ref2.toLowerCase().split(".").pop();if(limit_size&&extension!=="svg")image_processor({file,image_url:fr.result,extension,success_callback(){return do_it()},fail_callback(){return cb_fail==null?void 0:cb_fail()},progress_bar_hide_fn(){return hide_progress_bar()}});else{if(contents)file={contents,name:file_name};else{var _fr$result$split$;file.contents=(_fr$result$split$=fr.result.split(",")[1])!=null?_fr$result$split$:""}do_it()}}if(file.contents)upload_content(void 0,file.contents);else{let fr=new FileReader;fr.onload=()=>upload_content(fr),fr.readAsDataURL(file)}};exports.MakeImageUploader=function(_ref3){var _text,_get_additional_data2;let{input,text,get_additional_data,cb_success,cb_start,cb_fail,limit_size,max_file_size_fn}=_ref3;(_text=text)!=null||(text="We're uploading your image..."),(_get_additional_data2=get_additional_data)!=null||(get_additional_data=NO_DATA),input.change(()=>{let{files}=input[0];if(files.length<1)return;let file=files[0];u.run_once(30,()=>max_file_size_fn==null?void 0:max_file_size_fn(),(_,max_file_size)=>{if(max_file_size&&file.size>max_file_size){let err=new u.UserError("FILE_TOO_LARGE");cb_fail==null||cb_fail(err)}else exports.upload_file(file,text,get_additional_data,cb_success,cb_start,cb_fail,limit_size)})})};exports.ImageUploader=class extends exports.Widget{get get_class(){return"image-uploader"}constructor(file_cb){super(),this.file_cb=file_cb,this.canvas=u.input(void 0,void 0,"file"),exports.MakeImageUploader({input:this.canvas,get_additional_data:null,cb_success:this.file_cb,max_file_size_fn:()=>editor_consts.MAX_FILE_COMPOSER_SIZE})}}}});var require_context_serializer=__commonJS({"lib-browser-old/lang/context_serialization/context_serializer.js"(exports){"use strict";init_define_process_env();init_shim();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_symbol_description();require_es_error_cause();function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var uuid=require_uuid(),b_async=require_b_async3(),core_ds_workflow_utilities=require_core_ds_workflow_utilities(),page_state=require_page_state(),FrozenState=require_FrozenState(),hydrate2=require_hydrate(),Lib=require_lib(),context_serializer=exports;context_serializer.serialize_context=serialize_context;function serialize_context(context,current_eval_node){context=_objectSpread({},context),context.duplicated_from_context=context.object_id,context.object_id=uuid.UUID(),context.duplicated_at="context_serializer.serialize_context",context.frozen_state||(context.frozen_state=new FrozenState(context));let promise;return current_eval_node!=null?promise=context.frozen_state.freeze_node(current_eval_node):promise=b_async.Promise(),promise.then(()=>{var _context$element,_context$event;return{client_state:context.frozen_state.get_client_state(),element_id:(_context$element=context.element)==null?void 0:_context$element.element_id(),uid_generator:context.uid_generator,random_seed:context.random_seed,current_date_time:page_state.get_page_data("Current Date/Time",context).getTime(),timezone_offset:new Date().getTimezoneOffset(),timezone_string:Lib().current_timezone(),inputs_must_be_valid:context.inputs_must_be_valid,advanced_search:context.advanced_search,constraint_messsage:context.constraint_messsage,current_wf_params:core_ds_workflow_utilities.dehydrate_wf_params(context,value=>hydrate2.dehydrate_tree(value)),event_id:(_context$event=context.event)==null?void 0:_context$event.id()}})}}});var require_fileupload=__commonJS({"lib-browser-old/core/widgets/fileupload.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.make_presigned_uploader=make_presigned_uploader;exports.upload_file=upload_file;var _lib=_interopRequireDefault(require_lib()),status_bar=_interopRequireWildcard(require_status_bar()),_appquery=_interopRequireDefault(require_appquery()),context_serializer=_interopRequireWildcard(require_context_serializer()),page_state=_interopRequireWildcard(require_page_state()),u=_interopRequireWildcard(require_u2()),logger=_interopRequireWildcard(require_logger()),_byte=require_byte();function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function upload_file(file,instance,get_additional_data,cb_success,cb_start,cb_fail,cb_progress){cb_start==null||cb_start();let cancelled=!1,xhr=null;function cb(err,data){if(!cancelled)if(err!=null)cb_fail==null||cb_fail(err);else{if(data==null){cb_success==null||cb_success(null);return}let form_data=new FormData;for(let key in data.fields){let value=data.fields[key];form_data.append(key,value)}form_data.append("file",file),xhr=new XMLHttpRequest,xhr.onload=function(){if(xhr.status===204)cb_success==null||cb_success(data.file_url);else{var _err;xhr.status>=400&&xhr.status<=499&&xhr.responseText.indexOf("EntityTooLarge")!==-1&&(err=new u.UserError("FILE_TOO_LARGE")),(_err=err)!=null||(err=(0,_lib.default)().location.response_to_error(xhr)),cb_fail==null||cb_fail(err)}},xhr.onerror=function(){err=(0,_lib.default)().location.response_to_error(xhr),cb_fail==null||cb_fail(err)},xhr.upload.onprogress=function(e){if(e.lengthComputable){let amount=Math.min(e.loaded/file.size,1);cb_progress==null||cb_progress(amount)}},xhr.open("POST",data.url,!0),xhr.send(form_data)}}return get_additional_data((err,data)=>{if(err)window.alert(logger.human_friendly(err)),cb(null,null);else{(0,_lib.default)().is_edit_mode()&&u.extend(data,{appname:_appquery.default.appname(),app_version:_appquery.default.app_version()});let context={element:instance,inputs_must_be_valid:!1,datasources:page_state.get_basic_datasources(instance.element.root())};return context_serializer.serialize_context(context,instance.element).then(serialized_context=>(u.extend(data,{timezone_string:serialized_context.timezone_string,serialized_context,name:file.name,size:file.size,content_type:file.type}),(0,_lib.default)().location.post("server://fileupload/geturl",data,cb)))}}),function(){var _xhr;return cancelled=!0,(_xhr=xhr)==null?void 0:_xhr.abort()}}function make_presigned_uploader(_ref){let{instance,input,get_additional_data,cb_success,cb_start,cb_fail,cb_progress,max_file_size_fn}=_ref,cancel_upload_fn=null,status=null;return input.change(()=>{let{files}=input[0];if(files.length<1)return;let file=files[0];file.size>2*_byte.GIBIBYTE&&logger.warn("very large file upload could crash browser from new memory overhead",{size:file.size}),file.arrayBuffer().then(buffer=>{let clone=new File([buffer],file.name,{type:file.type});u.run_once(30,()=>max_file_size_fn==null?void 0:max_file_size_fn(),(_,max_file_size)=>{if(max_file_size&&clone.size>max_file_size){let err=new u.UserError("FILE_TOO_LARGE");cb_fail==null||cb_fail(err)}else status=status_bar.show_progress_line("image uploader"),cancel_upload_fn=upload_file(clone,instance,get_additional_data,res=>{status(),cb_success==null||cb_success(res)},cb_start,err=>{status(),cb_fail==null||cb_fail(err)},amount=>{status(amount),cb_progress==null||cb_progress(amount)})})})}),function(){var _cancel_upload_fn,_status;(_cancel_upload_fn=cancel_upload_fn)==null||_cancel_upload_fn(),(_status=status)==null||_status(),status=null,cancel_upload_fn=null}}}});var require_sliderinputs=__commonJS({"lib-browser-old/core/core_elements/shared/sliderinputs.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.show_message_for_ios_8_upload_bug=show_message_for_ios_8_upload_bug;var u=_interopRequireWildcard(require_u2()),safe_require=_interopRequireWildcard(require_safe_require());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}safe_require.safe_register("./core/core_elements/shared/sliderinputs",exports);var message_for_ios_8_shown_once=!1;function show_message_for_ios_8_upload_bug(){var _navigator;!message_for_ios_8_shown_once&&u.safe_contains((_navigator=navigator)==null?void 0:_navigator.userAgent,"12A365")&&(message_for_ios_8_shown_once=!0,alert("The iOS version you're using prevents you from uploading files, please upgrade your system and try again."))}}});var require_pictureinputs=__commonJS({"lib-browser-old/core/core_elements/shared/pictureinputs.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.file_inputs_additional_messages=void 0;exports.process_upload_security=process_upload_security;require_es_array_iterator();require_web_dom_collections_iterator();var _is_installed=_interopRequireDefault(require_is_installed()),plugin_registry=_interopRequireWildcard(require_plugin_registry()),element_eval=_interopRequireWildcard(require_element_eval()),safe_require=_interopRequireWildcard(require_safe_require());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}safe_require.safe_register("./core/core_elements/shared/pictureinputs",exports);var file_inputs_additional_messages={get_loading_status:{description:" is loading",ret_btype:"boolean",fn(a,b){return a==null?void 0:a.state("loading")}},get_file_size:{description:"'s file size",ret_btype:"number",fn(a,b){return a==null?void 0:a.state("file_size")}}};exports.file_inputs_additional_messages=file_inputs_additional_messages;function process_upload_security(instance){let data={};if(instance.get_static_property("private")){var _element_eval$evaluat,_element_eval$evaluat2;data.attach_to=(_element_eval$evaluat=element_eval.evaluate_property(instance,"attach_to"))==null||(_element_eval$evaluat2=_element_eval$evaluat._id)==null?void 0:_element_eval$evaluat2.call(_element_eval$evaluat)}else data.public=!0;return add_storage_plugin_data(instance,data),data}function add_storage_plugin_data(instance,data){var _instance$get_static_;let plugin_name=(_instance$get_static_=instance.get_static_property("service"))!=null?_instance$get_static_:"bubble";if(data.service=plugin_name,plugin_name!=="bubble"&&(0,_is_installed.default)(plugin_name)){let plugin=plugin_registry.get_hardcoded_plugin(plugin_name);for(let field_data of plugin.file_upload.fields)data[field_data.name]=element_eval.evaluate_property(instance,field_data.name)}}}});var require_FileInput2=__commonJS({"lib-browser-old/core/core_elements/elements/FileInput.js"(){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();var u=_interopRequireWildcard(require_u2()),property_applications=_interopRequireWildcard(require_property_applications()),runmode_consts=_interopRequireWildcard(require_runmode()),workflow_consts=_interopRequireWildcard(require_workflow()),core_events=_interopRequireWildcard(require_core_events()),widgets=_interopRequireWildcard(require_widgets()),fileupload=_interopRequireWildcard(require_fileupload()),element_utils=_interopRequireWildcard(require_element_utils()),element_transformer=_interopRequireWildcard(require_element_transformer()),inputs=_interopRequireWildcard(require_inputs()),sliderinputs=_interopRequireWildcard(require_sliderinputs()),pictureinputs=_interopRequireWildcard(require_pictureinputs()),logger=_interopRequireWildcard(require_logger()),element_eval=_interopRequireWildcard(require_element_eval()),_elements=require_elements();function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}element_transformer.make_element("FileInput",{display:"File Uploader",category:"input forms",glyph_id:"file_uploader",list_order:10,keyboard_shortcut:null,defaults:{font_size:14,font_color:"#3D3D3D",background_style:"bgcolor",border_style:"solid",border_color:"#BDBDBD",border_roundness:3,border_style_top:"solid",border_width_top:1,border_color_top:"#BDBDBD",border_roundness_top:3,border_style_left:"solid",border_width_left:1,border_color_left:"#BDBDBD",border_roundness_left:3,border_style_bottom:"solid",border_width_bottom:1,border_color_bottom:"#BDBDBD",border_roundness_bottom:3,border_style_right:"solid",border_width_right:1,border_color_right:"#BDBDBD",border_roundness_right:3,border_width:1,font_alignment:"center",padding_horizontal:0,padding_vertical:15,width:200,height:45,use_max_width:!0,max_width:150},updated_default_sizing:{height:48},default_states:inputs.default_states_for_inputs,field_names:u.extend({src:{},placeholder:{default:"Click to upload a file"},mandatory:{},private:{no_states:!0},attach_to:{},service:{no_states:!0},destination:{}},inputs.get_disabled_field_name,inputs.get_auto_binding_field_names,inputs.get_max_file_size_field_name),property_applications(element){return[new property_applications.Dimensions,new property_applications.Background,new property_applications.Border,new property_applications.BoxShadow,new property_applications.Font(".file-input-text"),new property_applications.FontSpacing(".file-input-text"),new property_applications.PaddingText(".file-input-text"),new property_applications.PaddingFields({selector:".file-input-text",minimum_element_version:_elements.PADDING_VERSION,no_vertical_if_legacy_center:!0,allow_legacy:!0}),new property_applications.ResponsiveElement(element),new property_applications.Opacity]},uses_css_responsive:!0,get_html(instance){return"<div></div>"},get_min_width(){return 0},can_defer_drawing(){return!0},initialize(instance){instance.wait_for_visible_lite(()=>{sliderinputs.show_message_for_ios_8_upload_bug();let canvas=instance.get_canvas(),text=$('<div class="file-input-text"></div>');property_applications.apply_css_style(text,{"-moz-box-sizing":"border-box",position:"absolute",top:"0px",overflow:"hidden",width:"100%",height:"100%"}),canvas.append(text);let placeholder_on=u.Box(),input=null;function display_file_name(url){var _input2;if(!url){var _input;placeholder_on(!0),(_input=input)==null||_input.attr("title",null);return}placeholder_on(!1);let url_parts=url.split("/"),filename=url_parts[-1+url_parts.length];text.text(filename),(_input2=input)==null||_input2.attr("title",filename)}if(u.autorun(()=>{placeholder_on()&&text.text(element_eval.evaluate_property(instance,"placeholder"))}),inputs.input_change_autorun(instance,url=>{display_file_name(url)}),instance.run_mode()){let get_additional_data=function(cb){u.run_once(30,()=>pictureinputs.process_upload_security(instance),(err,data)=>{err?cb(err):!data.public&&!data.attach_to?cb(new u.UserError("PRIVATE_FILE")):cb(null,data)})},cb_start=function(){instance.state("loading",!0),instance.state("upload_percent",0)},cb_success=function(url){var _input$0$files$;instance.state("file_size",(_input$0$files$=input[0].files[0])==null?void 0:_input$0$files$.size),instance.state("loading",!1),instance.state("upload_percent",100),display_file_name(url),instance.message("user_submit",url),input[0].value=null},cb_fail=function(err){core_events.handle_uncaught_error({original_error:err,caught_from:workflow_consts.ERROR_SOURCES.ELEMENT,cb(err2){err2&&window.alert(logger.human_friendly(err2)),instance.state("loading",!1),instance.state("upload_percent",0)}})},cb_progress=function(value){instance.state("upload_percent",Math.min(Math.round(value*1e4)/100,100))},get_max_file_size_in_bytes=function(){var _element_eval$evaluat;return((_element_eval$evaluat=element_eval.evaluate_property(instance,"max_size"))!=null?_element_eval$evaluat:0)*1e3*1e3},cancel_upload=function(){var _cancel_upload_fn;(_cancel_upload_fn=cancel_upload_fn)==null||_cancel_upload_fn(),instance.state("loading",!1),instance.state("upload_percent",0),input[0].value=null};var _instance$element$roo;let cancel_upload_fn;input=$('<input type="file"></input>'),canvas.addClass(runmode_consts.CLICKABLE_ELEMENT),canvas.append(input),property_applications.apply_css_style(input,{opacity:0,position:"absolute","z-index":1+text.css("z-index"),top:"0px",width:"100%",height:"100%","font-size":0});let service=instance.get_static_property("service");service&&service!=="bubble"?widgets.MakeImageUploader({input,get_additional_data,cb_success,cb_start,cb_fail,max_file_size_fn:get_max_file_size_in_bytes}):cancel_upload_fn=fileupload.make_presigned_uploader({instance,input,get_additional_data,cb_success,cb_start,cb_fail,cb_progress,max_file_size_fn:get_max_file_size_in_bytes}),((_instance$element$roo=instance.element.root())==null?void 0:_instance$element$roo.get_responsive_version())===0&&element_utils.register_tab_index_listener(instance,tab_index=>{input.attr("tabindex",tab_index)}),element_eval.on_property_change(instance,"disabled",value=>{input[0].disabled=value,property_applications.apply_css_style(input,{cursor:value?"default":"pointer"}),property_applications.apply_css_style(text,{cursor:value?"default":"pointer"}),instance.state("loading")&&value&&cancel_upload()}),inputs.register_focus(instance,input),instance.on_message("set_focus",()=>input.focus()),instance.on_message("cancel_upload",()=>{cancel_upload()})}element_eval.on_property_change(instance,"placeholder",placeholder=>{var _input3;((_input3=input)==null?void 0:_input3.val())==null&&text.text(placeholder)})})},get_starting_content(instance){return instance.run_mode()&&instance.get_static_property("auto_binding")?inputs.get_input_autobind_thing_field(instance):element_eval.evaluate_property(instance,"src")},get_state_value(element,name){if(name==="value")return"file"},get_states(element){return["loading","file_size","upload_percent"]},add_specific_messages(messages,element){u.extend(messages,pictureinputs.file_inputs_additional_messages,{get_upload_percent:{description:"'s upload percentage",section:"States",ret_btype:"number",fn(a,_b){return a==null?void 0:a.state("upload_percent")}}})},need_to_wait_before_checking_validity:!0,content_validated(val,instance){return val||!element_eval.evaluate_property(instance,"mandatory")},change_cursor_style_if_clickable:!1,add_an_invisible_div_on_the_top:!1,is_input:!0,is_file_uploader:!0,contains_group_data:!1})}});var require_groups2=__commonJS({"lib-browser-old/core/core_elements/shared/groups.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();var u=require_u2(),element_workflows=require_element_workflows(),appquery=require_appquery(),property_applications=require_property_applications(),containers=require_containers(),safe_require=require_safe_require(),groups=exports;safe_require.safe_register("./core/core_elements/shared/groups",groups);groups.container_field_names={group_type:{no_states:!0},data_source:{}};groups.state_value_helper_for_group=function(element,name){if(name==="group_data")return element.get_static_property("group_type")};groups.group_field_names={collapse_animation:{no_states:!0,default:!1},animation_type:{no_states:!0,default:"slide"},overflow_scroll:{no_states:!0,default:!1}};groups.group_element_definition={category:"containers",defaults:{bgcolor:"#FFFFFF",background_style:"bgcolor",width:400,height:250},updated_default_sizing:{width:280,height:280},field_names:u.extend({collapse_when_hidden:{no_states:!0,default:!1}},groups.group_field_names,element_workflows.start_workflow_field_names,groups.container_field_names),property_applications(element){return[new property_applications.Dimensions,new property_applications.Background,new property_applications.Border,new property_applications.BoxShadow,new property_applications.ResponsiveContainer(element),new property_applications.ResponsiveElement(element),new property_applications.PaddingFields,new property_applications.Opacity]},get_html(instance){return"<div></div>"},change_cursor_style_if_clickable:!0,can_have_children(){return!0},get_children_canvas(instance){return instance.get_canvas()},contains_group_data:!0,get_state_value(element,name){return groups.state_value_helper_for_group(element,name)},notify_width(instance,width){u.WaitFor(instance.get_children_drawn_key(),()=>{containers.resize_container_width(instance,width)})},get_min_width(element){return 0},events:["ButtonClicked"],is_input:!1,add_an_invisible_div_on_the_top:!1}}});var require_floating_groups=__commonJS({"lib-browser-old/core/core_elements/shared/floating_groups.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_includes();var groups=require_groups2(),Lib=require_lib(),floating_groups=exports;floating_groups.floating_field_names={floating_reference:{default:"top",no_states:!0},floating_reference_horizontal:{default:"none",no_states:!0},floating_reference_horizontal_resp:{default:"left",no_states:!0},float_zindex:{default:"front",no_states:!0},parallax:{default:1,no_states:!0}};floating_groups.check_error_floating_group=function(element,report){if(!["Page","CustomDefinition"].includes(element.parent().type())){let caption;switch(element.parent().type()){case"Page":caption="page";break;case"CustomDefinition":caption="reusable element";break}report(element.display()+": Floating Group must be right under the "+caption+". Instead it is under "+element.parent().display()),groups._check_for_errors_datasource_set_to_self(element,"get_group_data",report)}}}});var require_perf_tools=__commonJS({"lib-browser-old/renderer/solid_utils/perf_tools.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.OptimizedShow=OptimizedShow;var _solidJs=(init_solid(),__toCommonJS(solid_exports));function OptimizedShow(props){return props.isStatic?props.when?()=>props.children:()=>props.fallback:(0,_solidJs.Show)(props)}}});var require_container_utils=__commonJS({"lib-browser-old/core/core_elements/components/utils/container_utils.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.ChildWrapper=ChildWrapper;exports.containerProperties=containerProperties;exports.containerStyling=containerStyling;var _web=(init_web(),__toCommonJS(web_exports)),_perf_tools=require_perf_tools(),_properties=require_properties(),_tmpl$=(0,_web.template)("<div></div>",2),BASE_CONTAINER_CLASS="bubble-r-container",SUB_CONTAINER_SELECTOR="> .".concat(BASE_CONTAINER_CLASS);function containerStyling(shouldAddWrapper){return[new _properties.Style(instance=>{var _instance$child_conta;return(_instance$child_conta=instance.child_container)==null?void 0:_instance$child_conta.get_container_props()},{selector:shouldAddWrapper?SUB_CONTAINER_SELECTOR:void 0})]}function containerProperties(shouldAddWrapper){return shouldAddWrapper?{containerClass:new _properties.Property(instance=>"bubble-r-container-wrapper",{noWaitVisible:!0,fallback:""}),wrappedClass:new _properties.Property(instance=>"".concat(BASE_CONTAINER_CLASS," ").concat(instance.child_container.layout().classes),{noWaitVisible:!0})}:{containerClass:new _properties.Property(instance=>{var _instance$child_conta2;return"".concat(BASE_CONTAINER_CLASS," ").concat((_instance$child_conta2=instance.child_container)==null?void 0:_instance$child_conta2.layout().classes)},{noWaitVisible:!0,fallback:""})}}function ChildWrapper(props){return(0,_web.createComponent)(_perf_tools.OptimizedShow,{get when(){return props.shouldAddWrapper},get fallback(){return props.children},get isStatic(){return props.instance.run_mode()},get children(){let _el$=_tmpl$.cloneNode(!0);return(0,_web.insert)(_el$,()=>props.children),(0,_web.effect)(_p$=>{var _props$wrappedClass;let _v$={[(_props$wrappedClass=props.wrappedClass)!=null?_props$wrappedClass:""]:!0},_v$2=props.childStyles[SUB_CONTAINER_SELECTOR];return _p$._v$=(0,_web.classList)(_el$,_v$,_p$._v$),_p$._v$2=(0,_web.style)(_el$,_v$2,_p$._v$2),_p$},{_v$:void 0,_v$2:void 0}),_el$}})}}});var require_FloatingGroupComponent=__commonJS({"lib-browser-old/core/core_elements/components/FloatingGroupComponent.js"(exports){"use strict";init_define_process_env();init_shim();require_es_symbol_description();require_es_error_cause();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;require_es_array_iterator();require_web_dom_collections_iterator();var _web=(init_web(),__toCommonJS(web_exports)),runmode_consts=_interopRequireWildcard(require_runmode()),property_applications=_interopRequireWildcard(require_property_applications()),_solidJs=(init_solid(),__toCommonJS(solid_exports)),_createElement=require_createElement(),element_styles=_interopRequireWildcard(require_element_styles()),_directives=require_directives(),_container_utils=require_container_utils(),_properties=require_properties(),element_eval=_interopRequireWildcard(require_element_eval()),element_props=_interopRequireWildcard(require_element_props());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var _tmpl$=(0,_web.template)("<div></div>",2);function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var PRESUMED_GRAYOUT_ZINDEX=runmode_consts.POPUP_ZINDEX-1;function FloatingGroupComponent(props){let instance=props.instance;return(0,_solidJs.onMount)(()=>{if(instance.run_mode()){let parallaxFactor=instance.get_static_property("parallax");parallaxFactor!=null&&parallaxFactor!==1&&$(window).on("scroll",function(){window.requestAnimationFrame(function(){property_applications.apply_css_style(instance.canvas,{transform:"translate3d(0,"+(1-parallaxFactor)*$(window).scrollTop()+"px, 0)"})})}),instance.manual_position=!1,instance.on_message("position_element",position=>{instance.manual_position=!0,instance.state("manual_position",{top:"".concat(position.Y,"px"),left:"".concat(position.X,"px"),position:position.position})})}}),(()=>{let _el$=_tmpl$.cloneNode(!0);(0,_web.use)(_directives.defaultEventHandlers,_el$,()=>props.instance);let _ref$=props.ref;return typeof _ref$=="function"?(0,_web.use)(_ref$,_el$):props.ref=_el$,(0,_web.insert)(_el$,(0,_web.createComponent)(_container_utils.ChildWrapper,props)),(0,_web.effect)(_p$=>{let _v$=props.id,_v$2=props.style,_v$3=_objectSpread(_objectSpread({},props.classList),{},{"floating-group":!0,[props.containerClass]:!0});return _v$!==_p$._v$&&(0,_web.setAttribute)(_el$,"id",_p$._v$=_v$),_p$._v$2=(0,_web.style)(_el$,_v$2,_p$._v$2),_p$._v$3=(0,_web.classList)(_el$,_v$3,_p$._v$3),_p$},{_v$:void 0,_v$2:void 0,_v$3:void 0}),_el$})()}var _default=(0,_createElement.createElement)(FloatingGroupComponent,element=>({shouldAddWrapper:element.should_add_extra_wrapper()}),(element,_ref)=>{let{shouldAddWrapper}=_ref;function getZIndex(){return element.get_static_property("float_zindex")==="back"?0:PRESUMED_GRAYOUT_ZINDEX-runmode_consts.FLOATING_GROUP_ZINDEX_OFFSET+element.get_zindex()}let parent=element.parent();return{properties:(0,_container_utils.containerProperties)(shouldAddWrapper),styles:[new _properties.Style(instance=>{let props={width:"initial","min-width":element_props.min_width_css(instance),"min-height":element_props.min_height_css(instance)},maxWidth=element_props.max_width_css(instance),maxHeight=element_props.max_height_css(instance);for(let side of["left","right","top","bottom"])props[side]=element_eval.evaluate_property(instance,"margin_".concat(side));if(element.fit_width()){props.width="auto";let boundedWidth="calc(100% - ".concat(props.left+props.right,"px)");maxWidth!=null?props["max-width"]=["min(".concat(maxWidth,", ").concat(boundedWidth,")"),maxWidth]:props["max-width"]=boundedWidth}else props.width="initial",props["max-width"]=maxWidth;if(element.fit_height()){props.height="auto";let boundedHeight="calc(100% - ".concat(props.top+props.bottom,"px)");maxHeight!=null?instance.run_mode()?props["max-height"]=["min(".concat(maxHeight,", ").concat(boundedHeight,")"),maxHeight]:props["max-height"]=maxHeight:instance.run_mode()&&(props["max-height"]=boundedHeight)}else props.height="initial",props["max-height"]=maxHeight;switch(element.get_static_property("floating_reference_horizontal_resp")){case"left":element.fit_width()?props.right="unset":props["margin-right"]="auto";break;case"right":element.fit_width()?props.left="unset":props["margin-left"]="auto"}let floatingRefVert=element.get_static_property("floating_reference");switch(props.position=floatingRefVert==="none"||!instance.run_mode()||parent.type()!=="Page"?"absolute":"fixed",floatingRefVert){case"top":element.fit_height()&&(props.bottom="unset");break;case"bottom":element.fit_height()?props.top="unset":parent.type()==="Page"?(props.height="calc(100".concat(instance.run_mode()?"vh":"%"," - ").concat(props.top+props.bottom,"px)"),props.top="unset"):props["margin-top"]="auto";break;case"both":parent.type()==="Page"&&(props["margin-top"]=props["margin-bottom"]="auto"),props["overflow-y"]="auto";break;case"none":props.bottom="unset"}return props["z-index"]=getZIndex(),props},{outerPositioning:!0,noWaitVisible:!0}),new _properties.Style(instance=>{var _instance$state;return(_instance$state=instance.state("manual_position"))!=null?_instance$state:{}},{alwaysDynamic:!0}),new _properties.Style(instance=>{if(!instance.is_visible())return{display:"none"}},{alwaysDynamic:!0,noWaitVisible:!0,notInStylesheet:!0,outerPositioning:!0}),...(0,_container_utils.containerStyling)(shouldAddWrapper),...element_styles.basicStyling(element)]}});exports.default=_default}});var require_FloatingGroup2=__commonJS({"lib-browser-old/core/core_elements/elements/FloatingGroup.js"(){"use strict";init_define_process_env();init_shim();require_es_weak_map();require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_includes();var u=_interopRequireWildcard(require_u2()),property_applications=_interopRequireWildcard(require_property_applications()),element_transformer=_interopRequireWildcard(require_element_transformer()),element_workflows=_interopRequireWildcard(require_element_workflows()),runmode_consts=_interopRequireWildcard(require_runmode()),groups=_interopRequireWildcard(require_groups2()),floating_groups=_interopRequireWildcard(require_floating_groups()),element_eval=_interopRequireWildcard(require_element_eval()),element_props=_interopRequireWildcard(require_element_props()),_FloatingGroupComponent=_interopRequireDefault(require_FloatingGroupComponent());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var PRESUMED_GRAYOUT_ZINDEX=runmode_consts.POPUP_ZINDEX-1;element_transformer.make_element("FloatingGroup",{display:"Floating Group",category:"containers",glyph_id:"floating_group",list_order:5,keyboard_shortcut:null,defaults:{floating_reference:"top",width:400,height:250},updated_default_sizing:{width:320},field_names:u.extend({},floating_groups.floating_field_names,element_workflows.start_workflow_field_names,groups.container_field_names),property_applications(element){return[new property_applications.Dimensions,new property_applications.Background,new property_applications.Border,new property_applications.BoxShadow,new property_applications.ResponsiveContainer(element),new property_applications.ResponsiveElement(element),new property_applications.PaddingFields,new property_applications.Opacity]},uses_css_responsive:!0,solid_component:_FloatingGroupComponent.default,attach_to_body(instance){return instance.run_mode()&&!this.added_to_container(instance.element)},can_fit_width:!0,can_fit_height:!0,added_to_container(element){var _element$parent;return((_element$parent=element.parent())==null?void 0:_element$parent.type())!=="Page"},not_draggable(element){var _element$root;return((_element$root=element.root())==null?void 0:_element$root.get_responsive_version())>0},goes_on_document(element){return element==null?!0:this.not_draggable(element)},get_min_width(){return 0},goes_on_document_for_drawing(){return!0},position_canvas(to_position,instance){let{element}=instance,parent=instance.element.parent();function get_zindex(){if(element.get_static_property("float_zindex")==="back")return 0;{let zindex,greyout_element=$(".greyout");return greyout_element.length===0?zindex=PRESUMED_GRAYOUT_ZINDEX-runmode_consts.FLOATING_GROUP_ZINDEX_OFFSET:zindex=greyout_element.css("z-index")-runmode_consts.FLOATING_GROUP_ZINDEX_OFFSET,(!zindex||zindex<=0)&&(zindex=2),zindex+instance.element.get_zindex()}}instance.wait_for_visible_lite(()=>{if(instance.autorun(()=>{let props={"margin-left":"","margin-right":"","margin-top":"","margin-bottom":"",width:"initial","min-width":element_props.min_width_css(instance),"min-height":element_props.min_height_css(instance)},max_width=element_props.max_width_css(instance),max_height=element_props.max_height_css(instance);for(let side of["left","right","top","bottom"])props[side]=element_eval.evaluate_property(instance,"margin_".concat(side));if(element.fit_width()){props.width="auto";let bounded_width="calc(100% - ".concat(props.left+props.right,"px)");max_width!=null?props["max-width"]=u.apply_css_fallbacks("max-width",["min(".concat(max_width,", ").concat(bounded_width,")"),max_width]):props["max-width"]=bounded_width}else props.width="initial",props["max-width"]=max_width!=null?max_width:"";if(element.fit_height()){props.height="auto";let bounded_height="calc(100% - ".concat(props.top+props.bottom,"px)");max_height!=null?props["max-height"]=u.apply_css_fallbacks("max-height",["min(".concat(max_height,", ").concat(bounded_height,")"),max_height]):props["max-height"]=bounded_height}else props.height="initial",props["max-height"]=max_height!=null?max_height:"";switch(element.get_static_property("floating_reference_horizontal_resp")){case"left":element.fit_width()?props.right="unset":props["margin-right"]="auto";break;case"right":element.fit_width()?props.left="unset":props["margin-left"]="auto";break}let floating_reference_vert=element.get_static_property("floating_reference");props.position=floating_reference_vert==="none"||!instance.run_mode()||parent.type()!=="Page"?"absolute":"fixed";let overflow_y="";switch(floating_reference_vert){case"top":element.fit_height()&&(props.bottom="unset");break;case"bottom":element.fit_height()?props.top="unset":parent.type()==="Page"?(props.height="calc(100".concat(instance.run_mode()?"vh":"%"," - ").concat(props.top+props.bottom,"px)"),props.top="unset"):props["margin-top"]="auto";break;case"both":parent.type()==="Page"&&(props["margin-top"]=props["margin-bottom"]="auto"),overflow_y="auto";break;case"none":props.bottom="unset";break}instance.run_mode()&&to_position.css("overflow-y",overflow_y),props["z-index"]=get_zindex(),to_position.css(props)}),!instance.run_mode()||parent.type()!=="Page"?(instance.container.container_canvas.append(to_position),instance.edit_mode()&&(instance.container.setup_margins(instance),instance.container.setup_padding(instance))):$("body").append(to_position),to_position.addClass("floating-group"),instance.run_mode()){let parallax_factor=instance.get_static_property("parallax");[null,void 0,1].includes(parallax_factor)||$(window).on("scroll",()=>{window.requestAnimationFrame(()=>{property_applications.apply_css_style(to_position,{transform:"translate3d(0,"+(1-parallax_factor)*$(window).scrollTop()+"px, 0)"})})})}})},can_defer_drawing(){return!0},register(instance){},initialize(instance){},check_for_errors(element,report){return floating_groups.check_error_floating_group(element,report)},is_input:!1,contains_group_data:!0,uses_inset_instead_of_margin:!0,add_an_invisible_div_on_the_top:!1,get_html(instance){return"<div></div>"},change_cursor_style_if_clickable:!0,can_have_children(){return!0},get_children_canvas(instance){return instance.get_canvas()},get_state_value(element,name){return groups.state_value_helper_for_group(element,name)},get_private_messages(){return["child_movement","position_element"]},events:["ButtonClicked"]})}});var require_GoogleMaps2=__commonJS({"lib-browser-old/core/core_elements/elements/GoogleMaps.js"(){"use strict";init_define_process_env();init_shim();require_es_regexp_to_string();require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_includes();var u=require_u2(),property_applications=require_property_applications(),b_location=require_b_location(),location_lookups=require_location_lookups(),google_maps=require_google_maps(),geolocation_consts=require_geolocation(),logger=require_logger(),Lib=require_lib(),appquery=require_appquery(),btypes=require_btypes(),element_workflows=require_element_workflows(),element_utils=require_element_utils(),element_transformer=require_element_transformer(),element_optional_utils=require_element_optional_utils(),debounce=require_debounce(),apps_utilities=require_apps_utilities(),dropdowns=require_dropdowns(),image_utils=require_image_utils(),element_eval=require_element_eval(),{PADDING_VERSION}=require_elements(),_map_loaded_already=!1,deleted_maps=[],DEFAULT_CENTER=geolocation_consts.SAMPLE_VALUE,DEFAULT_ZOOM=10,USE_EVALED_PROPS="use_evaled_props";function get_location(coordinates){if(coordinates=btypes.get("geographic_address").cast(coordinates),!!b_location.ensure_valid_location(coordinates))return coordinates=b_location.ensure_valid_location(coordinates,!0),coordinates}function to_gmaps_location(coordinates){if(coordinates==null)return;let{lat,lng}=coordinates;if(lat!=null&&lng!=null)return new window.google.maps.LatLng(lat,lng)}function get_backup_center(try_current_geo){let destination;if(apps_utilities.is_test(appquery.app().id()))return destination=get_location(DEFAULT_CENTER),destination;let current_position=geolocation_consts.SAMPLE_VALUE;if(try_current_geo)try{current_position=location_lookups.get_current_geographic_position()}catch(error){current_position=geolocation_consts.SAMPLE_VALUE}return current_position?destination=get_location(current_position):destination=get_location(DEFAULT_CENTER),destination}function hash_marker(_ref){let{position,id,icon}=_ref;return(position==null?void 0:position.toString())+(id!=null?id:"")+(icon!=null?icon:"")}element_transformer.make_element("GoogleMap",{display:"Map",category:"visual elements",glyph_id:"map",list_order:9,keyboard_shortcut:null,defaults:{width:450,height:350,collapse_margin:500},field_names:{marker_type:{default:"single",no_states:!0},marker_data_type:{no_states:!0},data_source:{no_states:!0},location_field:{no_states:!0},show_info_window:{default:"no",no_states:!0},marker_caption_expression:{},autoclose:{no_states:!0},map_type:{default:"ROADMAP",no_states:!0,in_style:!0},map_style:{default:"normal",in_style:!0},custom_style:{in_style:!0},allow_zoom_drag:{default:!0},disable_zoom_scroll:{default:!1,no_states:!0},manual_setting:{default:!1,no_states:!0},center:{no_states:!0},initial_zoom:{default:10,no_states:!0},use_customized_marker_icon:{default:!1,no_states:!0},use_customized_marker_icon_for_list:{default:"no",no_states:!0},custom_marker_icon:{no_states:!0},custom_marker_field:{no_states:!0},custom_selected_icon:{no_states:!0,default:"no"},custom_selected_icon_image:{no_states:!0},custom_selected_icon_field:{no_states:!0},keep_proportion_resize:{no_states:!0}},property_applications(element){return[new property_applications.Dimensions,new property_applications.Border,new property_applications.BoxShadow,new property_applications.Padding,new property_applications.PaddingFields({minimum_element_version:PADDING_VERSION,allow_legacy:!0}),new property_applications.ResponsiveElement(element),new property_applications.Opacity]},uses_css_responsive:!0,can_fix_aspect_ratio(){return!0},get_html(instance){return"<div></div>"},get_min_width(){return 0},can_defer_drawing(){return!0},register(instance){let google_map_api_loaded=google_maps.load_google_map_api();instance.currently_displayed_markers={},instance.draw_the_list_once=!1,instance.run_mode()&&(instance.on_message("set_marker_data",new_list=>{instance.state("datasource_changed_by_workflow_action",!0),instance.draw_the_list_once=!1,instance.state("marker_data",new_list)}),instance.on_message("clear_marker_data",()=>{instance.state("datasource_changed_by_workflow_action",!1),instance.draw_the_list_once=!1}),instance.autorun(()=>{if(!instance.state("datasource_changed_by_workflow_action")){let data_source;if(instance.run_mode()){var _element_eval$evaluat;data_source=(_element_eval$evaluat=element_eval.evaluate_property(instance,"data_source"))!=null?_element_eval$evaluat:null}else if(instance.element.property("data_source").is_static()){var _element_eval$evaluat2;data_source=(_element_eval$evaluat2=element_eval.evaluate_property(instance,"data_source"))!=null?_element_eval$evaluat2:null}instance.state("marker_data",data_source)}}),element_eval.on_property_change(instance,"use_customized_marker_icon_for_list",val=>{val==="upload"&&element_eval.evaluate_property(instance,"custom_marker_icon")}),element_eval.on_property_change(instance,"custom_selected_icon",val=>{val==="upload"&&element_eval.evaluate_property(instance,"custom_selected_icon_image")}),instance.state(USE_EVALED_PROPS,!0),instance.on_message("map_adjust_zoom",props=>{props.manual_setting?(instance.state(USE_EVALED_PROPS,!1),instance.state("manual_setting",null),instance.state("manual_setting",!0),instance.state("initial_zoom",props.initial_zoom),instance.state("center",props.center)):instance.state(USE_EVALED_PROPS,!0)}),instance.autorun(()=>{if(!instance.state(USE_EVALED_PROPS))return;let manual_setting=element_eval.evaluate_property(instance,"manual_setting"),initial_zoom=element_eval.evaluate_property(instance,"initial_zoom"),center=element_eval.evaluate_property(instance,"center");instance.draw_the_list_once=!1,instance.state("manual_setting",null),instance.state("manual_setting",manual_setting),instance.state("initial_zoom",initial_zoom),instance.state("center",center)}),u.WaitFor(google_map_api_loaded,()=>{instance.autorun(()=>{this._process_markers(instance)}),instance.original_state_saver=instance.autorun(()=>{let{center,zoom}=this._get_center_and_zoom(instance);instance.state("map_center_address",center),instance.state("zoom_level",zoom)})}),instance.on_message("set_marker_selection",to_select=>{instance.state("currently_selected_marker",to_select)}))},initialize(instance){instance.wait_for_visible_lite(()=>{var _instance$currently_d;let google_map_api_loaded=google_maps.load_google_map_api();(_instance$currently_d=instance.currently_displayed_markers)!=null||(instance.currently_displayed_markers={});let canvas=instance.get_canvas();if(instance.thumbnail_mode()){canvas.css({"background-color":"#E6E6E6"});return}let map=null;u.WaitFor(google_map_api_loaded,()=>{let build=()=>{map=this._get_map(instance,{height:"100%",width:"100%",position:"absolute",top:0,left:0,right:0,bottom:0}),instance.edit_mode()&&element_utils.do_add_an_invisible_div_on_the_top(instance);let size_observer=new ResizeObserver(entries=>window.google.maps.event.trigger(map,"resize"));size_observer.observe(canvas[0]),instance.on_destroy(()=>size_observer.disconnect());let aspect_ratio_canvas=null;instance.autorun(()=>{if(instance.element.has_fixed_aspect_ratio()){var _aspect_ratio_canvas;(_aspect_ratio_canvas=aspect_ratio_canvas)!=null||(aspect_ratio_canvas=u.div("",canvas)),aspect_ratio_canvas.css("height",0),instance.autorun(()=>{let ratio=instance.element.get_static_property("aspect_ratio_height")/instance.element.get_static_property("aspect_ratio_width");aspect_ratio_canvas.css("padding-top","".concat(ratio*100,"%"))})}else{var _aspect_ratio_canvas2;(_aspect_ratio_canvas2=aspect_ratio_canvas)==null||_aspect_ratio_canvas2.remove(),aspect_ratio_canvas=null}}),element_eval.pre_cache(instance,["four_border_style","border_width","border_style","padding_vertical","padding_horizontal"]),instance.autorun(()=>{this._refresh_border(instance,map)}),element_eval.on_property_change(instance,["allow_zoom_drag","map_style","custom_style","disable_zoom_scroll"],props=>{this._handle_map_option_change(map,props)}),element_eval.on_property_change(instance,"map_type",map_type=>{map.setMapTypeId(window.google.maps.MapTypeId[map_type])}),instance.autorun(()=>{this._render_markers(instance,map)}),instance.autorun(()=>{this._set_center_and_zoom(instance,map)})};instance.wait_for_visible(()=>{instance.setTimeout(build,1)})})})},change_cursor_style_if_clickable:!1,add_an_invisible_div_on_the_top:!0,is_input:!1,contains_group_data:!1,events:["MapMarkerClicked"],get_states(element){return["currently_selected_marker","map_center_address","zoom_level"]},add_specific_messages(messages,element){let marker=element.get_state_value("currently_selected_marker");marker&&u.extend(messages,{get_currently_selected_marker:{description:"'s current marker",section:"States",ret_btype:marker,fn(a,b){var _a$state;return(_a$state=a==null?void 0:a.state("currently_selected_marker"))!=null?_a$state:this.ret_btype_null()}}}),u.extend(messages,{get_map_center_address:{description:"'s center address",section:"States",ret_btype:"geographic_address",fn(a,b){var _a$state2;return(_a$state2=a==null?void 0:a.state("map_center_address"))!=null?_a$state2:this.ret_btype_null()}},get_zoom_level:{description:"'s zoom level",section:"States",ret_btype:"number",fn(a,b){var _a$state3;return(_a$state3=a==null?void 0:a.state("zoom_level"))!=null?_a$state3:this.ret_btype_null()}}})},get_messages(element){return["set_marker_data","clear_marker_data","map_adjust_zoom","set_marker_selection"]},get_state_value(element,name){switch(name){case"currently_selected_marker":return element.get_static_property("marker_data_type");case"map_center_address":return"geographic_address";case"get_zoom_level":return"number"}},get_injected_value(element){return element.get_static_property("marker_data_type")},get_injected_display(){return"Current marker"},use_injected_datasource(node){return dropdowns.use_injected_datasource("marker_caption_expression",node)},check_for_errors(element,report){if(element.get_static_property("map_style",!0)==="_custom"&&element.get_static_property("custom_style",!0)!=null)try{return u.json_parse(element.get_static_property("custom_style",!0))}catch(e){return report(element.display()+": the custom style cannot be parsed as a JSON object")}},jquery_plugins(){return["google_map_styles.js"]},_refresh_border(instance,map){for(let prop of["four_border_style","border_width","border_style","padding_vertical","padding_horizontal"])element_eval.evaluate_property(instance,prop);for(let border_location of["_top","_right","_bottom","_left"])element_eval.evaluate_property(instance,"border_style"+border_location),element_eval.evaluate_property(instance,"border_width"+border_location);return window.google.maps.event.trigger(map,"resize")},_handle_map_option_change(map,_ref2){let{allow_zoom_drag,disable_zoom_scroll,map_style,custom_style}=_ref2,mapOptions={};if(map_style&&!["normal","_custom"].includes(map_style))mapOptions.styles=element_optional_utils.google_map_styles[map_style].data;else if(map_style==="_custom")try{mapOptions.styles=u.json_parse(custom_style)}catch(error){mapOptions.styles=null}else mapOptions.styles=null;return mapOptions.disableDefaultUI=!allow_zoom_drag,mapOptions.scrollwheel=allow_zoom_drag&&!disable_zoom_scroll,mapOptions.draggable=allow_zoom_drag,mapOptions.disableDoubleClickZoom=!allow_zoom_drag,map.setOptions(mapOptions)},_get_map(instance,map_css){let map_wrapper,{canvas}=instance,map=null;if(deleted_maps.length){let deleted_map=deleted_maps.pop();map=deleted_map.map,map_wrapper=deleted_map.map_wrapper,canvas.append(map_wrapper)}else{let create_map=function(){map_wrapper=u.div("map-wrapper",canvas),property_applications.apply_css_style(map_wrapper,map_css),map=new window.google.maps.Map(map_wrapper[0],{streetViewControl:!1})};if(google_maps.using_bubble_key()){if(window.glrl_key_status){logger.owner_error(geolocation_consts.RATE_MAP_LIMIT_MESSAGE);return}create_map(),Lib().location.post("server://user/m/gmap",{appname:Lib().appname(),mode:u.is_edit_mode()?"edit":"run",first:_map_loaded_already?"no":"yes"},(err,ret)=>{if(err)return logger.log(err);ret||(window.glrl_key_status=!0)}),_map_loaded_already=!0}else create_map()}map_wrapper[0].id=instance.element_id()+"_"+u.LUID()+"_map_wrapper_"+instance.responsive_mode();function update_map_center(map2,instance2){let center=map2.getCenter();if(center){let wrapped_center=new window.google.maps.LatLng(center.lat(),center.lng(),!1);return instance2.state("map_center_address",()=>b_location.from_address({lat:wrapped_center.lat(),lng:wrapped_center.lng()}))}}let debounce_update_map_center=debounce(update_map_center,300);if(instance.run_mode()){var _instance$original_st;(_instance$original_st=instance.original_state_saver)==null||_instance$original_st.destroy(),window.google.maps.event.addListener(map,"click",()=>instance.state("currently_selected_marker",null)),window.google.maps.event.addListener(map,"idle",()=>debounce_update_map_center(map,instance)),window.google.maps.event.addListener(map,"center_changed",()=>debounce_update_map_center(map,instance)),window.google.maps.event.addListener(map,"zoom_changed",()=>instance.state("zoom_level",map.getZoom()))}return instance.on_destroy(()=>deleted_maps.push({map,map_wrapper})),map},_get_center_and_zoom(instance){let center;if(instance.state("manual_setting")){var _center;return center=get_location(instance.state("center")),(_center=center)!=null||(center=get_backup_center(!1)),{center,zoom:instance.state("initial_zoom"),recenter_ui:!0}}let marker_type=element_eval.evaluate_property(instance,"marker_type"),default_to_user_loc=marker_type==="none"||instance.edit_mode(),initial_position;if(marker_type==="none"||marker_type==="single"){var _initial_position;initial_position=get_location(instance.state("marker_data")),(_initial_position=initial_position)!=null||(initial_position=get_backup_center(default_to_user_loc));let initial_zoom=instance.get_static_property("initial_zoom");return{center:initial_position,zoom:initial_zoom,recenter_ui:!0}}else{let processed_markers=instance.state("processed_markers");if(processed_markers==null||u.is_empty(processed_markers))return initial_position=get_backup_center(default_to_user_loc),{center:initial_position,zoom:DEFAULT_ZOOM,recenter_ui:!instance.draw_the_list_once};{var _initial_position2;let key=Object.keys(processed_markers)[0];initial_position=processed_markers[key].position,initial_position&&(initial_position=b_location.from_address({lat:initial_position.lat(),lng:initial_position.lng()})),(_initial_position2=initial_position)!=null||(initial_position=get_backup_center(default_to_user_loc));let do_recenter=!1,zoom=null;return Object.keys(processed_markers).length===1&&(do_recenter=!0,zoom=DEFAULT_ZOOM),{center:initial_position,zoom,recenter_ui:do_recenter}}}},_set_center_and_zoom(instance,map){let{center,zoom,recenter_ui}=this._get_center_and_zoom(instance);if(recenter_ui){let gmaps_center=to_gmaps_location(center);gmaps_center!=null&&(map.getCenter()?map.panTo(gmaps_center):map.setCenter(gmaps_center)),map.setZoom(zoom)}else if(instance.get_static_property("marker_type")==="list"){let manual_setting=element_eval.evaluate_property(instance,"manual_setting"),bounds=instance.state("bounds");!manual_setting&&!instance.draw_the_list_once&&(instance.draw_the_list_once=!0,map.fitBounds(bounds),map.getZoom()>18&&map.setZoom(16))}window.google.maps.event.trigger(map,"center_changed"),window.google.maps.event.trigger(map,"zoom_changed")},_process_markers(instance){let marker_data_type=element_eval.evaluate_property(instance,"marker_data_type"),custom_btype=btypes.get(marker_data_type),get_location_fn,icon_message,selected_icon_message;if(marker_data_type==="geographic_address")get_location_fn=x=>custom_btype.cast(x);else{let location_field=element_eval.evaluate_property(instance,"location_field");if(location_field){let location_message=custom_btype.get_message(location_field);get_location_fn=location_message==null?void 0:location_message.evaluate}icon_message=custom_btype.get_message(element_eval.evaluate_property(instance,"custom_marker_field")),selected_icon_message=custom_btype.get_message(element_eval.evaluate_property(instance,"custom_selected_icon_field"))}let markers_data=instance.state("marker_data"),processed_markers={};if(get_location_fn!=null)for(let bubble_marker_object of(_markers_data$all=markers_data==null||(_markers_data$all2=markers_data.all)==null?void 0:_markers_data$all2.call(markers_data))!=null?_markers_data$all:[]){var _markers_data$all,_markers_data$all2;let coordinates=get_location_fn(bubble_marker_object);if(coordinates){var _bubble_marker_object;let processed_marker={position:to_gmaps_location(get_location(coordinates)),bubble_object:bubble_marker_object,id:(_bubble_marker_object=bubble_marker_object._id)==null?void 0:_bubble_marker_object.call(bubble_marker_object),bubble_marker_equals:other=>custom_btype.equals(bubble_marker_object,other)};if(!processed_marker.position)continue;if(marker_data_type!=="geographic_address"&&["on_click","always"].includes(instance.get_static_property("show_info_window"))){let context=instance.get_injected_context(bubble_marker_object,this.get_injected_value(instance.element));processed_marker.title=element_eval.eval_property_with_states(instance.element,"marker_caption_expression",context)}instance.get_static_property("use_customized_marker_icon_for_list")==="upload"?processed_marker.icon=element_eval.evaluate_property(instance,"custom_marker_icon"):instance.get_static_property("use_customized_marker_icon_for_list")==="field"&&marker_data_type!=="geographic_address"&&(processed_marker.icon=image_utils.optimize_image(icon_message.evaluate(bubble_marker_object),30,30,{},!1,!0)),instance.get_static_property("custom_selected_icon")==="upload"?processed_marker.selected_icon=element_eval.evaluate_property(instance,"custom_selected_icon_image"):instance.get_static_property("custom_selected_icon")==="field"&&marker_data_type!=="geographic_address"?processed_marker.selected_icon=image_utils.optimize_image(selected_icon_message.evaluate(bubble_marker_object),30,30,{},!1,!0):processed_marker.selected_icon=null,processed_markers[hash_marker(processed_marker)]=processed_marker}}instance.state("processed_markers",processed_markers)},_add_marker(instance,map,marker_data,display_options){let{position,icon}=marker_data,{animation,add_event_listener}=display_options,options={position,map};animation&&!apps_utilities.is_test(appquery.app().id())&&(options.animation=window.google.maps.Animation.DROP),icon&&(options.icon=icon);let marker=new window.google.maps.Marker(options),hash=hash_marker(marker_data);if(instance.currently_displayed_markers[hash]={marker},add_event_listener){var _instance$currently_d2,_instance$currently_d3;let infowindow=null;if(marker_data!=null&&marker_data.title){instance.currently_displayed_markers[hash].infowindow?infowindow=instance.currently_displayed_markers[hash].infowindow:(infowindow=new window.google.maps.InfoWindow,instance.currently_displayed_markers[hash].infowindow=infowindow);let title_div=u.div("infowindow-content");title_div.text(marker_data.title),title_div[0].style.padding="3px",title_div[0].style["font-family"]="Lato",title_div[0].style.color="rgb(39, 39, 39)",infowindow.setContent(title_div[0]);let show_info_window=instance.get_static_property("show_info_window"),autoclose=instance.get_static_property("autoclose");show_info_window==="always"&&infowindow.open(map,marker),u.autorun_top(()=>{instance.currently_displayed_markers[hash].infowindow_ar=instance.autorun(()=>{marker_data.bubble_marker_equals(instance.state("currently_selected_marker"))?show_info_window!=="no"&&infowindow.open(map,marker):show_info_window==="on_click"&&autoclose&&infowindow!=null&&infowindow.close()})})}(_instance$currently_d3=(_instance$currently_d2=instance.currently_displayed_markers[hash]).event_listener)!=null||(_instance$currently_d2.event_listener=window.google.maps.event.addListener(marker,"click",()=>{instance.state("currently_selected_marker",marker_data.bubble_object),infowindow&&infowindow.open(map,marker),element_workflows.run_element_workflow(instance,"MapMarkerClicked")}))}return marker},_remove_markers(instance,list){for(let hash in list){var _instance$currently_d4;let data=list[hash];data.marker.setMap(null),data.event_listener&&window.google.maps.event.removeListener(data.event_listener),(_instance$currently_d4=instance.currently_displayed_markers[hash].infowindow_ar)==null||_instance$currently_d4.destroy(),delete instance.currently_displayed_markers[hash]}},_render_markers(instance,map){let marker_type=element_eval.evaluate_property(instance,"marker_type");marker_type==="none"&&this._remove_markers(instance.currently_displayed_markers);let custom_marker_icon;if(marker_type==="single"){this._remove_markers(instance,instance.currently_displayed_markers);let marker_location=to_gmaps_location(get_location(instance.state("marker_data")));instance.get_static_property("use_customized_marker_icon")&&(custom_marker_icon=element_eval.evaluate_property(instance,"custom_marker_icon")),marker_location?this._add_marker(instance,map,{position:marker_location,icon:custom_marker_icon},{animation:!1,add_event_listener:!0}):instance.edit_mode()&&this._add_marker(instance,map,{position:to_gmaps_location(get_backup_center(!0)),icon:custom_marker_icon},{animation:!0})}if(marker_type==="list")if(instance.run_mode()){let processed_markers=instance.state("processed_markers"),markers_to_delete={};for(let hash in instance.currently_displayed_markers){let marker=instance.currently_displayed_markers[hash];processed_markers[hash]||(markers_to_delete[hash]=marker)}this._remove_markers(instance,markers_to_delete);let bounds=new window.google.maps.LatLngBounds;for(let hash in processed_markers){let processed_marker=processed_markers[hash],marker;if(instance.currently_displayed_markers[hash]?marker=instance.currently_displayed_markers[hash].marker:marker=this._add_marker(instance,map,processed_marker,{animation:!1,add_event_listener:!0}),bounds.extend(marker.position),processed_marker.selected_icon!=null){let _showing_selected=!1;instance.autorun(()=>{processed_marker.bubble_marker_equals(instance.state("currently_selected_marker"))?_showing_selected||(_showing_selected=!0,marker.setIcon(processed_marker.selected_icon)):_showing_selected&&(_showing_selected=!1,marker.setIcon(processed_marker.icon))})}}instance.state("bounds",bounds)}else this._remove_markers(instance,instance.currently_displayed_markers),instance.get_static_property("use_customized_marker_icon_for_list")==="upload"&&(custom_marker_icon=element_eval.evaluate_property(instance,"custom_marker_icon")),this._add_marker(instance,map,{position:to_gmaps_location(get_backup_center(!0)),icon:custom_marker_icon},{animation:!0})}})}});var require_GroupComponent=__commonJS({"lib-browser-old/core/core_elements/components/GroupComponent.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_symbol_description();require_es_error_cause();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_array_iterator();require_web_dom_collections_iterator();var _web=(init_web(),__toCommonJS(web_exports)),_createElement=_interopRequireDefault(require_createElement()),_element_styles=require_element_styles(),_directives=require_directives(),_container_utils=require_container_utils(),_properties=require_properties(),_element_eval=require_element_eval();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _tmpl$=(0,_web.template)("<div></div>",2);function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}function GroupComponent(props){return(()=>{let _el$=_tmpl$.cloneNode(!0);(0,_web.use)(_directives.defaultEventHandlers,_el$,()=>props.instance);let _ref$=props.ref;return typeof _ref$=="function"?(0,_web.use)(_ref$,_el$):props.ref=_el$,(0,_web.insert)(_el$,(0,_web.createComponent)(_container_utils.ChildWrapper,props)),(0,_web.effect)(_p$=>{let _v$=props.id,_v$2=props.style,_v$3=_objectSpread(_objectSpread({},props.classList),{},{[props.containerClass]:!0});return _v$!==_p$._v$&&(0,_web.setAttribute)(_el$,"id",_p$._v$=_v$),_p$._v$2=(0,_web.style)(_el$,_v$2,_p$._v$2),_p$._v$3=(0,_web.classList)(_el$,_v$3,_p$._v$3),_p$},{_v$:void 0,_v$2:void 0,_v$3:void 0}),_el$})()}module.exports=(0,_createElement.default)(GroupComponent,element=>({shouldAddWrapper:element.should_add_extra_wrapper()}),(element,_ref)=>{let{shouldAddWrapper}=_ref;return{properties:(0,_container_utils.containerProperties)(shouldAddWrapper),styles:[new _properties.Style(instance=>({overflow:instance.state("collapsing")?"hidden":(0,_element_eval.evaluate_property)(instance,"overflow_scroll")?instance.run_mode()?"hidden auto":"hidden":"visible"})),...(0,_container_utils.containerStyling)(shouldAddWrapper),...(0,_element_styles.placedStyling)(element)]}})}});var require_Group2=__commonJS({"lib-browser-old/core/core_elements/elements/Group.js"(){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();var u=_interopRequireWildcard(require_u2()),element_transformer=_interopRequireWildcard(require_element_transformer()),elements=_interopRequireWildcard(require_elements2()),groups=_interopRequireWildcard(require_groups2()),_GroupComponent=_interopRequireDefault(require_GroupComponent()),elements_utils=_interopRequireWildcard(require_elements_utils()),element_props=_interopRequireWildcard(require_element_props());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var COLLAPSE_ANIMATION_LENGTH=15;element_transformer.make_element("Group",u.extend({},groups.group_element_definition,{glyph_id:"group",list_order:1,keyboard_shortcut:"G",get_private_messages(element){return["child_movement"]},uses_css_responsive:!0,solid_component:_GroupComponent.default,can_fit_width:!0,can_fit_height:!0,starts_variable_width:!0,can_defer_drawing(){return!0},register(instance){instance.state("collapsing",!1)},attempt_size_only_draw(instance){return instance.element.no_size_when_hidden()},initialize(instance){let canvas=instance.get_canvas();instance.autorun(()=>{instance.state("collapsing")?canvas.css("overflow","hidden"):instance.get_static_property("overflow_scroll")?instance.run_mode()?canvas.css({"overflow-x":"hidden","overflow-y":"auto"}):canvas.css({overflow:"hidden"}):canvas.css({overflow:"visible"})})},check_for_errors(element,report){return groups._check_for_errors_datasource_set_to_self(element,"get_group_data",report)},can_animate(element){return!0},do_show(instance,properties,options,animated,first_show){if(instance._is_visible_me=!0,instance._update_visible(),!instance.run_mode()){instance._display_me();return}instance.with_canvas(canvas=>{var _canvas$velocity;instance._display_me(),(_canvas$velocity=canvas.velocity)==null||_canvas$velocity.call(canvas,"stop"),instance.group_slide_timeout!=null&&(instance.clearTimeout(instance.group_slide_timeout),instance.group_slide_timeout=void 0);let collapse_when_hidden=instance.get_static_property("collapse_when_hidden");if(canvas.css("display",""),collapse_when_hidden&&!animated){if(instance.get_static_property("collapse_animation")&&!first_show)switch(instance.set_animating(!0),instance.state("collapsing",!0),instance.get_static_property("animation_type")){case"slide":{let increase_size=function(old_height){if(!instance._is_visible_me)return;if(old_height>=instance_height_constant){u.autorun_once(()=>{var _element_props$max_he;canvas.css({"min-height":element_props.min_height_css(instance),"max-height":(_element_props$max_he=element_props.max_height_css(instance))!=null?_element_props$max_he:""})}),instance.state("collapsing",!1),instance.set_animating(!1),instance.group_slide_timeout=void 0;return}let new_height=old_height+pixels_per_ms;canvas.css({"min-height":new_height,"max-height":new_height}),instance.group_slide_timeout=instance.setTimeout(()=>increase_size(new_height),1)},instance_height_constant=canvas.height(),pixels_per_ms=instance_height_constant/COLLAPSE_ANIMATION_LENGTH;canvas.css({"min-height":0,"max-height":0}),increase_size(0);break}case"slide_horiz":{let increase_size=function(old_width){if(!instance._is_visible_me)return;if(old_width>=instance_width_constant){u.autorun_once(()=>{var _element_props$max_wi,_element_props$max_he2;canvas.css({"min-width":element_props.min_width_css(instance),"max-width":(_element_props$max_wi=element_props.max_width_css(instance))!=null?_element_props$max_wi:"","max-height":(_element_props$max_he2=element_props.max_height_css(instance))!=null?_element_props$max_he2:""})}),instance.state("collapsing",!1),instance.set_animating(!1),instance.group_slide_timeout=void 0;return}let new_width=old_width+pixels_per_ms;canvas.css({"min-width":new_width,"max-width":new_width,"max-height":max_height}),instance.group_slide_timeout=instance.setTimeout(()=>increase_size(new_width),1)},instance_width_constant=canvas.width(),pixels_per_ms=instance_width_constant/COLLAPSE_ANIMATION_LENGTH,max_height=canvas.height();canvas.css({"min-width":0,"max-width":0}),increase_size(0);break}case"fade":{canvas.css({opacity:0}),u.velocity(canvas,"fadeIn",{duration:400,complete_cb(){instance.state("collapsing",!1),instance.set_animating(!1)},display:""});break}default:instance.set_animating(!1)}}else animated&&elements.perform_animate_in(instance,properties,options)})},do_hide(instance,properties,options,animated,first_hide){if(instance._is_visible_me=!1,!instance.run_mode()){instance._hide_me(),instance._update_visible();return}instance.with_canvas(canvas=>{var _canvas$velocity2;if((_canvas$velocity2=canvas.velocity)==null||_canvas$velocity2.call(canvas,"stop"),instance.group_slide_timeout!=null&&(instance.clearTimeout(instance.group_slide_timeout),instance.group_slide_timeout=void 0),instance.get_static_property("collapse_when_hidden")&&!animated)if(instance.get_static_property("collapse_animation")&&!first_hide)switch(instance.set_animating(!0),instance.state("collapsing",!0),instance.get_static_property("animation_type")){case"slide":{let reduce_size=function(old_size){if(instance._is_visible_me)return;if(old_size<=0){instance._hide_me(),u.autorun_once(()=>{var _element_props$max_he3;canvas.css({"min-height":element_props.min_height_css(instance),"max-height":(_element_props$max_he3=element_props.max_height_css(instance))!=null?_element_props$max_he3:""})}),canvas.css("display","none"),instance.set_animating(!1),instance.state("collapsing",!1),instance.group_slide_timeout=void 0;return}let new_size=old_size-pixels_per_ms;canvas.css({"min-height":new_size,"max-height":new_size}),instance.group_slide_timeout=instance.setTimeout(()=>reduce_size(new_size),1)},initial_size=canvas.height(),pixels_per_ms=initial_size/COLLAPSE_ANIMATION_LENGTH;reduce_size(initial_size);break}case"slide_horiz":{let reduce_size=function(old_size){if(instance._is_visible_me)return;if(old_size<=0){instance._hide_me(),u.autorun_once(()=>{var _element_props$max_wi2,_element_props$max_he4;canvas.css({"min-width":element_props.min_width_css(instance),"max-width":(_element_props$max_wi2=element_props.max_width_css(instance))!=null?_element_props$max_wi2:"","max-height":(_element_props$max_he4=element_props.max_height_css(instance))!=null?_element_props$max_he4:""})}),canvas.css("display","none"),instance.set_animating(!1),instance.state("collapsing",!1),instance.group_slide_timeout=void 0;return}let new_size=old_size-pixels_per_ms;canvas.css({"min-width":new_size,"max-width":new_size,"max-height":max_height}),instance.group_slide_timeout=instance.setTimeout(()=>reduce_size(new_size),1)},initial_size=canvas.width(),pixels_per_ms=initial_size/COLLAPSE_ANIMATION_LENGTH,max_height=canvas.height();reduce_size(initial_size);break}case"fade":{u.velocity(canvas,"fadeOut",{duration:400,complete_cb(){instance.state("collapsing",!1),instance._hide_me(),instance.set_animating(!1)},display:"none"});break}}else instance._hide_me();else animated?elements_utils.perform_animate_out(instance,properties,options):instance._hide_me()}),instance._update_visible()}}))}});var require_GroupFocusComponent=__commonJS({"lib-browser-old/core/core_elements/components/GroupFocusComponent.js"(exports){"use strict";init_define_process_env();init_shim();require_es_symbol_description();require_es_error_cause();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _web=(init_web(),__toCommonJS(web_exports));require_es_regexp_exec();require_es_string_match();require_es_array_iterator();require_web_dom_collections_iterator();var _solidJs=(init_solid(),__toCommonJS(solid_exports)),_autorun_signals=require_autorun_signals(),_lib=_interopRequireDefault(require_lib()),_appquery=_interopRequireDefault(require_appquery()),b_ui=_interopRequireWildcard(require_b_ui()),b_async=_interopRequireWildcard(require_b_async3()),uuid=_interopRequireWildcard(require_uuid()),_createElement=require_createElement(),element_styles=_interopRequireWildcard(require_element_styles()),_directives=require_directives(),_container_utils=require_container_utils(),_properties=require_properties(),element_props=_interopRequireWildcard(require_element_props()),mode_check=_interopRequireWildcard(require_mode_check());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _tmpl$=(0,_web.template)("<div></div>",2);function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var GROUP_FOCUS_MARGIN=20;function GroupFocusComponent(props){let instance=props.instance;return(0,_solidJs.onMount)(()=>{instance.do_hide()}),(0,_autorun_signals.onAfterMount)(()=>{let positionedCanvas=instance.canvas,parentCanvas=positionedCanvas.parent();instance.edit_mode()&&(parentCanvas=parentCanvas.parent());let about_to_hide=!1,addClickListener=null,removeClickListener=null;if(instance.run_mode()){let eventName="click.groupfocus".concat(uuid.LUID());addClickListener=()=>{$("body").on(eventName,evt=>{var _$$attr;let searchbox_dropdown=$(".tt-dropdown-menu"),searchbox_dropdown_in_target=()=>{for(let i=0;i<searchbox_dropdown.length;i++)if($.contains(searchbox_dropdown[i],evt.target))return!0;return!1};instance.is_visible()&&!positionedCanvas.data("GroupWithFocus_loading")&&positionedCanvas[0]!==evt.target&&!$.contains(positionedCanvas[0],evt.target)&&!((_$$attr=$(evt.target).attr("class"))!=null&&_$$attr.match(/\bselect2-/))&&!searchbox_dropdown_in_target()&&(mode_check.running_test()?instance.do_hide():(about_to_hide=!0,instance.setTimeout(()=>{b_async.WaitFor((0,_lib.default)().workflow.everything_done_key(),()=>{about_to_hide=!1,instance.do_hide()})},10)))})},removeClickListener=()=>{$("body").off(eventName)}}let resizeEvent="resize.groupfocus".concat(uuid.LUID()),intersectionObserver=null,resizeObserver=null,reference=null;function destroyObserver(){var _intersectionObserver,_resizeObserver;(_intersectionObserver=intersectionObserver)==null||_intersectionObserver.disconnect(),(_resizeObserver=resizeObserver)==null||_resizeObserver.disconnect(),$(window).off(resizeEvent),intersectionObserver=null,resizeObserver=null,reference=null}instance.autorun(()=>{if(!instance.is_visible()){var _removeClickListener;(_removeClickListener=removeClickListener)==null||_removeClickListener(),destroyObserver();return}instance.autorun(()=>{var _addClickListener,_reference2;let offsetLeft=instance.get_static_property("offset_left"),offsetTop=instance.get_static_property("offset_top");function watchChanges(){var _reference;if(instance.manual_position)return;if(!((_reference=reference)!=null&&_reference.is(":visible"))){about_to_hide||instance.state("gf_reference_position",{position:"absolute",top:"0px",left:"0px"}),destroyObserver();return}let isFixed=instance.run_mode()&&b_ui.is_fixed(reference),observedPos=reference.offset(),parentOffset=parentCanvas.offset(),observedLeft=observedPos.left-parentOffset.left,observedTop=observedPos.top-parentOffset.top;isFixed&&(observedLeft-=window.scrollX,observedTop-=window.scrollY);let should_include_padding=_appquery.default.get_public_setting("bubble_version")>=20,observedHeight=should_include_padding?reference.outerHeight():reference.height(),observedWidth=should_include_padding?reference.outerWidth():reference.width(),left=observedLeft+offsetLeft,top=observedTop+offsetTop+observedHeight;instance.state("gf_reference_position",{position:isFixed?"fixed":"absolute",left:"".concat(left,"px"),top:"".concat(top,"px")});let marginTop=-observedTop,marginLeft=-observedLeft,marginBottom=observedTop-parentCanvas.height()+observedHeight,marginRight=observedLeft-parentCanvas.width()+observedWidth;if(typeof IntersectionObserver<"u"){var _intersectionObserver2;(_intersectionObserver2=intersectionObserver)==null||_intersectionObserver2.disconnect(),intersectionObserver=new IntersectionObserver(entries=>{entries[0].intersectionRatio<1&&watchChanges()},{root:isFixed?null:parentCanvas[0],rootMargin:"".concat(marginTop,"px ").concat(marginRight,"px ").concat(marginBottom,"px ").concat(marginLeft,"px"),threshold:1}),intersectionObserver.observe(reference[0])}}let referenceId=instance.get_static_property("reference");if(instance.edit_mode())reference=(0,_lib.default)().visual_edit.current_editor_canvas.getWrapper(referenceId);else{var _instance$find_instan;reference=(_instance$find_instan=instance.find_instance_by_id(referenceId))==null?void 0:_instance$find_instan.canvas}if((_addClickListener=addClickListener)==null||_addClickListener(),!((_reference2=reference)!=null&&_reference2.is(":visible"))){instance.state("gf_reference_position",{position:"absolute",top:"0px",left:"0px"}),destroyObserver();return}if(watchChanges(),$(window).off(resizeEvent),$(window).on(resizeEvent,()=>{watchChanges()}),typeof ResizeObserver<"u"){var _resizeObserver2;(_resizeObserver2=resizeObserver)==null||_resizeObserver2.disconnect(),resizeObserver=new ResizeObserver(entries=>{watchChanges()}),resizeObserver.observe(reference[0],{box:"border-box"})}})},()=>{var _removeClickListener2;destroyObserver(),(_removeClickListener2=removeClickListener)==null||_removeClickListener2()}).set_run_immediately(!0)}),(0,_solidJs.onMount)(()=>{instance.manual_position=!1,instance.on_message("position_element",position=>{instance.manual_position=!0,instance.state("gf_reference_position",{top:"".concat(position.Y,"px"),left:"".concat(position.X,"px"),position:position.position})})}),(()=>{let _el$=_tmpl$.cloneNode(!0);(0,_web.use)(_directives.defaultEventHandlers,_el$,()=>props.instance);let _ref$=props.ref;return typeof _ref$=="function"?(0,_web.use)(_ref$,_el$):props.ref=_el$,(0,_web.insert)(_el$,(0,_web.createComponent)(_container_utils.ChildWrapper,props)),(0,_web.effect)(_p$=>{let _v$=props.id,_v$2=props.style,_v$3=_objectSpread(_objectSpread({},props.classList),{},{[props.containerClass]:!0});return _v$!==_p$._v$&&(0,_web.setAttribute)(_el$,"id",_p$._v$=_v$),_p$._v$2=(0,_web.style)(_el$,_v$2,_p$._v$2),_p$._v$3=(0,_web.classList)(_el$,_v$3,_p$._v$3),_p$},{_v$:void 0,_v$2:void 0,_v$3:void 0}),_el$})()}var _default=(0,_createElement.createElement)(GroupFocusComponent,element=>({shouldAddWrapper:element.should_add_extra_wrapper()}),(element,_ref)=>{let{shouldAddWrapper}=_ref;return{properties:(0,_container_utils.containerProperties)(shouldAddWrapper),styles:[new _properties.Style(instance=>{var _element_props$max_wi,_element_props$max_he;return{"min-width":element_props.min_width_css(instance),"max-width":(_element_props$max_wi=element_props.max_width_css(instance))!=null?_element_props$max_wi:"","min-height":element_props.min_height_css(instance),"max-height":(_element_props$max_he=element_props.max_height_css(instance))!=null?_element_props$max_he:"",height:instance.element.fit_height()?"auto":"initial",right:GROUP_FOCUS_MARGIN,bottom:instance.element.fit_height()?"unset":GROUP_FOCUS_MARGIN,"z-index":(0,_lib.default)().bv().MAX_POPUP_ZINDEX+instance.element.get_zindex(),"margin-right":instance.run_mode()?"auto":void 0,"overflow-y":instance.run_mode()?"auto":"hidden"}},{noWaitVisible:!0,outerPositioning:!0}),new _properties.Style(instance=>{var _instance$state;return(_instance$state=instance.state("gf_reference_position"))!=null?_instance$state:{position:"absolute"}},{alwaysDynamic:!0,outerPositioning:!0}),...(0,_container_utils.containerStyling)(shouldAddWrapper),...element_styles.basicStyling(element)]}});exports.default=_default}});var require_GroupFocus2=__commonJS({"lib-browser-old/core/core_elements/elements/GroupFocus.js"(){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();require_es_regexp_exec();require_es_string_match();var u=_interopRequireWildcard(require_u2()),property_applications=_interopRequireWildcard(require_property_applications()),_lib=_interopRequireDefault(require_lib()),_appquery=_interopRequireDefault(require_appquery()),element_transformer=_interopRequireWildcard(require_element_transformer()),elements=_interopRequireWildcard(require_elements2()),elements_utils=_interopRequireWildcard(require_elements_utils()),groups=_interopRequireWildcard(require_groups2()),_GroupFocusComponent=_interopRequireDefault(require_GroupFocusComponent()),element_props=_interopRequireWildcard(require_element_props()),mode_check=_interopRequireWildcard(require_mode_check());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var GROUP_FOCUS_MARGIN=20;element_transformer.make_element("GroupFocus",u.extend({},groups.group_element_definition,{display:"Group Focus",glyph_id:"group_focus",list_order:6,keyboard_shortcut:null,field_names:u.extend({},groups.container_field_names,{reference:{no_states:!0},offset_left:{no_states:!0,default:0},offset_top:{no_states:!0,default:0},fixed_width:{no_states:!0,default:!0}}),defaults:{bgcolor:"#E8E8E8",background_style:"bgcolor",width:250,height:100},styleable_properties:{offset_top:!1,offset_left:!1},get_private_messages(element){return["child_movement","position_element"]},can_animate(element){return!0},workflow_show(instance,properties,options,animated){instance.ensure_drawn(),instance.get_canvas().data("GroupWithFocus_loading",!0),instance.setTimeout(()=>instance.get_canvas().data("GroupWithFocus_loading",!1),1),instance.do_show(properties,options,animated)},workflow_hide(instance,properties,options,animated){instance.do_hide(properties,options,animated)},check_for_errors(element,report){groups._check_for_errors_datasource_set_to_self(element,"get_group_data",report)},can_defer_drawing(){return!0},register(instance){instance.state("manual_position",null),instance.on_message("position_element",position=>instance.state("manual_position",{top:position.Y+"px",left:position.X+"px",position:position.position}))},initialize(instance){instance.wait_for_visible_lite(()=>{let positioned_canvas=instance.get_canvas();instance.edit_mode()&&(positioned_canvas=positioned_canvas.parent());let parent_canvas=positioned_canvas.parent(),add_click_listener,remove_click_listener,about_to_hide=!1;if(instance.run_mode()){let event_name;u.is_on_mobile_or_tablet()?event_name="touchend.groupfocus".concat(u.LUID()):event_name="click.groupfocus".concat(u.LUID()),add_click_listener=function(){$("body").on(event_name,evt=>{var _$$attr;let searchbox_dropdown=$(".tt-dropdown-menu"),searchbox_dropdown_in_target=()=>{for(let i=0;i<searchbox_dropdown.length;i++)if($.contains(searchbox_dropdown[i],evt.target))return!0;return!1};instance.is_visible()&&!positioned_canvas.data("GroupWithFocus_loading")&&positioned_canvas[0]!==evt.target&&!$.contains(positioned_canvas[0],evt.target)&&!((_$$attr=$(evt.target).attr("class"))!=null&&_$$attr.match(/\bselect2-/))&&!searchbox_dropdown_in_target()&&(mode_check.running_test()?instance.do_hide():(about_to_hide=!0,instance.setTimeout(()=>{u.WaitFor((0,_lib.default)().workflow.everything_done_key(),()=>{about_to_hide=!1,instance.do_hide()})},10)))})},remove_click_listener=function(){$("body").off(event_name)}}let resize_event="resize.groupfocus".concat(instance.toUniqueString()),intersection_observer=null,resize_observer=null,reference=null;function destroy_observer(){var _intersection_observe,_resize_observer;(_intersection_observe=intersection_observer)==null||_intersection_observe.disconnect(),(_resize_observer=resize_observer)==null||_resize_observer.disconnect(),$(window).off(resize_event),intersection_observer=null,resize_observer=null,reference=null}instance.autorun(()=>{if(!instance.is_visible()){var _remove_click_listene;(_remove_click_listene=remove_click_listener)==null||_remove_click_listene(),destroy_observer();return}instance.autorun(()=>{var _add_click_listener;let offset_left=instance.get_static_property("offset_left"),offset_top=instance.get_static_property("offset_top");function watch_changes(){var _reference;if(instance.state("manual_position"))return;if(!((_reference=reference)!=null&&_reference.is(":visible"))){var _intersection_observe2;about_to_hide||positioned_canvas.css({top:0,left:0}),(_intersection_observe2=intersection_observer)==null||_intersection_observe2.disconnect(),intersection_observer=null;return}let is_fixed=instance.run_mode()&&u.is_fixed(reference),observed_pos=reference.offset(),parent_offset=parent_canvas.offset(),observed_left=observed_pos.left-parent_offset.left,observed_top=observed_pos.top-parent_offset.top;is_fixed&&(observed_left-=window.scrollX,observed_top-=window.scrollY);let should_include_padding=_appquery.default.get_public_setting("bubble_version")>=20,observed_height=should_include_padding?reference.outerHeight():reference.height(),observed_width=should_include_padding?reference.outerWidth():reference.height(),left=observed_left+offset_left,top=observed_top+offset_top+observed_height;positioned_canvas.css({position:is_fixed?"fixed":"absolute",left,top});let margin_top=-observed_top,margin_left=-observed_left,margin_bottom=observed_top-parent_canvas.height()+observed_height,margin_right=observed_left-parent_canvas.width()+observed_width;if(typeof IntersectionObserver<"u"&&IntersectionObserver!==null){var _intersection_observe3;(_intersection_observe3=intersection_observer)==null||_intersection_observe3.disconnect(),intersection_observer=new IntersectionObserver(entries=>{entries[0].intersectionRatio<1&&watch_changes()},{root:is_fixed?null:parent_canvas[0],rootMargin:"".concat(margin_top,"px ").concat(margin_right,"px ").concat(margin_bottom,"px ").concat(margin_left,"px"),threshold:1}),intersection_observer.observe(reference[0])}}let reference_id=instance.get_static_property("reference");if(instance.edit_mode())reference=_lib.default.or_throw().visual_edit.current_editor_canvas.getWrapper(reference_id);else{var _instance$find_instan;reference=(_instance$find_instan=instance.find_instance_by_id(reference_id))==null?void 0:_instance$find_instan.canvas}if((_add_click_listener=add_click_listener)==null||_add_click_listener(),reference==null){positioned_canvas.css({top:0,left:0}),destroy_observer();return}if(watch_changes(),$(window).off(resize_event),$(window).on(resize_event,()=>{watch_changes()}),typeof ResizeObserver<"u"&&ResizeObserver!==null){var _resize_observer2;(_resize_observer2=resize_observer)==null||_resize_observer2.disconnect(),resize_observer=new ResizeObserver(entries=>{watch_changes()}),resize_observer.observe(reference[0],{box:"border-box"})}})},()=>{var _remove_click_listene2;destroy_observer(),(_remove_click_listene2=remove_click_listener)==null||_remove_click_listene2()}).set_run_immediately(!0),instance.autorun(()=>{let manual_position=instance.state("manual_position");manual_position&&property_applications.apply_css_style(instance.get_canvas(),manual_position)})})},property_applications(element){return[new property_applications.ShortDimensions,new property_applications.Background,new property_applications.Border,new property_applications.BoxShadow,new property_applications.ResponsiveElement(element),new property_applications.ResponsiveContainer(element),new property_applications.PaddingFields]},uses_css_responsive:!0,solid_component:_GroupFocusComponent.default,can_fit_height:!0,no_margins(){return!0},not_draggable(){return!0},goes_on_document(){return!0},starts_hidden:!0,not_max_adjustable_legacy:!0,must_be_fixed_size(element){var _element$root;return((_element$root=element.root())==null?void 0:_element$root.get_responsive_version())<0},manual_position:!1,position_canvas(to_position,instance){let parent_canvas;instance.edit_mode()?parent_canvas=$(".canvas"):(parent_canvas=$("body"),to_position.css("display","none")),parent_canvas.append(to_position),instance.autorun(()=>{var _element_props$max_wi,_element_props$max_he;to_position.css({position:"absolute","min-width":element_props.min_width_css(instance),"max-width":(_element_props$max_wi=element_props.max_width_css(instance))!=null?_element_props$max_wi:"","min-height":element_props.min_height_css(instance),"max-height":(_element_props$max_he=element_props.max_height_css(instance))!=null?_element_props$max_he:"",height:instance.element.fit_height()?"auto":"initial",right:GROUP_FOCUS_MARGIN,bottom:instance.element.fit_height()?"unset":GROUP_FOCUS_MARGIN,"z-index":(0,_lib.default)().bv().MAX_POPUP_ZINDEX+instance.element.get_zindex()})}),instance.edit_mode()&&instance.container.setup_padding(instance),instance.run_mode()?(to_position.css("margin-right","auto"),to_position.css("overflow-y","auto")):to_position.css("overflow","hidden")},do_show(instance,properties,options,animated){instance._is_visible_me=!0,instance._update_visible(),instance.with_canvas(canvas=>{var _canvas$velocity;(_canvas$velocity=canvas.velocity)==null||_canvas$velocity.call(canvas,"stop",!0),canvas.css("display",""),animated?elements.perform_animate_in(instance,properties,options):instance._display_me()})},do_hide(instance,properties,options,animated){if(!instance.is_drawn){if(!animated){instance._is_visible_me=!1,instance._update_visible();return}instance.ensure_drawn()}instance._is_visible_me=!1,instance._update_visible(),instance.with_canvas(canvas=>{var _canvas$velocity2;(_canvas$velocity2=canvas.velocity)==null||_canvas$velocity2.call(canvas,"stop",!0),animated?(options.display="none",elements_utils.perform_animate_out(instance,properties,options)):(instance._hide_me(),canvas.css("display","none"))})}}))}});var require_GroupWithFocus2=__commonJS({"lib-browser-old/core/core_elements/elements/GroupWithFocus.js"(){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();var u=_interopRequireWildcard(require_u2()),element_transformer=_interopRequireWildcard(require_element_transformer()),groups=_interopRequireWildcard(require_groups2());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}element_transformer.make_element("GroupWithFocus",u.extend({},groups.group_element_definition,{display:"Group Focus (old)",field_names:u.extend({},groups.group_element_definition.field_names,{information:{no_states:!0}}),workflow_show(instance,properties,options,animated){instance.get_canvas().data("GroupWithFocus_loading",!0),instance.setTimeout(()=>instance.get_canvas().data("GroupWithFocus_loading",!1),1),instance.do_show(properties,options,animated)},workflow_hide(instance,properties,options,animated){instance.do_hide(properties,options,animated)},check_for_errors(element,report){groups._check_for_errors_datasource_set_to_self(element,"get_group_data",report)},get_private_messages(element){return["child_movement","position_element"]},starts_hidden:!0,initialize(instance){throw new u.OwnerError("Old Group Focus is not supported in new responsive engine")}}))}});var require_HTMLComponent=__commonJS({"lib-browser-old/core/core_elements/components/HTMLComponent.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _web=(init_web(),__toCommonJS(web_exports));require_es_array_iterator();require_web_dom_collections_iterator();var _solidJs=(init_solid(),__toCommonJS(solid_exports)),video_elements=_interopRequireWildcard(require_video_elements()),_createElement=require_createElement(),element_styles=_interopRequireWildcard(require_element_styles()),_directives=require_directives(),_properties=require_properties(),element_eval=_interopRequireWildcard(require_element_eval()),mode_check=_interopRequireWildcard(require_mode_check());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var _tmpl$=(0,_web.template)('<iframe src="about:blank"></iframe>',2),_tmpl$2=(0,_web.template)("<div></div>",2),_default=(0,_createElement.createElement)(HTMLComponent,element=>({deferDrawing:element.get_static_property("defer_drawing")}),(element,_ref)=>{let{deferDrawing}=_ref;return{properties:{html:new _properties.Property(instance=>element_eval.evaluate_property(instance,"html"),{noWaitVisible:!deferDrawing}),useIframe:new _properties.Property(instance=>element_eval.evaluate_property(instance,"useiframe"),{noWaitVisible:!0})},styles:element_styles.placedStyling(element)}});exports.default=_default;function HTMLComponent(props){let html=()=>props.html;if(props.deferDrawing){let[s,signal]=(0,_solidJs.createSignal)(!1);(0,_solidJs.onMount)(()=>{props.instance.wait_for_visible_lite(()=>{signal(!0)})}),html=()=>s()?props.html:""}function HTMLIframe(){let ref,htmlTimeout,setHTML=html2=>{ref.contentWindow?(ref.contentWindow.contents=html2,mode_check.running_test()&&(ref.contents=html2),ref.src='javascript:window["contents"]'):htmlTimeout=props.instance.setTimeout(()=>setHTML(html2),100)};return(0,_solidJs.createEffect)(()=>{setHTML(html()),(0,_solidJs.onCleanup)(()=>props.instance.clearTimeout(htmlTimeout))}),(()=>{let _el$=_tmpl$.cloneNode(!0),_ref$=ref;return typeof _ref$=="function"?(0,_web.use)(_ref$,_el$):ref=_el$,_el$.style.setProperty("width","100%"),_el$.style.setProperty("height","100%"),(0,_web.effect)(()=>(0,_web.setAttribute)(_el$,"sandbox",video_elements.should_block_cookies()?"allow-scripts allow-same-origin":void 0)),_el$})()}return props.instance.run_mode()&&window.bubble_safe_mode?(()=>{let _el$2=_tmpl$2.cloneNode(!0);(0,_web.use)(_directives.defaultEventHandlers,_el$2,()=>props.instance);let _ref$2=props.ref;return typeof _ref$2=="function"?(0,_web.use)(_ref$2,_el$2):props.ref=_el$2,(0,_web.effect)(_p$=>{let _v$=props.id,_v$2=props.style,_v$3=props.classList;return _v$!==_p$._v$&&(0,_web.setAttribute)(_el$2,"id",_p$._v$=_v$),_p$._v$2=(0,_web.style)(_el$2,_v$2,_p$._v$2),_p$._v$3=(0,_web.classList)(_el$2,_v$3,_p$._v$3),_p$},{_v$:void 0,_v$2:void 0,_v$3:void 0}),_el$2})():(0,_web.createComponent)(_solidJs.Show,{get when(){return props.useIframe},get fallback(){return(()=>{let _el$4=_tmpl$2.cloneNode(!0);(0,_web.use)(_directives.jqueryHTML,_el$4,()=>html()),(0,_web.use)(_directives.defaultEventHandlers,_el$4,()=>props.instance);let _ref$4=props.ref;return typeof _ref$4=="function"?(0,_web.use)(_ref$4,_el$4):props.ref=_el$4,(0,_web.effect)(_p$=>{let _v$7=props.id,_v$8=props.style,_v$9=props.classList,_v$10=_web.isServer?props.html:void 0;return _v$7!==_p$._v$7&&(0,_web.setAttribute)(_el$4,"id",_p$._v$7=_v$7),_p$._v$8=(0,_web.style)(_el$4,_v$8,_p$._v$8),_p$._v$9=(0,_web.classList)(_el$4,_v$9,_p$._v$9),_v$10!==_p$._v$10&&(_el$4.innerHTML=_p$._v$10=_v$10),_p$},{_v$7:void 0,_v$8:void 0,_v$9:void 0,_v$10:void 0}),_el$4})()},get children(){let _el$3=_tmpl$2.cloneNode(!0);(0,_web.use)(_directives.defaultEventHandlers,_el$3,()=>props.instance);let _ref$3=props.ref;return typeof _ref$3=="function"?(0,_web.use)(_ref$3,_el$3):props.ref=_el$3,(0,_web.insert)(_el$3,(0,_web.createComponent)(HTMLIframe,{})),(0,_web.effect)(_p$=>{let _v$4=props.id,_v$5=props.style,_v$6=props.classList;return _v$4!==_p$._v$4&&(0,_web.setAttribute)(_el$3,"id",_p$._v$4=_v$4),_p$._v$5=(0,_web.style)(_el$3,_v$5,_p$._v$5),_p$._v$6=(0,_web.classList)(_el$3,_v$6,_p$._v$6),_p$},{_v$4:void 0,_v$5:void 0,_v$6:void 0}),_el$3}})}}});var require_HTML2=__commonJS({"lib-browser-old/core/core_elements/elements/HTML.js"(){"use strict";init_define_process_env();init_shim();require_es_weak_map();require_es_array_iterator();require_web_dom_collections_iterator();var u=_interopRequireWildcard(require_u2()),property_applications=_interopRequireWildcard(require_property_applications()),logger=_interopRequireWildcard(require_logger()),element_utils=_interopRequireWildcard(require_element_utils()),element_transformer=_interopRequireWildcard(require_element_transformer()),video_elements=_interopRequireWildcard(require_video_elements()),element_eval=_interopRequireWildcard(require_element_eval()),_elements=require_elements(),_HTMLComponent=_interopRequireDefault(require_HTMLComponent());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function UNMANGLED_html_wrap(fn){return fn()}element_transformer.make_element("HTML",{category:"visual elements",glyph_id:"html",list_order:8,keyboard_shortcut:null,defaults:{border_style:"none",border_color:"#6B6B6B",border_width:0,padding_vertical:2,padding_horizontal:2,width:200,height:100},updated_default_sizing:{width:280,height:150},field_names:{html:{default:"<i>edit me...</i>"},useiframe:{default:!1},stretch_to_fit:{default:!1,no_states:!0},keep_proportion_resize:{no_states:!0},defer_drawing:{no_states:!0}},property_applications(element){return[new property_applications.Dimensions,new property_applications.Padding,new property_applications.PaddingFields({minimum_element_version:_elements.PADDING_VERSION,allow_legacy:!0}),new property_applications.Border,new property_applications.BoxShadow,new property_applications.ResponsiveElement(element),new property_applications.Opacity]},uses_css_responsive:!0,solid_component:_HTMLComponent.default,use_legacy_in_editor:!0,use_legacy_in_thumbnail:!0,get_html(){return"<div></div>"},wrapped_canvas_append(parent,child){return UNMANGLED_html_wrap(()=>parent.append(child))},get_min_width(){return 0},can_fit_width(element){return!element.get_static_property("useiframe",!0)},can_fit_height(element){return!element.get_static_property("useiframe",!0)},add_an_invisible_div_on_the_top:!0,change_cursor_style_if_clickable:!1,can_defer_drawing(element){return element.get_static_property("defer_drawing")},register(instance){var _window;if(instance.run_mode()&&(_window=window)!=null&&_window.bubble_safe_mode)return logger.owner_warn(new u.OwnerError("This HTML element is not rendered in safe mode",{element_instance:instance}))},initialize(instance){function do_initialize(){if(instance.run_mode()&&window.bubble_safe_mode)return;let canvas=instance.get_canvas(),scheduled_time_out_call_for_html_iframe=null,iframe=null,_content_window_ready=()=>iframe[0].contentWindow,last_html=!1;element_eval.pre_cache(instance,["html","useiframe"]),instance.autorun(()=>{var _html;let props={};for(let prop of["html","useiframe"])props[prop]=element_eval.evaluate_property(instance,prop);let{html,useiframe}=props;if((_html=html)!=null||(html=""),instance.run_mode())if(useiframe){let set_html=html_aux=>{instance.clearTimeout(scheduled_time_out_call_for_html_iframe),iframe||(iframe=$('<iframe src="about:blank"></iframe>'),video_elements.should_block_cookies()&&iframe.attr("sandbox","allow-scripts allow-same-origin"),canvas.append(iframe)),iframe[0].style.width="100%",iframe[0].style.height="100%",_content_window_ready()?(last_html!==html_aux&&(iframe[0].contentWindow.contents=html_aux,last_html=html_aux),iframe[0].src='javascript:window["contents"]'):scheduled_time_out_call_for_html_iframe=instance.setTimeout(()=>set_html(html_aux),100)};set_html(html),canvas.css("height",instance.element.get_height())}else try{last_html!==html&&(UNMANGLED_html_wrap(()=>canvas.html(html)),last_html=html)}catch(error){logger.owner_only_error("html bug",{display:"Bug in custom html:\n"+error.stack,element_instance:instance,prop_name:"html"})}else{canvas.empty();let iframe2=$('          <iframe\n              sandbox="allow-scripts"\n              id=\'user_preview_iframe\'\n              width="100%"\n              height="100%"\n          >\n              (this browser does not support HTML element preview rendering)\n          </iframe>          ');iframe2[0].srcdoc=html,canvas.append(iframe2),element_utils.do_add_an_invisible_div_on_the_top(instance)}})}instance.get_static_property("defer_drawing")?instance.wait_for_visible_lite(do_initialize):do_initialize()},is_input:!1,contains_group_data:!1})}});var require_icons_content=__commonJS({"lib-browser-old/constants/icons_content.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.ICONS_CONTENT=void 0;var icons={"fa-superscript":"\uF12B","fa-delicious":"\uF1A5","fa-bathtub":"\uF2CD","fa-s15":"\uF2CD","fa-bath":"\uF2CD","fa-podcast":"\uF2CE","fa-hdd-o":"\uF0A0","fa-vcard-o":"\uF2BC","fa-address-card-o":"\uF2BC","fa-odnoklassniki":"\uF263","fa-openid":"\uF19B","fa-joomla":"\uF1AA","fa-neuter":"\uF22C","fa-angle-double-up":"\uF102","fa-deviantart":"\uF1BD","fa-sliders":"\uF1DE","fa-viadeo-square":"\uF2AA","fa-lock":"\uF023","fa-quora":"\uF2C4","fa-safari":"\uF267","fa-drivers-license":"\uF2C2","fa-id-card":"\uF2C2","fa-circle":"\uF111","fa-bus":"\uF207","fa-glide":"\uF2A5","fa-bold":"\uF032","fa-flag":"\uF024","fa-search-plus":"\uF00E","fa-hotel":"\uF236","fa-bed":"\uF236","fa-linode":"\uF2B8","fa-trash":"\uF1F8","fa-snapchat-ghost":"\uF2AC","fa-cny":"\uF157","fa-rmb":"\uF157","fa-yen":"\uF157","fa-jpy":"\uF157","fa-subscript":"\uF12C","fa-battery-4":"\uF240","fa-battery":"\uF240","fa-battery-full":"\uF240","fa-thumbs-o-up":"\uF087","fa-tint":"\uF043","fa-user-md":"\uF0F0","fa-tripadvisor":"\uF262","fa-bitcoin":"\uF15A","fa-btc":"\uF15A","fa-file-word-o":"\uF1C2","fa-refresh":"\uF021","fa-cc-diners-club":"\uF24C","fa-sort-alpha-desc":"\uF15E","fa-mortar-board":"\uF19D","fa-graduation-cap":"\uF19D","fa-mars-double":"\uF227","fa-text-width":"\uF035","fa-shopping-cart":"\uF07A","fa-minus-circle":"\uF056","fa-compass":"\uF14E","fa-twitter-square":"\uF081","fa-genderless":"\uF22D","fa-leaf":"\uF06C","fa-arrows-h":"\uF07E","fa-window-maximize":"\uF2D0","fa-hand-o-down":"\uF0A7","fa-free-code-camp":"\uF2C5","fa-arrow-circle-o-down":"\uF01A","fa-hand-lizard-o":"\uF258","fa-asterisk":"\uF069","fa-modx":"\uF285","fa-pie-chart":"\uF200","fa-square-o":"\uF096","fa-magic":"\uF0D0","fa-qrcode":"\uF029","fa-yahoo":"\uF19E","fa-gears":"\uF085","fa-cogs":"\uF085","fa-spotify":"\uF1BC","fa-bullseye":"\uF140","fa-twitch":"\uF1E8","fa-signal":"\uF012","fa-user-secret":"\uF21B","fa-check-square":"\uF14A","fa-spoon":"\uF1B1","fa-cloud":"\uF0C2","fa-calculator":"\uF1EC","fa-camera":"\uF030","fa-video-camera":"\uF03D","fa-gift":"\uF06B","fa-hourglass-2":"\uF252","fa-hourglass-half":"\uF252","fa-mercury":"\uF223","fa-street-view":"\uF21D","fa-chevron-circle-left":"\uF137","fa-edit":"\uF044","fa-pencil-square-o":"\uF044","fa-terminal":"\uF120","fa-dashcube":"\uF210","fa-github-alt":"\uF113","fa-volume-off":"\uF026","fa-headphones":"\uF025","fa-hourglass-o":"\uF250","fa-train":"\uF238","fa-send-o":"\uF1D9","fa-paper-plane-o":"\uF1D9","fa-subway":"\uF239","fa-500px":"\uF26E","fa-random":"\uF074","fa-expand":"\uF065","fa-beer":"\uF0FC","fa-thumb-tack":"\uF08D","fa-shirtsinbulk":"\uF214","fa-map-o":"\uF278","fa-fa":"\uF2B4","fa-font-awesome":"\uF2B4","fa-chevron-left":"\uF053","fa-hand-grab-o":"\uF255","fa-hand-rock-o":"\uF255","fa-slideshare":"\uF1E7","fa-cc-stripe":"\uF1F5","fa-play-circle":"\uF144","fa-eercast":"\uF2DA","fa-wheelchair":"\uF193","fa-slack":"\uF198","fa-automobile":"\uF1B9","fa-car":"\uF1B9","fa-opencart":"\uF23D","fa-scribd":"\uF28A","fa-remove":"\uF00D","fa-close":"\uF00D","fa-times":"\uF00D","fa-object-group":"\uF247","fa-lastfm":"\uF202","fa-smile-o":"\uF118","fa-object-ungroup":"\uF248","fa-cloud-upload":"\uF0EE","fa-align-right":"\uF038","fa-i-cursor":"\uF246","fa-circle-thin":"\uF1DB","fa-comment":"\uF075","fa-recycle":"\uF1B8","fa-wikipedia-w":"\uF266","fa-soccer-ball-o":"\uF1E3","fa-futbol-o":"\uF1E3","fa-cc-paypal":"\uF1F4","fa-arrows-alt":"\uF0B2","fa-turkish-lira":"\uF195","fa-try":"\uF195","fa-venus":"\uF221","fa-chevron-up":"\uF077","fa-map":"\uF279","fa-flickr":"\uF16E","fa-bookmark-o":"\uF097","fa-user":"\uF007","fa-handshake-o":"\uF2B5","fa-y-combinator-square":"\uF1D4","fa-yc-square":"\uF1D4","fa-hacker-news":"\uF1D4","fa-arrow-circle-up":"\uF0AA","fa-angle-left":"\uF104","fa-hand-peace-o":"\uF25B","fa-building":"\uF1AD","fa-envelope-open":"\uF2B6","fa-legal":"\uF0E3","fa-gavel":"\uF0E3","fa-moon-o":"\uF186","fa-play-circle-o":"\uF01D","fa-thermometer-1":"\uF2CA","fa-thermometer-quarter":"\uF2CA","fa-level-up":"\uF148","fa-mail-reply-all":"\uF122","fa-reply-all":"\uF122","fa-folder":"\uF07B","fa-copy":"\uF0C5","fa-files-o":"\uF0C5","fa-mouse-pointer":"\uF245","fa-paperclip":"\uF0C6","fa-hand-o-left":"\uF0A5","fa-github":"\uF09B","fa-exclamation":"\uF12A","fa-yc":"\uF23B","fa-y-combinator":"\uF23B","fa-flask":"\uF0C3","fa-eject":"\uF052","fa-forumbee":"\uF211","fa-hand-pointer-o":"\uF25A","fa-stumbleupon-circle":"\uF1A3","fa-calendar-o":"\uF133","fa-stop-circle-o":"\uF28E","fa-sort-amount-desc":"\uF161","fa-windows":"\uF17A","fa-meh-o":"\uF11A","fa-toggle-off":"\uF204","fa-xing":"\uF168","fa-server":"\uF233","fa-creative-commons":"\uF25E","fa-toggle-down":"\uF150","fa-caret-square-o-down":"\uF150","fa-yoast":"\uF2B1","fa-toggle-up":"\uF151","fa-caret-square-o-up":"\uF151","fa-arrows-v":"\uF07D","fa-gbp":"\uF154","fa-chevron-down":"\uF078","fa-underline":"\uF0CD","fa-print":"\uF02F","fa-vimeo":"\uF27D","fa-flag-o":"\uF11D","fa-pagelines":"\uF18C","fa-vcard":"\uF2BB","fa-address-card":"\uF2BB","fa-exclamation-circle":"\uF06A","fa-user-plus":"\uF234","fa-cc-visa":"\uF1F0","fa-folder-open-o":"\uF115","fa-file-zip-o":"\uF1C6","fa-file-archive-o":"\uF1C6","fa-wpbeginner":"\uF297","fa-paypal":"\uF1ED","fa-newspaper-o":"\uF1EA","fa-sign-out":"\uF08B","fa-bitbucket-square":"\uF172","fa-text-height":"\uF034","fa-align-center":"\uF037","fa-google-wallet":"\uF1EE","fa-plus-circle":"\uF055","fa-angle-double-left":"\uF100","fa-whatsapp":"\uF232","fa-question":"\uF128","fa-italic":"\uF033","fa-git-square":"\uF1D2","fa-opera":"\uF26A","fa-arrow-circle-left":"\uF0A8","fa-anchor":"\uF13D","fa-plug":"\uF1E6","fa-cubes":"\uF1B3","fa-yelp":"\uF1E9","fa-list-ul":"\uF0CA","fa-list-ol":"\uF0CB","fa-thumbs-up":"\uF164","fa-arrow-circle-o-up":"\uF01B","fa-phone-square":"\uF098","fa-adjust":"\uF042","fa-volume-up":"\uF028","fa-unlock":"\uF09C","fa-step-forward":"\uF051","fa-header":"\uF1DC","fa-drupal":"\uF1A9","fa-comments":"\uF086","fa-amazon":"\uF270","fa-caret-up":"\uF0D8","fa-fire-extinguisher":"\uF134","fa-film":"\uF008","fa-dropbox":"\uF16B","fa-comment-o":"\uF0E5","fa-tencent-weibo":"\uF1D5","fa-internet-explorer":"\uF26B","fa-medium":"\uF23A","fa-arrow-right":"\uF061","fa-lastfm-square":"\uF203","fa-drivers-license-o":"\uF2C3","fa-id-card-o":"\uF2C3","fa-hand-o-up":"\uF0A6","fa-facebook-f":"\uF09A","fa-facebook":"\uF09A","fa-bell":"\uF0F3","fa-gear":"\uF013","fa-cog":"\uF013","fa-minus":"\uF068","fa-globe":"\uF0AC","fa-retweet":"\uF079","fa-bullhorn":"\uF0A1","fa-mobile-phone":"\uF10B","fa-mobile":"\uF10B","fa-snapchat":"\uF2AB","fa-sort-alpha-asc":"\uF15D","fa-css3":"\uF13C","fa-envira":"\uF299","fa-leanpub":"\uF212","fa-align-justify":"\uF039","fa-code-fork":"\uF126","fa-angle-double-right":"\uF101","fa-xing-square":"\uF169","fa-bookmark":"\uF02E","fa-vine":"\uF1CA","fa-square":"\uF0C8","fa-stack-exchange":"\uF18D","fa-houzz":"\uF27C","fa-user-times":"\uF235","fa-get-pocket":"\uF265","fa-envelope":"\uF0E0","fa-qq":"\uF1D6","fa-linkedin":"\uF0E1","fa-glide-g":"\uF2A6","fa-deafness":"\uF2A4","fa-hard-of-hearing":"\uF2A4","fa-deaf":"\uF2A4","fa-life-bouy":"\uF1CD","fa-life-buoy":"\uF1CD","fa-life-saver":"\uF1CD","fa-support":"\uF1CD","fa-life-ring":"\uF1CD","fa-digg":"\uF1A6","fa-keyboard-o":"\uF11C","fa-snowflake-o":"\uF2DC","fa-suitcase":"\uF0F2","fa-tty":"\uF1E4","fa-balance-scale":"\uF24E","fa-ellipsis-h":"\uF141","fa-battery-3":"\uF241","fa-battery-three-quarters":"\uF241","fa-file-pdf-o":"\uF1C1","fa-circle-o":"\uF10C","fa-pause-circle":"\uF28B","fa-flag-checkered":"\uF11E","fa-rotate-left":"\uF0E2","fa-undo":"\uF0E2","fa-send":"\uF1D8","fa-paper-plane":"\uF1D8","fa-cc-amex":"\uF1F3","fa-contao":"\uF26D","fa-star-half":"\uF089","fa-google-plus-square":"\uF0D4","fa-indent":"\uF03C","fa-angellist":"\uF209","fa-trash-o":"\uF014","fa-cart-arrow-down":"\uF218","fa-wpexplorer":"\uF2DE","fa-bandcamp":"\uF2D5","fa-music":"\uF001","fa-skype":"\uF17E","fa-trello":"\uF181","fa-black-tie":"\uF27E","fa-long-arrow-down":"\uF175","fa-google":"\uF1A0","fa-stethoscope":"\uF0F1","fa-caret-down":"\uF0D7","fa-battery-2":"\uF242","fa-battery-half":"\uF242","fa-cab":"\uF1BA","fa-taxi":"\uF1BA","fa-cc":"\uF20A","fa-cc-mastercard":"\uF1F1","fa-commenting-o":"\uF27B","fa-hashtag":"\uF292","fa-gitlab":"\uF296","fa-cc-jcb":"\uF24B","fa-check":"\uF00C","fa-user-circle-o":"\uF2BE","fa-history":"\uF1DA","fa-times-circle-o":"\uF05C","fa-bar-chart-o":"\uF080","fa-bar-chart":"\uF080","fa-bell-slash":"\uF1F6","fa-clone":"\uF24D","fa-briefcase":"\uF0B1","fa-glass":"\uF000","fa-calendar-minus-o":"\uF272","fa-arrow-left":"\uF060","fa-pencil-square":"\uF14B","fa-money":"\uF0D6","fa-fast-forward":"\uF050","fa-bicycle":"\uF206","fa-fighter-jet":"\uF0FB","fa-download":"\uF019","fa-ticket":"\uF145","fa-exchange":"\uF0EC","fa-user-circle":"\uF2BD","fa-map-pin":"\uF276","fa-mars-stroke-v":"\uF22A","fa-key":"\uF084","fa-imdb":"\uF2D8","fa-calendar-times-o":"\uF273","fa-simplybuilt":"\uF215","fa-battery-0":"\uF244","fa-battery-empty":"\uF244","fa-arrow-up":"\uF062","fa-maxcdn":"\uF136","fa-pied-piper-pp":"\uF1A7","fa-check-circle-o":"\uF05D","fa-chevron-right":"\uF054","fa-heart":"\uF004","fa-eye":"\uF06E","fa-cut":"\uF0C4","fa-scissors":"\uF0C4","fa-quote-right":"\uF10E","fa-sellsy":"\uF213","fa-wechat":"\uF1D7","fa-weixin":"\uF1D7","fa-search":"\uF002","fa-comments-o":"\uF0E6","fa-wordpress":"\uF19A","fa-sort-numeric-desc":"\uF163","fa-hand-spock-o":"\uF259","fa-gamepad":"\uF11B","fa-fax":"\uF1AC","fa-list-alt":"\uF022","fa-youtube":"\uF167","fa-sticky-note-o":"\uF24A","fa-ge":"\uF1D1","fa-empire":"\uF1D1","fa-gittip":"\uF184","fa-gratipay":"\uF184","fa-toggle-left":"\uF191","fa-caret-square-o-left":"\uF191","fa-tumblr":"\uF173","fa-stumbleupon":"\uF1A4","fa-tv":"\uF26C","fa-television":"\uF26C","fa-bell-o":"\uF0A2","fa-wifi":"\uF1EB","fa-inbox":"\uF01C","fa-eyedropper":"\uF1FB","fa-hospital-o":"\uF0F8","fa-ravelry":"\uF2D9","fa-building-o":"\uF0F7","fa-fort-awesome":"\uF286","fa-shopping-bag":"\uF290","fa-address-book":"\uF2B9","fa-fonticons":"\uF280","fa-feed":"\uF09E","fa-rss":"\uF09E","fa-toggle-right":"\uF152","fa-caret-square-o-right":"\uF152","fa-microphone-slash":"\uF131","fa-git":"\uF1D3","fa-medkit":"\uF0FA","fa-line-chart":"\uF201","fa-shopping-basket":"\uF291","fa-external-link-square":"\uF14C","fa-times-rectangle":"\uF2D3","fa-window-close":"\uF2D3","fa-book":"\uF02D","fa-rocket":"\uF135","fa-caret-left":"\uF0D9","fa-wpforms":"\uF298","fa-chain":"\uF0C1","fa-link":"\uF0C1","fa-ioxhost":"\uF208","fa-quote-left":"\uF10D","fa-github-square":"\uF092","fa-ban":"\uF05E","fa-universal-access":"\uF29A","fa-credit-card":"\uF09D","fa-steam-square":"\uF1B7","fa-id-badge":"\uF2C1","fa-html5":"\uF13B","fa-envelope-open-o":"\uF2B7","fa-file-code-o":"\uF1C9","fa-mail-reply":"\uF112","fa-reply":"\uF112","fa-google-plus":"\uF0D5","fa-youtube-play":"\uF16A","fa-venus-double":"\uF226","fa-stop":"\uF04D","fa-phone":"\uF095","fa-reddit-square":"\uF1A2","fa-reddit-alien":"\uF281","fa-product-hunt":"\uF288","fa-star-half-empty":"\uF123","fa-star-half-full":"\uF123","fa-star-half-o":"\uF123","fa-long-arrow-up":"\uF176","fa-ambulance":"\uF0F9","fa-won":"\uF159","fa-krw":"\uF159","fa-heartbeat":"\uF21E","fa-sign-in":"\uF090","fa-caret-right":"\uF0DA","fa-chrome":"\uF268","fa-save":"\uF0C7","fa-floppy-o":"\uF0C7","fa-female":"\uF182","fa-braille":"\uF2A1","fa-pinterest-square":"\uF0D3","fa-paragraph":"\uF1DD","fa-folder-open":"\uF07C","fa-envelope-square":"\uF199","fa-codiepie":"\uF284","fa-birthday-cake":"\uF1FD","fa-dot-circle-o":"\uF192","fa-sort-down":"\uF0DD","fa-sort-desc":"\uF0DD","fa-signing":"\uF2A7","fa-sign-language":"\uF2A7","fa-frown-o":"\uF119","fa-angle-right":"\uF105","fa-star-o":"\uF006","fa-angle-down":"\uF107","fa-space-shuttle":"\uF197","fa-arrow-circle-down":"\uF0AB","fa-arrow-circle-right":"\uF0A9","fa-soundcloud":"\uF1BE","fa-pause":"\uF04C","fa-truck":"\uF0D1","fa-hand-stop-o":"\uF256","fa-hand-paper-o":"\uF256","fa-credit-card-alt":"\uF283","fa-file-photo-o":"\uF1C5","fa-file-picture-o":"\uF1C5","fa-file-image-o":"\uF1C5","fa-level-down":"\uF149","fa-backward":"\uF04A","fa-eye-slash":"\uF070","fa-euro":"\uF153","fa-eur":"\uF153","fa-behance":"\uF1B4","fa-crosshairs":"\uF05B","fa-certificate":"\uF0A3","fa-copyright":"\uF1F9","fa-meetup":"\uF2E0","fa-thumbs-o-down":"\uF088","fa-thermometer-0":"\uF2CB","fa-thermometer-empty":"\uF2CB","fa-meanpath":"\uF20C","fa-arrows":"\uF047","fa-fast-backward":"\uF049","fa-vk":"\uF189","fa-map-marker":"\uF041","fa-bell-slash-o":"\uF1F7","fa-venus-mars":"\uF228","fa-map-signs":"\uF277","fa-filter":"\uF0B0","fa-calendar-plus-o":"\uF271","fa-language":"\uF1AB","fa-warning":"\uF071","fa-exclamation-triangle":"\uF071","fa-bluetooth-b":"\uF294","fa-minus-square-o":"\uF147","fa-home":"\uF015","fa-plane":"\uF072","fa-chevron-circle-up":"\uF139","fa-android":"\uF17B","fa-volume-down":"\uF027","fa-institution":"\uF19C","fa-bank":"\uF19C","fa-university":"\uF19C","fa-sort-amount-asc":"\uF160","fa-tumblr-square":"\uF174","fa-odnoklassniki-square":"\uF264","fa-bluetooth":"\uF293","fa-tag":"\uF02B","fa-th":"\uF00A","fa-ellipsis-v":"\uF142","fa-percent":"\uF295","fa-adn":"\uF170","fa-shekel":"\uF20B","fa-sheqel":"\uF20B","fa-ils":"\uF20B","fa-weibo":"\uF18A","fa-chevron-circle-down":"\uF13A","fa-mars":"\uF222","fa-share-square":"\uF14D","fa-search-minus":"\uF010","fa-child":"\uF1AE","fa-ruble":"\uF158","fa-rouble":"\uF158","fa-rub":"\uF158","fa-compress":"\uF066","fa-thumbs-down":"\uF165","fa-check-circle":"\uF058","fa-heart-o":"\uF08A","fa-tags":"\uF02C","fa-facebook-square":"\uF082","fa-asl-interpreting":"\uF2A3","fa-american-sign-language-interpreting":"\uF2A3","fa-motorcycle":"\uF21C","fa-paste":"\uF0EA","fa-clipboard":"\uF0EA","fa-question-circle":"\uF059","fa-cutlery":"\uF0F5","fa-hourglass-3":"\uF253","fa-hourglass-end":"\uF253","fa-clock-o":"\uF017","fa-archive":"\uF187","fa-times-rectangle-o":"\uF2D4","fa-window-close-o":"\uF2D4","fa-bug":"\uF188","fa-codepen":"\uF1CB","fa-mail-forward":"\uF064","fa-share":"\uF064","fa-mars-stroke":"\uF229","fa-file-excel-o":"\uF1C3","fa-commenting":"\uF27A","fa-behance-square":"\uF1B5","fa-folder-o":"\uF114","fa-microphone":"\uF130","fa-h-square":"\uF0FD","fa-etsy":"\uF2D7","fa-vimeo-square":"\uF194","fa-ship":"\uF21A","fa-google-plus-circle":"\uF2B3","fa-google-plus-official":"\uF2B3","fa-info-circle":"\uF05A","fa-table":"\uF0CE","fa-shower":"\uF2CC","fa-buysellads":"\uF20D","fa-dollar":"\uF155","fa-usd":"\uF155","fa-themeisle":"\uF2B2","fa-user-o":"\uF2C0","fa-columns":"\uF0DB","fa-camera-retro":"\uF083","fa-star":"\uF005","fa-edge":"\uF282","fa-file-text-o":"\uF0F6","fa-rss-square":"\uF143","fa-laptop":"\uF109","fa-calendar-check-o":"\uF274","fa-area-chart":"\uF1FE","fa-pinterest":"\uF0D2","fa-plus-square":"\uF0FE","fa-envelope-o":"\uF003","fa-window-restore":"\uF2D2","fa-eraser":"\uF12D","fa-trophy":"\uF091","fa-battery-1":"\uF243","fa-battery-quarter":"\uF243","fa-arrow-circle-o-left":"\uF190","fa-foursquare":"\uF180","fa-sitemap":"\uF0E8","fa-hourglass-1":"\uF251","fa-hourglass-start":"\uF251","fa-desktop":"\uF108","fa-gg":"\uF260","fa-rotate-right":"\uF01E","fa-repeat":"\uF01E","fa-calendar":"\uF073","fa-stop-circle":"\uF28D","fa-intersex":"\uF224","fa-transgender":"\uF224","fa-firefox":"\uF269","fa-file-text":"\uF15C","fa-coffee":"\uF0F4","fa-sort-up":"\uF0DE","fa-sort-asc":"\uF0DE","fa-steam":"\uF1B6","fa-hourglass":"\uF254","fa-road":"\uF018","fa-mixcloud":"\uF289","fa-lightbulb-o":"\uF0EB","fa-arrow-circle-o-right":"\uF18E","fa-flash":"\uF0E7","fa-bolt":"\uF0E7","fa-hand-scissors-o":"\uF257","fa-tree":"\uF1BB","fa-ra":"\uF1D0","fa-resistance":"\uF1D0","fa-rebel":"\uF1D0","fa-audio-description":"\uF29E","fa-spinner":"\uF110","fa-optin-monster":"\uF23C","fa-facebook-official":"\uF230","fa-jsfiddle":"\uF1CC","fa-tablet":"\uF10A","fa-navicon":"\uF0C9","fa-reorder":"\uF0C9","fa-bars":"\uF0C9","fa-long-arrow-left":"\uF177","fa-dribbble":"\uF17D","fa-volume-control-phone":"\uF2A0","fa-diamond":"\uF219","fa-group":"\uF0C0","fa-users":"\uF0C0","fa-youtube-square":"\uF166","fa-usb":"\uF287","fa-minus-square":"\uF146","fa-first-order":"\uF2B0","fa-sticky-note":"\uF249","fa-upload":"\uF093","fa-thermometer-3":"\uF2C8","fa-thermometer-three-quarters":"\uF2C8","fa-renren":"\uF18B","fa-times-circle":"\uF057","fa-pinterest-p":"\uF231","fa-linkedin-square":"\uF08C","fa-cloud-download":"\uF0ED","fa-wrench":"\uF0AD","fa-file-sound-o":"\uF1C7","fa-file-audio-o":"\uF1C7","fa-linux":"\uF17C","fa-instagram":"\uF16D","fa-snapchat-square":"\uF2AD","fa-apple":"\uF179","fa-bitbucket":"\uF171","fa-align-left":"\uF036","fa-viacoin":"\uF237","fa-long-arrow-right":"\uF178","fa-share-alt-square":"\uF1E1","fa-fire":"\uF06D","fa-font":"\uF031","fa-twitter":"\uF099","fa-circle-o-notch":"\uF1CE","fa-angle-up":"\uF106","fa-th-list":"\uF00B","fa-list":"\uF03A","fa-location-arrow":"\uF124","fa-hand-o-right":"\uF0A4","fa-plus-square-o":"\uF196","fa-toggle-on":"\uF205","fa-crop":"\uF125","fa-paw":"\uF1B0","fa-file-movie-o":"\uF1C8","fa-file-video-o":"\uF1C8","fa-dashboard":"\uF0E4","fa-tachometer":"\uF0E4","fa-at":"\uF1FA","fa-male":"\uF183","fa-th-large":"\uF009","fa-sun-o":"\uF185","fa-address-book-o":"\uF2BA","fa-window-minimize":"\uF2D1","fa-forward":"\uF04E","fa-pied-piper":"\uF2AE","fa-code":"\uF121","fa-thermometer-4":"\uF2C7","fa-thermometer":"\uF2C7","fa-thermometer-full":"\uF2C7","fa-registered":"\uF25D","fa-connectdevelop":"\uF20E","fa-share-square-o":"\uF045","fa-expeditedssl":"\uF23E","fa-barcode":"\uF02A","fa-external-link":"\uF08E","fa-check-square-o":"\uF046","fa-pause-circle-o":"\uF28C","fa-question-circle-o":"\uF29C","fa-industry":"\uF275","fa-chevron-circle-right":"\uF138","fa-transgender-alt":"\uF225","fa-thermometer-2":"\uF2C9","fa-thermometer-half":"\uF2C9","fa-grav":"\uF2D6","fa-paint-brush":"\uF1FC","fa-pencil":"\uF040","fa-skyatlas":"\uF216","fa-trademark":"\uF25C","fa-lemon-o":"\uF094","fa-assistive-listening-systems":"\uF2A2","fa-sort-numeric-asc":"\uF162","fa-pied-piper-alt":"\uF1A8","fa-power-off":"\uF011","fa-cube":"\uF1B2","fa-telegram":"\uF2C6","fa-umbrella":"\uF0E9","fa-viadeo":"\uF2A9","fa-file-o":"\uF016","fa-file-powerpoint-o":"\uF1C4","fa-angle-double-down":"\uF103","fa-plus":"\uF067","fa-database":"\uF1C0","fa-arrow-down":"\uF063","fa-microchip":"\uF2DB","fa-unsorted":"\uF0DC","fa-sort":"\uF0DC","fa-photo":"\uF03E","fa-image":"\uF03E","fa-picture-o":"\uF03E","fa-wheelchair-alt":"\uF29B","fa-mars-stroke-h":"\uF22B","fa-magnet":"\uF076","fa-file":"\uF15B","fa-step-backward":"\uF048","fa-unlink":"\uF127","fa-chain-broken":"\uF127","fa-strikethrough":"\uF0CC","fa-reddit":"\uF1A1","fa-superpowers":"\uF2DD","fa-bomb":"\uF1E2","fa-cart-plus":"\uF217","fa-cc-discover":"\uF1F2","fa-gg-circle":"\uF261","fa-share-alt":"\uF1E0","fa-stack-overflow":"\uF16C","fa-unlock-alt":"\uF13E","fa-play":"\uF04B","fa-low-vision":"\uF2A8","fa-binoculars":"\uF1E5","fa-puzzle-piece":"\uF12E","fa-blind":"\uF29D","fa-dedent":"\uF03B","fa-outdent":"\uF03B","fa-shield":"\uF132","fa-info":"\uF129","fa-tasks":"\uF0AE","fa-rupee":"\uF156","fa-inr":"\uF156"},ICONS_CONTENT=icons;exports.ICONS_CONTENT=ICONS_CONTENT}});var require_icons2=__commonJS({"lib-browser-old/core/core_elements/shared/icons.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.get_icon_svg=get_icon_svg;exports.get_static_icon=get_static_icon;exports.get_svg_canvas=get_svg_canvas;require_es_regexp_exec();require_es_string_replace();var icons_content=_interopRequireWildcard(require_icons_content()),safe_require=_interopRequireWildcard(require_safe_require());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}safe_require.safe_register("./core/core_elements/shared/icons",exports);function get_icon_element(){let element=$("#bubble-icon-retriever")[0];return element!=null||(element=$('<div id="bubble-icon-retriever" style="display: none; position: absolute;"></div>')[0],document.body.appendChild(element)),element}var orig_get_computed_style=null;function retrieve_get_computed_style(){let temp_iframe=document.createElement("iframe");document.body.appendChild(temp_iframe);let gcs=temp_iframe.contentWindow.getComputedStyle;return temp_iframe.remove(),gcs}function getComputedStyle2(){var _orig_get_computed_st;return(_orig_get_computed_st=orig_get_computed_style)!=null||(orig_get_computed_style=retrieve_get_computed_style()),orig_get_computed_style.apply(window,arguments)}function get_icon_content(icon_class){let icon_info_element=get_icon_element();return icon_info_element.setAttribute("class",icon_class),getComputedStyle2(icon_info_element,":before").content.replace(/"/g,"")}function get_static_icon(icon){return icons_content.ICONS_CONTENT[icon]}var _cached_icons={};function get_icon_svg(base_class,icon_class){var _cached_icons$icon_cl;let icon_content=(_cached_icons$icon_cl=_cached_icons[icon_class])!=null?_cached_icons$icon_cl:_cached_icons[icon_class]=get_icon_content(icon_class);return get_svg_canvas(base_class,icon_content)}function get_svg_canvas(base_class,icon_content,offset){var _offset;(_offset=offset)!=null||(offset=-18);let svg_canvas=$('<svg viewbox="0 '.concat(offset,' 50 50">\n    <text class="').concat(base_class,'" x="50%" y="50%" text-anchor="middle" style="font-size: 50px;fill: currentColor;">\n        ').concat(icon_content,"\n    </text>\n</svg>"));return svg_canvas.css({width:"100%",height:"100%"}),svg_canvas}}});var require_IconComponent=__commonJS({"lib-browser-old/core/core_elements/components/IconComponent.js"(exports){"use strict";init_define_process_env();init_shim();require_es_symbol_description();require_es_error_cause();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;require_es_array_iterator();require_web_dom_collections_iterator();var _web=(init_web(),__toCommonJS(web_exports)),icons=_interopRequireWildcard(require_icons2()),_createElement=require_createElement(),element_styles=_interopRequireWildcard(require_element_styles()),_directives=require_directives(),_properties=require_properties(),element_eval=_interopRequireWildcard(require_element_eval());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var _tmpl$=(0,_web.template)('<button><svg viewbox="0 -18 50 50"><text class="fa" x="50%" y="50%" text-anchor="middle"></text></svg></button>',6);function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}function IconComponent(props){return(()=>{let _el$=_tmpl$.cloneNode(!0),_el$2=_el$.firstChild,_el$3=_el$2.firstChild;(0,_web.use)(_directives.defaultEventHandlers,_el$,()=>props.instance);let _ref$=props.ref;return typeof _ref$=="function"?(0,_web.use)(_ref$,_el$):props.ref=_el$,_el$2.style.setProperty("width","100%"),_el$2.style.setProperty("height","100%"),_el$3.style.setProperty("font-size","50px"),_el$3.style.setProperty("fill","currentColor"),(0,_web.insert)(_el$3,()=>props.icon),(0,_web.effect)(_p$=>{let _v$=props.id,_v$2=_objectSpread({display:"flex"},props.style),_v$3=_objectSpread(_objectSpread({},props.classList),{},{"fa-spin":props.spin}),_v$4=props.tabIndex;return _v$!==_p$._v$&&(0,_web.setAttribute)(_el$,"id",_p$._v$=_v$),_p$._v$2=(0,_web.style)(_el$,_v$2,_p$._v$2),_p$._v$3=(0,_web.classList)(_el$,_v$3,_p$._v$3),_v$4!==_p$._v$4&&(0,_web.setAttribute)(_el$,"tabindex",_p$._v$4=_v$4),_p$},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),_el$})()}var _default=(0,_createElement.createElement)(IconComponent,null,element=>({properties:{icon:new _properties.Property(instance=>{let icon=element_eval.evaluate_property(instance,"icon");if(icon==null)return;let icon_id="".concat(icon.split(" ")[1]);return icons.get_static_icon(icon_id)}),spin:new _properties.Property(instance=>element_eval.evaluate_property(instance,"spin_icon")),tabIndex:new _properties.Property(instance=>element_eval.evaluate_property(instance,"button_disabled")?"-1":"")},styles:[new _properties.Style(instance=>({color:element_eval.evaluate_property(instance,"icon_color")})),...element_styles.placedStyling(element)]}));exports.default=_default}});var require_Icon2=__commonJS({"lib-browser-old/core/core_elements/elements/Icon.js"(){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();var u=_interopRequireWildcard(require_u2()),property_applications=_interopRequireWildcard(require_property_applications()),element_transformer=_interopRequireWildcard(require_element_transformer()),element_workflows=_interopRequireWildcard(require_element_workflows()),icons=_interopRequireWildcard(require_icons2()),element_eval=_interopRequireWildcard(require_element_eval()),_IconComponent=_interopRequireDefault(require_IconComponent());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}element_transformer.make_element("Icon",{category:"visual elements",glyph_id:"icon",list_order:3,keyboard_shortcut:"I",defaults:{font_alignment:"center",color:"#6676F2",background_style:"none",border_style:"none",border_roundness:4,border_width:2,border_color:"#6B6B6B",boxshadow_style:"none",width:80,height:80},updated_default_sizing:{width:30,height:30},default_states:[],properties_for_new:{icon:"fa fa-bars"},field_names:u.extend({icon:{default:"fa fa-flag-checkered"},icon_color:{default:"#6676F2",in_style:!0},spin_icon:{}},element_workflows.start_workflow_field_names),property_applications(element){return[new property_applications.Dimensions,new property_applications.FontShadow,new property_applications.Border,new property_applications.BoxShadow,new property_applications.Background,new property_applications.ResponsiveElement(element),new property_applications.ToolTip,new property_applications.PaddingFields,new property_applications.Opacity]},uses_css_responsive:!0,solid_component:_IconComponent.default,get_html(instance){return"<button></button>"},get_min_width(element){return 0},change_cursor_style_if_clickable:!0,can_defer_drawing(){return!0},initialize(instance){instance.wait_for_visible_lite(()=>{let canvas=instance.get_canvas();property_applications.patch_user_agent_styles(canvas),canvas.css("display","flex"),$(document).ready(()=>{instance.autorun(()=>{canvas.empty();let icon=element_eval.evaluate_property(instance,"icon");canvas.append(icons.get_icon_svg("fa",icon)),element_eval.evaluate_property(instance,"button_disabled")&&canvas.attr("tabindex","-1")})}),element_eval.on_property_change(instance,"icon_color",icon_color=>{canvas[0].style.color=icon_color}),element_eval.on_property_change(instance,"spin_icon",spin_icon=>{spin_icon||(spin_icon=!1),canvas.toggleClass("fa-spin",spin_icon)})})},transition_properties:{icon_color:"color"},is_input:!1,contains_group_data:!1,events:["ButtonClicked"],add_an_invisible_div_on_the_top:!1,css_files:["css/optional/font-awesome.min.css"]})}});var require_aspect_ratio=__commonJS({"lib-browser-old/core/core_elements/shared/aspect_ratio.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.element_css=element_css;exports.structure_fixed_aspect_ratio=structure_fixed_aspect_ratio;var b_ui=_interopRequireWildcard(require_b_ui());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function structure_fixed_aspect_ratio(instance,append_to){let aspect_ratio_div=b_ui.div("",append_to);instance.autorun(()=>{if(instance.element.has_fixed_aspect_ratio()){let ratio=instance.element.get_static_property("aspect_ratio_height")/instance.element.get_static_property("aspect_ratio_width");aspect_ratio_div.css({position:"relative","padding-top":ratio*100+"%"}),aspect_ratio_div.show()}else aspect_ratio_div.hide()})}function element_css(fixed_ratio_conditions){return{position:fixed_ratio_conditions?"absolute":"relative",top:0,left:0,display:"block","margin-top":"","margin-left":"",width:"100%",height:"100%"}}}});var require_ImageComponent=__commonJS({"lib-browser-old/core/core_elements/components/ImageComponent.js"(exports){"use strict";init_define_process_env();init_shim();require_es_symbol_description();require_es_error_cause();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _web=(init_web(),__toCommonJS(web_exports));require_es_array_iterator();require_web_dom_collections_iterator();require_es_object_assign();var _solidJs=(init_solid(),__toCommonJS(solid_exports)),_createElement=require_createElement(),element_styles=_interopRequireWildcard(require_element_styles()),_directives=require_directives(),_properties=require_properties(),image_utils=_interopRequireWildcard(require_image_utils()),_autorun_signals=require_autorun_signals(),b_object=_interopRequireWildcard(require_b_object()),apps_utilities=_interopRequireWildcard(require_apps_utilities()),_appquery=_interopRequireDefault(require_appquery()),element_eval=_interopRequireWildcard(require_element_eval()),element_props=_interopRequireWildcard(require_element_props());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var _tmpl$=(0,_web.template)('<div class="aspect-ratio"></div>',2),_tmpl$2=(0,_web.template)("<div><img></div>",3);function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var ASPECT_RATIO_CLASS="aspect-ratio",ASPECT_RATIO_SELECTOR=" .".concat(ASPECT_RATIO_CLASS),IMAGE_SELECTOR=" img";function isSrcStatic(element){let prop=element.property("src");return!prop.is_empty()&&prop.is_static()&&element.get_static_property("src",!0)!==""}function ImageComponent(props){let instance=props.instance,[src,setSrc]=(0,_solidJs.createSignal)(image_utils.transparent_image()),width=(0,_autorun_signals.createWatcher)(()=>instance.current_width()),height=(0,_autorun_signals.createWatcher)(()=>instance.current_height()),fittingHeight=(0,_autorun_signals.createWatcher)(()=>element_props.is_fitting_height(instance)),currentDownload=null;(0,_solidJs.createEffect)(lastSource=>{if(width()==null||height()==null)return;let originalSource;if(instance.run_mode()||!props.editorPreviewImage||!props.src?originalSource=props.src:originalSource=props.editorPreviewImage,!originalSource||b_object.is_empty(originalSource))return setSrc(image_utils.transparent_image()),null;function assignImage(source,width2,height2,imgixOptions){let optimizedSource=image_utils.optimize_image(source,width2,height2,imgixOptions);function beginDownload(){currentDownload=optimizedSource,image_utils.download_image(optimizedSource,instance,newSrc=>{currentDownload===optimizedSource&&setSrc(newSrc)})}if(source===lastSource&&!image_utils.downloaded_images[optimizedSource]&&!apps_utilities.is_test(_appquery.default.appname())){let timeout=instance.setTimeout(beginDownload,300);(0,_solidJs.onCleanup)(()=>{instance.clearTimeout(timeout)})}else beginDownload()}if(props.isStatic)assignImage(originalSource,width(),height(),{});else{if(fittingHeight()==null)return;!props.useAspectRatio&&fittingHeight()?assignImage(originalSource,width()):assignImage(originalSource,width(),height())}return originalSource},null);let cropStyle=(0,_solidJs.createMemo)(()=>props.isStatic&&props.cropData?{"margin-top":"".concat(props.cropData.top_offset*height(),"px")}:{});return(()=>{let _el$=_tmpl$2.cloneNode(!0),_el$3=_el$.firstChild;(0,_web.use)(_directives.defaultEventHandlers,_el$,()=>props.instance);let _ref$=props.ref;return typeof _ref$=="function"?(0,_web.use)(_ref$,_el$):props.ref=_el$,(0,_web.insert)(_el$,(0,_web.createComponent)(_solidJs.Show,{get when(){return props.useAspectRatio},get children(){let _el$2=_tmpl$.cloneNode(!0);return(0,_web.effect)(_$p=>(0,_web.style)(_el$2,props.childStyles[ASPECT_RATIO_SELECTOR],_$p)),_el$2}}),_el$3),(0,_web.effect)(_p$=>{let _v$=props.id,_v$2=props.style,_v$3=props.classList,_v$4=src(),_v$5=props.altTag,_v$6=_objectSpread(_objectSpread({},props.childStyles[IMAGE_SELECTOR]),cropStyle());return _v$!==_p$._v$&&(0,_web.setAttribute)(_el$,"id",_p$._v$=_v$),_p$._v$2=(0,_web.style)(_el$,_v$2,_p$._v$2),_p$._v$3=(0,_web.classList)(_el$,_v$3,_p$._v$3),_v$4!==_p$._v$4&&(0,_web.setAttribute)(_el$3,"src",_p$._v$4=_v$4),_v$5!==_p$._v$5&&(0,_web.setAttribute)(_el$3,"alt",_p$._v$5=_v$5),_p$._v$6=(0,_web.style)(_el$3,_v$6,_p$._v$6),_p$},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0}),_el$})()}var _default=(0,_createElement.createElement)(ImageComponent,element=>({isStatic:isSrcStatic(element),useAspectRatio:element.has_fixed_aspect_ratio()}),(element,_ref)=>{let{isStatic,useAspectRatio}=_ref;return{properties:{altTag:new _properties.Property(instance=>element_eval.evaluate_property(instance,"alt_tag")),src:new _properties.Property(instance=>element_eval.evaluate_property(instance,"src")),cropData:new _properties.Property(instance=>element_eval.evaluate_property(instance,"crop_data")),editorPreviewImage:new _properties.Property(instance=>element_eval.evaluate_property(instance,"editor_preview_image"))},styles:[new _properties.Style(instance=>{let style2={top:"0px",left:"0px",display:"block",width:"100%",height:"100%"};if(isStatic){style2.position="absolute";let cropData=element_eval.evaluate_property(instance,"crop_data");if(cropData!=null){let makeCssPercentage=function(num){return"".concat(Math.floor(num*100),"%")};Object.assign(style2,{width:makeCssPercentage(cropData.width_factor),height:makeCssPercentage(cropData.height_factor),"margin-left":makeCssPercentage(cropData.left_offset)})}}else{let objectFits={rescale:"contain",adjust_height:"contain",stretch:"fill",zoom:"cover"},stretchOrScale=element_eval.evaluate_property(instance,"stretch_or_rescale");style2["object-fit"]=objectFits[stretchOrScale],!useAspectRatio&&element_props.is_fitting_height(instance)?(style2.position="relative",style2.height="auto"):style2.position="absolute"}return style2},{selector:IMAGE_SELECTOR}),new _properties.Style(instance=>{if(element_eval.evaluate_property(instance,"four_border_style")){let style2={};for(let side in["top","right","bottom","left"])style2["border-radius-".concat(side)]="".concat(element_eval.evaluate_property(instance,"border_roundness_".concat(side)),"px")}else return{"border-radius":"".concat(element_eval.evaluate_property(instance,"border_roundness"),"px")}},{selector:IMAGE_SELECTOR}),new _properties.Style(instance=>{if(useAspectRatio){let aspectRatio=instance.get_static_property("aspect_ratio_height")/instance.get_static_property("aspect_ratio_width");return{position:"relative",height:0,"padding-top":"".concat(aspectRatio*100,"%")}}else return{}},{selector:ASPECT_RATIO_SELECTOR}),...element_styles.placedStyling(element)]}});exports.default=_default}});var require_Image2=__commonJS({"lib-browser-old/core/core_elements/elements/Image.js"(){"use strict";init_define_process_env();init_shim();require_es_weak_map();require_es_array_iterator();require_web_dom_collections_iterator();var u=_interopRequireWildcard(require_u2()),property_applications=_interopRequireWildcard(require_property_applications()),apps_utilities=_interopRequireWildcard(require_apps_utilities()),_appquery=_interopRequireDefault(require_appquery()),element_transformer=_interopRequireWildcard(require_element_transformer()),element_workflows=_interopRequireWildcard(require_element_workflows()),image_utils=_interopRequireWildcard(require_image_utils()),aspect_ratio=_interopRequireWildcard(require_aspect_ratio()),element_eval=_interopRequireWildcard(require_element_eval()),element_props=_interopRequireWildcard(require_element_props()),_ImageComponent=_interopRequireDefault(require_ImageComponent());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function is_src_static(element){let prop=element.property("src");if(!prop.is_empty()&&prop.is_static()&&element.get_static_property("src",!0)!=="")return!0}element_transformer.make_element("Image",{category:"visual elements",glyph_id:"image",list_order:4,keyboard_shortcut:null,defaults:{width:320,height:240},collapse_margin:500,keep_proportion_resize:!0,field_names:u.extend({src:{},stretch_or_rescale:{default:"rescale",no_states:!0},crop_data:{no_states:!0},keep_proportion_resize:{no_states:!0},alt_tag:{},editor_preview_image:{no_states:!0,only_edit_mode:!0}},element_workflows.start_workflow_field_names),uses_css_responsive:!0,solid_component:_ImageComponent.default,use_legacy_in_editor:!0,can_fix_aspect_ratio(){return!0},can_fit_height(element){return!is_src_static(element)},property_applications(element){return[new property_applications.Dimensions,new property_applications.Border,new property_applications.BoxShadow,new property_applications.ResponsiveElement(element),new property_applications.ToolTip,new property_applications.Rotation,new property_applications.Opacity]},get_html(){return"<div></div>"},can_defer_drawing(){return!0},initialize(instance){let canvas=instance.get_canvas();instance.wait_for_visible_lite(()=>{let display_text,img=u.img(void 0,canvas);instance.run_mode()||(display_text=u.div("display_text",canvas));let _last_autorun_execution=null,_last_saved_source=null;instance.run_mode()&&element_eval.on_property_change(instance,"alt_tag",val=>{img[0].alt=val!=null?val:""}),element_eval.pre_cache(instance,["src","stretch_or_rescale","crop_data","editor_preview_image"]),aspect_ratio.structure_fixed_aspect_ratio(instance,canvas);let width_box=null,height_box=null;if(instance.autorun(()=>{var _width_box,_height_box;let properties={};for(let prop of["src","stretch_or_rescale","crop_data","keep_proportion_resize","editor_preview_image"])properties[prop]=element_eval.evaluate_property(instance,prop);let is_static=is_src_static(instance.element);if(img.css(aspect_ratio.element_css(is_static||instance.element.has_fixed_aspect_ratio()||!element_props.is_fitting_height(instance))),!instance.run_mode())if(!is_static&&!properties.editor_preview_image){var _properties$src;display_text.html((_properties$src=properties.src)!=null?_properties$src:""),display_text.show(),display_text.css({display:"block",overflow:"hidden",width:"100%",color:"grey",position:"absolute"}),canvas.css("overflow","hidden"),img.hide();return}else display_text.hide(),img.show();(_width_box=width_box)!=null||(width_box=u.Box(canvas.width())),(_height_box=height_box)!=null||(height_box=u.Box(canvas.height()));function assign_image_to_element(source,width,height,imgix_options){let current_autorun_execution;_last_autorun_execution=current_autorun_execution=u.LUID();function begin_download(optimized_source2){_last_autorun_execution===current_autorun_execution&&image_utils.download_image(optimized_source2,instance,new_src=>{_last_autorun_execution===current_autorun_execution&&(_last_saved_source=source,img[0].src=new_src)})}let optimized_source=image_utils.optimize_image(source,width,height,imgix_options),delay=source===_last_saved_source&&!image_utils.downloaded_images[optimized_source];delay&&apps_utilities.is_test(_appquery.default.appname())&&(delay=!1),delay?instance.setTimeout(begin_download.bind(null,optimized_source),300):begin_download(optimized_source)}if(!instance.run_mode()&&properties.editor_preview_image&&properties.src)instance.autorun(()=>{assign_image_to_element(properties.editor_preview_image,width_box(),height_box())});else if(properties.src&&!u.is_empty(properties.src))if(img[0].src||(img[0].src=image_utils.transparent_image(),image_utils.reset_img_settings(img)),image_utils.reset_img_settings(img),is_static){let imgix_responsive_options;if(properties.keep_proportion_resize?imgix_responsive_options={fit:"crop"}:imgix_responsive_options={},properties.crop_data!=null){let make_css_percentage=num=>"".concat(Math.floor(num*100),"%");img.css({width:make_css_percentage(properties.crop_data.width_factor),height:make_css_percentage(properties.crop_data.height_factor),"margin-left":make_css_percentage(properties.crop_data.left_offset)})}instance.autorun(()=>{assign_image_to_element(properties.src,width_box(),height_box(),imgix_responsive_options),properties.crop_data!=null&&img.css("margin-top",properties.crop_data.top_offset*height_box())})}else{let object_fits={rescale:"contain",adjust_height:"contain",stretch:"fill",zoom:"cover"};img.css({"object-fit":object_fits[properties.stretch_or_rescale]}),!instance.element.has_fixed_aspect_ratio()&&element_props.is_fitting_height(instance)?(img.css("height","auto"),instance.autorun(()=>{assign_image_to_element(properties.src,width_box())})):instance.autorun(()=>{assign_image_to_element(properties.src,width_box(),height_box())})}else img[0].src=image_utils.transparent_image(),_last_saved_source=null,image_utils.reset_img_settings(img)}),typeof ResizeObserver<"u"&&ResizeObserver!==null&&!instance.thumbnail_mode()){let resize_observer=new ResizeObserver(entries=>{var _width_box2,_height_box2;(_width_box2=width_box)==null||_width_box2(entries[0].contentRect.width),(_height_box2=height_box)==null||_height_box2(entries[0].contentRect.height)});resize_observer.observe(canvas[0]),instance.on_destroy(()=>resize_observer.disconnect())}instance.autorun(()=>{if(element_eval.evaluate_property(instance,"four_border_style"))for(let border_location of["top","right","bottom","left"])img[0].style["border-radius-".concat(border_location)]=element_eval.evaluate_property(instance,"border_roundness_"+border_location)+"px";else img[0].style["border-radius"]=element_eval.evaluate_property(instance,"border_roundness")+"px"})})},get_min_width(element){return 0},change_cursor_style_if_clickable:!0,add_an_invisible_div_on_the_top:!1,is_input:!1,contains_group_data:!1,events:["ButtonClicked"]})}});var require_input_mask=__commonJS({"lib-browser-old/core/input_mask.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.masks=exports.file=void 0;require_es_parse_int();require_es_parse_float();require_es_regexp_exec();require_es_string_split();var u=_interopRequireWildcard(require_u2()),b_date=_interopRequireWildcard(require_b_date()),_lib=_interopRequireDefault(require_lib());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var moment=b_date.require_moment(),file="jquery_plugins/jquery.inputmask";exports.file=file;var InputMask=class{constructor(caption,mask){this.caption=caption,this.mask=mask,this.btype="text"}format_val(val,options){return this.format_text(val)}get_val(canvas,options){var _canvas$inputmask,_canvas$inputmask2;return this.parse_val((_canvas$inputmask=(_canvas$inputmask2=canvas.inputmask)==null?void 0:_canvas$inputmask2.call(canvas,"unmaskedvalue"))!=null?_canvas$inputmask:canvas.val(),options)}parse_val(text,options){return text}is_valid_text(text){let formatted=this.format_text(text);return window.Inputmask.isValid(formatted,this.get_mask())}get_mask(options){var _options;return(_options=options)!=null||(options={}),u.extend({greedy:!1},this.mask,options)}format_text(text,options){return window.Inputmask.format(text!=null?text:"",this.get_mask(options))}},NumberMask=class extends InputMask{constructor(caption,type,mask){super(caption,mask),this.type=type,this.btype="number"}get_mask(options){var _options2;(_options2=options)!=null||(options={});let{decimal_separator,group_separator}=(0,_lib.default)().locale().get_regional_separators();return u.extend({greedy:!1,radixPoint:decimal_separator,groupSeparator:group_separator},this.mask,options)}format_val(val,options){if(val!=null){let localized=(0,_lib.default)().locale().format_number(val,options.digits);return this.format_text(localized,options)}else return""}parse_val(text){let float_val=(0,_lib.default)().locale().parse_float(text);if(isNaN(float_val))return null;if(this.type==="integer"){let int_val=parseInt(float_val);return isNaN(int_val)?null:int_val}else return float_val}is_valid_text(text){if(this.type==="integer"){let parsed=this.parse_val(text);return parsed==null||isNaN(parsed)?!1:parsed===0||String(parsed)===text}else return!0}},PercentageMask=class extends NumberMask{format_val(val,options){if(val==null)return"";let parsed=(0,_lib.default)().locale().parse_float(val);if(isNaN(parsed)||(val=val*100,val=parseFloat(val.toPrecision(12))),val!=null){let localized=(0,_lib.default)().locale().format_number(val,options.digits);return this.format_text(localized,options)}else return""}parse_val(text){let input_val=super.parse_val(text);return input_val==null?input_val:input_val/100}},DateMask=class extends InputMask{constructor(caption,_ref){let{separator,order}=_ref,date_format=order.join(separator),mask={alias:"datetime",inputFormat:date_format,placeholder:date_format};super(caption,mask),this.btype="date",this.date_format=date_format,this.separator=separator,this.order=order}format_val(val,options){return b_date.format_date(b_date.mk_date(val),this.date_format,null,options.timezone)}parse_val(text,options){if(text){var _options$timezone;let day,month,year,string_date=text.split(this.separator);for(let i=0;i<this.order.length;i++){let part=this.order[i];part[0]==="m"?month=string_date[i]:part[0]==="d"?day=string_date[i]:year=string_date[i]}let tz=(_options$timezone=options==null?void 0:options.timezone)!=null?_options$timezone:(0,_lib.default)().current_timezone();return moment.tz([year,month-1,day],tz).toDate()}else return null}is_valid_text(val){return!!b_date.mk_date(val)}},TelMask=class extends InputMask{format_val(val){return val===""||val==null?"":this.format_text(val)}},masks={us_phone:new TelMask("US Phone",{mask:"(999) 999-9999",placeholder:"_",inputmode:"tel"}),us_ssn:new InputMask("US SSN",{alias:"ssn"}),percentage:new PercentageMask("Percentage","float",{alias:"decimal",suffix:"%",placeholder:"0",inputmode:"text"}),currency:new NumberMask("Currency","float",{alias:"currency",digits:2,inputmode:"decimal"}),date:new DateMask("Date",{separator:"/",order:["mm","dd","yyyy"]}),date_2:new DateMask("Euro date",{separator:".",order:["dd","mm","yyyy"]}),time:new InputMask("Time",{alias:"datetime",inputFormat:"HH:MM:ss",placeholder:"hh:mm:ss"}),date_time:new InputMask("Date/Time",{alias:"datetime",inputFormat:"mm/dd/yyyy HH:MM:ss",placeholder:"mm/dd/yyyy hh:mm:ss"}),date_time_no_seconds:new InputMask("Date/Time (no seconds)",{alias:"datetime",inputFormat:"mm/dd/yyyy hh:MM tt",placeholder:"mm/dd/yyyy hh:mm xm"}),numerical_ref:new InputMask("Text (numbers only)",{placeholder:"",mask:"9{1,30}",inputmode:"numeric"}),credit_card_number:new InputMask("Credit card number",{placeholder:"",mask:"9999 9999 9999 [9][9][9][9]"}),credit_card_cvc:new InputMask("Credit card CVC",{placeholder:"",mask:"9{3,4}"}),credit_card_exp_month:new InputMask("Credit card exp month",{placeholder:"",mask:"9[9]"}),credit_card_exp_year:new InputMask("Credit card exp year",{placeholder:"",mask:"9999"}),bank_routing_number:new InputMask("Routing number",{placeholder:"",mask:"999999999"}),int_number:new NumberMask("Integer","integer",{alias:"numeric",digits:0,placeholder:"",autoGroup:!0,_radixDance:!1}),float_number:new NumberMask("Decimal","float",{alias:"numeric",placeholder:"",autoGroup:!0,_radixDance:!1,inputmode:"text"})};exports.masks=masks}});var require_account_actions_utilities=__commonJS({"lib-browser-old/core/core_actions/utilities/account_actions_utilities.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();var u=require_u2(),state_keys=require_state_keys(),configuration=require_client_config2(),Lib=require_lib(),appquery=require_appquery(),account_actions_utilities=exports;account_actions_utilities.get_iframe_for_cookie_phonegap=function(){if(u.on_phonegap()){let appname=appquery.appname(),hook;configuration.apps_domain?hook="https://"+appname+"."+configuration.apps_domain:hook=Lib().location.get_base_for_meta()+"/site/"+appname,hook+="/version-"+appquery.app_version()+"/user/hi";let phonegap_user_iframe=$('<iframe src="'.concat(hook,'"></iframe>'));phonegap_user_iframe.load(()=>{phonegap_user_iframe.remove()}),$("body").append(phonegap_user_iframe)}};account_actions_utilities.refresh_current_user=function(){let d={};d[state_keys.CurrentUser()]=null;let current_user=Lib().current_user();d[state_keys.Message({prev:current_user,message:"email",prior_btype_id:"user"})]=null;for(let oauth_provider of appquery.get_oauth_providers())d[state_keys.Message({prev:current_user,message:oauth_provider,prior_btype_id:"user"})]=null;return d};account_actions_utilities.get_remember_email_key=()=>"_bubble_saved_email_"+Lib().appname()+"_"+Lib().app_version()}});var require_InputComponent=__commonJS({"lib-browser-old/core/core_elements/components/InputComponent.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _web=(init_web(),__toCommonJS(web_exports));require_es_parse_int();require_es_regexp_to_string();require_es_array_includes();var b_ui=_interopRequireWildcard(require_b_ui()),b_window=_interopRequireWildcard(require_b_window()),autorun=_interopRequireWildcard(require_autorun3()),page_state=_interopRequireWildcard(require_page_state()),input_mask=_interopRequireWildcard(require_input_mask()),btypes=_interopRequireWildcard(require_btypes()),_lib=_interopRequireDefault(require_lib()),b_location=_interopRequireWildcard(require_b_location()),custom_tz_utilities=_interopRequireWildcard(require_custom_tz_utilities()),b_date=_interopRequireWildcard(require_b_date()),element_eval=_interopRequireWildcard(require_element_eval()),_createElement=require_createElement(),element_styles=_interopRequireWildcard(require_element_styles()),_directives=require_directives(),_properties=require_properties(),_solidJs=(init_solid(),__toCommonJS(solid_exports)),_timezone_override_settings=require_timezone_override_settings(),_autorun_signals=require_autorun_signals();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var _tmpl$=(0,_web.template)("<input>",1);function get_timezone(instance){return(0,_timezone_override_settings.has_input_timezone_controls_on)()?custom_tz_utilities.get_custom_tz({static_eval:prop_name=>instance.get_static_property(prop_name),dynamic_eval:prop_name=>element_eval.evaluate_property(instance,prop_name),not_overridden:!0}):(0,_lib.default)().current_timezone()}function is_datelike_format(content_format){return content_format==="date"||content_format==="date_2"}function formatInputContent(instance,existing_val){let returnedVal,contentFormat=instance.get_static_property("content_format");switch(contentFormat){case"int_number":returnedVal=parseInt((0,_lib.default)().locale().parse_float(existing_val));break;case"float_number":case"percentage":case"currency":returnedVal=(0,_lib.default)().locale().parse_float(existing_val);break;case"geographic_address":returnedVal=function(){return b_location.from_address(existing_val)};break;case"date":case"date_2":{let tz_name=get_timezone(instance);returnedVal=b_date.mk_date(existing_val,tz_name);break}default:if(returnedVal=existing_val,(contentFormat==null||contentFormat==="text"||contentFormat==="numerical_ref")&&instance.get_static_property("limit_number_of_characters")){let characterLimit=instance.get_static_property("character_limit");characterLimit!=null&&returnedVal!=null&&returnedVal.length>characterLimit&&(returnedVal=returnedVal.slice(0,characterLimit))}}return typeof returnedVal=="number"&&isNaN(returnedVal)?null:returnedVal}function formatToType(contentFormat){if(b_window.is_on_mobile_or_tablet()){if(contentFormat==="int_number"||contentFormat==="us_phone"||contentFormat==="numerical_ref")return"tel";if(contentFormat==="float_number")return"number"}switch(contentFormat){case"password":return"password";case"email":return"email";default:return"input"}}function InputComponent(props){let instance=props.instance,val_not_null=(0,_autorun_signals.createWatcher)(()=>instance.state("value")!=null);function getInputMaskOptions(contentFormat){let options={clearMaskOnLostFocus:!0,showMaskOnHover:!1,greedy:!1,rightAlign:!1,inputEventOnly:!0};if(contentFormat==="currency"&&(options.prefix=element_eval.evaluate_property(instance,"currency_symbol"),instance.get_static_property("always_show_decimals")?(options.digitsOptional=!1,options.placeholder="0"):(options.digitsOptional=!0,options.placeholder="")),contentFormat==="float_number"||contentFormat==="percentage"){let digits=instance.get_static_property("decimal_place");digits!=null&&digits>=0&&(options.digits=digits,options.digitsOptional=!1,options.placeholder="0",options._radixDance=!0,options.inputEventOnly=!1,val_not_null()&&(options.clearMaskOnLostFocus=!1)),contentFormat==="float_number"&&!instance.get_static_property("show_thousands")&&(options.autoGroup=!1,options.groupSeparator="")}return is_datelike_format(contentFormat)&&(options.timezone=get_timezone(instance)),options}let showThousands=()=>instance.get_static_property("show_thousands"),forceDigits=()=>instance.get_static_property("decimal_place")!=null;function usingInputMask(format){return format in input_mask.masks?format==="int_number"?showThousands():format==="float_number"?showThousands()||forceDigits():!0:!1}(0,_solidJs.onMount)(()=>{let autorun2=instance.autorun(()=>{let contentFormat=instance.get_static_property("content_format"),current_tz=instance.state("current_tz");if(instance.state("has_been_changed")&&current_tz===void 0||instance.state("is_focused"))return;let val=instance.state("value");contentFormat==="geographic_address"?val=btypes.get("geographic_address").runmode_display(val):instance.run_mode()&&(usingInputMask(contentFormat)?val=input_mask.masks[contentFormat].format_val(val,getInputMaskOptions(contentFormat)):typeof val=="number"&&(contentFormat==="int_number"?val=parseInt(val).toString():contentFormat==="float_number"&&(val=(0,_lib.default)().locale().format_decimal(val)))),instance.canvas.val(val!=null?val:"")});(0,_solidJs.onCleanup)(()=>{autorun2.destroy()})});function getValue(){let contentFormat=instance.get_static_property("content_format");if(contentFormat in input_mask.masks){let options={};return is_datelike_format(contentFormat)&&(options.timezone=instance.state("current_tz")),input_mask.masks[contentFormat].get_val(instance.get_canvas(),options)}else return formatInputContent(instance,instance.get_canvas().val())}return(0,_solidJs.onMount)(()=>{if(instance.run_mode()){instance.on_message("set_focus",()=>{instance.canvas.focus()});let contentFormat=instance.get_static_property("content_format");if(is_datelike_format(contentFormat)){let tz_ar=instance.autorun(()=>{instance.state("current_tz",get_timezone(instance))});(0,_solidJs.onCleanup)(()=>{tz_ar.destroy()})}if(contentFormat==="password"&&instance.canvas.passMeter({events:"keyup input change",afterTest:score=>{score===0&&instance.canvas.val()===""&&(score=null),instance.state("pw_strength",score)}}),contentFormat==="int_number"&&!showThousands())b_ui.make_numeric(instance.canvas,!0);else if(contentFormat==="float_number"&&!showThousands()&&!forceDigits())b_ui.make_numeric(instance.canvas);else if(contentFormat in input_mask.masks){let ar=autorun.autorun(function(){let options=input_mask.masks[contentFormat].get_mask(getInputMaskOptions(contentFormat));instance.canvas.inputmask(options),instance.canvas.off("click.inputmask"),instance.canvas.on("click.inputmask",evt=>{$(evt.target).trigger("inputmaskclick")})});(0,_solidJs.onCleanup)(()=>{ar.destroy()})}}}),(0,_solidJs.onMount)(()=>{instance.canvas.blur(()=>{page_state.input_focused(!1)}),instance.canvas.focus(()=>{page_state.input_focused(!0)})}),(()=>{let _el$=_tmpl$.cloneNode(!0);(0,_web.use)(_directives.enterHandler,_el$,()=>[instance,props.needsMetaKey]),(0,_web.use)(_directives.inputChangeKeyupHandlers,_el$,()=>[instance,getValue]),(0,_web.use)(_directives.defaultEventHandlers,_el$,()=>props.instance);let _ref$=props.ref;return typeof _ref$=="function"?(0,_web.use)(_ref$,_el$):props.ref=_el$,(0,_web.effect)(_p$=>{let _v$=props.id,_v$2=props.style,_v$3=props.classList,_v$4=props.type==="number"?"input":props.type,_v$5=props.placeholder,_v$6=!instance.run_mode(),_v$7=props.maxlength,_v$8=props.disabled,_v$9=props.type==="number"?"decimal":void 0,_v$10=props.type==="password"?"new-password":void 0;return _v$!==_p$._v$&&(0,_web.setAttribute)(_el$,"id",_p$._v$=_v$),_p$._v$2=(0,_web.style)(_el$,_v$2,_p$._v$2),_p$._v$3=(0,_web.classList)(_el$,_v$3,_p$._v$3),_v$4!==_p$._v$4&&(0,_web.setAttribute)(_el$,"type",_p$._v$4=_v$4),_v$5!==_p$._v$5&&(0,_web.setAttribute)(_el$,"placeholder",_p$._v$5=_v$5),_v$6!==_p$._v$6&&(_el$.readOnly=_p$._v$6=_v$6),_v$7!==_p$._v$7&&(0,_web.setAttribute)(_el$,"maxlength",_p$._v$7=_v$7),_v$8!==_p$._v$8&&(_el$.disabled=_p$._v$8=_v$8),_v$9!==_p$._v$9&&(0,_web.setAttribute)(_el$,"inputmode",_p$._v$9=_v$9),_v$10!==_p$._v$10&&(0,_web.setAttribute)(_el$,"autocomplete",_p$._v$10=_v$10),_p$},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0,_v$9:void 0,_v$10:void 0}),_el$})()}var _default=(0,_createElement.createElement)(InputComponent,null,element=>({properties:{type:new _properties.Property(instance=>formatToType(instance.get_static_property("content_format")),{alwaysDynamic:!0}),placeholder:new _properties.Property(instance=>element_eval.evaluate_property(instance,"placeholder")),maxlength:new _properties.Property(instance=>{if(instance.get_static_property("limit_number_of_characters")){let characterLimit=element_eval.evaluate_property(instance,"character_limit"),contentFormat=element_eval.evaluate_property(instance,"content_format");if(characterLimit&&[null,void 0,"text","numerical_ref"].includes(contentFormat))return characterLimit}return null}),disabled:new _properties.Property(instance=>element_eval.evaluate_property(instance,"disabled")),needsMetaKey:new _properties.Property(instance=>element_eval.evaluate_property(instance,"not_submit_on_enter")),tz_dynamic:new _properties.Property(instance=>element_eval.evaluate_property(instance,"tz_dynamic"))},styles:element_styles.placedStyling(element)}));exports.default=_default}});var require_Input2=__commonJS({"lib-browser-old/core/core_elements/elements/Input.js"(){"use strict";init_define_process_env();init_shim();require_es_parse_float();require_es_array_includes();require_es_array_iterator();require_web_dom_collections_iterator();require_es_string_trim();var u=require_u2(),b_location=require_b_location(),input_mask=require_input_mask(),property_applications=require_property_applications(),btypes=require_btypes(),domain_utilities=require_domain_utilities(),account_actions_utilities=require_account_actions_utilities(),Lib=require_lib(),element_utils=require_element_utils(),element_transformer=require_element_transformer(),inputs=require_inputs(),page_state=require_page_state(),{PADDING_VERSION}=require_elements(),b_date=require_b_date(),custom_tz_utilities=require_custom_tz_utilities(),InputComponent=require_InputComponent().default,element_eval=require_element_eval(),{has_input_timezone_controls_on}=require_timezone_override_settings();function get_timezone(instance){return has_input_timezone_controls_on()?custom_tz_utilities.get_custom_tz({static_eval:prop_name=>instance.get_static_property(prop_name),dynamic_eval:prop_name=>element_eval.evaluate_property(instance,prop_name),not_overridden:!0}):Lib().current_timezone()}function is_datelike_format(content_format){return content_format==="date"||content_format==="date_2"}function format_input_content(instance,existing_val){let returned_val,format=instance.get_static_property("content_format");switch(format){case"int_number":{let numeric_val=parseFloat(existing_val);returned_val=Number.isNaN(numeric_val)?null:Math.round(numeric_val);break}case"float_number":case"percentage":case"currency":returned_val=existing_val;break;case"geographic_address":returned_val=()=>b_location.from_address(existing_val);break;case"date":case"date_2":{let tz_name=get_timezone(instance);returned_val=b_date.mk_date(existing_val,tz_name)}break;default:if(returned_val=existing_val,[null,void 0,"text","numerical_ref"].includes(format)&&instance.get_static_property("limit_number_of_characters")){let character_limit=instance.get_static_property("character_limit");character_limit!=null&&returned_val!=null&&returned_val.length>character_limit&&(returned_val=returned_val.slice(0,character_limit))}}return typeof returned_val=="number"&&isNaN(returned_val)?null:returned_val}for(let name of["us_phone","percentage","currency","date","date_2","numerical_ref"]){if(!(name in input_mask.masks))throw new u.UnexpectedError("".concat(name," should be a valid mask"));inputs.input_content_options[name]=(_input_mask$masks$nam=input_mask.masks[name].caption)!=null?_input_mask$masks$nam:u.toTitleCase(name)}var _input_mask$masks$nam;element_transformer.make_element("Input",{category:"input forms",glyph_id:"text_input",list_order:1,keyboard_shortcut:null,defaults:u.extend({},inputs.default_for_inputs,{width:250,height:45,use_max_width:!0,max_width:150}),updated_default_sizing:{height:48},default_states:inputs.default_states_for_inputs,field_names:u.extend({placeholder:{default:"Type here..."},content:{},content_format:{default:"text",no_states:!0},currency_symbol:{default:"$"},show_thousands:{no_states:!0},always_show_decimals:{no_states:!0},decimal_place:{no_states:!0},have_a_numerical_range:{no_states:!0},min_range_value:{},max_range_value:{},check_password_policy:{no_states:!0}},inputs.additional_field_names_for_text_inputs,custom_tz_utilities.custom_tz_field_names),property_applications(element){return[new property_applications.Dimensions,new property_applications.Background,new property_applications.Border,new property_applications.BoxShadow,new property_applications.Font,new property_applications.FontSpacing(null,["line_height"]),new property_applications.InputPadding,new property_applications.PaddingFields({minimum_element_version:PADDING_VERSION,allow_legacy:!0}),new property_applications.PlaceholderColor,new property_applications.ResponsiveElement(element),new property_applications.Opacity]},uses_css_responsive:!0,solid_component:InputComponent,use_legacy_in_editor:!0,use_legacy_in_thumbnail:!0,can_defer_drawing(){return!0},get_html(instance){let type=this._format_to_type(instance.get_static_property("content_format"));return type==="number"?'<input type="input" inputmode="decimal"></input>':type==="password"?'<input type="'+type+'" autocomplete="new-password"></input>':'<input type="'+type+'"></input>'},_format_to_type(content_format){if(u.is_on_mobile_or_tablet()){if(["int_number","us_phone","numerical_ref"].includes(content_format))return"tel";if(content_format==="float_number")return"number"}switch(content_format){case"password":return"password";case"email":return"email";default:return"input"}},get_min_width(element){return 0},is_secure(instance){return["password","us_ssn","bank_routing_number","credit_card_number","credit_card_cvc","credit_card_exp_month","credit_card_exp_year"].includes(instance.get_static_property("content_format"))},initialize(instance){instance.wait_for_visible_lite(()=>{var _instance$element$roo,_instance$element$roo2;let canvas=instance.get_canvas();inputs.reset_input_div(canvas),canvas.focus(()=>{page_state.input_focused(!0)}),canvas.on("blur",()=>{page_state.input_focused(!1)}),((_instance$element$roo=instance.element.root())==null?void 0:_instance$element$roo.get_responsive_version())===0&&element_utils.register_tab_index_listener(instance,tabindex=>{canvas.attr("tabindex",tabindex)});function get_input_mask_options(content_format){let options={clearMaskOnLostFocus:!0,showMaskOnHover:!1,greedy:!1,rightAlign:!1,inputEventOnly:!0};if(content_format==="currency"&&(options.prefix=element_eval.evaluate_property(instance,"currency_symbol"),instance.get_static_property("always_show_decimals")?(options.digitsOptional=!1,options.placeholder="0"):(options.digitsOptional=!0,options.placeholder="")),["float_number","percentage"].includes(content_format)){let digits=instance.get_static_property("decimal_place");digits!=null&&digits>=0&&(options.digits=digits,options.digitsOptional=!1,options.placeholder="0",options._radixDance=!0,options.inputEventOnly=!1)}return["float_number","int_number"].includes(content_format)&&!instance.get_static_property("show_thousands")&&(options.autoGroup=!1,options.groupSeparator=""),is_datelike_format(content_format)&&(options.timezone=get_timezone(instance)),options}let using_input_mask=format=>format in input_mask.masks;instance.autorun(()=>{let new_placeholder=element_eval.evaluate_property(instance,"placeholder");canvas.attr("placeholder",new_placeholder),canvas.get()[0].inputmask!=null&&(canvas.get()[0].inputmask.originalPlaceholder=new_placeholder)}),inputs.set_character_limit_on_input(instance),instance.run_mode()||canvas.attr("readonly","true");let prev_tz;if(instance.autorun(()=>{var _val;let content_format_on_input_change=instance.get_static_property("content_format"),current_tz=instance.state("current_tz");if(instance.state("has_been_changed")&&current_tz===prev_tz||(prev_tz=current_tz,instance.state("is_focused")))return;let val=instance.state("value");content_format_on_input_change==="geographic_address"?val=btypes.get("geographic_address").runmode_display(val):instance.run_mode()&&using_input_mask(content_format_on_input_change)&&(val=input_mask.masks[content_format_on_input_change].format_val(val,get_input_mask_options(content_format_on_input_change))),instance.get_canvas().val((_val=val)!=null?_val:"")}),instance.run_mode()){let get_value=function(){if(run_mode_content_format in input_mask.masks){let options={};return is_datelike_format(run_mode_content_format)&&(options.timezone=instance.state("current_tz")),input_mask.masks[run_mode_content_format].get_val(instance.get_canvas(),options)}else return format_input_content(instance,instance.get_canvas().val())};instance.on_message("set_focus",()=>canvas.focus());let run_mode_content_format=instance.get_static_property("content_format");is_datelike_format(run_mode_content_format)&&instance.autorun(()=>{instance.state("current_tz",get_timezone(instance))}),inputs.assign_change_keyup_handlers(instance,get_value),inputs.switch_disabled_or_not(instance),instance.autorun(()=>{let needs_meta_key_pressed=element_eval.evaluate_property(instance,"not_submit_on_enter");return inputs.assign_enter_handler_in_input(instance,needs_meta_key_pressed)}),run_mode_content_format==="password"&&canvas.passMeter({events:"keyup input change",afterTest:score=>{score===0&&canvas.val()===""&&(score=null),instance.state("pw_strength",score)}}),run_mode_content_format in input_mask.masks&&u.autorun(()=>{let options=input_mask.masks[run_mode_content_format].get_mask(get_input_mask_options(run_mode_content_format));canvas.inputmask(options),canvas.off("click.inputmask"),canvas.on("click.inputmask",evt=>$(evt.target).trigger("inputmaskclick"))})}})},content_validated(val,instance){var _val$trim;let content_format=instance.get_static_property("content_format");function make_sure_is_in_range(val2){var _element_eval$evaluat,_element_eval$evaluat2;if(!instance.get_static_property("have_a_numerical_range"))return!0;let min=(_element_eval$evaluat=element_eval.evaluate_property(instance,"min_range_value"))!=null?_element_eval$evaluat:-1/0,max=(_element_eval$evaluat2=element_eval.evaluate_property(instance,"max_range_value"))!=null?_element_eval$evaluat2:1/0;return max<min?!0:min<=val2&&val2<=max}if(["",null,void 0].includes(val)||(val==null||(_val$trim=val.trim)==null?void 0:_val$trim.call(val))==="")return!element_eval.evaluate_property(instance,"mandatory");switch(content_format){case"email":return u.is_email(val);case"geographic_address":return b_location.from_address(val)!=null;case"password":return instance.get_static_property("check_password_policy")?inputs.is_pw_valid(val):!0;case"appname_validate":return domain_utilities.is_appname_valid(val==null?void 0:val.toLowerCase());default:if(content_format in input_mask.masks){let mask=input_mask.masks[content_format];if(typeof val=="string"&&!mask.is_valid_text(val)||mask.btype==="date"&&isNaN(Date.parse(val)))return!1;if(mask.btype==="number"){if(typeof val=="number")return make_sure_is_in_range(val);let parsed=mask.parse_val(val);return parsed!=null?make_sure_is_in_range(parsed):!1}else return!0}else return!0}},get_starting_content(instance){if(instance.run_mode()&&instance.get_static_property("auto_binding")){let{type,thing}=inputs.get_input_autobind_thing(instance),bind_field=instance.get_static_property("bind_field"),val=format_input_content(instance,btypes.get(type).get_message(bind_field).evaluate(thing));return typeof val=="function"?val():val}else{let content_format=instance.get_static_property("content_format"),val;if(instance.run_mode()?val=format_input_content(instance,element_eval.evaluate_property(instance,"content")):instance.get_static_property("auto_binding")?val="":content_format==="geographic_address"&&!instance.element.property("content").is_static()?val={address:element_eval.evaluate_property(instance,"content")}:val=element_eval.evaluate_property(instance,"content"),typeof val=="function")return val();if(instance.run_mode()&&!val&&content_format==="email"){var _u$local_storage_get;let saved_email=(_u$local_storage_get=u.local_storage_get(account_actions_utilities.get_remember_email_key()))==null?void 0:_u$local_storage_get.email;if(saved_email&&!Lib().current_user().is_logged_in())for(let e of(_instance$element$get=(_instance$element$get2=(_instance$element=instance.element).get_visible_workflows)==null?void 0:_instance$element$get2.call(_instance$element))!=null?_instance$element$get:[]){var _instance$element$get,_instance$element$get2,_instance$element;let a,has_a_login=!1;for(a of e.actions())if(a.type()==="LogIn"){has_a_login=!0;break}if(has_a_login&&a.find_my_expressions("GetElement.element_id="+instance.element_id()).length)return saved_email}}return val}},get_state_value(element,name){if(name==="value"){let content_format=element.get_static_property("content_format");return content_format in input_mask.masks?input_mask.masks[content_format].btype:content_format==="geographic_address"?"geographic_address":"text"}if(name==="pw_strength"&&element.get_static_property("content_format")==="password")return"number"},add_specific_messages(messages,element){element.get_static_property("content_format")==="password"&&u.extend(messages,{get_pw_strength:{description:"'s password strength",section:"States",ret_btype:"number",fn(a){var _a$state;return(_a$state=a==null?void 0:a.state("pw_strength"))!=null?_a$state:this.ret_btype_null()}}})},change_cursor_style_if_clickable:!1,add_an_invisible_div_on_the_top:!1,is_input:!0,contains_group_data:!1,jquery_plugins(){return["jquery_plugins/pass-meter.min"]},only_send_to_client_in_runmode:!0})}});var require_LinkComponent=__commonJS({"lib-browser-old/core/core_elements/components/LinkComponent.js"(exports){"use strict";init_define_process_env();init_shim();require_es_symbol_description();require_es_error_cause();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _web=(init_web(),__toCommonJS(web_exports));require_es_object_assign();require_es_array_iterator();require_web_dom_collections_iterator();require_es_object_values();require_es_array_includes();require_es_string_includes();require_es_string_trim();var b_ui=_interopRequireWildcard(require_b_ui()),b_object=_interopRequireWildcard(require_b_object()),mode_check=_interopRequireWildcard(require_mode_check()),text_elements=_interopRequireWildcard(require_text_elements()),links=_interopRequireWildcard(require_links()),_solidJs=(init_solid(),__toCommonJS(solid_exports)),_createElement=require_createElement(),element_styles=_interopRequireWildcard(require_element_styles()),_properties=require_properties(),_directives=require_directives(),runmode_consts=_interopRequireWildcard(require_runmode()),application=_interopRequireWildcard(require_application()),_appquery=_interopRequireDefault(require_appquery()),url_data=_interopRequireWildcard(require_url_data()),_lib=_interopRequireDefault(require_lib()),lang_consts=_interopRequireWildcard(require_lang()),evaluate=_interopRequireWildcard(require_evaluate()),eval_node_state=_interopRequireWildcard(require_eval_node_state()),element_eval=_interopRequireWildcard(require_element_eval()),internalNavigation=_interopRequireWildcard(require_internal_navigation()),querystring=_interopRequireWildcard(require_querystring()),_autorun_signals=require_autorun_signals();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var _tmpl$=(0,_web.template)("<a></a>",2);function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}function getLink(instance){let linktype=element_eval.evaluate_property(instance,"linktype");function getPageName(page){var _application$page_id_,_appquery$get_page_by;return(_application$page_id_=application.page_id_to_name(page))!=null?_application$page_id_:(_appquery$get_page_by=_appquery.default.get_page_by_name(page))==null?void 0:_appquery$get_page_by.name()}if(linktype==="pagelink"){var _getPageName;let page=element_eval.evaluate_property(instance,"page"),pageName=(_getPageName=getPageName(page))!=null?_getPageName:"",dataToSend=element_eval.evaluate_property(instance,"data_to_send");if(dataToSend){let pageElement=_appquery.default.get_page_by_name(pageName);if(pageElement!=null){let toAppend=url_data.get_data_to_send(dataToSend,pageElement.get_static_property("readable_field"));toAppend&&(pageName+="/"+toAppend)}}let params={};if(instance.get_static_property("keep_current_page_params")&&Object.assign(params,(0,_lib.default)().location.get_query()),mode_check.is_debug_mode()&&(params.debug_mode=!0),element_eval.evaluate_property(instance,"add_parameters")){let paramNodes=instance.element.property("url_parameters");eval_node_state.with_eval_node(paramNodes,function(){let urlParams=evaluate.evaluate_properties(paramNodes.json._raw(),instance.prop_eval_context(),lang_consts.DETECT_FIELD_NAMES,[],paramNodes.json._path());for(let{key,value}of Object.values(urlParams))links.forbidden_url_keys.includes(key)||(params[key]=value)})}pageName==="index"&&(pageName="");let link=(0,_lib.default)().location.get_server_base()+pageName;return b_object.is_empty(params)||(link+="?"+querystring.stringify(params)),link}else{var _link;let link=element_eval.evaluate_property(instance,"url");return((_link=link)==null?void 0:_link.indexOf("//"))===-1&&!links.href_attributes.includes(link.split(":")[0])&&link[0]!=="#"&&(link="//"+link),link}}function LinkComponent(props){let instance=props.instance;(0,_solidJs.createEffect)(()=>{!props.showIcon&&props.backgroundStyle!=="image"&&props.useDotDotDot&&(text_elements.apply_dotdotdot(instance,instance.edit_mode()?"letter":"words"),(0,_solidJs.onCleanup)(()=>text_elements.remove_dotdotdot(instance)))});let wrapHtml=html=>props.verticalCenter||instance.run_mode()&&props.useDotDotDot?"<div>".concat(html,"</div>"):html;(0,_solidJs.createEffect)(()=>{let canvas=instance.canvas;if(props.backgroundStyle==="image"){canvas.text("");return}if(props.showIcon){canvas.empty();let icon=b_ui.div(props.icon+" inner-element");icon.css({"font-family":"FontAwesome","padding-left":"3px"}),canvas.append(icon)}else canvas.html(wrapHtml(props.noHtml?b_ui.bbcode_to_html(props.text,!0).trim():props.text));instance.canvas[0].addEventListener("click",e=>{internalNavigation.internal_navigation_handler(e)})});let link=(0,_autorun_signals.createWatcher)(()=>getLink(instance));return instance.run_mode()&&((0,_solidJs.onMount)(()=>{element_eval.on_property_change(instance,"link_disabled",disabled=>{instance.state("link_disabled",disabled)})}),(0,_solidJs.onMount)(()=>{mode_check.on_phonegap()&&(instance.canvas.on("touchend",()=>{window.open(link(),"_blank","location=yes,enableViewportScale=yes")}),instance.canvas.on("click",e=>(e.preventDefault(),!1)))})),(()=>{let _el$=_tmpl$.cloneNode(!0);(0,_web.use)(_directives.defaultEventHandlers,_el$,()=>props.instance);let _ref$=props.ref;return typeof _ref$=="function"?(0,_web.use)(_ref$,_el$):props.ref=_el$,(0,_web.effect)(_p$=>{let _v$=props.id,_v$2=props.style,_v$3=_objectSpread(_objectSpread({},props.classList),{},{[runmode_consts.CLICKABLE_ELEMENT]:!0,"bubble-r-vertical-center":props.verticalCenter}),_v$4=props.target,_v$5=props.rel,_v$6=link();return _v$!==_p$._v$&&(0,_web.setAttribute)(_el$,"id",_p$._v$=_v$),_p$._v$2=(0,_web.style)(_el$,_v$2,_p$._v$2),_p$._v$3=(0,_web.classList)(_el$,_v$3,_p$._v$3),_v$4!==_p$._v$4&&(0,_web.setAttribute)(_el$,"target",_p$._v$4=_v$4),_v$5!==_p$._v$5&&(0,_web.setAttribute)(_el$,"rel",_p$._v$5=_v$5),_v$6!==_p$._v$6&&(0,_web.setAttribute)(_el$,"href",_p$._v$6=_v$6),_p$},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0}),_el$})()}var _default=(0,_createElement.createElement)(LinkComponent,element=>({showIcon:element.get_styleable_static_property("show_icon")}),(element,_ref)=>{let{showIcon}=_ref;return{properties:_objectSpread(_objectSpread({},showIcon?{icon:new _properties.Property(instance=>element_eval.evaluate_property(instance,"icon"))}:{text:new _properties.Property(instance=>element_eval.evaluate_property(instance,"text")),useDotDotDot:new _properties.Property(text_elements.could_clip),noHtml:new _properties.Property(instance=>element_eval.evaluate_property(instance,"no_html"))}),{},{backgroundStyle:new _properties.Property(instance=>element_eval.evaluate_property(instance,"background_style")),verticalCenter:new _properties.Property(instance=>element_eval.evaluate_property(instance,"vertical_centering")),target:new _properties.Property(instance=>element_eval.evaluate_property(instance,"open_in_new_tab")?"_blank":"_self"),rel:new _properties.Property(instance=>element_eval.evaluate_property(instance,"nofollow")?"nofollow":null)}),styles:[new _properties.Style(instance=>_objectSpread({"word-break":"break-word"},element_eval.evaluate_property(instance,"background_style")==="none"?{"-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","user-select":"none"}:{})),new _properties.Style(instance=>element_eval.evaluate_property(instance,"link_disabled")?{cursor:"not-allowed","pointer-events":"none"}:{cursor:"pointer","pointer-events":"auto"}),...element_styles.placedStyling(element)]}});exports.default=_default}});var require_Link2=__commonJS({"lib-browser-old/core/core_elements/elements/Link.js"(){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_string_trim();require_es_object_values();require_es_array_includes();require_es_string_includes();var u=require_u2(),property_applications=require_property_applications(),runmode_consts=require_runmode(),application=require_application(),appquery=require_appquery(),url_data=require_url_data(),lang_consts=require_lang(),evaluate=require_evaluate(),eval_node_state=require_eval_node_state(),Lib=require_lib(),querystring=require_querystring(),element_utils=require_element_utils(),element_transformer=require_element_transformer(),text_elements=require_text_elements(),links=require_links(),element_eval=require_element_eval(),{PADDING_VERSION}=require_elements(),internal_navigation=require_internal_navigation(),LinkComponent=require_LinkComponent().default;element_transformer.make_element("Link",{category:"visual elements",glyph_id:"link",keyboard_shortcut:"L",defaults:{font_alignment:"left",font_color:"#4083a9",width:150,height:20,min_width:80,use_max_width:!0,max_width:120},field_names:{text:{default:"...edit me..."},show_icon:{no_states:!0,in_style:!0},icon:{default:"fa fa-facebook-official"},linktype:{default:"pagelink",no_states:!0},page:{default:"index",no_states:!0},data_to_send:{no_states:!0},url:{},link_disabled:{default:!1},open_in_new_tab:{default:!1},add_parameters:{no_states:!0},url_parameters:{optional:!0,no_states:!0},keep_current_page_params:{no_states:!0},wrap_when_squizzed:{no_states:!0,default:!0},no_html:{no_states:!0},nofollow:{no_states:!0}},property_applications(element){return[new property_applications.Dimensions,new property_applications.Font,new property_applications.FontShadow,new property_applications.FontSpacing,new property_applications.PaddingText,new property_applications.PaddingFields({minimum_element_version:PADDING_VERSION,no_vertical_if_legacy_center:!0,allow_legacy:!0}),new property_applications.Border,new property_applications.BoxShadow,new property_applications.Background,new property_applications.ResponsiveElement(element),new property_applications.ToolTip,new property_applications.Opacity]},solid_component:LinkComponent,use_legacy_in_editor:!0,use_legacy_in_thumbnail:!0,uses_css_responsive:!0,can_fit_width:!0,can_fit_height:!0,change_cursor_style_if_clickable:!1,get_min_width(element){return 0},get_html(instance){return instance.run_mode()?"<a></a>":"<div></div>"},can_defer_drawing(){return!0},initialize(instance){let canvas=instance.get_canvas();instance.wait_for_visible_lite(()=>{canvas.addClass(runmode_consts.CLICKABLE_ELEMENT),property_applications.apply_css_style(canvas,{"white-space":"pre-wrap","text-decoration":"none","word-break":"break-word"});let dotdotdot_initialized=!1;element_eval.pre_cache(instance,["text","font_size","icon","show_icon","background_style","no_html"]),instance.autorun(()=>{let props={};for(let prop of["text","font_size","icon","show_icon","background_style","no_html"])props[prop]=element_eval.evaluate_property(instance,prop);let{text,icon,show_icon,background_style,no_html}=props;if(background_style==="image")canvas.text("");else if(show_icon){var _canvas$trigger;dotdotdot_initialized=!1,text_elements.remove_dotdotdot(instance),(_canvas$trigger=canvas.trigger)==null||_canvas$trigger.call(canvas,"destroy"),canvas.empty();let icon_div=u.div(icon+" inner-element");property_applications.apply_css_style(icon_div,{"font-family":"FontAwesome","padding-left":"3px"}),canvas.append(icon_div)}else{let apply_html=function(html){element_eval.evaluate_property(instance,"vertical_centering")||instance.run_mode()&&text_elements.could_clip(instance)?canvas.html("<div>".concat(html,"</div>")):canvas.html(html)};apply_html(no_html?u.bbcode_to_html(text,!0).trim():text),!dotdotdot_initialized&&text_elements.could_clip(instance)&&(dotdotdot_initialized=!0,text_elements.apply_dotdotdot(instance,instance.edit_mode()?"letter":"words")),instance.run_mode()||element_utils.do_add_an_invisible_div_on_the_top(instance)}if(background_style==="none")return new property_applications.NoSelect()._apply(!0,canvas)}),instance.run_mode()&&(element_eval.on_property_change(instance,"open_in_new_tab",open_in_new_tab=>{open_in_new_tab?canvas[0].target="_blank":canvas[0].target="_self"}),element_eval.on_property_change(instance,"link_disabled",link_disabled=>{instance.state("link_disabled",link_disabled),link_disabled?(instance.get_canvas()[0].style.cursor="not-allowed",instance.get_canvas()[0].style["pointer-events"]="none"):(instance.get_canvas()[0].style.cursor="pointer",instance.get_canvas()[0].style["pointer-events"]="auto")}),element_eval.on_property_change(instance,"nofollow",nofollow=>{nofollow&&(canvas[0].rel="nofollow")}),instance.canvas[0].addEventListener("click",e=>{internal_navigation.internal_navigation_handler(e)}),instance.autorun(()=>{function get_page_name(page){var _name,_appquery$get_page_by;let name=application.page_id_to_name(page);return(_name=name)!=null||(name=(_appquery$get_page_by=appquery.get_page_by_name(page))==null?void 0:_appquery$get_page_by.name()),name}let linktype=element_eval.evaluate_property(instance,"linktype"),link;if(linktype==="pagelink"){var _get_page_name;let page=element_eval.evaluate_property(instance,"page"),page_name=(_get_page_name=get_page_name(page))!=null?_get_page_name:"",data_to_send=element_eval.evaluate_property(instance,"data_to_send");if(data_to_send){let page_element=appquery.get_page_by_name(page_name);page_element!=null&&(data_to_send=url_data.get_data_to_send(data_to_send,page_element.get_static_property("readable_field")),data_to_send&&(page_name+="/"+data_to_send))}let params={};if(instance.get_static_property("keep_current_page_params")&&u.extend(params,Lib().location.get_query()),u.is_debug_mode()&&(params.debug_mode=!0),element_eval.evaluate_property(instance,"add_parameters")){let param_nodes=instance.element.property("url_parameters");eval_node_state.with_eval_node(param_nodes,()=>{let url_parameters=evaluate.evaluate_properties(param_nodes.json._raw(),instance.prop_eval_context(),lang_consts.DETECT_FIELD_NAMES,[],param_nodes.json._path());for(let{key,value}of Object.values(url_parameters))links.forbidden_url_keys.includes(key)||(params[key]=value)})}page_name==="index"&&(page_name=""),link=Lib().location.get_server_base()+page_name,u.is_empty(params)||(link+="?"+querystring.stringify(params))}else{var _link;link=element_eval.evaluate_property(instance,"url"),((_link=link)==null?void 0:_link.indexOf("//"))===-1&&!links.href_attributes.includes(link.split(":")[0])&&link[0]!=="#"&&(link="//"+link)}canvas[0].href=link,u.on_phonegap()&&(canvas.on("touchend",()=>window.open(link,"_blank","location=yes,enableViewportScale=yes")),canvas.on("click",e=>(e.preventDefault(),!1)))})),instance.on_destroy(()=>{text_elements.remove_dotdotdot(instance)})})},is_input:!1,contains_group_data:!1,add_an_invisible_div_on_the_top:!1,css_files:["css/optional/font-awesome.min.css"]})}});var require_MultiLineInput2=__commonJS({"lib-browser-old/core/core_elements/elements/MultiLineInput.js"(){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();var u=_interopRequireWildcard(require_u2()),property_applications=_interopRequireWildcard(require_property_applications()),_lib=_interopRequireDefault(require_lib()),element_transformer=_interopRequireWildcard(require_element_transformer()),inputs=_interopRequireWildcard(require_inputs()),page_state=_interopRequireWildcard(require_page_state()),btypes=_interopRequireWildcard(require_btypes()),element_eval=_interopRequireWildcard(require_element_eval()),element_props=_interopRequireWildcard(require_element_props()),_elements=require_elements();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}element_transformer.make_element("MultiLineInput",{display:"Multiline Input",category:"input forms",glyph_id:"multiline_input",list_order:2,keyboard_shortcut:null,defaults:{font_size:14,font_color:"#3D3D3D",background_style:"bgcolor",border_style:"solid",border_width:1,border_color:"#BDBDBD",border_roundness:3,border_style_top:"solid",border_width_top:1,border_color_top:"#BDBDBD",border_roundness_top:3,border_style_left:"solid",border_width_left:1,border_color_left:"#BDBDBD",border_roundness_left:3,border_style_bottom:"solid",border_width_bottom:1,border_color_bottom:"#BDBDBD",border_roundness_bottom:3,border_style_right:"solid",border_width_right:1,border_color_right:"#BDBDBD",border_roundness_right:3,padding_horizontal:4,padding_vertical:4,width:300,height:100},updated_default_sizing:{width:226},default_states:inputs.default_states_for_inputs,field_names:u.extend({placeholder:{default:"Type here..."},content:{},stretch_to_fit:{default:!1,no_states:!0}},inputs.additional_field_names_for_text_inputs),property_applications(element){return[new property_applications.Dimensions,new property_applications.Background,new property_applications.Border,new property_applications.BoxShadow,new property_applications.Font,new property_applications.FontSpacing,new property_applications.Padding,new property_applications.PaddingFields({minimum_element_version:_elements.PADDING_VERSION,allow_legacy:!0}),new property_applications.PlaceholderColor,new property_applications.ResponsiveElement(element),new property_applications.Opacity]},uses_css_responsive:!0,can_fit_height:!0,get_html(instance){return"<textarea></textarea>"},get_min_width(element){return 0},can_defer_drawing(){return!0},initialize(instance){instance.wait_for_visible_lite(()=>{let canvas=instance.get_canvas();inputs.reset_input_div(canvas),canvas.focus(()=>{page_state.input_focused(!0)}),canvas.on("blur",()=>{page_state.input_focused(!1)}),canvas.attr("data-gramm_editor","false"),instance.run_mode()||(canvas.attr("readonly","true"),canvas[0].style.resize="none"),inputs.set_character_limit_on_input(instance),instance.autorun(()=>{inputs.assign_enter_handler_in_input(instance,!0)});let autosize_enabled=!1,old_style="";function update_autosize(){window.optional_modules.autosize.update(canvas),old_style=canvas[0].style.cssText}instance.autorun(()=>{canvas.attr("placeholder",element_eval.evaluate_property(instance,"placeholder")),update_autosize()});let override_disable=u.Box(0);if(inputs.input_change_autorun(instance,val=>{instance.state("is_focused")||(canvas.val(val!=null?val:""),autosize_enabled&&(canvas[0].disabled?(override_disable(override_disable.dangerously_peek()+1),instance.setTimeout(()=>{update_autosize(),override_disable(override_disable.dangerously_peek()-1)},5)):update_autosize()))}),instance.run_mode()){instance.on_message("set_focus",()=>canvas.focus()),inputs.assign_change_keyup_handlers(instance,()=>instance.get_canvas().val()),instance.autorun(()=>{override_disable()>0?canvas[0].disabled=!1:canvas[0].disabled=element_eval.evaluate_property(instance,"disabled")}),inputs.switch_disabled_or_not(instance);let mutation_observer=null;instance.autorun(()=>{element_props.is_fitting_height(instance)?(autosize_enabled||((0,_lib.default)().bubble_version()>=8&&canvas.attr("rows",1),window.optional_modules.autosize(canvas),instance.wait_for_visible(update_autosize),mutation_observer=new MutationObserver(()=>{old_style!==canvas[0].style.cssText&&update_autosize()}),mutation_observer.observe(canvas[0],{attributes:!0,attributeFilter:["style"]}),autosize_enabled=!0),instance.autorun(()=>{instance.current_width(),update_autosize()})):autosize_enabled&&(window.optional_modules.autosize.destroy(canvas),mutation_observer.disconnect(),autosize_enabled=!1)}),instance.on_destroy(()=>{var _mutation_observer;window.optional_modules.autosize.destroy(canvas),(_mutation_observer=mutation_observer)==null||_mutation_observer.disconnect()}),canvas.on("blur",()=>{instance.setTimeout(()=>{update_autosize()},20)})}})},content_validated(val,instance){return!(!val&&element_eval.evaluate_property(instance,"mandatory"))},get_starting_content(instance){if(instance.get_static_property("auto_binding")){if(instance.run_mode())return inputs.get_input_autobind_thing_field(instance);{let{type}=inputs.get_input_autobind_thing(instance,!0),bind_field=instance.get_static_property("bind_field");if(type==null||bind_field==null)return"Parent Thing's field";let custom_type=btypes.get(type).custom_type();if(custom_type==null)return"Cannot autobind on parent Thing";let field=custom_type.field(bind_field);return"Parent ".concat(custom_type.display(),"'s ").concat(field.display())}}return element_eval.evaluate_property(instance,"content")},get_state_value(element,name){if(name==="value")return"text"},change_cursor_style_if_clickable:!1,add_an_invisible_div_on_the_top:!1,is_input:!0,contains_group_data:!1,jquery_plugins(){return["jquery_plugins/autosize.min"]},only_send_to_client_in_runmode:!0})}});var require_PageComponent=__commonJS({"lib-browser-old/core/core_elements/components/PageComponent.js"(exports){"use strict";init_define_process_env();init_shim();require_es_symbol_description();require_es_error_cause();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _web=(init_web(),__toCommonJS(web_exports));require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_includes();require_es_object_assign();require_es_promise();var _lib=_interopRequireDefault(require_lib()),_solidJs=(init_solid(),__toCommonJS(solid_exports)),page_state=_interopRequireWildcard(require_page_state()),mode_check=_interopRequireWildcard(require_mode_check()),b_window=_interopRequireWildcard(require_b_window()),color=_interopRequireWildcard(require_color()),image_utils=_interopRequireWildcard(require_image_utils()),_createElement=require_createElement(),element_styles=_interopRequireWildcard(require_element_styles()),_directives=require_directives(),_container_utils=require_container_utils(),element_eval=_interopRequireWildcard(require_element_eval()),_properties=require_properties(),_server_rendering=require_server_rendering(),_autorun_signals=require_autorun_signals(),_font_tokens=require_font_tokens();function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _tmpl$=(0,_web.template)("<div></div>",2);function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var BODY_SELECTOR="".concat(_server_rendering.AT_ROOT," body"),propertiesToLoad=["background_style","bgcolor","background_gradient_direction","background_gradient_from","background_gradient_mid","background_gradient_to","background_image","center_background","background_size_cover","repeat_background_vertical","repeat_background_horizontal","background_color_if_empty_image","background_gradient_style","background_radial_gradient_shape","background_radial_gradient_size","background_radial_gradient_xpos","background_radial_gradient_ypos","background_gradient_custom_angle"],backdropBackgroundData=instance=>{let props={};for(let p of propertiesToLoad)props[p]=element_eval.evaluate_property(instance,"backdrop_"+p);return instance.run_mode()&&(props.backdrop_paralax_speed=element_eval.evaluate_property(instance,"backdrop_paralax_speed"),props.backdrop_image_paralax=element_eval.evaluate_property(instance,"backdrop_image_paralax")),_objectSpread(_objectSpread({},{is_backdrop:!0}),props)},createRepeatKey=data=>data.repeat_background_vertical&&data.repeat_background_horizontal?"repeat":data.repeat_background_vertical?"repeat-y":data.repeat_background_horizontal?"repeat-x":"no-repeat",isLinear=data=>[null,void 0,"linear"].includes(data.background_gradient_style),computeGradientValues=data=>{let c1,c2,msDirection;c1=data.background_gradient_from,c2=data.background_gradient_to;let direction,aux;if(isLinear(data))if(data.background_gradient_direction==="custom"){var _data$background_grad;direction=((_data$background_grad=data.background_gradient_custom_angle)!=null?_data$background_grad:45)+"deg"}else{var _data$background_grad2;direction=(_data$background_grad2=data.background_gradient_direction)!=null?_data$background_grad2:"top",direction==="top"||direction==="bottom"?(msDirection=0,direction==="bottom"&&(aux=c1,c1=c2,c2=aux,direction="top")):(direction==="left"||direction==="right")&&(msDirection=1,direction==="right"&&(aux=c1,c1=c2,c2=aux,direction="left"))}return[c1,c2,msDirection,direction]},_default=(0,_createElement.createElement)(PageComponent,element=>({shouldAddWrapper:element.should_add_extra_wrapper()}),(element,_ref)=>{let{shouldAddWrapper}=_ref;return{properties:_objectSpread({title:new _properties.Property(instance=>element_eval.evaluate_property(instance,"title"),{mayContainDynamic:!0}),backdropBackgroundData:new _properties.Property(instance=>backdropBackgroundData(instance),{fallback:{}})},(0,_container_utils.containerProperties)(shouldAddWrapper)),styles:[new _properties.Style(instance=>{let data=backdropBackgroundData(instance);if(data.background_style!=="video"){let options={};if(data.background_style==="bgcolor")options["background-color"]=data.bgcolor;else if(data.background_style==="none")options["background-color"]="transparent";else if(data.background_style==="image"&&(data.backdrop_image_paralax||(options["background-color"]=data.background_color_if_empty_image),data.background_image)){var _element$root;options["background-repeat"]=createRepeatKey(data),data.center_background?data.is_backdrop?options["background-position"]="center top":options["background-position"]="center":options["background-position"]="",data.background_size_cover||(_element$root=element.root())!=null&&_element$root.use_responsive_algorithm()&&data.crop_responsive?(options["background-size"]="cover",options["-webkit-background-size"]="cover",options["-moz-background-size"]="cover",options["-o-background-size"]="cover"):options["background-size"]="",data.backdrop_image_paralax&&(b_window.is_on_mobile_or_tablet()||(options["background-image"]="none"))}return options}else return{}}),new _properties.Style(instance=>{let data=backdropBackgroundData(instance);if(data.background_style==="gradient"){let[c1,c2,msDirection,direction]=computeGradientValues(data),cMid=data.background_gradient_mid,code,cssLine,browserPrefixes=["-webkit-","-moz-","-o-","-ms-",""];if(cMid?code="".concat(c1," 0%, ").concat(cMid," 50%, ").concat(c2," 100%"):code="".concat(c1," 0%, ").concat(c2," 100%"),isLinear(data))cssLine="linear-gradient(".concat(direction,", ").concat(code,")");else{var _data$background_radi,_data$background_radi2,_data$background_radi3,_data$background_radi4;browserPrefixes=["","-webkit-","-moz-","-o-","-ms-"],(_data$background_radi=data.background_radial_gradient_shape)!=null||(data.background_radial_gradient_shape="ellipse"),(_data$background_radi2=data.background_radial_gradient_size)!=null||(data.background_radial_gradient_size="farthest-corner"),(_data$background_radi3=data.background_radial_gradient_xpos)!=null||(data.background_radial_gradient_xpos=10),(_data$background_radi4=data.background_radial_gradient_ypos)!=null||(data.background_radial_gradient_ypos=10),cssLine="radial-gradient(".concat(data.background_radial_gradient_shape," ").concat(data.background_radial_gradient_size," at ").concat(data.background_radial_gradient_xpos,"% ").concat(data.background_radial_gradient_ypos,"%, ").concat(code,")")}let bgs=[];for(let i of browserPrefixes)bgs.push(i+cssLine);bgs.push(c1);let msC1=color.RGBA_to_ARGB(c1),msC2=color.RGBA_to_ARGB(c2);return{background:bgs,filter:"progid:DXImageTransform.Microsoft.gradient( startColorstr='".concat(msC1,"', endColorstr='").concat(msC2,"',GradientType=").concat(msDirection,")")}}else return{}}),new _properties.Style(instance=>{var _element$root_max_wid,_element$root_max_hei;let styling={"min-width":element.root_min_width(),"max-width":(_element$root_max_wid=element.root_max_width())!=null?_element$root_max_wid:"","min-height":element.root_min_height(),"max-height":(_element$root_max_hei=element.root_max_height())!=null?_element$root_max_hei:""};if(instance.run_mode()){let minPageHeight=instance.element.root_min_height();Object.assign(styling,{width:instance.element.container_layout()==="fixed"?"".concat(instance.element.get_width(),"px"):"100%","min-height":["max(".concat(minPageHeight,"px, 100%)"),"100%"],"margin-right":"auto","margin-left":"auto",position:"relative","z-index":2}),instance.element.container_layout()==="column"&&(styling.height="max-content",styling["flex-shrink"]=0)}else styling.width=(0,_lib.default)().visual_edit.root_width();return styling},{noWaitVisible:!0,outerPositioning:!0}),new _properties.Style(instance=>{if(instance.run_mode()){let styling={height:"100%"};return instance.element.container_layout()==="column"&&(styling.display="flex",styling["flex-direction"]="column"),styling}else return{}},{noWaitVisible:!0,selector:BODY_SELECTOR}),element_styles.tokenStyling(),...(0,_container_utils.containerStyling)(shouldAddWrapper),...element_styles.basicStyling(element)]}});exports.default=_default;function PageComponent(props){let instance=props.instance,[backgroundImageSrc,setBackgroundImageSrc]=(0,_solidJs.createSignal)(),applyImageSrc=(canvas,src,instance2)=>{canvas.data("_last_downloaded_image",src),image_utils.download_image(src,instance2,()=>{src===canvas.data("_last_downloaded_image")&&setBackgroundImageSrc('url("'.concat(src,'")'))}),canvas.css("background-image",backgroundImageSrc())};(0,_solidJs.onMount)(()=>{instance.run_mode()&&(instance.register_workflows(instance.element.events()),page_state.page_width($(window).width()),$(window).on("resize",()=>{page_state.page_width($(window).width())}),page_state.page_current_scroll_position($(window).scrollTop()),$(window).on("scroll wheel touchmove",()=>{page_state.page_current_scroll_position($(window).scrollTop())}))}),(0,_solidJs.createEffect)(()=>{instance.run_mode()&&props.title&&(window.document.title=props.title)}),(0,_solidJs.onMount)(()=>{mode_check.is_debug_mode()&&(instance.element.container_layout()==="fixed"?instance.canvas.css("height",instance.canvas.height()+300):instance.canvas.css("padding-bottom",300))});let BV;return(0,_solidJs.createEffect)(()=>{if(props.backdropBackgroundData.background_style==="video")if(instance.run_mode()&&!b_window.is_on_mobile_or_tablet()){BV||(BV=new $.BigVideo,BV.init()),$("#big-video-wrap").css("background","black");let videoContainer=$("#big-video-wrap video");videoContainer.attr("muted","");let videoUrl=image_utils.optimize_image(element_eval.evaluate_property(instance,"backdrop_video_source"),void 0,void 0,void 0,!0);Promise.resolve().then(()=>{BV.show(videoUrl,{forceAutoplay:!0,doLoop:!0,ambient:!0})});let ar=instance.autorun(function(){element_eval.evaluate_property(instance,"backdrop_video_silence")?(videoContainer.attr("muted",""),BV.getPlayer().muted(!0)):(BV.getPlayer().volume(.8),videoContainer.removeAttr("muted"),BV.getPlayer().muted(!1))});(0,_solidJs.onCleanup)(()=>{ar.destroy()})}else{let backgroundDiv=instance.get_canvas();backgroundDiv.css("background","black");let imageFallback=element_eval.evaluate_property(instance,"backdrop_video_image_fallback");imageFallback&&backgroundDiv.css({"background-image":"url(".concat(image_utils.optimize_image(imageFallback,backgroundDiv.width()),")"),"background-position":"center top"})}}),(0,_solidJs.createEffect)(()=>{let canvas=instance.canvas,element=instance.element;if(props.backdropBackgroundData.background_style==="image"&&props.backdropBackgroundData.background_image){if(props.backdropBackgroundData.background_size_cover){if(!props.backdropBackgroundData.backdrop_image_paralax){let src=image_utils.optimize_image(props.backdropBackgroundData.background_image,canvas.width());applyImageSrc(canvas,src,instance)}}else if(props.backdropBackgroundData.crop_responsive){if(instance.run_mode()){let toLoad,lastSource,ar=instance.autorun(function(){let width=element_eval.evaluate_property(instance,"width"),height=element_eval.evaluate_property(instance,"height"),currentImage=element_eval.evaluate_property(instance,"background_image"),isFirstLoadResponsiveMode=instance.responsive_mode()&&width===element.get_width();function do_it(){let src=image_utils.optimize_image(currentImage,width,height,{fit:"crop"});applyImageSrc(canvas,src,instance)}toLoad=image_utils.optimize_image(currentImage,width,height),currentImage===lastSource&&!image_utils.downloaded_images[toLoad]||isFirstLoadResponsiveMode?instance.setTimeout(()=>{toLoad===image_utils.optimize_image(currentImage,width,height)&&do_it()},300):(lastSource=currentImage,do_it())});(0,_solidJs.onCleanup)(()=>{ar.destroy()})}}else if(!props.backdropBackgroundData.backdrop_image_paralax){let src=image_utils.optimize_image(props.backdropBackgroundData.background_image);applyImageSrc(canvas,src,instance)}if(props.backdropBackgroundData.backdrop_image_paralax)if(b_window.is_on_mobile_or_tablet())applyImageSrc(canvas,image_utils.optimize_image(props.backdropBackgroundData.background_image),instance);else{let backgroundSrc=image_utils.optimize_image(props.backdropBackgroundData.background_image,canvas.width());canvas.parallax({imageSrc:backgroundSrc,speed:props.backdropBackgroundData.backdrop_paralax_speed}),$(".parallax-slider").attr({src:backgroundSrc})}}}),(0,_solidJs.onMount)(()=>{instance.run_mode()&&$("html, body").css("height","100%")}),instance.edit_mode()&&(0,_autorun_signals.createAutorun)(()=>{(0,_font_tokens.load_font_tokens_default)(),(0,_font_tokens.load_font_tokens_user)()}),(0,_solidJs.createEffect)(prev=>{let toApply=props.childStyles[BODY_SELECTOR];return(0,_web.style)(document.body,toApply,prev),toApply}),(0,_solidJs.createEffect)(prev=>{let toApply=props.childStyles[_server_rendering.AT_ROOT];return(0,_web.style)(document.documentElement,toApply,prev),toApply}),(()=>{let _el$=_tmpl$.cloneNode(!0);(0,_web.use)(_directives.defaultEventHandlers,_el$,()=>props.instance);let _ref$=props.ref;return typeof _ref$=="function"?(0,_web.use)(_ref$,_el$):props.ref=_el$,(0,_web.insert)(_el$,(0,_web.createComponent)(_container_utils.ChildWrapper,(0,_web.mergeProps)(props,{get children(){return props.children}}))),(0,_web.effect)(_p$=>{let _v$=props.id,_v$2=props.style,_v$3=_objectSpread(_objectSpread({},props.classList),{},{[props.containerClass]:!0,"main-page":!0,"page-element":instance.edit_mode()});return _v$!==_p$._v$&&(0,_web.setAttribute)(_el$,"id",_p$._v$=_v$),_p$._v$2=(0,_web.style)(_el$,_v$2,_p$._v$2),_p$._v$3=(0,_web.classList)(_el$,_v$3,_p$._v$3),_p$},{_v$:void 0,_v$2:void 0,_v$3:void 0}),_el$})()}}});var require_Page3=__commonJS({"lib-browser-old/core/core_elements/elements/Page.js"(){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();var u=require_u2(),property_applications=require_property_applications(),image_utils=require_image_utils(),page_state=require_page_state(),element_transformer=require_element_transformer(),pages=require_pages(),color_tokens=require_color_tokens(),font_tokens=require_font_tokens(),element_eval=require_element_eval(),PageComponent=require_PageComponent().default;element_transformer.make_element("Page",{can_have_children(){return!0},get_children_canvas(instance){return instance.get_canvas()},field_names:{page_item_type:{no_states:!0},readable_field:{no_states:!0},title:{default:"My Page"},native_app:{no_states:!0},native_app_name:{no_states:!0,default:"App"},mobile_page:{no_states:!0},delete_page:{no_states:!0},meta_title:{in_pageservice:!0,no_states:!0},meta_description:{in_pageservice:!0,no_states:!0},meta_image:{in_pageservice:!0,no_states:!0},backdrop_background_style:{default:"bgcolor",no_states:!0,in_style:!0},backdrop_bgcolor:{default:"#FFFFFF",in_style:!0},backdrop_background_gradient_direction:{default:"top",in_style:!0},backdrop_background_gradient_custom_angle:{default:45,in_style:!0},backdrop_background_gradient_from:{default:"#FFFFFF",in_style:!0},backdrop_background_gradient_to:{default:"#AAAAAA",in_style:!0},backdrop_background_gradient_mid:{in_style:!0,optional:!0},backdrop_background_gradient_style:{in_style:!0,default:"linear"},backdrop_background_radial_gradient_shape:{in_style:!0,default:"ellipse"},backdrop_background_radial_gradient_size:{in_style:!0,default:"farthest-corner"},backdrop_background_radial_gradient_xpos:{in_style:!0,default:10},backdrop_background_radial_gradient_ypos:{in_style:!0,default:10},backdrop_background_image:{in_style:!0},backdrop_center_background:{in_style:!0},backdrop_background_size_cover:{in_style:!0},backdrop_repeat_background_vertical:{in_style:!0},backdrop_repeat_background_horizontal:{in_style:!0},backdrop_image_paralax:{no_states:!0,default:!1,in_style:!0},backdrop_paralax_speed:{no_states:!0,default:.2,in_style:!0},backdrop_background_color_if_empty_image:{default:"rgba(255, 255, 255, 0.0)",no_states:!0,in_style:!0},backdrop_video_source:{default:"http://vjs.zencdn.net/v/oceans.mp4",in_style:!0},backdrop_video_image_fallback:{in_style:!0},backdrop_video_silence:{default:!0,in_style:!0},stripes:{no_states:!0,in_style:!0},preset_width:{no_states:!0,default:"custom",in_style:!1},html_header:{no_states:!0,in_pageservice:!0},new_responsive:{no_states:!0},responsive_version:{no_states:!0},element_version:{default:0,no_states:!0},upgrade_responsive_version:{no_states:!0},fixed_width:{no_states:!0,default:!1},min_width:{default:0,no_states:!0},backdrop_crop_responsive:{no_states:!0},page_folder:{optional:!0,no_states:!0,only_edit_mode:!0},tz_type:{no_states:!0},tz_static:{no_states:!0},tz_type_overridden:{no_states:!0},tz_static_overridden:{no_states:!0}},always_visible:!0,uses_css_responsive:!0,solid_component:PageComponent,attach_to_body:()=>!1,property_applications(element){return[new property_applications.RootSizing,new property_applications.ShortDimensions,new property_applications.ResponsiveContainer(element),new property_applications.Opacity]},get_html(instance){return'<div class="main-page"></div>'},position_canvas(to_position,instance){if(instance.run_mode()){property_applications.apply_css_style(to_position,{width:instance.element.container_layout()==="fixed"?"".concat(instance.element.get_width(),"px"):"100%","margin-right":"auto","margin-left":"auto",position:"relative","z-index":2}),$("html, body").css("height","100%"),$(window.document.body).append(to_position);let min_page_height=instance.element.root_min_height();to_position[0].style["min-height"]="max(".concat(min_page_height,"px, 100%)"),instance.element.container_layout()==="column"&&($("body").css({display:"flex","flex-direction":"column"}),to_position.css({height:"max-content","flex-shrink":0}))}else $(".canvas").append(to_position)},transition_properties:{backdrop_background_style:"background"},get_min_width(){return 0},not_max_adjustable:!0,can_register_workflows(){return u.FakeKey()},initialize(instance){instance.run_mode()&&instance.register_workflows(instance.element.events()),element_eval.on_property_change(instance,"title",title=>{instance.edit_mode()?$(".edit-date").text(title):instance.run_mode()&&$(document).ready(()=>window.document.title=title)});function set_preset_width(instance2,width){let preset_width=instance2.get_static_property("preset_width");for(let preset_name in pages.preset_page_widths){let data=pages.preset_page_widths[preset_name];if(width===data.width){preset_width!==preset_name&&instance2.element.set_property("preset_width",preset_name);return}}preset_width!=="custom"&&instance2.element.set_property("preset_width","custom")}let root=document.documentElement;instance.edit_mode()&&(instance.autorun(()=>{font_tokens.load_font_tokens_default(),font_tokens.load_font_tokens_user()}),element_eval.on_property_change(instance,"preset_width",val=>{pages.preset_page_widths[val].width!=null&&(instance.element.set_property("width",pages.preset_page_widths[val].width),instance.element.set_property("default_width",pages.preset_page_widths[val].width),instance.element.commit_merge())}),element_eval.on_property_change(instance,["width","default_width"],_ref=>{let{width,default_width}=_ref;instance.element.get_responsive_version()<1||instance.element.container_layout()==="fixed"?set_preset_width(instance,width):set_preset_width(instance,default_width),instance.element.commit_merge()})),instance.autorun(()=>{let object2=color_tokens.default_color_tokens_to_property();for(let property in object2){let value=object2[property];root.style.setProperty(property,value)}}),instance.autorun(()=>{let object2=color_tokens.user_color_tokens_to_property();for(let property in object2){let value=object2[property];root.style.setProperty(property,value)}}),instance.autorun(()=>{let object2=font_tokens.default_font_tokens_to_property();for(let property in object2){let value=object2[property];root.style.setProperty(property,value)}}),instance.autorun(()=>{let object2=font_tokens.user_font_tokens_to_property();for(let property in object2){let value=object2[property];root.style.setProperty(property,value)}}),instance.run_mode()&&(page_state.page_width($(window).width()),$(window).on("resize",()=>page_state.page_width($(window).width())),page_state.page_current_scroll_position($(window).scrollTop()),$(window).on("scroll wheel touchmove",()=>page_state.page_current_scroll_position($(window).scrollTop())));let properties_to_load=["background_style","bgcolor","background_gradient_direction","background_gradient_from","background_gradient_mid","background_gradient_to","background_image","center_background","background_size_cover","repeat_background_vertical","repeat_background_horizontal","background_color_if_empty_image","background_gradient_style","background_radial_gradient_shape","background_radial_gradient_size","background_radial_gradient_xpos","background_radial_gradient_ypos","background_gradient_custom_angle"];function style_page(){let background_div=instance.get_canvas();instance.thumbnail_mode()?background_div.css({"z-index":1,position:"absolute",top:0,width:instance.element.get_width(),height:instance.element.get_height(),overflow:"hidden"}):property_applications.apply_css_style(background_div,{"z-index":1});let BV=null;element_eval.pre_cache(instance,properties_to_load.map(property=>"backdrop_".concat(property))),element_eval.pre_cache(instance,["backdrop_paralax_speed","backdrop_image_paralax"]),instance.autorun(()=>{let prop,backdrop_background_data={is_backdrop:!0};for(prop of properties_to_load)backdrop_background_data[prop]=element_eval.evaluate_property(instance,"backdrop_"+prop);if(instance.run_mode())for(prop of["backdrop_paralax_speed","backdrop_image_paralax"])backdrop_background_data[prop]=element_eval.evaluate_property(instance,prop);if(backdrop_background_data.background_style==="video")if(instance.run_mode()&&!u.is_on_mobile_or_tablet()){BV==null&&(BV=new $.BigVideo,BV.init()),$("#big-video-wrap").css("background","black");let video_container=$("#big-video-wrap video");video_container.attr("muted","");let video_url=image_utils.optimize_image(element_eval.evaluate_property(instance,"backdrop_video_source"),void 0,void 0,void 0,!0);BV.show(video_url,{forceAutoplay:!0,doLoop:!0,ambient:!0}),instance.autorun(()=>element_eval.evaluate_property(instance,"backdrop_video_silence")?(video_container.attr("muted",""),BV.getPlayer().muted(!0)):(BV.getPlayer().volume(.8),video_container.removeAttr("muted"),BV.getPlayer().muted(!1)))}else{background_div.css("background","black");let image_fallback=element_eval.evaluate_property(instance,"backdrop_video_image_fallback");image_fallback&&background_div.css({"background-image":"url(".concat(image_utils.optimize_image(image_fallback,background_div.width()),")"),"background-position":"center top"})}else new property_applications.Background()._apply(backdrop_background_data,background_div)})}instance.edit_mode()?(element_eval.pre_cache(instance,properties_to_load),instance.autorun(()=>{instance.autorun(()=>{if(!instance.is_destroyed()){let props={};for(let prop of properties_to_load)props[prop]=element_eval.evaluate_property(instance,prop);new property_applications.Background()._apply(props,instance.get_canvas())}}),style_page()})):instance.thumbnail_mode()?instance.autorun(style_page):style_page()},is_input:!1,contains_group_data:!1,change_cursor_style_if_clickable:!1,add_an_invisible_div_on_the_top:!1,get_private_messages(){return["movement_in_stripe","child_movement"]},not_draggable(){return!0}})}});var require_PictureInput2=__commonJS({"lib-browser-old/core/core_elements/elements/PictureInput.js"(){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();var u=_interopRequireWildcard(require_u2()),logger=_interopRequireWildcard(require_logger()),property_applications=_interopRequireWildcard(require_property_applications()),runmode_consts=_interopRequireWildcard(require_runmode()),workflow_consts=_interopRequireWildcard(require_workflow()),widgets=_interopRequireWildcard(require_widgets()),core_events=_interopRequireWildcard(require_core_events()),element_utils=_interopRequireWildcard(require_element_utils()),element_transformer=_interopRequireWildcard(require_element_transformer()),inputs=_interopRequireWildcard(require_inputs()),sliderinputs=_interopRequireWildcard(require_sliderinputs()),pictureinputs=_interopRequireWildcard(require_pictureinputs()),image_utils=_interopRequireWildcard(require_image_utils()),element_eval=_interopRequireWildcard(require_element_eval()),_lib=_interopRequireDefault(require_lib());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}element_transformer.make_element("PictureInput",{display:"Picture Uploader",category:"input forms",glyph_id:"picture_uploader",list_order:9,keyboard_shortcut:null,defaults:{font_size:14,bold:!0,background_style:"bgcolor",border_style:"solid",border_width:1,border_roundness:0,border_color:"#A6A6A6",border_style_top:"solid",border_width_top:1,border_roundness_top:0,border_color_top:"#A6A6A6",border_style_left:"solid",border_width_left:1,border_roundness_left:0,border_color_left:"#A6A6A6",border_style_bottom:"solid",border_width_bottom:1,border_roundness_bottom:0,border_color_bottom:"#A6A6A6",border_style_right:"solid",border_width_right:1,border_roundness_right:0,border_color_right:"#A6A6A6",padding_horizontal:0,padding_vertical:0,bgcolor:"#EBEBEB",font_alignment:"center",width:130,height:140},updated_default_sizing:{width:150,height:150},default_states:inputs.default_states_for_inputs,field_names:u.extend({src:{},placeholder:{default:"Click to upload an image"},mandatory:{},private:{no_states:!0},attach_to:{},service:{no_states:!0},destination:{},keep_proportion_resize:{no_states:!0},limit_image_width:{no_states:!0}},inputs.get_disabled_field_name,inputs.get_auto_binding_field_names),property_applications(element){var _Lib;return[new property_applications.Font(".button_for_file_uploader"),new property_applications.Dimensions,new property_applications.Border,new property_applications.Background(".button_for_file_uploader"),new property_applications.BoxShadow,new property_applications.ResponsiveElement(element),new property_applications.FontSpacing(".button_for_file_uploader",["line_height"]),new property_applications.PaddingFields(((_Lib=(0,_lib.default)())==null?void 0:_Lib.app().get_public_setting("bubble_version"))<18?{}:{selector:"button,img"}),new property_applications.Opacity]},get_html(instance){return"<div></div>"},get_min_width(){return 0},can_defer_drawing(){return!0},initialize(instance){instance.wait_for_visible_lite(()=>{var _instance$element$roo;sliderinputs.show_message_for_ios_8_upload_bug(),instance.state("src_version",0);let IZDX=5,canvas=instance.get_canvas(),img=u.img(void 0,canvas),img_css={width:"100%",height:"100%","z-index":IZDX,position:"absolute"};property_applications.apply_css_style(img,img_css),((_instance$element$roo=instance.element.root())==null?void 0:_instance$element$roo.get_responsive_version())>0&&img.css({"object-fit":"contain"}),canvas.append(img);let placeholder_div=$('<button class="button_for_file_uploader"></button>');inputs.reset_input_div(placeholder_div);let placeholder_css={"z-index":IZDX-1,position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%"};property_applications.apply_css_style(placeholder_div,placeholder_css),canvas.append(placeholder_div),element_eval.on_property_change(instance,"width",val=>{val<80&&property_applications.apply_css_style(placeholder_div,{padding:0})});function resize_url(url){return url?image_utils.optimize_image(url,element_eval.evaluate_property(instance,"width"),element_eval.evaluate_property(instance,"height")):null}let input=null;function display_url(url){if(url){var _instance$element$roo2,_input2;((_instance$element$roo2=instance.element.root())==null?void 0:_instance$element$roo2.get_responsive_version())>0?image_utils.download_image(url,instance,url_or_transparent_image=>{img[0].src=url_or_transparent_image}):instance.autorun(()=>{let src_version=u.autorun_top(()=>instance.state("src_version"));src_version+=1,instance.state("src_version",src_version),image_utils.rescale_image({src:url,img,instance,ref_version:src_version,cb(){img[0].src=url}})});let url_parts=url.split("%2F"),filename=url_parts[-1+url_parts.length].split("?w=")[0];(_input2=input)==null||_input2.attr("title",filename),placeholder_div.css("opacity",0),img.css("opacity",1)}else{var _input;img[0].src=image_utils.transparent_image(),placeholder_div.css("opacity",1),img.css("opacity",0),(_input=input)==null||_input.attr("title",null)}}if(instance.run_mode()){let get_additional_data=function(cb){u.run_once(30,()=>pictureinputs.process_upload_security(instance),(err,data)=>{err?cb(err):cb(null,data)})},cb_start=function(){instance.state("loading",!0)},cb_fail=function(err){core_events.handle_uncaught_error({original_error:err,caught_from:workflow_consts.ERROR_SOURCES.ELEMENT,cb(err2){err2&&window.alert(logger.human_friendly(err2)),instance.state("loading",!1)}})};var _instance$element$roo3;canvas.addClass(runmode_consts.CLICKABLE_ELEMENT),input=$('<input type="file" accept="image/*"></input>'),canvas.append(input),property_applications.apply_css_style(input,{opacity:0,position:"absolute","z-index":1+img.css("z-index"),left:"0px",width:"100%",height:"100%","font-size":0});let cb_success=url=>{var _input$0$files$0$size,_input$0$files$;instance.state("file_size",(_input$0$files$0$size=(_input$0$files$=input[0].files[0])==null?void 0:_input$0$files$.size)!=null?_input$0$files$0$size:null),instance.state("loading",!1),display_url(resize_url(url)),instance.message("user_submit",url),input[0].value=null};widgets.MakeImageUploader({input,get_additional_data,cb_success,cb_start,cb_fail,limit_size:instance.get_static_property("limit_image_width")}),((_instance$element$roo3=instance.element.root())==null?void 0:_instance$element$roo3.get_responsive_version())===0&&element_utils.register_tab_index_listener(instance,tabindex=>{input.attr("tabindex",tabindex)}),element_eval.on_property_change(instance,"disabled",value=>{input[0].disabled=value,property_applications.apply_css_style(input,{cursor:value?"default":"pointer"}),property_applications.apply_css_style(placeholder_div,{cursor:value?"default":"pointer"})}),inputs.register_focus(instance,input),instance.on_message("set_focus",()=>input.focus())}element_eval.on_property_change(instance,"placeholder",placeholder=>{placeholder_div.text(placeholder)}),inputs.input_change_autorun(instance,url=>{var _input$0$files$0$size2,_input3,_input3$,_input3$$files$;!instance.run_mode()&&!instance.element.property("src").is_static()?url="":url=resize_url(url),display_url(url),instance.state("file_size",(_input$0$files$0$size2=(_input3=input)==null||(_input3$=_input3[0])==null||(_input3$$files$=_input3$.files[0])==null?void 0:_input3$$files$.size)!=null?_input$0$files$0$size2:null)})})},get_starting_content(instance){return instance.run_mode()&&instance.get_static_property("auto_binding")?inputs.get_input_autobind_thing_field(instance):element_eval.evaluate_property(instance,"src")},get_state_value(element,name){if(name==="value")return"image"},get_states(element){return["loading","file_size"]},uses_css_responsive:!0,add_specific_messages(messages,element){return u.extend(messages,pictureinputs.file_inputs_additional_messages)},need_to_wait_before_checking_validity:!0,content_validated(val,instance){return val||!element_eval.evaluate_property(instance,"mandatory")},change_cursor_style_if_clickable:!1,add_an_invisible_div_on_the_top:!1,is_input:!0,contains_group_data:!1})}});var require_popups2=__commonJS({"lib-browser-old/constants/popups.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.INITIAL_POPUP_TOP=exports.HORIZONTAL_SPACING=exports.FILL_POPUP_BOTTOM=void 0;var HORIZONTAL_SPACING=10;exports.HORIZONTAL_SPACING=HORIZONTAL_SPACING;var INITIAL_POPUP_TOP=20;exports.INITIAL_POPUP_TOP=INITIAL_POPUP_TOP;var FILL_POPUP_BOTTOM=50;exports.FILL_POPUP_BOTTOM=FILL_POPUP_BOTTOM}});var require_PopupComponent=__commonJS({"lib-browser-old/core/core_elements/components/PopupComponent.js"(exports){"use strict";init_define_process_env();init_shim();require_es_symbol_description();require_es_error_cause();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;require_es_array_iterator();require_web_dom_collections_iterator();var _web=(init_web(),__toCommonJS(web_exports)),_createElement=require_createElement(),element_styles=_interopRequireWildcard(require_element_styles()),_directives=require_directives(),_container_utils=require_container_utils(),_properties=require_properties(),_popups=require_popups2(),runmode_consts=_interopRequireWildcard(require_runmode()),_autorun_signals=require_autorun_signals(),popups=_interopRequireWildcard(require_popups()),autorun=_interopRequireWildcard(require_autorun3()),server_css=_interopRequireWildcard(require_server_css()),element_eval=_interopRequireWildcard(require_element_eval()),element_props=_interopRequireWildcard(require_element_props()),_solidJs=(init_solid(),__toCommonJS(solid_exports)),_BodyPortal=_interopRequireDefault(require_BodyPortal());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var _tmpl$=(0,_web.template)('<div class="greyout"></div>',2),_tmpl$2=(0,_web.template)("<div></div>",2);function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var GREYOUT_CLASS="greyout",GREYOUT_SELECTOR=".".concat(GREYOUT_CLASS);function PopupComponent(props){let instance=props.instance;(0,_solidJs.onMount)(()=>{if(instance.run_mode())instance.canvas.css({display:"none",top:_popups.INITIAL_POPUP_TOP,position:"fixed"}),instance.manual_position=!1,instance.on_message("position_element",position=>{instance.manual_position=!0,instance.state("manual_position",{top:"".concat(position.Y,"px"),left:"".concat(position.X,"px"),position:position.position})});else if(!instance.thumbnail_mode()){let wrapper=instance.canvas;instance.edit_mode()&&(wrapper=wrapper.parent()),wrapper.css({top:_popups.INITIAL_POPUP_TOP,position:"absolute"})}instance.state("greyout").css("display","none")}),(0,_solidJs.onCleanup)(()=>{instance.canvas!=="destroyed"&&(0,popups.remove_blur_effect_to_greyout)(instance)}),instance.run_mode()&&((0,_autorun_signals.createAutorun)(()=>{if(instance.is_visible()){let height=instance.current_height();autorun.autorun_top(()=>popups.get_popup_positioning(instance,height))}}),(0,_autorun_signals.onAfterMount)(()=>{let lastScreenHeight=null;return $(window).on("resize.popup_"+instance.element_id(),()=>{let screenHeight=window.innerHeight;lastScreenHeight!==screenHeight&&(lastScreenHeight=screenHeight,popups.get_popup_positioning(instance))}),()=>{$(window).off("resize.popup_"+instance.element_id())}}));let greyout=()=>(()=>{let _el$=_tmpl$.cloneNode(!0);return(0,_web.use)(node=>instance.state("greyout",$(node)),_el$),(0,_web.effect)(_p$=>{let _v$={[server_css.toClass(instance.element.ssr_key())]:!0},_v$2=props.childStyles[GREYOUT_SELECTOR];return _p$._v$=(0,_web.classList)(_el$,_v$,_p$._v$),_p$._v$2=(0,_web.style)(_el$,_v$2,_p$._v$2),_p$},{_v$:void 0,_v$2:void 0}),_el$})(),popup=()=>(()=>{let _el$2=_tmpl$2.cloneNode(!0);(0,_web.use)(_directives.defaultEventHandlers,_el$2,()=>props.instance);let _ref$=props.ref;return typeof _ref$=="function"?(0,_web.use)(_ref$,_el$2):props.ref=_el$2,(0,_web.insert)(_el$2,(0,_web.createComponent)(_container_utils.ChildWrapper,props)),(0,_web.effect)(_p$=>{let _v$3=props.id,_v$4=props.style,_v$5=_objectSpread(_objectSpread({},props.classList),{},{[props.containerClass]:!0});return _v$3!==_p$._v$3&&(0,_web.setAttribute)(_el$2,"id",_p$._v$3=_v$3),_p$._v$4=(0,_web.style)(_el$2,_v$4,_p$._v$4),_p$._v$5=(0,_web.classList)(_el$2,_v$5,_p$._v$5),_p$},{_v$3:void 0,_v$4:void 0,_v$5:void 0}),_el$2})();return instance.edit_mode()?[(0,_web.createComponent)(_BodyPortal.default,{get children(){return greyout()}}),(0,_web.memo)(popup)]:[(0,_web.memo)(greyout),(0,_web.memo)(popup)]}var _default=(0,_createElement.createElement)(PopupComponent,element=>({shouldAddWrapper:element.should_add_extra_wrapper()}),(element,_ref)=>{let{shouldAddWrapper}=_ref;return{properties:(0,_container_utils.containerProperties)(shouldAddWrapper),styles:[...(0,_container_utils.containerStyling)(shouldAddWrapper),...element_styles.basicStyling(element),new _properties.Style(instance=>{var _instance$state;return{left:0,right:0,"z-index":runmode_consts.POPUP_ZINDEX+((_instance$state=instance.state("popup_zindex"))!=null?_instance$state:0),"margin-left":"auto","margin-right":"auto",width:"calc(100% - ".concat(_popups.HORIZONTAL_SPACING*2,"px)"),height:instance.element.fit_height()?"auto":"initial",bottom:instance.element.fit_height()?"":_popups.FILL_POPUP_BOTTOM,"overflow-y":"auto","grid-template-rows":instance.element.fit_height()?"minmax(100%, max-content)":void 0}},{noWaitVisible:!0,outerPositioning:!0}),new _properties.Style(instance=>{var _element_props$max_wi,_element_props$max_he;return{"min-width":element_props.min_width_css(instance),"max-width":(_element_props$max_wi=element_props.max_width_css(instance))!=null?_element_props$max_wi:"","min-height":element_props.min_height_css(instance),"max-height":(_element_props$max_he=element_props.max_height_css(instance))!=null?_element_props$max_he:""}},{outerPositioning:!0}),new _properties.Style(instance=>{var _instance$state2;return(_instance$state2=instance.state("manual_position"))!=null?_instance$state2:{}},{alwaysDynamic:!0}),new _properties.Style(instance=>{var _instance$state3;return{position:instance.run_mode()?"fixed":"absolute",top:"0px",left:"0px",width:"100%",height:"100%","background-color":element_eval.evaluate_property(instance,"greyout_color"),"z-index":instance.run_mode()?runmode_consts.POPUP_ZINDEX+((_instance$state3=instance.state("popup_zindex"))!=null?_instance$state3:0):runmode_consts.POPUP_ZINDEX-1}},{selector:GREYOUT_SELECTOR})]}});exports.default=_default}});var require_Popup2=__commonJS({"lib-browser-old/core/core_elements/elements/Popup.js"(){"use strict";init_define_process_env();init_shim();require_es_array_includes();require_web_queue_microtask();require_web_immediate();require_es_array_iterator();require_web_dom_collections_iterator();require_es_string_includes();require_es_array_sort();var u=require_u2(),logger=require_logger(),Lib=require_lib(),elements=require_elements2(),property_applications=require_property_applications(),status_bar=require_status_bar(),core_events=require_core_events(),element_transformer=require_element_transformer(),element_workflows=require_element_workflows(),workflow_consts=require_workflow(),runmode_consts=require_runmode(),popups=require_popups(),groups=require_groups2(),PopupComponent=require_PopupComponent().default,element_eval=require_element_eval(),element_props=require_element_props(),elements_utils=require_elements_utils(),{HORIZONTAL_SPACING,INITIAL_POPUP_TOP,FILL_POPUP_BOTTOM}=require_popups2();element_transformer.make_element("Popup",{category:"containers",glyph_id:"popup",list_order:4,keyboard_shortcut:null,defaults:{bgcolor:"#FFFFFF",background_style:"bgcolor",border_style:"none",border_roundness:3,boxshadow_style:"outset",boxshadow_horizontal:2,boxshadow_vertical:2,boxshadow_blur:4,boxshadow_color:"#000000",width:500,height:350},updated_default_sizing:{width:320,height:320},field_names:u.extend({},element_workflows.start_workflow_field_names,popups.greyout_field_names,groups.container_field_names),not_draggable(){return!0},property_applications(element){return[new property_applications.ShortDimensions,new property_applications.Border,new property_applications.BoxShadow,new property_applications.Background,new property_applications.ResponsiveElement(element),new property_applications.ResponsiveContainer(element),new property_applications.PaddingFields,new property_applications.Opacity]},get_min_width(){return 0},not_max_adjustable_legacy:!0,uses_css_responsive:!0,no_margins(){return!0},can_fit_height:!0,get_html(instance){return"<div></div>"},change_cursor_style_if_clickable:!0,can_have_children(){return!0},get_children_canvas(instance){return instance.get_canvas()},goes_on_document(){return!0},can_animate(element){return!0},can_defer_drawing(){return!0},solid_component:PopupComponent,register(instance){function run_popup_workflow(event_type){instance.start_child_drawing();let to_run=instance.element.get_related_workflows(event_type),context={element:instance},promise=Lib().workflow.run_workflows(context,to_run,!0),status=status_bar.show_progress_line(promise);promise.then(()=>status(),err=>{status(),core_events.handle_uncaught_error({original_error:err,caught_from:workflow_consts.ERROR_SOURCES.ELEMENT_WORKFLOW,cb(err2){err2&&window.alert(logger.human_friendly(err2))}})})}instance.on_message("popup_closed",()=>run_popup_workflow("PopupClosed")),instance.on_message("popup_opened",()=>run_popup_workflow("PopupOpened")),instance._has_been_hidden=!0},initialize(instance){instance.wait_for_visible_lite(()=>{element_eval.on_property_change(instance,"greyout_color",greyout_color=>popups.apply_greyout_color(instance,greyout_color)),element_eval.on_property_change(instance,"greyout_blur",greyout_blur=>{[null,void 0,0].includes(greyout_blur)||instance.wait_for_visible(()=>{popups.apply_blur_effect_to_greyout(instance,greyout_blur)})}),instance.on_destroy(()=>{(![null,void 0,0].includes(instance.get_static_property("greyout_blur"))||instance.edit_mode())&&popups.remove_blur_effect_to_greyout(instance)})})},check_for_errors(element,report){return groups._check_for_errors_datasource_set_to_self(element,"get_group_data",report)},is_input:!1,contains_group_data:!0,add_an_invisible_div_on_the_top:!1,events:["ButtonClicked","PopupClosed","PopupOpened"],get_state_value(element,name){return groups.state_value_helper_for_group(element,name)},position_canvas(to_position,instance){let position;if(instance.edit_mode()?($(".canvas").append(to_position),position="absolute"):($(window.document.body).append(to_position),position="fixed"),to_position.css({top:INITIAL_POPUP_TOP,left:0,right:0,position,"margin-left":"auto","margin-right":"auto"}),instance.autorun(()=>{var _element_props$max_wi,_element_props$max_he,_instance$state;to_position.css({width:"calc(100% - ".concat(HORIZONTAL_SPACING*2,"px)"),"min-width":element_props.min_width_css(instance),"max-width":(_element_props$max_wi=element_props.max_width_css(instance))!=null?_element_props$max_wi:"","min-height":element_props.min_height_css(instance),"max-height":(_element_props$max_he=element_props.max_height_css(instance))!=null?_element_props$max_he:"",height:instance.element.fit_height()?"auto":"initial",bottom:instance.element.fit_height()?"":FILL_POPUP_BOTTOM,"overflow-y":"auto","z-index":runmode_consts.POPUP_ZINDEX+((_instance$state=instance.state("popup_zindex"))!=null?_instance$state:0)})}),instance.edit_mode()&&instance.container.setup_padding(instance),instance.run_mode()){to_position.css("display","none");let last_screen_height=null;$(window).on("resize.popup_"+instance.element_id(),()=>{let screen_height=$(window).height();last_screen_height!==screen_height&&(last_screen_height=screen_height,popups.get_popup_positioning(instance))});let last_height=null;queueMicrotask(()=>{instance.autorun(()=>{let height=instance.current_height();height!==last_height&&(last_height=height,popups.get_popup_positioning(instance,height))})}),instance.on_destroy(()=>{$(window).off("resize.popup_"+instance.element_id())})}},do_show(instance,properties,options,animated){instance.with_canvas(canvas=>{instance.state("has_been_absolutely_positioned",null),popups.add_layer(instance);let grey_out=popups.get_greyout(instance);if(instance.run_mode()){var _instance$state2;grey_out.css("z-index",runmode_consts.POPUP_ZINDEX+((_instance$state2=instance.state("popup_zindex"))!=null?_instance$state2:0))}if((![null,void 0,0].includes(instance.get_static_property("greyout_blur"))||instance.edit_mode())&&popups.apply_blur_effect_to_greyout(instance,instance.get_static_property("greyout_blur")),instance.run_mode()){var _canvas$velocity,_grey_out$velocity;popups.get_popup_positioning(instance),canvas.css({"-webkit-filter":"none",filter:"none"}),(_canvas$velocity=canvas.velocity)==null||_canvas$velocity.call(canvas,"stop"),(_grey_out$velocity=grey_out.velocity)==null||_grey_out$velocity.call(grey_out,"stop"),canvas.css("display",""),animated?(elements.perform_animate_in(instance,properties,options),setImmediate(()=>{popups.resize_popup_if_legacy(instance,canvas.innerWidth())})):(properties={animation:"transition.fadeIn"},options={duration:300},elements.perform_animate_in(instance,properties,options),setImmediate(()=>{popups.resize_popup_if_legacy(instance,canvas.innerWidth())})),grey_out.css("opacity",0),grey_out.show(),u.velocity(grey_out,"fadeIn",{duration:300,complete_cb(){return grey_out[0].style.top="-1px",instance.setTimeout(()=>grey_out[0].style.top="0px",151)}}),instance.setTimeout(()=>{let focusable_children=[],dont_do_it=!1;function find_focusable_children(parent){for(let child of(_parent$children=parent.children)!=null?_parent$children:[]){var _parent$children;if(child.element.get_messages().includes("set_focus")){if(!child.get_canvas())continue;if(child.get_canvas().is(":focus")){dont_do_it=!0;return}focusable_children.push(child)}find_focusable_children(child)}}if(find_focusable_children(instance),!dont_do_it){focusable_children=focusable_children.filter(a=>a.state("tab_index")&&a.is_visible()),focusable_children.sort((a,b)=>a.state("tab_index")<=b.state("tab_index")?-1:1);for(let a of focusable_children)if(a.is_visible()){a.element.type()!=="DateInput"&&a.message("set_focus");break}}},400),instance.get_static_property("prevent_user_from_closing_through_esc")||($(document).off("keydown.escape"),$(document).on("keydown.escape",event=>{event.keyCode===27&&(instance.do_hide(),$(document).off("keydown.escape"))}),grey_out.off("click"),grey_out.on("click",()=>instance.do_hide())),instance.message("popup_opened")}else canvas.css("display",""),instance._display_me(),instance._is_visible_me=!0,instance._update_visible(),instance.thumbnail_mode()||grey_out.show()})},do_hide(instance,properties,options,animated){var _canvas$velocity2,_grey_out$velocity2;if(!instance.is_drawn)return;instance.set_animating(!0),u.on_phonegap()&&$(window).off("touchmove.popup_opened");let canvas=instance.get_canvas(),grey_out=popups.get_greyout(instance);if((![null,void 0,0].includes(instance.get_static_property("greyout_blur"))||instance.edit_mode())&&popups.remove_blur_effect_to_greyout(instance),(_canvas$velocity2=canvas.velocity)==null||_canvas$velocity2.call(canvas,"stop"),(_grey_out$velocity2=grey_out.velocity)==null||_grey_out$velocity2.call(grey_out,"stop",!0),instance.run_mode()&&canvas.is(":visible")&&canvas.css("visibility")!=="hidden")if(animated)options.transform="",elements_utils.perform_animate_out(instance,properties,options),u.velocity(grey_out,"fadeOut",{duration:300,complete_cb(){grey_out.hide()}}),instance.message("popup_closed");else{instance.set_animating(!0);let duration=300;properties={animation:"transition.fadeOut"},options={duration},elements_utils.perform_animate_out(instance,properties,options,()=>{canvas.css("display","none")}),u.velocity(grey_out,"fadeOut",{duration,complete_cb(){grey_out.hide()}}),instance.message("popup_closed")}else canvas.css("display","none"),grey_out.hide(),instance.set_animating(!1);instance._is_visible_me=!1,instance._update_visible(),popups.remove_layer(instance),popups.set_body_overflow()},get_private_messages(element){return["popup_opened","popup_closed","child_movement","position_element"]},starts_hidden:!0,modal(){return!0}})}});var require_PoweredByBubble=__commonJS({"lib-browser-old/core/core_elements/elements/PoweredByBubble.js"(){"use strict";init_define_process_env();init_shim();require_es_array_includes();var u=require_u2(),property_applications=require_property_applications(),element_transformer=require_element_transformer(),element_eval=require_element_eval();element_transformer.make_element("PoweredByBubble",{category:"visual elements",display:"Built on Bubble",glyph_id:"bubble_logo",list_order:10,keyboard_shortcut:null,defaults:{width:79,height:42},field_names:{element_type:{default:"image_black",no_states:!0},add_border:{in_style:!0,no_states:!0},text_color:{default:"#C9C9C9",in_style:!0,no_states:!0}},property_applications(element){return[new property_applications.PositionOnly,new property_applications.ResponsiveElement(element),new property_applications.Opacity]},uses_css_responsive:!0,get_html(instance){return instance.run_mode()?"<a></a>":"<div></div>"},can_defer_drawing(){return!0},initialize(instance){instance.wait_for_visible_lite(()=>{let{element}=instance,canvas=instance.get_canvas(),inner_canvas=u.div("powered-by-bubble",canvas);instance.run_mode()&&(canvas[0].href="https://bubble.io?utm_source=user_icon",canvas[0].target="_blank");let image_colors={image_blue:"#0205D3",image_white:"#FFFFFF",image_grey:"#C9C9C9",image_black:"#000000"},images_list=[];for(let a in image_colors)images_list.push(a);let image_svg=color=>'<?xml version="1.0" encoding="utf-8"?>\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n width="71px" height="100px" viewBox="0 0 612 792" enable-background="new 0 0 612 792" xml:space="preserve">\n<path fill="'.concat(color,'" d="M298.97,123.2c-12.343,0-24.549,5.294-33.832,15.747V87.511h-18.395v86.608l0,0\nc0,28.125,22.795,50.92,50.92,50.92s50.919-22.795,50.919-50.92C348.583,145.995,327.095,123.2,298.97,123.2z M297.629,205.407\nc-17.294,0-31.288-14.028-31.288-31.288s14.028-31.288,31.288-31.288c17.293,0,31.288,14.028,31.288,31.288\nS314.924,205.407,297.629,205.407z"/>\n<path fill="').concat(color,'" d="M413.016,123.2c-12.344,0-24.549,5.294-33.832,15.747V87.511h-18.395v86.608l0,0\nc0,28.125,22.795,50.92,50.92,50.92c28.124,0,50.92-22.795,50.92-50.92C462.629,145.995,441.105,123.2,413.016,123.2z\n M411.675,205.407c-17.295,0-31.288-14.028-31.288-31.288s14.028-31.288,31.288-31.288c17.294,0,31.287,14.028,31.287,31.288\nS428.969,205.407,411.675,205.407z"/>\n<path fill="').concat(color,'" d="M143.185,183.024V125.95h19.735v56.902c0,14.543,8.424,23.861,22.624,23.861\nc14.372,0,22.623-8.974,22.623-23.861V125.95h19.907v57.074c0,26.371-15.987,41.98-42.53,41.98\nC159.688,225.039,143.185,208.88,143.185,183.024z"/>\n<path fill="').concat(color,'" d="M498.214,222.701h-19.735V87.511h19.735V222.701z"/>\n<path fill="').concat(color,'" d="M609.955,181.958h-75.537c2.889,15.06,13.443,25.306,32.113,25.306c10.934,0,24.239-4.126,32.835-10.418\nl8.251,14.544c-9.867,7.357-25.477,13.443-41.809,13.443c-36.238,0-51.848-25.306-51.848-50.782c0-14.544,4.47-26.543,13.649-36.067\nc9.146-9.524,21.18-14.372,35.723-14.372c13.822,0,25.306,4.298,34.107,13.1s13.271,20.629,13.271,35.723\nC610.644,175.15,610.472,178.383,609.955,181.958z M534.384,165.799h56.353c-1.616-15.266-12.928-25.133-27.472-25.133\nC548.377,140.666,537.271,150.74,534.384,165.799z"/>\n<path fill="').concat(color,'" d="M80.507,123.2c-12.343,0-24.549,5.294-33.832,15.747V87.511H28.246v86.608l0,0\nc0,28.125,22.795,50.92,50.92,50.92s50.919-22.795,50.919-50.92C130.085,145.995,108.597,123.2,80.507,123.2z M79.166,205.407\nc-17.294,0-31.288-14.028-31.288-31.288s14.028-31.288,31.288-31.288c17.294,0,31.288,14.028,31.288,31.288\nS96.46,205.407,79.166,205.407z"/>\n<g>\n<ellipse fill="').concat(color==="#000000"?"#0205D3":color,'" cx="14.872" cy="212.421" rx="12.584" ry="12.584"/>\n</g>\n<rect x="6.206" y="4.5" fill="none" width="602" height="63"/>\n<text transform="matrix(1 0 0 1 15.8643 58.4595)" fill="').concat(color,'" font-family="Arial" font-size="76">Built without code</text>\n</svg>');return element_eval.on_property_change(instance,["element_type","add_border","text_color"],_ref=>{let{element_type,add_border,text_color}=_ref;inner_canvas.empty();let css_opts={"border-radius":"3px",padding:"3px",height:"100%",width:"100%","text-align":"center"};switch(element_type){case"text":inner_canvas.text("Built without code on Bubble"),css_opts["font-family"]="Arial",css_opts["font-size"]=10,css_opts.color=text_color;break;default:images_list.includes(element_type)&&inner_canvas.html(image_svg(image_colors[element_type]))}if(add_border){let color;switch(element_type){case"text":color=text_color;break;default:images_list.includes(element_type)&&(color=image_colors[element_type])}css_opts.border="1px solid "+color}else css_opts.border="1px solid transparent";return inner_canvas.css(css_opts)})})},is_input:!1,contains_group_data:!1,change_cursor_style_if_clickable:!1,add_an_invisible_div_on_the_top:!1,not_resizable(){return!0}})}});var require_RadioButtons2=__commonJS({"lib-browser-old/core/core_elements/elements/RadioButtons.js"(){"use strict";init_define_process_env();init_shim();require_es_object_get_own_property_descriptors();require_es_weak_map();require_es_array_iterator();require_web_dom_collections_iterator();require_es_object_values();require_web_dom_collections_for_each();require_es_symbol_description();require_es_error_cause();var uuid=_interopRequireWildcard(require_uuid()),autorun=_interopRequireWildcard(require_autorun3()),property_applications=_interopRequireWildcard(require_property_applications()),runmode_consts=_interopRequireWildcard(require_runmode()),hydrate2=_interopRequireWildcard(require_hydrate()),btypes=_interopRequireWildcard(require_btypes()),element_transformer=_interopRequireWildcard(require_element_transformer()),inputs=_interopRequireWildcard(require_inputs()),dropdowns=_interopRequireWildcard(require_dropdowns()),radiobuttons=_interopRequireWildcard(require_radiobuttons()),element_eval=_interopRequireWildcard(require_element_eval());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var MAX_RADIO_OPTIONS=50,RADIO_BUTTON_WIDTH=20,MIN_COLUMN_WIDTH=20;element_transformer.make_element("RadioButtons",{category:"input forms",display:"Radio Buttons",glyph_id:"radio_buttons",list_order:6,keyboard_shortcut:null,defaults:{width:200,height:75},field_names:_objectSpread(_objectSpread({choices_style:{default:"static",no_states:!0},choices:{no_states:!0,default:"Choice 1"},dynamic_type:{no_states:!0},data_source:{},option_display_expression:{},default:{},mandatory:{},columns:{no_states:!0,default:1},use_dynamic_columns:{default:!1,no_states:!0},min_column_width_px:{no_states:!0,default:100},color:{default:"black",in_style:!0},computed_value:{optional:!0,no_states:!0}},inputs.get_disabled_field_name),inputs.get_auto_binding_field_names),property_applications(element){return[new property_applications.Dimensions,new property_applications.Font,new property_applications.Background,new property_applications.ResponsiveElement(element),new property_applications.FontSpacing(null,["line_height"]),new property_applications.Opacity]},can_fit_width:!0,can_fit_height:!0,get_html(instance){return"<div></div>"},get_min_width(element){return 0},_get_display_option:dropdowns._get_display_option,can_defer_drawing(){return!0},register(instance){let bad_value_watcher=autorun.Watcher(()=>{if(!instance.state("has_been_changed"))return!1;let val=instance.state("value");return val==null?!1:!this._choice_list_contains(instance,val)});instance.on_destroy(()=>bad_value_watcher.destroy()),bad_value_watcher.on_value(is_bad=>{is_bad&&instance.message("reset_input")})},initialize(instance){instance.wait_for_visible_lite(()=>{let inner_id=uuid.LUID(),canvas=instance.get_canvas();canvas.addClass("radio"),instance.autorun(()=>{if(instance.get_static_property("use_dynamic_columns")){let column_width=Math.max(MIN_COLUMN_WIDTH,instance.get_static_property("min_column_width_px")-RADIO_BUTTON_WIDTH);canvas.css("grid-template-columns","repeat(auto-fill, minmax(".concat(column_width,"px, 1fr))"))}else canvas.css("grid-template-columns","repeat(".concat(instance.get_static_property("columns"),", 1fr)"))}),instance.run_mode()&&canvas.addClass(runmode_consts.CLICKABLE_ELEMENT),instance.on_message("set_focus",()=>canvas.find("input:first").focus()),element_eval.on_property_change(instance,"color",value=>{for(let class_name of radiobuttons.bootstrap_colors)canvas.removeClass("radio-".concat(class_name));canvas.addClass("radio-".concat(value))});let options_div_mapping={};function create_option(c,i){let dehydrated_value=hydrate2.dehydrate_tree_to_string_safe(c.value),choice=$('<input type="radio" value="'.concat(dehydrated_value,'" name="').concat(inner_id,'" id="').concat(inner_id,"_option_").concat(i,'"><label for="').concat(inner_id,"_option_").concat(i,'">').concat(c.display,"</label>"));return choice.data("bubble_val",dehydrated_value),options_div_mapping[dehydrated_value]=choice,choice}let get_choice_list=()=>{if(instance.edit_mode()&&element_eval.evaluate_property(instance,"choices_style")==="dynamic"){let raw_choices2=["Dynamic choice 1","Dynamic choice 2","Dynamic choice 3","Dynamic choice 4"];return instance.get_canvas().data("Dynamic choice 1"),raw_choices2.map(a=>({display:a,value:a}))}let raw_choices=this._get_raw_choice_list(instance),get_display=this._get_display_option(instance),raw_choice_list=raw_choices.get_children(0,MAX_RADIO_OPTIONS);return autorun.run_once(30,()=>raw_choice_list.map(raw_choice=>get_display(raw_choice))),raw_choice_list.map(raw_choice=>({display:get_display(raw_choice),value:raw_choice}))},current_displayed_value=null;function select_value(val){var _options_div_mapping3,_options_div_mapping4;if(current_displayed_value=val,options_div_mapping=canvas.data("options_div_mapping"),!val)if(instance.edit_mode())for(let div of Object.values((_options_div_mapping=options_div_mapping)!=null?_options_div_mapping:{})){var _options_div_mapping;div[0].checked=!0;return}else for(let div of Object.values((_options_div_mapping2=options_div_mapping)!=null?_options_div_mapping2:{})){var _options_div_mapping2;div[0].checked=!1}let dehydrated_value=hydrate2.dehydrate_tree_to_string_safe(val),selected_div=(_options_div_mapping3=options_div_mapping)==null||(_options_div_mapping4=_options_div_mapping3[dehydrated_value])==null?void 0:_options_div_mapping4[0];selected_div!=null&&(selected_div.checked=!0)}let update_choice_list=()=>{canvas.empty(),options_div_mapping={},get_choice_list().forEach((c,i)=>{let input=create_option(c,i);canvas.append(input)}),canvas.data("options_div_mapping",options_div_mapping),canvas.find("input[type=radio]").on("change",function(){let val=dropdowns.rehydrate_dropdown_value($(this).data("bubble_val"));instance.message("user_submit",val),select_value(val)}),select_value(current_displayed_value);let value=element_eval.evaluate_property(instance,"disabled");for(let div of Object.values((_options_div_mapping5=options_div_mapping)!=null?_options_div_mapping5:{})){var _options_div_mapping5;div[0].disabled=value}};inputs.input_change_autorun(instance,val=>select_value(val)),instance.autorun(()=>{let value=element_eval.evaluate_property(instance,"disabled");for(let div of Object.values((_options_div_mapping6=options_div_mapping)!=null?_options_div_mapping6:{})){var _options_div_mapping6;div[0].disabled=value}}),instance.autorun(()=>{instance.is_visible()&&update_choice_list()})})},_get_raw_btype(element){return dropdowns._get_raw_btype_dropdown(element)},_get_raw_choice_list(instance){return dropdowns._get_raw_choice_list_dropdown(instance,this)},_choice_list_contains(instance,val){let V=btypes.get(this._get_raw_btype(instance.element));return this._get_raw_choice_list(instance).contains(val,V)},get_starting_content(instance){let starting_content;return instance.run_mode()&&instance.get_static_property("auto_binding")?starting_content=inputs.get_input_autobind_thing_field(instance):starting_content=element_eval.evaluate_property(instance,"default"),starting_content==null||!this._choice_list_contains(instance,starting_content)?null:starting_content},get_state_value(element,name){if(name==="value")return this._get_raw_btype(element)},get_injected_value(element){return element.get_static_property("dynamic_type")},get_injected_display(){return"Current option"},use_injected_datasource(node){return dropdowns.use_injected_datasource("option_display_expression",node)},content_validated(val,instance){return val!=null||!element_eval.evaluate_property(instance,"mandatory")},css_files:["css/optional/radio.css"],uses_css_responsive:!0,change_cursor_style_if_clickable:!1,add_an_invisible_div_on_the_top:!0,is_input:!0,contains_group_data:!1,no_is_focused:!0})}});var require_RunRepeatingComponent=__commonJS({"lib-browser-old/core/core_elements/components/RunRepeatingComponent.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=RunRepeatingComponent;var _web=(init_web(),__toCommonJS(web_exports));require_es_array_iterator();require_web_dom_collections_iterator();require_web_queue_microtask();require_web_dom_collections_for_each();var _solidJs=(init_solid(),__toCommonJS(solid_exports)),autorun_signals=_interopRequireWildcard(require_autorun_signals()),_GroupItem=_interopRequireDefault(require_GroupItem()),_elements=_interopRequireDefault(require_elements2()),mode_check=_interopRequireWildcard(require_mode_check()),logger=_interopRequireWildcard(require_logger()),_errors=require_errors(),_autorun=require_autorun3(),_b_async=require_b_async3(),_b_ui=require_b_ui(),_dependency=require_dependency3(),_RenderElement=require_RenderElement();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var MAX_NUMBER_OF_CELLS=5e3;function RunRepeatingComponent(props){var _props$dataInstance,_props$dataInstance2,_instance$child_conta;let instance=props.instance,dataInstance=(_props$dataInstance=props.dataInstance)!=null?_props$dataInstance:instance,layout=props.layout,data_instance=(_props$dataInstance2=props.dataInstance)!=null?_props$dataInstance2:instance,startIndex=()=>{if(props.fixedList){var _instance$state;return(_instance$state=instance.state("show_range"))!=null?_instance$state:0}else return 0},listLength=()=>{if(props.fixedList)return props.totalCells;{var _instance$state2;let maxIndex=(_instance$state2=instance.state("max_index"))!=null?_instance$state2:0;return props.showAllItems?maxIndex:maxIndex+1}},[listInitialized,setListInitialized]=(0,_solidJs.createSignal)(!1),raw_list_dependency=(0,_dependency.Dependency)();(0,_solidJs.createEffect)(()=>{if(!props.turnedVisible)return;instance.run_mode()&&layout.compute_extra_fields();let setup_cells=()=>{let ar=instance.autorun(()=>{if(!props.fixedList)if(props.showAllItems){var _data_instance$state;let length=(_data_instance$state=data_instance.state("list_data"))==null?void 0:_data_instance$state.length(),n=Math.min(length!=null?length:0,MAX_NUMBER_OF_CELLS);instance.state("max_index",n)}else queueMicrotask(()=>{(0,_autorun.autorun_once)(()=>{instance.state("max_index",Math.min(layout.guess_number_of_cells(instance)*2,100))})})});layout.init_raw_list_watcher(()=>startIndex(),()=>listLength()),raw_list_dependency.invalidate();let visibleWaiter=instance.autorun(()=>{data_instance.state("list_data")!==void 0&&((0,_autorun.wait_for_updates)(()=>{instance.mark_children_registered(),instance.get_children_drawn_key().turn()}),instance.setTimeout(()=>visibleWaiter.destroy()))}),spinner=instance.autorun(()=>{layout.add_spinner(),layout.raw_list_data(),layout.remove_spinner()});(0,_solidJs.onCleanup)(()=>{ar.destroy(),visibleWaiter.destroy(),spinner.destroy()}),setListInitialized(!0)};mode_check.on_server()?setup_cells():queueMicrotask(setup_cells)});let listData=autorun_signals.createWatcher(()=>{var _layout$raw_list_data,_layout$raw_list_data2;return raw_list_dependency.register(),(_layout$raw_list_data=(_layout$raw_list_data2=layout.raw_list_data())==null?void 0:_layout$raw_list_data2.filter(item=>item!=null))!=null?_layout$raw_list_data:[]},{fallback:[]});instance.children=[],(_instance$child_conta=instance.child_container)!=null||(instance.child_container=instance.container.create_child(instance));let instanceChildren=()=>{if(!listInitialized())return!props.fixedList&&!props.showAllItems&&(instance.children.length<1&&addChild(),instance.children[0].state("group_data",_elements.default.STATE_NOT_READY)),instance.children;function addChild(){let index=instance.children.length,groupItem=new _GroupItem.default(instance,0,index,props.dataInstance),childInstance;_web.isServer?childInstance=_elements.default.ServerElementInstance(groupItem):childInstance=_elements.default.ElementInstance(groupItem,instance.mode),childInstance._is_visible_me=!0,groupItem.instance=childInstance,instance.children.push(childInstance),childInstance.state("cell_index",index+1),childInstance.register(data_instance),childInstance.set_containers(data_instance.child_container),childInstance.start_draw_tree()}for(layout.set_loading(!0),(0,_autorun.wait_for_updates)(()=>{let[error,ready]=layout._raw_list_data_watcher.get_current_status_array();layout.set_loading(!ready||error!=null)});instance.children.length<listData().length;)addChild();return listData().forEach((item,index)=>{let child=instance.children[index];mode_check.on_client()&&(0,_b_async.WaitFor)(_b_ui.page_loaded_key,()=>{var _child$can_register_w;return(_child$can_register_w=child.can_register_workflows())==null?void 0:_child$can_register_w.turn()}),child.message("set_group_data",item)}),instance.children};function addCells(numToAdd){let maxIndex=instance.state("max_index");instance.state("loading_cells",!0),(0,_autorun.run_once)(30,()=>{var _data_instance$state$,_data_instance$state2,_data_instance$state3;return(_data_instance$state$=(_data_instance$state2=data_instance.state("list_data"))==null||(_data_instance$state3=_data_instance$state2.with_extra_fields)==null?void 0:_data_instance$state3.call(_data_instance$state2,layout.extra_fields).get_children(maxIndex,numToAdd))!=null?_data_instance$state$:[]},(err,lastEntry)=>{if(err){logger.log((0,_errors.ensure_bubble_error)(err)),instance.state("loading_cells",!1);return}if(lastEntry!=null&&lastEntry.length){let toAdd=Math.min(lastEntry.length,numToAdd);instance.state("max_index",maxIndex+toAdd),(0,_autorun.wait_for_updates)(()=>{instance.state("loading_cells",!1)})}else instance.state("loading_cells",!1)})}function loadMoreCells(fromRoot){if(instance.state("loading_cells"))return;let numRows,numColumns;if(props.scrollDirection!=="horizontal"){numColumns=layout.estimate_one_row();let distanceToBottom;fromRoot?distanceToBottom=window.innerHeight*3-dataInstance.canvas[0].getBoundingClientRect().bottom:distanceToBottom=dataInstance.canvas[0].clientHeight*3-(dataInstance.canvas[0].scrollHeight-dataInstance.canvas[0].scrollTop);let estimatedCellHeight=instance.children[0].canvas.height();numRows=Math.ceil(Math.max(distanceToBottom/estimatedCellHeight,1))+2}else{numRows=props.rows;let distanceToRight;fromRoot?distanceToRight=window.innerWidth*2-dataInstance.canvas[0].getBoundingClientRect().right:distanceToRight=dataInstance.canvas[0].clientWidth*3-(dataInstance.canvas[0].scrollWidth-dataInstance.canvas[0].scrollLeft);let estimatedCellWidth=instance.children[0].canvas.width();numColumns=Math.ceil(Math.max(distanceToRight/estimatedCellWidth,1))+2}let numToAdd=numRows*numColumns;addCells(numToAdd)}let intersectionObserver=()=>null;if(!_web.isServer){let observerKind=(0,_solidJs.createMemo)(()=>{if(!instance.run_mode()||listData().length===0||props.fixedList||props.showAllItems)return null;let canScroll;return props.scrollDirection!=="horizontal"?canScroll=dataInstance.canvas[0].scrollHeight>dataInstance.canvas[0].clientHeight:canScroll=dataInstance.canvas[0].scrollWidth>dataInstance.canvas[0].clientWidth,canScroll?"self":"root"});intersectionObserver=(0,_solidJs.createMemo)(()=>observerKind()==null?null:observerKind()==="self"?new IntersectionObserver(entries=>{entries[0].isIntersecting&&loadMoreCells()},{root:dataInstance.canvas[0],rootMargin:"100%"}):new IntersectionObserver(entries=>{entries[0].isIntersecting&&loadMoreCells(!0)},{rootMargin:"100%"}))}autorun_signals.onAfterMount(()=>{instance.on_message("draw_till",index=>{props.fixedList||instance.state("max_index")>index||addCells(index+1-instance.state("max_index"))})});let sendObserver=autorun_signals.createWatcher(()=>!instance.state("loading_cells"));return(0,_web.createComponent)(_solidJs.For,{get each(){return instanceChildren()},children:(child,index)=>{let{output,disposer}=(0,_solidJs.createRoot)(disposer2=>(child.on_destroy(disposer2),{disposer:disposer2,output:(0,_web.createComponent)(_RenderElement.RenderElement,(0,_web.mergeProps)({instance:child},()=>{var _props$childProps;return(_props$childProps=props.childProps)==null?void 0:_props$childProps.call(props,index)},{get cellSizing(){return props.cellSizing},get hidden(){return index()>=listData().length},get intersectionObserver(){return(0,_web.memo)(()=>!!(sendObserver()&&index()===listData().length-1))()?intersectionObserver():null}}))}));return(0,_solidJs.onCleanup)(()=>disposer()),output}})}}});var require_repeating_groups2=__commonJS({"lib-browser-old/core/core_elements/components/utils/repeating_groups.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.createIndexFns=createIndexFns;var _autorun_signals=require_autorun_signals();function createIndexFns(props){return(0,_autorun_signals.createWatcher)(()=>{if(props.scrollDirection==="vertical"){let numColumns=props.columns;return{indexToRow:index=>Math.floor(index/numColumns),indexToColumn:index=>index%numColumns}}else if(props.scrollDirection==="horizontal"){let numRows=props.rows;return{indexToRow:index=>index%numRows,indexToColumn:index=>Math.floor(index/numRows)}}else return{indexToRow:()=>0,indexToColumn:()=>0}},{fallback:{indexToRow:index=>0,indexToColumn:index=>0}})}}});var require_RunRepeatingGroup=__commonJS({"lib-browser-old/core/core_elements/components/RunRepeatingGroup.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=RunRepeatingGroup;var _web=(init_web(),__toCommonJS(web_exports)),_RunRepeatingComponent=_interopRequireDefault(require_RunRepeatingComponent()),_repeating_groups=require_repeating_groups2();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function RunRepeatingGroup(props){let instance=props.instance,layout=instance.repeating_group_layout;if(!layout)return[];let fixedList=()=>layout.fixed_list(),showAllItems=()=>instance.get_static_property("show_all_items"),isMasonry=()=>layout.is_masonry(),scrollDirection=()=>layout.scroll_direction(),columns=()=>layout.columns(),rows=()=>layout.rows(),totalCells=()=>layout.total_number_of_cells(),indexFns=(0,_repeating_groups.createIndexFns)({get rows(){return rows()},get columns(){return columns()},get scrollDirection(){return scrollDirection()}});return(0,_web.createComponent)(_RunRepeatingComponent.default,(0,_web.mergeProps)(props,{layout,get fixedList(){return fixedList()},get showAllItems(){return showAllItems()},get scrollDirection(){return scrollDirection()},get rows(){return rows()},get totalCells(){return totalCells()},childProps:index=>({get hasTopBorder(){return!isMasonry()&&indexFns().indexToRow(index())>0},get hasLeftBorder(){return!isMasonry()&&indexFns().indexToColumn(index())>0},get firstRow(){return isMasonry()&&indexFns().indexToRow(index())===0},get cellSizing(){return props.cellSizing},separatorStyle:props.separatorStyle,separatorWidth:props.separatorWidth,separatorColor:props.separatorColor})}))}}});var require_ThumbnailContext=__commonJS({"lib-browser-old/renderer/ThumbnailContext.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=exports.ThumbnailContext=void 0;var _solidJs=(init_solid(),__toCommonJS(solid_exports)),ThumbnailContext=(0,_solidJs.createContext)();exports.ThumbnailContext=ThumbnailContext;var _default=ThumbnailContext;exports.default=_default}});var require_RepeatingGroupComponent=__commonJS({"lib-browser-old/core/core_elements/components/RepeatingGroupComponent.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_symbol_description();require_es_error_cause();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_weak_map();require_es_array_includes();require_es_string_includes();require_es_parse_int();require_es_array_iterator();require_web_dom_collections_iterator();var _web=(init_web(),__toCommonJS(web_exports)),_responsive_layout=_interopRequireDefault(require_responsive_layout()),repeating_groups=_interopRequireWildcard(require_repeating_groups()),_createElement=require_createElement(),element_styles=_interopRequireWildcard(require_element_styles()),_directives=require_directives(),_properties=require_properties(),element_props=_interopRequireWildcard(require_element_props()),element_eval=_interopRequireWildcard(require_element_eval()),_solidJs=(init_solid(),__toCommonJS(solid_exports)),_EditorContext=_interopRequireDefault(require_EditorContext()),_RunRepeatingGroup=_interopRequireDefault(require_RunRepeatingGroup()),_ServerElementInstance=_interopRequireDefault(require_ServerElementInstance()),_u=require_u2(),_ThumbnailContext=_interopRequireDefault(require_ThumbnailContext());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _tmpl$=(0,_web.template)("<div></div>",2);function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var GROUP_ITEM_SELECTOR="> .group-item";function RepeatingGroupComponent(props){var _ref,_useContext$repeating,_useContext,_useContext2;let instance=props.instance,layout=instance.repeating_group_layout;if(!layout)throw new _u.UnexpectedError("Repeating group layout not found");let isRgFlex=()=>layout.is_rg_flex(),isMasonry=()=>layout.is_masonry(),RepeatingGroupImplementation=(_ref=(_useContext$repeating=(_useContext=(0,_solidJs.useContext)(_EditorContext.default))==null?void 0:_useContext.repeatingGroupImplementation)!=null?_useContext$repeating:(_useContext2=(0,_solidJs.useContext)(_ThumbnailContext.default))==null?void 0:_useContext2.repeatingGroupImplementation)!=null?_ref:_RunRepeatingGroup.default;return(()=>{let _el$=_tmpl$.cloneNode(!0);(0,_web.use)(_directives.defaultEventHandlers,_el$,()=>props.instance);let _ref$=props.ref;return typeof _ref$=="function"?(0,_web.use)(_ref$,_el$):props.ref=_el$,(0,_web.insert)(_el$,(0,_web.createComponent)(RepeatingGroupImplementation,(0,_web.mergeProps)(props,{get cellSizing(){return props.childStyles[GROUP_ITEM_SELECTOR]},get children(){return props.children}}))),(0,_web.effect)(_p$=>{let _v$=props.id,_v$2=_objectSpread(_objectSpread({},props.classList),{},{"bubble-rg":!isRgFlex(),"bubble-rg-flex-row":isRgFlex(),masonry:isMasonry()}),_v$3=_objectSpread({overflow:instance.run_mode()?"auto":void 0,"-webkit-overflow-scrolling":instance.run_mode()?"auto":void 0},props.style);return _v$!==_p$._v$&&(0,_web.setAttribute)(_el$,"id",_p$._v$=_v$),_p$._v$2=(0,_web.classList)(_el$,_v$2,_p$._v$2),_p$._v$3=(0,_web.style)(_el$,_v$3,_p$._v$3),_p$},{_v$:void 0,_v$2:void 0,_v$3:void 0}),_el$})()}module.exports=(0,_createElement.createElement)(RepeatingGroupComponent,void 0,element=>({properties:{separatorWidth:new _properties.Property(instance=>repeating_groups._get_separator_width(instance.element),{fallback:0}),separatorColor:new _properties.Property(instance=>instance.get_static_property("separator_color"),{fallback:""}),separatorStyle:new _properties.Property(instance=>instance.get_static_property("separator_style"),{fallback:"none"})},styles:[new _properties.Style(instance=>{let fixedRows=instance.get_static_property("fixed_rows"),fixedColumns=instance.get_static_property("fixed_columns"),scrollDirection=!fixedRows&&!fixedColumns?instance.get_static_property("scroll_direction"):fixedColumns?"vertical":"horizontal",autoFitRow=instance.get_static_property("auto_fit_row"),autoFitColumn=instance.get_static_property("auto_fit_column"),autoSizeRow=autoFitRow?"auto-fit":"auto-fill",autoSizeColumn=autoFitColumn?"auto-fit":"auto-fill",isRgFlex=scrollDirection==="flex_row",isMasonry=!fixedRows&&scrollDirection==="vertical"&&!instance.get_static_property("auto_fit_row")&&instance.get_static_property("masonry"),style2={};if(isRgFlex||isMasonry){var _element_eval$evaluat;if(style2["column-gap"]="".concat((_element_eval$evaluat=element_eval.evaluate_property(instance,"column_cell_gap"))!=null?_element_eval$evaluat:0,"px"),!(isMasonry&&instance.run_mode())){var _element_eval$evaluat2;style2["row-gap"]="".concat((_element_eval$evaluat2=element_eval.evaluate_property(instance,"row_cell_gap"))!=null?_element_eval$evaluat2:0,"px")}if(isRgFlex)return style2["align-content"]=autoFitRow?"stretch":"flex-start",style2}else style2.gap="".concat(repeating_groups._get_separator_width(instance.element),"px");if(fixedRows){var _element_eval$evaluat3;let numRows=(_element_eval$evaluat3=element_eval.evaluate_property(instance,"rows"))!=null?_element_eval$evaluat3:0;element_props.is_fitting_height(instance)?style2["grid-template-rows"]="repeat(".concat(numRows,", minmax(max-content, auto))"):style2["grid-template-rows"]="repeat(".concat(numRows,", minmax(0, 1fr))")}else if(scrollDirection==="vertical")if(autoFitRow)style2["grid-auto-rows"]="minmax(max-content, 1fr)";else{var _element_eval$evaluat4;style2["grid-auto-rows"]=isMasonry&&instance.run_mode()?"max-content":"minmax(max-content, ".concat((_element_eval$evaluat4=element_eval.evaluate_property(instance,"cell_min_height_css"))!=null?_element_eval$evaluat4:"0px",")")}else{var _element_eval$evaluat5;style2["grid-template-rows"]="repeat(".concat(autoSizeRow,", minmax(").concat((_element_eval$evaluat5=element_eval.evaluate_property(instance,"cell_min_height_css"))!=null?_element_eval$evaluat5:"1fr",", 1fr))")}if(fixedColumns){var _element_eval$evaluat6;let numColumns=(_element_eval$evaluat6=element_eval.evaluate_property(instance,"columns"))!=null?_element_eval$evaluat6:0;element_props.is_fitting_width(instance)?style2["grid-template-columns"]="repeat(".concat(numColumns,", minmax(max-content, auto))"):style2["grid-template-columns"]="repeat(".concat(numColumns,", minmax(0, 1fr))")}else if(scrollDirection==="horizontal")if(instance.element.container_layout()===_responsive_layout.default.FIXED_LAYOUT)style2["grid-auto-columns"]=element_eval.evaluate_property(instance,"cell_min_width_css");else if(autoFitColumn)style2["grid-auto-columns"]="minmax(max-content, 1fr)";else{var _element_eval$evaluat7;style2["grid-auto-columns"]="minmax(max-content, ".concat((_element_eval$evaluat7=element_eval.evaluate_property(instance,"cell_min_width_css"))!=null?_element_eval$evaluat7:"0px",")")}else{var _element_eval$evaluat8;style2["grid-template-columns"]="repeat(".concat(autoSizeColumn,", minmax(").concat((_element_eval$evaluat8=element_eval.evaluate_property(instance,"cell_min_width_css"))!=null?_element_eval$evaluat8:"1fr",", 1fr))")}return style2["grid-auto-flow"]=scrollDirection==="vertical"?"row":"column",style2}),new _properties.Style(instance=>{var _element_eval$evaluat10;let fixedRows=instance.get_static_property("fixed_rows"),fixedColumns=instance.get_static_property("fixed_columns"),scrollDirection=!fixedRows&&!fixedColumns?instance.get_static_property("scroll_direction"):fixedColumns?"vertical":"horizontal",isRgFlex=scrollDirection==="flex_row",isMasonry=!fixedRows&&scrollDirection==="vertical"&&!instance.get_static_property("auto_fit_row")&&instance.get_static_property("masonry"),cellMinWidth=()=>{if(fixedColumns||scrollDirection==="vertical")return"";let minWidthCSS=element_eval.evaluate_property(instance,"cell_min_width_css");if(isRgFlex)return minWidthCSS;if(minWidthCSS!=null&&minWidthCSS.includes("%")){if(element_props.is_fitting_width(instance))return"";let percentage=Math.max(parseInt(minWidthCSS),1),rgWidth;if(instance instanceof _ServerElementInstance.default){instance.dynamic_catcher=!0;let w=element_props.min_width_css(instance);if(w.includes("px"))rgWidth=parseInt(w);else return""}else{var _instance$repeating_g,_instance$canvas$widt,_instance$canvas;(_instance$repeating_g=instance.repeating_group_layout)==null||_instance$repeating_g.register_resize(),rgWidth=(_instance$canvas$widt=(_instance$canvas=instance.canvas)==null?void 0:_instance$canvas.width())!=null?_instance$canvas$widt:0}let actualWidth=Math.floor(rgWidth*percentage/100);return"".concat(actualWidth,"px")}else return minWidthCSS},cellMinHeight=()=>{var _element_eval$evaluat9;if(fixedRows||scrollDirection==="horizontal")return"";let minHeightCSS=(_element_eval$evaluat9=element_eval.evaluate_property(instance,"cell_min_height_css"))!=null?_element_eval$evaluat9:"";if(isRgFlex)return minHeightCSS;if(minHeightCSS!=null&&minHeightCSS.includes("%")){if(element_props.is_fitting_height(instance))return"";let percentage=Math.max(parseInt(minHeightCSS),1),rgHeight;if(instance instanceof _ServerElementInstance.default){instance.dynamic_catcher=!0;let h=element_props.min_height_css(instance);if(h.includes("px"))rgHeight=parseInt(h);else return""}else{var _instance$repeating_g2,_instance$canvas$heig,_instance$canvas2;(_instance$repeating_g2=instance.repeating_group_layout)==null||_instance$repeating_g2.register_resize(),rgHeight=(_instance$canvas$heig=(_instance$canvas2=instance.canvas)==null?void 0:_instance$canvas2.height())!=null?_instance$canvas$heig:0}let actualHeight=Math.floor(rgHeight*percentage/100);return"".concat(actualHeight,"px")}else return minHeightCSS};return{"min-width":cellMinWidth(),"min-height":cellMinHeight(),"padding-top":isMasonry?"".concat((_element_eval$evaluat10=element_eval.evaluate_property(instance,"row_cell_gap"))!=null?_element_eval$evaluat10:0,"px"):void 0,"box-sizing":isRgFlex?"border-box":"content-box","flex-grow":isRgFlex?instance.get_static_property("auto_fit_column")?1:0:void 0}},{selector:GROUP_ITEM_SELECTOR,alwaysDynamic:!0}),...element_styles.placedStyling(element)]}))}});var require_RepeatingGroupLayout=__commonJS({"lib-browser-old/core/core_elements/Layouts/RepeatingGroupLayout.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.RepeatingGroupLayoutStyle=void 0;require_es_array_iterator();require_web_dom_collections_iterator();require_es_parse_int();require_es_array_includes();require_web_immediate();var u=require_u2(),elements=require_elements2(),property_applications=require_property_applications(),Lib=require_lib(),languages=require_languages(),status_bar=require_status_bar(),logger=require_logger(),sample=require_sample(),btypes=require_btypes(),element_utils=require_element_utils(),epoch=require_epoch2(),events=require_events(),epoch_consts=require_epoch(),repeating_group_utils=require_repeating_group_utils(),repeating_groups=require_repeating_groups(),GroupItem=require_GroupItem(),responsive_layout=require_responsive_layout(),responsive_css=require_responsive_css(),element_eval=require_element_eval(),b_object=require_b_object(),element_props=require_element_props(),DEFAULT_SEPARATOR_WIDTH=1,BORDER_BOX_COLOR="#CCCCCC",MAX_NUMBER_OF_CELLS=5e3,display_data_span=epoch_consts.SPANS.rg_display_data_in_cells,add_cells_span=epoch_consts.SPANS.rg_add_cells;function create_resize_observer(canvas,options){let resize_observer,dependency=u.Dependency();return typeof ResizeObserver<"u"&&(resize_observer=new ResizeObserver(entries=>{dependency.invalidate()}),resize_observer.observe(canvas[0],options)),{register(){return dependency.register()},disconnect(){var _resize_observer;return(_resize_observer=resize_observer)==null?void 0:_resize_observer.disconnect()}}}var RepeatingGroupContainer=class extends events.EventEmitter{constructor(owner_instance,container_canvas){super(),this.owner_instance=owner_instance,this.container_canvas=container_canvas,this.children=[]}destroy(){for(let child of this.children)child.destroy();this.children=[]}resize_width(){}add_to_instances(instance){}ready_key(){return this.flow_created}get_canvas(){return this.container_canvas}get_owner(){return this.owner_instance}render(html){let canvas=$(html);return canvas.addClass("bubble-element"),canvas}to_canvas(instance){}set_height(instance,height){instance.canvas.css("height",height)}add(instance){this.container_canvas.append(instance.get_canvas())}create_child(owner_instance,container_canvas){let c=this.owner_instance.container.create_child(owner_instance,container_canvas);return this.children.push(c),c}initialize(){}detach(instance){}},RepeatingGroupLayoutStyle=class{constructor(_ref){let{instance}=_ref;this.type="RepeatingGroup",instance.repeating_layout_type="RepeatingGroup",this.instance=instance,this.mode=this.instance.mode,this.has_written_a_list=!1,this.max_index=this.add_cells=null,this.previous_search=null,this.started_adding_cells=!1,this.spinner=null,this.list_item=null,this.old_max_index=0,this.last_cell_add_timeout=null,this.first_unused_cell=null,this.finished_loading_switch=u.MakeSwitch(null,"loading_switch"),this.extra_fields=[]}instance_children(){return this.instance.children}is_on_window(){var _window,_window$BrowserDetect;return((_window=window)==null||(_window$BrowserDetect=_window.BrowserDetect)==null?void 0:_window$BrowserDetect.OS)==="Windows"}is_rtl(){return languages.is_rtl(Lib().app_language())}separator_width(){return this.instance.get_static_property("separator_width")}separator_style(){return this.instance.get_static_property("separator_style")}separator_color(){return this.instance.get_static_property("separator_color")}is_fixed_width(){return this.instance.get_static_property("fixed_width")}stable_pagination(){return this.instance.get_static_property("stable_pagination")}group_type(){return this.instance.get_static_property("group_type")}show_all_items(){return this.instance.get_static_property("show_all_items")}auto_fit_row(){return this.instance.get_static_property("auto_fit_row")}auto_fit_column(){return this.instance.get_static_property("auto_fit_column")}scroll_direction(){return!this.fixed_rows()&&!this.fixed_columns()?this.instance.get_static_property("scroll_direction"):this.fixed_columns()?"vertical":"horizontal"}is_rg_flex(){return this.scroll_direction()==="flex_row"}is_masonry(){return!this.fixed_rows()&&this.scroll_direction()==="vertical"&&!this.instance.get_static_property("auto_fit_row")&&!!this.instance.get_static_property("masonry")}row_cell_gap(){return element_eval.evaluate_property(this.instance,"row_cell_gap")}column_cell_gap(){return element_eval.evaluate_property(this.instance,"column_cell_gap")}fixed_rows(){return this.instance.get_static_property("fixed_rows")}fixed_columns(){return this.instance.get_static_property("fixed_columns")}fixed_list(){return this.fixed_rows()&&this.fixed_columns()}columns(){var _this$_column_watcher;return(_this$_column_watcher=this._column_watcher)!=null||(this._column_watcher=u.Watcher(()=>this.fixed_columns()?element_eval.evaluate_property(this.instance,"columns"):(this.register_resize(),element_eval.evaluate_property(this.instance,"cell_min_width_css"),this.instance.get_static_property("scroll_direction"),this.instance.canvas.css("grid-template-columns").split(" ").length))),this._column_watcher.get()}rows(){var _this$_row_watcher;return(_this$_row_watcher=this._row_watcher)!=null||(this._row_watcher=u.Watcher(()=>this.fixed_rows()?element_eval.evaluate_property(this.instance,"rows"):(this.register_resize(),element_eval.evaluate_property(this.instance,"cell_min_height_css"),this.instance.get_static_property("scroll_direction"),this.instance.canvas.css("grid-template-rows").split(" ").length))),this._row_watcher.get()}estimate_one_row(){let scroll_direction=this.scroll_direction();if(scroll_direction==="vertical")return this.columns();if(scroll_direction==="horizontal")return this.rows();{let estimated_cell_width=this.instance_children()[0].canvas.width();return this.instance.canvas.width()/estimated_cell_width}}data_source(){return element_eval.evaluate_property(this.instance,"data_source")}total_number_of_cells(){return this.rows()*this.columns()}guess_number_of_cells(){if(this.fixed_list())return this.total_number_of_cells();let guess_dimension=dimension=>{let min_cell_size=element_eval.evaluate_property(this.instance,"cell_min_".concat(dimension,"_css"));if(this.instance.run_mode()&&min_cell_size.indexOf("%")!==-1){let percentage=Math.max(parseInt(min_cell_size),1);return Math.max(Math.ceil(100/percentage),1)}else{let pixels;if(!this.instance.run_mode())this.register_first_cell_resize(),pixels=this.list_item[dimension]();else{let first_cell=this.instance_children()[0];if(!first_cell)pixels=parseInt(min_cell_size);else{let dummies=[];if(dimension==="height"&&this.auto_fit_row()||dimension==="width"&&this.auto_fit_column()){let dummy=document.createElement("div");for(let i=0;i<50;i++)dummies.push(dummy.cloneNode());this.instance.canvas[0].append(...dummies)}let is_hidden=!first_cell.is_visible();first_cell.do_show(),dimension==="height"?pixels=first_cell.canvas.outerHeight():pixels=first_cell.canvas.outerWidth(),is_hidden&&first_cell.do_hide();for(let dummy of dummies)this.instance.canvas[0].removeChild(dummy)}}pixels=Math.max(pixels,1),this.register_resize();let rg_size=0;if(dimension==="height"?(this.instance.run_mode()&&element_props.is_fitting_height(this.instance)&&(rg_size=Math.max(window.innerHeight-this.instance.canvas[0].getBoundingClientRect().top,0)),rg_size=Math.max(rg_size,this.instance.canvas.innerHeight()),element_props.min_height_css(this.instance)):(this.instance.run_mode()&&element_props.is_fitting_width(this.instance)&&(rg_size=Math.max(window.innerWidth-this.instance.canvas[0].getBoundingClientRect().left,0)),rg_size=Math.max(rg_size,this.instance.canvas.innerWidth()),element_props.min_width_css(this.instance)),this.instance.run_mode())return Math.max(Math.ceil(rg_size/pixels),1);{let separator_size;return this.is_rg_flex()?dimension==="width"?separator_size=this.column_cell_gap():separator_size=this.row_cell_gap():separator_size=this.separator_width(),Math.max(Math.floor((rg_size+separator_size)/(pixels+separator_size)),1)}}};if(this.scroll_direction()==="vertical"){let guessed_rows;return this.fixed_rows()?guessed_rows=this.rows():guessed_rows=guess_dimension("height"),this.columns()*guessed_rows}else if(this.scroll_direction()==="horizontal"){let guessed_columns;return this.fixed_columns()?guessed_columns=this.columns():guessed_columns=guess_dimension("width"),this.rows()*guessed_columns}else return guess_dimension("width")*guess_dimension("height")}value_id(){var _this$group_type;return(_this$group_type=this.group_type())!=null?_this$group_type:"user"}floating_group_parents(){return this.instance.element.parents("FloatingGroup")}show_range(){return this.instance.state("show_range")}list_data(){return this.instance.state("list_data")}loading(){return this.instance.state("loading")}set_list_data(data){this.instance.state("list_data",data)}set_show_range(data){this.instance.state("show_range",data)}set_loading(data){this.instance.state("loading",data),data?this.finished_loading_switch.turn_off():this.finished_loading_switch.turn_on()}register_resize(){var _this$_rg_resize_obse;(_this$_rg_resize_obse=this._rg_resize_observer)!=null||(this._rg_resize_observer=create_resize_observer(this.instance.canvas)),this._rg_resize_observer.register()}num_to_row(num){return this.scroll_direction()==="vertical"?Math.floor((num-1)/this.columns())+1:(num-1)%this.rows()+1}num_to_col(num){return this.scroll_direction()==="vertical"?(num-1)%this.columns()+1:Math.floor((num-1)/this.rows())+1}has_top_border(num){return this.is_rg_flex()?!1:this.num_to_row(num)>1}has_left_border(num){return this.is_rg_flex()?!1:this.num_to_col(num)>1}cell_width_px(){var _this$_cell_width_wat;return(_this$_cell_width_wat=this._cell_width_watcher)!=null||(this._cell_width_watcher=u.Watcher(()=>{let cell_min_width=element_eval.evaluate_property(this.instance,"cell_min_width_css");if(cell_min_width.indexOf("%")!==-1){if(element_props.is_fitting_width(this.instance))return"";let percentage=Math.max(parseInt(cell_min_width),1);this.register_resize();let actual_width=Math.floor(this.instance.canvas.width()*percentage/100);return"".concat(actual_width,"px")}else return cell_min_width})),this._cell_width_watcher.get()}cell_height_px(){var _this$_cell_height_wa;return(_this$_cell_height_wa=this._cell_height_watcher)!=null||(this._cell_height_watcher=u.Watcher(()=>{let cell_min_height=element_eval.evaluate_property(this.instance,"cell_min_height_css");if(cell_min_height.indexOf("%")!==-1){if(element_props.is_fitting_height(this.instance))return"";let percentage=Math.max(parseInt(cell_min_height),1);this.register_resize();let actual_height=Math.floor(this.instance.canvas.height()*percentage/100);return"".concat(actual_height,"px")}else return cell_min_height})),this._cell_height_watcher.get()}cell_sizing(cell_canvas){element_eval.on_property_change(this.instance,"container_layout",layout=>{layout==="fixed"?cell_canvas.addClass("fixed"):cell_canvas.removeClass("fixed")}),this.instance.autorun(()=>{this.is_rg_flex()?cell_canvas.css({"box-sizing":"border-box","min-width":element_eval.evaluate_property(this.instance,"cell_min_width_css"),"min-height":element_eval.evaluate_property(this.instance,"cell_min_height_css"),"flex-grow":this.auto_fit_column()?1:0}):cell_canvas.css({"box-sizing":"content-box","min-width":this.fixed_columns()||this.scroll_direction()!=="horizontal"?"":this.cell_width_px(),"min-height":this.fixed_rows()||this.scroll_direction()!=="vertical"?"":this.cell_height_px()})})}observe_masonry_cell(div){var _this$_masonry_resize;let observer_callback=entries=>{for(let entry of entries){let size;entry.borderBoxSize&&entry.borderBoxSize.length>0?size=entry.borderBoxSize[0].blockSize:size=entry.target.offsetHeight;let grid_row_end_value="span ".concat(Math.ceil(size));entry.target.style.setProperty("grid-row-end",grid_row_end_value)}};(_this$_masonry_resize=this._masonry_resize_observer)!=null||(this._masonry_resize_observer=new ResizeObserver(observer_callback)),this._masonry_resize_observer.observe(div,{box:"border-box"})}create_cell(num,cells_canvas){let group_item=new GroupItem(this.instance,0,num),child=elements.ElementInstance(group_item,this.instance.mode);child.state("group_data",elements.STATE_NOT_READY),child.drawn_key=u.MakeKey(null,"cell_drawn"),group_item.instance=child,this.instance_children().push(child),child.state("cell_index",num),child._is_visible_me=!1,child.register(this.instance),child.create_skeleton(this.container),child.start_draw_tree(),this.cell_sizing(child.canvas),this.add_sep(num,child.canvas),child.do_hide(),child.drawn_key.turn(),this.instance.run_mode()&&this.is_masonry()&&this.observe_masonry_cell(child.canvas[0])}add_spinner(){if(!this.instance.is_visible()){var _this$spinner;(_this$spinner=this.spinner)==null||_this$spinner.call(this);return}this.spinner||(this.spinner=status_bar.spinner(this.instance))}remove_spinner(){var _this$spinner2;(_this$spinner2=this.spinner)==null||_this$spinner2.call(this),this.spinner=null}init_raw_list_watcher(start_fn,end_fn){var _this$_raw_list_data_;(_this$_raw_list_data_=this._raw_list_data_watcher)==null||_this$_raw_list_data_.destroy(),this._raw_list_data_watcher=u.Watcher(()=>{var _this$list_data$with_,_this$list_data,_this$list_data$with_2,_this$list_data$with_3,_this$list_data$with_4;let start_index=start_fn(),last_index=end_fn();return(_this$list_data$with_=(_this$list_data=this.list_data())==null||(_this$list_data$with_2=_this$list_data.with_extra_fields)==null||(_this$list_data$with_3=(_this$list_data$with_4=_this$list_data$with_2.call(_this$list_data,this.extra_fields)).get_children)==null?void 0:_this$list_data$with_3.call(_this$list_data$with_4,start_index,last_index))!=null?_this$list_data$with_:[]});let prev;this._raw_list_data_watcher.on_value(new_val=>{this.set_loading(!b_object.compare(new_val,prev)),prev=new_val})}raw_list_data(){var _this$_raw_list_data_2;return(_this$_raw_list_data_2=this._raw_list_data_watcher)==null?void 0:_this$_raw_list_data_2.get()}send_data_to_children(){this.add_spinner();let list=this.raw_list_data();this.remove_spinner(),this.mode!=="responsive"&&(list=list.filter(item=>item!=null));for(let n=0;n<list.length;n++){let item=list[n];this.instance_children()[n]==null&&u.autorun_top(()=>{this.create_cell(n+1,this.instance.canvas)});let child=this.instance_children()[n];u.WaitFor(u.page_loaded_key,()=>child.can_register_workflows().turn()),child.message("set_group_data",item),child.do_show()}return this.first_unused_cell=list.length,this.instance.last_cell=list.length,list.length}hide_unused_cells(){this.instance.autorun(()=>{let children2=this.instance_children();for(let m=this.first_unused_cell;m<children2.length;m++){var _children$m;(_children$m=children2[m])==null||_children$m.do_hide()}})}end_of_list(){if(this.list_data()!=null&&this.fixed_list()&&this.columns()===1&&this.rows()===1){var _this$list_data2;this.show_range()===((_this$list_data2=this.list_data())==null?void 0:_this$list_data2.length())&&this.list_data().length()>1&&this.set_show_range(this.list_data().length()-1)}}display_data_in_cells(watch_cell){epoch.traceSpan(display_data_span.name,display_data_span.type,()=>{this.instance.autorun(()=>{if(!this.instance.is_visible())return;this.set_loading(!0);let scrolling_canvas,scroll_top;u.is_on_mobile_or_tablet()||(scrolling_canvas=$("html"),scroll_top=scrolling_canvas[0].scrollTop);let n=this.send_data_to_children();u.is_on_mobile_or_tablet()||scrolling_canvas.scrollTop(scroll_top),this.hide_unused_cells(),this.end_of_list(),this.has_written_a_list&&u.wait_for_updates(()=>{this.instance.mark_children_registered(),this.instance.get_children_drawn_key().turn()}),u.wait_for_updates(()=>{let[error,ready]=this._raw_list_data_watcher.get_current_status_array();this.set_loading(!ready||error!=null),watch_cell&&this.watch_lazy_loader(n-1)})})})}show_border_outline(){return this.mode==="edit"&&this.instance.state("show_borders")&&(this.separator_width()===0||this.separator_style()==="none")}get_separator_width(){return this.show_border_outline()?DEFAULT_SEPARATOR_WIDTH:repeating_groups._get_separator_width(this.instance.element)}add_sep(num,div){this.instance.autorun(()=>{div.css({"border-top-style":"none","margin-top":""}),this.has_top_border(num)&&(this.is_masonry()?this.instance.run_mode()&&div.css({"padding-top":"".concat(this.row_cell_gap(),"px")}):div.css({"border-top-width":this.get_separator_width()+"px","border-top-color":this.show_border_outline()?BORDER_BOX_COLOR:this.separator_color(),"border-top-style":this.show_border_outline()?"solid":this.separator_style(),"margin-top":-this.get_separator_width()+"px"}))}),this.instance.autorun(()=>{if(!this.is_masonry()&&this.has_left_border(num)){let opts;this.is_rtl()?opts={"border-right":this.get_separator_width()+"px","border-right-color":this.show_border_outline()?BORDER_BOX_COLOR:this.separator_color(),"border-right-style":this.show_border_outline()?"solid":this.separator_style(),"margin-right":-this.get_separator_width()+"px"}:opts={"border-left":this.get_separator_width()+"px","border-left-color":this.show_border_outline()?BORDER_BOX_COLOR:this.separator_color(),"border-left-style":this.show_border_outline()?"solid":this.separator_style(),"margin-left":-this.get_separator_width()+"px"},property_applications.apply_css_style(div,opts)}else this.is_rtl()?div.css({"border-right-style":"none","margin-right":""}):div.css({"border-left-style":"none","margin-left":""})})}get_edit_mode_dummies(){let canvas=this.instance.get_canvas();return $("> .list-dummy",canvas)}setup_grid_css(){let canvas=this.instance.get_canvas();this.instance.autorun(()=>{canvas.removeClass("bubble-rg bubble-rg-flex-row"),this.is_rg_flex()?(canvas.addClass("bubble-rg-flex-row"),this.instance.autorun(()=>{canvas.css({"row-gap":"".concat(this.row_cell_gap(),"px"),"column-gap":"".concat(this.column_cell_gap(),"px"),"align-content":this.auto_fit_row()?"stretch":"flex-start"})})):(canvas.addClass("bubble-rg"),this.instance.autorun(()=>{canvas.toggleClass("masonry",this.is_masonry()),this.is_masonry()?canvas.css({"column-gap":"".concat(this.column_cell_gap(),"px"),"row-gap":this.instance.run_mode()?"":"".concat(this.row_cell_gap(),"px")}):canvas.css({gap:this.get_separator_width()});let auto_size_row=this.auto_fit_row()?"auto-fit":"auto-fill",auto_size_column=this.auto_fit_column()?"auto-fit":"auto-fill";this.fixed_rows()?element_props.is_fitting_height(this.instance)?canvas.css({"grid-template-rows":"repeat(".concat(this.rows(),", minmax(max-content, auto))"),"grid-auto-rows":""}):canvas.css({"grid-template-rows":"repeat(".concat(this.rows(),", minmax(0, 1fr))"),"grid-auto-rows":""}):this.scroll_direction()==="vertical"?this.auto_fit_row()?canvas.css({"grid-template-rows":"","grid-auto-rows":"minmax(max-content, 1fr)"}):canvas.css({"grid-template-rows":"","grid-auto-rows":this.is_masonry()&&this.instance.run_mode()?"max-content":"minmax(max-content, ".concat(element_eval.evaluate_property(this.instance,"cell_min_height_css"),")")}):canvas.css({"grid-template-rows":"repeat(".concat(auto_size_row,", minmax(").concat(element_eval.evaluate_property(this.instance,"cell_min_height_css"),", 1fr))"),"grid-auto-rows":""}),this.fixed_columns()?element_props.is_fitting_width(this.instance)?canvas.css({"grid-template-columns":"repeat(".concat(this.columns(),", max-content)"),"grid-auto-columns":""}):canvas.css({"grid-template-columns":"repeat(".concat(this.columns(),", minmax(0, 1fr))"),"grid-auto-columns":""}):this.scroll_direction()==="horizontal"?this.auto_fit_column()?canvas.css({"grid-template-columns":"","grid-auto-columns":"minmax(max-content, 1fr)"}):canvas.css({"grid-template-columns":"","grid-auto-columns":"minmax(max-content, ".concat(element_eval.evaluate_property(this.instance,"cell_min_width_css"),")")}):canvas.css({"grid-template-columns":"repeat(".concat(auto_size_column,", minmax(").concat(element_eval.evaluate_property(this.instance,"cell_min_width_css"),", 1fr))"),"grid-auto-columns":""}),canvas.css({"grid-auto-flow":this.scroll_direction()==="vertical"?"row":"column"})}))})}create_provisional_cell(){this.instance.autorun(()=>{let canvas=this.instance.get_canvas();this.mode!=="run"&&(canvas.find(".list-item").length===0?this.list_item=u.div("list-item",canvas):this.list_item=canvas.find(".list-item"))})}setup_scrolling(){this.instance.get_canvas().css({overflow:"auto","overflow-scrolling":"touch","-webkit-overflow-scrolling":"touch"})}add_cells_cb(additional_to_add,cb_no){var _additional_to_add;(_additional_to_add=additional_to_add)!=null||(additional_to_add=1),this.started_adding_cells=!0,u.run_once(30,()=>{var _this$list_data$with_5,_this$list_data3,_this$list_data3$with;return(_this$list_data$with_5=(_this$list_data3=this.list_data())==null||(_this$list_data3$with=_this$list_data3.with_extra_fields)==null?void 0:_this$list_data3$with.call(_this$list_data3,this.extra_fields).get_children(this.max_index(),additional_to_add))!=null?_this$list_data$with_5:[]},(err,last_entry)=>{if(err){logger.log(err),this.started_adding_cells=!1;return}if(last_entry.length){let to_add=Math.min(last_entry.length,additional_to_add),offset=this.estimate_one_row();this.add_cells(this.max_index()+to_add+offset),this.max_index(this.max_index()+to_add+offset-1),u.wait_for_updates(()=>{this.started_adding_cells=!1})}else this.started_adding_cells=!1,cb_no==null||cb_no()})}full_display_add_cells(){this.max_index=u.Box(null,!0),this.init_raw_list_watcher(()=>0,()=>this.max_index()),this.display_data_in_cells(),this.instance.autorun(()=>{var _this$list_data$lengt,_this$list_data4;let n=Math.min((_this$list_data$lengt=(_this$list_data4=this.list_data())==null?void 0:_this$list_data4.length())!=null?_this$list_data$lengt:0,MAX_NUMBER_OF_CELLS);n>100&&logger.owner_warn(new u.OwnerError("repeating group showing more than 100 items",{display:"This repeating group is showing more than 100 items, which can considerably slow down your page. You should consider not showing all items at once",element_instance:this.instance})),u.autorun_top(()=>{this.add_cells(n),this.max_index(n)})})}page_style_add_cells(){let total_cells=this.total_number_of_cells();for(let num=1;num<=total_cells;num++)this.create_cell(num,this.instance.canvas);this.init_raw_list_watcher(()=>this.show_range(),()=>this.total_number_of_cells()),this.display_data_in_cells()}load_more_cells(from_root){let columns,rows;if(this.scroll_direction()!=="horizontal"){columns=this.estimate_one_row();let distance_to_bottom;from_root?distance_to_bottom=window.innerHeight*3-this.instance.canvas[0].getBoundingClientRect().bottom:distance_to_bottom=this.instance.canvas[0].clientHeight*3-(this.instance.canvas[0].scrollHeight-this.instance.canvas[0].scrollTop);let estimated_cell_height=this.instance_children()[0].canvas.height();rows=Math.ceil(Math.max(distance_to_bottom/estimated_cell_height,1))+2}else{rows=this.rows();let distance_to_right;from_root?distance_to_right=window.innerWidth*2-this.instance.canvas[0].getBoundingClientRect().right:distance_to_right=this.instance.canvas[0].clientWidth*3-(this.instance.canvas[0].scrollWidth-this.instance.canvas[0].scrollLeft);let estimated_cell_width=this.instance_children()[0].canvas.width();columns=Math.ceil(Math.max(distance_to_right/estimated_cell_width,1))+2}this.add_cells_cb(rows*columns)}watch_lazy_loader(watch_index){var _this$_root_intersect,_this$_canvas_interse,_this$instance_childr;(_this$_root_intersect=this._root_intersection_observer)==null||_this$_root_intersect.disconnect(),(_this$_canvas_interse=this._canvas_intersection_observer)==null||_this$_canvas_interse.disconnect();let can_scroll;this.scroll_direction()!=="horizontal"?can_scroll=this.instance.canvas[0].scrollHeight>this.instance.canvas[0].clientHeight&&this.instance.canvas[0].clientHeight<window.innerHeight:can_scroll=this.instance.canvas[0].scrollWidth>this.instance.canvas[0].clientWidth&&this.instance.canvas[0].clientWidth<window.innerWidth;let observer;if(can_scroll){var _this$_canvas_interse2;observer=(_this$_canvas_interse2=this._canvas_intersection_observer)!=null?_this$_canvas_interse2:this._canvas_intersection_observer=new IntersectionObserver(entries=>{!this.started_adding_cells&&entries[0].isIntersecting&&this.load_more_cells()},{root:this.instance.canvas[0],rootMargin:"100%"})}else{var _this$_root_intersect2;observer=(_this$_root_intersect2=this._root_intersection_observer)!=null?_this$_root_intersect2:this._root_intersection_observer=new IntersectionObserver(entries=>{!this.started_adding_cells&&entries[0].isIntersecting&&this.load_more_cells(!0)},{rootMargin:"100%"})}let canvas_to_watch=(_this$instance_childr=this.instance_children()[watch_index])==null?void 0:_this$instance_childr.canvas;canvas_to_watch!=null&&observer.observe(canvas_to_watch[0])}populate_data(){u.autorun_once(()=>{this.setup_scrolling(),this.fixed_list()?this.page_style_add_cells():this.show_all_items()?this.full_display_add_cells():(this.started_adding_cells=!1,this.add_cells(1),this.max_index=u.Box(Math.min(this.guess_number_of_cells(),100)),this.add_cells(this.max_index()+1),this.init_raw_list_watcher(()=>0,()=>this.max_index()+1),this.display_data_in_cells(!0))})}do_scroll(index,properties){let child=this.instance_children()[index];if(this.scroll_direction()==="horizontal"){let scrolling_canvas=this.instance.get_canvas();for(;scrolling_canvas.css("position")!=="fixed"&&scrolling_canvas.length&&(scrolling_canvas[0].scrollWidth<=scrolling_canvas[0].clientWidth||["hidden","visible"].includes(scrolling_canvas.css("overflow-x")))&&(scrolling_canvas=scrolling_canvas.parent(),!scrolling_canvas.is("body")););let scroll_position;scrolling_canvas.length===0||scrolling_canvas.is("body")?(scrolling_canvas=$("html"),scroll_position=child.get_canvas().offset().left+properties.offset):scroll_position=child.get_canvas().offset().left-scrolling_canvas.offset().left+scrolling_canvas[0].scrollLeft+properties.offset,properties.animate?scrolling_canvas.animate({scrollLeft:scroll_position},300):scrolling_canvas.scrollLeft(scroll_position)}else{let scrolling_canvas=this.instance.get_canvas();for(;scrolling_canvas.css("position")!=="fixed"&&scrolling_canvas.length&&(scrolling_canvas[0].scrollHeight<=scrolling_canvas[0].clientHeight||["hidden","visible"].includes(scrolling_canvas.css("overflow-y")))&&(scrolling_canvas=scrolling_canvas.parent(),!scrolling_canvas.is("body")););let scroll_position;scrolling_canvas.length===0||scrolling_canvas.is("body")?(scrolling_canvas=$("html"),scroll_position=child.get_canvas().offset().top+properties.offset):scroll_position=child.get_canvas().offset().top-scrolling_canvas.offset().top+scrolling_canvas[0].scrollTop+properties.offset,properties.animate?scrolling_canvas.animate({scrollTop:scroll_position},300):scrolling_canvas.scrollTop(scroll_position)}}setup_messages(){this.set_list_data(elements.STATE_NOT_READY);let used_data_sources_cache=new Map;this.instance.autorun(()=>{this.instance.state("datasource_changed_by_workflow_action")||(repeating_groups.check_astable_loop(this.instance,this.data_source(),used_data_sources_cache),this.write_data(this.data_source()))}),this.instance.on_message("set_list_data",new_list=>{this.instance.state("datasource_changed_by_workflow_action",!0),this.write_data(new_list)}),this.instance.on_message("clear_list",()=>{if(this.instance.state("datasource_changed_by_workflow_action",!1),this.fixed_list())this.set_show_range(0);else{var _this$instance$get_ca,_this$instance$get_ca2;(_this$instance$get_ca=this.instance.get_canvas())==null||_this$instance$get_ca.scrollLeft(0),(_this$instance$get_ca2=this.instance.get_canvas())==null||_this$instance$get_ca2.scrollTop(0)}for(let child of(_this$instance_childr2=this.instance_children())!=null?_this$instance_childr2:[]){var _this$instance_childr2;element_utils.reset_inputs_and_groups(child)}}),this.instance.on_message("show_next",wrap_to_beginning=>{var _wrap_to_beginning;(_wrap_to_beginning=wrap_to_beginning)!=null||(wrap_to_beginning=!1),u.run_once(30,()=>{var _this$list_data5;return(_this$list_data5=this.list_data())==null?void 0:_this$list_data5.length()},(err,length)=>{if(err){logger.log(err);return}let to_show=this.show_range();if(to_show+=this.total_number_of_cells(),this.stable_pagination()){let is_last_page=to_show>=length;if(is_last_page&&wrap_to_beginning)to_show=0;else if(is_last_page)return}else{let is_last_page=to_show===length,is_filler_last_page=to_show+this.total_number_of_cells()>length;is_last_page&&wrap_to_beginning?to_show=0:is_filler_last_page&&(to_show=Math.max(length-this.total_number_of_cells(),0))}this.set_show_range(to_show)})}),this.instance.on_message("show_previous",wrap_to_end=>{var _wrap_to_end;(_wrap_to_end=wrap_to_end)!=null||(wrap_to_end=!1),u.run_once(30,()=>{var _this$list_data6;return(_this$list_data6=this.list_data())==null?void 0:_this$list_data6.length()},(err,length)=>{if(err){logger.log(err);return}let to_show=this.show_range();to_show===0&&wrap_to_end?this.stable_pagination()?to_show=Math.max(length-this.total_number_of_cells()+length%this.total_number_of_cells(),0):to_show=Math.max(length-this.total_number_of_cells(),0):to_show=Math.max(to_show-this.total_number_of_cells(),0),this.set_show_range(to_show)})}),this.instance.on_message("go_to_page",val=>{u.run_once(30,()=>{var _this$list_data7;return(_this$list_data7=this.list_data())==null?void 0:_this$list_data7.length()},(err,length)=>{if(err){logger.log(err);return}let to_show=(val-1)*this.total_number_of_cells();to_show+this.total_number_of_cells()>length&&!this.stable_pagination()&&(to_show=Math.max(0,length-this.total_number_of_cells())),this.set_show_range(to_show)})}),this.instance.on_message("scroll_to",properties=>{this.fixed_list()||u.WaitFor(this.instance.get_children_drawn_key(),()=>{u.run_once(30,()=>{var _this$list_data8;return this.list_data()==null&&!this.loading()?-1:(_this$list_data8=this.list_data())==null?void 0:_this$list_data8.position(properties.entry,btypes.get(this.group_type()))},(err,index)=>{var _this$instance_childr3,_this$instance_childr4;if(err){logger.log(err);return}index!==-1&&((_this$instance_childr3=this.instance_children())!=null&&(_this$instance_childr4=_this$instance_childr3[index])!=null&&_this$instance_childr4.is_visible()?this.do_scroll(index,properties):u.wait_for_updates(()=>{this.instance.message("draw_till",index);let wait=()=>{this.instance.setTimeout(()=>{var _this$instance_childr5,_this$instance_childr6,_this$instance_childr7;(_this$instance_childr5=this.instance_children())!=null&&(_this$instance_childr6=_this$instance_childr5[index])!=null&&_this$instance_childr6.is_visible()&&(_this$instance_childr7=this.instance_children())!=null&&_this$instance_childr7[index].canvas.is(":visible")?this.do_scroll(index,properties):wait()},50)};wait()}))})})})}populate_sample_list(){setImmediate(()=>{this.write_data(Lib().db_instance().static_list(this.value_id(),[new sample.SampleObject(this.value_id())]))})}write_data(new_data){new_data!==void 0&&(this.has_written_a_list=!0);let dehydrated;new_data&&new_data.dehydrate?dehydrated=new_data.dehydrate():(dehydrated="no data",new_data=null),dehydrated!==this.previous_search&&(this.previous_search=dehydrated,this.set_list_data(new_data),this.set_show_range(0))}reset_class_data(){let canvas=this.instance.get_canvas();this.instance.children=[],this.add_cells=last_cell=>{epoch.traceSpan(add_cells_span.name,add_cells_span.type,()=>{for(let num=this.old_max_index+1;num<=last_cell;num++)this.create_cell(num,canvas);this.old_max_index<last_cell&&(this.old_max_index=last_cell,this.instance.last_cell=this.old_max_index)})}}do_register(){this.mode==="run"&&this.setup_messages()}do_create_container(){this.container=new RepeatingGroupContainer(this.instance,this.instance.canvas)}compute_extra_fields(){this.extra_fields=repeating_group_utils.evaluate_extra_fields(this.instance.element)}do_initialize(){this.instance.on_message("draw_till",index=>{this.scroll_style==="none"||!this.max_index||this.max_index()>index||(this.add_cells(index+1),this.max_index(index))}),this.reset_class_data(),this.setup_grid_css(),this.create_provisional_cell(),this.instance.wait_for_visible_lite(()=>{this.instance.run_mode()&&this.compute_extra_fields(),["run","responsive"].includes(this.mode)?this.populate_data():this.thumbnail_and_edit_mode_logic()})}destroy(){var _this$_root_intersect3,_this$_canvas_interse3,_this$_rg_resize_obse2,_this$_cell_resize_ob2,_this$_masonry_resize2,_this$_row_watcher2,_this$_column_watcher2,_this$_cell_width_wat2,_this$_cell_height_wa2,_this$_item_watcher2,_this$container;(_this$_root_intersect3=this._root_intersection_observer)==null||_this$_root_intersect3.disconnect(),(_this$_canvas_interse3=this._canvas_intersection_observer)==null||_this$_canvas_interse3.disconnect(),(_this$_rg_resize_obse2=this._rg_resize_observer)==null||_this$_rg_resize_obse2.disconnect(),(_this$_cell_resize_ob2=this._cell_resize_observer)==null||_this$_cell_resize_ob2.disconnect(),(_this$_masonry_resize2=this._masonry_resize_observer)==null||_this$_masonry_resize2.disconnect(),(_this$_row_watcher2=this._row_watcher)==null||_this$_row_watcher2.destroy(),(_this$_column_watcher2=this._column_watcher)==null||_this$_column_watcher2.destroy(),(_this$_cell_width_wat2=this._cell_width_watcher)==null||_this$_cell_width_wat2.destroy(),(_this$_cell_height_wa2=this._cell_height_watcher)==null||_this$_cell_height_wa2.destroy(),(_this$_item_watcher2=this._item_watcher)==null||_this$_item_watcher2.destroy(),(_this$container=this.container)==null||_this$container.destroy()}};exports.RepeatingGroupLayoutStyle=RepeatingGroupLayoutStyle}});var require_RepeatingGroup2=__commonJS({"lib-browser-old/core/core_elements/elements/RepeatingGroup.js"(){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();var u=_interopRequireWildcard(require_u2()),property_applications=_interopRequireWildcard(require_property_applications()),_StaticList=_interopRequireDefault(require_StaticList()),element_transformer=_interopRequireWildcard(require_element_transformer()),groups=_interopRequireWildcard(require_groups2()),repeating_groups=_interopRequireWildcard(require_repeating_groups()),_RepeatingGroupComponent=_interopRequireDefault(require_RepeatingGroupComponent()),element_eval=_interopRequireWildcard(require_element_eval()),_ElementInstance=_interopRequireDefault(require_ElementInstance()),btype_ids=_interopRequireWildcard(require_btype_ids()),RepeatingGroupLayout=_interopRequireWildcard(require_RepeatingGroupLayout());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}element_transformer.make_element("RepeatingGroup",{display:"Repeating Group",category:"containers",glyph_id:"repeating_group",list_order:2,keyboard_shortcut:null,defaults:{width:300,height:350,fixed_columns:!0,fixed_rows:!0},updated_default_sizing:{width:280},field_names:{group_type:{no_states:!0},data_source:{},rows:{default:4},columns:{default:1},separator_style:{default:"dashed",no_states:!0,in_style:!0},separator_width:{default:1,no_states:!0,in_style:!0},separator_color:{default:"#969696",no_states:!0,in_style:!0},row_cell_gap:{default:0},column_cell_gap:{default:0},layout_style:{default:"infinite_scroll",no_states:!0},cell_min_width:{no_states:!0,default:100},fixed_width:{no_states:!0},use_max_width:{no_states:!0,default:!1},max_width:{default:100,optional:!0,no_states:!0},allow_more_than_one_colum:{default:!1,no_states:!0},responsive_alignment:{default:"center",no_states:!0},fixed_columns:{default:!1,no_states:!0},fixed_rows:{default:!1,no_states:!0},cell_min_width_css:{default:"100px"},cell_min_height_css:{default:"100px"},auto_fit_row:{default:!1,no_states:!0},auto_fit_column:{default:!1,no_states:!0},scroll_direction:{default:"vertical",no_states:!0},show_all_items:{default:!1,no_states:!0},masonry:{default:!1,no_states:!0}},property_applications(element){return[new property_applications.Dimensions,new property_applications.Border,new property_applications.BoxShadow,new property_applications.Background,new property_applications.ResponsiveElement(element),new property_applications.ResponsiveContainer(element),new property_applications.Opacity]},uses_css_responsive:!0,solid_component:_RepeatingGroupComponent.default,no_fixed_sizing:!0,can_fit_width(element){return element.get_static_property("fixed_columns")||element.get_static_property("fixed_rows")||element.get_static_property("scroll_direction")!=="vertical"},can_fit_height(element){return element.get_static_property("fixed_columns")||element.get_static_property("fixed_rows")||element.get_static_property("scroll_direction")!=="horizontal"},get_html(instance){return"<div></div>"},change_cursor_style_if_clickable:!0,is_input:!1,contains_group_data:!1,add_an_invisible_div_on_the_top:!1,show_overflow_on_drag:!0,get_states(element){return["list_data","show_range","loading"]},new_namespace:!0,use_element_search_data(){},show_borders(instance){return instance.state("show_borders",!0)},hide_borders(instance){return instance.state("show_borders",!1)},is_list:!0,can_have_children(){return!0},register_children(instance){},create_child_skeletons(instance){var _instance$repeating_g;(_instance$repeating_g=instance.repeating_group_layout)==null||_instance$repeating_g.do_create_container()},draws_own_children(){return!0},draw_children(instance){},can_defer_drawing(){return!0},register(instance){instance.repeating_group_layout=new RepeatingGroupLayout.RepeatingGroupLayoutStyle({instance}),instance.repeating_group_layout.do_register(),instance.repeating_layout_type="RepeatingGroup",instance.on_destroy(()=>{var _instance$repeating_g2;(_instance$repeating_g2=instance.repeating_group_layout)==null||_instance$repeating_g2.destroy()})},initialize(instance){instance.repeating_group_layout.do_initialize()},get_children_canvas(instance){return $("> .list-item",instance.get_canvas())},get_min_width(element){if(element.get_static_property("fixed_width"))return element.get_width();{var _cell_min_width;let val=element.get_static_property((_cell_min_width="cell_min_width")!=null?_cell_min_width:0),iwidth=repeating_groups._get_cell_width(element);return val>iwidth?iwidth:val}},get_state_value(element,name){if(name==="list_data"){let value_id=element.get_static_property("group_type");return value_id?btype_ids.list_type(value_id):"null"}},check_for_errors(element,report){var _element$root;if(((_element$root=element.root())==null?void 0:_element$root.get_responsive_version())<1&&element.get_static_property("layout_style")==="vertical_extendable"){let make_sure_not_in_another_ext_scroll_rg_recursive=function(previous_gen){var _parent$type,_parent$type2;let parent=previous_gen.parent();parent==null||((_parent$type=parent.type)==null?void 0:_parent$type.call(parent))==="Page"||(((_parent$type2=parent.type)==null?void 0:_parent$type2.call(parent))==="RepeatingGroup"?parent.get_static_property("layout_style")==="vertical_extendable"&&report(element.get_name()+": extendible vertical scrolling repeating group cannot be nested"):make_sure_not_in_another_ext_scroll_rg_recursive(parent))};make_sure_not_in_another_ext_scroll_rg_recursive(element)}groups._check_for_errors_datasource_set_to_self(element,"get_list_data",report)},add_specific_messages(messages,element){if(element.E.get_state_value(element,"list_data")!=null){let split_into_array=element.E.get_state_value(element,"list_data").split(".");if(split_into_array[split_into_array.length-1]===element.id())return messages}let list_btype=element.get_state_value("list_data");if(list_btype){var _element$root2;u.extend(messages,{get_list_data:{description:"'s "+list_btype.display(),section:"States",ret_btype:list_btype,fn(a,b){var _a$state$list_cast,_a$state,_list_btype$inner,_list_btype$inner2;return(_a$state$list_cast=a==null||(_a$state=a.state("list_data"))==null?void 0:_a$state.list_cast((_list_btype$inner=list_btype.inner())==null?void 0:_list_btype$inner.id()))!=null?_a$state$list_cast:new _StaticList.default([],null,(_list_btype$inner2=list_btype.inner())==null?void 0:_list_btype$inner2.id())}},get_loading_status:{description:" is loading",section:"States",ret_btype:"boolean",fn(a,b){var _a$state2;return(_a$state2=a==null?void 0:a.state("loading"))!=null?_a$state2:this.ret_btype_null()}}}),((_element$root2=element.root())==null?void 0:_element$root2.get_responsive_version(!0))>0?element.get_static_property("fixed_rows")&&element.get_static_property("fixed_columns")&&u.extend(messages,{page_number:{description:"'s page number",section:"States",ret_btype:"number",fn(a){let columns,rows,cursor=a==null?void 0:a.state("show_range");a instanceof _ElementInstance.default?(rows=element_eval.evaluate_property(a,"rows"),columns=element_eval.evaluate_property(a,"columns")):(rows=element.get_static_property("rows",!0),columns=element.get_static_property("columns",!0));let window_size=rows*columns;return cursor==null||rows==null||columns==null?null:Math.ceil(cursor/window_size)+1}},is_first_page:{description:" is on the first page",section:"States",ret_btype:"boolean",fn(a,b){return(a==null?void 0:a.state("show_range"))===0}},is_last_page:{description:" is on the last page",section:"States",ret_btype:"boolean",fn(a){var _a$state3;let cursor=a==null?void 0:a.state("show_range"),window_size=element_eval.evaluate_property(a,"rows")*element_eval.evaluate_property(a,"columns"),length=a==null||(_a$state3=a.state("list_data"))==null?void 0:_a$state3.length();return window_size+cursor>=length}}}):element.get_static_property("layout_style")==="limit_items"&&u.extend(messages,{page_number:{description:"'s page number",section:"States",ret_btype:"number",fn(a){let cursor=a==null?void 0:a.state("show_range");if(cursor==null)return null;let window_size=element_eval.evaluate_property(a,"rows")*repeating_groups.get_fixed_cell_rg_column_count(a,1);return Math.ceil(cursor/window_size+1)}},is_first_page:{description:" is on the first page",section:"States",ret_btype:"boolean",fn(a,b){var _ref;return(_ref=(a==null?void 0:a.state("show_range"))===0)!=null?_ref:this.ret_btype_null()}},is_last_page:{description:" is on the last page",section:"States",ret_btype:"boolean",fn(a){var _element$get_static_p,_a$state4,_ref2;let rows=(_element$get_static_p=element.get_static_property("rows",!0))!=null?_element$get_static_p:1,cursor=a==null?void 0:a.state("show_range"),window_size=rows*repeating_groups.get_fixed_cell_rg_column_count(a,1),length=a==null||(_a$state4=a.state("list_data"))==null?void 0:_a$state4.length();return(_ref2=window_size+cursor>=length)!=null?_ref2:this.ret_btype_null()}}})}},get_messages(element){return["set_list_data","clear_list","show_previous","show_next","draw_till","scroll_to","go_to_page","resize_cell","resize_dummies"]}})}});var require_ShapeComponent=__commonJS({"lib-browser-old/core/core_elements/components/ShapeComponent.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();var _web=(init_web(),__toCommonJS(web_exports)),_solidJs=(init_solid(),__toCommonJS(solid_exports)),_createElement=_interopRequireDefault(require_createElement()),_directives=require_directives(),_element_styles=require_element_styles(),_properties=require_properties();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _tmpl$=(0,_web.template)('<div class="aspect-ratio"></div>',2),_tmpl$2=(0,_web.template)("<div></div>",2),ASPECT_RATIO_CLASS="aspect-ratio",ASPECT_RATIO_SELECTOR=" .".concat(ASPECT_RATIO_CLASS),ShapeComponent=props=>(()=>{let _el$=_tmpl$2.cloneNode(!0);(0,_web.use)(_directives.defaultEventHandlers,_el$,()=>props.instance);let _ref$=props.ref;return typeof _ref$=="function"?(0,_web.use)(_ref$,_el$):props.ref=_el$,(0,_web.insert)(_el$,(0,_web.createComponent)(_solidJs.Show,{get when(){return props.useAspectRatio},get children(){let _el$2=_tmpl$.cloneNode(!0);return(0,_web.effect)(_$p=>(0,_web.style)(_el$2,props.childStyles[ASPECT_RATIO_SELECTOR],_$p)),_el$2}})),(0,_web.effect)(_p$=>{let _v$=props.id,_v$2=props.style,_v$3=props.classList;return _v$!==_p$._v$&&(0,_web.setAttribute)(_el$,"id",_p$._v$=_v$),_p$._v$2=(0,_web.style)(_el$,_v$2,_p$._v$2),_p$._v$3=(0,_web.classList)(_el$,_v$3,_p$._v$3),_p$},{_v$:void 0,_v$2:void 0,_v$3:void 0}),_el$})();module.exports=(0,_createElement.default)(ShapeComponent,void 0,element=>({properties:{useAspectRatio:new _properties.Property(instance=>instance.element.has_fixed_aspect_ratio(),{fallback:!1})},styles:[new _properties.Style(instance=>{if(instance.element.has_fixed_aspect_ratio()){let aspectRatio=instance.get_static_property("aspect_ratio_height")/instance.get_static_property("aspect_ratio_width");return{height:0,"padding-top":"".concat(aspectRatio*100,"%")}}else return{}},{selector:ASPECT_RATIO_SELECTOR}),...(0,_element_styles.placedStyling)(element)]}))}});var require_Shape2=__commonJS({"lib-browser-old/core/core_elements/elements/Shape.js"(){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();var u=_interopRequireWildcard(require_u2()),property_applications=_interopRequireWildcard(require_property_applications()),element_transformer=_interopRequireWildcard(require_element_transformer()),element_workflows=_interopRequireWildcard(require_element_workflows()),aspect_ratio=_interopRequireWildcard(require_aspect_ratio()),_ShapeComponent=_interopRequireDefault(require_ShapeComponent());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}element_transformer.make_element("Shape",{category:"visual elements",glyph_id:"rectangle",list_order:5,keyboard_shortcut:"R",defaults:{bgcolor:"#DEDEDE",background_style:"bgcolor",width:150,height:150},field_names:u.extend({keep_proportion_resize:{no_states:!0}},element_workflows.start_workflow_field_names),property_applications(element){return[new property_applications.Dimensions,new property_applications.Background,new property_applications.Border,new property_applications.BoxShadow,new property_applications.Rotation,new property_applications.ResponsiveElement(element),new property_applications.Opacity]},uses_css_responsive:!0,can_fix_aspect_ratio(){return!0},solid_component:_ShapeComponent.default,change_cursor_style_if_clickable:!0,get_min_width(element){return 0},get_html(instance){return"<div></div>"},can_defer_drawing(){return!0},initialize(instance){aspect_ratio.structure_fixed_aspect_ratio(instance,instance.canvas)},is_input:!1,contains_group_data:!1,add_an_invisible_div_on_the_top:!1,events:["ButtonClicked"]})}});var require_SliderInput2=__commonJS({"lib-browser-old/core/core_elements/elements/SliderInput.js"(){"use strict";init_define_process_env();init_shim();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_weak_map();require_es_array_iterator();require_web_dom_collections_iterator();require_web_immediate();require_es_object_entries();require_es_symbol_description();require_es_error_cause();var b_async=_interopRequireWildcard(require_b_async3()),b_ui=_interopRequireWildcard(require_b_ui()),property_applications=_interopRequireWildcard(require_property_applications()),runmode_consts=_interopRequireWildcard(require_runmode()),element_transformer=_interopRequireWildcard(require_element_transformer()),inputs=_interopRequireWildcard(require_inputs()),element_eval=_interopRequireWildcard(require_element_eval());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}element_transformer.make_element("SliderInput",{display:"Slider Input",category:"input forms",glyph_id:"slider",list_order:7,keyboard_shortcut:null,defaults:{width:200,height:45},field_names:_objectSpread(_objectSpread({min_value:{default:0},max_value:{default:10},step:{default:1},range_type:{default:"simple",no_states:!0,in_style:!0},content:{},orientation:{no_states:!0,default:"horizontal"},border_color:{default:"#aaa",in_style:!0},background_color:{default:"#fff",in_style:!0},handle_color:{default:"#e6e6e6",in_style:!0},range_area_color:{default:"#cccccc",in_style:!0}},inputs.get_disabled_field_name),inputs.get_auto_binding_field_names),property_applications(element){return[new property_applications.Dimensions,new property_applications.ResponsiveElement(element),new property_applications.Opacity]},get_html(instance){return"<div></div>"},get_min_width(element){return 0},can_defer_drawing(){return!0},initialize(instance){instance.wait_for_visible_lite(()=>{let canvas=instance.get_canvas(),slider_init=b_async.MakeKey(null,"slider_init"),slider=b_ui.div("",canvas);slider.slider(),canvas.css("padding",8);let is_slider_initialized=()=>slider.slider("instance");instance.on_destroy(()=>{is_slider_initialized()&&slider.slider("destroy")}),instance.run_mode()||slider.off(),instance.run_mode()&&(canvas.addClass(runmode_consts.CLICKABLE_ELEMENT),instance.wait_for_visible(()=>{b_async.WaitFor(slider_init,()=>{element_eval.on_property_change(instance,"disabled",value=>{slider.slider("option","disabled",value)}),instance.on_message("set_focus",()=>canvas.find(".ui-slider-handle").focus())})})),element_eval.pre_cache(instance,["min_value","max_value","step","range_type","orientation","handle_color","range_area_color","border_color","background_color"]),instance.autorun(()=>{var _props$min_value,_props$max_value;let slider_value_property;instance.element.get_styleable_static_property("range_type")==="range"?slider_value_property="values":slider_value_property="value";let props={};for(let prop of["min_value","max_value","step","range_type","orientation","handle_color","range_area_color","border_color","background_color"])props[prop]=element_eval.evaluate_property(instance,prop);let options={min:(_props$min_value=props.min_value)!=null?_props$min_value:0,max:(_props$max_value=props.max_value)!=null?_props$max_value:9,step:props.step,range:props.range_type==="range",orientation:props.orientation,slide:(event,ui)=>(setImmediate(()=>{instance.message("user_change",slider.slider(slider_value_property))}),!0),stop:(event,ui)=>(setImmediate(()=>{instance.message("user_submit",slider.slider(slider_value_property))}),!0)};if(!instance.thumbnail_mode()||is_slider_initialized())for(let[k,v]of Object.entries(options))slider.slider("option",k,v);let slider_css_options={"margin-left":3,"margin-right":3,cursor:element_eval.evaluate_property(instance,"disabled")?"default":"pointer",background:props.background_color,"border-color":props.border_color},handle_css_options={cursor:element_eval.evaluate_property(instance,"disabled")?"default":"pointer",outline:"none","border-color":props.border_color};props.orientation==="horizontal"?(slider_css_options.height="100%",slider_css_options.width="calc(100% - 7px)",handle_css_options.top=-8,handle_css_options.height="calc(100% + 16px)",handle_css_options.width=19,slider.find(".ui-slider-range").css({height:"100%"})):(slider_css_options.width="calc(100% - 6px)",slider_css_options.height="calc(100% - 2px)",handle_css_options.width="calc(100% + 11px)",handle_css_options.height=19,slider.find(".ui-slider-range").css({width:"100%"})),handle_css_options.background=props.handle_color,props.range_type==="range"&&slider.find(".ui-slider-range").css({background:props.range_area_color}),slider.css(slider_css_options),slider.find(".ui-slider-handle").css(handle_css_options),slider_init.turn(),!(instance.thumbnail_mode()&&!is_slider_initialized())&&inputs.input_change_autorun(instance,val=>{slider_value_property==="values"&&val==null&&(val=[]),slider.slider(slider_value_property,val)})})})},get_starting_content(instance){let val;if(instance.run_mode()&&instance.get_static_property("auto_binding")?val=inputs.get_input_autobind_thing_field(instance):val=element_eval.evaluate_property(instance,"content"),instance.element.get_styleable_static_property("range_type")==="range"){var _val$all,_val,_val$all2,_val2,_element_eval$evaluat,_element_eval$evaluat2;if(val=(_val$all=(_val=val)==null||(_val$all2=_val.all)==null?void 0:_val$all2.call(_val))!=null?_val$all:val,(_val2=val)!=null&&_val2.length)return val;let min=(_element_eval$evaluat=element_eval.evaluate_property(instance,"min_value"))!=null?_element_eval$evaluat:0,max=(_element_eval$evaluat2=element_eval.evaluate_property(instance,"max_value"))!=null?_element_eval$evaluat2:9;return[min,max]}else{var _ref,_val3;return(_ref=(_val3=val)!=null?_val3:element_eval.evaluate_property(instance,"min_value"))!=null?_ref:0}},get_state_value(element,name){if(name==="value")return element.get_styleable_static_property("range_type")==="range"?"number_range":"number"},uses_css_responsive:!0,change_cursor_style_if_clickable:!1,add_an_invisible_div_on_the_top:!0,is_input:!0,contains_group_data:!1,jquery_plugins(){return["jquery_plugins/jquery-ui-slider-draggable.min","jquery_plugins/jquery.ui.touch-punch.min.js"]},css_files:["css/optional/jquery-ui.slider.css"],only_send_to_client_in_runmode:!0})}});var require_TableMainAxisComponent=__commonJS({"lib-browser-old/core/core_elements/components/TableElement/TableMainAxisComponent.js"(exports){"use strict";init_define_process_env();init_shim();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;require_es_array_iterator();require_web_dom_collections_iterator();require_es_symbol_description();require_es_error_cause();var _web=(init_web(),__toCommonJS(web_exports)),_solidJs=(init_solid(),__toCommonJS(solid_exports)),_table_element=require_table_element(),_directives=require_directives(),_createElement=_interopRequireDefault(require_createElement()),_element_styles=require_element_styles(),_properties=require_properties(),_element_eval=require_element_eval(),_EditorContext=_interopRequireDefault(require_EditorContext()),_autorun_signals=require_autorun_signals();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _tmpl$=(0,_web.template)("<div></div>",2);function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}function TableMainAxisComponent(props){var _props$wrapper,_useContext;let tableContext=(0,_solidJs.useContext)(_table_element.TableContext);if(tableContext==null)return;let instance=props.instance,visible=(0,_autorun_signals.createWatcher)(()=>instance.is_visible_me(),{fallback:!0}),myStyling=tableContext.registerMainAxis(instance.element_id(),{get index(){return props.index},get minLength(){return props.minLength},get maxLength(){return props.maxLength},get mode(){return props.mode},get visible(){return visible()}});(0,_solidJs.onCleanup)(()=>{tableContext.deregisterMainAxis(instance.element_id())});let placementStyling=(0,_solidJs.createMemo)(()=>_objectSpread({"z-index":_table_element.MAIN_AXIS_ZINDEX,position:"absolute",display:visible()?"":"none"},myStyling())),Wrapper=(_props$wrapper=props.wrapper)!=null?_props$wrapper:props2=>props2.children,EditDividersComponent=(_useContext=(0,_solidJs.useContext)(_EditorContext.default))==null?void 0:_useContext.tableMainAxisDividers,editorDividers=()=>EditDividersComponent!==void 0?(0,_web.createComponent)(EditDividersComponent,{get tableElement(){return instance.element.parent()},get id(){return props.id},get placementStyling(){return placementStyling()},elementInstance:instance}):[];return[(0,_web.createComponent)(Wrapper,{get style(){return _objectSpread({},placementStyling())},get children(){let _el$=_tmpl$.cloneNode(!0);(0,_web.use)(_directives.defaultEventHandlers,_el$,()=>props.instance);let _ref$=props.ref;return typeof _ref$=="function"?(0,_web.use)(_ref$,_el$):props.ref=_el$,(0,_web.effect)(_p$=>{let _v$=props.id,_v$2=_objectSpread(_objectSpread({},props.style),instance.edit_mode()?{}:placementStyling()),_v$3=props.classList;return _v$!==_p$._v$&&(0,_web.setAttribute)(_el$,"id",_p$._v$=_v$),_p$._v$2=(0,_web.style)(_el$,_v$2,_p$._v$2),_p$._v$3=(0,_web.classList)(_el$,_v$3,_p$._v$3),_p$},{_v$:void 0,_v$2:void 0,_v$3:void 0}),_el$}}),editorDividers]}var _default=(0,_createElement.default)(TableMainAxisComponent,void 0,element=>{let dim=()=>(0,_table_element.isTableDirectionHorizontal)(element.parent())?"height":"width";return{properties:{minLength:new _properties.Property(instance=>{let propName=dim()==="height"?"min_height_css":"min_width_css";return(0,_element_eval.evaluate_property)(instance,propName)},{fallback:"0px"}),maxLength:new _properties.Property(instance=>{var _evaluate_property;let propName=dim()==="height"?"max_height_css":"max_width_css";return(_evaluate_property=(0,_element_eval.evaluate_property)(instance,propName))!=null?_evaluate_property:null},{fallback:null}),mode:new _properties.Property(instance=>element.get_static_property("single_".concat(dim()))?"fixed":element.get_static_property("fit_".concat(dim()))?"fit":"stretch",{fallback:"fixed",noWaitVisible:!0}),index:new _properties.Property(instance=>(0,_element_eval.evaluate_property)(instance,"axis_index"),{fallback:0,noWaitVisible:!0})},styles:[...(0,_element_styles.basicStyling)(element)]}});exports.default=_default}});var require_TableCellComponent=__commonJS({"lib-browser-old/core/core_elements/components/TableElement/TableCellComponent.js"(exports){"use strict";init_define_process_env();init_shim();require_es_symbol_description();require_es_error_cause();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;require_es_array_iterator();require_web_dom_collections_iterator();var _web=(init_web(),__toCommonJS(web_exports)),_solidJs=(init_solid(),__toCommonJS(solid_exports)),_directives=require_directives(),_container_utils=require_container_utils(),_table_element=require_table_element(),_createElement=_interopRequireDefault(require_createElement()),_element_styles=require_element_styles();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _tmpl$=(0,_web.template)("<div></div>",2);function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}function TableCellComponent(props){var _props$wrapper;let context=(0,_solidJs.useContext)(_table_element.TableContext);if(context==null)return(()=>{let _el$=_tmpl$.cloneNode(!0),_ref$=props.ref;return typeof _ref$=="function"?(0,_web.use)(_ref$,_el$):props.ref=_el$,(0,_web.insert)(_el$,(0,_web.createComponent)(_container_utils.ChildWrapper,props)),(0,_web.effect)(_p$=>{let _v$=props.id,_v$2=_objectSpread({},props.style),_v$3=_objectSpread(_objectSpread({},props.classList),{},{[props.containerClass]:!0});return _v$!==_p$._v$&&(0,_web.setAttribute)(_el$,"id",_p$._v$=_v$),_p$._v$2=(0,_web.style)(_el$,_v$2,_p$._v$2),_p$._v$3=(0,_web.classList)(_el$,_v$3,_p$._v$3),_p$},{_v$:void 0,_v$2:void 0,_v$3:void 0}),_el$})();let instance=props.instance;(0,_solidJs.onMount)(()=>{context.registerTableCell(instance),(0,_solidJs.onCleanup)(()=>{context.deregisterTableCell(instance)})});let placementStyling=(0,_solidJs.createMemo)(()=>{let mainAxisBorderName="border-".concat(context.direction==="horizontal"?"bottom":"right");return _objectSpread(_objectSpread({position:"relative","box-sizing":"border-box",display:props.hidden?"none":"",[mainAxisBorderName]:context.lastMainAxis===props.mainAxisId?"none":context.mainAxesSeparator.css,"z-index":_table_element.CELL_ZINDEX},context.mainAxisSizingStyling(props.mainAxisId)),context.tableCellSizing(props.instance))}),Wrapper=(_props$wrapper=props.wrapper)!=null?_props$wrapper:props2=>props2.children;return(0,_web.createComponent)(Wrapper,{get style(){return _objectSpread({},placementStyling())},get children(){let _el$2=_tmpl$.cloneNode(!0);(0,_web.use)(_directives.defaultEventHandlers,_el$2,()=>instance);let _ref$2=props.ref;return typeof _ref$2=="function"?(0,_web.use)(_ref$2,_el$2):props.ref=_el$2,(0,_web.insert)(_el$2,(0,_web.createComponent)(_container_utils.ChildWrapper,props)),(0,_web.effect)(_p$=>{let _v$4=props.id,_v$5=_objectSpread(_objectSpread({},props.style),instance.edit_mode()?{}:_objectSpread({},placementStyling())),_v$6=_objectSpread(_objectSpread({},props.classList),{},{[props.containerClass]:!0});return _v$4!==_p$._v$4&&(0,_web.setAttribute)(_el$2,"id",_p$._v$4=_v$4),_p$._v$5=(0,_web.style)(_el$2,_v$5,_p$._v$5),_p$._v$6=(0,_web.classList)(_el$2,_v$6,_p$._v$6),_p$},{_v$4:void 0,_v$5:void 0,_v$6:void 0}),_el$2}})}var _default=(0,_createElement.default)(TableCellComponent,element=>{var _element$parent$id,_element$parent;return{shouldAddWrapper:element.should_add_extra_wrapper(),mainAxisId:element.get_static_property("cell_main_axis_id"),crossAxisId:(_element$parent$id=(_element$parent=element.parent())==null?void 0:_element$parent.id())!=null?_element$parent$id:"auto"}},(element,_ref)=>{let{shouldAddWrapper}=_ref;return{properties:(0,_container_utils.containerProperties)(shouldAddWrapper),styles:[...(0,_container_utils.containerStyling)(shouldAddWrapper),...(0,_element_styles.basicStyling)(element)]}});exports.default=_default}});var store_exports={};__export(store_exports,{$RAW:()=>$RAW,DEV:()=>DEV2,createMutable:()=>createMutable,createStore:()=>createStore,modifyMutable:()=>modifyMutable,produce:()=>produce,reconcile:()=>reconcile,unwrap:()=>unwrap});function wrap$1(value,name){let p=value[$PROXY];if(!p&&(Object.defineProperty(value,$PROXY,{value:p=new Proxy(value,proxyTraps$1)}),!Array.isArray(value))){let keys=Object.keys(value),desc=Object.getOwnPropertyDescriptors(value);for(let i=0,l=keys.length;i<l;i++){let prop=keys[i];desc[prop].get&&Object.defineProperty(value,prop,{enumerable:desc[prop].enumerable,get:desc[prop].get.bind(p)})}}return p}function isWrappable(obj){let proto;return obj!=null&&typeof obj=="object"&&(obj[$PROXY]||!(proto=Object.getPrototypeOf(obj))||proto===Object.prototype||Array.isArray(obj))}function unwrap(item,set=new Set){let result,unwrapped,v,prop;if(result=item!=null&&item[$RAW])return result;if(!isWrappable(item)||set.has(item))return item;if(Array.isArray(item)){Object.isFrozen(item)?item=item.slice(0):set.add(item);for(let i=0,l=item.length;i<l;i++)v=item[i],(unwrapped=unwrap(v,set))!==v&&(item[i]=unwrapped)}else{Object.isFrozen(item)?item=Object.assign({},item):set.add(item);let keys=Object.keys(item),desc=Object.getOwnPropertyDescriptors(item);for(let i=0,l=keys.length;i<l;i++)prop=keys[i],!desc[prop].get&&(v=item[prop],(unwrapped=unwrap(v,set))!==v&&(item[prop]=unwrapped))}return item}function getDataNodes(target){let nodes=target[$NODE];return nodes||Object.defineProperty(target,$NODE,{value:nodes={}}),nodes}function getDataNode(nodes,property,value){return nodes[property]||(nodes[property]=createDataNode(value))}function proxyDescriptor$1(target,property){let desc=Reflect.getOwnPropertyDescriptor(target,property);return!desc||desc.get||!desc.configurable||property===$PROXY||property===$NODE||property===$NAME||(delete desc.value,delete desc.writable,desc.get=()=>target[$PROXY][property]),desc}function trackSelf(target){if(getListener()){let nodes=getDataNodes(target);(nodes._||(nodes._=createDataNode()))()}}function ownKeys(target){return trackSelf(target),Reflect.ownKeys(target)}function createDataNode(value){let[s,set]=createSignal(value,{equals:!1,internal:!0});return s.$=set,s}function setProperty(state,property,value,deleting=!1){if(!deleting&&state[property]===value)return;let prev=state[property],len=state.length;value===void 0?delete state[property]:state[property]=value;let nodes=getDataNodes(state),node;(node=getDataNode(nodes,property,prev))&&node.$(()=>value),Array.isArray(state)&&state.length!==len&&(node=getDataNode(nodes,"length",len))&&node.$(state.length),(node=nodes._)&&node.$()}function mergeStoreNode(state,value){let keys=Object.keys(value);for(let i=0;i<keys.length;i+=1){let key=keys[i];setProperty(state,key,value[key])}}function updateArray(current,next){if(typeof next=="function"&&(next=next(current)),next=unwrap(next),Array.isArray(next)){if(current===next)return;let i=0,len=next.length;for(;i<len;i++){let value=next[i];current[i]!==value&&setProperty(current,i,value)}setProperty(current,"length",len)}else mergeStoreNode(current,next)}function updatePath(current,path,traversed=[]){let part,prev=current;if(path.length>1){part=path.shift();let partType=typeof part,isArray=Array.isArray(current);if(Array.isArray(part)){for(let i=0;i<part.length;i++)updatePath(current,[part[i]].concat(path),traversed);return}else if(isArray&&partType==="function"){for(let i=0;i<current.length;i++)part(current[i],i)&&updatePath(current,[i].concat(path),traversed);return}else if(isArray&&partType==="object"){let{from:from2=0,to=current.length-1,by=1}=part;for(let i=from2;i<=to;i+=by)updatePath(current,[i].concat(path),traversed);return}else if(path.length>1){updatePath(current[part],path,[part].concat(traversed));return}prev=current[part],traversed=[part].concat(traversed)}let value=path[0];typeof value=="function"&&(value=value(prev,traversed),value===prev)||part===void 0&&value==null||(value=unwrap(value),part===void 0||isWrappable(prev)&&isWrappable(value)&&!Array.isArray(value)?mergeStoreNode(prev,value):setProperty(current,part,value))}function createStore(...[store,options]){let unwrappedStore=unwrap(store||{}),isArray=Array.isArray(unwrappedStore),wrappedStore=wrap$1(unwrappedStore);function setStore(...args){batch(()=>{isArray&&args.length===1?updateArray(unwrappedStore,args[0]):updatePath(unwrappedStore,args)})}return[wrappedStore,setStore]}function proxyDescriptor(target,property){let desc=Reflect.getOwnPropertyDescriptor(target,property);return!desc||desc.get||desc.set||!desc.configurable||property===$PROXY||property===$NODE||property===$NAME||(delete desc.value,delete desc.writable,desc.get=()=>target[$PROXY][property],desc.set=v=>target[$PROXY][property]=v),desc}function wrap(value,name){let p=value[$PROXY];if(!p){Object.defineProperty(value,$PROXY,{value:p=new Proxy(value,proxyTraps)});let keys=Object.keys(value),desc=Object.getOwnPropertyDescriptors(value);for(let i=0,l=keys.length;i<l;i++){let prop=keys[i];if(desc[prop].get){let get=desc[prop].get.bind(p);Object.defineProperty(value,prop,{get})}if(desc[prop].set){let og=desc[prop].set;Object.defineProperty(value,prop,{set:v=>batch(()=>og.call(p,v))})}}}return p}function createMutable(state,options){let unwrappedStore=unwrap(state||{});return wrap(unwrappedStore)}function modifyMutable(state,modifier){batch(()=>modifier(unwrap(state)))}function applyState(target,parent,property,merge,key){let previous=parent[property];if(target===previous)return;if(property!==$ROOT&&(!isWrappable(target)||!isWrappable(previous)||key&&target[key]!==previous[key])){setProperty(parent,property,target);return}if(Array.isArray(target)){if(target.length&&previous.length&&(!merge||key&&target[0]&&target[0][key]!=null)){let i,j,start,end,newEnd,item,newIndicesNext,keyVal;for(start=0,end=Math.min(previous.length,target.length);start<end&&(previous[start]===target[start]||key&&previous[start]&&target[start]&&previous[start][key]===target[start][key]);start++)applyState(target[start],previous,start,merge,key);let temp=new Array(target.length),newIndices=new Map;for(end=previous.length-1,newEnd=target.length-1;end>=start&&newEnd>=start&&(previous[end]===target[newEnd]||key&&previous[start]&&target[start]&&previous[end][key]===target[newEnd][key]);end--,newEnd--)temp[newEnd]=previous[end];if(start>newEnd||start>end){for(j=start;j<=newEnd;j++)setProperty(previous,j,target[j]);for(;j<target.length;j++)setProperty(previous,j,temp[j]),applyState(target[j],previous,j,merge,key);previous.length>target.length&&setProperty(previous,"length",target.length);return}for(newIndicesNext=new Array(newEnd+1),j=newEnd;j>=start;j--)item=target[j],keyVal=key&&item?item[key]:item,i=newIndices.get(keyVal),newIndicesNext[j]=i===void 0?-1:i,newIndices.set(keyVal,j);for(i=start;i<=end;i++)item=previous[i],keyVal=key&&item?item[key]:item,j=newIndices.get(keyVal),j!==void 0&&j!==-1&&(temp[j]=previous[i],j=newIndicesNext[j],newIndices.set(keyVal,j));for(j=start;j<target.length;j++)j in temp?(setProperty(previous,j,temp[j]),applyState(target[j],previous,j,merge,key)):setProperty(previous,j,target[j])}else for(let i=0,len=target.length;i<len;i++)applyState(target[i],previous,i,merge,key);previous.length>target.length&&setProperty(previous,"length",target.length);return}let targetKeys=Object.keys(target);for(let i=0,len=targetKeys.length;i<len;i++)applyState(target[targetKeys[i]],previous,targetKeys[i],merge,key);let previousKeys=Object.keys(previous);for(let i=0,len=previousKeys.length;i<len;i++)target[previousKeys[i]]===void 0&&setProperty(previous,previousKeys[i],void 0)}function reconcile(value,options={}){let{merge,key="id"}=options,v=unwrap(value);return state=>{if(!isWrappable(state)||!isWrappable(v))return v;let res=applyState(v,{[$ROOT]:state},$ROOT,merge,key);return res===void 0?state:res}}function produce(fn){return state=>{if(isWrappable(state)){let proxy;(proxy=producers.get(state))||producers.set(state,proxy=new Proxy(state,setterTraps)),fn(proxy)}return state}}var $RAW,$NODE,$NAME,proxyTraps$1,proxyTraps,$ROOT,producers,setterTraps,DEV2,init_store=__esm({"node_modules/solid-js/store/dist/store.js"(){init_define_process_env();init_shim();init_solid();$RAW=Symbol("store-raw"),$NODE=Symbol("store-node"),$NAME=Symbol("store-name");proxyTraps$1={get(target,property,receiver){if(property===$RAW)return target;if(property===$PROXY)return receiver;if(property===$TRACK)return trackSelf(target),receiver;let nodes=getDataNodes(target),tracked=nodes.hasOwnProperty(property),value=tracked?nodes[property]():target[property];if(property===$NODE||property==="__proto__")return value;if(!tracked){let desc=Object.getOwnPropertyDescriptor(target,property);getListener()&&(typeof value!="function"||target.hasOwnProperty(property))&&!(desc&&desc.get)&&(value=getDataNode(nodes,property,value)())}return isWrappable(value)?wrap$1(value):value},has(target,property){return property===$RAW||property===$PROXY||property===$TRACK||property===$NODE||property==="__proto__"?!0:(this.get(target,property,target),property in target)},set(){return!0},deleteProperty(){return!0},ownKeys,getOwnPropertyDescriptor:proxyDescriptor$1};proxyTraps={get(target,property,receiver){if(property===$RAW)return target;if(property===$PROXY)return receiver;if(property===$TRACK)return trackSelf(target),receiver;let nodes=getDataNodes(target),tracked=nodes.hasOwnProperty(property),value=tracked?nodes[property]():target[property];if(property===$NODE||property==="__proto__")return value;if(!tracked){let desc=Object.getOwnPropertyDescriptor(target,property),isFunction=typeof value=="function";if(getListener()&&(!isFunction||target.hasOwnProperty(property))&&!(desc&&desc.get))value=getDataNode(nodes,property,value)();else if(value!=null&&isFunction&&value===Array.prototype[property])return(...args)=>batch(()=>Array.prototype[property].apply(receiver,args))}return isWrappable(value)?wrap(value):value},has(target,property){return property===$RAW||property===$PROXY||property===$TRACK||property===$NODE||property==="__proto__"?!0:(this.get(target,property,target),property in target)},set(target,property,value){return batch(()=>setProperty(target,property,unwrap(value))),!0},deleteProperty(target,property){return batch(()=>setProperty(target,property,void 0,!0)),!0},ownKeys,getOwnPropertyDescriptor:proxyDescriptor};$ROOT=Symbol("store-root");producers=new WeakMap,setterTraps={get(target,property){if(property===$RAW)return target;let value=target[property],proxy;return isWrappable(value)?producers.get(value)||(producers.set(value,proxy=new Proxy(value,setterTraps)),proxy):value},set(target,property,value){return setProperty(target,property,unwrap(value)),!0},deleteProperty(target,property){return setProperty(target,property,void 0,!0),!0}};DEV2=void 0}});var require_TableElementComponent=__commonJS({"lib-browser-old/core/core_elements/components/TableElement/TableElementComponent.js"(exports){"use strict";init_define_process_env();init_shim();require_es_symbol_description();require_es_error_cause();require_es_object_get_own_property_descriptors();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _web=(init_web(),__toCommonJS(web_exports));require_es_array_iterator();require_web_dom_collections_iterator();require_es_object_entries();require_web_dom_collections_for_each();require_es_array_sort();require_es_array_reduce();require_es_object_from_entries();require_es_array_includes();require_es_string_includes();var _solidJs=(init_solid(),__toCommonJS(solid_exports)),_directives=require_directives(),_createElement=_interopRequireDefault(require_createElement()),_element_styles=require_element_styles(),_properties=require_properties(),_table_element=require_table_element(),_EditorContext=_interopRequireWildcard(require_EditorContext()),_store=(init_store(),__toCommonJS(store_exports)),_appquery=_interopRequireDefault(require_appquery()),_element_eval=require_element_eval();function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _tmpl$=(0,_web.template)("<div></div>",2);function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}function TableElementComponent(props){var _useContext,_useContext2;let[mainAxes,setMainAxes]=(0,_solidJs.createSignal)({}),[mainAxesSizes,setMainAxesSizes]=(0,_store.createStore)({}),[crossAxes,setCrossAxes]=(0,_solidJs.createSignal)({}),[leaderCells,setLeaderCells]=(0,_store.createStore)({}),editorContext=(0,_solidJs.useContext)(_EditorContext.default);function accountForBorder(size,mainAxisId){return size==null?"":lastMainAxis()===mainAxisId?size:"calc(".concat(size," + ").concat(props.direction==="vertical"?verticalSeparator.width:horizontalSeparator.width,"px)")}function mainAxisSizingStyling(id){let sizing=mainAxes()[id];if(sizing==null||!sizing.visible)return{display:"none"};let dimension=mainAxisDimension(),min=accountForBorder(sizing.minLength,id);return{["min-".concat(dimension)]:min,["max-".concat(dimension)]:sizing.mode==="fixed"?min:accountForBorder(sizing.maxLength,id),[dimension]:sizing.mode==="fit"?"max-content":min,"flex-grow":sizing.mode==="stretch"?1:0,"flex-shrink":0}}function shouldShowIndexMarkers(){var _editorContext$state$,_editorContext$state$2,_editorContext$state$3,_editorContext$state$4,_editorContext$state$5;if(!props.instance.edit_mode())return!1;let isHovered=(_editorContext$state$=editorContext==null||(_editorContext$state$2=editorContext.state.elements[props.id])==null?void 0:_editorContext$state$2.hovered)!=null?_editorContext$state$:!1,isDescendantSelected=(_editorContext$state$3=editorContext==null?void 0:editorContext.state.descendantSelected(props.id))!=null?_editorContext$state$3:!1,isTableCellDraggedOver=(_editorContext$state$4=editorContext==null||(_editorContext$state$5=editorContext.state.elements[props.id])==null?void 0:_editorContext$state$5.descendantDraggedOver())!=null?_editorContext$state$4:!1;return isHovered||isDescendantSelected||isTableCellDraggedOver}let verticalSeparatorCss=(0,_solidJs.createMemo)(()=>"".concat(props.verticalSeparatorStyle," ").concat(props.verticalSeparatorWidth,"px ").concat(props.verticalSeparatorColor)),horizontalSeparatorCss=(0,_solidJs.createMemo)(()=>"".concat(props.horizontalSeparatorStyle," ").concat(props.horizontalSeparatorWidth,"px ").concat(props.horizontalSeparatorColor)),verticalSeparator={get css(){return verticalSeparatorCss()},get width(){return props.verticalSeparatorWidth},get color(){return props.verticalSeparatorColor},get style(){return props.verticalSeparatorStyle}},horizontalSeparator={get css(){return horizontalSeparatorCss()},get width(){return props.horizontalSeparatorWidth},get color(){return props.horizontalSeparatorColor},get style(){return props.horizontalSeparatorStyle}},[shouldShowDivider,setShouldShowDivider]=(0,_store.createStore)({[_EditorContext.FIRST_DIVIDER]:{show:!1,type:"DraggingIndicator"}}),mainAxisDragging=!1,onMouseMove=evt=>{if(!mainAxisDragging)for(let id of Object.keys(mainAxes())){var _editorContext$state$6,_editorContext$state$7,_props$instance,_props$instance$canva;let axis_div=editorContext==null||(_editorContext$state$6=editorContext.state.elements[id].instance)==null||(_editorContext$state$7=_editorContext$state$6.canvas)==null?void 0:_editorContext$state$7[0],table_div=(_props$instance=props.instance)==null||(_props$instance$canva=_props$instance.canvas)==null?void 0:_props$instance$canva[0];if(axis_div===void 0||table_div===void 0)return;let tableSelected=editorContext==null?void 0:editorContext.state.descendantSelected(props.id);if(props.direction==="horizontal"){let bottom_edge=axis_div.getBoundingClientRect().bottom,left_edge=table_div.getBoundingClientRect().left-40;tableSelected&&evt.clientX>left_edge&&evt.clientY>bottom_edge-10&&evt.clientY<bottom_edge+10?setShouldShowDivider({[id]:{show:!0,type:"AddDivider"}}):setShouldShowDivider({[id]:{show:!1,type:"AddDivider"}})}else{let right_edge=axis_div.getBoundingClientRect().right,top_edge=table_div.getBoundingClientRect().top-40;tableSelected&&evt.clientY>top_edge&&evt.clientX>right_edge-10&&evt.clientX<right_edge+10?setShouldShowDivider({[id]:{show:!0,type:"AddDivider"}}):setShouldShowDivider({[id]:{show:!1,type:"AddDivider"}})}}};(0,_solidJs.onMount)(()=>{props.instance.edit_mode()&&(document.addEventListener("mousemove",onMouseMove),(0,_solidJs.onCleanup)(()=>{document.removeEventListener("mousemove",onMouseMove)}))});let EditDividersComponent=(_useContext=(0,_solidJs.useContext)(_EditorContext.default))==null?void 0:_useContext.tableMainAxisDividers,EditIndexMarkerComponent=(_useContext2=(0,_solidJs.useContext)(_EditorContext.default))==null?void 0:_useContext2.tableIndexMarkers,previousHoverSet=[];function mainAxisDimension(){return props.direction==="horizontal"?"height":"width"}let cellToAxis=new Map;function resizeAxes(toResize){let dimension=mainAxisDimension(),maximums={};for(let[cell,axisId]of cellToAxis.entries())if(toResize==null||toResize.has(axisId)){let cellSize=cell.getBoundingClientRect()[dimension];(maximums[axisId]==null||Math.floor(maximums[axisId].max*100)<cellSize*100)&&(maximums[axisId]={max:cellSize,cell})}for(let[axisId,maximum]of Object.entries(maximums))setMainAxesSizes(axisId,maximum.max),setLeaderCells(axisId,maximum.cell)}let cellResizeObserver=new ResizeObserver(entries=>{let dimension=mainAxisDimension(),toResize=new Set;(0,_solidJs.batch)(()=>{for(let entry of entries){let axisId=cellToAxis.get(entry.target);if(axisId==null||toResize.has(axisId))continue;let cellSize=entry.target.getBoundingClientRect()[dimension],axis=mainAxes()[axisId];if((axis==null?void 0:axis.mode)==="fit"){var _mainAxesSizes$axisId;let currentSize=(_mainAxesSizes$axisId=mainAxesSizes[axisId])!=null?_mainAxesSizes$axisId:0;(entry.target===leaderCells[axisId]||Math.floor(cellSize*100)>currentSize*100)&&(setMainAxesSizes(axisId,cellSize),setLeaderCells(axisId,entry.target),cellSize<currentSize&&toResize.add(axisId))}else entry.target.offsetParent!=null&&(setMainAxesSizes(axisId,cellSize),setLeaderCells(axisId,entry.target))}}),toResize.size>0&&resizeAxes(toResize)});props.instance.edit_mode()&&(0,_solidJs.createEffect)(()=>{let dimension=mainAxisDimension();Object.keys(mainAxes()).forEach(id=>{_appquery.default.element(id).get_static_property("fit_".concat(dimension))}),resizeAxes()});let[mainAxesCells,setMainAxesCells]=(0,_store.createStore)({}),sortedMainAxes=(0,_solidJs.createMemo)(()=>Object.entries(mainAxes()).sort((a,b)=>a[1].index-b[1].index)),sortedCrossAxes=(0,_solidJs.createMemo)(()=>Object.entries(crossAxes()).sort((a,b)=>a[1].index-b[1].index)),lastMainAxis=(0,_solidJs.createMemo)(()=>{let axes=sortedMainAxes();for(let i=axes.length-1;i>=0;i--){let[id,axis]=axes[i];if(axis.visible)return id}}),lastCrossAxis=(0,_solidJs.createMemo)(()=>{let axes=sortedCrossAxes();for(let i=axes.length-1;i>=0;i--){let[id,axis]=axes[i];if(axis.visible&&axis.count>0)return id}});return(0,_web.createComponent)(_table_element.TableContext.Provider,{value:{get direction(){return props.direction},get shouldShowDivider(){return shouldShowDivider},setShouldShowDivider,registerMainAxis(id,sizing){return setMainAxes(axes=>_objectSpread(_objectSpread({},axes),{},{[id]:sizing})),()=>{var _mainAxesSizes$id2;let separatorWidth=props.direction==="vertical"?props.verticalSeparatorWidth:props.horizontalSeparatorWidth,coord=Object.entries(mainAxes()).filter(_ref=>{let[,a]=_ref;return a.index<sizing.index}).reduce((acc,_ref2)=>{var _mainAxesSizes$id;let[id2]=_ref2;return acc+((_mainAxesSizes$id=mainAxesSizes[id2])!=null?_mainAxesSizes$id:separatorWidth)},0),size=((_mainAxesSizes$id2=mainAxesSizes[id])!=null?_mainAxesSizes$id2:separatorWidth)-(id!==lastMainAxis()?separatorWidth:0);return props.direction==="horizontal"?{top:"".concat(coord+props.paddingTop,"px"),height:"".concat(size,"px"),width:"calc(100% - ".concat(props.paddingLeft+props.paddingRight,"px)")}:{left:"".concat(coord+props.paddingLeft,"px"),width:"".concat(size,"px"),height:"calc(100% - ".concat(props.paddingTop+props.paddingBottom,"px)")}}},deregisterMainAxis(id){setMainAxes(axes=>Object.fromEntries(Object.entries(axes).filter(a=>a[0]!==id)))},get mainAxes(){return mainAxes()},registerTableCell(instance){let div=instance.get_outer_canvas()[0],mainAxisId=instance.get_static_property("cell_main_axis_id");cellToAxis.set(div,mainAxisId),cellResizeObserver.observe(div,{box:"border-box"}),EditIndexMarkerComponent!=null&&setMainAxesCells(mainAxisId,{[instance.element_id()]:instance})},deregisterTableCell(instance){let div=instance.get_outer_canvas()[0];cellResizeObserver.unobserve(div),cellToAxis.delete(div),setMainAxesCells(instance.get_static_property("cell_main_axis_id"),{[instance.element_id()]:void 0})},tableCellSizing(instance){var _mainAxes$mainAxisId;let mainAxisId=instance.get_static_property("cell_main_axis_id"),outerCanvas=instance.get_outer_canvas();return((_mainAxes$mainAxisId=mainAxes()[mainAxisId])==null?void 0:_mainAxes$mainAxisId.mode)!=="fit"||outerCanvas!=null&&leaderCells[mainAxisId]===outerCanvas[0]||mainAxesSizes[mainAxisId]==null?{}:{["min-".concat(mainAxisDimension())]:"max(".concat(accountForBorder(mainAxes()[mainAxisId].minLength,mainAxisId),", ").concat(mainAxesSizes[mainAxisId],"px)")}},registerCrossAxis(id,info){setCrossAxes(axes=>_objectSpread(_objectSpread({},axes),{},{[id]:info}))},setMainAxisDragging(dragging){mainAxisDragging=dragging},deregisterCrossAxis(id){setCrossAxes(axes=>Object.fromEntries(Object.entries(axes).filter(_ref3=>{let[axisId]=_ref3;return axisId!==id})))},mainAxisSizingStyling,get mainAxesSeparator(){return props.direction==="vertical"?verticalSeparator:horizontalSeparator},get crossAxesSeparator(){return props.direction==="vertical"?horizontalSeparator:verticalSeparator},get lastMainAxis(){return lastMainAxis()},get lastCrossAxis(){return lastCrossAxis()}},get children(){let _el$=_tmpl$.cloneNode(!0);_el$.$$mousemove=evt=>{if(props.instance.run_mode()){let currentSet=document.elementsFromPoint(evt.clientX,evt.clientY).filter(el=>el.classList.contains("TableMainAxis"));for(let el of previousHoverSet)currentSet.includes(el)||$(el).mouseleave();for(let el of currentSet)previousHoverSet.includes(el)||$(el).mouseenter();previousHoverSet=currentSet}},(0,_web.use)(_directives.defaultEventHandlers,_el$,()=>props.instance);let _ref$=props.ref;return typeof _ref$=="function"?(0,_web.use)(_ref$,_el$):props.ref=_el$,(0,_web.insert)(_el$,(0,_web.createComponent)(_solidJs.Show,{get when(){return shouldShowIndexMarkers()},get children(){return EditIndexMarkerComponent!==void 0&&(0,_web.createComponent)(EditIndexMarkerComponent,{mainAxesSizes,mainAxesCells,get sortedMainAxes(){return sortedMainAxes()},get sortedCrossAxes(){return sortedCrossAxes()},get tableInstance(){return props.instance}})}}),null),(0,_web.insert)(_el$,(()=>{let _c$=(0,_web.memo)(()=>!!(props.instance.edit_mode()&&EditDividersComponent!==void 0));return()=>_c$()&&(0,_web.createComponent)(EditDividersComponent,{id:_EditorContext.FIRST_DIVIDER,get tableElement(){return props.instance.element},get placementStyling(){return{position:"absolute",left:"0px",top:"0px",[props.direction==="horizontal"?"width":"height"]:"100%"}}})})(),null),(0,_web.insert)(_el$,()=>props.children,null),(0,_web.effect)(_p$=>{let _v$=props.id,_v$2=props.style,_v$3=_objectSpread(_objectSpread({},props.classList),{},{"bubble-table":!0});return _v$!==_p$._v$&&(0,_web.setAttribute)(_el$,"id",_p$._v$=_v$),_p$._v$2=(0,_web.style)(_el$,_v$2,_p$._v$2),_p$._v$3=(0,_web.classList)(_el$,_v$3,_p$._v$3),_p$},{_v$:void 0,_v$2:void 0,_v$3:void 0}),_el$}})}var _default=(0,_createElement.default)(TableElementComponent,void 0,element=>({properties:{direction:new _properties.Property(instance=>instance.get_static_property("table_direction"),{fallback:"vertical"}),verticalSeparatorStyle:new _properties.Property(instance=>instance.get_static_property("vertical_separator_style"),{fallback:"none"}),verticalSeparatorWidth:new _properties.Property(instance=>instance.get_static_property("vertical_separator_width"),{fallback:0}),verticalSeparatorColor:new _properties.Property(instance=>instance.get_static_property("vertical_separator_color"),{fallback:"black"}),horizontalSeparatorStyle:new _properties.Property(instance=>instance.get_static_property("horizontal_separator_style"),{fallback:"none"}),horizontalSeparatorWidth:new _properties.Property(instance=>instance.get_static_property("horizontal_separator_width"),{fallback:0}),horizontalSeparatorColor:new _properties.Property(instance=>instance.get_static_property("horizontal_separator_color"),{fallback:"black"}),paddingLeft:new _properties.Property(instance=>(0,_element_eval.evaluate_property)(instance,"padding_left"),{fallback:0}),paddingRight:new _properties.Property(instance=>(0,_element_eval.evaluate_property)(instance,"padding_right"),{fallback:0}),paddingTop:new _properties.Property(instance=>(0,_element_eval.evaluate_property)(instance,"padding_top"),{fallback:0}),paddingBottom:new _properties.Property(instance=>(0,_element_eval.evaluate_property)(instance,"padding_bottom"),{fallback:0})},styles:[...(0,_element_styles.placedStyling)(element),new _properties.Style(instance=>({"flex-direction":(0,_table_element.isTableDirectionHorizontal)(element)?"row":"column"}))]}));exports.default=_default;(0,_web.delegateEvents)(["mousemove"])}});var require_RunRepeatingTable=__commonJS({"lib-browser-old/core/core_elements/components/TableElement/RunRepeatingTable.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=RunRepeatingTable;var _web=(init_web(),__toCommonJS(web_exports)),_solidJs=(init_solid(),__toCommonJS(solid_exports)),_table_element=require_table_element(),_RunRepeatingComponent=_interopRequireDefault(require_RunRepeatingComponent()),_element_eval=require_element_eval();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function RunRepeatingTable(props){var _table_instance$canva;let table_instance=props.instance.parent(),context=(0,_solidJs.useContext)(_table_element.TableContext);if(!table_instance||!context)return[];(_table_instance$canva=table_instance.canvas)==null||_table_instance$canva.css({overflow:"auto","overflow-scrolling":"touch","-webkit-overflow-scrolling":"touch"});let layout=table_instance.table_element_layout;if(!layout)return[];let fixedList=()=>props.instance.get_static_property("fixed_number_repeating_axis"),totalCells=()=>{var _evaluate_property;return(_evaluate_property=(0,_element_eval.evaluate_property)(props.instance,"fixed_number_repeating_axis_count"))!=null?_evaluate_property:0};return(0,_web.createComponent)(_RunRepeatingComponent.default,(0,_web.mergeProps)(props,{layout,get fixedList(){return fixedList()},showAllItems:!1,get scrollDirection(){return context.direction},rows:1,get totalCells(){return totalCells()},dataInstance:table_instance,childProps:index=>({get hasTopBorder(){return context.direction==="vertical"&&index()>0},get hasLeftBorder(){return context.direction==="horizontal"&&index()>0},get firstRow(){return index()===0},get cellIndex(){return index()},separatorStyle:props.separatorStyle,separatorWidth:props.separatorWidth,separatorColor:props.separatorColor})}))}}});var require_TableCrossAxisComponent=__commonJS({"lib-browser-old/core/core_elements/components/TableElement/TableCrossAxisComponent.js"(exports){"use strict";init_define_process_env();init_shim();require_es_symbol_description();require_es_error_cause();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _web=(init_web(),__toCommonJS(web_exports));require_es_array_iterator();require_web_dom_collections_iterator();require_es_object_assign();var _solidJs=(init_solid(),__toCommonJS(solid_exports)),_directives=require_directives(),_createElement=_interopRequireDefault(require_createElement()),_table_element=require_table_element(),_properties=require_properties(),_RunRepeatingTable=_interopRequireDefault(require_RunRepeatingTable()),_EditorContext=_interopRequireDefault(require_EditorContext()),_ThumbnailContext=_interopRequireDefault(require_ThumbnailContext());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _tmpl$=(0,_web.template)("<div></div>",2);function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}function TableCrossAxisComponent(props){var _props$wrapper,_useContext$editRepea,_useContext,_useContext2;let context=(0,_solidJs.useContext)(_table_element.TableContext);if(context==null)return;let instance=props.instance,[repeatingCount,setRepeatingCount]=(0,_solidJs.createSignal)(1);(0,_solidJs.onMount)(()=>{context.registerCrossAxis(instance.element_id(),{get size(){return instance["current_".concat(context.direction==="horizontal"?"width":"height")]()},get index(){return props.index},get repeating(){return props.repeating},get count(){return props.repeating?repeatingCount():1},get visible(){return instance.is_visible_me()}}),(0,_solidJs.onCleanup)(()=>{context.deregisterCrossAxis(instance.element_id())})});let borderStyle=(0,_solidJs.createMemo)(()=>({["border-".concat(context.direction==="vertical"?"bottom":"right")]:context.lastCrossAxis===instance.element_id()&&repeatingCount()===1?"none":context.crossAxesSeparator.css})),stickyStyling=(0,_solidJs.createMemo)(()=>props.stickyAxis?{position:"sticky",[context.direction==="vertical"?"top":"left"]:"0px","z-index":_table_element.CELL_ZINDEX+1}:{}),Wrapper=(_props$wrapper=props.wrapper)!=null?_props$wrapper:props2=>props2.children,EditRepeatingTable=(_useContext$editRepea=(_useContext=(0,_solidJs.useContext)(_EditorContext.default))==null?void 0:_useContext.editRepeatingTable)!=null?_useContext$editRepea:(_useContext2=(0,_solidJs.useContext)(_ThumbnailContext.default))==null?void 0:_useContext2.editRepeatingTable,hasDummies=EditRepeatingTable!=null,createStyling=(instance2,outer)=>{let watchers=(0,_table_element.crossAxisStyling)(props.instance.element).filter(style2=>instance2.run_mode()||outer==null||style2.outerPositioning===outer).map(style2=>style2.createClientWatcher(instance2,void 0,{turnedVisible:!0}));return()=>Object.assign({},...watchers.map(watcher=>watcher()))},wrapperStyling=createStyling(props.instance,!0),innerStyling=createStyling(props.instance,instance.edit_mode()?!1:void 0);return[(0,_web.createComponent)(Wrapper,{get style(){return _objectSpread(_objectSpread(_objectSpread({},borderStyle()),props.repeating?wrapperStyling():{}),{},{"box-sizing":"content-box"})},get children(){let _el$=_tmpl$.cloneNode(!0);(0,_web.use)(_directives.defaultEventHandlers,_el$,()=>props.instance);let _ref$=props.ref;return typeof _ref$=="function"?(0,_web.use)(_ref$,_el$):props.ref=_el$,(0,_web.insert)(_el$,()=>!props.repeating||hasDummies?props.children:void 0),(0,_web.effect)(_p$=>{let _v$=props.id,_v$2=_objectSpread(_objectSpread(_objectSpread(_objectSpread({position:"relative"},props.style),!props.instance.edit_mode()&&(hasDummies||!props.repeating)?borderStyle():{}),hasDummies&&props.repeating?innerStyling():!props.instance.edit_mode()&&!props.repeating?stickyStyling():{}),{},{[context.direction==="vertical"?"min-width":"min-height"]:"fit-content"}),_v$3=_objectSpread(_objectSpread({},props.classList),{},{"bubble-cross-axis":!0});return _v$!==_p$._v$&&(0,_web.setAttribute)(_el$,"id",_p$._v$=_v$),_p$._v$2=(0,_web.style)(_el$,_v$2,_p$._v$2),_p$._v$3=(0,_web.classList)(_el$,_v$3,_p$._v$3),_p$},{_v$:void 0,_v$2:void 0,_v$3:void 0}),_el$}}),(0,_web.memo)((()=>{let _c$=(0,_web.memo)(()=>!!props.repeating);return()=>_c$()?EditRepeatingTable!=null?(0,_web.createComponent)(EditRepeatingTable,(0,_web.mergeProps)({get dummySeparatorCss(){return context.mainAxesSeparator.css},get separatorStyle(){return context.crossAxesSeparator.style},get separatorColor(){return context.crossAxesSeparator.color},get separatorWidth(){return context.crossAxesSeparator.width},get cellSizing(){return _objectSpread(_objectSpread({},wrapperStyling()),innerStyling())},setNumDummies:num=>setRepeatingCount(num+1)},props)):(0,_web.createComponent)(_RunRepeatingTable.default,{get instance(){return props.instance},get separatorStyle(){return context.crossAxesSeparator.style},get separatorColor(){return context.crossAxesSeparator.color},get separatorWidth(){return context.crossAxesSeparator.width},get turnedVisible(){return props.turnedVisible},cellSizing:{}}):void 0})())]}var _default=(0,_createElement.default)(TableCrossAxisComponent,void 0,element=>{let repeating=element.get_static_property("cross_axis_repeat");return{properties:{index:new _properties.Property(instance=>element.get_static_property("axis_index"),{fallback:0,noWaitVisible:!0}),repeating:new _properties.Property(instance=>repeating,{fallback:!1,noWaitVisible:!0}),stickyAxis:new _properties.Property(instance=>element.get_static_property("make_sticky"),{fallback:!1})},styles:repeating?[]:(0,_table_element.crossAxisStyling)(element)}});exports.default=_default}});var require_TableLayout=__commonJS({"lib-browser-old/core/core_elements/Layouts/TableLayout.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.TableLayout=void 0;require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_includes();require_es_string_includes();require_es_parse_int();var _autorun=require_autorun3(),element_eval=_interopRequireWildcard(require_element_eval()),_elements=_interopRequireDefault(require_elements2()),element_props=_interopRequireWildcard(require_element_props()),_status_bar=_interopRequireDefault(require_status_bar()),_u=require_u2(),_b_object=require_b_object();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var TableLayout=class{constructor(instance){this.instance=void 0,this._raw_list_data_watcher=void 0,this.extra_fields=void 0,this.previous_search=void 0,this.type=void 0,this.spinner=void 0,this.finished_loading_switch=void 0,this.type="Table",this.instance=instance,instance.repeating_layout_type="Table",this.finished_loading_switch=(0,_u.MakeSwitch)(void 0,"loading_switch"),this.extra_fields=[],this.spinner=null,this.setup_messages()}add_spinner(){if(!this.instance.is_visible()){var _this$spinner;(_this$spinner=this.spinner)==null||_this$spinner.call(this);return}this.spinner||(this.spinner=_status_bar.default.spinner(this.instance))}remove_spinner(){var _this$spinner2;(_this$spinner2=this.spinner)==null||_this$spinner2.call(this),this.spinner=null}estimate_one_row(){return 1}compute_extra_fields(){this.extra_fields=[]}set_loading(data){this.instance.state("loading",data),data?this.finished_loading_switch.turn_off():this.finished_loading_switch.turn_on()}columns(){return 1}table_direction(){return this.instance.get_static_property("table_direction")}guess_number_of_cells(cross_axis_instance){let guess_dimension=dimension=>{var _element_eval$evaluat2;let container_size;if(dimension==="height"){var _this$instance$canvas,_this$instance$canvas2;container_size=(_this$instance$canvas=(_this$instance$canvas2=this.instance.canvas)==null?void 0:_this$instance$canvas2.innerHeight())!=null?_this$instance$canvas:0}else{var _this$instance$canvas3,_this$instance$canvas4;container_size=(_this$instance$canvas3=(_this$instance$canvas4=this.instance.canvas)==null?void 0:_this$instance$canvas4.innerWidth())!=null?_this$instance$canvas3:0}let axis_coord=0;for(let cross_axis of this.instance.children)if(cross_axis.element.type()==="TableCrossAxis"&&cross_axis!==cross_axis_instance&&cross_axis.is_visible_me())if(cross_axis.get_static_property("single_".concat(dimension))||!cross_axis.get_static_property("fit_".concat(dimension))){var _element_eval$evaluat;let size=(_element_eval$evaluat=element_eval.evaluate_property(cross_axis,"min_".concat(dimension,"_css")))!=null?_element_eval$evaluat:"0px";if(size.includes("%")){let percentage=parseInt(size);axis_coord+=percentage/100*container_size}else axis_coord+=parseInt(size)}else{var _cross_axis$canvas$ou,_cross_axis$canvas;axis_coord+=(_cross_axis$canvas$ou=(_cross_axis$canvas=cross_axis.canvas)==null?void 0:_cross_axis$canvas.outerHeight())!=null?_cross_axis$canvas$ou:0}let first_cell=this.instance.edit_mode()?cross_axis_instance:cross_axis_instance.children[0],min_cell_size=(_element_eval$evaluat2=element_eval.evaluate_property(cross_axis_instance,"min_".concat(dimension,"_css")))!=null?_element_eval$evaluat2:"100%";if(this.instance.run_mode()&&min_cell_size.includes("%")){let percentage=Math.max(parseInt(min_cell_size),1);return Math.max(Math.ceil(100-axis_coord/container_size*100/percentage),1)}else{var _pixels;let pixels;if(cross_axis_instance.get_static_property("single_".concat(dimension)))pixels=parseInt(min_cell_size);else if(first_cell==null||!cross_axis_instance.get_static_property("fit_".concat(dimension)))pixels=parseInt(min_cell_size);else{let is_hidden=!first_cell.is_visible();if(first_cell.do_show(),dimension==="height"){var _first_cell$canvas;pixels=(_first_cell$canvas=first_cell.canvas)==null?void 0:_first_cell$canvas.outerHeight()}else{var _first_cell$canvas2;pixels=(_first_cell$canvas2=first_cell.canvas)==null?void 0:_first_cell$canvas2.outerWidth()}is_hidden&&first_cell.do_hide()}pixels=Math.max((_pixels=pixels)!=null?_pixels:1,1);let repeating_size=0;if(dimension==="height"){if(this.instance.run_mode()&&element_props.is_fitting_height(this.instance)){var _cross_axis_instance$,_cross_axis_instance$2;repeating_size=Math.max(window.innerHeight-((_cross_axis_instance$=(_cross_axis_instance$2=cross_axis_instance.canvas)==null?void 0:_cross_axis_instance$2[0].getBoundingClientRect().top)!=null?_cross_axis_instance$:0),0)}element_props.min_height_css(this.instance)}else{if(this.instance.run_mode()&&element_props.is_fitting_width(this.instance)){var _cross_axis_instance$3,_cross_axis_instance$4;repeating_size=Math.max(window.innerWidth-((_cross_axis_instance$3=(_cross_axis_instance$4=cross_axis_instance.canvas)==null?void 0:_cross_axis_instance$4[0].getBoundingClientRect().left)!=null?_cross_axis_instance$3:0),0)}element_props.min_width_css(this.instance)}if(repeating_size=Math.max(repeating_size,container_size-axis_coord),this.instance.run_mode())return Math.max(Math.ceil(repeating_size/pixels),1);{var _element_eval$evaluat3;let separator_name=dimension==="height"?"horizontal_separator":"vertical_separator",separator_size=element_eval.evaluate_property(this.instance,"".concat(separator_name,"_style"))==="none"?0:(_element_eval$evaluat3=element_eval.evaluate_property(this.instance,"".concat(separator_name,"_width")))!=null?_element_eval$evaluat3:0;return Math.max(Math.floor((repeating_size+separator_size)/(pixels+separator_size)),1)}}};return cross_axis_instance.is_visible()?this.table_direction()==="vertical"?guess_dimension("height"):guess_dimension("width"):0}data_source(){return element_eval.evaluate_property(this.instance,"data_source")}set_list_data(data){this.instance.state("list_data",data)}set_show_range(data){this.instance.state("show_range",data)}write_data(new_data){var _new_data;let dehydrated;(_new_data=new_data)!=null&&_new_data.dehydrate?dehydrated=new_data.dehydrate():(dehydrated="no data",new_data=null),dehydrated!==this.previous_search&&(this.previous_search=dehydrated,this.set_list_data(new_data),this.set_show_range(0))}setup_messages(){this.set_list_data(_elements.default.STATE_NOT_READY),this.instance.autorun(()=>{this.instance.state("datasource_changed_by_workflow_action")||this.write_data(this.data_source())}),this.instance.on_message("set_list_data",new_list=>{this.instance.state("datasource_changed_by_workflow_action",!0),this.write_data(new_list)})}list_data(){return this.instance.state("list_data")}init_raw_list_watcher(start_fn,end_fn){var _this$_raw_list_data_;(_this$_raw_list_data_=this._raw_list_data_watcher)==null||_this$_raw_list_data_.destroy(),this._raw_list_data_watcher=(0,_autorun.Watcher)(()=>{var _this$instance$state$,_this$instance$state,_this$instance$state$2,_this$instance$state$3,_this$instance$state$4;let start_index=start_fn(),last_index=end_fn();return(_this$instance$state$=(_this$instance$state=this.instance.state("list_data"))==null||(_this$instance$state$2=_this$instance$state.with_extra_fields)==null||(_this$instance$state$3=(_this$instance$state$4=_this$instance$state$2.call(_this$instance$state,this.extra_fields)).get_children)==null?void 0:_this$instance$state$3.call(_this$instance$state$4,start_index,last_index))!=null?_this$instance$state$:[]});let prev;return this._raw_list_data_watcher.on_value(new_val=>{this.set_loading(!(0,_b_object.compare)(new_val,prev)),prev=new_val}),this._raw_list_data_watcher}raw_list_data(){var _this$_raw_list_data_2;return(_this$_raw_list_data_2=this._raw_list_data_watcher)==null?void 0:_this$_raw_list_data_2.get()}};exports.TableLayout=TableLayout}});var require_TableElement=__commonJS({"lib-browser-old/core/core_elements/elements/TableElement.js"(){"use strict";init_define_process_env();init_shim();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_weak_map();require_es_array_iterator();require_es_object_from_entries();require_es_array_sort();require_web_dom_collections_iterator();require_es_symbol_description();require_es_error_cause();var _appquery=_interopRequireDefault(require_appquery()),property_applications=_interopRequireWildcard(require_property_applications()),_TableMainAxisComponent=_interopRequireDefault(require_TableMainAxisComponent()),_TableCellComponent=_interopRequireDefault(require_TableCellComponent()),_TableElementComponent=_interopRequireDefault(require_TableElementComponent()),_element_transformer=_interopRequireDefault(require_element_transformer()),_TableCrossAxisComponent=_interopRequireDefault(require_TableCrossAxisComponent()),_table_element=require_table_element(),_TableLayout=require_TableLayout(),_lang=_interopRequireDefault(require_lang2());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}function makeName(table,element){return table==null?element.get_name():"".concat(table.get_name(),"'s ").concat(element.get_name())}_element_transformer.default.make_element("Table",{display:"Table",category:"containers",glyph_id:"table",list_order:3,keyboard_shortcut:null,condition(root){var _ref,_root$get_responsive_;return((_ref=_appquery.default.get_public_setting("bubble_version")>=21||_appquery.default.get_public_setting("bubble_version")===20&&(root==null?void 0:root.get_static_property("page_version_21_upgrade")))!=null?_ref:!1)&&root!=null&&((_root$get_responsive_=root.get_responsive_version)==null?void 0:_root$get_responsive_.call(root))>0},defaults:{width:_table_element.NUM_DEFAULT_COLUMNS*_table_element.DEFAULT_COLUMN_WIDTH,height:_table_element.NUM_DEFAULT_ROWS_EDITOR*_table_element.DEFAULT_REPEATING_ROW_HEIGHT+_table_element.DEFAULT_HEADER_ROW_HEIGHT},generate_default_children(){function gen_column(id,index,name){return{id,type:"TableMainAxis",properties:{axis_index:index},default_name:name}}let columnIds=Array.from({length:_table_element.NUM_DEFAULT_COLUMNS},()=>_appquery.default.uid());function gen_row(index,repeating,name){let repeatingDefaultProperties={fixed_number_repeating_axis:!0,fixed_number_repeating_axis_count:_table_element.NUM_DEFAULT_ROWS_EDITOR};return{id:_appquery.default.uid(),type:"TableCrossAxis",properties:_objectSpread(_objectSpread({axis_index:index,cross_axis_repeat:repeating,min_height_css:"".concat(repeating?_table_element.DEFAULT_REPEATING_ROW_HEIGHT:_table_element.DEFAULT_HEADER_ROW_HEIGHT,"px")},repeating?repeatingDefaultProperties:{}),{},{min_width_css:"".concat(repeating?_table_element.DEFAULT_REPEATING_ROW_HEIGHT:_table_element.DEFAULT_HEADER_ROW_HEIGHT,"px")}),default_name:name,elements:Object.fromEntries(columnIds.map(id=>[_appquery.default.uid(),{id:_appquery.default.uid(),type:"TableCell",properties:{cell_main_axis_id:id,container_layout:"row"},default_name:"Cell"}]))}}return _objectSpread(_objectSpread({},Object.fromEntries(columnIds.map((id,index)=>[_appquery.default.uid(),gen_column(id,index,"Column ".concat((0,_table_element.getLetterIndex)(index)))]))),{},{[_appquery.default.uid()]:gen_row(0,!1,"Row 0"),[_appquery.default.uid()]:gen_row(1,!0,"Row 1 (Repeating)")})},standard_container_layout:"table",field_names:{table_direction:{no_states:!0,default:"vertical"},group_type:{no_states:!0},data_source:{},vertical_separator_style:{no_states:!0,default:"solid",in_style:!0},vertical_separator_width:{default:1,in_style:!0,no_states:!0},vertical_separator_color:{default:"#ECECEC",in_style:!0,no_states:!0},horizontal_separator_style:{default:"solid",in_style:!0,no_states:!0},horizontal_separator_width:{default:1,in_style:!0,no_states:!0},horizontal_separator_color:{default:"#ECECEC",in_style:!0,no_states:!0}},uses_css_responsive:!0,can_fit_width:!0,can_fit_height:!0,property_applications(element){return[new property_applications.Dimensions,new property_applications.Border,new property_applications.BoxShadow,new property_applications.Background,new property_applications.ResponsiveElement(element),new property_applications.PaddingFields,new property_applications.Opacity]},change_cursor_style_if_clickable:!0,can_defer_drawing(){return!0},get_min_width(){return 0},register(instance){instance.table_element_layout=new _TableLayout.TableLayout(instance)},get_html(instance){return"<div></div>"},initialize(instance){let canvas=instance.canvas;canvas.addClass("bubble-legacy-table"),canvas.append('<span class="incompatible-message">Incompatible: Table Element</span>')},contains_group_data:!0,is_restricted_container:!0,can_have_children(){return!0},get_children_canvas(instance){return instance.get_canvas()},is_input:!1,add_an_invisible_div_on_the_top:!1,solid_component:_TableElementComponent.default});_element_transformer.default.make_element("TableMainAxis",{field_names:{axis_index:{no_states:!0}},property_applications(element){return[new property_applications.ResponsiveElement(element)]},uses_css_responsive:!0,can_fit_width:!0,can_fit_height:!0,is_input:!1,contains_group_data:!1,should_not_be_brought_to_front_when_selected:!0,hide_from_elements_tree:!0,get_min_width(){return 0},not_draggable(){return!0},no_margins(){return!0},is_pseudo:!0,no_thumbnail:!0,cant_delete(element){return(0,_table_element.getAxes)(element.parent(),"TableMainAxis").length<=1},generate_name(element){let index=(0,_table_element.getRelativeIndex)(element),axisDisplay=(0,_table_element.isTableDirectionHorizontal)(element.parent())?"Row":"Column";return"".concat(axisDisplay," ").concat((0,_table_element.getLetterIndex)(index))},name_for_datasource(element){return makeName(element.parent(),element)},get_type_display(element){return(0,_table_element.isTableDirectionHorizontal)(element.parent())?"Row":"Column"},manual_wrapper:!0,change_cursor_style_if_clickable:!0,add_an_invisible_div_on_the_top:!1,get_html(instance){return"<div></div>"},initialize(instance){},compute_initial_properties(data,container_element,additional_options){if((additional_options==null?void 0:additional_options.neighborId)!==void 0){let type=_appquery.default.element(additional_options.neighborId).type();data.properties.axis_index=(0,_table_element.updateIndicesOnCreate)(additional_options.neighborId,type,additional_options.direction)}},solid_component:_TableMainAxisComponent.default});_element_transformer.default.make_element("TableCrossAxis",{field_names:{axis_index:{no_states:!0},cross_axis_repeat:{no_states:!0,default:!1},fixed_number_repeating_axis:{no_states:!0,default:!1},fixed_number_repeating_axis_count:{default:1}},property_applications(element){return[new property_applications.ResponsiveElement(element),new property_applications.Opacity,new property_applications.Background]},no_margins(){return!0},get_states(){return["list_data"]},register(instance){instance.repeating_layout_type="Table"},uses_css_responsive:!0,can_fit_width:!0,can_fit_height:!0,is_input:!1,contains_group_data:!0,is_restricted_container:!0,can_have_children(){return!0},get_children_canvas(instance){return instance.get_canvas()},get_min_width(){return 0},not_draggable(){return!0},is_pseudo:!0,no_thumbnail:!0,cant_delete(element){return element.get_static_property("cross_axis_repeat")},generate_name(element){let index=(0,_table_element.getRelativeIndex)(element),axisDisplay=(0,_table_element.isTableDirectionHorizontal)(element.parent())?"Column":"Row",repeating=element.get_static_property("cross_axis_repeat")?" (Repeating)":"";return"".concat(axisDisplay," ").concat(index).concat(repeating)},name_for_datasource(element){return makeName(element.parent(),element)},get_type_display(element){return(0,_table_element.isTableDirectionHorizontal)(element.parent())?"Column":"Row"},manual_wrapper:!0,standard_container_layout:"table_cross_axis",change_cursor_style_if_clickable:!0,add_an_invisible_div_on_the_top:!1,can_reference(element){return!element.get_static_property("cross_axis_repeat")},register_children(instance){instance.get_static_property("cross_axis_repeat")&&instance.run_mode()||instance._default_register_children(instance.element.elements())},draws_own_children(element){return element.get_static_property("cross_axis_repeat")},draw_children(instance){},get_html(instance){return"<div></div>"},initialize(instance){},solid_component:_TableCrossAxisComponent.default,get_messages(element){return["draw_till"]}});_element_transformer.default.make_element("TableCell",{display:"Cell",field_names:{cell_main_axis_id:{no_states:!0}},property_applications(element){return[new property_applications.ResponsiveContainer(element),new property_applications.PaddingFields,new property_applications.Opacity,new property_applications.Background]},uses_css_responsive:!0,always_visible:!0,is_input:!1,contains_group_data:!1,can_have_children(){return!0},get_children_canvas(instance){return instance.get_canvas()},get_min_width(){return 0},not_draggable(){return!0},show_overflow_on_drag:!0,not_resizable(){return!0},no_margins(){return!0},is_pseudo:!0,cant_delete(){return!0},generate_name(element){let crossAxis=element.parent();if(crossAxis==null)return"Cell";let crossAxisIndex=(0,_table_element.getRelativeIndex)(crossAxis),mainAxis=element.get_static_property("cell_main_axis_id"),mainAxisIndex=(0,_table_element.getRelativeIndex)(_appquery.default.element(mainAxis));return"Cell ".concat(crossAxisIndex).concat((0,_table_element.getLetterIndex)(mainAxisIndex))},name_for_datasource(element){var _element$parent2;return makeName((_element$parent2=element.parent())==null?void 0:_element$parent2.parent(),element)},manual_wrapper:!0,change_cursor_style_if_clickable:!0,add_an_invisible_div_on_the_top:!1,can_fit_height:!0,can_fit_width:!0,get_html(instance){return"<div></div>"},initialize(instance){},solid_component:_TableCellComponent.default})}});var require_ServerHTML=__commonJS({"lib-browser-old/renderer/solid_utils/ServerHTML.js"(exports,module){"use strict";init_define_process_env();init_shim();var{ssr:ssr2}=(init_web(),__toCommonJS(web_exports));function ServerHTML(props){return ssr2(props.html)}module.exports=ServerHTML}});var require_TextComponent=__commonJS({"lib-browser-old/core/core_elements/components/TextComponent.js"(exports){"use strict";init_define_process_env();init_shim();require_es_symbol_description();require_es_error_cause();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _web=(init_web(),__toCommonJS(web_exports));require_es_array_iterator();require_web_dom_collections_iterator();var _appquery=_interopRequireDefault(require_appquery()),b_ui=_interopRequireWildcard(require_b_ui()),text_elements=_interopRequireWildcard(require_text_elements()),_solidJs=(init_solid(),__toCommonJS(solid_exports)),_ServerHTML=_interopRequireDefault(require_ServerHTML()),_createElement=require_createElement(),element_styles=_interopRequireWildcard(require_element_styles()),_directives=require_directives(),_properties=require_properties(),element_eval=_interopRequireWildcard(require_element_eval()),internalNavigation=_interopRequireWildcard(require_internal_navigation());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}function computeText(instance){let is_pre_wrap=_appquery.default.get_public_setting("bubble_version")>=10,recognize_links=instance.get_static_property("recognize_links"),no_bbcode=instance.get_static_property("no_bbcode"),props={};for(let prop of["text","editor_preview_text","link_color","nofollow"])props[prop]=element_eval.evaluate_property(instance,prop);let text;if(instance.run_mode()||!props.editor_preview_text||!props.text||instance.element.property("text").is_static()?text=props.text:text=props.editor_preview_text,no_bbcode)return recognize_links&&!b_ui.has_bbcode(text)?{html:b_ui.bbcode_to_html(text_elements.replace_links_emails(instance,props),is_pre_wrap)}:{text,cssStyle:{"white-space":"pre-wrap"}};{let modified_text=text;return recognize_links&&(modified_text=text_elements.replace_links_emails(instance,props)),{html:b_ui.bbcode_to_html(modified_text,is_pre_wrap)}}}function TextComponent(props){var _props$tagName;let instance=props.instance;(0,_solidJs.createEffect)(()=>{props.useDotDotDot&&(text_elements.apply_dotdotdot(instance,instance.edit_mode()?"letter":"words"),(0,_solidJs.onCleanup)(()=>text_elements.remove_dotdotdot(instance)))});let html=()=>props.verticalCenter||instance.run_mode()&&props.useDotDotDot?"<div>".concat(props.textData.html,"</div>"):props.textData.html;(0,_solidJs.createEffect)(()=>{if(props.textData.html!=null)instance.canvas.html(html()),internalNavigation.add_internal_navigation_handlers(instance.canvas[0]);else if(instance.run_mode()&&props.useDotDotDot){let div=document.createElement("div");div.innerText=props.textData.text,instance.canvas.html(div.outerHTML)}else instance.canvas.text(props.textData.text)});let tagName=instance.edit_mode()?"div":(_props$tagName=props.tagName)!=null?_props$tagName:null;(0,_solidJs.onMount)(()=>{(0,_directives.defaultEventHandlers)(instance.canvas[0],()=>instance)});let classList2=()=>_objectSpread(_objectSpread({},props.classList),{},{"bubble-r-vertical-center":props.verticalCenter});return _web.isServer?(0,_web.createComponent)(_web.Dynamic,{get id(){return props.id},component:tagName,get style(){return _objectSpread(_objectSpread({},props.style),props.textData.cssStyle)},get classList(){return classList2()},get children(){return(0,_web.memo)(()=>!!props.textData.html)()?(0,_web.createComponent)(_ServerHTML.default,{get html(){return html()}}):props.textData.text}}):(0,_web.createComponent)(_web.Dynamic,{get id(){return props.id},component:tagName,ref(r$){let _ref$=props.ref;typeof _ref$=="function"?_ref$(r$):props.ref=r$},get style(){return _objectSpread(_objectSpread({},props.style),props.textData.cssStyle)},get classList(){return classList2()}})}var _default=(0,_createElement.createElement)(TextComponent,element=>{let tagType=element.get_styleable_static_property("tag_type");return{tagName:tagType==="normal"||!_appquery.default.get_public_setting("expose_text_tags")||tagType==null?"div":tagType}},element=>({properties:{textData:new _properties.Property(computeText,{fallback:{text:""}}),useDotDotDot:new _properties.Property(text_elements.could_clip),verticalCenter:new _properties.Property(instance=>element_eval.evaluate_property(instance,"vertical_centering"))},styles:[new _properties.Style(instance=>({"white-space":_appquery.default.get_public_setting("bubble_version")>=10?"pre-wrap":"",overflow:instance.edit_mode()?"hidden":"visible"})),...element_styles.placedStyling(element)]}));exports.default=_default}});var require_Text2=__commonJS({"lib-browser-old/core/core_elements/elements/Text.js"(){"use strict";init_define_process_env();init_shim();require_es_weak_map();require_es_array_iterator();require_web_dom_collections_iterator();var u=_interopRequireWildcard(require_u2()),_appquery=_interopRequireDefault(require_appquery()),property_applications=_interopRequireWildcard(require_property_applications()),element_utils=_interopRequireWildcard(require_element_utils()),element_transformer=_interopRequireWildcard(require_element_transformer()),element_workflows=_interopRequireWildcard(require_element_workflows()),text_elements=_interopRequireWildcard(require_text_elements()),element_eval=_interopRequireWildcard(require_element_eval()),_elements=require_elements(),_TextComponent=_interopRequireDefault(require_TextComponent());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}element_transformer.make_element("Text",{category:"visual elements",glyph_id:"type",list_order:1,keyboard_shortcut:"T",defaults:{width:200,height:45},field_names:u.extend({text:{default:"...edit me..."},editor_preview_text:{no_states:!0,only_edit_mode:!0},stretch_to_fit:{default:!1,no_states:!0},cut_off_content:{no_states:!0},shrink_if_less_high:{no_states:!0},tag_type:{no_states:!0,default:"normal",in_style:!0},recognize_links:{no_states:!0},link_color:{optional:!0,no_states:!0},nofollow:{no_states:!0},no_bbcode:{no_states:!0}},element_workflows.start_workflow_field_names),property_applications(element){return[new property_applications.Dimensions,new property_applications.Font,new property_applications.FontShadow,new property_applications.FontSpacing,new property_applications.PaddingText,new property_applications.PaddingFields({minimum_element_version:_elements.PADDING_VERSION,no_vertical_if_legacy_center:!0,allow_legacy:!0}),new property_applications.Border,new property_applications.BoxShadow,new property_applications.Background,new property_applications.ResponsiveElement(element),new property_applications.ToolTip,new property_applications.Rotation,new property_applications.Opacity]},uses_css_responsive:!0,can_fit_width:!0,can_fit_height:!0,solid_component:_TextComponent.default,change_cursor_style_if_clickable:!0,get_html(instance){if(!instance.run_mode()||instance.get_static_property("tag_type")==="normal"||!_appquery.default.get_public_setting("expose_text_tags"))return"<div></div>";{let type=instance.get_static_property("tag_type");return"<"+type+"></"+type+">"}},get_min_width(element){return 0},can_defer_drawing(){return!0},register(){},attempt_size_only_draw(instance){return instance.element.no_size_when_hidden()},initialize(instance){let canvas=instance.get_canvas();instance.autorun(()=>{_appquery.default.get_public_setting("bubble_version")>=10?property_applications.apply_css_style(canvas,{"white-space":"pre-wrap"}):property_applications.apply_css_style(canvas,{"white-space":""})}),instance.wait_for_visible_lite(()=>{let wrap2;instance.edit_mode()?(wrap2="letter",canvas[0].style.overflow="hidden"):(wrap2="words",canvas[0].style.overflow="visible"),element_eval.pre_cache(instance,["text","font_size","padding_vertical","line_height","word_spacing","letter_spacing","rotation_angle","vertical_centering","editor_preview_text"]),apply_responsive_dynamic_properties_text(instance),instance.autorun(()=>{text_elements.could_clip(instance)?text_elements.apply_dotdotdot(instance,wrap2):text_elements.remove_dotdotdot(instance)}),instance.on_destroy(()=>{text_elements.remove_dotdotdot(instance)})})},is_input:!1,contains_group_data:!1,add_an_invisible_div_on_the_top:!1,events:["ButtonClicked"],css_files:["css/optional/font-awesome.min.css"]});function apply_responsive_dynamic_properties_text(instance){let canvas=instance.get_canvas();instance.autorun(()=>{let props_to_evaluate=["text","font_size","font_face","padding_vertical","line_height","link_color","nofollow","vertical_centering","editor_preview_text"],props={};for(let prop of props_to_evaluate)props[prop]=element_eval.evaluate_property(instance,prop);if(!instance.is_animating())if(instance.run_mode()){if(instance.element.element_version(!0)<_elements.PADDING_VERSION){var _props$padding_vertic;canvas[0].style["padding-bottom"]=((_props$padding_vertic=props.padding_vertical)!=null?_props$padding_vertic:0)+"px"}if(!instance.is_visible())return;property_applications.apply_css_style(canvas,{"word-break":"break-word"}),text_elements.apply_text(instance,canvas,props)}else text_elements.apply_text(instance,canvas,props),element_utils.do_add_an_invisible_div_on_the_top(instance)})}}});var require_VideoComponent2=__commonJS({"lib-browser-old/core/core_elements/elements/VideoComponent.js"(){"use strict";init_define_process_env();init_shim();require_es_weak_map();require_es_array_iterator();require_web_dom_collections_iterator();require_es_regexp_exec();require_es_string_replace();require_es_promise();require_es_regexp_to_string();var color_utils=_interopRequireWildcard(require_color()),known_plugins_consts=_interopRequireWildcard(require_known_plugins()),b_async=_interopRequireWildcard(require_b_async3()),b_ui=_interopRequireWildcard(require_b_ui()),property_applications=_interopRequireWildcard(require_property_applications()),plugin_registry=_interopRequireWildcard(require_plugin_registry()),element_transformer=_interopRequireWildcard(require_element_transformer()),video_elements=_interopRequireWildcard(require_video_elements()),image_utils=_interopRequireWildcard(require_image_utils()),_elements=require_elements(),aspect_ratio=_interopRequireWildcard(require_aspect_ratio()),element_eval=_interopRequireWildcard(require_element_eval()),u=_interopRequireWildcard(require_u2()),_lib=_interopRequireDefault(require_lib()),analytics=_interopRequireWildcard(require_analytics()),segment_events=_interopRequireWildcard(require_segment_events());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var YOUTUBE_IFRAME_API_URL="https://www.youtube.com/iframe_api",prev_key=b_async.MakeKey(null,"always turned");prev_key.turn();function video_queue(cb,instance){let new_key=b_async.MakeKey(null,"next video");b_async.WaitFor(prev_key,()=>setTimeout(()=>{instance!=null&&instance.is_destroyed()||cb(),new_key.turn()},10)),prev_key=new_key}element_transformer.make_element("Video",{category:"visual elements",glyph_id:"video",list_order:7,keyboard_shortcut:null,defaults:{width:320,height:240,collapse_margin:500,use_max_width:!0,max_width:100},field_names:{video_source:{default:"youtube",no_states:!0},video_id:{},auth_token:{optional:!0,no_states:!0},autoplay:{default:!1,no_states:!0},loop:{default:!1,no_states:!0},control_color_vimeo:{default:"#00adef",no_states:!0,in_style:!0}},can_fix_aspect_ratio(){return!0},property_applications(element){return[new property_applications.Dimensions,new property_applications.Padding,new property_applications.PaddingFields({minimum_element_version:_elements.PADDING_VERSION,allow_legacy:!0}),new property_applications.Border,new property_applications.BoxShadow,new property_applications.ResponsiveElement(element),new property_applications.Opacity]},uses_css_responsive:!0,get_html(instance){return"<div></div>"},get_min_width(){return 0},notify_width(instance,width){return image_utils.keep_proportions(instance,width,!0)},add_an_invisible_div_on_the_top:!0,change_cursor_style_if_clickable:!1,can_defer_drawing(){return!0},initialize(instance){instance.wait_for_visible_lite(()=>{let iframe_id="youtube_uuid_"+u.LUID(),canvas=instance.get_canvas();instance.setTimeout(()=>{element_eval.pre_cache(instance,["video_source","video_id","autoplay","control_color_vimeo","padding_horizontal","padding_vertical","loop","auth_token"]);let current_properties={};instance.autorun(()=>{let actual_changes={},changes={};for(let prop of["video_source","video_id","autoplay","control_color_vimeo","padding_horizontal","padding_vertical","loop","auth_token"])changes[prop]=element_eval.evaluate_property(instance,prop),changes[prop]!==current_properties[prop]&&(actual_changes[prop]=changes[prop],current_properties[prop]=changes[prop]);changes.width_to_subtract=2*changes.padding_horizontal+property_applications.calculate_border_width(instance),changes.height_to_subtract=2*changes.padding_vertical+property_applications.calculate_border_height(instance);for(let prop of["width_to_subtract","height_to_subtract"])changes[prop]!==current_properties[prop]&&(actual_changes[prop]=changes[prop],current_properties[prop]=changes[prop]);let html='<iframe allow="autoplay; fullscreen" width="100% - '.concat(changes.width_to_subtract,'" height=" 100% - ').concat(changes.height_to_subtract,'" ');video_elements.should_block_cookies()&&(html+=' sandbox="allow-same-origin allow-presentation allow-scripts" ');let video_src;if(changes.video_source==="youtube"){var _changes$video_id;html+="id = ".concat(iframe_id," "),((_changes$video_id=changes.video_id)==null?void 0:_changes$video_id.indexOf)!=null&&changes.video_id.indexOf("watch?v=")!==-1&&(changes.video_id=changes.video_id.split("watch?v=")[1]),video_src="//www.youtube.com/embed/".concat(changes.video_id,"?rel=0"),video_src+="&enablejsapi=1",changes.autoplay&&instance.run_mode()&&(video_src+="&autoplay=1"),changes.loop&&instance.run_mode()&&(video_src+="&loop=1&playlist="+changes.video_id),html+=' frameborder="0" allowfullscreen modestbranding="1" autohide="1"'}if(changes.video_source==="vimeo"){var _changes$video_id2;((_changes$video_id2=changes.video_id)==null?void 0:_changes$video_id2.indexOf)!=null&&changes.video_id.indexOf("https://vimeo.com/")!==-1&&(changes.video_id=changes.video_id.split("https://vimeo.com/")[1]);let color=color_utils.rgb_to_hex(changes.control_color_vimeo).code.slice(1);video_src="//player.vimeo.com/video/"+changes.video_id+"?title=0&byline=0&portrait=0&color="+color,changes.autoplay&&instance.run_mode()&&(video_src+="&autoplay=1"),changes.loop&&instance.run_mode()&&(video_src+="&loop=1"),html+=' frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'}let html_as_jquery_element,token;if(changes.video_source===known_plugins_consts.ZIGGEO){let service=plugin_registry.get_hardcoded_plugin(known_plugins_consts.ZIGGEO);if(token=changes.auth_token||(service==null?void 0:service.get_key(service.key_for_html_header)),token){var _changes$video_id3,_changes$autoplay,_changes$loop;html_as_jquery_element=$("<ziggeoplayer/>"),html_as_jquery_element.attr({video:(_changes$video_id3=changes.video_id)!=null?_changes$video_id3:"no_video",application:token,auth:"true",width:"100%",height:"100%",autoplay:(_changes$autoplay=changes.autoplay)!=null?_changes$autoplay:"false",loop:(_changes$loop=changes.loop)!=null?_changes$loop:"false",theme:"modern"});let ziggeo_html=html_as_jquery_element[0].outerHTML.replace(/"/g,"'");html+=" frameborder=\"0\" webkitAllowFullScreen mozallowfullscreen allowFullScreen\nstyle='overflow:hidden'\nsrcdoc=\"\n<html style='overflow:hidden'>\n<head style='overflow:hidden'>\n    <meta http-equiv='Content-Security-Policy' content='upgrade-insecure-requests'>\n    <link rel='stylesheet' href='https://assets.ziggeo.com/v2-stable/ziggeo.css' />\n    <script src='https://assets.ziggeo.com/v2-stable/ziggeo.js'><\/script>\n</head>\n<body style='margin:0px'>\n    ".concat(ziggeo_html,'\n</body>\n</html>\n"')}else video_src="https://ziggeo.io/p/".concat(changes.video_id),html+='height="100%"\nframeborder="0"\nscrolling="no"\nreferrerpolicy="no-referrer"\nallowspeakers '.concat(changes.autoplay?"allowautoplay":"",' allowfullscreen\nallow="').concat(changes.autoplay?"autoplay *; ":"",'  fullscreen *"\nstyle="width:100%;height:100%" ')}html+="></iframe>",(changes.video_source!=="ziggeo"||!token)&&(html_as_jquery_element=$(html),html_as_jquery_element.attr("src",video_src));let only_has_dimension_changes=changes.video_source!=="ziggeo",dim_only_changes={width_to_subtract:!0,height_to_subtract:!0};for(let change in actual_changes)if(!dim_only_changes[change]){only_has_dimension_changes=!1;break}let video_fixed_aspect_condition=instance.element.has_fixed_aspect_ratio();if(instance.run_mode()){if(only_has_dimension_changes){aspect_ratio.structure_fixed_aspect_ratio(instance,canvas),canvas.children().attr(aspect_ratio.element_css(video_fixed_aspect_condition));return}changes.video_id?video_queue(()=>{canvas.empty(),html_as_jquery_element.css(aspect_ratio.element_css(video_fixed_aspect_condition)),html_as_jquery_element.css("position","absolute"),aspect_ratio.structure_fixed_aspect_ratio(instance,canvas),canvas.append(html_as_jquery_element)},instance):(canvas.empty(),aspect_ratio.structure_fixed_aspect_ratio(instance,canvas))}else canvas.empty(),b_ui.img("",canvas,"//s3.amazonaws.com/appforest_uf/f1665093563671x395094029933674050/video.png").css(aspect_ratio.element_css(video_fixed_aspect_condition)),aspect_ratio.structure_fixed_aspect_ratio(instance,canvas);(0,_lib.default)().appname()==="meta"&&changes.video_source==="youtube"&&instance.run_mode()&&inject_youtube_tracking(instance,iframe_id,changes.video_id)})},20)})},is_input:!1,contains_group_data:!1});function inject_script(src){return new Promise((resolve,reject)=>{let script=document.createElement("script");script.src=src,script.addEventListener("load",resolve),script.addEventListener("error",e=>reject(e.error)),document.head.appendChild(script)})}function inject_youtube_tracking(instance,iframe_id,video_id){inject_script(YOUTUBE_IFRAME_API_URL).then(()=>{let player;window.YT.ready(function(){onYouTubeIframeAPIReady()});function onYouTubeIframeAPIReady(){player=new window.YT.Player(iframe_id,{videoId:video_id,events:{onStateChange,onPlaybackQualityChange,onPlaybackRateChange}})}function onPlaybackQualityChange(event){let payload=build_segment_payload(video_id,player,"onPlaybackQualityChange");analytics.track(segment_events.YOUTUBE_VIDEO_QUALITY_CHANGED,payload)}function onPlaybackRateChange(event){let payload=build_segment_payload(video_id,player,"onPlaybackRateChange");analytics.track(segment_events.YOUTUBE_VIDEO_RATE_CHANGED,payload)}function onStateChange(event){let payload=build_segment_payload(video_id,player,"onStateChange"),segment_event_to_track=get_segment_event_to_track(event.data);analytics.track(segment_event_to_track,payload)}}).catch(error=>{console.error(error)})}var YOUTUBE_PLAYBACK_EVENTS_TRANSLATION={"-1":"unstarted",0:"ended",1:"playing",2:"paused",3:"buffering",5:"video cued"},get_segment_event_to_track=function(event_data){switch(translate_youtube_event(event_data)){case"ended":return segment_events.YOUTUBE_VIDEO_ENDED;case"playing":return segment_events.YOUTUBE_VIDEO_PLAYING;case"paused":return segment_events.YOUTUBE_VIDEO_PAUSED;case"buffering":return segment_events.YOUTUBE_VIDEO_BUFFER;case"video cued":return segment_events.YOUTUBE_VIDEO_CUED;default:return"Youtube video: unknown event ".concat(event_data)}};function build_segment_payload(video_id,youtubePlayer,event_name){return{video_id,video_title:youtubePlayer.videoTitle,video_timestamp_in_secs:youtubePlayer.getCurrentTime(),video_total_duration:youtubePlayer.getDuration(),video_playback_rate:youtubePlayer.getPlaybackRate(),video_playback_quality:youtubePlayer.getPlaybackQuality(),event_name,current_user_id:(0,_lib.default)().current_user()._id(),current_user_email:(0,_lib.default)().current_user().get_email()}}var translate_youtube_event=function(event_data){return YOUTUBE_PLAYBACK_EVENTS_TRANSLATION[event_data==null?void 0:event_data.toString()]}}});var require_repeating_border_styles=__commonJS({"lib-browser-old/core/core_elements/components/utils/repeating_border_styles.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.createBorderStyle=createBorderStyle;var _solidJs=(init_solid(),__toCommonJS(solid_exports)),_languages=_interopRequireDefault(require_languages()),_lib=_interopRequireDefault(require_lib());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function isRtl(){return _languages.default.is_rtl(_lib.default.or_throw().app_language())}function createBorderStyle(props){return(0,_solidJs.createMemo)(()=>{let borderStyle={};return props.hasTopBorder&&(borderStyle["border-top-width"]="".concat(props.separatorWidth,"px"),borderStyle["border-top-color"]=props.separatorColor,borderStyle["border-top-style"]=props.separatorStyle,props.includeMargin&&(borderStyle["margin-top"]="".concat(-props.separatorWidth,"px"))),props.hasLeftBorder&&(isRtl()?(borderStyle["border-right-width"]="".concat(props.separatorWidth,"px"),borderStyle["border-right-color"]=props.separatorColor,borderStyle["border-right-style"]=props.separatorStyle,props.includeMargin&&(borderStyle["margin-right"]="".concat(-props.separatorWidth,"px"))):(borderStyle["border-left-width"]="".concat(props.separatorWidth,"px"),borderStyle["border-left-color"]=props.separatorColor,borderStyle["border-left-style"]=props.separatorStyle,props.includeMargin&&(borderStyle["margin-left"]="".concat(-props.separatorWidth,"px")))),props.hasBottomBorder&&(borderStyle["border-bottom-width"]="".concat(props.separatorWidth,"px"),borderStyle["border-bottom-color"]=props.separatorColor,borderStyle["border-bottom-style"]=props.separatorStyle),props.hasRightBorder&&(borderStyle["border-right-width"]="".concat(props.separatorWidth,"px"),borderStyle["border-right-color"]=props.separatorColor,borderStyle["border-right-style"]=props.separatorStyle),props.firstRow&&(borderStyle["padding-top"]="0px"),borderStyle})}}});var require_GroupItemComponent=__commonJS({"lib-browser-old/core/core_elements/components/GroupItemComponent.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_symbol_description();require_es_error_cause();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();var _web=(init_web(),__toCommonJS(web_exports));require_web_queue_microtask();var autorun_signals=_interopRequireWildcard(require_autorun_signals()),_createElement=require_createElement(),_solidJs=(init_solid(),__toCommonJS(solid_exports)),_container_utils=require_container_utils(),_repeating_border_styles=require_repeating_border_styles(),mode_check=_interopRequireWildcard(require_mode_check()),_RepeatingGroupLayout=require_RepeatingGroupLayout(),_u=require_u2(),_properties=require_properties(),_table_element=require_table_element(),_directives=require_directives();function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var _tmpl$=(0,_web.template)("<div></div>",2);function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}function GroupItemComponent(props){var _data_instance;let instance=props.instance,isTable=instance.element.repeating_instance.repeating_layout_type==="Table",layout=isTable?(_data_instance=instance.element.data_instance)==null?void 0:_data_instance.table_element_layout:instance.element.repeating_instance.repeating_group_layout;if(!layout)throw new _u.UnexpectedError("Layout not found");let indexClass=autorun_signals.createWatcher(()=>"entry-".concat(instance.state("cell_index")),{fallback:""}),borderStyle=(0,_repeating_border_styles.createBorderStyle)((0,_solidJs.mergeProps)({includeMargin:!isTable},props)),baseStyle=()=>({display:props.hidden?"none":""});return(0,_solidJs.createEffect)(()=>{mode_check.on_server()?props.hidden?instance.do_hide():instance.do_show():props.hidden?queueMicrotask(()=>instance.do_hide()):queueMicrotask(()=>instance.do_show())}),instance.parent().add_to_namespace(instance),(0,_solidJs.createEffect)(()=>{let io=props.intersectionObserver;io!=null&&(io.observe(instance.canvas[0]),(0,_solidJs.onCleanup)(()=>{io.unobserve(instance.canvas[0])}))}),(0,_solidJs.onMount)(()=>{var _layout$is_masonry;if(instance.run_mode()&&layout instanceof _RepeatingGroupLayout.RepeatingGroupLayoutStyle&&(_layout$is_masonry=layout.is_masonry)!=null&&_layout$is_masonry.call(layout)){var _layout$observe_mason;(_layout$observe_mason=layout.observe_masonry_cell)==null||_layout$observe_mason.call(layout,instance.canvas[0])}}),(()=>{let _el$=_tmpl$.cloneNode(!0);(0,_web.use)(_directives.defaultEventHandlers,_el$,()=>props.instance);let _ref$=props.ref;return typeof _ref$=="function"?(0,_web.use)(_ref$,_el$):props.ref=_el$,(0,_web.insert)(_el$,(0,_web.createComponent)(_container_utils.ChildWrapper,props)),(0,_web.effect)(_p$=>{let _v$=_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread({},baseStyle()),props.cellSizing),borderStyle()),props.style),{},{[isTable&&layout.table_direction()==="vertical"?"min-width":isTable?"min-height":"null"]:"fit-content"}),_v$2={"bubble-element":!0,"group-item":!0,[indexClass()]:!0,[props.containerClass]:!0};return _p$._v$=(0,_web.style)(_el$,_v$,_p$._v$),_p$._v$2=(0,_web.classList)(_el$,_v$2,_p$._v$2),_p$},{_v$:void 0,_v$2:void 0}),_el$})()}module.exports=(0,_createElement.createElement)(GroupItemComponent,element=>({shouldAddWrapper:element.repeating_layout==="Table"&&element.should_add_extra_wrapper()}),(element,_ref)=>{let{shouldAddWrapper}=_ref;return element.repeating_layout==="Table"?{properties:{containerClass:new _properties.Property(()=>"bubble-cross-axis",{fallback:"bubble-cross-axis"})},styles:(0,_table_element.crossAxisStyling)(element)}:{properties:(0,_container_utils.containerProperties)(shouldAddWrapper),styles:(0,_container_utils.containerStyling)(shouldAddWrapper)}})}});var require_group_item_plugin=__commonJS({"lib-browser-old/core/core_elements/group_item_plugin.js"(){"use strict";init_define_process_env();init_shim();require_es_weak_map();require_es_array_includes();require_es_array_iterator();require_web_dom_collections_iterator();var u=_interopRequireWildcard(require_u2()),logger=_interopRequireWildcard(require_logger()),elements=_interopRequireWildcard(require_elements2()),property_applications=_interopRequireWildcard(require_property_applications()),element_eval=_interopRequireWildcard(require_element_eval()),element_transformer=_interopRequireWildcard(require_element_transformer()),_GroupItemComponent=_interopRequireDefault(require_GroupItemComponent());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var cells_height_cache={},rows_height_cache={};element_transformer.make_element("GroupItem",{get_html(){return"<div></div>"},default_group_data(){return elements.STATE_NOT_READY},can_register_workflows(instance){var _instance$_can_regist;return(_instance$_can_regist=instance._can_register_workflow_key)!=null||(instance._can_register_workflow_key=u.MakeKey(null,"_can_register_workflow_key")),instance._can_register_workflow_key},uses_css_responsive:!0,always_visible:!0,solid_component:_GroupItemComponent.default,register(instance){instance.split_namespace(),instance.autorun(()=>{let element_id=instance.element_id();instance.parent().add_to_namespace(instance),element_id&&instance.canvas&&(instance.canvas[0].key=element_id)})},initialize(instance){var _repeating_instance$e;instance.canvas.addClass("group-item entry-"+instance.element.num+" ");let repeating_instance=instance.element.repeating_instance;if(((_repeating_instance$e=repeating_instance.element.root())==null?void 0:_repeating_instance$e.get_responsive_version())<1){let number_of_columns=function(){if(repeating_instance.columns!=null)return repeating_instance.columns;if(layout_style==="show_all"&&repeating_instance.children.length>0&&repeating_instance.children[0].canvas.width()>0){let canvas_width=repeating_instance.canvas.width(),cell_width=repeating_instance.children[0].canvas.width();return Math.floor(canvas_width/cell_width)||1}return element_eval.evaluate_property(repeating_instance,"columns")},top_separator_width=function(row){if(row>1){let width=repeating_instance.get_static_property("separator_width",!0),style2=repeating_instance.get_static_property("separator_style",!0);return[void 0,null,"none"].includes(style2)?0:width}else return 0},current_row=function(){return layout_style==="horizontal_scroll"?1:Math.floor((num-1)/number_of_columns())+1},get_total_rows=function(){if(layout_style==="limit_items")return element_eval.evaluate_property(repeating_instance,"rows");if(["show_all","vertical_extendable"].includes(layout_style))return Math.ceil(repeating_instance.last_cell/number_of_columns());if(layout_style==="horizontal_scroll")return 1},layout_style=repeating_instance.get_static_property("layout_style"),{num}=instance.element,rg_id=null;instance.autorun(()=>{var _rg_id,_rows_height_cache$_r;rg_id=repeating_instance.toUniqueString(),(_rows_height_cache$_r=rows_height_cache[_rg_id=rg_id])!=null||(rows_height_cache[_rg_id]={});let current_row_val=current_row();if(instance.is_visible()&&!rows_height_cache[rg_id][current_row_val]){var _rows_height_cache$rg;rows_height_cache[rg_id][current_row_val]=Math.max((_rows_height_cache$rg=rows_height_cache[rg_id][current_row_val])!=null?_rows_height_cache$rg:0,instance.get_canvas().height())}});let get_total_rg_height=()=>u.run_once(30,()=>{let number_of_rows=get_total_rows();if(!number_of_rows)return 0;let total_rg_height=0;for(let row=1;row<=number_of_rows;row++){var _rows_height_cache$rg2;let separator_height=top_separator_width(row),row_height=((_rows_height_cache$rg2=rows_height_cache[rg_id])==null?void 0:_rows_height_cache$rg2[row])||instance.element.get_height();total_rg_height+=separator_height+row_height}return total_rg_height+property_applications.calculate_border_height(repeating_instance,!0)},(err,res)=>{err&&logger.log(err),repeating_instance.set_height(res)}),_last_max_delta=null;instance.on_message("child_movement",max_delta=>(_last_max_delta=max_delta,u.WaitFor(instance.drawn_key,()=>instance.wait_for_visible(()=>{var _rg_id2,_cells_height_cache$_;let element_id=instance.element_id();(_cells_height_cache$_=cells_height_cache[_rg_id2=rg_id])!=null||(cells_height_cache[_rg_id2]={});let new_height;_last_max_delta==null?new_height=cells_height_cache[rg_id][element_id]:(new_height=instance.element.get_height()+_last_max_delta,instance.get_canvas().height(new_height),cells_height_cache[rg_id][element_id]=new_height),instance.get_canvas()[0].key=element_id;let first_item_of_rows=(current_row()-1)*number_of_columns()+1,last_item_of_rows=layout_style==="horizontal_scroll"?repeating_instance.last_cell:first_item_of_rows+number_of_columns()-1,cells_to_resize=[],max_height=new_height-top_separator_width(current_row());for(let i=first_item_of_rows;i<=last_item_of_rows;i++){var _repeating_instance$c;let div=(_repeating_instance$c=repeating_instance.children[i-1])==null?void 0:_repeating_instance$c.canvas;if(div){cells_to_resize.push(div);let height=cells_height_cache[rg_id][div[0].key];height&&height>max_height&&(max_height=height)}}for(let div of cells_to_resize)div.height(max_height);if(layout_style!=="infinite_scroll")return rows_height_cache[rg_id][current_row()]=max_height,get_total_rg_height()})))),instance.on_message("child_shown",()=>{if(layout_style!=="infinite_scroll")return get_total_rg_height()}),instance.on_resize(window_width=>{if(layout_style==="show_all")return get_total_rg_height()})}},do_show(instance,properties,options,animated){instance.canvas.show(),instance._is_visible_me=!0,instance._update_visible()},do_hide(instance,properties,options,animated){instance._is_visible_me=!1,instance._update_visible(),instance.canvas.hide()},position_canvas(to_position,instance){return instance.container.get_canvas().append(to_position)},added_to_container(){return!0},contains_group_data:!0,can_have_children(){return!0},get_children_canvas(instance){return instance.get_canvas()},get_private_messages(){return["child_movement","child_shown"]},is_input:!1,change_cursor_style_if_clickable:!1,add_an_invisible_div_on_the_top:!1,property_applications:[]})}});var require_CustomDefinitionComponent=__commonJS({"lib-browser-old/core/core_elements/components/CustomDefinitionComponent.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_symbol_description();require_es_error_cause();require_es_object_get_own_property_descriptors();require_es_weak_map();var _web=(init_web(),__toCommonJS(web_exports));require_web_dom_collections_for_each();require_es_array_iterator();require_web_dom_collections_iterator();var _solidJs=(init_solid(),__toCommonJS(solid_exports)),_server_rendering=require_server_rendering(),_lib=_interopRequireDefault(require_lib()),_container_utils=require_container_utils(),_createElement=require_createElement(),element_styles=_interopRequireWildcard(require_element_styles()),_directives=require_directives(),_properties=require_properties(),_autorun_signals=require_autorun_signals(),_font_tokens=require_font_tokens(),_element_eval=require_element_eval(),_autorun=require_autorun3(),_appquery=_interopRequireDefault(require_appquery()),logger=_interopRequireWildcard(require_logger()),_errors=require_errors();function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _tmpl$=(0,_web.template)("<div></div>",2);function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}function CustomDefinitionComponent(props){let instance=props.instance;return(0,_solidJs.createEffect)(prev=>{let toApply=props.childStyles[_server_rendering.AT_ROOT];return(0,_web.style)(document.documentElement,toApply,prev),toApply}),(()=>{let _el$=_tmpl$.cloneNode(!0);(0,_web.use)(_directives.defaultEventHandlers,_el$,()=>props.instance);let _ref$=props.ref;return typeof _ref$=="function"?(0,_web.use)(_ref$,_el$):props.ref=_el$,(0,_web.insert)(_el$,(0,_web.createComponent)(_container_utils.ChildWrapper,(0,_web.mergeProps)(props,{get children(){return props.children}}))),(0,_web.effect)(_p$=>{let _v$=props.id,_v$2=props.style,_v$3=_objectSpread(_objectSpread({},props.classList),{},{[props.containerClass]:!0,"page-element":instance.edit_mode()});return _v$!==_p$._v$&&(0,_web.setAttribute)(_el$,"id",_p$._v$=_v$),_p$._v$2=(0,_web.style)(_el$,_v$2,_p$._v$2),_p$._v$3=(0,_web.classList)(_el$,_v$3,_p$._v$3),_p$},{_v$:void 0,_v$2:void 0,_v$3:void 0}),_el$})()}module.exports=(0,_createElement.createElement)(CustomDefinitionComponent,element=>({shouldAddWrapper:element.should_add_extra_wrapper()}),(element,_ref2)=>{let{shouldAddWrapper}=_ref2;return{properties:(0,_container_utils.containerProperties)(shouldAddWrapper),styles:[new _properties.Style(instance=>{let maxWidth=element.root_max_width(),maxHeight=element.root_max_height(),styling={"min-width":"".concat(element.root_min_width(),"px"),"max-width":maxWidth!=null?"".concat(maxWidth,"px"):"","min-height":"".concat(element.root_min_height(),"px"),"max-height":maxHeight!=null?"".concat(maxHeight,"px"):""};return styling.width="".concat(_lib.default.or_throw().visual_edit.root_width(),"px"),styling},{noWaitVisible:!0,outerPositioning:!0}),element_styles.tokenStyling(),...(0,_container_utils.containerStyling)(shouldAddWrapper),...element_styles.basicStyling(element)]}})}});var require_custom_definition=__commonJS({"lib-browser-old/core/core_elements/custom_definition.js"(){"use strict";init_define_process_env();init_shim();require_es_symbol_description();require_es_error_cause();require_es_object_get_own_property_descriptors();require_es_array_includes();require_es_string_includes();require_es_array_iterator();require_web_dom_collections_iterator();require_web_dom_collections_for_each();require_es_object_entries();var u=require_u2(),logger=require_logger(),{GROUP_TYPES}=require_custom_elements(),{default_color_tokens_to_property,user_color_tokens_to_property,variable_to_token_variant,token_variant_to_properties}=require_color_tokens(),font_tokens=require_font_tokens(),colors_consts=require_colors(),{CUSTOM_PROP_IDENTIFIER}=require_custom_elements(),property_applications=require_property_applications(),element_transformer=require_element_transformer(),element_registry=require_element_registry(),element_eval=require_element_eval(),floating_groups=require_floating_groups(),groups=require_groups2(),CustomDefinitionComponent=require_CustomDefinitionComponent(),btype_ids=require_btype_ids(),{FirstLetterCapitalize}=require_b_string(),evaluate=require_evaluate(),shrink=require_shrink(),btypes=require_btypes(),Lib=require_lib(),appquery=require_appquery(),plugin=element_transformer.transform_element("Custom Element",{field_names:u.extend({element_type:{default:"Group",no_states:!0},group_type:{no_states:!0},delete_custom_definition:{no_states:!0},new_responsive:{no_states:!0},responsive_version:{no_states:!0},upgrade_responsive_version:{no_states:!0,only_edit_mode:!0},element_version:{default:0,no_states:!0},min_width:{no_states:!0,default:0,optional:!0},use_max_width:{no_states:!0},max_width:{no_states:!0,default:100,optional:!0},page_folder:{optional:!0,no_states:!0,only_edit_mode:!0}},floating_groups.floating_field_names),can_defer_drawing(){return!0},initialize(instance){},property_applications(element){return[new property_applications.ShortDimensions,new property_applications.Background,new property_applications.Border,new property_applications.BoxShadow,new property_applications.RootSizing,new property_applications.ResponsiveContainer(element),new property_applications.PaddingFields,new property_applications.Opacity]},uses_css_responsive:!0,solid_component:CustomDefinitionComponent,attach_to_body(){return!1},no_margins(){return!0},defaults:{bgcolor:"#FFFFFF",background_style:"bgcolor"},get_html(){return"<div></div>"},get_min_width(element){return 0},position_canvas(to_position,instance){if(instance.responsive_mode()){instance.container.add(instance);return}if($(".canvas").append(to_position),instance.element.get_responsive_version()<1)return to_position.css({"margin-right":"auto","margin-left":"auto",position:"relative"})},always_visible:!0,can_have_children(){return!0},add_specific_messages(messages,element){var _element$property$ent,_element$property$ent2,_element$property;let entries=(_element$property$ent=(_element$property$ent2=(_element$property=element.property("parameters")).entries)==null?void 0:_element$property$ent2.call(_element$property))!=null?_element$property$ent:[];for(let entry of entries){var _property$btype_id;let property=entry.raw(),ret_btype=(_property$btype_id=property.btype_id)!=null?_property$btype_id:property.editor_type==="Checkbox"?"boolean":"text";property.is_list&&(ret_btype=btype_ids.list_type(ret_btype)),u.extend(messages,{["".concat(CUSTOM_PROP_IDENTIFIER).concat(property.param_id)]:{description:()=>"'s "+entry.raw().param_name,section:"Properties",ret_btype,get caption(){let caption=entry.property("default_value").get_tree_display();if(property.editor_type==="Color"){var _caption,_caption$includes,_caption2,_caption2$includes;if((_caption=caption)!=null&&(_caption$includes=_caption.includes)!=null&&_caption$includes.call(_caption,colors_consts.VAR_IDENTIFIER)){let{token_set,variant}=variable_to_token_variant(caption),{rgba}=token_variant_to_properties(token_set,variant);caption=u.rgb_to_hex(rgba).code.toUpperCase()}else(_caption2=caption)!=null&&(_caption2$includes=_caption2.includes)!=null&&_caption2$includes.call(_caption2,"rgb")&&(caption=u.rgb_to_hex(caption).code.toUpperCase())}return caption},fn(a){var _ref2,_a$state;return(_ref2=(_a$state=a.state("".concat(CUSTOM_PROP_IDENTIFIER).concat(property.param_id)))!=null?_a$state:a.run_mode()?null:evaluate.evaluate(shrink.shrink_object(property.default_value),a.prop_eval_context())[0])!=null?_ref2:btypes.get(ret_btype).get_bubble_null()},filter_context(context){let parent=context.node,custom_param_name="";for(;parent!=null;){var _parent$json$parent,_parent$json$parent2;if(((_parent$json$parent=parent.json.parent())==null?void 0:_parent$json$parent.child("param_id").get())!=null&&((_parent$json$parent2=parent.json.parent())==null?void 0:_parent$json$parent2.child("param_name").get())!=null){var _parent$json$parent3;custom_param_name="param_".concat((_parent$json$parent3=parent.json.parent())==null?void 0:_parent$json$parent3.child("param_id").get());break}parent=parent.parent_expression()}return custom_param_name!=="param_".concat(property.param_id)},filter_context_new(context){return context.custom_param_name!=="param_".concat(property.param_id)}}})}},get_children_canvas(instance){return instance.get_canvas()},get_state_value(element,name){return groups.state_value_helper_for_group(element,name)},is_input:!1,contains_group_data:!0,change_cursor_style_if_clickable:!1,add_an_invisible_div_on_the_top:!1,not_draggable(){return!0}});element_registry.registered_elements.CustomDefinition=plugin}});var require_LegacyContainerComponent=__commonJS({"lib-browser-old/core/core_elements/components/LegacyContainerComponent.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_symbol_description();require_es_error_cause();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_array_iterator();require_web_dom_collections_iterator();var _web=(init_web(),__toCommonJS(web_exports)),_createElement=_interopRequireDefault(require_createElement()),_element_styles=require_element_styles(),_directives=require_directives(),_container_utils=require_container_utils(),_solidJs=(init_solid(),__toCommonJS(solid_exports)),_safe_require=_interopRequireDefault(require_safe_require());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _tmpl$=(0,_web.template)("<div></div>",2);function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}function LegacyContainerComponent(props){return(0,_solidJs.onMount)(()=>{var _props$instance$eleme,_props$instance$eleme2;return(_props$instance$eleme=(_props$instance$eleme2=props.instance.element.E).legacy_container_mount)==null?void 0:_props$instance$eleme.call(_props$instance$eleme2,props.instance)}),(()=>{let _el$=_tmpl$.cloneNode(!0);(0,_web.use)(_directives.defaultEventHandlers,_el$,()=>props.instance);let _ref$=props.ref;return typeof _ref$=="function"?(0,_web.use)(_ref$,_el$):props.ref=_el$,(0,_web.insert)(_el$,(0,_web.createComponent)(_container_utils.ChildWrapper,props)),(0,_web.effect)(_p$=>{let _v$=props.id,_v$2=props.style,_v$3=_objectSpread(_objectSpread({},props.classList),{},{[props.containerClass]:!0});return _v$!==_p$._v$&&(0,_web.setAttribute)(_el$,"id",_p$._v$=_v$),_p$._v$2=(0,_web.style)(_el$,_v$2,_p$._v$2),_p$._v$3=(0,_web.classList)(_el$,_v$3,_p$._v$3),_p$},{_v$:void 0,_v$2:void 0,_v$3:void 0}),_el$})()}module.exports=(0,_createElement.default)(LegacyContainerComponent,element=>({shouldAddWrapper:element.should_add_extra_wrapper()}),(element,_ref)=>{let{shouldAddWrapper}=_ref;return{properties:(0,_container_utils.containerProperties)(shouldAddWrapper),styles:[...(0,_container_utils.containerStyling)(shouldAddWrapper),...(0,_element_styles.placedStyling)(element)]}});_safe_require.default.safe_register("./core/core_elements/components/LegacyContainerComponent",module.exports)}});var require_all_elements=__commonJS({"lib-browser-old/server/assets/runmode/entrypoints/all_elements.js"(){"use strict";init_define_process_env();init_shim();require_element_optional_utils();require_Alert2();require_AutocompleteDropdown2();require_Button2();require_Checkbox2();require_DateInput2();require_Dropdown2();require_FileInput2();require_FloatingGroup2();require_GoogleMaps2();require_Group2();require_GroupFocus2();require_GroupWithFocus2();require_HTML2();require_Icon2();require_Image2();require_Input2();require_Link2();require_MultiLineInput2();require_Page3();require_PictureInput2();require_Popup2();require_PoweredByBubble();require_RadioButtons2();require_RepeatingGroup2();require_Shape2();require_SliderInput2();require_TableElement();require_Text2();require_VideoComponent2();require_group_item_plugin();require_custom_definition();require_LegacyContainerComponent()}});var require_graph=__commonJS({"lib-browser-old/ddg/graph.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_error_cause();require_web_dom_collections_for_each();require_es_array_includes();require_es_string_includes();require_es_array_reverse();var CycleError=class _CycleError extends Error{constructor(message){super(message),Object.setPrototypeOf(this,_CycleError.prototype)}};function Graph(serialized){let graph={addNode,removeNode,nodes,adjacent,addEdge,removeEdge,hasEdge,setEdgeWeight,getEdgeWeight,indegree,outdegree,depthFirstSearch,hasCycle,lowestCommonAncestors,topologicalSort,shortestPath,serializeForVisualization,serialize,deserialize},edges={},edgeWeights={};serialized&&deserialize(serialized);function addNode(node){return edges[node]=adjacent(node),graph}function removeNode(node){return Object.keys(edges).forEach(function(u){edges[u].forEach(function(v){v===node&&removeEdge(u,v)})}),delete edges[node],graph}function nodes(){let nodeSet={};return Object.keys(edges).forEach(function(u){nodeSet[u]=!0,edges[u].forEach(function(v){nodeSet[v]=!0})}),Object.keys(nodeSet)}function adjacent(node){return edges[node]||[]}function encodeEdge(u,v){return u+"|"+v}function setEdgeWeight(u,v,weight){return edgeWeights[encodeEdge(u,v)]=weight,graph}function getEdgeWeight(u,v){let weight=edgeWeights[encodeEdge(u,v)];return weight===void 0?1:weight}function addEdge(u,v,weight){return addNode(u),addNode(v),adjacent(u).push(v),weight!==void 0&&setEdgeWeight(u,v,weight),graph}function removeEdge(u,v){return edges[u]&&(edges[u]=adjacent(u).filter(function(_v){return _v!==v})),graph}function hasEdge(u,v){return adjacent(u).includes(v)}function indegree(node){let degree=0;function check(v){v===node&&degree++}return Object.keys(edges).forEach(function(u){edges[u].forEach(check)}),degree}function outdegree(node){return node in edges?edges[node].length:0}function depthFirstSearch(sourceNodes){let includeSourceNodes=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,errorOnCycle=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;sourceNodes||(sourceNodes=nodes()),typeof includeSourceNodes!="boolean"&&(includeSourceNodes=!0);let visited={},visiting={},nodeList=[];function DFSVisit(node){if(visiting[node]&&errorOnCycle)throw new CycleError("Cycle found");visited[node]||(visited[node]=!0,visiting[node]=!0,adjacent(node).forEach(DFSVisit),visiting[node]=!1,nodeList.push(node))}return includeSourceNodes?sourceNodes.forEach(DFSVisit):(sourceNodes.forEach(function(node){visited[node]=!0}),sourceNodes.forEach(function(node){adjacent(node).forEach(DFSVisit)})),nodeList}function hasCycle(){try{return depthFirstSearch(void 0,!0,!0),!1}catch(error){if(error instanceof CycleError)return!0;throw error}}function lowestCommonAncestors(node1,node2){let node1Ancestors=[],lcas=[];function CA1Visit(visited,node){return visited[node]?!0:(visited[node]=!0,node1Ancestors.push(node),node===node2?(lcas.push(node),!1):adjacent(node).every(node3=>CA1Visit(visited,node3)))}function CA2Visit(visited,node){visited[node]||(visited[node]=!0,node1Ancestors.indexOf(node)>=0?lcas.push(node):lcas.length===0&&adjacent(node).forEach(node3=>{CA2Visit(visited,node3)}))}return CA1Visit({},node1)&&CA2Visit({},node2),lcas}function topologicalSort(sourceNodes){let includeSourceNodes=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return depthFirstSearch(sourceNodes,includeSourceNodes,!0).reverse()}function shortestPath(source,destination){let d={},p={},q={};function initializeSingleSource(){if(nodes().forEach(function(node){d[node]=1/0}),d[source]!==1/0)throw new Error("Source node is not in the graph");if(d[destination]!==1/0)throw new Error("Destination node is not in the graph");d[source]=0}function initializePriorityQueue(){nodes().forEach(function(node){q[node]=!0})}function priorityQueueEmpty(){return Object.keys(q).length===0}function extractMin(){let min=1/0,minNode;return Object.keys(q).forEach(function(node){d[node]<min&&(min=d[node],minNode=node)}),minNode===void 0?(q={},null):(delete q[minNode],minNode)}function relax(u,v){let w=getEdgeWeight(u,v);d[v]>d[u]+w&&(d[v]=d[u]+w,p[v]=u)}function dijkstra(){for(initializeSingleSource(),initializePriorityQueue();!priorityQueueEmpty();){let u=extractMin();if(u===null)return;adjacent(u).forEach(function(v){relax(u,v)})}}function path(){let nodeList=[],weight=0,node=destination;for(;p[node];)nodeList.push(node),weight+=getEdgeWeight(p[node],node),node=p[node];if(node!==source)throw new Error("No path found");return nodeList.push(node),nodeList.reverse(),nodeList.weight=weight,nodeList}return dijkstra(),path()}function serializeForVisualization(nodeMetadata){let serialized2={nodes:nodes().map(function(id){let metadata=nodeMetadata.get(id);return{id,display:metadata?metadata.display():id,labels:metadata?metadata.labels:{},containingPropertyNodeId:metadata?metadata.containingPropertyNodeId:null}}),links:[]},getIndexOfNode=id=>{for(let i=0;i<serialized2.nodes.length;i++)if(serialized2.nodes[i].id===id)return i;return null};return serialized2.nodes.forEach(function(node){let source=node.id;adjacent(source).forEach(function(target){let sourceNodeIndex=getIndexOfNode(source),targetNodeIndex=getIndexOfNode(target);sourceNodeIndex===null||targetNodeIndex===null||serialized2.links.push({source:sourceNodeIndex,target:targetNodeIndex,weight:getEdgeWeight(source,target)})})}),serialized2}function serialize(){let serialized2={nodes:nodes().map(function(id){return{id}}),links:[]};return serialized2.nodes.forEach(function(node){let source=node.id;adjacent(source).forEach(function(target){serialized2.links.push({source,target,weight:getEdgeWeight(source,target)})})}),serialized2}function deserialize(serialized2){return serialized2.nodes.forEach(function(node){addNode(node.id)}),serialized2.links.forEach(function(link){addEdge(link.source,link.target,link.weight)}),graph}return graph}module.exports=Graph}});var require_node_types2=__commonJS({"lib-browser-old/ddg/node_types.js"(exports,module){"use strict";init_define_process_env();init_shim();var node_types={Expression:"Expression",Property:"Property"};module.exports=node_types}});var require_data_dependency_graph=__commonJS({"lib-browser-old/ddg/data_dependency_graph.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_reverse();require_web_dom_collections_for_each();require_es_json_stringify();var Graph=require_graph(),appquery=require_appquery(),apm=require_apm(),node_types=require_node_types2(),errors=require_errors(),DDG_CONSTRUCTION_TIMEOUT_MS=100,DDG_CONSTRUCTION_TIMEOUT_MESSAGE="DDG construction timed out",getExpressionId=expression=>expression.json.toUniqueString(),getPropertyId=property=>constructPropertyId(property.owner.id(),property.node_name()),constructPropertyId=(elementId,propertyName)=>"".concat(elementId,".").concat(propertyName),getExpressionDisplayName=expression=>{var _expression$display;return"".concat(expression.type(),": ").concat((_expression$display=expression.display)==null?void 0:_expression$display.call(expression))},getPropertyDisplayName=property=>"".concat(property.owner.type(),": ").concat(property.node_name()),datasourceMessageNames={get_group_data:!0,get_list_data:!0},isGetDatasourceMessage=message=>message.name()in datasourceMessageNames,getGetDatasourcePropertyId=message=>{let elementId=message.prior().get_static_property("element_id");return constructPropertyId(elementId,"data_source")},expressionAnalysis={getElementParentDependencies:expression=>{var _expression$owner,_expression$owner$par;let parentElementId=(_expression$owner=expression.owner)==null||(_expression$owner$par=_expression$owner.parent())==null?void 0:_expression$owner$par.id();return parentElementId?[constructPropertyId(parentElementId,"data_source")]:[]},getInjectedValueDependencies:expression=>{let dependency=expression.owner.property("data_source");return[getExpressionId(dependency)]},getMessageNodeDependencies:message=>message.has_args()?[getExpressionId(message.args())]:[]},getExpressionDependencies=expression=>{let dependencyNodeIds=[];switch(expression.type()){case"ElementParent":dependencyNodeIds=expressionAnalysis.getElementParentDependencies(expression);break;case"InjectedValue":dependencyNodeIds=expressionAnalysis.getInjectedValueDependencies(expression);break;case"Message":dependencyNodeIds=expressionAnalysis.getMessageNodeDependencies(expression);break}for(let childExpression of expression.properties())dependencyNodeIds.push(getExpressionId(childExpression));return dependencyNodeIds},DataDependencyGraph=class{constructor(page_id){apm.traceSpan("construct_ddg",{},()=>{let page=appquery.get_page_by_name(page_id);this.graph=new Graph,this.nodes=new Map,this.startedConstruction=Date.now(),this.generateDependencyGraph(page)})}getEvaluationOrder(){return this.graph.topologicalSort().reverse()}getDependencies(nodeId){return this.graph.adjacent(nodeId)}getNode(nodeId){return this.nodes.get(nodeId)}getNodeIds(){return this.graph.nodes()}setLabel(nodeId,labelName,labelValue){let node=this.getNode(nodeId);node&&(node.labels[labelName]=labelValue)}getLabel(nodeId,labelName){var _node$labels;let node=this.getNode(nodeId);return node?(_node$labels=node.labels)==null?void 0:_node$labels[labelName]:null}addPropertyNode(property){let nodeId=getPropertyId(property),display=()=>getPropertyDisplayName(property)||nodeId,nodeProperties={id:nodeId,topLevelExpressionId:getExpressionId(property),display,expression:property,labels:{},type:node_types.Property};return this.graph.addNode(nodeId),this.nodes.set(nodeId,nodeProperties),nodeId}addExpressionNode(expression,containingPropertyNodeId){let nodeId=getExpressionId(expression),nodeProperties={id:nodeId,display:()=>getExpressionDisplayName(expression)||nodeId,expression,labels:{},type:node_types.Expression,containingPropertyNodeId};return this.graph.addNode(nodeId),this.nodes.set(nodeId,nodeProperties),nodeId}addDependency(nodeId,dependencyNodeId){this.graph.addEdge(nodeId,dependencyNodeId)}addDependencies(nodeId,dependencyNodeIds){dependencyNodeIds.forEach(dependencyNodeId=>this.addDependency(nodeId,dependencyNodeId))}analyzeElement(element){if(Date.now()-this.startedConstruction>DDG_CONSTRUCTION_TIMEOUT_MS)throw new errors.ExpectedError(DDG_CONSTRUCTION_TIMEOUT_MESSAGE);for(let property of element.properties())this.analyzeProperty(property);for(let childElement of element.elements())this.analyzeElement(childElement)}analyzeMessageNode(expression,previousNodeId,containingPropertyNodeId){let nodeId=this.analyzeExpression(expression);this.addDependency(nodeId,previousNodeId),expression.has_args()&&this.analyzeExpression(expression.args(),containingPropertyNodeId),isGetDatasourceMessage(expression)&&this.addDependency(nodeId,getGetDatasourcePropertyId(expression))}analyzeProperty(property){let nodeId=this.addPropertyNode(property),expressionNodeId=this.analyzeExpression(property,nodeId);return this.addDependency(nodeId,expressionNodeId),nodeId}analyzeExpression(expression,containingPropertyNodeId){let nodeId=this.addExpressionNode(expression,containingPropertyNodeId),dependencyNodeIds=getExpressionDependencies(expression);this.addDependencies(nodeId,dependencyNodeIds),expression.has_next()&&!expression.next().is_empty()&&this.analyzeMessageNode(expression.next(),nodeId,containingPropertyNodeId);for(let childExpression of expression.properties())this.analyzeExpression(childExpression,containingPropertyNodeId);return nodeId}generateDependencyGraph(page){for(let childElement of page.elements())this.analyzeElement(childElement)}printDependencyGraph(){let serializedGraph=this.graph.serializeForVisualization(this.nodes);console.log("Paste the following into the visualization tool here: https://data-dag-viz.bubbleapps.io/display-graph"),console.log(JSON.stringify(serializedGraph))}};module.exports=DataDependencyGraph}});var require_ddg_utils=__commonJS({"lib-browser-old/ddg/ddg_utils.js"(exports){"use strict";init_define_process_env();init_shim();var ddg_utils=exports,dataFetchExpressionTypes={Search:!0,GetDataFromAPI:!0,CurrentPageItem:!0,CurrentUser:!0};ddg_utils.isDataFetchExpression=expression=>expression.type()in dataFetchExpressionTypes;var elementReferenceExpressionTypes={ElementParent:!0,GetElement:!0};ddg_utils.isElementReferenceExpression=expression=>expression.type()in elementReferenceExpressionTypes}});var require_slug=__commonJS({"lib-browser-old/shared/slug.js"(exports){"use strict";init_define_process_env();init_shim();require_es_regexp_exec();require_es_string_match();var _templateObject;function _taggedTemplateLiteral(strings,raw){return raw||(raw=strings.slice(0)),Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}var Lib=require_lib(),autorun=require_autorun3(),url_data=require_url_data(),btypes=require_btypes(),uuid=require_uuid(),{re}=require_regexUtilities(),slug=exports;slug.MAX_SLUG_LENGTH=250;var looks_like_id=re(_templateObject||(_templateObject=_taggedTemplateLiteral(["^(.*-)?","$"])),uuid.uuid_regexp);slug.bad_slug_formatting_message=function(slug_value){if(slug_value.length>slug.MAX_SLUG_LENGTH)return"The slug value that you have entered contains more than ".concat(slug.MAX_SLUG_LENGTH," characters. A slug should have less than ").concat(slug.MAX_SLUG_LENGTH," characters.");if(slug_value.match(looks_like_id))return"The slug value that you have entered is not correctly formatted. A slug can't end with a Thing's unique ID.";let canonical_slug_value=url_data.make_URL_friendly_string(slug_value,slug.MAX_SLUG_LENGTH);return slug_value!==canonical_slug_value?"The slug value that you have entered is not correctly formatted. A slug should be composed of only lowercase letters, digits, or hyphens.":null};slug.format_correctly=function(slug_value){return slug_value=url_data.make_URL_friendly_string(slug_value,slug.MAX_SLUG_LENGTH),slug_value.length>slug.MAX_SLUG_LENGTH&&(slug_value=slug_value.substring(0,slug.MAX_SLUG_LENGTH)),slug_value};slug.get_thing_from_slug=function(_ref){let{appname,app_version,type,slug_value,ignore_privacy_rules}=_ref;return type==null||slug_value==null?null:Lib.extend({appname,app_version,ignore_privacy_rules},()=>{var _value$custom_type,_found_thing_with_slu;let value=btypes.get(type);if(!(value!=null&&(_value$custom_type=value.custom_type())!=null&&_value$custom_type.exists()))return null;let found_thing_with_slug=Lib().db_instance().find(type,[{key:"Slug",constraint_type:"equals",value:slug_value}]).get_children(0,1);return(_found_thing_with_slu=found_thing_with_slug==null?void 0:found_thing_with_slug[0])!=null?_found_thing_with_slu:null})};slug.get_thing_id_from_slug=function(_ref2){let{appname,app_version,type,slug_value,ignore_privacy_rules}=_ref2,found_thing_with_slug=slug.get_thing_from_slug({appname,app_version,type,slug_value,ignore_privacy_rules});if(found_thing_with_slug!=null)return found_thing_with_slug.id;let sample=btypes.get(type).get_sample();return slug_value===(sample==null?void 0:sample.child("Slug").get())?sample._id():null};slug.is_slug_unique=function(_ref3){let{appname,app_version,type,slug_value,thing,ignore_privacy_rules}=_ref3;if(slug_value==null||slug_value==="")return!0;let thing_id_from_slug=slug.get_thing_id_from_slug({appname,app_version,type,slug_value,ignore_privacy_rules});return thing_id_from_slug!=null?(thing==null?void 0:thing._id())===thing_id_from_slug:!0};slug.is_slug_valid=function(appname,app_version,type,slug_value,thing){return slug_value==null||slug_value===""?!0:slug.bad_slug_formatting_message(slug_value)!=null?!1:slug.is_slug_unique({appname,app_version,type,slug_value,thing})};slug.create_slug_watcher=function(){let page_thing_watcher=autorun.Watcher(()=>Lib().pageparam.get()),watching_id=null,slug_watcher=null;page_thing_watcher.on_value(thing=>{var _slug_watcher;(_slug_watcher=slug_watcher)==null||_slug_watcher.destroy(),thing!=null&&Lib().location.get_slug_in_url()!=null?(watching_id=thing.id,slug_watcher=autorun.Watcher(()=>thing.child("Slug").get()),slug_watcher.on_value(slug_value=>{let new_identifier;if(watching_id!==thing.id)return;if(slug_value!=null&&slug_value!=="")new_identifier=slug_value;else{var _slug_watcher2;let page_name=Lib().location.get_underlying_page(),page=Lib().app().get_page_by_name(page_name);new_identifier=url_data.get_data_to_send(thing,page.get_static_property("readable_field")),(_slug_watcher2=slug_watcher)==null||_slug_watcher2.destroy(),watching_id=null,slug_watcher=null}let pieces=Lib().location.get_pieces();if(pieces.path[1]!==new_identifier){pieces.path[1]=new_identifier;let new_url=Lib().location.format_pieces(pieces);Lib().location.set_url_without_refresh({url:new_url})}})):(watching_id=null,slug_watcher=null)})}}});var require_page_thing_utils=__commonJS({"lib-browser-old/page_thing_utils.js"(exports){"use strict";init_define_process_env();init_shim();var Lib=require_lib(),slug=require_slug(),page_thing_utils=exports;page_thing_utils.get_page_thing_id=location2=>{var _location$get_query;let unique_id=location2.get_unique_id_in_url();if(unique_id!=null)return unique_id;let slug_id=page_thing_utils.get_unique_id_from_slug_in_url(location2);if(slug_id!=null)return slug_id;let{path}=location2.get_pieces();return path&&path[1]!=null?path[1]:(_location$get_query=location2.get_query())==null?void 0:_location$get_query.id};page_thing_utils.page_has_a_thing=location2=>location2.get_unique_id_in_url()!=null||location2.get_slug_in_url()!=null;page_thing_utils.get_unique_id_from_slug_in_url=location2=>{let possible_slug=location2.get_slug_in_url();if(possible_slug!=null){var _Lib$app$get_page_by_,_slug$get_thing_id_fr;let type=(_Lib$app$get_page_by_=Lib().app().get_page_by_name(location2.get_underlying_page()))==null?void 0:_Lib$app$get_page_by_.get_static_property("page_item_type");return(_slug$get_thing_id_fr=slug.get_thing_id_from_slug({appname:Lib().appname(),app_version:Lib().app_version(),type,slug_value:possible_slug}))!=null?_slug$get_thing_id_fr:null}return null};page_thing_utils.get_page_thing=location2=>Lib().db_instance().get(page_thing_utils.get_page_thing_id(location2))}});var require_ddg_optimizations=__commonJS({"lib-browser-old/ddg/ddg_optimizations.js"(exports){"use strict";init_define_process_env();init_shim();require_es_symbol_description();require_es_error_cause();require_es_object_get_own_property_descriptors();require_es_array_iterator();require_web_dom_collections_iterator();require_web_dom_collections_for_each();function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var evaluate=require_evaluate(),eval_node_state=require_eval_node_state(),epoch=require_epoch2(),Lib=require_lib(),ddg_utils=require_ddg_utils(),logger=require_logger(),node_types=require_node_types2(),ListWrapper=require_ListWrapper(),apm=require_apm(),errors=require_errors(),page_thing_utils=require_page_thing_utils(),ddg_optimizations=exports,PREFETCH_SAMPLE_RATE=.01,PREFETCH_TIMEOUT_MS=100,PREFETCH_TIMEOUT_MESSAGE="Prefetch timed out",metrics={prefetch_attempted_nodes:0,prefetch_definite_successes:0,prefetch_possible_successes:0,prefetch_definite_failures:0,prefetchable_lists:0,prefetched_lists:0},checkTimeout=startedPrefetching=>{if(Date.now()-startedPrefetching>PREFETCH_TIMEOUT_MS)throw new errors.ExpectedError(PREFETCH_TIMEOUT_MESSAGE)},isEvaluableNode=node=>node.type===node_types.Property?!0:!ddg_utils.isElementReferenceExpression(node.expression),labelEvaluableNodes=ddg=>{let nodeIds=ddg.getNodeIds();for(let nodeId of nodeIds){let node=ddg.getNode(nodeId);node&&ddg.setLabel(nodeId,"isEvaluable",isEvaluableNode(node))}},isDataFetchNode=node=>node.type===node_types.Property?!1:!!ddg_utils.isDataFetchExpression(node.expression),labelDataFetchNodes=ddg=>{let nodeIds=ddg.getNodeIds();for(let nodeId of nodeIds){let node=ddg.getNode(nodeId);node&&ddg.setLabel(nodeId,"isDataFetch",isDataFetchNode(node))}},labelDemands=ddg=>{let nodeIds=ddg.getNodeIds();for(let nodeId of nodeIds){let node=ddg.getNode(nodeId);if(node&&node.type===node_types.Property&&node.expression.node_name()==="data_source"){let element=node.expression.owner;if(element.type()==="RepeatingGroup"&&element.get_static_property("layout_style")==="limit_items"){let length=element.get_static_property("rows",!0)*element.get_static_property("columns",!0);ddg.setLabel(nodeId,"listLengthDemand",length);let topLevelExpressionNodeId=node.topLevelExpressionId;ddg.setLabel(topLevelExpressionNodeId,"listLengthDemand",length)}}}},labelPrefetchableNodes=ddg=>{let nodeIds=ddg.getEvaluationOrder();for(let nodeId of nodeIds){let isCurrentNodePrefetchable=!0;ddg.getLabel(nodeId,"isEvaluable")===!1?isCurrentNodePrefetchable=!1:isCurrentNodePrefetchable=ddg.getDependencies(nodeId).every(dependencyNodeId=>ddg.getLabel(dependencyNodeId,"isPrefetchable")),ddg.setLabel(nodeId,"isPrefetchable",isCurrentNodePrefetchable)}},buildEvaluationContext=()=>{let page_item_id=page_thing_utils.get_page_thing_id(Lib().location);return{datasources:{current_user:()=>Lib().current_user(),current_page_item(){if(page_item_id)return Lib().db_instance().get(page_item_id)}}}},getEvalNode=(ddg,node)=>{let containingPropertyNode=ddg.getNode(node.containingPropertyNodeId);return containingPropertyNode==null?void 0:containingPropertyNode.expression},prefetch=(ddg,node,evaluationContext,debugMode)=>{let expression=node.expression;metrics.prefetch_attempted_nodes++;let eval_error,previous_queued_fetches=Lib().db_instance().get_all_time_queued_fetches(),eval_node=getEvalNode(ddg,node);try{let[result]=eval_node_state.with_eval_node(eval_node,()=>evaluate.evaluate_json(expression.json,evaluationContext));if(result instanceof ListWrapper){metrics.prefetchable_lists++;let listLengthDemand=ddg.getLabel(node.id,"listLengthDemand");listLengthDemand&&(metrics.prefetched_lists++,result.get_children(0,listLengthDemand))}}catch(e){eval_error=e}Lib().db_instance().get_all_time_queued_fetches()>previous_queued_fetches?metrics.prefetch_definite_successes++:eval_error&&!(eval_error instanceof errors.NotReadyError)?(metrics.prefetch_definite_failures++,logger.info("Prefetch evaluation threw unexpected error",{eval_error}),debugMode&&logger.info("Prefetch definite failure",{node})):(metrics.prefetch_possible_successes++,debugMode&&logger.info("Prefetch possible success",{node}))},shouldPrefetch=(ddg,node)=>isDataFetchNode(node)&&ddg.getLabel(node.id,"isPrefetchable"),startPrefetching=(ddg,debugMode)=>apm.traceSpan("startPrefetching",{},()=>{let startedPrefetching=Date.now(),evaluationContext=buildEvaluationContext();labelEvaluableNodes(ddg),checkTimeout(startedPrefetching),debugMode&&labelDataFetchNodes(ddg),labelDemands(ddg),checkTimeout(startedPrefetching),labelPrefetchableNodes(ddg),checkTimeout(startedPrefetching),ddg.getEvaluationOrder().map(nodeId=>ddg.getNode(nodeId)).filter(node=>node!==void 0).filter(node=>shouldPrefetch(ddg,node)).forEach(node=>{checkTimeout(startedPrefetching),prefetch(ddg,node,evaluationContext,debugMode)}),Lib().db_instance().prefetch_queued_fetches()});ddg_optimizations.prefetchData=()=>apm.traceSpan("prefetchData",{},()=>{let epochLabels={},prefetch_status=null;try{let debugMode=Lib().location.get_query().prefetch==="true";if(debugMode||Math.random()<PREFETCH_SAMPLE_RATE){prefetch_status="PREFETCHING_SUCCESS";let current_page_ddg=Lib().ddg();if(current_page_ddg)try{startPrefetching(current_page_ddg,debugMode)}catch(e){if(e.message===PREFETCH_TIMEOUT_MESSAGE)prefetch_status="PREFETCHING_TIMED_OUT";else throw e}else prefetch_status="DDG_GENERATION_FAILED";let prefetched_request_counts=Lib().db_instance().get_prefetched_request_counts();epochLabels=_objectSpread(_objectSpread({},metrics),{},{prefetch_msearch_request_count:prefetched_request_counts.msearch,prefetch_mget_request_count:prefetched_request_counts.mget,prefetch_maggregate_request_count:prefetched_request_counts.maggregate}),debugMode&&logger.info("Prefetch metrics",epochLabels)}}catch(e){logger.info("Unexpected error in DDG prefetch",{e}),prefetch_status="PREFETCHING_ERROR"}epochLabels.experiment_flag=prefetch_status,epoch.addEpochLabels(epochLabels)})}});var require_ddg=__commonJS({"lib-browser-old/ddg/index.js"(exports){"use strict";init_define_process_env();init_shim();var DataDependencyGraph=require_data_dependency_graph(),ddg_optimizations=require_ddg_optimizations(),logger=require_logger(),ddg=exports;ddg.instance=page_id=>{let current_page_ddg;return()=>{if(current_page_ddg===void 0)try{current_page_ddg=new DataDependencyGraph(page_id)}catch(e){current_page_ddg=null,e.message==="DDG construction timed out"?logger.debug("DDG construction timed out"):logger.info("Unexpected error while constructing DDG",{e})}return current_page_ddg}};ddg.DataDependencyGraph=DataDependencyGraph;ddg.optimizations=ddg_optimizations}});var require_lib_factory=__commonJS({"lib-browser-old/lib/lib_factory.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.getLibFactory=getLibFactory;exports.getNamedLib=getNamedLib;require_es_array_iterator();require_web_dom_collections_iterator();require_es_error_cause();var LibFactory=class{constructor(){this._libCreators=new Map,this._libExtenders=new Map}registerLibCreator(libName,libCreator,libExtender){this._libCreators.set(libName,libCreator),libExtender&&this.registerLibExtender(libName,libExtender)}registerLibExtender(libName,libExtender){this._libExtenders.set(libName,libExtender)}_unpackAppname(libParams){if(libParams&&libParams.appname!=null&&typeof libParams.appname=="object"){let{appname,app_version,temp_db}=libParams.appname;libParams.appname=appname,libParams.app_version=app_version,libParams.temp_db=temp_db}return libParams}getLib(libName,libParams){let libCreator=this._libCreators.get(libName);if(libCreator)return libParams=this._unpackAppname(libParams),libCreator(libParams);throw new Error("No lib creator registered for ".concat(libName))}getPartialLib(libName,libParams){let libExtender=this._libExtenders.get(libName);if(libExtender)return libParams=this._unpackAppname(libParams),libExtender(libParams);throw new Error("No lib extender registered for ".concat(libName))}libCaller(params){return"wither"in params?params.wither(this.getLib(params.libName,params.libParams),params.fn):params.extender(this.getPartialLib(params.libName,params.libParams),params.fn)}},libFactory;function getLibFactory(){var _libFactory;return(_libFactory=libFactory)!=null||(libFactory=new LibFactory),libFactory}function getNamedLib(libName,libParams){return getLibFactory().getLib(libName,libParams)}}});var require_LibContext=__commonJS({"lib-browser-old/ctx/LibContext.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _lib=_interopRequireDefault(require_lib()),_lib_factory=require_lib_factory();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var LibContext=class{constructor(_libName){this._libName=_libName}get(){return(0,_lib_factory.getLibFactory)().getLib(this._libName)}with(libParamsOrFn,fn){return(0,_lib_factory.getLibFactory)().libCaller({libName:this._libName,libParams:fn?libParamsOrFn:void 0,fn:fn!=null?fn:libParamsOrFn,wither:_lib.default.with_lib})}extend(libParamsOrFn,fn){return(0,_lib_factory.getLibFactory)().libCaller({libName:this._libName,libParams:fn?libParamsOrFn:void 0,fn:fn!=null?fn:libParamsOrFn,extender:_lib.default.extend})}ensure(libParamsOrFn,fn){return(0,_lib.default)()?(0,_lib_factory.getLibFactory)().libCaller({libName:this._libName,libParams:fn?libParamsOrFn:void 0,fn:fn!=null?fn:libParamsOrFn,extender:_lib.default.extend}):(0,_lib_factory.getLibFactory)().libCaller({libName:this._libName,libParams:fn?libParamsOrFn:void 0,fn:fn!=null?fn:libParamsOrFn,wither:_lib.default.with_lib})}};exports.default=LibContext}});var require_DefaultLib=__commonJS({"lib-browser-old/ctx/DefaultLib.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.DefaultLib=void 0;var _LibContext=_interopRequireDefault(require_LibContext());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DefaultLib=new _LibContext.default("default");exports.DefaultLib=DefaultLib}});var require_services=__commonJS({"lib-browser-old/services/index.js"(exports){"use strict";init_define_process_env();init_shim();require_es_json_stringify();require_es_array_iterator();require_web_dom_collections_iterator();var u=require_u2(),appquery=require_appquery(),plugin_consts=require_plugin(),logger=require_logger(),lodashIsEqual=require_isEqual(),service_type_parser=require_service_type_parser(),plugin_getter=require_plugin_getter(),safe_require=require_safe_require(),services=exports;safe_require.safe_register("./services",services);var b_fiber;u.on_server()&&(b_fiber=__require("../u/shared/async/b_fiber"));var plugin_elements_logged={};function plugin_data_id(plugin_data){return JSON.stringify(plugin_data)}services.log_plugin_element_init=function(plugin_data){let key=plugin_data_id(plugin_data);plugin_elements_logged[key]||(logger.verbose("plugin initialized",plugin_data),plugin_elements_logged[key]=!0)};services.get_oauth_authenticator=function(oauth_provider){if(!oauth_provider)return null;if(oauth_provider.indexOf(plugin_consts.PLUGIN_SEPARATOR)===-1){var _plugin_getter$get_pl;return(_plugin_getter$get_pl=plugin_getter.get_plugin(oauth_provider))==null?void 0:_plugin_getter$get_pl.get_authenticator()}else{var _plugin_getter$get_pl2;let[plugin_name,type]=service_type_parser.get_plugin_and_type(oauth_provider,"oauth");return(_plugin_getter$get_pl2=plugin_getter.get_plugin(plugin_name))==null?void 0:_plugin_getter$get_pl2.get_authenticator(type,"oauth")}};services.get_api_calls=u.autorun_cache(()=>{let res={};for(let plugin_id of appquery.list_plugins()){let service=plugin_getter.get_plugin(plugin_id),public_calls=service==null?void 0:service.get_public_calls();for(let call_name of public_calls!=null?public_calls:[]){let name=plugin_id+"."+call_name,call=service.get_call(call_name);call?res[name]=call:logger.error("could not find call",{name})}}return res});services.get_api_calls_ids=u.autorun_cache({fn(){return new Set(Object.keys(services.get_api_calls()))},compare_fn:lodashIsEqual});services.get_user_calls=function(){var _b_fiber,_b_fiber3;let res={};(_b_fiber=b_fiber)==null||_b_fiber.optional_pause();for(let id of appquery.get_user_calls()){var _b_fiber2;(_b_fiber2=b_fiber)==null||_b_fiber2.optional_pause();let[plugin_id,call_name]=service_type_parser.get_plugin_and_type(id),plugin=plugin_getter.get_plugin(plugin_id);if(plugin==null)continue;let call=plugin==null?void 0:plugin.get_call(call_name);call&&(res[call_name]=call)}return(_b_fiber3=b_fiber)==null||_b_fiber3.optional_pause(),res};services.get_value_ids=u.autorun_cache(()=>{let res=[];for(let plugin_id of appquery.list_plugins()){let service=plugin_getter.get_plugin(plugin_id);if(service){let public_values=service.get_public_values();if(public_values.length>0){let values=service.get_values();for(let value_name of public_values)res.push(values[value_name].full_name)}}}return res});services._last_date_generated=null}});var require_oauth=__commonJS({"lib-browser-old/client/oauth.js"(exports){"use strict";init_define_process_env();init_shim();require_es_regexp_exec();require_es_string_replace();require_es_string_search();require_es_array_iterator();require_web_dom_collections_iterator();var u=require_u2(),logger=require_logger(),workflow_consts=require_workflow(),{ignoreError}=require_callbacks(),Lib=require_lib(),services=require_services(),appquery=require_appquery(),url=require_url(),core_events=require_core_events(),_status_messages={invalid:"Invalid login link.",user:"User attempting to login does not exist.",expired:"This link is expired or has already been used. Please request another.",robot:"Incompatible browser."};function valid_oauth2_state(state){if(!state)return!1;try{return u.json_parse(state).oauth_provider}catch(err){return!1}}function valid_magic_link_state(state){if(!state)return!1;try{return u.json_parse(state).magic_link_status}catch(err){return!1}}exports.onload=function(cb){var _query$state;let parsed_url=url.parse(document.location.href,!0),{query}=parsed_url,original_query=u.json_deep_copy(query);if((_query$state=query.state)!=null&&_query$state.replace){let regex=/&#34;/g;query.state=query.state.replace(regex,'"')}query.state=decodeURIComponent(query.state);let data,run_id;if(query.oauth_provider)data=u.json_deep_copy(query),{run_id}=data,delete query.oauth_provider,delete query.run_id;else if(valid_oauth2_state(query.state)){var _data,_data$code;data=u.json_parse(query.state),(_data$code=(_data=data).code)!=null||(_data.code=query.code),delete query.state}else if(valid_magic_link_state(query.state)){var _status_messages$data;data=u.json_parse(query.state),delete query.state,delete parsed_url.search,Lib().location.set_url_without_refresh({url:url.format(parsed_url)});let alert_message=(_status_messages$data=_status_messages[data.magic_link_status])!=null?_status_messages$data:"Invalid login link.";core_events.handle_uncaught_error({original_error:new u.OwnerError(alert_message),caught_from:workflow_consts.ERROR_SOURCES.ELEMENT_WORKFLOW,cb(err){err&&window.alert(alert_message)}}),cb==null||cb();return}else{cb==null||cb();return}let authenticator=services.get_oauth_authenticator(data.oauth_provider);if(authenticator==null){window.alert(Lib().get_text("CORE","OAUTH_ISSUE")),cb==null||cb();return}for(let key of(_authenticator$get_pr=authenticator.get_property("additional_query_url_to_delete"))!=null?_authenticator$get_pr:[]){var _authenticator$get_pr;delete query[key]}delete query.code,delete query.resume_key,delete parsed_url.search,delete parsed_url.hash,Lib().location.set_url_without_refresh({url:url.format(parsed_url)});let resume_key=run_id||data.resume_key;if(!data.code&&!data.oauth_token){logger.error("oauth login failed",{service_name:authenticator.id(),original_query});let error_message=Lib().get_text("CORE","OAUTH_ISSUE")+authenticator.id()+". "+Lib().get_text("CORE","TRY_AGAIN"),error=new u.OwnerError(error_message);core_events.handle_uncaught_error({original_error:error,caught_from:workflow_consts.ERROR_SOURCES.ELEMENT_WORKFLOW,cb(err){err&&window.alert(logger.human_friendly(err))}}),cb==null||cb();return}let data_for_login=authenticator.get_data_for_login(data);Lib().workflow.resume(resume_key,data_for_login).callback(err=>{if(err&&core_events.handle_uncaught_error({original_error:err,caught_from:workflow_consts.ERROR_SOURCES.ELEMENT_WORKFLOW,cb(err2){err2&&window.alert(logger.human_friendly(err2))}}),cb==null||cb(),!err&&data.oauth_provider.indexOf("apiconnector")===0&&u.is_debug_mode()&&appquery.app_version()!=="live"&&!authenticator.has_token_data()){let data_to_send_for_api_connector={api_id:data.oauth_provider,current_user_id:Lib().current_user()._id(),appname:appquery.appname(),plugin:data.oauth_provider.indexOf("apiconnector2")===0?"apiconnector2":"apiconnector"};Lib().location.post("server://api/1.1/u/save_owner_oauth_token",data_to_send_for_api_connector).callback(ignoreError(res=>{res===!0&&window.alert("You have successfully initialized the OAuth2 connection for ".concat(authenticator.display(),". You can go back to the Editor and keep building!"))}))}})}}});var require_page_load=__commonJS({"lib-browser-old/client/metrics/page_load.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.can_use=can_use;exports.fully_loaded=fully_loaded;exports.render_end=render_end;exports.render_start=render_start;require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_includes();require_es_string_includes();var epoch=_interopRequireWildcard(require_epoch2()),epoch_consts=_interopRequireWildcard(require_epoch()),db=_interopRequireWildcard(require_db2());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function can_use(){var _window$performance;return((_window$performance=window.performance)==null?void 0:_window$performance.timing)!=null&&window._bubble_page_load_data!=null}var render_start_timestamp,render_span;function render_start(epoch_name){if(render_start_timestamp=Date.now(),epoch_name){epoch.start(epoch_name);let span_details=epoch_consts.SPANS.render;render_span=epoch.startSpan(span_details.name,span_details.type,span_details.sync)}}var render_end_timestamp;function render_end(){epoch.endSpan(render_span),render_end_timestamp=Date.now()}var fully_loaded_timestamp;function fully_loaded(){fully_loaded_timestamp=Date.now(),epoch.end();let page_data=db.global_data_items_loaded;if(!can_use())return;let start_time=window.performance.timing.fetchStart,page_html=window.performance.timing.responseEnd-start_time,page_render_start=render_start_timestamp-start_time,page_render=render_end_timestamp-start_time,page_full=fully_loaded_timestamp-start_time,{pre_run_js,run_js_start,post_run_js,static_js_start,dynamic_js_start,pre_static_js,pre_dynamic_js}=window._bubble_page_load_data,run_js_perf,run_js_page_perf,packager_size,run_js_size;for(let entry of(_window$performance$g=(_window$performance$g2=(_window$performance2=window.performance).getEntriesByType)==null?void 0:_window$performance$g2.call(_window$performance2,"resource"))!=null?_window$performance$g:[]){var _window$performance$g,_window$performance$g2,_window$performance2;let performanceResourceTiming=entry;if(performanceResourceTiming.name.includes("/package/run_js/")?(run_js_perf=performanceResourceTiming,run_js_size=run_js_perf.encodedBodySize):performanceResourceTiming.name.includes("/package/run_js_page/")&&(run_js_page_perf=performanceResourceTiming),performanceResourceTiming.name.includes("/package/run_js/")){var _packager_size;(_packager_size=packager_size)!=null||(packager_size=0),packager_size+=performanceResourceTiming.encodedBodySize}}let total=page_full,to_percent=x=>Math.round(x*1e3/total)/10;function add_request_info(breakdown,start,perf_object){if(typeof performance.now!="function"||perf_object==null)return;let start_timestamp=start-window.performance.timing.fetchStart,request=Math.max(0,perf_object.responseStart-start_timestamp),download=Math.max(0,perf_object.responseEnd-Math.max(start_timestamp,perf_object.responseStart));breakdown.request=to_percent(request),breakdown.download=to_percent(download)}let run_js_dl_total=run_js_start-pre_run_js,runjs_download_and_parse={total:to_percent(run_js_dl_total)};add_request_info(runjs_download_and_parse,pre_run_js,run_js_perf);let static_js_dl_total=static_js_start-pre_static_js,dynamic_js_dl_total=dynamic_js_start-pre_dynamic_js,staticjs_download_and_parse={total:to_percent(static_js_dl_total)},dynamicjs_download_and_parse={total:to_percent(dynamic_js_dl_total)};add_request_info(staticjs_download_and_parse,post_run_js,run_js_page_perf),add_request_info(dynamicjs_download_and_parse,post_run_js,run_js_page_perf);let measures={page_data,page_html,page_render_start,page_render,page_full};return packager_size!=null&&(measures.packager_size=packager_size),run_js_size!=null&&(measures.run_js_size=run_js_size),measures}}});var require_pad_string=__commonJS({"node_modules/base64url/dist/pad-string.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});function padString(input){var segmentLength=4,stringLength=input.length,diff=stringLength%segmentLength;if(!diff)return input;var position=stringLength,padLength=segmentLength-diff,paddedStringLength=stringLength+padLength,buffer=import_buffer.Buffer.alloc(paddedStringLength);for(buffer.write(input);padLength--;)buffer.write("=",position++);return buffer.toString()}exports.default=padString}});var require_base64url=__commonJS({"node_modules/base64url/dist/base64url.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});var pad_string_1=require_pad_string();function encode(input,encoding){return encoding===void 0&&(encoding="utf8"),import_buffer.Buffer.isBuffer(input)?fromBase64(input.toString("base64")):fromBase64(import_buffer.Buffer.from(input,encoding).toString("base64"))}function decode(base64url2,encoding){return encoding===void 0&&(encoding="utf8"),import_buffer.Buffer.from(toBase64(base64url2),"base64").toString(encoding)}function toBase64(base64url2){return base64url2=base64url2.toString(),pad_string_1.default(base64url2).replace(/\-/g,"+").replace(/_/g,"/")}function fromBase64(base64){return base64.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function toBuffer(base64url2){return import_buffer.Buffer.from(toBase64(base64url2),"base64")}var base64url=encode;base64url.encode=encode;base64url.decode=decode;base64url.toBase64=toBase64;base64url.fromBase64=fromBase64;base64url.toBuffer=toBuffer;exports.default=base64url}});var require_base64url2=__commonJS({"node_modules/base64url/index.js"(exports,module){init_define_process_env();init_shim();module.exports=require_base64url().default;module.exports.default=module.exports}});var require_APIValue=__commonJS({"lib-browser-old/external/APIValue.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_symbol_description();require_es_error_cause();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_array_iterator();require_web_dom_collections_iterator();require_es_object_entries();require_es_array_includes();function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var Lib=require_lib(),mode_check=require_mode_check(),logger=require_logger(),b_async=require_b_async3(),dependency=require_dependency3(),eval_node_state=require_eval_node_state(),ExternalValue=require_ExternalValue(),DEFAULT_APIVALUE_CACHE_TIME=2*60*1e3,_api_value_data={},_api_value_expires={},_api_value_cleanup_scheduled=!1,_api_value_dependency={},_api_value_full_switches={};function does_x_contain_y(x,y){for(let k in y){let y_v=y[k],x_v=x[k];if(x_v&&y_v&&typeof x_v=="function"&&typeof y_v=="function"){if(!does_x_contain_y(x_v,y_v))return!1}else if(x_v!==y_v)return!1}return!0}function _init_switch(key){var _api_value_full_switc,_api_value_full_switc2;return(_api_value_full_switc2=(_api_value_full_switc=_api_value_full_switches)[key])!=null?_api_value_full_switc2:_api_value_full_switc[key]=b_async.MakeSwitch(null,"api data loaded for "+key)}function api_value_set(full_name,uid,data,expires){var _api_value_dependency2;if(data.partial){let current=api_value_get(full_name,uid);if(current&&!current.partial&&!current.err&&does_x_contain_y(current.data,data.data))return}let key=full_name+"_"+uid;_api_value_expires[key]=expires,_api_value_data[key]=data,(_api_value_dependency2=_api_value_dependency[key])==null||_api_value_dependency2.invalidate(),_init_switch(key),data.partial?_api_value_full_switches[key].turn_off():_api_value_full_switches[key].turn_on(),mode_check.on_server()&&(_api_value_cleanup_scheduled||(_api_value_cleanup_scheduled=!0,setTimeout(api_value_cleanup,DEFAULT_APIVALUE_CACHE_TIME)))}function api_value_ensure_full(full_name,uid){api_value_get(full_name,uid);let key=full_name+"_"+uid;return _init_switch(key),b_async.ensure_ready(_api_value_full_switches[key])}function api_value_get_key(full_name,uid){let key=full_name+"_"+uid;return _init_switch(key),_api_value_full_switches[key]}function api_value_clear(full_name,uid){var _api_value_dependency3,_api_value_full_switc3;let key=full_name+"_"+uid;_api_value_data[key]=null,(_api_value_dependency3=_api_value_dependency[key])==null||_api_value_dependency3.invalidate(),(_api_value_full_switc3=_api_value_full_switches[key])==null||_api_value_full_switc3.turn_off()}function api_value_cleanup(){_api_value_cleanup_scheduled=!1;let now=Date.now(),preserved_data={},preserved_expires={},preserved_dependency={},preserved_switches={};for(let[key,expires]of Object.entries(_api_value_expires))if(now<expires)preserved_expires[key]=expires,preserved_data[key]=_api_value_data[key],preserved_dependency[key]=_api_value_dependency[key],preserved_switches[key]=_api_value_full_switches[key];else{var _api_value_dependency4,_api_value_full_switc4;(_api_value_dependency4=_api_value_dependency[key])==null||_api_value_dependency4.invalidate(),(_api_value_full_switc4=_api_value_full_switches[key])==null||_api_value_full_switc4.turn_on()}_api_value_data=preserved_data,_api_value_expires=preserved_expires,_api_value_dependency=preserved_dependency,_api_value_full_switches=preserved_switches}function api_value_get(full_name,uid){var _api_value_dependency5,_api_value_dependency6;let key=full_name+"_"+uid,val=_api_value_data[key];if(val!=null&&Date.now()>_api_value_expires[key]){var _api_value_full_switc5;return(_api_value_full_switc5=_api_value_full_switches[key])==null||_api_value_full_switc5.turn_off(),_api_value_data[key]=null,null}if((_api_value_dependency6=(_api_value_dependency5=_api_value_dependency)[key])!=null||(_api_value_dependency5[key]=dependency.Dependency()),_api_value_dependency[key].register(),val!=null&&val.err)throw val.err;return val}var APIValue=class extends ExternalValue{constructor(_ref){var _this$cache_time;let{human,uid_field,build_call_from_uid,data_container,fields,cache_time}=_ref;super(),this.storable=!0,this.bindable=!0,this.human=human,this.uid_field=uid_field,this.build_call_from_uid=build_call_from_uid,this.data_container=data_container,this.fields=fields,this.cache_time=cache_time,(_this$cache_time=this.cache_time)!=null||(this.cache_time=DEFAULT_APIVALUE_CACHE_TIME),this._is_executing={}}convert_to_bubble_instance(result){function to_string(x){return x!=null?String(x):x}return Array.isArray(result)?Lib().db_instance().static_list(this.full_name,result.map(r=>to_string(r==null?void 0:r[this.uid_field]))):to_string(result==null?void 0:result[this.uid_field])}execute_my_call(uid,_raw,context){if(this._is_executing[uid])return;this._is_executing[uid]=!0;let{name,prev,properties}=this.build_call_from_uid(uid),_returned=null,too_long=setTimeout(()=>{logger.warn("APIValue took too long too load",{uid,_returned,call_name:name,human:this.human})},29*1e3);b_async.WaitFor(api_value_get_key(this.full_name,uid),()=>clearTimeout(too_long));let current_eval_node=eval_node_state.get_current_eval_node();return this._service.get_call(name).execute_async(prev,properties,null,{current_eval_node,_raw},context).callback((err,value)=>{if(this._is_executing[uid]=!1,_returned={err,value},err)return api_value_set(this.full_name,uid,{err},Date.now()+this.cache_time)}),null}lookup_fn(name){let that=this;return function(a,b,properties,_raw,context){var _a$_id,_a$_id2,_cached_data;if(!a)return this.ret_btype().cast(null);let id=(_a$_id=(_a$_id2=a._id)==null?void 0:_a$_id2.call(a))!=null?_a$_id:a;if(that.uid_field===name)return this.ret_btype().cast(id);let cached_data=api_value_get(that.full_name,id);return cached_data&&(cached_data.data[name]!=null||!cached_data.partial)?this.ret_btype().cast(cached_data.data[name]):(that.execute_my_call(id,_raw,context),api_value_ensure_full(that.full_name,id),cached_data=api_value_get(that.full_name,id),this.ret_btype().cast((_cached_data=cached_data)==null?void 0:_cached_data.data[name]))}}get_basic_message(name,message_definition){var _message_definition$f;let fn=(_message_definition$f=message_definition.fn)!=null?_message_definition$f:this.lookup_fn(name);return _objectSpread(_objectSpread({},super.get_basic_message(name,message_definition)),{},{fn,is_lookup:!1})}display(){return this.human}editable(){return!1}service(){return this._service}short_id(){return this.name}export_to_string(val){return'(Data with ID "'.concat(val,'" from an API)')}debugging_display(val){return'(Data with ID "'.concat(val,'" from an API)')}equals(a,b){return String(a)===String(b)}get_sample(){return null}cast(val){return typeof val=="number"?String(val):val}extract(raw){return this.flatten_raw(raw)}notify(data,call){let uid=data==null?void 0:data[this.uid_field];if(uid!=null)if(call.invalidate)api_value_clear(this.full_name,uid);else{let to_set;call.partial?to_set={data,partial:!0}:to_set={data},api_value_set(this.full_name,uid,to_set,Date.now()+this.cache_time)}}notify_server_action(res,call){let invalidate=id=>{if(["string","number"].includes(typeof id)){let fake_data={};fake_data[this.uid_field]=id;let fake_call={invalidate:!0};return this.notify(fake_data,fake_call)}};if(typeof(res==null?void 0:res.all)=="function")for(let id of res.all())invalidate(id);else invalidate(res)}get_JS_object(id){return id}JS_to_bubble(id){return id}};module.exports=APIValue}});var require_not_critical_retry_failure=__commonJS({"lib-browser-old/external/not_critical_retry_failure.js"(exports,module){"use strict";init_define_process_env();init_shim();var errors=require_errors();module.exports=function(display,reason){return new errors.OwnerError("service unavailable",{display:"Sorry, "+display+" is temporarily unavailable",reason})}}});var require_retryable=__commonJS({"lib-browser-old/retryable.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_includes();var b_string=require_b_string(),retryable=exports,TCP_FAILURE="Failed to establish a connection";retryable.is_retryable=function(err,response,custom_retry_handler,body_sent){if(custom_retry_handler&&custom_retry_handler(response,err))return!0;if(err){var _err$args;if(b_string.string_contains(err.message,TCP_FAILURE))return!0;switch((_err$args=err.args)==null?void 0:_err$args.code){case"ESOCKETTIMEDOUT":if(!body_sent)return!0;break;case"ECONNRESET":case"ECONNREFUSED":case"ETIMEDOUT":case"EHOSTUNREACH":case"ENETUNREACH":case"EPROTO":return!0}if(b_string.string_contains(err.message,"socket hang up")||b_string.string_contains(err.message,"SSL3_GET_RECORD:decryption failed or bad record mac"))return!0}return!!(response&&[429,502,503,504].includes(response.statusCode))}}});var require_ExternalCall=__commonJS({"lib-browser-old/external/ExternalCall.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_includes();require_es_array_iterator();require_web_dom_collections_iterator();require_es_regexp_to_string();require_es_string_includes();require_es_json_stringify();require_web_dom_collections_for_each();require_web_url();require_web_url_search_params();var querystring=require_querystring(),u=require_u2(),b_async=require_b_async3(),b_fiber=require_b_fiber(),b_number=require_b_number(),b_object=require_b_object(),mode_check=require_mode_check(),logger=require_logger(),errors=require_errors(),hydrate2=require_hydrate(),async_state=require_async_state3(),incremental=require_incremental(),dependency=require_dependency3(),btype_ids=require_btype_ids(),not_critical_retry_failure=require_not_critical_retry_failure(),db=require_db2(),Lib=require_lib(),appquery=require_appquery(),btypes=require_btypes(),eval_node_state=require_eval_node_state(),retryable=require_retryable(),context_serializer=require_context_serializer(),configuration=require_client_config2(),_get_keys={},_call_hash_dependencies={},_get_cache_client_props={},_get_cache_server_props={},_get_errors={},_get_cache_retries={},page_load_time=Date.now();function is_get_or_delete_request(req){var _req$method;return!req.method||["get","delete"].includes((_req$method=req.method)==null?void 0:_req$method.toLowerCase())}function build_full_url(req){return is_get_or_delete_request(req)&&req.data?req.url.indexOf("?")===-1?req.url+"?"+querystring.stringify(req.data):req.url+"&"+querystring.stringify(req.data):req.url}var optional_call_properties={data_type_for_ajax_call:!0,skip_property_security:!0},ExternalCall=class{constructor(_service){this._execute_built_request=this._execute_built_request.bind(this),this._service=_service}static invalidate_client_side_calls(hashes){var _hashes;(_hashes=hashes)!=null||(hashes=[]);for(let hash of hashes){var _get_keys$hash,_call_hash_dependenci;(_get_keys$hash=_get_keys[hash])==null||_get_keys$hash.turn(),delete _get_keys[hash],delete _get_cache_server_props[hash],delete _get_cache_client_props[hash],(_call_hash_dependenci=_call_hash_dependencies[hash])==null||_call_hash_dependenci.invalidate()}}service(){return this._service}display(){return this.human}get_value_id(){return this.is_list?btype_ids.list_type(this.value_id):this.value_id}get_value_bubble_null(){return btypes.get(this.get_value_id()).get_bubble_null()}get_authenticator(){return this.service().get_authenticator()}is_authenticated(){return this.get_authenticator().is_authenticated()}must_proxy(){var _this$_must_proxy;return(_this$_must_proxy=this._must_proxy)!=null?_this$_must_proxy:this.get_authenticator().must_proxy()}get_key(name,override_version,miss_ok){var _this$override_key$na,_this$override_key;return(_this$override_key$na=(_this$override_key=this.override_key)==null?void 0:_this$override_key[name])!=null?_this$override_key$na:this.service().get_key(name,override_version,miss_ok)}get_property(name,fail_okay){let obj,res;if(this[name])res=this[name],obj=this;else{let service=this.service();service[name]&&(res=service[name],obj=service)}if(!res&&!optional_call_properties[name]){if(fail_okay)return null;throw new errors.UnexpectedError("call "+this.human+" missing property "+name)}return typeof res=="function"&&(res=res.call(obj)),res}execute(prev,properties,authentication,_raw,context){var _async_state$CurrentN;let current_eval_node=eval_node_state.get_current_eval_node();current_eval_node==null&&mode_check.on_client()&&!mode_check.is_edit_mode()&&this.service_name==="apiconnector2"&&logger.warn("oddly missing current_eval_node in call.execute",{_raw});let call_location={current_eval_node,_raw},fetch2=this._execute_async.bind(this,prev,properties,authentication,call_location,context);if(((_async_state$CurrentN=async_state.CurrentNotReadyCatcher)==null?void 0:_async_state$CurrentN.length)>0)return null;if(mode_check.on_server())return fetch2().block().ret;{var _call_hash_dependenci2,_this$service$notify_,_this$service;let hash=b_object.json_stringify(hydrate2.dehydrate_tree({full_name:this.full_name,prev,properties,authentication}));if((_call_hash_dependenci2=_call_hash_dependencies[hash])!=null||(_call_hash_dependencies[hash]=dependency.Dependency()),_call_hash_dependencies[hash].register(),(_this$service$notify_=(_this$service=this.service()).notify_call_was_hashed)==null||_this$service$notify_.call(_this$service,hash,properties),!_get_keys[hash]){_get_keys[hash]=b_async.MakeKey(null,"Call.execute key for "+hash);let promise=fetch2();_get_keys[hash].name=promise.toString.bind(promise),promise.callback((err,response)=>{var _get_keys$hash3,_get_keys$server_hash;if(err){var _get_keys$hash2;_get_errors[hash]=err,(_get_keys$hash2=_get_keys[hash])==null||_get_keys$hash2.turn();return}let{ret,properties:server_props}=response,server_hash=b_object.json_stringify(hydrate2.dehydrate_tree({full_name:this.full_name,prev,properties:server_props,authentication}));if(_get_cache_client_props[hash]=ret,_get_cache_server_props[server_hash]=ret,(_get_keys$hash3=_get_keys[hash])==null||_get_keys$hash3.turn(),(_get_keys$server_hash=_get_keys[server_hash])!=null||(_get_keys[server_hash]=b_async.MakeKey(null,"Call.execute server_hash")),_get_keys[server_hash].turn(),server_hash!==hash){var _get_cache_retries$ha;(_get_cache_retries$ha=_get_cache_retries[hash])!=null||(_get_cache_retries[hash]=0),_get_cache_retries[hash]++,setTimeout(()=>{delete _get_cache_client_props[hash],_get_cache_server_props[hash]||delete _get_keys[hash]},_get_cache_retries[hash]===1?1:Math.pow(2,_get_cache_retries[hash])*5e3)}})}if(b_async.ensure_ready(_get_keys[hash]),_get_errors[hash])throw _get_errors[hash];var _get_cache_server_pro;return(_get_cache_server_pro=_get_cache_server_props[hash])!=null?_get_cache_server_pro:_get_cache_client_props[hash]}}execute_async(prev,properties,authentication,call_location,context){return this._execute_async(prev,properties,authentication,call_location,context).then(_ref=>{let{ret}=_ref;return ret})}_execute_async(prev,properties,authentication,call_location,context){if(!mode_check.on_server()&&this.must_proxy())return this.proxy_request(prev,properties,authentication,call_location,context).then(results=>(this.notify_value(results.ret),results));let test_info={prev,properties},req=this.build_request(prev,properties,authentication),promise=this._execute_built_request({req,test_info,prev,properties,authentication}),handler;return this.service().handle_request_failures?handler=this.service().handle_request_failures:handler=err=>{if(err.statusCode)return err;if(this.service().not_production_critical&&retryable.is_retryable(err))return not_critical_retry_failure(this.service().display(),err);{if(err.message===b_fiber.QUEUE_TIMEOUT)return err;let service=this.service();return new errors.UnexpectedError("execute_async error",{err,prev,properties,authentication,service_display:service.display(),service_name:service.name})}},promise.then(results=>({ret:results,properties}),handler)}_execute_built_request(_ref2){let{req,test_info,prev,properties,authentication}=_ref2;if(req.dont_do_call)if(this.service().get_action_calls().includes(this.name)&&!req.no_error||req.force_error_message){var _req$message;throw new errors.UserError("MISSING_INFO",(_req$message=req.message)!=null?_req$message:Lib().get_text("CORE","MISSING_INFO")+this.human)}else return b_async.Promise(null);return req.override_output?(this.notify_value(req.results),b_async.Promise(req.results)):u.Promise(req).block_promise(12e5).then(req2=>(b_number.round_all(req2),req2)).then(req2=>Lib().http_request(req2).block_promise(12e5).then(response=>{var _this$modify_and_retr;let modify_and_retry=(_this$modify_and_retr=this.modify_and_retry)==null?void 0:_this$modify_and_retr.call(this,req2,response);if(modify_and_retry)return req2=modify_and_retry,this._execute_built_request({req:req2,test_info,prev,properties,authentication});let data=this.service().response_to_data(req2,response,this.get_property("return_type",!0),this);b_fiber.optional_pause("response to data finished"),test_info.result_call=data;let results=this.extract_data(data,properties,response,req2);return b_fiber.optional_pause("extract data finished"),test_info.result_processed=results,this.notify_value(results),b_fiber.optional_pause("notify value finished"),results}))}build_request(prev,properties,authentication){var _req$method2,_auth$add_shared_para;let req=this.build(prev,properties);if(Lib().bubble_version()>=25&&!req.no_user_agent&&mode_check.on_server()){var _req$headers;(_req$headers=req.headers)!=null||(req.headers={}),"User-Agent"in req.headers||(req.headers["User-Agent"]="Bubble")}if(req.dont_do_call||req.override_output)return req;let dataType=this.get_property("data_type_for_ajax_call");dataType&&(req.dataType=dataType);let custom_retry_handler=this.get_property("custom_retry_handler",!0);if(custom_retry_handler&&(req.custom_retry_handler=custom_retry_handler),this.get_property("return_type",!0)==="raw"&&(req.encoding=null),(_req$method2=req.method)!=null||(req.method="get"),req.method=req.method.toLowerCase(),req.url&&req.path)throw new errors.UnexpectedError("call "+this.name+" @build() call returned an object with both a url and a path: do one or the other");if(!req.url){var _req$path;req.url=this.get_property("base_url")+((_req$path=req.path)!=null?_req$path:""),delete req.path}let auth=this.get_authenticator();(_auth$add_shared_para=auth.add_shared_params_and_headers)==null||_auth$add_shared_para.call(auth,req);let req_promise=b_async.Promise(auth.add_authentication(req,authentication));return new URL(req.url).host.split(".").forEach(domain_fragment=>logger.info("External API Call Built",{display:domain_fragment,method:req.method,url:req.url,headers:req.headers})),req_promise.block_promise().then(req2=>(is_get_or_delete_request(req2)&&(req2.url=build_full_url(req2),delete req2.data),req2))}proxy_request(prev,properties,authentication,call_location,context){var _call_location;let serialization_promise,{_raw,current_eval_node}=(_call_location=call_location)!=null?_call_location:{};if(prev=hydrate2.dehydrate_tree(prev),properties=hydrate2.dehydrate_tree(properties),this.get_property("skip_property_security"))serialization_promise=b_async.Promise({skip_property_security:!0});else if(typeof this.generate_server_properties=="function")serialization_promise=b_async.Promise({skip_property_security:!0});else{if(_raw==null&&!(context!=null&&context.constraint_messsage))throw new errors.UnexpectedError("Missing _raw in proxy_request",{current_eval_node});serialization_promise=context_serializer.serialize_context(context,current_eval_node)}return serialization_promise.then(serialized_context=>{var _serialized_context,_current_eval_node;return(_serialized_context=serialized_context)!=null||(serialized_context={error_serializing_context:!0}),current_eval_node=(_current_eval_node=current_eval_node)==null?void 0:_current_eval_node.json._path(),call_location={_raw,current_eval_node,page_name:Lib().location.get_underlying_page()},Lib().location.post("server://apiservice/doapicallfromserver",{timezone_string:Lib().current_timezone(),service_name:this.service().name,version:this.service().version,call_name:this.name,prev,properties,authentication,call_location,serialized_context,page_load_time,app_last_change:mode_check.is_edit_mode()||mode_check.is_plugin_edit_mode()?"edit":appquery.last_change(),ret_properties:!0}).then(result=>{var _result$ret,_result$ret2;return(result==null||(_result$ret=result.ret)==null?void 0:_result$ret.__bubble_tz_string_in_body)===!1&&logger.info("doapicall request made attempting to pass in tz string and failed!",{appname:appquery.appname(),attempted_request:{timezone_string:Lib().current_timezone(),service_name:this.service().name,version:this.service().version,call_name:this.name,prev,properties,authentication,call_location,serialized_context,page_load_time,app_last_change:mode_check.is_edit_mode()||mode_check.is_plugin_edit_mode()?"edit":appquery.last_change(),ret_properties:!0}}),result==null||(_result$ret2=result.ret)==null||delete _result$ret2.__bubble_tz_string_in_body,result})})}extract_data(data,properties,raw_response,raw_request){b_fiber.optional_pause(),this.post_processing&&(data=this.post_processing(data,properties,raw_response,raw_request));let data_to_process;this.data_container?data_to_process=b_object.extract_from_object(data,this.data_container):data_to_process=data,b_fiber.optional_pause();let result_value=btypes.get(this.value_id);b_fiber.optional_pause();let process_individual_entry=entry=>{var _result_value$plugin$,_result_value$plugin$2,_result_value$plugin;return(_result_value$plugin$=(_result_value$plugin$2=(_result_value$plugin=result_value.plugin).extract)==null?void 0:_result_value$plugin$2.call(_result_value$plugin,entry))!=null?_result_value$plugin$:entry};return Array.isArray(data_to_process)?incremental.incremental_map(5,data_to_process,process_individual_entry):process_individual_entry(data_to_process)}notify_value(results){if(!results)return;let result_value=btypes.get(this.value_id);typeof result_value.plugin.notify=="function"&&(Array.isArray(results)?incremental.incremental_for_each(5,results,r=>{result_value.plugin.notify(r,this)}):result_value.plugin.notify(results,this))}get_doc_link(){return this.doc_link}};module.exports=ExternalCall}});var require_editor_utils=__commonJS({"lib-browser-old/services/client/editor_utils.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_includes();require_es_string_includes();require_es_array_iterator();require_web_dom_collections_iterator();var services_editor_utils=exports,u=require_u2(),Lib=require_lib(),css2=require_css(),plugin_getter=require_plugin_getter(),safe_require=require_safe_require();safe_require.safe_register("./services/client/editor_utils",services_editor_utils);services_editor_utils.enter_your_api_key_button_field_names={key_info:{no_states:!0}}}});var require_ExternalService=__commonJS({"lib-browser-old/external/ExternalService.js"(exports,module){"use strict";init_define_process_env();init_shim();require_web_dom_collections_for_each();require_es_array_reduce();require_es_array_reverse();require_es_symbol_description();require_es_object_get_own_property_descriptors();require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_includes();require_es_object_entries();require_es_string_includes();require_es_json_stringify();require_es_error_cause();require_es_string_trim();var _dec,_class;function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key]}),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce(function(desc2,decorator){return decorator(target,property,desc2)||desc2},desc),context&&desc.initializer!==void 0&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),desc.initializer===void 0&&(Object.defineProperty(target,property,desc),desc=null),desc}var lodashIsEqual=require_isEqual(),querystring=require_querystring(),logger=require_logger(),Lib=require_lib(),appquery=require_appquery(),u=require_u2(),b_fiber=require_b_fiber(),b_object=require_b_object(),decaf=require_decaf(),errors=require_errors(),server_errors=require_server_errors(),incremental=require_incremental(),lang_consts=require_lang(),locations_consts=require_locations(),plugin_consts=require_plugin(),environment_utilities=require_environment_utilities(),style_properties=require_style_properties(),caching=require_caching(),btype_ids=require_btype_ids(),btypes=require_btypes(),retryable=require_retryable(),ExternalCall=require_ExternalCall(),not_critical_retry_failure=require_not_critical_retry_failure(),service_type_parser=require_service_type_parser(),services_editor_utils=require_editor_utils(),element_transformer=require_element_transformer(),core_events=require_core_events(),r=__require,LRU2;u.on_server()&&(LRU2=r("lru-cache"));var plugins_thing_cache,created_plugins_thing=function(){return plugins_thing_cache||(u.on_server()?plugins_thing_cache=new LRU2({max:500,length(){return 1}}):plugins_thing_cache=new Map,plugins_thing_cache)};function create_external_action(service_name,call_name,call_instance){var _call_instance$catego;function fields(action2){let field_array;return call_instance.fields?field_array=call_instance.fields(action2):field_array=services_editor_utils.add_fields_from_parameters(call_instance.parameters,[]),services_editor_utils.add_key_button(service_name,field_array),field_array}let action={display(action2){return call_instance.human},category:(_call_instance$catego=call_instance.category)!=null?_call_instance$catego:"plugins",fields,field_names:lang_consts.DETECT_FIELD_NAMES,data_to_refresh:null,return_value(action2){return action2!=null&&call_instance.return_value!=null?(call_instance.value_id=call_instance.return_value(action2),call_instance.value_id):call_instance.get_value_id()},get_doc_link(){return call_instance.get_doc_link()},call:call_instance,check_for_errors(action2,report){if(call_instance.can_be_used_as_action===!1&&!call_instance.must_proxy())return report("".concat(action2.display(),": You're using this API connector call as an action but it is currently set up as a Data source"))}};return call_instance.must_proxy()?(action.run=(action2,properties,context,cb)=>{context.get_server_outcome(action2,(err,res)=>{if(err)cb(err);else{var _ref,_call_instance$value_,_call_instance$return,_btypes$get$plugin$no,_btypes$get$plugin;let call_value_id=(_ref=(_call_instance$value_=call_instance.value_id)!=null?_call_instance$value_:(_call_instance$return=call_instance.return_value)==null?void 0:_call_instance$return.call(call_instance,action2))!=null?_ref:null,call_hashes=call_instance.service().get_calls_to_refresh(call_instance,action2);ExternalCall.invalidate_client_side_calls(call_hashes),(_btypes$get$plugin$no=(_btypes$get$plugin=btypes.get(call_value_id).plugin).notify_server_action)==null||_btypes$get$plugin$no.call(_btypes$get$plugin,res,call_instance),cb(null,res)}})},action.server_method="external_call_server_action"):action.run=function(){throw new errors.OwnerError("Invalid action - this call cannot be set up as an action.")},action}var ExternalService=(_dec=caching.cached({type:caching.AUTORUN,compare_fn:(a,b)=>a!=null&&a.call_raw_data&&b!=null&&b.call_raw_data?lodashIsEqual(a.call_raw_data,b.call_raw_data):b_object.compare(a,b)}),_class=class{display(){return this.human}toUniqueString(){return"service_"+this.name+"_"+this.version}get_authenticator(name,force){return typeof this.authenticator=="function"?this.authenticator(name,force):this.authenticator}get_calls_to_refresh(call_instance,action){return[]}error_wrapper(fn){if(!this.handle_request_failures)return fn();try{return fn()}catch(err){let transformed=this.handle_request_failures(err);throw transformed==null?new errors.UnexpectedError("handle_request_failures should return the original error or a transformed one",{original:err}):transformed}}get_key(name,override_version,miss_ok){let keys=this.get_keys();if(!keys[name]){if(name==="server_redirect"||miss_ok)return null;throw new server_errors.ClientError("missing key for service",{key_name:name,service_name:this.name,human:this.human})}let test_mode=(override_version!=null?override_version:appquery.app_version())!==locations_consts.LIVE_VERSION||!environment_utilities.is_production(),app=appquery.app();function get_setting(path){return keys[name].type==="client_safe"?app.get_public_setting(path):app.get_private_setting(path)}let live_key=get_setting("".concat(this.name,"_").concat(name));if(!test_mode)return live_key;let test_key=get_setting("".concat(this.name,"_").concat(name,"_test"));return test_key!=null?test_key:live_key}get_keys(){var _this$_get_raw_list,_this$get_authenticat,_this$get_authenticat2;let k=(_this$_get_raw_list=this._get_raw_list("keys"))!=null?_this$_get_raw_list:{};return(_this$get_authenticat=(_this$get_authenticat2=this.get_authenticator()).add_generic_authenticator_keys)==null||_this$get_authenticat.call(_this$get_authenticat2,k),k}has_keys(){return Object.keys(this.get_keys()).length>0}get_public_key(){return this.get_key("appid")}get_secret_key(){return this.get_key("appsecret")}_get_raw_list(thing){return typeof this[thing]=="function"?this[thing]():this[thing]}get_values(){var _this$_get_raw_list2;let btypes_obj=(_this$_get_raw_list2=this._get_raw_list("values"))!=null?_this$_get_raw_list2:{};for(let[btype_name,btype]of Object.entries(btypes_obj))btype.name=btype_name,btype.full_name=btype_ids.api_type("".concat(this.name,".").concat(btype_name)),btype._service=this;return btypes_obj}get_call_class(call_name){return this._get_raw_list("calls")[call_name]}get_calls(){var _this$_get_raw_list3;return Object.keys((_this$_get_raw_list3=this._get_raw_list("calls"))!=null?_this$_get_raw_list3:{})}get_call(call_name){return this._instantiate_call(call_name,this.get_call_class(call_name))}_instantiate_call(call_name,Call_cls){if(typeof Call_cls!="function"){if(this.dynamic_calls)return;if(Lib().is_edit_mode()){logger.error("call is not a class",{call_name,name:this.name});return}else{var _this$display;throw new errors.OwnerError("The call "+call_name+" on "+((_this$display=this.display())!=null?_this$display:this.name)+" is not defined")}}let call_instance=new Call_cls(this),full_name=this.name+plugin_consts.PLUGIN_SEPARATOR+call_name;return call_instance.name=call_name,call_instance.full_name=full_name,call_instance.service_name=this.name,call_instance}get_action(type){var _action2,_action2$category;let action_name=service_type_parser.get_plugin_and_type(type)[1],hard_coded_actions=this._get_raw_list("actions"),action;if(hard_coded_actions!=null&&hard_coded_actions[action_name]){var _action,_action$fields;action=hard_coded_actions[action_name],(_action$fields=(_action=action).fields)!=null||(_action.fields=act=>{let f=action._fields(act);return services_editor_utils.add_key_button(this.name,f),f})}else if(this.get_calls().includes(action_name)){let call_instance=this.get_call(action_name);action=create_external_action(this.name,action_name,call_instance)}return action?(action.is_plugin=!0,action.service=this.name,(_action2$category=(_action2=action).category)!=null||(_action2.category="plugins"),action):null}get_local_cache_key(type){return"".concat(this.toUniqueString(),"-").concat(type)}get_event(type){let local_cache_key=this.get_local_cache_key(type);if(!created_plugins_thing().has(local_cache_key)){var _this$_get_raw_list6;let event_name=service_type_parser.get_plugin_and_type(type)[1],event=((_this$_get_raw_list6=this._get_raw_list("events"))!=null?_this$_get_raw_list6:{})[event_name];if(!event)return null;if(event.element_name){var _this$is_testing;core_events.make_element_event(type,event,!0,(_this$is_testing=this.is_testing)==null?void 0:_this$is_testing.call(this))}else core_events.make_gen_event(type,event);event.is_plugin=!0,event.service=this.name,created_plugins_thing().set(local_cache_key,event)}return created_plugins_thing().get(local_cache_key)}get_element(type,no_cache){var _no_cache;(_no_cache=no_cache)!=null||(no_cache=!1);let local_cache_key=this.get_local_cache_key(type);if(!created_plugins_thing().has(local_cache_key)||no_cache){let element_name=service_type_parser.get_plugin_and_type(type)[1],plugin_elements=this._get_raw_list("elements"),element=plugin_elements==null?void 0:plugin_elements[element_name];if(!element)return null;if(element.is_plugin=!0,element.service=this.name,element_transformer.make_element(type,element,!0),!element.is_non_hardcoded_plugin)for(let[prop_name,prop_data]of decaf.object_entries(element.field_names))prop_data.in_style&&style_properties.register_style_property(prop_name);created_plugins_thing().set(local_cache_key,element)}return created_plugins_thing().get(local_cache_key)}get_public_values(){var _this$_get_raw_list7;let public_btypes=(_this$_get_raw_list7=this._get_raw_list("public_values"))!=null?_this$_get_raw_list7:[],instance_btypes=this.get_values();for(let value_name of public_btypes)if(!instance_btypes[value_name])throw new errors.UnexpectedError("Could not find value "+value_name+" in "+this.name);return public_btypes}get_public_calls(){let public_calls=this._get_raw_list("public_calls");return public_calls!=null?public_calls:[]}get_user_calls(){let user_calls=this._get_raw_list("user_calls");return user_calls!=null?user_calls:[]}get_action_calls(){let action_calls=this._get_raw_list("action_calls");return action_calls!=null?action_calls:[]}get_server_actions(){var _this$server_actions;return(_this$server_actions=this.server_actions)!=null?_this$server_actions:[]}get_oauth_providers(){var _this$_get_raw_list8;return(_this$_get_raw_list8=this._get_raw_list("oauth_providers"))!=null?_this$_get_raw_list8:[]}get_oauth_providers_simple(){return this.get_oauth_providers().map(a=>{var _a$id;return(_a$id=a.id)!=null?_a$id:a})}is_oauth_provider(){return this.get_oauth_providers().length>0}is_storage_provider(){return this.file_upload!=null}is_video_service(){return this._is_video_service}response_to_data(_ref3,response,data_type,call,wrap_error){var _data_type;let{path,url,uri,method,data,headers}=_ref3;(_data_type=data_type)!=null||(data_type="json");let wrapping_error=!1,wrapped_error={};if(response.statusCode<200||response.statusCode>299||this.errors_on_200)if(wrap_error)wrapping_error=!0,wrapped_error={status_code:response.statusCode,status_message:response.statusMessage,body:JSON.stringify(response.body)};else{var _this$get_error_messa;let nice_message=(_this$get_error_messa=this.get_error_message)==null?void 0:_this$get_error_messa.call(this,response,call);if(nice_message){let error=new errors.OwnerError("Received error from api",{display:nice_message});throw error.statusCode=response.statusCode,error}else if(!this.errors_on_200){var _this$display2;if(this.not_production_critical&&retryable.is_retryable(null,response))throw not_critical_retry_failure(this.display(),response.statusCode+": "+response.body);let msg="Error connecting to ".concat((_this$display2=this.display())!=null?_this$display2:this.name," (").concat(response.statusCode,")");throw data={body:response.body.slice(0,1e4),path,method,data,url,uri,headers},new errors.UnexpectedError(msg,data)}}if(!response.body)return null;if(!["json","querystring","raw"].includes(data_type.toLowerCase()))throw new errors.UnexpectedError("unrecognized data_type:"+data_type);if(response.body instanceof Error)throw new errors.UnexpectedError("Error executing call",{inner_message:response.body.message,inner_stack:response.body.stack});try{b_fiber.optional_pause("about to parse api response");let ret;if(wrapping_error)ret={body:response.body,statusCode:response.statusCode,statusMessage:response.statusMessage,error:wrapped_error};else switch(data_type.toLowerCase()){case"json":{var _response$body$trim,_response$body,_response$body$trim2;let to_parse=(_response$body$trim=(_response$body=response.body)==null||(_response$body$trim2=_response$body.trim)==null?void 0:_response$body$trim2.call(_response$body))!=null?_response$body$trim:response.body;ret=incremental.incremental_json_parse(to_parse);break}case"querystring":ret=querystring.parse(response.body);break;case"raw":ret=response.body;break}return wrap_error&&typeof ret=="object"&&(ret.returned_an_error=Object.keys(wrapped_error).length>0),b_fiber.optional_pause("finished parsing api response"),ret}catch(e){var _JSON$stringify$slice,_JSON$stringify,_this$display3;let status_message="Error parsing response data",truncated_response_body=(_JSON$stringify$slice=(_JSON$stringify=JSON.stringify(response.body)).slice)==null?void 0:_JSON$stringify$slice.call(_JSON$stringify,0,1e4),error_description="Error parsing data from ".concat((_this$display3=this.display())!=null?_this$display3:this.name,": ").concat(truncated_response_body);if(!wrap_error)throw new errors.OwnerError(status_message,{display:error_description});let status_code=500;return wrapped_error={status_code,status_message,body:error_description},{body:truncated_response_body,statusCode:status_code,statusMessage:status_message,error:wrapped_error,returned_an_error:!0}}}},_applyDecoratedDescriptor(_class.prototype,"get_call",[_dec],Object.getOwnPropertyDescriptor(_class.prototype,"get_call"),_class.prototype),_class);module.exports=ExternalService}});var require_authenticator_utils=__commonJS({"lib-browser-old/external/authenticators/authenticator_utils.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();var authenticator_utils=exports,u=require_u2(),mode_check=require_mode_check(),Lib=require_lib(),decaf=require_decaf(),appquery=require_appquery(),apps_utilities=require_apps_utilities(),configuration=require_client_config2();authenticator_utils.MISSING_ACCESS_TOKEN="missing access_token getting data";authenticator_utils.PLUGIN_OAUTH_REDIRECT="sys/pluginoauth";authenticator_utils.SERVER_OAUTH_REDIRECT="oauth_redirect";authenticator_utils.get_redirect_url=get_redirect_url;authenticator_utils.add_basic_authentication=add_basic_authentication;authenticator_utils.kv_hash=kv_hash;function get_redirect_url(){let app_version;apps_utilities.is_local_editable(appquery.appname())?app_version="live":app_version=appquery.app_version();let domain;return(configuration.env!=="local"||appquery.appname()==="meta")&&(domain=appquery.domain()),Lib().location.format_pieces({domain,appname:appquery.appname(),path:["api","1.1",authenticator_utils.SERVER_OAUTH_REDIRECT],app_version},{protocol:"https:"})}function add_basic_authentication(req,authentication,authenticator){var _req$headers;let pw,user;authentication?(user=authentication.user,pw=authentication.pw):(user=authenticator.get_public_key(),pw=authenticator.get_secret_key());let authorization=u.base64(user+":"+pw);(_req$headers=req.headers)!=null||(req.headers={}),req.headers.Authorization="Basic "+authorization}function kv_hash(keys){return decaf.object_entries(keys).map(_ref=>{let[k,v]=_ref;return"".concat(k,":").concat(v)}).join(",")}}});var require_Authenticator=__commonJS({"lib-browser-old/external/authenticators/Authenticator.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();var decaf=require_decaf(),errors=require_errors(),appquery=require_appquery(),plugins=require_plugins(),optional_auth_properties={access_type:!0,scope:!0,user_scope:!0,data_type:!0,prompt:!0,additional_query_url_to_delete:!0,add_to_url:!0,add_to_header:!0,header_key:!0,expires_in:!0,add_basic_authentication:!0,key_prefix:!0,grant_type:!0,use_cliend_id_secret:!0,use_username_password:!0,server_redirect:!0},Authenticator=class{constructor(params){this.params=params}id(){return this.service_name()}get_property(name,fail_okay){var _this$params$name,_this$params;let res=(_this$params$name=(_this$params=this.params)==null?void 0:_this$params[name])!=null?_this$params$name:this.service()[name];if(!res&&!optional_auth_properties[name]){if(fail_okay)return null;throw new errors.UnexpectedError("could not find property "+name+" for authenticator of service "+this.id()+", and property "+name+" is not set as optional")}return typeof res=="function"&&(res=res(this)),res}display(){var _this$_display;return(_this$_display=this._display)!=null?_this$_display:plugins.get_plugin(this.service_name()).display()}service(){if(!this._service)throw new errors.UnexpectedError("this authenticator doesnt have @_service set.  should set it in add_service in services.coffee");return this._service}is_user_credentials(){return!1}service_name(){return this.service().name}edit_mode_login(){return!1}get_key(name,override_version,miss_ok){return this.service().get_key(name,override_version,miss_ok)}get_public_key(){return this.service().get_public_key()}get_secret_key(){return this.service().get_secret_key()}get_user_authentication_node(user){return user.child("authentication").child(this.id())}get_service_id(user){return this.get_user_authentication_node(user).child("id").get()}are_keys_missing(){for(let[name,data]of decaf.object_entries(this.service().get_keys()))if(data.editor!=="Checkbox"){let key_val;if(data.type==="secure"?key_val=appquery.get_private_setting(this.service().name+"_"+name):key_val=appquery.get_public_setting(this.service().name+"_"+name),!key_val&&!data.optional)return!0}return!1}};module.exports=Authenticator}});var require_BasicAuth=__commonJS({"lib-browser-old/external/authenticators/BasicAuth.js"(exports,module){"use strict";init_define_process_env();init_shim();var Authenticator=require_Authenticator(),authenticator_utils=require_authenticator_utils(),BasicAuth=class extends Authenticator{must_proxy(){return!0}add_authentication(req,authentication){return authenticator_utils.add_basic_authentication(req,authentication,this),req}is_authenticated(){return!0}};module.exports=BasicAuth}});var require_BoxAuthentication=__commonJS({"lib-browser-old/external/authenticators/BoxAuthentication.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();var mode_check=require_mode_check(),known_plugins_consts=require_known_plugins(),errors=require_errors(),uuid=require_uuid(),Authenticator=require_Authenticator(),authenticator_utils=require_authenticator_utils(),Lib=require_lib(),plugin_registry=require_plugin_registry(),_box_token_cache={},BoxAuthentication=class extends Authenticator{must_proxy(){return!0}build_token(keys){let hash=authenticator_utils.kv_hash(keys),enterprise=!keys.user_id;if(!_box_token_cache[hash]||mode_check.running_test()){let header={typ:"JWT",alg:"RS256",kid:keys.public_key_id},claims={iss:keys.apikey,sub:enterprise?keys.enterprise_id:keys.user_id,box_sub_type:enterprise?"enterprise":"user",aud:this.get_property("claims_aud"),jti:uuid.UUID(),exp:Math.floor(Date.now()/1e3+55)},jwt=token_utilities.generate_jws(header,claims),form={client_id:keys.appid,client_secret:keys.appsecret,grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:jwt},post_options={method:"POST",url:this.get_property("generate_token_from_code_uri"),form},response=this.service().error_wrapper(()=>Lib().http_request(post_options).block()),result=this.service().response_to_data(post_options,response);_box_token_cache[hash]=result.access_token,setTimeout(()=>_box_token_cache[hash]=null,result.expires_in*1e3)}return _box_token_cache[hash]}get_token(){let keys={};for(let name in this.service().keys)if(keys[name]=this.get_key(name),!keys[name]&&name!=="user_id")throw new errors.OwnerError("App missing credential",{display:"Sorry, it looks like this is app is missing a "+this.service().display()+" credential: "+this.service().keys[name].caption});if(!keys.user_id){let enterprise_token=this.build_token(keys),new_user_id=plugin_registry.get_hardcoded_plugin(known_plugins_consts.BOX).get_call("create_user").execute(null,null,enterprise_token).id;Lib().app().get_private_setting_node(this.service().name+"_user_id").json.set(new_user_id,{name:"CreateBoxAuthToken"}),keys.user_id=new_user_id}return this.build_token(keys)}add_authentication(req,authentication){var _req$headers;let token=authentication!=null?authentication:this.get_token();return(_req$headers=req.headers)!=null||(req.headers={}),req.headers.Authorization="Bearer "+token,req}};module.exports=BoxAuthentication}});var require_Oauth2PWFlow=__commonJS({"lib-browser-old/external/authenticators/Oauth2PWFlow.js"(exports,module){"use strict";init_define_process_env();init_shim();var errors=require_errors(),redis_consts=require_redis(),Authenticator=require_Authenticator(),authenticator_utils=require_authenticator_utils(),Lib=require_lib(),Oauth2PWFlow=class extends Authenticator{must_proxy(){return!0}add_authentication(req,authentication){var _req$headers;let token=authentication!=null?authentication:this.get_token();return(_req$headers=req.headers)!=null||(req.headers={}),req.headers.Authorization="Bearer "+token,req}is_authenticated(){return!0}};module.exports=Oauth2PWFlow}});var require_JWT=__commonJS({"lib-browser-old/external/authenticators/JWT.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_json_stringify();var mode_check=require_mode_check(),errors=require_errors(),authenticator_utils=require_authenticator_utils(),Oauth2PWFlow=require_Oauth2PWFlow(),JWT=class extends Oauth2PWFlow{anti_babel_function(){}};module.exports=JWT}});var require_NoAuth=__commonJS({"lib-browser-old/external/authenticators/NoAuth.js"(exports,module){"use strict";init_define_process_env();init_shim();var Authenticator=require_Authenticator(),NoAuth=class extends Authenticator{must_proxy(){return!1}add_authentication(req){return req}is_authenticated(){return!0}is_user_credentials(){return!0}};module.exports=NoAuth}});var require_OauthBase=__commonJS({"lib-browser-old/external/authenticators/OauthBase.js"(exports,module){"use strict";init_define_process_env();init_shim();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_symbol_description();require_es_error_cause();function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var logger=require_logger(),Authenticator=require_Authenticator(),Lib=require_lib(),retryable=require_retryable(),OauthBase=class extends Authenticator{get_oauth_user_data_call(){return this.service().get_call("oauth_user_data_call")}get_oauth_user_data(login_data){let token_data=this.get_token_data(login_data),user_data=this.get_oauth_user_data_call(login_data).execute(null,null,token_data);return user_data.id!=null&&(user_data.id=String(user_data.id)),(login_data==null?void 0:login_data.oauth_provider)==="linkedin_with_open_id"&&!user_data.id&&user_data._id&&(user_data.id=String(user_data._id)),_objectSpread(_objectSpread({},user_data!=null?user_data:{}),token_data!=null?token_data:{})}build_validity_request(validity){return this.get_oauth_user_data_call().build_request(null,null,validity)}is_still_valid(validity){let user_data_request=this.build_validity_request(validity),err,response;try{response=Lib().http_request(user_data_request).block(),err=null}catch(error){err=error,response=null}if(response&&response.statusCode>=200&&response.statusCode<300)return!0;if(retryable.is_retryable(err,response)){let reason;return err?reason=err:reason=response.statusCode+": "+response.body,logger.warn("Temporarily unable to validate Oauth connection",{service:this.service().display(),reason}),!0}return!1}_get_user_id(){return this.get_service_id(Lib().current_user())}tested(){return!0}};module.exports=OauthBase}});var require_Oauth1=__commonJS({"lib-browser-old/external/authenticators/Oauth1.js"(exports,module){"use strict";init_define_process_env();init_shim();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_regexp_exec();require_es_string_search();require_es_symbol_description();require_es_error_cause();function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var mode_check=require_mode_check(),logger=require_logger(),b_object=require_b_object(),autorun=require_autorun3(),redis_consts=require_redis(),OauthBase=require_OauthBase(),Lib=require_lib(),node_url=require_url(),appquery=require_appquery(),querystring=require_querystring(),Oauth1=class extends OauthBase{oauth_version(){return"1"}must_proxy(){return!0}get_oauth_user_data(login_data){let token_data=this.get_token_data(login_data),user_data=this.get_oauth_user_data_call().execute(null,token_data,token_data);return user_data.id=String(token_data.user_id),_objectSpread(_objectSpread({},user_data!=null?user_data:{}),token_data!=null?token_data:{})}is_user_credentials(){return!0}login(context,action,oauth_token){let authorize_url=this.get_property("authorize_url"),token={};return token[this.get_property("token_param_name")]=oauth_token,Lib().workflow.make_resume_key(context,action),Lib().workflow.wait_for_safe(context,()=>{document.location.href=authorize_url+"?"+querystring.stringify(token)})}add_authentication(req,authentication){if(req.headers)return req;let oauth_token_secret=authentication==null?void 0:authentication.oauth_token_secret,oauth_token=authentication==null?void 0:authentication.oauth_token;return oauth_token_secret!=null&&oauth_token!=null?(this.add_auth_header(req,oauth_token,oauth_token_secret),req):(oauth_token_secret=autorun.run_once(30,()=>({oauth_token_secret:this._get_oauth_token_secret(),oauth_token:this._get_oauth_token()})),oauth_token_secret.then(_ref=>{let{oauth_token_secret:oauth_token_secret2,oauth_token:oauth_token2}=_ref;return!oauth_token_secret2||!oauth_token2||this.add_auth_header(req,oauth_token2,oauth_token_secret2),req}))}get_data_for_login(_ref2){let{oauth_token,oauth_verifier}=_ref2;return typeof oauth_token!="string"||typeof oauth_verifier!="string"?(logger.warn("odd OAuth1 params after redirection, clearing",{oauth_token,oauth_verifier}),{oauth_provider:this.id(),oauth_token:"",oauth_verifier:""}):{oauth_provider:this.id(),oauth_token:oauth_token!=null?oauth_token:"",oauth_verifier:oauth_verifier!=null?oauth_verifier:""}}get_token_data(login_data){let access_token_url=this.get_property("access_token_url"),data_type=this.get_property("data_type"),req={url:access_token_url,method:"POST",data:login_data};this.add_auth_header(req,login_data.oauth_token,Lib().KeyValueDB().get(redis_consts.INSTANCE_NAMES.SMALL,login_data.oauth_token));let response=this.service().error_wrapper(()=>Lib().http_request(req).block());return this.service().response_to_data(req,response,data_type)}_get_oauth_token_secret(){return this.get_user_authentication_node(Lib().current_user()).child("oauth_token_secret").get()}_get_oauth_token(){return this.get_user_authentication_node(Lib().current_user()).child("oauth_token").get()}is_authenticated(){return this._get_oauth_token()!=null&&this._get_oauth_token_secret()!=null&&this._get_user_id()!=null}generate_validity_object(user_info){return{oauth_token:user_info.oauth_token,oauth_token_secret:user_info.oauth_token_secret,provider_user_id:user_info.user_id}}build_validity_request(validity){return this.get_oauth_user_data_call().build_request(null,{user_id:validity.provider_user_id},validity)}};module.exports=Oauth1}});var require_template_parser=__commonJS({"lib-browser-old/apiconnectorbase/template_parser.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.find_between_characters=find_between_characters;require_es_array_iterator();require_web_dom_collections_iterator();require_es_regexp_exec();require_es_string_split();require_es_regexp_constructor();require_es_regexp_dot_all();require_es_regexp_to_string();require_es_string_match();require_es_array_includes();var b_array=_interopRequireWildcard(require_b_array());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var bracket_regex=/\[([^\]]+)]/g,less_than_regex=/<[^>]+>/g;function find_between_characters(string,type){let char,regex,list=[];if(!string)return list;switch(type){case"bracket":regex=bracket_regex,char="[";break;case"less_than":regex=less_than_regex,char="<";break;default:char=type;for(let special_char of["\\",".","^","$","*","+","?"])type=type.split(special_char).join("\\"+special_char);regex=new RegExp(type+"(.*?)"+type,"g")}let items=string.match(regex);for(let a of items!=null?items:[])["bracket","less_than"].includes(type)?a.slice(1).indexOf(char)===-1&&list.push(a.slice(1,-1)):list.push(a.slice(char.length,-char.length));return b_array.unique(list)}}});var require_parsing_utils=__commonJS({"lib-browser-old/apiconnectorbase/parsing_utils.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_object_entries();require_es_array_includes();require_es_string_includes();var url=require_url(),u=require_u2(),template_parser=require_template_parser(),reserved_address,r=__require;u.on_server()&&(reserved_address=r("../server/utility/reserved_address"));var parsing_utils=exports;parsing_utils.apply_template_params=function(body,delimiter,base_param_list,get_param_fn){let open_delimiter,close_delimiter;switch(delimiter){case"bracket":open_delimiter="[",close_delimiter="]";break;case"less_than":open_delimiter="<",close_delimiter=">";break;default:open_delimiter=delimiter,close_delimiter=delimiter}let computed_params=template_parser.find_between_characters(body,delimiter);for(let[param_id,param]of Object.entries(base_param_list!=null?base_param_list:{}))computed_params.includes(param.key)&&(body=u.replace_all(body,open_delimiter+param.key+close_delimiter,get_param_fn(param_id,param)));return body}}});var require_Oauth2=__commonJS({"lib-browser-old/external/authenticators/Oauth2.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_object_entries();require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_includes();require_es_string_includes();require_es_string_ends_with();require_es_string_trim();require_es_regexp_exec();require_es_string_search();var b_object=require_b_object(),b_string=require_b_string(),errors=require_errors(),uuid=require_uuid(),autorun=require_autorun3(),OauthBase=require_OauthBase(),authenticator_utils=require_authenticator_utils(),node_eval=require_node_eval(),parsing_utils=require_parsing_utils(),Lib=require_lib(),node_url=require_url(),querystring=require_querystring(),Oauth2=class extends OauthBase{oauth_version(){return"2"}get_additional_fields(){var _this$get_property;let url_params=(_this$get_property=this.get_property("auth_url_params",!0))!=null?_this$get_property:{};return Object.entries(url_params).map(_ref=>{let[id,param]=_ref;return{name:id,caption:"".concat(param.key," (Login Redirect)"),editor:"ShortText",default:param.allow_blank?null:param.value,optional:param.optional||param.allow_blank}})}must_proxy(){return!1}_get_access_token(){return this.get_user_authentication_node(Lib().current_user()).child("access_token").get()}is_authenticated(){return this._get_access_token()!=null&&this._get_user_id()!=null}is_user_credentials(){return!0}add_authentication(req,authentication){var _authentication$acces,_req$data;let token_param_name=this.get_property("token_param_name"),access_token=(_authentication$acces=authentication==null?void 0:authentication.access_token)!=null?_authentication$acces:(_req$data=req.data)==null?void 0:_req$data[token_param_name],add_token=token=>{if(this.get_property("add_to_url"))req.url.includes("?")?req.url+="&":req.url.endsWith("?")||(req.url+="?"),req.url+=token_param_name+"="+token;else if(this.get_property("add_to_header")){var _req$headers;(_req$headers=req.headers)!=null||(req.headers={});let header_key=this.get_property("header_key");if(header_key){let[key,pre_val]=header_key.split(":");pre_val!=null?req.headers[key.trim()]=pre_val.trim()+" "+token:req.headers[key.trim()]=token}else req.headers.Authorization="Bearer "+token}else{var _req$data2;(_req$data2=req.data)!=null||(req.data={}),req.data[token_param_name]=token}return req};return access_token!=null?add_token(access_token):(access_token=autorun.run_once(30,()=>this._get_access_token()),access_token.then(access_token2=>add_token(access_token2)))}add_generic_authenticator_keys(keys){keys.server_redirect={type:"client_safe",editor:"Checkbox"},Lib().is_edit_mode()&&(keys.server_redirect.caption="Use a generic redirect URL ("+authenticator_utils.get_redirect_url()+")")}use_server_side_redirect(){return this.get_key("server_redirect")}login(context,action,remove_querystrings){var _this$get_property2;let redirect_uri=document.location.href;redirect_uri[redirect_uri.length-1]==="?"&&(redirect_uri=redirect_uri.slice(0,redirect_uri.length-1));let api_call_url,parsed_redirect;remove_querystrings&&(parsed_redirect=node_url.parse(redirect_uri),delete parsed_redirect.search,delete parsed_redirect.hash,delete parsed_redirect.query,redirect_uri=node_url.format(parsed_redirect));let state_raw=node_url.parse(document.location.href,!0).query;state_raw.oauth_provider=this.id(),context&&action&&(state_raw.resume_key=Lib().workflow.make_resume_key(context,action)),state_raw.used_redirect_url=redirect_uri,this.use_server_side_redirect()&&(redirect_uri=authenticator_utils.get_redirect_url(),Lib().location.get_page()==="index"&&b_string.starts_with(Lib().location.get_server_base(),state_raw.used_redirect_url)&&(parsed_redirect=node_url.parse(state_raw.used_redirect_url),parsed_redirect.path==="/"&&state_raw.used_redirect_url.slice(-1)!=="/"&&(state_raw.used_redirect_url=state_raw.used_redirect_url+"/")),state_raw.redirect_unique_id=uuid.UUID());let stringified_state=b_string.fixedEncodeURIComponent(b_object.json_stringify(state_raw)),api_data={client_id:this.get_public_key(),redirect_uri,response_type:"code",state:stringified_state},expires_in=this.get_property("expires_in");expires_in&&(api_data.expires_in=expires_in);let access_type=this.get_property("access_type");access_type&&(api_data.access_type=access_type);let prompt=this.get_property("prompt");prompt&&(api_data.prompt=prompt);let scope=this.get_property("scope");scope&&(api_data.scope=scope);let authentication_url=parsing_utils.apply_template_params(this.get_property("authentication_url"),"bracket",(_this$get_property2=this.get_property("auth_url_params",!0))!=null?_this$get_property2:{},(param_id,param)=>action?node_eval.eval_property(action,param_id,context,null,param.value):param.value);return authentication_url.includes("?")?api_call_url=authentication_url+"&"+querystring.stringify(api_data):api_call_url=authentication_url+"?"+querystring.stringify(api_data),Lib().workflow.wait_for_safe(context,()=>document.location.href=api_call_url)}get_data_for_login(data){var _data$code;let redirect_uri;if(this.use_server_side_redirect())redirect_uri=authenticator_utils.get_redirect_url();else{var _data$used_redirect_u;redirect_uri=(_data$used_redirect_u=data.used_redirect_url)!=null?_data$used_redirect_u:""}return{oauth_provider:this.id(),code:(_data$code=data.code)!=null?_data$code:"",redirect_uri}}};module.exports=Oauth2}});var require_Oauth2Custom=__commonJS({"lib-browser-old/external/authenticators/Oauth2Custom.js"(exports,module){"use strict";init_define_process_env();init_shim();var b_object=require_b_object(),Oauth2PWFlow=require_Oauth2PWFlow(),Oauth2Custom=class extends Oauth2PWFlow{_get_token_request(){return this.service().get_call("token_call").build()}};module.exports=Oauth2Custom}});var require_PrivateKey=__commonJS({"lib-browser-old/external/authenticators/PrivateKey.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_includes();require_es_string_includes();var errors=require_errors(),Authenticator=require_Authenticator(),PrivateKey=class extends Authenticator{must_proxy(){return!0}add_authentication(req,authentication){var _authentication;if((_authentication=authentication)!=null||(authentication=this.get_secret_key()),this.params.key_prefix&&(authentication=this.params.key_prefix+authentication),!this.params.token_param_name)throw new errors.UnexpectedError("PrivateKey authenticator missing token_param_name");if(this.params.add_to_url)req.url.includes("?")||(req.url+="?"),req.url[req.url.length-1]!=="?"&&(req.url+="&"),req.url+=this.params.token_param_name+"="+authentication;else if(this.params.add_to_header){var _req$headers;(_req$headers=req.headers)!=null||(req.headers={}),req.headers[this.params.token_param_name]=authentication}else{var _req$data;(_req$data=req.data)!=null||(req.data={}),req.data[this.params.token_param_name]=authentication}return req}is_authenticated(){return!0}};module.exports=PrivateKey}});var require_SSLProtocol=__commonJS({"lib-browser-old/external/authenticators/SSLProtocol.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_object_assign();var BasicAuth=require_BasicAuth(),SSLProtocol=class extends BasicAuth{add_authentication(req,authentication){return Object.assign(req,{cert:this.get_key("cert_file"),key:this.get_key("key_file")}),req}};module.exports=SSLProtocol}});var require_authenticators=__commonJS({"lib-browser-old/external/authenticators/index.js"(exports){"use strict";init_define_process_env();init_shim();var authenticator_utils=require_authenticator_utils(),Authenticator=require_Authenticator(),BasicAuth=require_BasicAuth(),BoxAuthentication=require_BoxAuthentication(),JWT=require_JWT(),NoAuth=require_NoAuth(),Oauth1=require_Oauth1(),Oauth2=require_Oauth2(),Oauth2Custom=require_Oauth2Custom(),Oauth2PWFlow=require_Oauth2PWFlow(),PrivateKey=require_PrivateKey(),SSLProtocol=require_SSLProtocol(),authenticators=exports;authenticators.MISSING_ACCESS_TOKEN=authenticator_utils.MISSING_ACCESS_TOKEN;authenticators.PLUGIN_OAUTH_REDIRECT=authenticator_utils.PLUGIN_OAUTH_REDIRECT;authenticators.SERVER_OAUTH_REDIRECT=authenticator_utils.SERVER_OAUTH_REDIRECT;authenticators.get_redirect_url=authenticator_utils.get_redirect_url;authenticators.Authenticator=Authenticator;authenticators.BasicAuth=BasicAuth;authenticators.BoxAuthentication=BoxAuthentication;authenticators.JWT=JWT;authenticators.NoAuth=NoAuth;authenticators.Oauth1=Oauth1;authenticators.Oauth2=Oauth2;authenticators.Oauth2Custom=Oauth2Custom;authenticators.Oauth2PWFlow=Oauth2PWFlow;authenticators.PrivateKey=PrivateKey;authenticators.SSLProtocol=SSLProtocol}});var require_external=__commonJS({"lib-browser-old/external/index.js"(exports){"use strict";init_define_process_env();init_shim();var ExternalValue=require_ExternalValue(),StructValue=require_StructValue(),APIValue=require_APIValue(),ExternalCall=require_ExternalCall(),ExternalService=require_ExternalService(),make_call_fn=require_make_call_fn(),authenticators=require_authenticators(),safe_require=require_safe_require(),external=exports;safe_require.safe_register("./external",external);var PassThroughValue=class{display(){return"Pass Through"}extract(raw){return raw}};external.Authenticator=authenticators.Authenticator;external.BasicAuth=authenticators.BasicAuth;external.BoxAuthentication=authenticators.BoxAuthentication;external.JWT=authenticators.JWT;external.NoAuth=authenticators.NoAuth;external.Oauth1=authenticators.Oauth1;external.Oauth2=authenticators.Oauth2;external.Oauth2Custom=authenticators.Oauth2Custom;external.Oauth2PWFlow=authenticators.Oauth2PWFlow;external.PrivateKey=authenticators.PrivateKey;external.SSLProtocol=authenticators.SSLProtocol;external.MISSING_ACCESS_TOKEN=authenticators.MISSING_ACCESS_TOKEN;external.PLUGIN_OAUTH_REDIRECT=authenticators.PLUGIN_OAUTH_REDIRECT;external.SERVER_OAUTH_REDIRECT=authenticators.SERVER_OAUTH_REDIRECT;external.get_redirect_url=authenticators.get_redirect_url;external.APIValue=APIValue;external.Call=ExternalCall;external.ExternalValue=ExternalValue;external.PassThroughValue=PassThroughValue;external.Service=ExternalService;external.StructValue=StructValue;external.make_call_fn=make_call_fn}});var require_xml_to_json=__commonJS({"lib-browser-old/apiconnectorbase/xml_to_json.js"(){"use strict";init_define_process_env();init_shim();var u=require_u2(),Lib=require_lib(),b_fiber=require_b_fiber(),incremental=require_incremental(),r=__require,xml2js;u.on_server()&&(xml2js=r("xml2js"))}});var require_post_processing=__commonJS({"lib-browser-old/apiconnectorbase/post_processing.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_regexp_exec();require_es_regexp_test();require_es_string_replace();require_es_array_iterator();require_web_dom_collections_iterator();require_web_url();require_web_url_search_params();require_es_regexp_to_string();require_es_array_includes();require_es_string_trim();require_es_json_stringify();var u=require_u2(),Lib=require_lib(),xml_to_json=require_xml_to_json(),r=__require,activityApm,fileupload,content_disposition_parser;u.on_server()&&(fileupload=r("../server/fileupload"),activityApm=r("../monitoring/apm/activityApm"),content_disposition_parser=r("content-disposition"));module.exports=post_processing;function post_processing(properties,raw_response,raw_request,scope_data,initialize_mode){let call_real_post_processing=()=>real_post_processing(properties,raw_response,raw_request,scope_data,initialize_mode);return activityApm?activityApm.traceSpan("post processing",{},_ref=>{var _raw_request$body$len,_raw_request$body,_raw_response$body$le,_raw_response$body;let{recordActivity}=_ref;return recordActivity("api_outbound",{count:1,request_bytes:(_raw_request$body$len=(_raw_request$body=raw_request.body)==null?void 0:_raw_request$body.length)!=null?_raw_request$body$len:0,response_bytes:(_raw_response$body$le=(_raw_response$body=raw_response.body)==null?void 0:_raw_response$body.length)!=null?_raw_response$body$le:0}),call_real_post_processing()}):call_real_post_processing()}function real_post_processing(properties,raw_response,raw_request,scope_data,initialize_mode){var _properties$appname,_properties$app_versi,_raw_response$headers;let body,error,response,url_filename,{data_type,passed_url,api_human,name,get_headers}=scope_data,appname=(_properties$appname=properties.appname)!=null?_properties$appname:Lib().appname(),app_version=(_properties$app_versi=properties.app_version)!=null?_properties$app_versi:Lib().app_version(),wrap_the_error_in_response=scope_data.wrap_error,content_disposition=(_raw_response$headers=raw_response.headers)==null?void 0:_raw_response$headers["content-disposition"];if(/filename/.test(content_disposition)&&(content_disposition=content_disposition.replace(/;$/,""),url_filename=extract_filename_from_content_disposition(content_disposition)),!url_filename){let pathname;try{({pathname}=new URL(raw_request.url))}catch(err){pathname=passed_url}url_filename=pathname.split("/").filter(Boolean).pop()||"root_file"}if(data_type==="XML")try{body=xml_to_json(raw_response.body.toString("utf8"))}catch(e){if(wrap_the_error_in_response)scope_data.returned_an_error=!0,raw_response.statusCode=400,raw_response.statusMessage="Issue Parsing XML",raw_response.body="There was an issue parsing the XML body for the call "+api_human+" - "+name;else throw new u.OwnerError("issue parsing XML",{display:"There was an issue parsing the XML body for the call "+api_human+" - "+name})}else if(["image","file"].includes(data_type)){let string=String(raw_response.body);try{JSON.parse(string),error=!0}catch(error2){}if(error)if(wrap_the_error_in_response)scope_data.returned_an_error=!0,raw_response.statusCode=400,raw_response.statusMessage="Issue Getting File For Call",raw_response.body="There was an issue getting the file for the call "+api_human+" - "+name+". See the response "+string;else throw new u.OwnerError("Issue getting file for call",{display:"There was an issue getting the file for the call "+api_human+" - "+name+". See the response "+string});else{let filename;initialize_mode?filename="api_initialize_"+data_type:filename=url_filename,body=fileupload.save_to_s3(raw_response.body,filename,raw_response.headers["content-type"],void 0,void 0,appname,app_version)}}else if(["text","number"].includes(data_type))body=raw_response.body.toString("utf8");else if(data_type==="empty")body=null;else{let body_string=raw_response.body;if(raw_response.statusCode===202){var _body_string;(_body_string=body_string)!=null||(body_string="{}")}body_string!=null&&typeof body_string=="string"&&(body_string=body_string.trim());try{body=JSON.parse(body_string)}catch(error1){if(error=error1,initialize_mode&&(!get_headers||!wrap_the_error_in_response))throw raw_response.body?new u.OwnerError("The API call returns a non-object and you picked JSON. Please check.",{original:error}):new u.OwnerError("The API call returns an empty body and you picked JSON. Please check.",{original:error});body={}}}if(get_headers||wrap_the_error_in_response){if(response={body},wrap_the_error_in_response){var _scope_data$returned_;if(initialize_mode||scope_data.returned_an_error){let wrapped_error={status_code:raw_response.statusCode,status_message:raw_response.statusMessage,body:JSON.stringify(raw_response.body)};response.error=wrapped_error}response.returned_an_error=(_scope_data$returned_=scope_data.returned_an_error)!=null?_scope_data$returned_:!1}get_headers&&(response.headers=raw_response.headers)}else response=body;return response}}});var require_call_objects=__commonJS({"lib-browser-old/apiconnectorbase/call_objects.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_includes();require_es_array_iterator();require_web_dom_collections_iterator();require_es_object_values();require_es_string_trim();require_es_regexp_exec();require_es_string_replace();var u=require_u2(),logger=require_logger(),Lib=require_lib(),time_consts=require_time(),apiconnectorbase_consts=require_apiconnectorbase(),btype_ids=require_btype_ids(),btypes=require_btypes(),ExternalCall=require_ExternalCall(),parsing_utils=require_parsing_utils(),post_processing=require_post_processing(),r=__require,reserved_address;u.on_server()&&(reserved_address=r("../server/utility/reserved_address"));var call_objects=exports;call_objects.methods={get:"GET",post:"POST",put:"PUT",patch:"PATCH",delete_method:"DELETE"};call_objects.method_uses_body=function(method){return["PUT","PATCH","POST","DELETE_METHOD"].includes(method==null?void 0:method.toUpperCase())};var BROWSER_CALL_AJAX_DATATYPES={none:"text",text:"text",number:"text",JSON:"json",null:"json",undefined:"json"},CALL_PARAMETER_KEYS=["url_params","headers","params","body_params","shared_headers","shared_params"],BROWSER_COMPATIBLE_API_TYPES={none:!0,text:!0,number:!0,JSON:!0,null:!0,undefined:!0};call_objects.user_friendly_parameter_names={headers:"(header)",params:"(param.)",url_params:"(path)",body_params:"(body)",shared_headers:"(shared headers)",shared_params:"(shared param.)"};function _is_body_dynamic(call_data){return!call_data.body_params||u.is_empty(call_data.body_params)}call_objects.is_call_initialized=call_data=>call_data.initialized||call_data.no_types;call_objects.get_error_message=function(response,call,is_plugin){var _call$display,_call$display2;let display=(_call$display=call==null||(_call$display2=call.display)==null?void 0:_call$display2.call(call))!=null?_call$display:"this service";if(response.statusCode>=400&&response.statusCode<=499){let r2="The service "+display+" just returned an error (HTTP "+response.statusCode+"). ";return is_plugin?r2+="Please contact the plugin author directly for feedback.":r2+="Please consult their documentation to ensure your call is setup properly.",r2+=" Raw error:\n\n".concat(u.escape(response.body)),r2}else{if(response.statusCode>=500&&response.statusCode<=599)return"Temporary error connecting to "+display+" (raw message: "+response.body+")";if(response.statusCode<200||response.statusCode>299)return"Error connecting to "+display+": expected a 2XX statusCode but got "+response.statusCode}};call_objects.can_be_in_browser=function(api_data,call_data){if(!call_data||!BROWSER_COMPATIBLE_API_TYPES[call_data.data_type]||call_data.get_headers||call_data.publish_as==="action"||call_data.url_private)return!1;for(let key of CALL_PARAMETER_KEYS)for(let param of Object.values((_call_data$key=call_data[key])!=null?_call_data$key:{})){var _call_data$key;if(key==="headers"){for(let header in call_data[key])if(Object.keys(call_data[key][header]).length!==0)return!1}if(param!=null&&param.private)return!1}if(api_data==null)return!0;if(api_data.auth!=null&&api_data.auth!=="none")return!1;for(let key of CALL_PARAMETER_KEYS)for(let param of Object.values((_api_data$key=api_data[key])!=null?_api_data$key:{})){var _api_data$key;if(key==="shared_headers"||param!=null&&param.private)return!1}return!0};call_objects.get_call_from_raw=function(call_id,call_data,plugin_name,BASE){var _btype_id;let btype_id,data_type_for_ajax_call,name;if(!call_data)return;BASE?name=call_data.api_id+"."+call_id:name=call_id;let parameters={};(!call_data.url_params||u.is_empty(call_data.url_params))&&!call_data.url_private&&BASE&&!call_data.url_cant_be_private&&(parameters.url={display:"Call endpoint - URL",editor:"LongText",no_enter:!0,no_rich_text_editing:!0,default:call_data.url});function get_params(type){let params=call_data[type];for(let _ in params){let param=params[_];if(param!=null&&param.key&&(BASE&&!param.private||!BASE&&[void 0,"public"].includes(param.visibility))){var _call_objects$user_fr;let editor;call_data.body_type==="form_data"&&param.binary_file?editor="DynamicFile":param.long_text?editor="LongText":editor="ShortText",parameters[u.encode_key(type+"_"+param.key)]={display:((_call_objects$user_fr=call_objects.user_friendly_parameter_names)==null?void 0:_call_objects$user_fr[type])+" "+param.key,editor,default:param.allow_blank?null:param.value,optional:param.optional||param.allow_blank,doc:param.doc}}}}let allowed_params=["url_params","headers","shared_headers","shared_params"];call_data.body_type!=="plain_text"&&allowed_params.push("params");for(let i of allowed_params)get_params(i);if(call_data.body&&call_objects.method_uses_body(call_data.method)&&(_is_body_dynamic(call_data)?parameters.body={display:"Body (JSON object)",editor:"LongText",no_rich_text_editing:!0,default:call_data.body}:get_params("body_params")),call_data.no_types)["image","text","number","file"].includes(call_data.data_type)&&(btype_id=call_data.data_type);else if(call_data.ret_value===apiconnectorbase_consts.IGNORE_FIELD)btype_id="null";else{let ret_btype=btypes.get(call_data.ret_value);!ret_btype.is_missing()&&ret_btype.plugin.is_simple?btype_id=call_data.ret_value:BASE?btype_id=btype_ids.api_type(BASE+"."+name):btype_id=btype_ids.api_type(call_data.api_id+".plugin_api."+name)}(_btype_id=btype_id)!=null||(btype_id="null");let can_be_in_browser=call_objects.can_be_in_browser(null,call_data),try_do_in_browser=call_data.in_browser&&can_be_in_browser;return u.on_client()&&try_do_in_browser&&(data_type_for_ajax_call=BROWSER_CALL_AJAX_DATATYPES[call_data.data_type]),class extends ExternalCall{get human(){return call_data.api_human+" - "+call_data.name}get _must_proxy(){return!try_do_in_browser}get value_id(){return btype_id}get doc_link(){return call_data.doc_link}get is_list(){return call_data.is_list&&btype_id!=="null"}get category(){return"plugins"}get parameters(){return parameters}get get_headers(){return call_data.get_headers}get return_type(){return call_data.no_types||["XML","image","file","text","number"].includes(call_data.data_type)?"raw":"json"}get data_type_for_ajax_call(){return data_type_for_ajax_call}get wrap_error(){return call_data.wrap_error}get can_be_used_as_action(){return call_data.publish_as==="action"}get_authenticator(){return this.service().get_authenticator(call_data.api_id)}build(prev,properties){return call_objects.generate_request_from_call_data(call_data,properties,plugin_name,_ref=>{let{param_id,type,miss_ok=!1}=_ref;if(!BASE)return["shared_headers","shared_params"].includes(type)?this.get_key(type+"_"+param_id,void 0,miss_ok):this.get_key(call_id+"_"+type+"_"+param_id,void 0,miss_ok)})}post_processing(response,properties,raw_response,raw_request){var _response$body;let scope_data={data_type:call_data.data_type,passed_url:call_data.url,api_human:call_data.api_human,name:call_data.name,get_headers:this.get_headers,wrap_error:this.wrap_error,returned_an_error:response==null||(_response$body=response.body)==null?void 0:_response$body.returned_an_error};return post_processing(properties,raw_response,raw_request,scope_data)}}};var new_line_regex=/\n/g,BODY_UNUSED="BODY UNUSED",INITIAL_API_CONNECTOR_REQUEST_TIMEOUT=2.5*time_consts.MINUTE_MS,API_CONNECTOR_MAX_RETRIES=4;function get_timeout_and_retries(){return{timeout:INITIAL_API_CONNECTOR_REQUEST_TIMEOUT,max_retries:API_CONNECTOR_MAX_RETRIES}}call_objects.generate_request_from_call_data=function(call_data,properties,plugin_name,get_key_fn){var _properties,_properties$url,_call_data$body;(_properties=properties)!=null||(properties={});let method=call_objects.methods[call_data.method],body_type=call_objects.method_uses_body(call_data.method)?call_data.body_type:BODY_UNUSED,path=(_properties$url=properties.url)!=null?_properties$url:call_data.url,is_initialize_mode=properties==null;function get_param_val(type,param_id,raw){var _properties2;let properties_key=u.encode_key("".concat(type,"_").concat(raw.key)),value_from_properties=(_properties2=properties)==null?void 0:_properties2[properties_key],default_value=raw.value;if(raw.optional&&!is_initialize_mode)if(u.is_empty(properties))logger.warn("inconsistent blank api optional param autofilled",{default_value,param_id,type,raw});else return value_from_properties;if(value_from_properties===""&&![null,void 0,""].includes(default_value)&&(value_from_properties=void 0),raw.allow_blank&&!call_data.initialize_mode){var _value_from_propertie;return(_value_from_propertie=value_from_properties)!=null?_value_from_propertie:get_key_fn==null?void 0:get_key_fn({param_id,type,miss_ok:!0})}else{var _ref2,_value_from_propertie2;return(_ref2=(_value_from_propertie2=value_from_properties)!=null?_value_from_propertie2:default_value)!=null?_ref2:get_key_fn==null?void 0:get_key_fn({param_id,type,miss_ok:!1})}}call_data.url_params&&(path=parsing_utils.apply_template_params(path,"bracket",call_data.url_params,get_param_val.bind(null,"url_params"))),u.on_server()&&(path=parsing_utils.sanitize_url(path,call_data));let headers;if(call_data.headers!=null){headers={};for(let header_id in call_data.headers){let header=call_data.headers[header_id];if(!call_objects.validate_header_name(header.key))throw new u.OwnerError("Header name is not correct",{display:call_data.api_human+" error: this header name is not correct "+header.key});let set_val=get_param_val("headers",header_id,header);if(!header.optional||header.optional&&![null,void 0,""].includes(set_val)){if(!call_objects.validate_header_value(set_val))throw new u.OwnerError("header value is not correct",{display:call_data.api_human+" error: this header value for "+header.key+" is not correct "+set_val});headers[header.key.trim()]=set_val}if(!header.optional&&[null,void 0,""].includes(set_val))return{dont_do_call:!0,message:call_data.api_human+" error: the header "+header.key+" is empty and is mandatory"}}}let body;if(body_type!==BODY_UNUSED&&body_type!=="form_data"&&![null,void 0,""].includes((_call_data$body=call_data.body)==null?void 0:_call_data$body.trim()))if(!_is_body_dynamic(call_data)||properties.body==null){if(body=call_data.body,call_data.body_params){let get_body_param=function(param_id,body_param){let v=get_param_val("body_params",param_id,body_param);return[null,void 0,""].includes(v)?"null":v};call_data.data_type==="XML"||body_type==="plain_text"?body=parsing_utils.apply_template_params(body,"_*_",call_data.body_params,get_body_param):body=parsing_utils.apply_template_params(body,"less_than",call_data.body_params,(param_id,body_param)=>get_body_param(param_id,body_param).replace(new_line_regex,"\\n"))}}else body=properties.body;let is_raw_body=body_type==="plain_text",data,qs;if(call_data.params!=null){data={},qs={};for(let param_id in call_data.params){let param=call_data.params[param_id];if(param.key!=null){let set_val=get_param_val("params",param_id,param),key=param.key.trim(),use_qs=body_type===BODY_UNUSED||param.querystring&&body_type!=="form_data",val_absent=[null,void 0,""].includes(set_val),val_optional=param.optional||use_qs&&!param.binary_file;if(val_absent&&!val_optional)return{dont_do_call:!0,message:"".concat(call_data.api_human," error: the parameter ").concat(key," cannot be empty")};if(val_absent)continue;if(use_qs)qs[key]=set_val;else if(param.binary_file){set_val.slice(0,2)==="//"&&(set_val="http:"+set_val);let filename=decodeURIComponent(set_val.split("/").pop()),response;try{response=Lib().http_request({uri:set_val,encoding:null}).block()}catch(e){return{dont_do_call:!0,message:"Error trying to fetch file at URL '".concat(set_val,"': ").concat(e.message)}}if(response.statusCode!==200)return{dont_do_call:!0,message:plugin_name+" error: the parameter "+key+" is not a valid file"};data[key]={value:response.body,options:{filename}}}else data[key]=set_val}}if(qs!=null&&u.is_empty(qs)&&(qs=void 0),data!=null&&!is_raw_body){if(u.is_empty(data))data=void 0;else if(body!=null){try{body=u.json_parse(body)}catch(err){throw new u.OwnerError("Body could not be parsed",{display:call_data.api_human+" error: this body could not be parsed as JSON "+body})}u.extend(body,data),data=void 0}}}is_raw_body&&(data=void 0);let encoding;["image","file"].includes(call_data.data_type)&&(encoding=null);let{timeout,max_retries}=get_timeout_and_retries(),obj={method,path,headers,encoding,timeout,max_retries};if(body_type==="form_data")obj.formData=data;else if(body_type===BODY_UNUSED){var _qs;obj.qs=(_qs=qs)!=null?_qs:{}}else obj.body=body,obj.data=data,obj.qs=qs;return obj};call_objects.validate_header_name=function(val){if(typeof val!="string"||!(val!=null&&val.length))return!1;for(let i=0;i<val.length;i++){let ch=val.charCodeAt(i);if(!(ch>=65&&ch<=90)&&!(ch>=97&&ch<=122)&&![94,95,96,124,126].includes(ch)&&![48,49,50,51,52,53,54,55,56].includes(ch)){if(ch>=33&&ch<=46){if([34,40,41,44].includes(ch))return!1;continue}return!1}}return!0};call_objects.validate_header_value=function(val){if(val==null||(val=""+val,!val.length))return!1;for(let i=0;i<val.length;i++){let ch=val.charCodeAt(i);if(ch!==9&&(ch<=31||ch>255||ch===127))return!1}return!0};call_objects.add_shared_params_and_headers=function(api_data,req,name,get_header_fn,get_param_fn){let set_val;if(api_data.shared_headers!=null){var _req$headers;(_req$headers=req.headers)!=null||(req.headers={});for(let header_id in api_data.shared_headers){let header=api_data.shared_headers[header_id];if(req.headers[header.key]==null&&header.key){if(!call_objects.validate_header_name(header.key)){var _api_data$human;throw new u.OwnerError("Header name is not correct",{display:((_api_data$human=api_data.human)!=null?_api_data$human:name)+" error: this header name is not correct "+header.key})}if(set_val=get_header_fn(header_id,header),!call_objects.validate_header_value(set_val)){var _api_data$human2;throw new u.OwnerError("Header Value not correct",{display:((_api_data$human2=api_data.human)!=null?_api_data$human2:name)+" error: this header value for "+header.key+" is not correct "+set_val})}req.headers[header.key]=set_val}}}if(api_data.shared_params!=null){var _ref3,_ref4,_req$data;let req_contents=(_ref3=(_ref4=(_req$data=req.data)!=null?_req$data:req.body)!=null?_ref4:req.formData)!=null?_ref3:req.qs,to_modify=req_contents!=null?req_contents:{};for(let param_id in api_data.shared_params){let param=api_data.shared_params[param_id];typeof to_modify=="object"&&to_modify[param.key]==null&&param.key&&(set_val=get_param_fn(param_id,param),to_modify[param.key]=set_val)}req_contents||(req.body=to_modify)}}}});var require_auth_classes=__commonJS({"lib-browser-old/apiconnectorbase/auth_classes.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.APIConnectorBasicAuth=exports.APIConnectorBaseSSLProtocol=exports.APIConnectorBasePrivateKey=exports.APIConnectorBaseOauth2PWFlow=exports.APIConnectorBaseOauth2Custom=exports.APIConnectorBaseOauth2=exports.APIConnectorBaseJWT=void 0;var _lib=_interopRequireDefault(require_lib()),db=_interopRequireWildcard(require_db2()),_appquery=_interopRequireDefault(require_appquery()),locations_consts=_interopRequireWildcard(require_locations()),authenticators=_interopRequireWildcard(require_authenticators());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _get_api_key(api_obj,key_name){if(api_obj)if(_appquery.default.app_version()!==locations_consts.LIVE_VERSION){var _api_obj;return(_api_obj=api_obj[key_name+"_test"])!=null?_api_obj:api_obj[key_name]}else return api_obj[key_name]}var APIConnectorBasePrivateKey=class extends authenticators.PrivateKey{constructor(params){super(params);let api_obj=this._get_api();this.params.token_param_name||(api_obj.auth==="private_key_url"?this.params.token_param_name="private_key":api_obj.auth==="private_key_header"&&(this.params.token_param_name="Authorization"))}get_secret_key(){return _get_api_key(this._get_api(),"private_key")}};exports.APIConnectorBasePrivateKey=APIConnectorBasePrivateKey;var APIConnectorBasicAuth=class extends authenticators.BasicAuth{get_secret_key(){var _this$_get_api;return(_this$_get_api=this._get_api())==null?void 0:_this$_get_api.password}get_public_key(){var _this$_get_api2;return(_this$_get_api2=this._get_api())==null?void 0:_this$_get_api2.username}};exports.APIConnectorBasicAuth=APIConnectorBasicAuth;var APIConnectorBaseSSLProtocol=class extends authenticators.SSLProtocol{get_key(name){var _this$_get_api3;return(_this$_get_api3=this._get_api())==null?void 0:_this$_get_api3[name]}};exports.APIConnectorBaseSSLProtocol=APIConnectorBaseSSLProtocol;var APIConnectorBaseOauth2PWFlow=class extends authenticators.Oauth2PWFlow{get_secret_key(){var _this$_get_api4;return(_this$_get_api4=this._get_api())==null?void 0:_this$_get_api4.password}get_public_key(){var _this$_get_api5;return(_this$_get_api5=this._get_api())==null?void 0:_this$_get_api5.username}};exports.APIConnectorBaseOauth2PWFlow=APIConnectorBaseOauth2PWFlow;var APIConnectorBaseOauth2Custom=class extends authenticators.Oauth2Custom{_get_token_request(){return this.service().get_call(this.params.call_id+".token_call").build()}};exports.APIConnectorBaseOauth2Custom=APIConnectorBaseOauth2Custom;var APIConnectorBaseJWT=class extends authenticators.JWT{get_key(name){var _this$_get_api6;return name==="iss"?this.get_property("iss"):(_this$_get_api6=this._get_api())==null?void 0:_this$_get_api6[name]}};exports.APIConnectorBaseJWT=APIConnectorBaseJWT;var APIConnectorBaseOauth2=class extends authenticators.Oauth2{get_secret_key(){return _get_api_key(this._get_api(),"appsecret")}get_public_key(){return _get_api_key(this._get_api(),"appid")}get_oauth_user_data_call(){return this.service().get_call(this.params.api_id+"_oauth_user_data_call")}get_user_authentication_node(user){return(0,_lib.default)().is_edit_mode()?new db.StaticNode(this.get_owner_token_data(),null,"sys.json"):super.get_user_authentication_node(user)}tested(){return this._get_api().tested}has_token_data(){return this._get_api().has_token_data}get_owner_token_data(){return this._get_api().token_data}};exports.APIConnectorBaseOauth2=APIConnectorBaseOauth2}});var require_external_api_utilities=__commonJS({"lib-browser-old/shared/external_api_utilities.js"(exports){"use strict";init_define_process_env();init_shim();require_es_regexp_exec();require_es_string_replace();var safe_require=require_safe_require(),retryable=require_retryable(),errors=require_errors(),external_api_utilities=exports;safe_require.safe_register("./shared/external_api_utilities",external_api_utilities);external_api_utilities.handle_request_failures=err=>{let err_message=String(err.message);return err_message.indexOf("ENOTFOUND")!==-1?new errors.OwnerError("Could not find domain",{display:"Could not find domain:"+err_message.replace("ENOTFOUND","")}):err_message.indexOf("Failed to establish a connection after")!==-1?new errors.OwnerError("Failed to establish a connection",{display:err_message}):err_message.indexOf("ESOCKETTIMEDOUT")!==-1||err_message.indexOf("ETIMEDOUT")!==-1?new errors.OwnerError("Could not connect to remote server"):err_message.indexOf("certificate has expired")!==-1?new errors.OwnerError("The remote server's SSL certificate has expired"):err_message.indexOf("certificate not trusted")!==-1?new errors.OwnerError("There is an issue with the remote server's SSL certificate"):err_message.indexOf("self signed certificate")!==-1?new errors.OwnerError("The remote server's SSL certificate is self-signed"):err_message.indexOf("Invalid protocol")!==-1?new errors.OwnerError("The request protocol is invalid, it should only be 'http' or 'https'"):err_message.indexOf("unable to verify the first certificate")!==-1?new errors.OwnerError("There is an issue with the remote server's SSL certificate"):err_message.indexOf("Hostname/IP doesn't match certificate's altnames")!==-1?new errors.OwnerError("SSL Cert mismatch",{display:err_message}):err_message.indexOf("Hostname/IP does not match certificate's altnames")!==-1?new errors.OwnerError("SSL Cert mismatch",{display:err_message}):err_message.indexOf("Exceeded maxRedirects")!==-1?new errors.OwnerError("request maxRedirects",{display:err_message}):retryable.is_retryable(err)?new errors.OwnerError("Could not connect to the remote server"):err}}});var require_BaseAPIConnector=__commonJS({"lib-browser-old/apiconnectorbase/BaseAPIConnector.js"(exports,module){"use strict";init_define_process_env();init_shim();require_web_dom_collections_for_each();require_es_array_reduce();require_es_array_reverse();require_es_regexp_to_string();require_es_array_includes();require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_sort();var _dec,_dec2,_dec3,_dec4,_dec5,_dec6,_dec7,_dec8,_dec9,_class;function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key]}),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce(function(desc2,decorator){return decorator(target,property,desc2)||desc2},desc),context&&desc.initializer!==void 0&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),desc.initializer===void 0&&(Object.defineProperty(target,property,desc),desc=null),desc}var lodashIsEqual=require_isEqual(),u=require_u2(),Lib=require_lib(),caching=require_caching(),plugin_consts=require_plugin(),external_api_utilities=require_external_api_utilities(),btype_ids=require_btype_ids(),ExternalCall=require_ExternalCall(),ExternalService=require_ExternalService(),StructValue=require_StructValue(),call_objects=require_call_objects(),call_btypes=require_call_btypes(),post_processing=require_post_processing(),xml_to_json=require_xml_to_json(),BaseAPIConnector=(_dec=caching.cached({type:caching.AUTORUN}),_dec2=caching.cached({type:caching.AUTORUN}),_dec3=caching.cached({type:caching.AUTORUN}),_dec4=caching.cached({type:caching.AUTORUN}),_dec5=caching.cached({type:caching.AUTORUN}),_dec6=caching.cached({type:caching.AUTORUN}),_dec7=caching.cached({type:caching.AUTORUN}),_dec8=caching.cached({type:caching.AUTORUN,compare_fn(a,b){return a!=null&&a.call_raw_data&&b!=null&&b.call_raw_data?lodashIsEqual(a.call_raw_data,b.call_raw_data):u.compare(a,b)}}),_dec9=caching.cached({type:caching.AUTORUN}),_class=class extends ExternalService{get dynamic_calls(){return!0}public_values(){let res=[],object2=this.get_all_apis();for(let api_id in object2){let api_data=object2[api_id];for(let call_id in api_data.calls){let call_data=api_data.calls[call_id];if(call_data.initialized){if(call_data.no_types)continue;for(let val_name in call_data.types)res.push(val_name)}}}return res}values(){let vals={},object2=this.get_all_apis();for(let api_id in object2){let api_data=object2[api_id];api_data.auth==="oauth2_user"&&(vals[api_id+"_oauth_profile"]=new StructValue("Profile "+api_data.human,{id:{path:api_data.id_path!=null?api_data.id_path.split("."):void 0},email:{path:api_data.email_path!=null?api_data.email_path.split("."):void 0}})),call_btypes.get_btypes_from_call(api_id,api_data,vals,this.key_prefix)}return vals}public_calls(){return this._get_sorted_list("data")}action_calls(){return this._get_sorted_list("action")}user_calls(){let res=[],object2=this.get_all_apis();for(let api_id in object2)object2[api_id].auth==="oauth2_user"&&res.push(api_id+"_oauth_user_data_call");return res}oauth_providers(){let res=[],object2=this.get_all_apis();for(let api_id in object2){let api_data=object2[api_id];api_data.auth==="oauth2_user"&&res.push({id:this.BASE+plugin_consts.PLUGIN_SEPARATOR+api_id,display:"API - "+api_data.human})}return res}get do_not_report_error(){return!0}get_call_class(call_name){let obj=this.calls()[call_name];if(obj!=null)return call_name.indexOf("_oauth_user_data_call")!==-1||call_name==="TestAPICall"?obj:call_objects.get_call_from_raw(call_name.split(".")[1],obj,this.plugin_name,this.BASE)}get_call(call_name){let call_data=this._instantiate_call(call_name,this.get_call_class(call_name));if(!call_data&&!Lib().is_edit_mode()&&call_name.indexOf("_oauth_user_data_call")===-1)throw new u.OwnerError("missing call",{display:this.plugin_name+" error: the call "+call_name+" is missing, please reinitialize your calls."});return call_data}calls(){let calls={},{BASE}=this,{plugin_name}=this,object2=this.get_all_apis();for(let api_id in object2){let api_data=object2[api_id];if(api_data.auth==="oauth2_user"){let call_name=api_id+"_oauth_user_data_call";calls[call_name]=class extends ExternalCall{get human(){return api_data.human}get _must_proxy(){return!0}get value_id(){return btype_ids.api_type(BASE+"."+api_id+"_oauth_profile")}build(prev,properties){return api_data.oauth_user_data_call?{path:api_data.oauth_user_data_call}:{dont_do_call:!0,message:plugin_name+" error: the User profile endpoint is missing, please check your configuration.",force_error_message:!0}}get_authenticator(){return this.service().get_authenticator(api_id)}}}for(let call_id in api_data.calls){let call_data=api_data.calls[call_id];call_data.api_human=api_data.human,call_data.api_id=api_id,calls[api_id+"."+call_id]=call_data}}return calls}constructor(){super(),this.keys={}}handle_request_failures(error){return external_api_utilities.handle_request_failures(error)}_get_sorted_list(type){let sorted_list=[],r=0,object2=this.get_all_apis();for(let api_id in object2){let api_data=object2[api_id];for(let call_id in api_data.calls){var _call_data$publish_as,_call_data$rank;let call_data=api_data.calls[call_id];(_call_data$publish_as=call_data.publish_as)!=null||(call_data.publish_as="data"),!(call_data.publish_as!==type||!call_objects.is_call_initialized(call_data))&&(sorted_list.push({id:api_id+"."+call_id,rank:(_call_data$rank=call_data.rank)!=null?_call_data$rank:r}),r++)}}return sorted_list.sort((a,b)=>a.rank<b.rank?-1:1),sorted_list.map(a=>a.id)}base_url(){return""}response_to_data(data,response,data_type,call){let body=super.response_to_data(data,response,data_type,call,call==null?void 0:call.wrap_error);if(call!=null&&call.get_headers||call!=null&&call.wrap_error){let{headers}=response;return{body,headers}}return body}get_error_message(response,call){return call_objects.get_error_message(response,call)}},_applyDecoratedDescriptor(_class.prototype,"public_values",[_dec],Object.getOwnPropertyDescriptor(_class.prototype,"public_values"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"values",[_dec2],Object.getOwnPropertyDescriptor(_class.prototype,"values"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"public_calls",[_dec3],Object.getOwnPropertyDescriptor(_class.prototype,"public_calls"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"action_calls",[_dec4],Object.getOwnPropertyDescriptor(_class.prototype,"action_calls"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"user_calls",[_dec5],Object.getOwnPropertyDescriptor(_class.prototype,"user_calls"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"oauth_providers",[_dec6],Object.getOwnPropertyDescriptor(_class.prototype,"oauth_providers"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"get_call_class",[_dec7],Object.getOwnPropertyDescriptor(_class.prototype,"get_call_class"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"get_call",[_dec8],Object.getOwnPropertyDescriptor(_class.prototype,"get_call"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"calls",[_dec9],Object.getOwnPropertyDescriptor(_class.prototype,"calls"),_class.prototype),_class);module.exports=BaseAPIConnector}});var require_apiconnectorbase2=__commonJS({"lib-browser-old/apiconnectorbase/index.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.APIConnectorBasicAuth=exports.APIConnectorBaseSSLProtocol=exports.APIConnectorBasePrivateKey=exports.APIConnectorBaseOauth2PWFlow=exports.APIConnectorBaseOauth2Custom=exports.APIConnectorBaseOauth2=exports.APIConnectorBaseJWT=void 0;Object.defineProperty(exports,"APIConnectorStructValue",{enumerable:!0,get:function(){return _APIConnectorStructValue.default}});Object.defineProperty(exports,"BaseAPIConnector",{enumerable:!0,get:function(){return _BaseAPIConnector.default}});exports.generate_request_from_call_data=exports.find_between_characters=exports.can_be_in_browser=exports.add_shared_params_and_headers=void 0;exports.get_btypes_from_call=get_btypes_from_call;exports.validate_header_value=exports.validate_header_name=exports.user_friendly_parameter_names=exports.sanitize_url=exports.methods=exports.method_uses_body=exports.is_call_initialized=exports.get_private_key_auth_params=exports.get_oauth2_user_auth_params=exports.get_oauth2_pw_auth_params=exports.get_jwt_auth_params=exports.get_error_message=exports.get_call_from_raw=void 0;Object.defineProperty(exports,"xml_to_json",{enumerable:!0,get:function(){return _xml_to_json.default}});require_es_array_iterator();require_web_dom_collections_iterator();var safe_require=_interopRequireWildcard(require_safe_require()),template_parser=_interopRequireWildcard(require_template_parser()),call_objects=_interopRequireWildcard(require_call_objects()),_xml_to_json=_interopRequireDefault(require_xml_to_json()),auth_classes=_interopRequireWildcard(require_auth_classes()),call_btypes=_interopRequireWildcard(require_call_btypes()),_APIConnectorStructValue=_interopRequireDefault(require_APIConnectorStructValue()),_BaseAPIConnector=_interopRequireDefault(require_BaseAPIConnector()),parsing_utils=_interopRequireWildcard(require_parsing_utils());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}safe_require.safe_register("./apiconnectorbase",exports);var find_between_characters=template_parser.find_between_characters;exports.find_between_characters=find_between_characters;var methods=call_objects.methods;exports.methods=methods;var method_uses_body=call_objects.method_uses_body;exports.method_uses_body=method_uses_body;var user_friendly_parameter_names=call_objects.user_friendly_parameter_names;exports.user_friendly_parameter_names=user_friendly_parameter_names;var can_be_in_browser=call_objects.can_be_in_browser;exports.can_be_in_browser=can_be_in_browser;var get_call_from_raw=call_objects.get_call_from_raw;exports.get_call_from_raw=get_call_from_raw;var sanitize_url=parsing_utils.sanitize_url;exports.sanitize_url=sanitize_url;var generate_request_from_call_data=call_objects.generate_request_from_call_data;exports.generate_request_from_call_data=generate_request_from_call_data;var validate_header_name=call_objects.validate_header_name;exports.validate_header_name=validate_header_name;var validate_header_value=call_objects.validate_header_value;exports.validate_header_value=validate_header_value;var add_shared_params_and_headers=call_objects.add_shared_params_and_headers;exports.add_shared_params_and_headers=add_shared_params_and_headers;var is_call_initialized=call_objects.is_call_initialized;exports.is_call_initialized=is_call_initialized;var get_error_message=call_objects.get_error_message;exports.get_error_message=get_error_message;var APIConnectorBasePrivateKey=auth_classes.APIConnectorBasePrivateKey;exports.APIConnectorBasePrivateKey=APIConnectorBasePrivateKey;var APIConnectorBasicAuth=auth_classes.APIConnectorBasicAuth;exports.APIConnectorBasicAuth=APIConnectorBasicAuth;var APIConnectorBaseSSLProtocol=auth_classes.APIConnectorBaseSSLProtocol;exports.APIConnectorBaseSSLProtocol=APIConnectorBaseSSLProtocol;var APIConnectorBaseOauth2PWFlow=auth_classes.APIConnectorBaseOauth2PWFlow;exports.APIConnectorBaseOauth2PWFlow=APIConnectorBaseOauth2PWFlow;var APIConnectorBaseOauth2Custom=auth_classes.APIConnectorBaseOauth2Custom;exports.APIConnectorBaseOauth2Custom=APIConnectorBaseOauth2Custom;var APIConnectorBaseJWT=auth_classes.APIConnectorBaseJWT;exports.APIConnectorBaseJWT=APIConnectorBaseJWT;var APIConnectorBaseOauth2=auth_classes.APIConnectorBaseOauth2;exports.APIConnectorBaseOauth2=APIConnectorBaseOauth2;function get_btypes_from_call(){return call_btypes.get_btypes_from_call(...arguments)}var get_private_key_auth_params=api_data=>({token_param_name:api_data.token_param_name,add_to_header:api_data.auth==="private_key_header",add_to_url:api_data.auth==="private_key_url"});exports.get_private_key_auth_params=get_private_key_auth_params;var get_oauth2_user_auth_params=api_data=>{var _api_data$token_param,_api_data$auth_url_pa;return{token_param_name:(_api_data$token_param=api_data.token_param_name)!=null?_api_data$token_param:"access_token",header_key:api_data.header_key,scope:api_data.scope,authentication_url:api_data.authentication_url,generate_token_from_code_uri:api_data.generate_token_from_code_uri,add_to_header:api_data.add_to_header,auth_url_params:(_api_data$auth_url_pa=api_data.auth_url_params)!=null?_api_data$auth_url_pa:{},add_to_url:!api_data.add_to_header,add_basic_authentication:api_data.add_basic_authentication,data_type:api_data.token_data_type?"querystring":void 0,access_type:api_data.add_offline?"offline":void 0,prompt:api_data.add_offline?"consent":void 0,server_redirect:api_data.server_redirect}};exports.get_oauth2_user_auth_params=get_oauth2_user_auth_params;var get_oauth2_pw_auth_params=api_data=>({generate_token_from_code_uri:api_data.token_endpoint,grant_type:"password",use_username_password:!0});exports.get_oauth2_pw_auth_params=get_oauth2_pw_auth_params;var get_jwt_auth_params=api_data=>({iss:api_data.iss,scope:api_data.scope,generate_token_from_code_uri:api_data.generate_token_from_code_uri});exports.get_jwt_auth_params=get_jwt_auth_params}});var require__=__commonJS({"lib-browser-old/pv/0.js"(exports){"use strict";init_define_process_env();init_shim();require_web_dom_collections_for_each();require_es_object_entries();require_es_array_iterator();require_web_dom_collections_iterator();require_es_regexp_exec();require_es_string_replace();var pv=exports;pv.message="Initial API Version";pv.changelog=[];pv.date=1477087595e3;pv.fix_server_dates=!1;pv.fix_server_field_types=function(types){Object.entries(types).forEach(_ref=>{let[field,type]=_ref;types[field]=type.replace("Date","String")})};pv.old_server_list=!0}});var require__2=__commonJS({"lib-browser-old/pv/1.js"(exports){"use strict";init_define_process_env();init_shim();var pv=exports;pv.bubble_props_as_functions=!1;pv.message="Updated server-side actions API to match client-side one";pv.changelog=["Changed List.get() for server-side actions to be (start, length), just like client-side actions, instead of (start, end)","Dates now get correctly passed in as Javascript Date objects on the server, instead of Strings"];pv.date=1598479637e3}});var require__3=__commonJS({"lib-browser-old/pv/2.js"(exports){"use strict";init_define_process_env();init_shim();var pv=exports;pv.message="Changed properties object from static properties to functions";pv.changelog=["Changed properties object from static properties to get functions; this allows plugin elements ","to be defined with conditional properties that depend on the element's own states","state without throwing a recursion error."];pv.date=1605784035408;pv.responsive_version=0}});var require__4=__commonJS({"lib-browser-old/pv/3.js"(exports){"use strict";init_define_process_env();init_shim();var pv=exports;pv.message="Updated plugin editor to the new responsive engine";pv.changelog=["Changed the properties exposed on properties.bubble to the new responsive properties","Added options for elements to fit width or fit height","Can still access width/height to re-run update function on resize","On legacy engine, plugin elements should still work"];pv.date=1648335983613}});var require_alpha=__commonJS({"lib-browser-old/pv/4_alpha.js"(exports){"use strict";init_define_process_env();init_shim();var pv=exports;pv.message="Updated plugins to run on node 18";pv.changelog=["Moved context.request and context.async to context.v3 and they now return promises","Modified .get and .length to return promises","Added a utility method getAll() and a field id","Made lists implement AsyncIterable interface","Addded isBubbleThing and isBubbleList in place of single_api and list_api. single_api and list_api are still present","Added getThingById and getThingsById to the context object","See forum post here: https://forum.bubble.io/t/alpha-invite-for-plugin-developers-bubble-plugin-api-version-4/262297"];pv.date=1680546487e3}});var require__5=__commonJS({"lib-browser-old/pv/4.js"(exports){"use strict";init_define_process_env();init_shim();var pv=exports;pv.message="Updated plugins to run on node 18";pv.changelog=["Moved context.request and context.async to context.v3 and they now return promises","Modified .get and .length to return promises","Added a utility method getAll() and a field id","Made lists implement AsyncIterable interface","Addded isBubbleThing and isBubbleList in place of single_api and list_api. single_api and list_api are still present","Added getThingById and getThingsById to the context object"];pv.date=1686667570313}});var require_latest=__commonJS({"lib-browser-old/pv/latest.js"(exports){"use strict";init_define_process_env();init_shim();var pv=exports;pv.fix_server_dates=!0;pv.fix_server_field_types=types=>types;pv.old_server_list=!1;pv.bubble_props_as_functions=!0;pv.responsive_version=1}});var require_plugin_versioning=__commonJS({"lib-browser-old/pv/plugin_versioning.js"(exports){"use strict";init_define_process_env();init_shim();var u=require_u2(),v0=require__(),v1=require__2(),v2=require__3(),v3=require__4(),v4_alpha=require_alpha(),v4=require__5(),plugin_versioning=exports;plugin_versioning.LATEST_VERSION="4";plugin_versioning.LATEST_PUBLIC_VERSION=4;var _versions=null,plugin_versions=["0","1","2","3","4_alpha","4"],api_version_info={0:{display_name:"0",node_version:14,is_public:!0,can_upgrade:!0},1:{display_name:"1",node_version:14,is_public:!0,can_upgrade:!0},2:{display_name:"2",node_version:14,is_public:!0,can_upgrade:!0},3:{display_name:"3",node_version:14,is_public:!0,can_upgrade:!1},"4_alpha":{display_name:"4 (alpha)",node_version:18,is_public:!1,can_upgrade:!1},4:{display_name:"4",node_version:18,is_public:!0,can_upgrade:!1}};plugin_versioning.get_pv_metadata=function(version){return api_version_info[version!=null?version:"0"]};var _all_version_messages=null;plugin_versioning.get_all_version_messages=function(){if(!_all_version_messages){_all_version_messages=[];for(let i=0;i<plugin_versions.length;i++){let{message,changelog,date}=_raw[to_name(i)];_all_version_messages.push({id:to_name(i),message,changelog,date})}}return _all_version_messages};function to_name(i){return plugin_versions[i]}var _raw={};_raw[0]=v0;_raw[1]=v1;_raw[2]=v2;_raw[3]=v3;_raw["4_alpha"]=v4_alpha;_raw[4]=v4;plugin_versioning.get_pv=function(version){return _versions||init(),_versions[version!=null?version:"0"]};function _get_pv(i){return _raw[i]}function init(){let processing=require_latest();_versions={};for(let i=plugin_versions.length;i>=0;i--)processing=_versions[to_name(i)]=u.extend({},processing,_get_pv(to_name(i)))}plugin_versioning.meta_mapping={0:0,1:1,2:2,3:3,"4_alpha":4,4:5}}});var require_SignUp=__commonJS({"lib-browser-old/core/core_actions/account/SignUp.js"(exports){"use strict";init_define_process_env();init_shim();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;require_es_symbol_description();require_es_error_cause();var u=_interopRequireWildcard(require_u2()),account_actions_utilities=_interopRequireWildcard(require_account_actions_utilities()),generic_actions_utilities=_interopRequireWildcard(require_generic_actions_utilities()),eval_consts=_interopRequireWildcard(require_eval()),_lib=_interopRequireDefault(require_lib());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var exported={field_names:_objectSpread({email:{},password:{},password2:{},require_confirm:{},send_confirm_email:{},page:{},remember_email:{optional:!0}},generic_actions_utilities.change_field_names(eval_consts.EVAL_TYPE.value)),run(action,properties,context,cb){context.get_server_outcome(action,(err,res)=>{if(account_actions_utilities.get_iframe_for_cookie_phonegap(),err){cb(err);return}(0,_lib.default)().current_user().flush(),properties.remember_email===!0&&u.local_storage_put(account_actions_utilities.get_remember_email_key(),{email:properties.email}),cb(err,res)})},server_method:"sign_up",data_to_refresh:account_actions_utilities.refresh_current_user,preprocess_properties(properties){let thing_btype_id="user",prop_name="changes";return properties=generic_actions_utilities.pre_process_properties({properties,prop_name,thing_btype_id}),properties=generic_actions_utilities.apply_default_fields(prop_name,thing_btype_id,properties),properties},requires_cookies:!0},_default=exported;exports.default=_default}});var require_OAuthLogin=__commonJS({"lib-browser-old/core/core_actions/account/OAuthLogin.js"(exports,module){"use strict";init_define_process_env();init_shim();var services=require_services(),lang_consts=require_lang(),account_actions_utilities=require_account_actions_utilities();module.exports={field_names:lang_consts.DETECT_FIELD_NAMES,not_api:!0,run(action,properties,context,cb){context.get_server_outcome(action,(err,res)=>{if(err){cb(err);return}let{oauth_provider}=properties,authenticator=services.get_oauth_authenticator(oauth_provider);if(!authenticator||!authenticator.login){oauth_provider?window.alert("Undefined oauth provider: "+oauth_provider):window.alert("Oops, please fill out the social network for this action"),cb("aborted");return}authenticator.login(context,action,res,cb)})},resume(action,context,cb){context.get_server_outcome(action,cb)},server_method:"oauth_login",server_method_resume:"oauth_login_resume",data_to_refresh:account_actions_utilities.refresh_current_user,requires_cookies:!0}}});var require_LogIn=__commonJS({"lib-browser-old/core/core_actions/account/LogIn.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_includes();var u=require_u2(),account_actions_utilities=require_account_actions_utilities(),appquery=require_appquery();module.exports={field_names:{email:{},password:{},stay_logged_in:{default:!0},remember_email:{optional:!0}},run(action,properties,context,cb){context.get_server_outcome(action,(err,res)=>{properties.remember_email&&u.local_storage_put(account_actions_utilities.get_remember_email_key(),{email:properties.email}),account_actions_utilities.get_iframe_for_cookie_phonegap(),cb(err,res)})},server_method:"log_in",data_to_refresh:account_actions_utilities.refresh_current_user,requires_cookies:!0}}});var require_LogOut=__commonJS({"lib-browser-old/core/core_actions/account/LogOut.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var account_actions_utilities=_interopRequireWildcard(require_account_actions_utilities());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var exported={field_names:{},run(action,properties,context,cb){context.get_server_outcome(action,(err,res)=>{account_actions_utilities.get_iframe_for_cookie_phonegap(),cb(err,res)})},server_method:"log_out",requires_cookies:!0,data_to_refresh:account_actions_utilities.refresh_current_user},_default=exported;exports.default=_default}});var require_CookieOptIn=__commonJS({"lib-browser-old/core/core_actions/account/CookieOptIn.js"(exports,module){"use strict";init_define_process_env();init_shim();var account_actions_utilities=require_account_actions_utilities();module.exports={field_names:{},run(action,properties,context,cb){context.get_server_outcome(action,cb)},server_method:"cookie_opt_in",requires_cookies:!0,data_to_refresh:account_actions_utilities.refresh_current_user}}});var require_CookieOptOut=__commonJS({"lib-browser-old/core/core_actions/account/CookieOptOut.js"(exports,module){"use strict";init_define_process_env();init_shim();var account_actions_utilities=require_account_actions_utilities();module.exports={field_names:{},run(action,properties,context,cb){context.get_server_outcome(action,cb)},server_method:"cookie_opt_out",requires_cookies:!0,data_to_refresh:account_actions_utilities.refresh_current_user}}});var require_UpdateCredentials=__commonJS({"lib-browser-old/core/core_actions/account/UpdateCredentials.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var state_keys=_interopRequireWildcard(require_state_keys()),_lib=_interopRequireDefault(require_lib());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var exported={field_names:{old_password:{},change_email:{},email:{},change_password:{},password:{},require_confirm:{},password2:{},do_not_show_success_alert:{},send_confirm_email:{},page:{default:"index"}},run(action,properties,context,cb){context.get_server_outcome(action,err=>{(0,_lib.default)().current_user().flush(),err?cb(err):(properties.do_not_show_success_alert||alert((0,_lib.default)().get_text("CORE","UPDATE_CREDENTIAL_SUCCESS")),cb())})},server_method:"update_credentials",data_to_refresh(action,properties,element_instance){let d={};if(properties.change_email){let user=(0,_lib.default)().current_user();d[state_keys.Message({prev:user,message:"email",prior_btype_id:"user"})]=properties.email}return d}},_default=exported;exports.default=_default}});var require_ChangeEmailForAnotherUser=__commonJS({"lib-browser-old/core/core_actions/account/ChangeEmailForAnotherUser.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var state_keys=_interopRequireWildcard(require_state_keys());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var exported={field_names:{user:{},new_email:{}},run(action,properties,context,cb){context.get_server_outcome(action,cb)},server_method:"change_email_for_another_user",data_to_refresh(action,properties,element_instance){let d={},{user}=properties;return user!=null&&(d[state_keys.Message({prev:user,message:"email",prior_btype_id:"user"})]=properties.new_email),d}},_default=exported;exports.default=_default}});var require_MakeChangeCurrentUser=__commonJS({"lib-browser-old/core/core_actions/account/MakeChangeCurrentUser.js"(exports){"use strict";init_define_process_env();init_shim();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;require_es_symbol_description();require_es_error_cause();var u=_interopRequireWildcard(require_u2()),db_consts=_interopRequireWildcard(require_db()),data_updates=_interopRequireWildcard(require_data_updates()),generic_actions_utilities=_interopRequireWildcard(require_generic_actions_utilities()),eval_consts=_interopRequireWildcard(require_eval()),_lib=_interopRequireDefault(require_lib());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var exported={field_names:_objectSpread({},generic_actions_utilities.change_field_names(eval_consts.EVAL_TYPE.value)),run(action,properties,context,cb){if(properties.changes&&!u.is_empty(properties.changes)){let current_user=(0,_lib.default)().current_user();data_updates.update_thing(current_user,properties.changes).callback(cb)}else cb()},data_to_refresh(action,properties,element_instance){return generic_actions_utilities.get_data_to_refresh_for_change_action({to_change:(0,_lib.default)().current_user(),to_change_value_id:"user",changes:properties.changes})},return_value(){return null},server_method:"change_current_user",preprocess_properties:generic_actions_utilities.make_pre_process_properties({prop_name:"changes",thing_btype_id:"user"}),fall_back_to_server:!0,requires_server(){return!(u.on_client()&&(0,_lib.default)().current_user()._id()===db_consts.NO_USER)}},_default=exported;exports.default=_default}});var require_SendPasswordResetEmail=__commonJS({"lib-browser-old/core/core_actions/account/SendPasswordResetEmail.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var btypes=_interopRequireWildcard(require_btypes());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var exported={field_names:{to:{},subject:{default:"Your password reset request"},body:{default:"Hello,\n\nSomeone (hopefully you!) submitted a request to reset your password. If it wasn't you, please ignore this message. If it was you, you can reset your password at the below link.\n\nThe Team\n\n"},just_make_token:{}},run(action,properties,context,cb){context.get_server_outcome(action,cb)},server_method:"send_password_reset_email",return_value(action){return action.get_static_property("just_make_token")?btypes.get("text"):null},check_use_visible:!0,data_to_refresh:null,do_not_send_result_to_client:!0},_default=exported;exports.default=_default}});var require_SendMagicLink=__commonJS({"lib-browser-old/core/core_actions/account/SendMagicLink.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var btypes=_interopRequireWildcard(require_btypes());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var exported={field_names:{email:{},subject:{default:"Your magic link"},body:{default:"Hello,\n\nYou requested a magic link to login to your account. Please note that\nthis link can only be used to login once and lasts for one hour.\n\nThe Team\n\n"},link_text:{default:"Login here"},valid_link_time_frame:{default:null,validation_fn(valid_link_time_frame){return valid_link_time_frame<=24&&valid_link_time_frame>0}},success_page:{},success_customize:{},failure_customize:{},data_to_send_success:{},data_to_send_failure:{},add_parameters_success:{},add_parameters_failure:{},url_parameters_success:{},url_parameters_failure:{},keep_current_page_params_success:{},keep_current_page_params_failure:{},failure_page:{},just_make_link:{}},run(action,properties,context,cb){context.get_server_outcome(action,cb)},server_method:"send_magic_link_email",return_value(action){return action.get_static_property("just_make_link")?btypes.get("text"):null},check_use_visible:!0,data_to_refresh:null,do_not_send_result_to_client:!0},_default=exported;exports.default=_default}});var require_SendConfirmationEmail=__commonJS({"lib-browser-old/core/core_actions/account/SendConfirmationEmail.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var btypes=_interopRequireWildcard(require_btypes());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var exported={field_names:{page:{},just_make_token:{}},run(action,properties,context,cb){context.get_server_outcome(action,cb)},server_method:"send_confirmation_email",return_value(action){return action.get_static_property("just_make_token")?btypes.get("text"):null},data_to_refresh:null,check_use_visible:!0},_default=exported;exports.default=_default}});var require_ResetPassword=__commonJS({"lib-browser-old/core/core_actions/account/ResetPassword.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports={field_names:{new_password:{},new_password_again:{}},run(action,properties,context,cb){context.get_server_outcome(action,cb)},server_method:"reset_password",data_to_refresh:null}}});var require_CreateUserAccount=__commonJS({"lib-browser-old/core/core_actions/account/CreateUserAccount.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var mode_check=_interopRequireWildcard(require_mode_check()),b_object=_interopRequireWildcard(require_b_object()),generic_actions_utilities=_interopRequireWildcard(require_generic_actions_utilities()),eval_consts=_interopRequireWildcard(require_eval()),btypes=_interopRequireWildcard(require_btypes());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var exported={field_names:b_object.extend({email:{},password:{},return_user_if_already_exists:{}},generic_actions_utilities.change_field_names(eval_consts.EVAL_TYPE.value)),run(action,properties,context,cb){context.get_server_outcome(action,cb)},server_method:"create_user_account",data_to_refresh:null,return_value(){return btypes.get("user")},preprocess_properties(properties){let thing_btype_id="user",prop_name="changes";return properties=generic_actions_utilities.pre_process_properties({properties,prop_name,thing_btype_id}),typeof properties.email=="string"&&!mode_check.on_server()&&(properties=generic_actions_utilities.apply_default_fields(prop_name,thing_btype_id,properties)),properties}},_default=exported;exports.default=_default}});var require_CheckUserPassword=__commonJS({"lib-browser-old/core/core_actions/account/CheckUserPassword.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports={field_names:{password:{}},run(action,properties,context,cb){context.get_server_outcome(action,cb)},server_method:"check_user_password",data_to_refresh:null}}});var require_SetTemporaryPassword=__commonJS({"lib-browser-old/core/core_actions/account/SetTemporaryPassword.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var btypes=_interopRequireWildcard(require_btypes());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var exported={field_names:{user:{}},run(action,properties,context,cb){context.get_server_outcome(action,cb)},server_method:"set_temporary_password",do_not_log_result:!0,data_to_refresh:null,return_value(){return btypes.get("text")}},_default=exported;exports.default=_default}});var require_LogOutOtherSessions=__commonJS({"lib-browser-old/core/core_actions/account/LogOutOtherSessions.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports={field_names:{},server_method:"log_out_other_sessions",data_to_refresh:null}}});var require_Generate2FAQRCode=__commonJS({"lib-browser-old/core/core_actions/account/Generate2FAQRCode.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var btypes=_interopRequireWildcard(require_btypes());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var exported={field_names:{password:{}},do_not_log_result:!0,run(action,properties,context,cb){context.get_server_outcome(action,cb)},server_method:"generate_2fa_qr_code",data_to_refresh:null,return_value(){return btypes.get("image")}},_default=exported;exports.default=_default}});var require_Validate2FAToken=__commonJS({"lib-browser-old/core/core_actions/account/Validate2FAToken.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var state_keys=_interopRequireWildcard(require_state_keys()),_lib=_interopRequireDefault(require_lib());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var exported={field_names:{token:{}},run(action,properties,context,cb){context.get_server_outcome(action,cb)},server_method:"validate_2fa_token",data_to_refresh(action,properties,element_instance){let d={};return d[state_keys.Message({prev:(0,_lib.default)().current_user(),message:"uses_2fa",prior_btype_id:"user"})]=!0,d}},_default=exported;exports.default=_default}});var require_Check2FAToken=__commonJS({"lib-browser-old/core/core_actions/account/Check2FAToken.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports={field_names:{token:{},valid_30_days:{}},run(action,properties,context,cb){context.get_server_outcome(action,cb)},server_method:"check_2fa_token",data_to_refresh:null}}});var require_Disable2FA=__commonJS({"lib-browser-old/core/core_actions/account/Disable2FA.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var state_keys=_interopRequireWildcard(require_state_keys()),_lib=_interopRequireDefault(require_lib());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var exported={field_names:{token:{},password:{}},run(action,properties,context,cb){context.get_server_outcome(action,cb)},server_method:"disable_2fa",data_to_refresh(action,properties,element_instance){let d={};return d[state_keys.Message({prev:(0,_lib.default)().current_user(),message:"uses_2fa",prior_btype_id:"user"})]=!1,d}},_default=exported;exports.default=_default}});var require_GenerateOneTimeCodes=__commonJS({"lib-browser-old/core/core_actions/account/GenerateOneTimeCodes.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var state_keys=_interopRequireWildcard(require_state_keys()),btype_ids=_interopRequireWildcard(require_btype_ids()),_lib=_interopRequireDefault(require_lib()),btypes=_interopRequireWildcard(require_btypes());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var exported={field_names:{token:{},password:{},number_of_codes:{default:10}},do_not_log_result:!0,run(action,properties,context,cb){context.get_server_outcome(action,cb)},server_method:"generate_one_time_codes",data_to_refresh(action,properties,element_instance){let d={};return d[state_keys.Message({prev:(0,_lib.default)().current_user(),message:"has_codes",prior_btype_id:"user"})]=!0,d},return_value(){return btypes.get(btype_ids.list_type("text"))}},_default=exported;exports.default=_default}});var require_build_page_url_for_action=__commonJS({"lib-browser-old/shared/build_page_url_for_action.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_includes();require_es_string_includes();var Lib=require_lib(),links=require_links(),u=require_u2(),build_page_url_for_action=exports;build_page_url_for_action.build_page_url_for_action=function(data_to_send,add_params,url_params,current_params,pg_name,pg,page_thing_id){let data_for_link={},page_thing="";page_thing_id&&(page_thing=page_thing_id),u.is_debug_mode()&&(data_for_link.debug_mode=!0);let params_to_add={};if(add_params){let object2=url_params!=null?url_params:{};for(let index in object2){let param=object2[index];params_to_add[param.key]=param.value}}current_params&&(params_to_add=u.extend(Lib().location.get_query(),params_to_add));for(let key in params_to_add){let value=params_to_add[key];links.forbidden_url_keys.includes(key)||(data_for_link[key]=value)}return{pg_thing:page_thing,data_fr_link:data_for_link}}}});var require_ChangePage=__commonJS({"lib-browser-old/core/core_actions/navigation/ChangePage.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();var u=require_u2(),build_page_url_for_action=require_build_page_url_for_action(),url_data=require_url_data(),generic_actions_utilities=require_generic_actions_utilities(),logger=require_logger(),appquery=require_appquery(),internal_navigation=require_internal_navigation(),Lib=require_lib(),links=require_links(),languages=require_languages();module.exports={field_names:{element_id:{},data_to_send:{},dynamic_page_name:{},open_in_new_tab:{},add_parameters:{},url_parameters:{},keep_current_page_params:{},replace_history:{}},run(action,properties,context,cb){function continue_redirect(action2,properties2,context2,cb2){let page;switch(properties2.element_id){case"Current page":page=appquery.get_page_by_name(Lib().location.get_page());break;case"Dynamic page":page=appquery.get_page_by_name(properties2.dynamic_page_name);break;default:page=generic_actions_utilities.get_page(properties2.element_id)}if(!page){console.log("not changing page because page not found"),cb2();return}if(u.on_phonegap()){window.alert("Native apps should be built in a single page, you can't use a change action here");return}let page_name=page.name();u.run_once(30,()=>{let data_to_send;switch(properties2.element_id){case"Current page":data_to_send=Lib().pageparam.get();break;case"Dynamic page":data_to_send="";break;default:data_to_send=properties2.data_to_send}return url_data.get_data_to_send(data_to_send,page.get_static_property("readable_field"))},(err,page_id)=>{err&&logger.log(err);let change_page_obj=build_page_url_for_action.build_page_url_for_action(properties2.data_to_send,properties2.add_parameters,properties2.url_parameters,properties2.keep_current_page_params,page_name,page,page_id),data_for_link=change_page_obj.data_fr_link;change_page_obj.pg_thing&&(page_name+="/"+change_page_obj.pg_thing);let future_language=data_for_link.lang,past_language=languages.app_language(),should_refresh_for_language=future_language&&past_language!==future_language.toLowerCase();if(properties2.open_in_new_tab){window.open(Lib().location.get_page_url(page_name,data_for_link),"_blank"),window.focus(),cb2();return}if(page.name()===Lib().location.get_page()&&!should_refresh_for_language){let new_url=Lib().location.get_page_url(page_name,data_for_link);new_url!==Lib().location.my_location()&&(Lib().location.set_url_without_refresh({url:new_url,push_state:!properties2.replace_history}),Lib().pageparam.invalidate()),context2!=null&&(context2.__investigate_post_changed_page_url_reads=!0),cb2();return}let resume_key=Lib().workflow.make_resume_key(context2,action2);resume_key&&(data_for_link.resume=resume_key),Lib().workflow.wait_for_safe(context2,()=>{resume_key||cb2("aborted"),context2.__investigate_post_changed_page_url_reads=!0,should_refresh_for_language&&(document.location.href=void 0),internal_navigation.navigate_to_page(page_name,data_for_link)})})}Lib().location.get_query().on_login!=null?u.run_once(15,()=>Lib().user.has_changed(),(err,has_changed)=>{err&&logger.log(err),has_changed||continue_redirect(action,properties,context,cb)}):continue_redirect(action,properties,context,cb)},not_api:!0,data_to_refresh:null}}});var require_RefreshPage=__commonJS({"lib-browser-old/core/core_actions/navigation/RefreshPage.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var generic_actions_utilities=_interopRequireWildcard(require_generic_actions_utilities()),_lib=_interopRequireDefault(require_lib());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var exported={field_names:{},run(action,properties,context,cb){(0,_lib.default)().workflow.wait_for_safe(context,()=>{document.location.href=generic_actions_utilities.get_resume_url(context,action)})},not_api:!0,data_to_refresh:null},_default=exported;exports.default=_default}});var require_GoPrevious=__commonJS({"lib-browser-old/core/core_actions/navigation/GoPrevious.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _lib=_interopRequireDefault(require_lib());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var exported={field_names:{},run(action,properties,context,cb){(0,_lib.default)().workflow.wait_for_safe(context,()=>{window.history.back(),cb()})},not_api:!0,data_to_refresh:null},_default=exported;exports.default=_default}});var require_OpenURL=__commonJS({"lib-browser-old/core/core_actions/navigation/OpenURL.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_includes();require_es_string_includes();var u=require_u2(),Lib=require_lib(),links=require_links();module.exports={field_names:{url:{},open_in_new_tab:{}},run(action,properties,context,cb){let link=properties.url;if(link&&!link.includes("//")&&!links.href_attributes.includes(link.split(":")[0])&&(link="//"+link),u.on_phonegap()){window.open(link,"_blank","location=yes,enableViewportScale=yes"),cb();return}properties.open_in_new_tab?(window.open(link,"_blank"),window.focus(),cb()):Lib().workflow.wait_for_safe(context,()=>{cb("aborted"),document.location.href=link})},not_api:!0,data_to_refresh:null}}});var require_ScrollToElement=__commonJS({"lib-browser-old/core/core_actions/navigation/ScrollToElement.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var u=_interopRequireWildcard(require_u2()),logger=_interopRequireWildcard(require_logger());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var exported={field_names:{element_id:{},offset:{optional:!0,default:0}},run(action,properties,context,cb){u.run_once(30,()=>context.element.find_instance_by_id(properties.element_id),(err,instance)=>{err&&logger.log(err),instance&&instance.with_canvas(canvas=>{var _Math$min;if(canvas[0].ownerDocument==null)return;let scrolling_canvas=canvas;for(;!(scrolling_canvas.hasClass("bubble-element")&&scrolling_canvas.hasClass("Popup"))&&scrolling_canvas.css("position")!=="fixed"&&!(scrolling_canvas.hasClass("bubble-element")&&scrolling_canvas.hasClass("Page"))&&scrolling_canvas.length;)scrolling_canvas=scrolling_canvas.parent();u.velocity(canvas,"scroll",{duration:300,offset:(_Math$min=Math.min(properties.offset,scrolling_canvas.innerHeight()-canvas.offset().top-window.innerHeight+canvas[0].getBoundingClientRect().top))!=null?_Math$min:0,complete_cb:()=>{var _window$BrowserDetect,_window$BrowserDetect2;if(((_window$BrowserDetect=window.BrowserDetect)==null?void 0:_window$BrowserDetect.OS)==="iPhone/iPod"&&((_window$BrowserDetect2=window.BrowserDetect)==null?void 0:_window$BrowserDetect2.browser)==="Safari"){let anchor=document.elementFromPoint(0,0),offset=anchor.getBoundingClientRect().top;u.velocity($(anchor.tagName==="HTML"?document.body:anchor),"scroll",{duration:301,offset:anchor.tagName==="HTML"?0:-offset})}}})}),cb()})},not_api:!0,data_to_refresh:null},_default=exported;exports.default=_default}});var require_AnimateElement=__commonJS({"lib-browser-old/core/core_actions/navigation/AnimateElement.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var u=_interopRequireWildcard(require_u2()),logger=_interopRequireWildcard(require_logger()),generic_actions_utilities=_interopRequireWildcard(require_generic_actions_utilities());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var exported={field_names:{element_id:{},animation:{default:"callout.bounce"},customize_duration:{},duration:{}},run(action,properties,context,cb){u.run_once(30,()=>context.element.find_instance_by_id(properties.element_id),(err,instance)=>{err&&logger.log(err),instance&&properties.animation&&instance.with_canvas(canvas=>{let duration;if(properties.customize_duration){var _properties$duration;duration=(_properties$duration=properties.duration)!=null?_properties$duration:generic_actions_utilities.get_velocity_animation_duration(properties.animation)}else duration=generic_actions_utilities.get_velocity_animation_duration(properties.animation);let options={duration};properties.animation.indexOf("transition.")===0?properties.animation.indexOf("Out")!==-1?instance.workflow_hide(properties,options,!0):properties.animation.indexOf("In")!==-1&&instance.workflow_show(properties,options,!0):instance.setTimeout(()=>{var _document;((_document=document)==null?void 0:_document.hidden)===!1&&u.velocity(canvas,properties.animation,options)},20)}),cb()})},not_api:!0,data_to_refresh:null},_default=exported;exports.default=_default}});var require_element_actions_utilities=__commonJS({"lib-browser-old/core/core_actions/utilities/element_actions_utilities.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_includes();require_es_string_includes();var state_keys=require_state_keys(),hydrate2=require_hydrate(),eval_consts=require_eval(),core_actions_consts=require_core_actions_consts(),core_ds_element_utilities=require_core_ds_element_utilities(),appquery=require_appquery(),element_actions_utilities=exports;element_actions_utilities.field_names_for_show_hide_action={element_id:{}};element_actions_utilities._get_data_to_refresh_for_group_actions=function(action,properties,element_instance,new_value){var _appquery$element,_core_ds_element_util;if(!((_appquery$element=appquery.element(properties.element_id))!=null&&_appquery$element.exists()))return{};let instance=element_instance.find_instance_by_id(properties.element_id);if(!instance)return{};let instance_id=hydrate2.dehydrate_tree(instance),res={};return res[state_keys.Message({prev:instance,message:"get_group_data",prior_btype_id:instance.element.get_value_id()})]=new_value,res[eval_consts.ESTATE_PREFIX+instance_id]={group_data:new_value},(instance==null?void 0:instance.element.id())===((_core_ds_element_util=core_ds_element_utilities.get_element_parent(action))==null?void 0:_core_ds_element_util.id())&&(res[state_keys.ElementParent()]=new_value),res};element_actions_utilities.field_names_show_previous_next={element_id:{},wrap_around:{default:!1}};element_actions_utilities.is_fixed_rg=function(element){var _element$root;return((_element$root=element.root())==null?void 0:_element$root.get_responsive_version())>0?element.get_static_property("fixed_rows")&&element.get_static_property("fixed_columns"):element.get_static_property("layout_style")==="limit_items"};element_actions_utilities._get_data_to_refresh_for_repeating_group_actions=function(action,properties,element_instance,new_value){let instance=element_instance.find_instance_by_id(properties.element_id),instance_id=hydrate2.dehydrate_tree(instance),d={};return d[state_keys.Message({prev:instance,message:"get_list_data",prior_btype_id:instance.element.get_value_id()})]=new_value,d[eval_consts.ESTATE_PREFIX+instance_id]={list_data:new_value},d};element_actions_utilities.clear_rg_pagination_frozen_states=function(action,properties,element_instance){var _appquery$element2;if(!((_appquery$element2=appquery.element(properties.element_id))!=null&&_appquery$element2.exists()))return{};let instance=element_instance.find_instance_by_id(properties.element_id);if(!instance)return{};let res={},prior_btype_id=instance.element.get_value_id();return res[state_keys.Message({prev:instance,message:"is_last_page",prior_btype_id})]=null,res[state_keys.Message({prev:instance,message:"is_first_page",prior_btype_id})]=null,res[state_keys.Message({prev:instance,message:"page_number",prior_btype_id})]=null,res}}});var require_SetFocusToElement=__commonJS({"lib-browser-old/core/core_actions/navigation/SetFocusToElement.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var u=_interopRequireWildcard(require_u2()),logger=_interopRequireWildcard(require_logger()),element_actions_utilities=_interopRequireWildcard(require_element_actions_utilities());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var exported={field_names:{element_id:{}},run(action,properties,context,cb){u.run_once(30,()=>context.element.find_instance_by_id(properties.element_id),function(err,element){err&&logger.log(err),element&&element.wait_for_visible(function(){u.wait_for_updates(function(){let canvas=element.get_canvas();u.isScrolledIntoView(canvas).status||canvas.add(canvas.parents()).filter(function(){return $(this).css("position")==="fixed"}).length===0&&u.velocity(canvas,"scroll",{duration:300,offset:-100}),element.message("set_focus")})}),cb()})},not_api:!0,data_to_refresh:null,check_for_errors:element_actions_utilities.element_type_checker},_default=exported;exports.default=_default}});var require_NewThing=__commonJS({"lib-browser-old/core/core_actions/db/NewThing.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var data_updates=_interopRequireWildcard(require_data_updates()),generic_actions_utilities=_interopRequireWildcard(require_generic_actions_utilities()),_lib=_interopRequireDefault(require_lib()),btypes=_interopRequireWildcard(require_btypes());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var exported={field_names:{thing_type:{},initial_values:{}},run(action,properties,context,cb){let new_id=context.UUID_SEED.UUID(),new_thing=(0,_lib.default)().db_instance().create(properties.thing_type,null,new_id);data_updates.update_thing(new_thing,properties.initial_values).callback(err=>{cb(err,new_thing)})},data_to_refresh:null,return_value(action){var _action$get_static_pr;return btypes.get((_action$get_static_pr=action.get_static_property("thing_type"))!=null?_action$get_static_pr:"null")},server_method:"new_thing",preprocess_properties(properties){let thing_btype_id=properties.thing_type,prop_name="initial_values";return generic_actions_utilities.pre_process_properties({properties,prop_name,thing_btype_id}),properties=generic_actions_utilities.apply_default_fields(prop_name,thing_btype_id,properties),properties},fall_back_to_server:!0,is_mergeable:!0},_default=exported;exports.default=_default}});var require_ChangeThing=__commonJS({"lib-browser-old/core/core_actions/db/ChangeThing.js"(exports){"use strict";init_define_process_env();init_shim();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;require_es_symbol_description();require_es_error_cause();var u=_interopRequireWildcard(require_u2()),logger=_interopRequireWildcard(require_logger()),investigations=_interopRequireWildcard(require_investigations()),data_updates=_interopRequireWildcard(require_data_updates()),generic_actions_utilities=_interopRequireWildcard(require_generic_actions_utilities()),eval_consts=_interopRequireWildcard(require_eval()),eval_node_state=_interopRequireWildcard(require_eval_node_state()),_lib=_interopRequireDefault(require_lib());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var exported={field_names:_objectSpread({to_change:{},create_if_missing:{}},generic_actions_utilities.change_field_names(eval_consts.EVAL_TYPE.thunk)),run(action,properties,context,cb){let{to_change}=properties;if(to_change!=null)data_updates.update_thing(to_change,properties.changes).callback(err=>{cb(err,to_change)});else if(properties.create_if_missing){var _this$_get_type;let type_to_create=(_this$_get_type=this._get_type(action))==null?void 0:_this$_get_type.id(),new_id=context.UUID_SEED.UUID();if(type_to_create){let new_thing=(0,_lib.default)().db_instance().create(type_to_create,null,new_id);data_updates.update_thing(new_thing,properties.changes).callback(err=>{cb(err,new_thing)})}else cb()}else cb()},use_injected_datasource(action,node){return generic_actions_utilities.use_injected_for_change_actions(action,node)},_get_type(action){return action.property("to_change").get_eval_value()},get_injected_value(action,node){return this._get_type(action)},get_injected_display(action,node){var _this$_get_type2;return"This "+((_this$_get_type2=this._get_type(action))==null?void 0:_this$_get_type2.display())},server_method:"change_thing",data_to_refresh(action,properties,element_instance){var _this$_get_type3;return generic_actions_utilities.get_data_to_refresh_for_change_action({to_change:properties.to_change,to_change_value_id:(_this$_get_type3=this._get_type(action))==null?void 0:_this$_get_type3.id(),changes:properties.changes})},return_value(action){return this._get_type(action)},preprocess_properties(properties,action,context){var _this$_get_type4;context=u.extend({},context),context.duplicated_from_context=context.object_id,context.object_id=u.UUID(),context.duplicated_at="ChangeThing::preprocess_properties";let thing_btype_id=(_this$_get_type4=this._get_type(action))==null?void 0:_this$_get_type4.id(),{to_change}=properties;context.datasources.injected_value_btype=()=>thing_btype_id,context.datasources.injected_value=()=>to_change;let prop_name="changes",property_node=action.property(prop_name);properties.changes=eval_node_state.with_eval_node(property_node,()=>properties.changes(context));let investigating=investigations.action_update_thing.active(),changes_pre_evaluation={};return investigating&&(changes_pre_evaluation.from_json=u.extend({},properties.changes)),properties=generic_actions_utilities.pre_process_properties({properties,prop_name,thing_btype_id}),investigating&&(changes_pre_evaluation.pre_processed=u.extend({},properties.changes)),to_change==null&&properties.create_if_missing&&thing_btype_id&&(properties=generic_actions_utilities.apply_default_fields(prop_name,thing_btype_id,properties),investigating&&(changes_pre_evaluation.with_defaults=u.extend({},properties.changes))),investigating&&logger.debug("change_thing pre_evaluation",changes_pre_evaluation),properties},fall_back_to_server:!0,is_mergeable:!0},_default=exported;exports.default=_default}});var require_ChangeListOfThings=__commonJS({"lib-browser-old/core/core_actions/db/ChangeListOfThings.js"(exports){"use strict";init_define_process_env();init_shim();require_es_object_get_own_property_descriptors();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;require_web_dom_collections_for_each();require_es_array_iterator();require_web_dom_collections_iterator();require_es_object_values();require_es_symbol_description();require_es_error_cause();var u=_interopRequireWildcard(require_u2()),b_fiber=_interopRequireWildcard(require_b_fiber()),eval_node_state=_interopRequireWildcard(require_eval_node_state()),data_updates=_interopRequireWildcard(require_data_updates()),generic_actions_utilities=_interopRequireWildcard(require_generic_actions_utilities()),eval_consts=_interopRequireWildcard(require_eval()),btype_ids=_interopRequireWildcard(require_btype_ids()),_StaticList=_interopRequireDefault(require_StaticList()),btypes=_interopRequireWildcard(require_btypes());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var exported={field_names:_objectSpread({type_to_change:{},to_change:{}},generic_actions_utilities.change_field_names(eval_consts.EVAL_TYPE.thunk)),use_injected_datasource(action,node){return generic_actions_utilities.use_injected_for_change_actions(action,node)},get_injected_value(action,node){return action.get_static_property("type_to_change")},get_injected_display(action,node){return"This "+btypes.get(action.get_static_property("type_to_change")).display()},preprocess_properties(properties,action,context){var _properties$to_change;if(b_fiber.optional_pause(),context=u.extend({},context),context.duplicated_from_context=context.object_id,context.object_id=u.UUID(),context.duplicated_at="ChangeListOfThings::preprocess_properties",!btypes.is_custom_type(properties.type_to_change))return{changes:null};context.datasources.injected_value_btype=()=>properties.type_to_change;let to_change=(_properties$to_change=properties.to_change)!=null?_properties$to_change:new _StaticList.default([],null,properties.type_to_change);delete properties.to_change;let get_changes=properties.changes;properties.changes=[];let property_node=action.property("changes");return eval_node_state.with_eval_node(property_node,()=>{var _to_change$all_iterat;(_to_change$all_iterat=to_change.all_iteratively)==null||_to_change$all_iterat.call(to_change,batch2=>{let items=batch2.filter(item=>(item==null?void 0:item._id)!=null);items.forEach(item=>{var _item$precache;return(_item$precache=item.precache)==null?void 0:_item$precache.call(item)}),b_fiber.optional_pause();for(let item of items){context.datasources.injected_value=()=>item;let changes=get_changes(context),thing_btype_id=properties.type_to_change,prop_name="changes";properties.changes.push(generic_actions_utilities.pre_process_properties({properties:{item,changes},prop_name,thing_btype_id})),b_fiber.optional_pause()}}),b_fiber.optional_pause()}),properties},run(action,properties,context,cb){if(!properties.changes){cb(null,null);return}let change_promises=properties.changes.map(_ref=>{let{item,changes}=_ref;return data_updates.update_thing(item,changes,properties.type_to_change)});u.promise_array(change_promises).callback(err=>{if(!btypes.is_custom_type(properties.type_to_change)){cb(null,null);return}cb(err,new _StaticList.default(properties.changes.map(_ref2=>{let{item}=_ref2;return item}),null,properties.type_to_change))})},data_to_refresh(action,properties,element_instance){let to_refresh={};if(!properties.changes)return to_refresh;for(let{item,changes}of Object.values(properties.changes)){let individual_data_to_refresh=generic_actions_utilities.get_data_to_refresh_for_change_action({to_change:item,to_change_value_id:properties.type_to_change,changes});u.extend(to_refresh,individual_data_to_refresh)}return to_refresh},return_value(action){let type=action.get_static_property("type_to_change");return type?btype_ids.list_type(type):"null"},server_method:"change_list_of_things",fall_back_to_server:!0},_default=exported;exports.default=_default}});var require_DeleteThing=__commonJS({"lib-browser-old/core/core_actions/db/DeleteThing.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports={field_names:{to_delete:{}},run(action,properties,context,cb){var _to_delete$delete;let{to_delete}=properties;to_delete==null||(_to_delete$delete=to_delete.delete)==null||_to_delete$delete.call(to_delete),cb()},data_to_refresh:null,return_value(action){return null},server_method:"delete_thing",fall_back_to_server:!0,is_mergeable:!0}}});var require_DeleteListOfThings=__commonJS({"lib-browser-old/core/core_actions/db/DeleteListOfThings.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();module.exports={field_names:{type_to_delete:{},to_delete:{}},preprocess_properties(properties){var _properties$to_delete,_properties$to_delete2,_properties$to_delete3;return properties.to_delete=(_properties$to_delete=(_properties$to_delete2=properties.to_delete)==null||(_properties$to_delete3=_properties$to_delete2.all)==null?void 0:_properties$to_delete3.call(_properties$to_delete2))!=null?_properties$to_delete:[],properties},run(action,properties,context,cb){var _properties$to_delete4;let to_delete=((_properties$to_delete4=properties.to_delete)!=null?_properties$to_delete4:[]).filter(thing=>(thing==null?void 0:thing._id)!=null);for(let thing of to_delete){var _thing$delete;(_thing$delete=thing.delete)==null||_thing$delete.call(thing)}cb()},data_to_refresh:null,return_value(action){return null},server_method:"delete_list_of_things",fall_back_to_server:!0}}});var require_CopyListOfThings=__commonJS({"lib-browser-old/core/core_actions/db/CopyListOfThings.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var u=_interopRequireWildcard(require_u2()),logger=_interopRequireWildcard(require_logger()),configuration=_interopRequireWildcard(require_client_config2()),generic_actions_utilities=_interopRequireWildcard(require_generic_actions_utilities()),btype_ids=_interopRequireWildcard(require_btype_ids()),_lib=_interopRequireDefault(require_lib()),_StaticList=_interopRequireDefault(require_StaticList()),btypes=_interopRequireWildcard(require_btypes());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var exported={field_names:{type_to_copy:{},to_copy:{},information:{}},preprocess_properties(properties){var _properties$to_copy;if(typeof((_properties$to_copy=properties.to_copy)==null?void 0:_properties$to_copy.length)!="function"||properties.to_copy.length()>configuration.max_new_list_length)properties.to_copy=[];else{var _properties$to_copy$a,_properties$to_copy2,_properties$to_copy2$;properties.to_copy=(_properties$to_copy$a=(_properties$to_copy2=properties.to_copy)==null||(_properties$to_copy2$=_properties$to_copy2.all)==null?void 0:_properties$to_copy2$.call(_properties$to_copy2))!=null?_properties$to_copy$a:[]}return properties},run(action,properties,context,cb){var _properties$to_copy3;if(!btypes.is_custom_type(properties.type_to_copy)){cb(null,null);return}let to_copy=((_properties$to_copy3=properties.to_copy)!=null?_properties$to_copy3:[]).filter(thing=>(thing==null?void 0:thing._id)!=null);return u.run_once(30,()=>to_copy.map(thing=>thing.raw()),(err,result)=>{if(err){logger.log(err);return}let new_list=result.map(old=>{let new_id=context.UUID_SEED.UUID(),raw=generic_actions_utilities.prepare_raw_thing_to_copy(old);return(0,_lib.default)().db_instance().create(properties.type_to_copy,raw,new_id)});cb(void 0,new _StaticList.default(new_list,null,properties.type_to_copy))})},data_to_refresh:null,return_value(action){let type=action.get_static_property("type_to_copy");return type?btype_ids.list_type(type):"null"},server_method:"copy_list_of_things",fall_back_to_server:!0},_default=exported;exports.default=_default}});var require_SetSlug=__commonJS({"lib-browser-old/core/core_actions/db/SetSlug.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var u=_interopRequireWildcard(require_u2()),generic_actions_utilities=_interopRequireWildcard(require_generic_actions_utilities());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var exported={field_names:u.extend({to_change:{},slug:{default:""}}),server_method:"set_slug",data_to_refresh(action,properties){var _action$property$get_;return generic_actions_utilities.get_data_to_refresh_for_change_action({to_change:properties.to_change,to_change_value_id:(_action$property$get_=action.property("to_change").get_eval_value())==null?void 0:_action$property$get_.id(),changes:[{key:"Slug",value:null}]})},run(action,properties,context,cb){context.get_server_outcome(action,(err,res)=>{(res==null?void 0:res.thing)!=null&&res.thing.child("Slug").set(res.slug),cb(err,res)})}},_default=exported;exports.default=_default}});var require_DownloadDataAsCSV=__commonJS({"lib-browser-old/core/core_actions/db/DownloadDataAsCSV.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_includes();require_es_string_includes();require_es_symbol_description();var u=_interopRequireWildcard(require_u2()),logger=_interopRequireWildcard(require_logger()),core_actions_consts=_interopRequireWildcard(require_core_actions_consts()),_lib=_interopRequireDefault(require_lib()),_StaticList=_interopRequireDefault(require_StaticList()),btypes=_interopRequireWildcard(require_btypes());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _get_printable_value(ret_btype,val,date_formatting){return val==null?"":ret_btype.has_export_to_string()?ret_btype.export_to_string(val,{option_show_if_deleted:!1,custom_use_primary_field:!1,booleans_yes_no:!1,always_return_text:!0,date_formatting}):(logger.error("Tried to display a value in DownloadAsCSV but no export_to_string for this value",{ret_btype_id:ret_btype.id()}),"")}function _get_printable_object(objects_array,data_type,date_formatting,hidden_fields,use_captions){var _hidden_fields;(_hidden_fields=hidden_fields)!=null||(hidden_fields=[]);let res=[],value=btypes.get(data_type),fields=[];value.custom_type()?(fields.push(...value.custom_type().fields().filter(field=>!field.deleted()).map(field=>field.name())),fields.push("Created Date","Modified Date","_id","Slug"),data_type==="user"?fields.push("email"):fields.push("Created By")):fields.push(...value.get_messages(!0).map(m=>m.name()));for(let entry of objects_array){let converted_entry={};for(let field of fields)if(!hidden_fields.includes(field)){let message=value.get_message(field),ret_btype=message.ret_btype(),val=message.evaluate(entry),formatted_val=_get_printable_value(ret_btype,val,date_formatting),header=use_captions?message.description(void 0,!0):message.name();if(converted_entry[header]=formatted_val,field==="Created By"&&formatted_val){var _value$get_message$ev;converted_entry["Created By - email"]=(_value$get_message$ev=value.get_message("Created By").evaluate(entry).get_email())!=null?_value$get_message$ev:""}}res.push(converted_entry)}return res}var exported={not_api:!0,field_names:{data_type:{},data_source:{},file_name:{default:"data_export.csv"},date_formatting:{default:"spreadsheet_compatible"},custom_format:{default:"ddd, m/dd/yy, mmmm (mmm) dS, yyyy, h:MM tt, HH:MM:ss.L"},separator:{default:"comma"},show_labels:{default:!0},use_quotes:{default:!0},use_caption_labels:{default:!1},hide_some_fields:{optional:!0}},run(action,properties,context,cb){var _properties$data_sour;if(!(0,_lib.default)().app_plan().import_export_csv){cb(new u.OwnerError("Exporting CSV data is not possible under this plan."));return}properties.data_type||cb(null,"Must set a type of thing");let separator;if(properties.separator==="tab")separator="	";else{var _core_actions_consts$;separator=(_core_actions_consts$=core_actions_consts.csv_separators[properties.separator])!=null?_core_actions_consts$:","}let date_formatting=properties.date_formatting==="custom"?properties.custom_format:properties.date_formatting,current_list=(_properties$data_sour=properties.data_source)!=null?_properties$data_sour:new _StaticList.default([],null,properties.data_type);u.run_once(120,()=>{current_list.all();let current_list_length=current_list.length(),chunks=100,promises=[];for(let i=0;i<current_list_length;i+=chunks)promises.push(u.run_once(10*60*1e3,()=>{var _current_list$get_chi,_properties$hide_some;let current_chunk=(_current_list$get_chi=current_list.get_children(i,chunks))!=null?_current_list$get_chi:[];return _get_printable_object(current_chunk,properties.data_type,date_formatting,u.json_parse((_properties$hide_some=properties.hide_some_fields)!=null?_properties$hide_some:"[]"),properties.use_caption_labels)}));return promises}).then(promises=>u.promise_array(promises).callback((err,data_to_convert)=>{let{file_name}=properties;file_name.indexOf(".csv")!==file_name.length-4&&(file_name=file_name+".csv");let converted_string;if(err)logger.log(err),converted_string="Error exporting data... please try again in a bit";else{let data=[];for(let set of data_to_convert)data=data.concat(set);converted_string=u.json_to_csv(data,separator,properties.show_labels,properties.use_quotes)}u.csv_to_downloadable_file(file_name,converted_string),cb(null,converted_string)}))},data_to_refresh:null},_default=exported;exports.default=_default}});var require_UploadCSVData=__commonJS({"lib-browser-old/core/core_actions/db/UploadCSVData.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var btype_ids=_interopRequireWildcard(require_btype_ids());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var exported={field_names:{data_type:{},file:{},separator:{default:"comma"}},run(action,properties,context,cb){context.get_server_outcome(action,(err,res)=>cb(err,res))},data_to_refresh:null,return_value(action){let type=action.get_static_property("data_type");return type?btype_ids.list_type(type):"null"},server_method:"upload_csv_data"},_default=exported;exports.default=_default}});var require_APIReturnData=__commonJS({"lib-browser-old/core/core_actions/db/APIReturnData.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports={api_only:!0,field_names:{return_plain_text:{},custom_content_type:{},text:{},custom_text:{},parameters_actions:{}},run(action,properties,context,cb){},server_method:"api_return_data",check_for_errors(action,report){return action.event().actions("APIReturnData").filter(action2=>{var _action$property,_action$property$call,_action$property$call2;return((_action$property=action2.property)==null||(_action$property$call=_action$property.call(action2,"condition"))==null||(_action$property$call2=_action$property$call.json)==null?void 0:_action$property$call2.raw())==null}).length>1&&report("You should use only one 'Return data from API' action per API workflow"),!1}}}});var require_DeleteUploadedFile=__commonJS({"lib-browser-old/core/core_actions/db/DeleteUploadedFile.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports={field_names:{url_to_delete:{}},data_to_refresh:null,server_method:"delete_upload_file",run(action,properties,context,cb){context.get_server_outcome(action,(err,res)=>cb(err,res))}}}});var require_TriggerCustomEvent=__commonJS({"lib-browser-old/core/core_actions/custom_workflows/TriggerCustomEvent.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports={field_names:{custom_event:{},workflow_thing:{legacy:!0},arguments:{}},check_for_errors(action,report,compute_cross_page){return!1}}}});var require_TriggerCustomEventFromReusable=__commonJS({"lib-browser-old/core/core_actions/custom_workflows/TriggerCustomEventFromReusable.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports={field_names:{element_id:{},custom_event:{},workflow_thing:{legacy:!0},arguments:{}},not_api:!0,check_for_errors(action,report,compute_cross_page){return compute_cross_page?!1:(report(void 0,void 0,action.id()),!0)}}}});var require_TriggerCustomOnChange=__commonJS({"lib-browser-old/core/core_actions/custom_workflows/TriggerCustomOnChange.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var u=_interopRequireWildcard(require_u2()),_isEqual=_interopRequireDefault(require_isEqual()),core_consts=_interopRequireWildcard(require_core()),core_ds_workflow_utilities=_interopRequireWildcard(require_core_ds_workflow_utilities()),_lib=_interopRequireDefault(require_lib()),_appquery=_interopRequireDefault(require_appquery()),btypes=_interopRequireWildcard(require_btypes());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var exported={field_names:{custom_event:{},workflow_thing:{},field:{}},check_for_errors(action,report){let custom_event_id=action.get_static_property("custom_event");if(custom_event_id){var _appquery$event;((_appquery$event=_appquery.default.event(custom_event_id))==null?void 0:_appquery$event.get_custom_parameters().length)!==1&&report(this.display(action)+" - can only be used with custom events that take exactly one argument")}return!1},run(action,properties,context,cb){let{workflow_thing,field}=properties,custom_event=_appquery.default.event(properties.custom_event);if(workflow_thing==null||field==null||!(custom_event!=null&&custom_event.exists())){console.log("Skipping trigger custom event on change, missing data"),cb();return}let{element}=context,workflow_engine=(0,_lib.default)().workflow;u.run_once(30,()=>field==="email_confirmed"?btypes.get("user").get_message("email_confirmed").evaluate(workflow_thing):workflow_thing.child(field).raw(),(err,initial)=>{if(err){cb(err);return}cb(),workflow_thing.poll(5e3,600);let _changed=!1,watcher=u.Watcher({fn(){return workflow_thing.child(field).raw()},compare:_isEqual.default});watcher.on_value(val=>{if(!_changed&&!u.compare(initial,val)){var _custom_event$get_cus,_custom_event$get_cus2;_changed=!0,watcher.destroy();let param_id=(_custom_event$get_cus=(_custom_event$get_cus2=custom_event.get_custom_parameters()[0])==null?void 0:_custom_event$get_cus2.param_id)!=null?_custom_event$get_cus:core_consts.LEGACY_PARAM_ID,call_params={};call_params[param_id]=workflow_thing;let inner_context=core_ds_workflow_utilities.build_duplicate_per_item_context({element},call_params);console.log(Object.keys(inner_context.datasources.get_wf_param({param_id:"__ALL__"}))),workflow_engine.run_workflows(inner_context,[custom_event],!0)}})})},not_api:!0},_default=exported;exports.default=_default}});var require_ScheduleCustom=__commonJS({"lib-browser-old/core/core_actions/custom_workflows/ScheduleCustom.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var page_state=_interopRequireWildcard(require_page_state()),u=_interopRequireWildcard(require_u2()),logger=_interopRequireWildcard(require_logger()),workflow_consts=_interopRequireWildcard(require_workflow()),core_ds_workflow_utilities=_interopRequireWildcard(require_core_ds_workflow_utilities()),_lib=_interopRequireDefault(require_lib()),_appquery=_interopRequireDefault(require_appquery()),core_events=_interopRequireWildcard(require_core_events());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var _schedule_count=0,exported={field_names:{custom_event:{},workflow_thing:{legacy:!0},arguments:{},delay:{}},run(action,properties,context,cb){var _properties$delay;let call_args=core_ds_workflow_utilities.wf_params_from_properties(properties),custom_event=_appquery.default.event(properties.custom_event);if(!(custom_event!=null&&custom_event.exists())){console.log("Skipping trigger custom event on change, event does not exist"),cb();return}let{element}=context,workflow_engine=(0,_lib.default)().workflow,rate_limit_factor=0;custom_event.actions().some(action2=>action2.requires_server())&&(_schedule_count++,setTimeout(()=>_schedule_count--,30*1e3),_schedule_count>10&&(rate_limit_factor=(_schedule_count-10)*30*1e3));let timeout=((_properties$delay=properties.delay)!=null?_properties$delay:1)*1e3+rate_limit_factor;timeout>2147483647&&(timeout=2147483647,logger.owner_warn(new u.OwnerError("max_timeout",{action,display:"Timeout is above the maximum of 2,147,483 seconds; shortening to 2,147,483"}))),setTimeout(()=>{let inner_context=core_ds_workflow_utilities.build_duplicate_per_item_context({element},call_args);inner_context.datasources=page_state.get_basic_datasources(inner_context.element.element.root(),inner_context.datasources),workflow_engine.run_workflows(inner_context,[custom_event],!0).callback(err=>core_events.handle_uncaught_error({original_error:err,caught_from:workflow_consts.ERROR_SOURCES.GENERAL_WORKFLOW,cb(){}}))},timeout),cb()},not_api:!0},_default=exported;exports.default=_default}});var require_ScheduleAPIEvent=__commonJS({"lib-browser-old/core/core_actions/custom_workflows/ScheduleAPIEvent.js"(exports,module){"use strict";init_define_process_env();init_shim();var lang=require_lang2(),btypes=require_btypes();module.exports={field_names:lang.DETECT_FIELD_NAMES,server_method:"schedule_api_event",check_for_errors(action,report,compute_cross_page){return _api_event_schedule_check_for_error(action,report,compute_cross_page)},return_value(){return btypes.get("text")},run(action,properties,context,cb){context.get_server_outcome(action,cb)}}}});var require_ScheduleAPIEventOnList=__commonJS({"lib-browser-old/core/core_actions/custom_workflows/ScheduleAPIEventOnList.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_string_starts_with();require_es_array_iterator();require_web_dom_collections_iterator();var u=require_u2(),b_fiber=require_b_fiber(),lang_consts=require_lang(),evaluate=require_evaluate(),eval_node_state=require_eval_node_state(),generic_actions_utilities=require_generic_actions_utilities(),{escape_app_json_key}=require_json_utils(),btype_ids=require_btype_ids(),Lib=require_lib(),appquery=require_appquery(),btypes=require_btypes();module.exports={field_names:lang_consts.DETECT_FIELD_NAMES,server_method:"schedule_api_event_on_list",use_injected_datasource(action,node){return[node.safe_search_upwards(search_node=>search_node.node_name().startsWith(generic_actions_utilities.APIEvent_param_prefix)),!0]},get_injected_value(action,node){return action.get_static_property("type_of_list")},get_injected_display(action,node){return"This "+btypes.get(action.get_static_property("type_of_list")).display()},preprocess_properties(properties,action,context){var _properties$type_of_l,_properties$data_sour,_api_event$get_custom,_api_event$get_custom2;context=u.extend({},context),context.duplicated_from_context=context.object_id,context.object_id=u.UUID(),context.duplicated_at="ScheduleAPIEventOnList::preprocess_properties",(_properties$type_of_l=properties.type_of_list)!=null||(properties.type_of_list=btypes.get(properties.type_of_list,{miss_okay:!0}).id()),context.datasources.injected_value_btype=()=>properties.type_of_list;let to_run_on=(_properties$data_sour=properties.data_source)!=null?_properties$data_sour:Lib().db_instance().static_list(properties.type_of_list,[]);delete properties.data_source,properties.to_run=[];let api_event=appquery.workflow_item(properties.api_event),parameters=(_api_event$get_custom=api_event==null||(_api_event$get_custom2=api_event.get_custom_parameters)==null?void 0:_api_event$get_custom2.call(api_event))!=null?_api_event$get_custom:[];for(let k in properties)k.startsWith(generic_actions_utilities.APIEvent_param_prefix)&&delete properties[k];let batch_size=u.on_server()?20:1e3,idx=0;for(;;){var _to_run_on$get_childr,_to_run_on$get_childr2;u.on_server()&&b_fiber.optional_pause();let batch2=((_to_run_on$get_childr=(_to_run_on$get_childr2=to_run_on.get_children)==null?void 0:_to_run_on$get_childr2.call(to_run_on,idx,batch_size))!=null?_to_run_on$get_childr:[]).filter(i=>i!=null);for(let item of batch2){var _item$precache;(_item$precache=item.precache)==null||_item$precache.call(item)}if(idx+=batch_size,batch2.length===0)break;for(let item of batch2){let entry={injected_value:item};context.datasources.injected_value=()=>item;for(let{param_id}of parameters){let param_property_name=generic_actions_utilities.APIEvent_param_prefix+escape_app_json_key(param_id),property_node=action.property(param_property_name);eval_node_state.with_eval_node(property_node,()=>{let[evaled]=evaluate.evaluate_json(property_node.json,context,null,null);entry[param_property_name]=evaled})}properties.to_run.push(entry)}}return properties},check_for_errors(action,report,compute_cross_page){return _api_event_schedule_check_for_error(action,report,compute_cross_page)},return_value(){return btypes.get(btype_ids.list_type("text"))},run(action,properties,context,cb){context.get_server_outcome(action,cb)}}}});var require_TerminateWorkflow=__commonJS({"lib-browser-old/core/core_actions/custom_workflows/TerminateWorkflow.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports={field_names:{},handle_condition_internally:!0,run(action,properties,context,cb){properties.condition?cb("aborted"):context.is_running_on_server?context.get_server_outcome(action,(err,res)=>{err?cb(err):res==="aborted"?cb("aborted"):cb()}):cb()}}}});var require_CancelScheduledAPIEvent=__commonJS({"lib-browser-old/core/core_actions/custom_workflows/CancelScheduledAPIEvent.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;require_es_regexp_exec();require_es_string_split();require_es_parse_int();var logger=_interopRequireWildcard(require_logger());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _is_id_formatted_like_list(id){return id==null||id.split==null?!1:id.split(",").every(id_member=>{let converted_id=Number(id_member);return!Number.isNaN(converted_id)&&parseInt(converted_id)===converted_id})}var exported={field_names:{scheduled_id:{}},server_method:"cancel_scheduled_api_event",run(action,properties,context,cb){context.get_server_outcome(action,(err,res)=>{if(err){let id=properties.scheduled_id,reason="The id ".concat(id," is not correctly formatted. ");_is_id_formatted_like_list(properties.scheduled_id)?reason+="It is formatted as a list of ids. Consider using the 'Cancel a list of scheduled API Workflows' action.":reason="It should be a single numerical ID in a text expression.",logger.owner_error("Invalid API workflow id",{display:"Invalid API workflow id: "+reason})}cb(err,res)})}},_default=exported;exports.default=_default}});var require_CancelListScheduledAPIEvent=__commonJS({"lib-browser-old/core/core_actions/custom_workflows/CancelListScheduledAPIEvent.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports={field_names:{scheduled_ids:{}},server_method:"cancel_list_scheduled_api_events"}}});var require_SetRecurringEvent=__commonJS({"lib-browser-old/core/core_actions/custom_workflows/SetRecurringEvent.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports={field_names:{recurring_event:{},workflow_thing:{},frequency:{},start_date:{}},server_method:"set_recurring_event"}}});var require_PauseWFClient=__commonJS({"lib-browser-old/core/core_actions/custom_workflows/PauseWFClient.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var status_bar=_interopRequireWildcard(require_status_bar());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var exported={field_names:{length:{default:1e3},hide_status_bar:{}},run(action,properties,context,cb){if((!properties.length||properties.length<=0)&&(properties.length=0),properties.hide_status_bar){let check_if_visible=function(){status_bar.bar_visible()?status_bar.hide_run_mode():setTimeout(check_if_visible,100)};check_if_visible()}setTimeout(()=>{properties.hide_status_bar&&status_bar.show_run_mode(),cb()},properties.length)},not_api:!0,data_to_refresh:null},_default=exported;exports.default=_default}});var require_SendEmail=__commonJS({"lib-browser-old/core/core_actions/misc_actions/SendEmail.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports={field_names:{to:{},different_reply_to:{},replyTo:{},sender_name:{},cc:{},bcc:{},subject:{},body:{},ignore_template:{},unsubscribe_group_id:{},list_of_attachments:{}},server_method:"send_email",data_to_refresh:null,run(action,properties,context,cb){context.get_server_outcome(action,cb)},check_use_visible:!0}}});var require_SendICSFileEmail=__commonJS({"lib-browser-old/core/core_actions/misc_actions/SendICSFileEmail.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports={field_names:{to:{},sender_name:{},start:{},end:{},specify_length:{},event_length:{},summary:{},event_description:{},location:{},change_body:{},SEQUENCE:{},UID:{},METHOD:{},ORGANIZER:{},STATUS:{},body:{default:"Open the attached ICS to put the appointment in your calendar."},ignore_template:{}},server_method:"send_ical_by_email",data_to_refresh:null,check_use_visible:!0}}});var require_ShowElement=__commonJS({"lib-browser-old/core/core_actions/elements/ShowElement.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var u=_interopRequireWildcard(require_u2()),logger=_interopRequireWildcard(require_logger()),element_actions_utilities=_interopRequireWildcard(require_element_actions_utilities());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var exported={field_names:u.extend({},element_actions_utilities.field_names_for_show_hide_action),run(action,properties,context,cb){u.run_once(30,()=>context.element.find_instance_by_id(properties.element_id),(err,instance)=>{if(err&&logger.log(err),instance.element.added_to_container()&&instance.parent()&&!instance.parent()._has_become_visible.is_turned()){cb();return}instance==null||instance.workflow_show(),cb()})},data_to_refresh:null},_default=exported;exports.default=_default}});var require_HideElement=__commonJS({"lib-browser-old/core/core_actions/elements/HideElement.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var u=_interopRequireWildcard(require_u2()),logger=_interopRequireWildcard(require_logger()),element_actions_utilities=_interopRequireWildcard(require_element_actions_utilities());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var exported={field_names:u.extend({animation:{no_states:!0,default:"none"},direction:{no_states:!0,default:"left"}},element_actions_utilities.field_names_for_show_hide_action),run(action,properties,context,cb){u.run_once(30,()=>context.element.find_instance_by_id(properties.element_id),(err,instance)=>{if(err&&logger.log(err),instance.element.added_to_container()&&instance.parent()&&!instance.parent()._has_become_visible.is_turned()){cb();return}instance==null||instance.workflow_hide(),cb()})},data_to_refresh:null},_default=exported;exports.default=_default}});var require_ToggleElement=__commonJS({"lib-browser-old/core/core_actions/elements/ToggleElement.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var logger=_interopRequireWildcard(require_logger()),u=_interopRequireWildcard(require_u2()),element_actions_utilities=_interopRequireWildcard(require_element_actions_utilities());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var exported={field_names:u.extend({},element_actions_utilities.field_names_for_show_hide_action),run(action,properties,context,cb){u.run_once(30,()=>context.element.find_instance_by_id(properties.element_id),(err,instance)=>{if(err&&logger.log(err),instance){if(instance.element.added_to_container()&&instance.parent()&&!instance.parent()._has_become_visible.is_turned()){cb();return}instance.is_visible()?instance.workflow_hide():instance.workflow_show()}cb()})},data_to_refresh:null},_default=exported;exports.default=_default}});var require_SetCustomState=__commonJS({"lib-browser-old/core/core_actions/elements/SetCustomState.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;require_es_array_iterator();require_web_dom_collections_iterator();var state_keys=_interopRequireWildcard(require_state_keys()),u=_interopRequireWildcard(require_u2()),eval_consts=_interopRequireWildcard(require_eval()),element_actions_utilities=_interopRequireWildcard(require_element_actions_utilities()),decaf=_interopRequireWildcard(require_decaf()),_appquery=_interopRequireDefault(require_appquery());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var exported={field_names:u.extend({value:{optional:!0},custom_state:{},custom_states_values:{optional:!0}},element_actions_utilities.field_names_for_show_hide_action),run(action,properties,context,cb){u.run_once(30,()=>{var _properties$value,_properties$value$mak;let instance=context.element.find_instance_by_id(properties.element_id),res={instance,custom_states:[],values:[]};if(instance==null)return res;res.custom_states.push(properties.custom_state);let make_static=instance.element.element_custom_state(properties.custom_state).make_static();if(make_static&&(_properties$value=properties.value)!=null&&(_properties$value$mak=_properties$value.make_static)!=null&&_properties$value$mak.call(_properties$value)?res.values.push(properties.value.make_static()):res.values.push(properties.value),properties.custom_states_values!=null)for(let node_idx in properties.custom_states_values){var _sub_node$value,_sub_node$value$make_,_sub_node$value2;let sub_node=properties.custom_states_values[node_idx];res.custom_states.push(sub_node.custom_state),make_static=instance.element.element_custom_state(sub_node.custom_state).make_static(),make_static&&(_sub_node$value=sub_node.value)!=null&&(_sub_node$value$make_=(_sub_node$value2=_sub_node$value).make_static)!=null&&_sub_node$value$make_.call(_sub_node$value2)?res.values.push(sub_node.value.make_static()):res.values.push(sub_node.value)}return res},(err,res)=>{if(err){cb(err);return}let{instance,custom_states,values}=res;if(!instance){cb();return}for(let index=0;index<values.length;index++){let val=values[index];instance.state(custom_states[index],val!=null?val:null)}cb()})},data_to_refresh(action,properties,element_instance){var _appquery$element;if(!((_appquery$element=_appquery.default.element(properties.element_id))!=null&&_appquery$element.exists()))return{};let instance=element_instance.find_instance_by_id(properties.element_id);if(instance==null)return{};let prior_btype_id=instance.element.get_value_id(),res={};if(properties.custom_state){var _properties$value2,_val;let custom_state=instance.element.element_custom_state(properties.custom_state),val;custom_state.make_static()&&((_properties$value2=properties.value)==null?void 0:_properties$value2.all)!=null?val=properties.value.make_static():val=properties.value,res[state_keys.Message({prev:instance,message:custom_state.name(),prior_btype_id})]=(_val=val)!=null?_val:eval_consts.NULL_VALUE_TO_REGISTER}if(properties.custom_states_values)for(let sub_node of decaf.object_values(properties.custom_states_values)){var _sub_node$value3,_val2;let custom_state=instance.element.element_custom_state(sub_node.custom_state),val;custom_state.make_static()&&((_sub_node$value3=sub_node.value)==null?void 0:_sub_node$value3.all)!=null?val=sub_node.value.make_static():val=sub_node.value,res[state_keys.Message({prev:instance,message:custom_state.name(),prior_btype_id})]=(_val2=val)!=null?_val2:eval_consts.NULL_VALUE_TO_REGISTER}return res}},_default=exported;exports.default=_default}});var require_ResetInputs=__commonJS({"lib-browser-old/core/core_actions/elements/ResetInputs.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;require_es_array_includes();require_es_string_includes();require_es_array_iterator();require_web_dom_collections_iterator();var u=_interopRequireWildcard(require_u2());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var exported={not_api:!0,field_names:{},run(action,properties,context,cb){u.run_once(30,()=>{let current_workflow=action.event(),referenced_elements=u.unique(current_workflow.find_expressions("GetElement").element_id()),current_element_id=context.element.element_id();return current_workflow.find_expressions("ThisElement").length&&!referenced_elements.includes(current_element_id)&&referenced_elements.push(current_element_id),referenced_elements.map(id=>context.element.find_instance_by_id(id)).filter(e=>e&&e.get_messages().includes("reset_input"))},(err,referenced_inputs)=>{if(err)cb(err);else{for(let input of referenced_inputs)input.message("reset_input");cb()}})},data_to_refresh:null},_default=exported;exports.default=_default}});var require_CancelUpload=__commonJS({"lib-browser-old/core/core_actions/elements/CancelUpload.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var u=_interopRequireWildcard(require_u2()),element_actions_utilities=_interopRequireWildcard(require_element_actions_utilities());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var exported={field_names:{element_id:{}},run(action,properties,context,cb){u.run_once(30,()=>context.element.find_instance_by_id(properties.element_id),(err,element)=>{err?cb(err):(element==null||element.message("cancel_upload"),cb())})},data_to_refresh:null,check_for_errors:element_actions_utilities.element_type_checker},_default=exported;exports.default=_default}});var require_DisplayGroupData=__commonJS({"lib-browser-old/core/core_actions/elements/DisplayGroupData.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var u=_interopRequireWildcard(require_u2()),element_actions_utilities=_interopRequireWildcard(require_element_actions_utilities());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var exported={field_names:{element_id:{},data_source:{}},run(action,properties,context,cb){u.run_once(30,()=>context.element.find_instance_by_id(properties.element_id),(err,element)=>{err?cb(err):(element==null||element.message("set_group_data",properties.data_source),cb())})},data_to_refresh(action,properties,element_instance){return element_actions_utilities._get_data_to_refresh_for_group_actions(action,properties,element_instance,properties.data_source)},check_for_errors:element_actions_utilities.element_type_checker},_default=exported;exports.default=_default}});var require_ResetGroup=__commonJS({"lib-browser-old/core/core_actions/elements/ResetGroup.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var u=_interopRequireWildcard(require_u2()),element_actions_utilities=_interopRequireWildcard(require_element_actions_utilities());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var exported={field_names:{element_id:{}},run(action,properties,context,cb){u.run_once(30,()=>context.element.find_instance_by_id(properties.element_id),(err,element)=>{err?cb(err):(element==null||element.message("reset_group"),cb())})},data_to_refresh(action,properties,element_instance){return element_actions_utilities._get_data_to_refresh_for_group_actions(action,properties,element_instance,null)},check_for_errors:element_actions_utilities.element_type_checker},_default=exported;exports.default=_default}});var require_DisplayListData=__commonJS({"lib-browser-old/core/core_actions/elements/DisplayListData.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var u=_interopRequireWildcard(require_u2()),element_actions_utilities=_interopRequireWildcard(require_element_actions_utilities());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var exported={field_names:{element_id:{},data_source:{}},run(action,properties,context,cb){u.run_once(30,()=>context.element.find_instance_by_id(properties.element_id),(err,element)=>{err?cb(err):(element==null||element.message("set_list_data",properties.data_source),cb(null,null))})},data_to_refresh(action,properties,element_instance){return element_actions_utilities._get_data_to_refresh_for_repeating_group_actions(action,properties,element_instance,properties.data_source)},check_for_errors:element_actions_utilities.element_type_checker},_default=exported;exports.default=_default}});var require_ListClear=__commonJS({"lib-browser-old/core/core_actions/elements/ListClear.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var u=_interopRequireWildcard(require_u2()),element_actions_utilities=_interopRequireWildcard(require_element_actions_utilities());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var exported={field_names:{element_id:{}},run(action,properties,context,cb){u.run_once(30,()=>context.element.find_instance_by_id(properties.element_id),(err,element)=>{err?cb(err):(element==null||element.message("clear_list"),cb())})},data_to_refresh(action,properties,element_instance){return element_actions_utilities._get_data_to_refresh_for_repeating_group_actions(action,properties,element_instance)},check_for_errors:element_actions_utilities.element_type_checker},_default=exported;exports.default=_default}});var require_ListShowNext=__commonJS({"lib-browser-old/core/core_actions/elements/ListShowNext.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var u=_interopRequireWildcard(require_u2()),element_actions_utilities=_interopRequireWildcard(require_element_actions_utilities());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var exported={field_names:u.extend({},element_actions_utilities.field_names_show_previous_next),run(action,properties,context,cb){u.run_once(30,()=>context.element.find_instance_by_id(properties.element_id),(err,element)=>{err?cb(err):(element==null||element.message("show_next",properties.wrap_around),cb())})},data_to_refresh:element_actions_utilities.clear_rg_pagination_frozen_states,check_for_errors(action,report){return element_actions_utilities.element_type_checker(action,report),element_actions_utilities._check_for_errors_show_previous_next(action,report,this.display)}},_default=exported;exports.default=_default}});var require_ListShowPrevious=__commonJS({"lib-browser-old/core/core_actions/elements/ListShowPrevious.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var u=_interopRequireWildcard(require_u2()),element_actions_utilities=_interopRequireWildcard(require_element_actions_utilities());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var exported={field_names:u.extend({},element_actions_utilities.field_names_show_previous_next),run(action,properties,context,cb){u.run_once(30,()=>context.element.find_instance_by_id(properties.element_id),(err,element)=>{err?cb(err):(element==null||element.message("show_previous",properties.wrap_around),cb())})},data_to_refresh:element_actions_utilities.clear_rg_pagination_frozen_states,check_for_errors(action,report){return element_actions_utilities.element_type_checker(action,report),element_actions_utilities._check_for_errors_show_previous_next(action,report,this.display)}},_default=exported;exports.default=_default}});var require_ListGoToPage=__commonJS({"lib-browser-old/core/core_actions/elements/ListGoToPage.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var u=_interopRequireWildcard(require_u2()),element_actions_utilities=_interopRequireWildcard(require_element_actions_utilities());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var exported={field_names:{element_id:{},page:{}},run(action,properties,context,cb){u.run_once(30,()=>context.element.find_instance_by_id(properties.element_id),(err,element)=>{err?cb(err):(element==null||element.message("go_to_page",properties.page),cb())})},data_to_refresh:element_actions_utilities.clear_rg_pagination_frozen_states,check_for_errors(action,report){return element_actions_utilities.element_type_checker(action,report),element_actions_utilities._check_for_errors_show_previous_next(action,report,this.display)}},_default=exported;exports.default=_default}});var require_ScrollToListEntry=__commonJS({"lib-browser-old/core/core_actions/elements/ScrollToListEntry.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var u=_interopRequireWildcard(require_u2()),element_actions_utilities=_interopRequireWildcard(require_element_actions_utilities()),_appquery=_interopRequireDefault(require_appquery());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var exported={field_names:{element_id:{},entry:{},animate:{},offset:{default:0}},run(action,properties,context,cb){u.run_once(30,()=>context.element.find_instance_by_id(properties.element_id),(err,instance)=>{err?cb(err):(instance&&properties.entry!=null&&instance.setTimeout(()=>instance.message("scroll_to",properties),100),cb())})},data_to_refresh:null,check_for_errors(action,report){element_actions_utilities.element_type_checker(action,report);let element=_appquery.default.element(action==null?void 0:action.element_id());return element&&element_actions_utilities.is_fixed_rg(element)&&report(this.display(action)+": "+element.get_name()+" has a 'Fixed number of cells' layout and can't be scrolled to."),!1}},_default=exported;exports.default=_default}});var require_AlertShowMessage=__commonJS({"lib-browser-old/core/core_actions/elements/AlertShowMessage.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;require_es_array_iterator();require_web_dom_collections_iterator();var u=_interopRequireWildcard(require_u2()),element_actions_utilities=_interopRequireWildcard(require_element_actions_utilities()),element_eval=_interopRequireWildcard(require_element_eval());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var exported={field_names:{element_id:{},fade_in:{default:500},hold:{default:2e3},fade_out:{default:500},change_message:{},message:{}},run(action,properties,context,cb){u.run_once(30,()=>{let alert_instance=context.element.find_instance_by_id(properties.element_id),element_text;return properties.change_message?element_text=void 0:element_text=element_eval.evaluate_property(alert_instance,"text"),[element_text,alert_instance]},(err,res)=>{if(err)cb(err);else{let[element_text,alert_instance]=res;element_text&&(properties.message=element_text),alert_instance==null||alert_instance.message("show_alert",properties),cb()}})},data_to_refresh:null,check_for_errors:element_actions_utilities.element_type_checker},_default=exported;exports.default=_default}});var require_DisplayMapMarkerData=__commonJS({"lib-browser-old/core/core_actions/elements/DisplayMapMarkerData.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var u=_interopRequireWildcard(require_u2()),element_actions_utilities=_interopRequireWildcard(require_element_actions_utilities());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var exported={field_names:{element_id:{},data_source:{}},run(action,properties,context,cb){u.run_once(30,()=>context.element.find_instance_by_id(properties.element_id),(err,element)=>{err?cb(err):(element==null||element.message("set_marker_data",properties.data_source),cb())})},data_to_refresh:null,check_for_errors:element_actions_utilities.element_type_checker},_default=exported;exports.default=_default}});var require_SetCurrentMapMarker=__commonJS({"lib-browser-old/core/core_actions/elements/SetCurrentMapMarker.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var u=_interopRequireWildcard(require_u2()),element_actions_utilities=_interopRequireWildcard(require_element_actions_utilities());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var exported={field_names:{element_id:{},to_select:{}},run(action,properties,context,cb){u.run_once(30,()=>context.element.find_instance_by_id(properties.element_id),(err,element)=>{err?cb(err):(element==null||element.message("set_marker_selection",properties.to_select),cb())})},data_to_refresh:null,check_for_errors:element_actions_utilities.element_type_checker},_default=exported;exports.default=_default}});var require_ClearMapMarkers=__commonJS({"lib-browser-old/core/core_actions/elements/ClearMapMarkers.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var u=_interopRequireWildcard(require_u2()),element_actions_utilities=_interopRequireWildcard(require_element_actions_utilities());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var exported={field_names:{element_id:{}},run(action,properties,context,cb){u.run_once(30,()=>context.element.find_instance_by_id(properties.element_id),(err,element)=>{err?cb(err):(element==null||element.message("clear_marker_data"),cb())})},data_to_refresh:null,check_for_errors:element_actions_utilities.element_type_checker},_default=exported;exports.default=_default}});var require_MapAdjustZoom=__commonJS({"lib-browser-old/core/core_actions/elements/MapAdjustZoom.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var u=_interopRequireWildcard(require_u2()),logger=_interopRequireWildcard(require_logger()),element_actions_utilities=_interopRequireWildcard(require_element_actions_utilities());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var exported={field_names:{element_id:{},manual_setting:{},center:{},initial_zoom:{default:10}},run(action,properties,context,cb){u.run_once(30,()=>context.element.find_instance_by_id(properties.element_id),(err,element)=>{err&&logger.log(err),element==null||element.message("map_adjust_zoom",properties),cb()})},data_to_refresh:null,check_for_errors:element_actions_utilities.element_type_checker},_default=exported;exports.default=_default}});var require_core_actions=__commonJS({"lib-browser-old/core/core_actions/index.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_includes();require_es_string_includes();require_es_array_sort();var u=require_u2(),safe_require=require_safe_require(),core_actions_consts=require_core_actions_consts(),Lib=require_lib(),appquery=require_appquery(),plugins=require_plugins(),service_type_parser=require_service_type_parser(),plugin_getter=require_plugin_getter();exports.SignUp=require_SignUp().default;exports.OAuthLogin=require_OAuthLogin();exports.LogIn=require_LogIn();exports.LogOut=require_LogOut().default;exports.CookieOptIn=require_CookieOptIn();exports.CookieOptOut=require_CookieOptOut();exports.UpdateCredentials=require_UpdateCredentials().default;exports.ChangeEmailForAnotherUser=require_ChangeEmailForAnotherUser().default;exports.MakeChangeCurrentUser=require_MakeChangeCurrentUser().default;exports.SendPasswordResetEmail=require_SendPasswordResetEmail().default;exports.SendMagicLink=require_SendMagicLink().default;exports.SendConfirmationEmail=require_SendConfirmationEmail().default;exports.ResetPassword=require_ResetPassword();exports.CreateUserAccount=require_CreateUserAccount().default;exports.CheckUserPassword=require_CheckUserPassword();exports.SetTemporaryPassword=require_SetTemporaryPassword().default;exports.LogOutOtherSessions=require_LogOutOtherSessions();exports.Generate2FAQRCode=require_Generate2FAQRCode().default;exports.Validate2FAToken=require_Validate2FAToken().default;exports.Check2FAToken=require_Check2FAToken();exports.Disable2FA=require_Disable2FA().default;exports.GenerateOneTimeCodes=require_GenerateOneTimeCodes().default;exports.ChangePage=require_ChangePage();exports.RefreshPage=require_RefreshPage().default;exports.GoPrevious=require_GoPrevious().default;exports.OpenURL=require_OpenURL();exports.ScrollToElement=require_ScrollToElement().default;exports.AnimateElement=require_AnimateElement().default;exports.SetFocusToElement=require_SetFocusToElement().default;exports.NewThing=require_NewThing().default;exports.ChangeThing=require_ChangeThing().default;exports.ChangeListOfThings=require_ChangeListOfThings().default;exports.DeleteThing=require_DeleteThing();exports.DeleteListOfThings=require_DeleteListOfThings();exports.CopyListOfThings=require_CopyListOfThings().default;exports.SetSlug=require_SetSlug().default;exports.DownloadDataAsCSV=require_DownloadDataAsCSV().default;exports.UploadCSVData=require_UploadCSVData().default;exports.APIReturnData=require_APIReturnData();exports.DeleteUploadedFile=require_DeleteUploadedFile();exports.TriggerCustomEvent=require_TriggerCustomEvent();exports.TriggerCustomEventFromReusable=require_TriggerCustomEventFromReusable();exports.TriggerCustomOnChange=require_TriggerCustomOnChange().default;exports.ScheduleCustom=require_ScheduleCustom().default;exports.ScheduleAPIEvent=require_ScheduleAPIEvent();exports.ScheduleAPIEventOnList=require_ScheduleAPIEventOnList();exports.TerminateWorkflow=require_TerminateWorkflow();exports.CancelScheduledAPIEvent=require_CancelScheduledAPIEvent().default;exports.CancelListScheduledAPIEvent=require_CancelListScheduledAPIEvent();exports.SetRecurringEvent=require_SetRecurringEvent();exports.PauseWFClient=require_PauseWFClient().default;exports.SendEmail=require_SendEmail();exports.SendICSFileEmail=require_SendICSFileEmail();exports.ShowElement=require_ShowElement().default;exports.HideElement=require_HideElement().default;exports.ToggleElement=require_ToggleElement().default;exports.SetCustomState=require_SetCustomState().default;exports.ResetInputs=require_ResetInputs().default;exports.CancelUpload=require_CancelUpload().default;exports.DisplayGroupData=require_DisplayGroupData().default;exports.ResetGroup=require_ResetGroup().default;exports.DisplayListData=require_DisplayListData().default;exports.ListClear=require_ListClear().default;exports.ListShowNext=require_ListShowNext().default;exports.ListShowPrevious=require_ListShowPrevious().default;exports.ListGoToPage=require_ListGoToPage().default;exports.ScrollToListEntry=require_ScrollToListEntry().default;exports.AlertShowMessage=require_AlertShowMessage().default;exports.DisplayMapMarkerData=require_DisplayMapMarkerData().default;exports.SetCurrentMapMarker=require_SetCurrentMapMarker().default;exports.ClearMapMarkers=require_ClearMapMarkers().default;exports.MapAdjustZoom=require_MapAdjustZoom().default;safe_require.safe_register("./core/core_actions",exports);exports.get_action_object=function(type){if(exports[type])return exports[type];{var _plugin_getter$get_pl;let[plugin_name]=service_type_parser.get_plugin_and_type(type);return(_plugin_getter$get_pl=plugin_getter.get_plugin(plugin_name))==null?void 0:_plugin_getter$get_pl.get_action(type)}}}});var require_composer=__commonJS({"lib-browser-old/constants/composer.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.FINITE_OPTION_INPUT_TYPES=exports.COMPOSER_INPUT_TYPES_WITH_TYPEAHEAD=exports.COMPOSER_INPUT_TYPES=void 0;require_es_array_iterator();require_web_dom_collections_iterator();var _safe_require=_interopRequireDefault(require_safe_require());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_safe_require.default.safe_register("./constants/composer",exports);var COMPOSER_INPUT_TYPES=function(COMPOSER_INPUT_TYPES2){return COMPOSER_INPUT_TYPES2.REAL_TIME_SEARCH="real_time_search",COMPOSER_INPUT_TYPES2.BOOLEAN="boolean",COMPOSER_INPUT_TYPES2.NUMBER="number",COMPOSER_INPUT_TYPES2.INTEGER="integer",COMPOSER_INPUT_TYPES2.TEXT="text",COMPOSER_INPUT_TYPES2.KEY_COMBINATION="key_combination",COMPOSER_INPUT_TYPES2.GEOGRAPHIC_ADDRESS="geographic_address",COMPOSER_INPUT_TYPES2.ENUMERATED="enumerated",COMPOSER_INPUT_TYPES2}({});exports.COMPOSER_INPUT_TYPES=COMPOSER_INPUT_TYPES;var COMPOSER_INPUT_TYPES_WITH_TYPEAHEAD=new Set([COMPOSER_INPUT_TYPES.REAL_TIME_SEARCH,COMPOSER_INPUT_TYPES.BOOLEAN,COMPOSER_INPUT_TYPES.NUMBER,COMPOSER_INPUT_TYPES.INTEGER,COMPOSER_INPUT_TYPES.TEXT]);exports.COMPOSER_INPUT_TYPES_WITH_TYPEAHEAD=COMPOSER_INPUT_TYPES_WITH_TYPEAHEAD;var FINITE_OPTION_INPUT_TYPES=new Set([COMPOSER_INPUT_TYPES.ENUMERATED,COMPOSER_INPUT_TYPES.REAL_TIME_SEARCH]);exports.FINITE_OPTION_INPUT_TYPES=FINITE_OPTION_INPUT_TYPES}});var require_dropdown_contents=__commonJS({"lib-browser-old/editor/composer/utilities/dropdown_contents.js"(exports){"use strict";init_define_process_env();init_shim();require_es_symbol_description();require_es_error_cause();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();Object.defineProperty(exports,"__esModule",{value:!0});exports.SINGLE_SECTION=exports.DropdownContents=void 0;exports.sort_by_display=sort_by_display;require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_flat();require_es_array_unscopables_flat();require_es_object_values();require_es_object_from_entries();require_es_object_entries();require_es_array_flat_map();require_es_array_unscopables_flat_map();require_es_array_sort();var _solidJs=(init_solid(),__toCommonJS(solid_exports)),_composer=require_composer(),_isEqual=_interopRequireDefault(require_isEqual()),_logger=require_logger(),_loggable=require_loggable(),_u=require_u2();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var SINGLE_SECTION="main";exports.SINGLE_SECTION=SINGLE_SECTION;var MemoCollection=class _MemoCollection{constructor(content_fn,evaluation_strategy,name){if(this._content=void 0,this.content=void 0,this.evaluation_strategy=void 0,this._name=void 0,this.evaluation_strategy=evaluation_strategy!=null?evaluation_strategy:"Eager",this.evaluation_strategy==="Lazy"){let[compute,setCompute]=(0,_solidJs.createSignal)(!1);this._content=(0,_solidJs.createMemo)(()=>compute()?content_fn():{},{},{equals:_isEqual.default}),this.content=()=>(setCompute(!0),this._content())}else this._content=(0,_solidJs.createMemo)(content_fn,{},{equals:_isEqual.default}),this.content=()=>this._content();this._name=name!=null?name:"anonymous"}all(){return Object.values(this.content()).flat()}section_names(){return Object.keys(this.content())}section(name){return this.content()[name]}find(matcher,section){if(section){var _this$content$section;return(_this$content$section=this.content()[section])==null?void 0:_this$content$section.find(matcher)}for(let s_content of Object.values(this.content())){let found=s_content.find(matcher);if(found!=null)return found}}filter(filter_fn){return new _MemoCollection(()=>Object.fromEntries(Object.entries(this.content()).map(_ref=>{let[k,content]=_ref;return[k,content.filter(filter_fn)]}).filter(_ref2=>{let[_,content]=_ref2;return content.length>0})),this.evaluation_strategy,"filtered ".concat(this._name))}map(map_fn){return new _MemoCollection(()=>Object.fromEntries(Object.entries(this.content()).map(_ref3=>{let[k,content]=_ref3;return[k,content.map(map_fn)]})),this.evaluation_strategy,"mapped ".concat(this._name))}flatMap(map_fn){return new _MemoCollection(()=>Object.fromEntries(Object.entries(this.content()).map(_ref4=>{let[k,content]=_ref4;return[k,content.flatMap(map_fn)]})),this.evaluation_strategy,"flatMapped ".concat(this._name))}sort(compare_fn){return new _MemoCollection(()=>Object.fromEntries(Object.entries(this.content()).map(_ref5=>{let[k,content]=_ref5;return[k,[...content].sort(compare_fn)]})),this.evaluation_strategy,"sorted ".concat(this._name))}sort_section(section_name,compare_fn){return new _MemoCollection(()=>Object.fromEntries(Object.entries(this.content()).map(_ref6=>{let[k,content]=_ref6;return[k,k===section_name?[...content].sort(compare_fn):[...content]]})),this.evaluation_strategy,"sorted section ".concat(section_name," in ").concat(this._name))}add_items(){for(var _len=arguments.length,items=new Array(_len),_key=0;_key<_len;_key++)items[_key]=arguments[_key];return new _MemoCollection(()=>{let content=_objectSpread({},this.content());for(let[section,inner_items]of items){var _content$section;content[section]=[...(_content$section=content[section])!=null?_content$section:[],...inner_items]}return content},this.evaluation_strategy,"".concat(this._name," with ").concat(items.length," new items"))}name(){return this._name}},StaticCollection=class extends MemoCollection{constructor(content){super(()=>({[SINGLE_SECTION]:content}))}},SectionBuilder=class{constructor(){this.names=void 0,this.contents=void 0,this.names=[],this.contents=[]}section(name,content){return this.names.push(name),this.contents.push(content),this}build(options){return DropdownContents.multi_section(()=>Object.fromEntries(this.names.map(name=>typeof name=="function"?name():name).map((name,idx)=>[name,this.contents[idx]()])),options)}},DROPDOWN_METADATA_FIELDS_WITH_VARIABLE_TYPE=["new_option_accelerator","item_filter_field"],DropdownContents=class _DropdownContents{constructor(sections,options){this._sections=void 0,this._options=void 0,this._sections=sections,this._options=options}static empty(options){return _DropdownContents.no_sections(()=>[],options)}static fromObject(contents,options){let optionContents=Object.entries(contents).map(_ref7=>{let[value,display]=_ref7;return{display,value}});return new _DropdownContents(new StaticCollection(optionContents),options!=null?options:{})}static fromList(contents,options){return new _DropdownContents(new StaticCollection(contents.map(val=>({display:String(val),value:val}))),options!=null?options:{})}static no_sections(content_fn,options){return new _DropdownContents(new MemoCollection(()=>({[SINGLE_SECTION]:content_fn()}),options==null?void 0:options.evaluation_strategy,options==null?void 0:options.name),options!=null?options:{})}static multi_section(content_fn,section_or_options,options){return typeof section_or_options=="function"?new _DropdownContents(new MemoCollection(()=>{let content=content_fn(),result={};for(let item of content){var _result$section;let section=section_or_options(item);(_result$section=result[section])!=null||(result[section]=[]),result[section].push(item)}return result},options==null?void 0:options.evaluation_strategy,options==null?void 0:options.name),options!=null?options:{}):new _DropdownContents(new MemoCollection(content_fn,section_or_options==null?void 0:section_or_options.evaluation_strategy,section_or_options==null?void 0:section_or_options.name),section_or_options!=null?section_or_options:{})}static builder(){return new SectionBuilder}filter(filter_fn){return new _DropdownContents(this._sections.filter(filter_fn),this._options)}map(map_fn,clear_type_options){return new _DropdownContents(this._sections.map(map_fn),_objectSpread(_objectSpread({},this._options),_DropdownContents.possiblyClearTypeOptions(DROPDOWN_METADATA_FIELDS_WITH_VARIABLE_TYPE,clear_type_options,this._options)))}flatMap(map_fn,clear_type_options){return new _DropdownContents(this._sections.flatMap(map_fn),_objectSpread(_objectSpread({},this._options),_DropdownContents.possiblyClearTypeOptions(DROPDOWN_METADATA_FIELDS_WITH_VARIABLE_TYPE,clear_type_options,this._options)))}static possiblyClearTypeOptions(keys,should_clear,options){let entries=keys.map(field=>[field,should_clear?void 0:options[field]]);return Object.fromEntries(entries)}sort(compare_fn){return new _DropdownContents(this._sections.sort(compare_fn),this._options)}sort_section(section_name,compare_fn){return new _DropdownContents(this._sections.sort_section(section_name,compare_fn),this._options)}with_options(new_options){return new _DropdownContents(this._sections,_objectSpread(_objectSpread({},this._options),new_options))}add_items(){return new _DropdownContents(this._sections.add_items(...arguments),this._options)}all(){return this._sections.all()}section_names(){let sections=this._sections.section_names();if(this._options.section_order){let order=Object.fromEntries(this._options.section_order.map((val,i)=>[val,i]));sections.sort((lhs,rhs)=>{var _order$lhs,_order$rhs;return((_order$lhs=order[lhs])!=null?_order$lhs:1/0)-((_order$rhs=order[rhs])!=null?_order$rhs:1/0)})}return sections}section(name){return this._sections.section(name)}find(matcher,section){return this._sections.find(matcher,section)}get_input_type(){var _this$_options$input_;return(_this$_options$input_=this._options.input_type)!=null?_this$_options$input_:_composer.COMPOSER_INPUT_TYPES.REAL_TIME_SEARCH}get_dropdown_width(){var _this$_options$dropdo;return(_this$_options$dropdo=this._options.dropdown_width)!=null?_this$_options$dropdo:"long"}get_new_option_accelerator(){return this._options.new_option_accelerator}should_show_sections(){var _this$_options$show_s;return(_this$_options$show_s=this._options.show_sections)!=null?_this$_options$show_s:!1}is_optional(){var _this$_options$option;return(_this$_options$option=this._options.optional)!=null?_this$_options$option:!1}get_display_for_literal(val){return this._options.get_display_for_literal!=null?this._options.get_display_for_literal(val):null}get_value_for_literal(val){if(this._options.get_value_for_literal!=null)return this._options.get_value_for_literal(val)}item_filter_field(){return this._options.item_filter_field}ignore_type_check(){var _this$_options$ignore;return(_this$_options$ignore=this._options.ignore_type_check)!=null?_this$_options$ignore:!1}section_classes(){var _this$_options$sectio;return(_this$_options$sectio=this._options.section_classes)!=null?_this$_options$sectio:{}}get_virtualize_options(){return this._options.virtualize?this._options:{virtualize:!1}}has_grid_section(){var _this$_options$grid_s;return(_this$_options$grid_s=this._options.grid_section)!=null?_this$_options$grid_s:!1}name(){return this._sections.name()}is_legal(value){if(this._options.is_legal!=null)try{return this._options.is_legal(value)}catch(e){if(e instanceof _u.NotReadyError)throw e;return(0,_logger.log)("error","An error occurred trying to check your app for issues",{value:(0,_loggable.to_loggable)(value),err:(0,_loggable.to_loggable)(e)}),!1}return this.find(other=>other.display===value||other.value===value)!=null||this.get_display_for_literal(value)!=null}};exports.DropdownContents=DropdownContents;function sort_by_display(lhs,rhs){var _lhs$display,_rhs$display;return((_lhs$display=lhs.display)==null?void 0:_lhs$display.toLowerCase())<((_rhs$display=rhs.display)==null?void 0:_rhs$display.toLowerCase())?-1:1}}});var require_shared_fields=__commonJS({"lib-browser-old/core/shared_fields.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_includes();require_es_string_includes();require_es_array_iterator();require_web_dom_collections_iterator();var btypes=require_btypes(),Lib=require_lib(),btype_ids=require_btype_ids(),safe_require=require_safe_require(),{DropdownContents}=require_dropdown_contents(),shared_fields=exports;safe_require.safe_register("./core/shared_fields",shared_fields)}});var require_pluginservice=__commonJS({"lib-browser-old/pluginservice.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_reduce();require_es_array_reverse();require_es_symbol_description();require_es_error_cause();require_es_object_get_own_property_descriptors();require_es_string_trim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_regexp_exec();require_es_string_match();require_es_string_split();require_es_string_replace();require_es_object_assign();require_es_json_stringify();require_es_regexp_constructor();require_es_regexp_dot_all();require_es_regexp_to_string();require_es_array_flat_map();require_es_array_unscopables_flat_map();require_es_object_values();require_es_array_sort();require_es_string_starts_with();require_es_array_includes();require_es_string_includes();require_web_dom_collections_for_each();var _dec,_dec2,_class;function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key]}),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce(function(desc2,decorator){return decorator(target,property,desc2)||desc2},desc),context&&desc.initializer!==void 0&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),desc.initializer===void 0&&(Object.defineProperty(target,property,desc),desc=null),desc}var base64url=require_base64url2(),u=require_u2(),b_object=require_b_object(),errors=require_errors(),mode_check=require_mode_check(),b_async=require_b_async3(),autorun=require_autorun3(),b_ui=require_b_ui(),incremental=require_incremental(),caching=require_caching(),external=require_external(),apiconnectorbase=require_apiconnectorbase2(),Lib=require_lib(),appquery=require_appquery(),plugin_versioning=require_plugin_versioning(),property_applications=require_property_applications(),core_actions=require_core_actions(),shared_fields=require_shared_fields(),inputs=require_inputs(),element_workflows=require_element_workflows(),btypes=require_btypes(),widgets=require_widgets(),fileupload=require_fileupload(),b_location=require_b_location(),service_type_parser=require_service_type_parser(),logger=require_logger(),plugin_consts=require_plugin(),external_api_utilities=require_external_api_utilities(),responsive_layout=require_responsive_layout(),element_eval=require_element_eval(),element_props=require_element_props(),decaf=require_decaf(),btype_ids=require_btype_ids(),color_tokens=require_color_tokens(),pluginservice=exports;pluginservice.MAX_LENGTH_SERVER_SIDE=2e6;pluginservice.MAX_LENGTH_PACKAGE=5e5;pluginservice.PREDEFINED_BTYPE_TYPES=["text","number","number_range","boolean","image","file","geographic_address","date","date_range","user"];var plugin_execution_time={};pluginservice.get_plugin_execution_time=function(){return plugin_execution_time};pluginservice.can_use_message=function(btype_id,_message_name){let m=btypes.get(btype_id).get_message(_message_name);return(m.is_lookup()||m.public_for_plugins())&&!m.is_not_found()};pluginservice.get_ListProperties=function(btype_id){return btypes.get(btype_id).plugin.get_message_names().filter(incremental.with_pause_tick(msg=>pluginservice.can_use_message(btype_id,msg)),5)};var EDITORS_WITH_DEFAULTS={StaticText:!0,StaticNumber:!0,Checkbox:!0,Color:!0,Dropdown:!0,Image:!0,key_value_list:!1},BTYPES_WITH_DEFAULTS={text:!0,number:!0,boolean:!0,image:!0,file:!0,geographic_address:!1};pluginservice.property_uses_default=function(editor_type,btype,is_list){var _BTYPES_WITH_DEFAULTS;return EDITORS_WITH_DEFAULTS[editor_type]!=null?EDITORS_WITH_DEFAULTS[editor_type]:is_list?!1:(_BTYPES_WITH_DEFAULTS=BTYPES_WITH_DEFAULTS[btype])!=null?_BTYPES_WITH_DEFAULTS:!1};var function_regex=plugin_consts.PLUGIN_FUNCTION_REGEX;pluginservice.extract_code=function(string,source_name){var _string,_string$match,_string2;string=(_string=string)==null?void 0:_string.trim();let[fn_name,vars]=(_string$match=(_string2=string)==null?void 0:_string2.match(function_regex))!=null?_string$match:[],code=string.split(fn_name).slice(1).join(fn_name);return code=code.split("{").slice(1).join("{").split("}").slice(0,-1).join("}"),code+="\n//# sourceURL=".concat(plugin_consts.PLUGIN_CODE_SRC_PREFIX).concat(source_name.replace(/[^\w/]/g,"-"),".js"),{vars,code}};pluginservice.create_code=function(string,source_name,cb,code_modif_fn){let build_code_start=Date.now();try{var _plugin_execution_tim;let{vars,code}=pluginservice.extract_code(string,source_name);code_modif_fn&&(code=code_modif_fn(code));let func=new Function(vars,code),build_code_end=Date.now();return plugin_execution_time["".concat(source_name)]=(_plugin_execution_tim=plugin_execution_time["".concat(source_name)])!=null?_plugin_execution_tim:0,plugin_execution_time["".concat(source_name)]+=build_code_end-build_code_start,function(){let run_code_start=Date.now();try{return func(...arguments)}finally{let run_code_end=Date.now();plugin_execution_time["".concat(source_name)]+=run_code_end-run_code_start}}}catch(error){return cb(error),null}};pluginservice.get_keys=function(api_data,html_header,shared_keys){let keys={};switch(api_data==null?void 0:api_data.auth){case"private_key_url":case"private_key_header":Object.assign(keys,{appsecret:{caption:"API Key",type:"secure"}});break;case"oauth2_pw":case"basic_auth":Object.assign(keys,{appid:{caption:"Username",type:"client_safe"},appsecret:{caption:"Password",type:"secure"}});break;case"jwt":Object.assign(keys,{iss:{caption:"Iss (account email)",type:"client_safe"},private_key:{caption:"Private key (between -----BEGIN RSA PRIVATE KEY----- and -----END RSA PRIVATE KEY-----)",type:"secure",editor:"MultilineTextBox"}});break;case"cert_key":Object.assign(keys,{cert_file:{caption:"Certificate file content",type:"secure",editor:"MultilineTextBox"},key_file:{caption:"Key file content",type:"secure",editor:"MultilineTextBox"}});break;case"oauth2_custom":{for(let type of["body_params","headers"])for(let id in(_api_data$calls=api_data.calls)==null||(_api_data$calls$token=_api_data$calls.token_call)==null?void 0:_api_data$calls$token[type]){var _api_data$calls,_api_data$calls$token,_api_data$calls2,_api_data$calls2$toke;let{key,visibility}=(_api_data$calls2=api_data.calls)==null||(_api_data$calls2$toke=_api_data$calls2.token_call)==null?void 0:_api_data$calls2$toke[type][id];if(key!=null&&visibility==="secret"){let param_name=apiconnectorbase.user_friendly_parameter_names[type];Object.assign(keys,{["token_call_".concat(type,"_").concat(id)]:{caption:"".concat(key," ").concat(param_name," (token call)"),type:"secure"}})}}break}case"oauth2_user":Object.assign(keys,{appid:{caption:"App ID/API Key",type:"client_safe"},appsecret:{caption:"App Secret",type:"secure"}});break}for(let id in html_header==null?void 0:html_header.params){let{key}=html_header==null?void 0:html_header.params[id];Object.assign(keys,{["header_".concat(id)]:{caption:key+" (headers)",type:"client_safe"}})}Object.assign(keys,shared_keys);for(let type of["shared_headers","shared_params"])for(let param_id in api_data==null?void 0:api_data[type]){let param_data=api_data==null?void 0:api_data[type][param_id];(param_data==null?void 0:param_data.visibility)==="secret"&&param_data.key&&(keys[type+"_"+param_id]={caption:param_data.key+" "+apiconnectorbase.user_friendly_parameter_names[type],type:"secure"})}for(let call_id in api_data==null?void 0:api_data.calls){let call_data=api_data==null?void 0:api_data.calls[call_id];if(call_data.initialized&&call_id!=="token_call")for(let type of["url_params","headers","params","body_params"])for(let param_id in call_data[type]){let param_data=call_data[type][param_id];(param_data==null?void 0:param_data.visibility)==="secret"&&param_data.key&&(keys[call_id+"_"+type+"_"+param_id]={caption:call_data.name+" - "+param_data.key+" "+apiconnectorbase.user_friendly_parameter_names[type],type:"secure"})}}return keys};var can_use_original=!1;function get_original(obj){try{var _obj$__original;return can_use_original=!0,obj==null||(_obj$__original=obj.__original)==null?void 0:_obj$__original.call(obj)}finally{can_use_original=!1}}pluginservice.api_key_prefix="_p_";var _uploaded_files={},_upload_file_queues={},_currently_uploading={};function calculate_file_hash(_ref){var _get_original,_get_original$_id;let{file,fileName,contents,attach_to}=_ref;return(file?file.name+"_"+file.lastModified:fileName+"_"+contents)+"_"+((_get_original=get_original(attach_to))==null||(_get_original$_id=_get_original._id)==null?void 0:_get_original$_id.call(_get_original))}function add_to_upload_queue(plugin_name,data){var _upload_file_queues$p;let hash=plugin_name+"_"+calculate_file_hash(data);if(_uploaded_files[hash]){var _data$callback;(_data$callback=data.callback)==null||_data$callback.call(data,null,_uploaded_files[hash]);return}(_upload_file_queues$p=_upload_file_queues[plugin_name])!=null||(_upload_file_queues[plugin_name]=[]),_upload_file_queues[plugin_name].push(data),check_if_we_can_upload_and_do_it(plugin_name)}function check_if_we_can_upload_and_do_it(plugin_name){if(!_currently_uploading[plugin_name]&&_upload_file_queues[plugin_name].length){let do_next=function(){_upload_file_queues[plugin_name]=_upload_file_queues[plugin_name].slice(1),_upload_file_queues[plugin_name].length<50?(_currently_uploading[plugin_name]=!1,check_if_we_can_upload_and_do_it(plugin_name)):setTimeout(()=>{_currently_uploading[plugin_name]=!1,check_if_we_can_upload_and_do_it(plugin_name)},1e3*_upload_file_queues[plugin_name].length*100)},data=_upload_file_queues[plugin_name][0],{file,fileName,contents,callback,attach_to,callback_progress,instance}=data,hash=plugin_name+"_"+calculate_file_hash(data);if(_uploaded_files[hash])callback==null||callback(null,_uploaded_files[hash]),do_next();else{let get_additional_data=function(cb){if(attach_to){var _get_original2,_get_original2$_id;let thing_id=(_get_original2=get_original(attach_to))==null||(_get_original2$_id=_get_original2._id)==null?void 0:_get_original2$_id.call(_get_original2);if(thing_id)cb(null,{attach_to:thing_id});else{let err=new errors.UnexpectedError("Trying to attach an upload to a non Bubble thing");throw cb(err),err}}else cb(null,{})},cb_success=function(uploaded_url){_uploaded_files[plugin_name+"_"+fileName+"+"+contents]=uploaded_url,callback==null||callback(null,uploaded_url),do_next()},cb_fail=function(err){callback==null||callback(err),do_next()};_currently_uploading[plugin_name]=!0;let cb_start=void 0;file?fileupload.upload_file(file,instance,get_additional_data,cb_success,cb_start,cb_fail,progress=>callback_progress==null?void 0:callback_progress(progress)):widgets.upload_file({contents},void 0,get_additional_data,cb_success,cb_start,cb_fail,void 0,fileName)}}}var ThirdPartyPluginWrapper=(_dec=caching.cached({type:caching.AUTORUN}),_dec2=caching.cached({type:caching.AUTORUN}),_class=class extends external.Service{calls(){let calls={},api_data=this.get_api(),{name}=this;api_data.auth==="oauth2_user"&&(calls.oauth_user_data_call=class extends external.Call{get human(){return api_data.human}get _must_proxy(){return!0}get value_id(){return btype_ids.api_type("".concat(name,".oauth_profile"))}build(prev,properties){return{path:api_data.oauth_user_data_call}}});for(let call_id in api_data.calls){let call_data=api_data.calls[call_id];calls[call_id]=call_data,this.is_testing()?calls[call_id].api_human=api_data.human+" (testing)":calls[call_id].api_human=api_data.human,calls[call_id].api_id=this.name}return calls}get_call_class(call_name){let call_data=this.calls()[call_name];return call_name==="oauth_user_data_call"?call_data:apiconnectorbase.get_call_from_raw(call_name,call_data)}handle_request_failures(error){return external_api_utilities.handle_request_failures(error)}get_error_message(response,call){return apiconnectorbase.get_error_message(response,call,!0)}get dynamic_calls(){return!0}constructor(name,version,raw){var _this$raw$human;super(),this.name=name,this.version=version,this.raw=raw,this.human=(_this$raw$human=this.raw.human)!=null?_this$raw$human:this.get_api().human,this.is_testing()&&(this.human+=" (testing)"),this.pv=plugin_versioning.get_pv(this.get_plugin_api_version())}get_plugin_api_version(){var _this$raw$dependencie;let plugin_version=(_this$raw$dependencie=this.raw.dependencies)==null?void 0:_this$raw$dependencie.plugin_api_version;return plugin_version?String(plugin_version):"0"}is_testing(){return this.version==="current"}response_to_data(data,response,data_type,call){var _data_type;(_data_type=data_type)!=null||(data_type="json");let body=super.response_to_data(data,response,data_type,call,call==null?void 0:call.wrap_error);if(call!=null&&call.get_headers||call!=null&&call.wrap_error){let{headers}=response;return{body,headers}}return body}get_api(){if(!this._processed_raw_api){var _this$raw$plugin_api;this._processed_raw_api=b_object.deep_copy((_this$raw$plugin_api=this.raw.plugin_api)!=null?_this$raw$plugin_api:{});let id=service_type_parser.get_plugin_id(this.name),regex=new RegExp(id,"g");for(let call_id in this._processed_raw_api.calls){let call=this._processed_raw_api.calls[call_id];for(let thing of["types","data_container"])call[thing]&&typeof call[thing]=="string"&&(this.is_testing()&&thing==="types"&&(call[thing]=call[thing].replace(regex,this.name)),call[thing]=b_object.json_parse(call[thing]))}}return this._processed_raw_api}has_html_header(){var _this$get_html_header,_this$get_html_header2;return((_this$get_html_header=(_this$get_html_header2=this.get_html_header())==null?void 0:_this$get_html_header2.snippet)!=null?_this$get_html_header:"")!==""}get_html_header(){return this.raw.html_header}get_keys(){var _this$get_authenticat,_this$get_authenticat2;let k=pluginservice.get_keys(this.get_api(),this.get_html_header(),this.raw.shared_keys);return(_this$get_authenticat=(_this$get_authenticat2=this.get_authenticator()).add_generic_authenticator_keys)==null||_this$get_authenticat.call(_this$get_authenticat2,k),k}get_keys_for_context(){let keys={},object2=this.get_keys();for(let key_id in object2){let{caption}=object2[key_id],val=this.get_key(key_id);val!=null&&(keys[caption]=val)}return keys}authenticator(){let api_data=this.get_api(),auth;switch(api_data.auth){case null:case void 0:case"none":auth=new external.NoAuth;break;case"private_key_url":case"private_key_header":api_data.token_param_name||(api_data.auth==="private_key_url"?api_data.token_param_name="private_key":api_data.token_param_name="Authorization"),auth=new external.PrivateKey(apiconnectorbase.get_private_key_auth_params(api_data));break;case"basic_auth":auth=new external.BasicAuth;break;case"oauth2_pw":auth=new external.Oauth2PWFlow(apiconnectorbase.get_oauth2_pw_auth_params(api_data));break;case"oauth2_custom":auth=new external.Oauth2Custom;break;case"jwt":auth=new external.JWT(apiconnectorbase.get_jwt_auth_params(api_data));break;case"cert_key":auth=new external.SSLProtocol;break;case"oauth2_user":{let auth_params=_objectSpread(_objectSpread({},apiconnectorbase.get_oauth2_user_auth_params(api_data)),{},{_id:this.name});auth=new external.Oauth2(auth_params)}}return auth._service=this,auth._display=api_data.human,auth.add_shared_params_and_headers=req=>{apiconnectorbase.add_shared_params_and_headers(api_data,req,this.name,(header_id,header)=>header.visibility==="secret"?this.get_key("shared_headers_"+header_id):header.value,(param_id,param)=>param.visibility==="secret"?this.get_key("shared_params_"+param_id):param.value)},auth}public_values(){return decaf.object_values(this.get_api().calls).filter(data=>data.publish_as==="data"&&data.initialized).flatMap(data=>decaf.object_keys(data.types))}values(){let vals={},api_data=this.get_api();api_data.auth==="oauth2_user"&&(vals.oauth_profile=new external.StructValue("Profile "+api_data.human,{id:{path:api_data.id_path!=null?api_data.id_path.split("."):void 0},email:{path:api_data.email_path!=null?api_data.email_path.split("."):void 0}})),apiconnectorbase.get_btypes_from_call(this.name,api_data,vals,pluginservice.api_key_prefix);for(let v of Object.values(vals))v.human+=" ("+api_data.human+")";return vals}_get_sorted_list(type){return decaf.object_entries(this.get_api().calls).filter(_ref2=>{let[_,call_data]=_ref2;return call_data.publish_as===type&&apiconnectorbase.is_call_initialized(call_data)}).map((_ref3,index)=>{var _call_data$rank;let[call_id,call_data]=_ref3;return{call_id,rank:(_call_data$rank=call_data.rank)!=null?_call_data$rank:index}}).sort((a,b)=>a.rank-b.rank).map(_ref4=>{let{call_id}=_ref4;return call_id})}public_calls(){return this._get_sorted_list("data")}action_calls(){return this._get_sorted_list("action")}user_calls(){return this.get_api().auth==="oauth2_user"?["oauth_user_data_call"]:[]}oauth_providers(){let api_data=this.get_api();return api_data.auth==="oauth2_user"?[{id:this.name,display:api_data.human}]:[]}base_url(){return""}_get_processed_elements_raw(){return this._processed_raw_elements||(this._processed_raw_elements=this._interpret_raw_plugin_def()),this._processed_raw_elements}actions(){return this._get_processed_elements_raw().actions}elements(){return this._get_processed_elements_raw().elements}events(){return this._get_processed_elements_raw().events}_interpret_raw_plugin_def(){var _this$raw$dependencie2;let elements={},events={},actions={},plugin_version=this.version,plugin_name=this.name,plugin_human=this.human,pv=this.pv;function get_btype(node,plugin_type,is_list){var _plugin_type;let val;if((_plugin_type=plugin_type)!=null||(plugin_type="null"),plugin_type.startsWith("custom_data_"))if(plugin_type.startsWith("custom_data_element_")){let element_node=appquery.element(node.get_static_property("element_id"));element_node!=null&&element_node.exists()&&(val=element_node.get_static_property(plugin_type.split("custom_data_element_")[1]))}else val=node.get_static_property(plugin_type.split("custom_data_")[1]);else{if(plugin_type==="_any_thing")return is_list?"list*":btypes.any;if(plugin_type==="_any_thing_bindable")return is_list?"list*bindable":btypes.compound;val=plugin_type}return typeof val!="string"?"null":is_list?btype_ids.list_type(val):val}function get_field_names(element_definition,is_action){let{fields,support_autobinding,autobinding_value,add_large_file_upload_properties}=element_definition,res={};is_action&&(res.element_id={});for(let field_id in fields){let field_object=fields[field_id],{caption,editor,optional,in_style,value,is_list}=field_object,{default_val}=field_object;pluginservice.property_uses_default(editor,value,is_list)||(default_val=null),caption&&editor&&(res[field_id]={},optional&&(res[field_id].optional=optional),default_val!=null&&(res[field_id].default=default_val),(["custom_type","Label"].includes(editor)||editor.indexOf("custom_field_")===0)&&(res[field_id].no_states=!0),["StaticText","StaticNumber","Checkbox","Color","Dropdown","Image"].includes(editor)&&in_style&&(res[field_id].in_style=!0))}return support_autobinding&&autobinding_value&&Object.assign(res,inputs.get_auto_binding_field_names),add_large_file_upload_properties&&(Object.assign(res,inputs.get_max_file_size_field_name),Object.assign(res,inputs.get_file_upload_condition_field_name)),res}let create_run_mode_code=(_ref9,fn_name)=>{let{fn,add_debugger}=_ref9;if(Lib().is_edit_mode())throw new errors.UnexpectedError("running plugin code in edit mode!!!!");if(mode_check.on_server())throw new errors.UnexpectedError("running plugin code on the server!!!! TO REMOVE WHEN WE HAVE SERVER ACTIONS");return pluginservice.create_code(fn,"".concat(plugin_name,"/").concat(plugin_human," ").concat(fn_name),original_error=>{let trimmed_display=("WARNING: Error parsing plugin code for "+fn_name+". Please check \n"+(fn!=null?fn:"missing function")).slice(0,8191);logger.owner_error("error parsing plugin code",{display:trimmed_display,original_error})},code=>(plugin_version==="current"&&add_debugger&&(code="  debugger; // Debugger entry point for Bubble Plugin // \n"+code),code))},run_with_error=(node,fn,type,fail_cb)=>{try{return fn()}catch(err){var _node$element,_node$element$E,_node$A,_node$A$display,_ref10,_err$stack;if(err instanceof errors.NotReadyError)throw err;let display="The plugin "+this.display();if(type==="element"&&((_node$element=node.element)==null||(_node$element$E=_node$element.E)==null?void 0:_node$element$E.display)!=null){var _node$element2,_node$element2$E;display+=" / element "+((_node$element2=node.element)==null||(_node$element2$E=_node$element2.E)==null?void 0:_node$element2$E.display)}else if(type==="action"&&((_node$A=node.A)==null||(_node$A$display=_node$A.display)==null?void 0:_node$A$display.call(_node$A))!=null){var _node$A2,_node$A2$display;display+=" / action "+((_node$A2=node.A)==null||(_node$A2$display=_node$A2.display)==null?void 0:_node$A2$display.call(_node$A2))}display+=" threw the following error: ",display+=((_ref10=(_err$stack=err.stack)!=null?_err$stack:err.message)!=null?_ref10:"").split("\n").slice(0,3).join("\n"),plugin_version==="current"?display+=" (please check your plugin's code)":display+=" (please report this to the plugin author)";let ownerr=new errors.OwnerError("plugin evaluation error",{display,original_error:err,element_instance:type==="element"?node:null,action:type==="action"?node:null});logger.log(ownerr),fail_cb==null||fail_cb(ownerr)}};function _get_public_value(_thing,_btype_id,server_side){if(_thing==null)return null;let _guess_thing_type=__thing=>{var _thing$_type;if(__thing==null)return null;if((_thing$_type=__thing._type)!=null&&_thing$_type.call(__thing)){var _thing$_type2;return(_thing$_type2=__thing._type)==null?void 0:_thing$_type2.call(__thing)}else{if(__thing.getTime!=null)return"date";if(b_location.ensure_valid_location(__thing))return"geographic_address";if(Array.isArray(__thing)){if(typeof __thing[0]=="number")return"number_range";if(__thing[0].getTime!=null)return"date_range"}else switch(typeof __thing){case"string":return"text";case"number":return"number";case"boolean":return"boolean"}}};if(typeof _btype_id=="function")_btype_id=_guess_thing_type(_thing);else if(["list*","list*bindable"].includes(_btype_id)){var _thing$all,_thing$all2;let raw_list=(_thing$all=(_thing$all2=_thing.all)==null?void 0:_thing$all2.call(_thing))!=null?_thing$all:[];if(raw_list.length===0)return{length(){return 0},get(){return[]}};let _first_thing_non_null;for(let a of raw_list)if(a!=null){_first_thing_non_null=a;break}let thing_btype_id=_guess_thing_type(_first_thing_non_null);if(!thing_btype_id)return null;_btype_id=btype_ids.list_type(thing_btype_id)}if(!_btype_id)return null;let btype_obj=btypes.get(_btype_id);if(pluginservice.PREDEFINED_BTYPE_TYPES.includes(_btype_id)&&_btype_id!=="user"){if(server_side&&pv.fix_server_dates){if(_btype_id==="date"){var _btype_obj$get_JS_obj;return{date:!0,val:(_btype_obj$get_JS_obj=btype_obj.get_JS_object(_thing))==null?void 0:_btype_obj$get_JS_obj.getTime()}}else if(_btype_id==="date_range"){var _btype_obj$get_JS_obj2;return{date_range:!0,val:(_btype_obj$get_JS_obj2=btype_obj.get_JS_object(_thing))==null?void 0:_btype_obj$get_JS_obj2.map(date=>date.getTime())}}}return btype_obj.get_JS_object(_thing)}if(server_side)if(btype_ids.is_list(_btype_id)){let inner=btype_obj.inner();return{list:!0,val:_thing.all().map(a=>_get_public_value(a,inner.id(),!0))}}else return btype_ids.is_option_set(_btype_id)?btype_obj.get_JS_object(_thing):{object:!0,type:_btype_id,val:btype_obj.get_JS_object(_thing)};else return btype_ids.is_list(_btype_id)?{length(){return _thing.length()},get(from2,length){if(from2==null)throw new errors.UnexpectedError("Invalid from: "+from2);if(length==null)throw new errors.UnexpectedError("Invalid from: "+length);return _thing.get_children(from2,length).map(t=>_get_public_value(t,btype_obj.inner().id()))}}:{get(field_name){if(!field_name)throw new errors.UnexpectedError("Invalid fieldName: "+field_name);let message=btype_obj.get_message(field_name);if(!pluginservice.can_use_message(_btype_id,field_name))throw new errors.UnexpectedError("This fieldName does not exist: "+field_name);return _get_public_value(message.evaluate(_thing),message.ret_btype_id())},listProperties(){return pluginservice.get_ListProperties(_btype_id)},__original(){if(!can_use_original)throw new errors.UnexpectedError("Forbidden function");return _thing}}}function get_property_public_value(thing,node,editor,value,is_list,server_side){if(!value)return editor==="Color"?color_tokens.color_property_to_rgba(thing):thing;if(editor==="custom_type")return btypes.get(thing).display();if(editor!=null&&editor.indexOf("custom_field_")===0){let value_name=node.get_static_property(editor.split("custom_field_")[1]),message=btypes.get(value_name).get_message(thing);return message.is_not_found()?null:message.name()}return editor==="key_value_list"?decaf.object_values(thing).map(entry=>(delete entry.action,entry.value=_get_public_value(entry.value,value,server_side),entry)):_get_public_value(thing,get_btype(node,value,is_list),server_side)}function get_action_properties_with_custom_keys(action,original_properties,fields,is_server){let properties={};for(let field_id in fields){let{name,value,is_list,editor}=fields[field_id];properties[name]=get_property_public_value(original_properties[field_id],action,editor,value,is_list,is_server)}return properties}let use_jquery=(_this$raw$dependencie2=this.raw.dependencies)==null?void 0:_this$raw$dependencie2.use_jquery,async_keys={},async_errors={},async_vals={},get_context_object=_ref11=>{let{instance,action,bubble_context}=_ref11,res={currentUser:get_property_public_value(Lib().current_user(),void 0,void 0,"user")};return use_jquery&&(res.jQuery=$),res.uploadContent=(fileName,contents,callback,attach_to)=>(contents&&add_to_upload_queue(plugin_name,{fileName,contents,callback,attach_to}),null),res.keys=this.get_keys_for_context(),res.async=function(fn){var _instance$toUniqueStr,_async_errors$hash;let hash=fn.toString()+((_instance$toUniqueStr=instance==null?void 0:instance.toUniqueString())!=null?_instance$toUniqueStr:bubble_context==null?void 0:bubble_context.run_id);return async_keys[hash]==null&&(async_keys[hash]=b_async.MakeKey(null,"Pluginservice.context.async "+hash),fn((err,res2)=>(err?async_errors[hash]=err:async_vals[hash]=res2,async_keys[hash].turn()))),b_async.ensure_ready(async_keys[hash]),(_async_errors$hash=async_errors[hash])!=null?_async_errors$hash:async_vals[hash]},res.onCookieOptIn=function(fn){if(typeof fn!="function"){logger.owner_error("Calling onCookieOptIn without a function");return}return Lib().user.on_cookie_opt_in(()=>run_with_error(void 0,fn,"general"))},res.reportDebugger=message=>logger.owner_error("plugin reported a message",{display:String(message),element_instance:instance,action}),res},current_service=this;for(let element_id in this.raw.plugin_elements){let find_id_from_name=function(search_name,type,raw_data){for(let id in raw_data[type]){let{name}=raw_data[type][id];if(name===search_name)return id}},convert_from_js_to_bubble=function(_ref12){let{thing,node,value,is_list}=_ref12;if(thing==null)return null;let actual_btype=get_btype(node,value,is_list);if(btype_ids.is_list(actual_btype)){Array.isArray(thing)||logger.owner_error("Trying to send an invalid array to Bubble",{array_sent:thing,element_instance:node});let inner_btype=btypes.get(actual_btype).inner().id();return thing.map(entry=>convert_from_js_to_bubble({thing:entry,node,value:inner_btype}))}let btype_obj=btypes.get(actual_btype);if(thing.__original!=null)return get_original(thing);if(btype_obj.can_JS_to_bubble())return btype_obj.JS_to_bubble(thing);logger.owner_error("Trying to convert an invalid object to Bubble",{object_sent:thing,element_instance:node})},display_for_action=function(action,caption){let target=appquery.element(action==null?void 0:action.element_id()),name=target?target.get_name():"a ".concat(element_raw.display);return"".concat(caption," ").concat(name)+"".concat(current_service.is_testing()?" (testing)":"")};var _current_service$is_t,_element_raw$property,_element_raw$property3,_element_raw$headers$,_element_raw$headers,_element_raw$headers$2;let element_raw=this.raw.plugin_elements[element_id],element={is_non_hardcoded_plugin:!0,display:element_raw.display+"".concat((_current_service$is_t=current_service.is_testing)!=null&&_current_service$is_t.call(current_service)?" (testing)":""),category:element_raw.category,icon:element_raw.icon,get_html(){return"<div></div>"},add_an_invisible_div_on_the_top:!0,is_input:!1,contains_group_data:!1,change_cursor_style_if_clickable:!1,mandatory_sections(){return["PluginElement"]},defaults:element_raw.default_dim,uses_css_responsive:pv.responsive_version>0,can_fit_width:element_raw.can_fit_width,can_fit_height:element_raw.can_fit_height};element.field_names=get_field_names(element_raw),element.styleable_properties={};for(let prop_name in element.field_names)element.field_names[prop_name].in_style&&(element.styleable_properties[prop_name]=!0);element._fields=element2=>get_fields(element2,element_raw);let initial_property_applications=[];for(let property_application in element_raw.property_applications)element_raw.property_applications[property_application]&&!["resizable","Font"].includes(property_application)&&initial_property_applications.push(new property_applications[property_application]);(_element_raw$property=element_raw.property_applications)!=null&&_element_raw$property.resizable?initial_property_applications.push(new property_applications.Dimensions):(initial_property_applications.push(new property_applications.PositionOnly),element.not_resizable=()=>!0),element.property_applications=element2=>{var _element_raw$property2;let p_apps=[...initial_property_applications];return(_element_raw$property2=element_raw.property_applications)!=null&&_element_raw$property2.Font&&p_apps.push(new property_applications.Font),pv.responsive_version>0&&p_apps.push(new property_applications.ResponsiveElement(element2)),p_apps},(_element_raw$property3=element_raw.property_applications)!=null&&_element_raw$property3.MinWidth&&(element.get_min_width=()=>0),element.dont_add_hover_pressed=!element_raw.add_hover_pressed,element.starts_hidden=!element_raw.add_is_visible;let header_snippet=(_element_raw$headers$=(_element_raw$headers=element_raw.headers)==null||(_element_raw$headers$2=_element_raw$headers.snippet)==null?void 0:_element_raw$headers$2.trim())!=null?_element_raw$headers$:"";header_snippet!==""&&(element.element_html_header=function(){return header_snippet.replace(/\r?\n|\r/g,"")}),element.get_states=()=>{var _element_raw$states;return Object.keys((_element_raw$states=element_raw.states)!=null?_element_raw$states:{})},element.add_specific_messages=function(messages,element2){for(let state_id in element_raw.states){let state_data=element_raw.states[state_id];state_data.value!=null&&Object.assign(messages,{["get_".concat(state_id)]:{description:"'s "+state_data.caption,section:"States",ret_btype:get_btype(element2,state_data.value,state_data.is_list),fn(a,b){return this.ret_btype().cast(a==null?void 0:a.state(state_id))}}})}},element.get_state_value=function(element2,name){for(let state_id in element_raw.states){let state_data=element_raw.states[state_id];if(state_data.value!=null&&state_data.caption===name)return get_btype(element2,state_data.value,state_data.is_list)}};let element_instance_compatible_messages=[],has_input_reset=element_raw.has_reset_fn&&element_raw.code.reset;has_input_reset&&element_instance_compatible_messages.push("reset_input"),element.get_messages=()=>element_instance_compatible_messages;let get_instance_object=original_instance=>{var _original_instance$_p;let res={};return use_jquery?(res.canvas=original_instance.get_canvas(),res.jQuery=$):res.canvas=original_instance.get_canvas()[0],res.publishState=function(state_name,val){let state_id=find_id_from_name(state_name,"states",element_raw);if(state_id){if(!element_raw.states[state_id].value){logger.owner_error("state does not have defined value",{display:"State "+state_name+" does not have a defined value",element_instance:original_instance});return}return run_with_error(original_instance,()=>{let parsed_contents=convert_from_js_to_bubble({thing:val,node:original_instance,value:element_raw.states[state_id].value,is_list:element_raw.states[state_id].is_list});return original_instance.state(state_id,parsed_contents)},"element")}else return logger.owner_error("state is not defined in the plugin",{display:"State "+state_name+" is not defined in the plugin",element_instance:original_instance})},res.triggerEvent=(event_name,cb)=>{let event=find_id_from_name(event_name,"events",element_raw);if(event){let promise=element_workflows.run_element_workflow(original_instance,plugin_name+"-"+event,void 0,void 0,void 0,!0);if(cb!=null)return promise==null?void 0:promise.callback(cb)}else return logger.owner_error("event is not defined in the plugin",{display:"Event "+event_name+" is not defined in the plugin",element_instance:original_instance})},pv.responsive_version===0&&(res.setHeight=function(height){if(typeof height!="number"||height<0||isNaN(height)){logger.owner_error("Trying to set a negative or non-number height",{display:"Trying to set a negative or non-number height: "+height,element_instance:original_instance});return}return original_instance.set_height(height)}),element_raw.add_is_visible||(res.show=function(){return original_instance.canvas[0].style.display="block",original_instance._is_visible_me=!0,original_instance._update_visible()},res.hide=function(){return original_instance.canvas[0].style.display="none",original_instance._is_visible_me=!1,original_instance._update_visible()}),(_original_instance$_p=original_instance._plugin_data)!=null||(original_instance._plugin_data={}),res.data=original_instance._plugin_data,element_raw.support_autobinding&&element_raw.autobinding_value&&(res.publishAutobinding=function(val){let parsed_value=convert_from_js_to_bubble({thing:val,node:original_instance,value:element_raw.autobinding_value,is_list:element_raw.autobinding_is_list});return inputs.run_auto_binding(original_instance,parsed_value,!0)}),element_raw.add_large_file_upload_properties&&(res.uploadFile=(file,callback,attach_to,callback_progress)=>(file&&add_to_upload_queue(plugin_name,{instance:original_instance,file,callback,attach_to,callback_progress}),null),res.canUploadFile=function(file){return file&&element_eval.evaluate_property(original_instance,"file_upload_condition")&&file.size<=element_eval.evaluate_property(original_instance,"max_size")*1e3*1e3||!1}),res},get_properties_object=(original_instance,param)=>{var _param;(_param=param)!=null||(param={});let{recursion_checker,no_sizing_props}=param;function _cached_function_getter(field_name){return _properties.bubble[field_name].exists||(_properties.bubble[field_name].exists=!0,_properties.bubble[field_name].cache=eval_prop(field_name)),_properties.bubble[field_name].cache}let bubble_proprty_getter=field_name=>no_sizing_props&&["width","height"].includes(field_name)?0:Lib().is_edit_mode()||!pv.bubble_props_as_functions?eval_prop(field_name):()=>_cached_function_getter(field_name),is_in_fixed=instance=>{var _instance$element$par;return((_instance$element$par=instance.element.parent())==null?void 0:_instance$element$par.container_layout())===responsive_layout.FIXED_LAYOUT},is_legacy=instance=>{var _instance$element$roo;return((_instance$element$roo=instance.element.root())==null?void 0:_instance$element$roo.get_responsive_version())===0},special_property_handling={min_width_css(instance){return is_legacy(instance)?"".concat(instance.element.get_min_width(),"px"):is_in_fixed(instance)?"".concat(instance.element.get_width(),"px"):element_props.min_width_css(instance)},max_width_css(instance){if(is_legacy(instance)){let max_width=instance.element.get_max_width();return max_width!=null?"".concat(max_width,"px"):null}return is_in_fixed(instance)?"".concat(instance.element.get_width(),"px"):element_props.max_width_css(instance)},fit_width(instance){return is_legacy(instance)?!1:element_props.is_fitting_width(instance)},min_height_css(instance){return is_legacy(instance)?"0px":is_in_fixed(instance)?"".concat(instance.element.get_height(),"px"):element_props.min_height_css(instance)},max_height_css(instance){return is_legacy(instance)?null:is_in_fixed(instance)?"".concat(instance.element.get_height(),"px"):element_props.max_height_css(instance)},fit_height(instance){return is_legacy(instance)?!0:element_props.is_fitting_height(instance)},font_face(instance){return element_props.get_font_face(instance)}},_eval_prop=id=>{var _special_property_han,_special_property_han2;return(_special_property_han=(_special_property_han2=special_property_handling[id])==null?void 0:_special_property_han2.call(special_property_handling,original_instance))!=null?_special_property_han:element_eval.evaluate_property(original_instance,id)};function eval_prop(id){if(!recursion_checker)return _eval_prop(id);if(recursion_checker[id])return logger.owner_error("Property contains circular reference to this element",{element_instance:original_instance,prop_name:id}),null;try{return recursion_checker[id]=!0,_eval_prop(id)}finally{delete recursion_checker[id]}}let _properties={bubble:{}};for(let field_id in element_raw.fields){let{name,editor,value,is_list}=element_raw.fields[field_id],raw=eval_prop(field_id);_properties[name]=get_property_public_value(raw,original_instance,editor,value,is_list)}if(element_raw.support_autobinding&&element_raw.autobinding_value){let autobinding_raw_val=inputs.get_input_autobind_thing_field(original_instance);_properties.autobinding=get_property_public_value(autobinding_raw_val,original_instance,void 0,element_raw.autobinding_value,element_raw.autobinding_is_list)}let object2=original_instance.element.field_names();for(let field_name in object2){var _element_raw$fields;let field_data=object2[field_name];if(((_element_raw$fields=element_raw.fields)==null?void 0:_element_raw$fields[field_name])==null&&!field_data.only_edit_mode){if(field_name==="font_family"&&(field_name="font_face"),field_name==="font_weight")continue;_properties.bubble[field_name]=bubble_proprty_getter(field_name)}}return _properties};element.can_defer_drawing=()=>!0,element.register=instance=>{if(instance.is_getting_property={},!instance.run_mode())return;instance.initialize_fn=create_run_mode_code(element_raw.code.initialize,"initialize ("+element_raw.display+")"),has_input_reset&&(instance.reset_fn=create_run_mode_code(element_raw.code.reset,"reset ("+element_raw.display+")"));let context=get_context_object({instance});for(let state_id in element_raw.states){let{caption,initialization_code}=element_raw.states[state_id];if((initialization_code==null?void 0:initialization_code.fn)!=null&&caption!=null){let initialize_state_fn=function(){let inner_fn=create_run_mode_code(initialization_code,"initializeState_"+caption+"("+element_raw.display+")"),props=get_properties_object(instance,{recursion_checker:instance.is_getting_property});return inner_fn==null?void 0:inner_fn(props,context)};instance.state(state_id,()=>run_with_error(instance,initialize_state_fn,"element"))}}},element.initialize=instance=>{let canvas=instance.get_canvas(),instance_object=get_instance_object(instance),context=get_context_object({instance});has_input_reset&&instance.on_message("reset_input",()=>run_with_error(instance,()=>instance.reset_fn(instance_object,context))),instance.wait_for_visible(()=>{var _instance$element$roo4;let new_in_legacy=pv.responsive_version>0&&((_instance$element$roo4=instance.element.root())==null?void 0:_instance$element$roo4.get_responsive_version())===0;new_in_legacy&&element_raw.can_fit_height&&canvas.css("height","max-content"),run_with_error(instance,()=>{var _instance$initialize_;(_instance$initialize_=instance.initialize_fn)==null||_instance$initialize_.call(instance,instance_object,context)},"element");let update_fn=create_run_mode_code(element_raw.code.update,"update ("+element_raw.display+")");instance.autorun(()=>{let properties=get_properties_object(instance);if(pv.bubble_props_as_functions)for(let key in properties.bubble)properties.bubble[key]();instance_object=get_instance_object(instance),context=get_context_object({instance}),b_async.run_without_catching_not_ready(()=>run_with_error(instance,()=>update_fn==null?void 0:update_fn(instance_object,properties,context),"element"))}),new_in_legacy&&element_raw.can_fit_height&&instance.autorun(()=>{let height=instance.current_height();instance.set_height(height,{no_css_update:!0}),instance.canvas.css("height","max-content")})})};for(let i of["events","actions"]){var _element_raw$i;element[i]=Object.keys((_element_raw$i=element_raw[i])!=null?_element_raw$i:{}).map(id=>"".concat(plugin_name,"-").concat(id))}for(let event_id in element_raw.events){let event_data=element_raw.events[event_id];events[event_id]={_display(){return" "+event_data.caption},element_name:"A "+element_raw.display}}for(let action_id in element_raw.actions){let element_action_raw=element_raw.actions[action_id],element_action_code;!Lib().is_edit_mode()&&!mode_check.on_server()&&(element_action_code=create_run_mode_code(element_action_raw.code,"element_action ("+element_raw.display+"-"+element_action_raw.caption+")")),actions[action_id]={category:"Element Actions",display(action){return display_for_action(action,element_action_raw.caption)},field_names:get_field_names(element_action_raw,!0),fields(action){return core_actions.get_element_id_field(action).concat(get_fields(action,element_action_raw,!0))},run(action,original_properties,bubble_context,cb){return autorun.run_once(30,()=>{let properties=get_action_properties_with_custom_keys(action,original_properties,element_action_raw.fields),instance=bubble_context.element.find_instance_by_id(original_properties.element_id);return{properties,instance}},(err,res)=>{if(err){cb(err);return}let{properties,instance}=res;instance.with_canvas(canvas=>{let instance_object=get_instance_object(instance),context=get_context_object({instance,action,bubble_context});return autorun.run_once(30,()=>b_async.run_without_catching_not_ready(()=>run_with_error(action,()=>{var _element_action_code;return(_element_action_code=element_action_code)==null?void 0:_element_action_code(instance_object,properties,context)},"action",_err=>cb(_err))),cb)})})}}}elements[element_id]=element}for(let action_id in this.raw.plugin_actions){var _action_raw$category;let action_raw=this.raw.plugin_actions[action_id],is_server=action_raw.type==="server_side",action_def={display(){return action_raw.display+"".concat(current_service.is_testing()?" (testing)":"")},category:(_action_raw$category=action_raw.category)!=null?_action_raw$category:"plugins",data_to_refresh:null,not_api:action_raw.type==="client_side"};if(action_def.field_names=get_field_names(action_raw,!0),action_def._fields=action=>get_fields(action,action_raw,!0),is_server){var _action_raw$code,_action_raw$code2,_action_raw$code4,_action_raw$code4$ser,_action_raw$code5,_action_raw$code5$pac,_this$raw$meta_data;let package_used=action_raw==null||(_action_raw$code=action_raw.code)==null?void 0:_action_raw$code.package_used;(action_raw==null||(_action_raw$code2=action_raw.code)==null?void 0:_action_raw$code2.package_status)==="empty"&&(package_used=!1);let package_hash;if(package_used){var _action_raw$code3;package_hash=action_raw==null||(_action_raw$code3=action_raw.code)==null?void 0:_action_raw$code3.package_hash}action_def.server_method="custom_plugin_code",action_def.code=action_raw==null||(_action_raw$code4=action_raw.code)==null||(_action_raw$code4$ser=_action_raw$code4.server)==null?void 0:_action_raw$code4$ser.fn,action_def.package=action_raw==null||(_action_raw$code5=action_raw.code)==null||(_action_raw$code5$pac=_action_raw$code5.package)==null?void 0:_action_raw$code5$pac.fn,action_def.package_used=package_used,action_def.package_hash=package_hash,action_def.node_version=(_this$raw$meta_data=this.raw.meta_data)==null?void 0:_this$raw$meta_data.sa_node_version,action_def.plugin_api_version=this.get_plugin_api_version(),action_def._transform_properties=(original_properties,action)=>get_action_properties_with_custom_keys(action,original_properties,action_raw.fields,is_server),action_def.return_value=function(action){if(b_object.not_empty(action_raw.return_value)){let struct_vals={};return decaf.object_entries(action_raw.return_value).map((_ref14,idx)=>{var _key_data$rank;let[key_id,key_data]=_ref14;return{key_id,key_data,rank:(_key_data$rank=key_data.rank)!=null?_key_data$rank:idx}}).sort((a,b)=>a.rank-b.rank).forEach(_ref15=>{let{key_data}=_ref15;struct_vals[key_data.name]=[key_data.caption,get_btype(action,key_data.value,key_data.is_list),!0]}),btypes.get("struct."+u.base64(JSON.stringify({definition:struct_vals,caption:action.display()})))}else return btypes.get("null")},action_def.run=(action,original_properties,bubble_context,cb)=>bubble_context.get_server_outcome(action,(err,res)=>{if(err&&(err.pluginservice_action=action_raw.display,err=errors.ensure_bubble_error(err).extend({action})),cb(err,res),plugin_version==="current"&&res){console.log("Result of "+action_raw.display);let value=action_def.return_value(action);autorun.run_once(30,()=>{var _value$get_JS_object;return{val:(_value$get_JS_object=value==null?void 0:value.get_JS_object(res))!=null?_value$get_JS_object:res}},(err2,res2)=>{if(err2){logger.log(err2);return}console.log(res2)})}})}else{let action_code;!Lib().is_edit_mode()&&!mode_check.on_server()&&(action_code=create_run_mode_code(action_raw.code.client,"action ("+action_raw.display+")")),action_def.run=function(action,original_properties,bubble_context,cb){let context=get_context_object({action,bubble_context});autorun.run_once(30,()=>b_async.run_without_catching_not_ready(()=>{let properties=get_action_properties_with_custom_keys(action,original_properties,action_raw.fields,is_server);run_with_error(action,()=>{var _action_code;return(_action_code=action_code)==null?void 0:_action_code(properties,context)},"action",_err=>cb(_err))}),cb)}}actions[action_id]=action_def}return{elements,events,actions}}},_applyDecoratedDescriptor(_class.prototype,"calls",[_dec],Object.getOwnPropertyDescriptor(_class.prototype,"calls"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"get_call_class",[_dec2],Object.getOwnPropertyDescriptor(_class.prototype,"get_call_class"),_class.prototype),_class);pluginservice.ThirdPartyPluginWrapper=ThirdPartyPluginWrapper}});var require_page_load_performance=__commonJS({"lib-browser-old/client/metrics/page_load_performance.js"(exports){"use strict";init_define_process_env();init_shim();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.page_load_performance_metrics=page_load_performance_metrics;require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_includes();require_es_string_includes();require_es_object_values();require_es_regexp_exec();require_es_string_replace();require_web_url_search_params();require_es_string_search();require_es_regexp_to_string();require_es_symbol_description();require_es_error_cause();var _appquery=_interopRequireDefault(require_appquery()),_lib=_interopRequireDefault(require_lib()),_pluginservice=_interopRequireDefault(require_pluginservice()),logger=_interopRequireWildcard(require_logger()),internal_navigation=_interopRequireWildcard(require_internal_navigation()),configuration=_interopRequireWildcard(require_client_config2()),_editor=require_editor(),_rendering_perf=require_rendering_perf();function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}function copyFullyLoaded(data,fullyLoadedEvent){return fullyLoadedEvent!==void 0&&(fullyLoadedEvent.page_data!=null&&(data.page_data=fullyLoadedEvent.page_data),fullyLoadedEvent.page_html!=null&&(data.page_html=fullyLoadedEvent.page_html),fullyLoadedEvent.page_render_start!=null&&(data.page_render_start=fullyLoadedEvent.page_render_start),fullyLoadedEvent.page_render!=null&&(data.page_render=fullyLoadedEvent.page_render),fullyLoadedEvent.page_full!=null&&(data.page_full=fullyLoadedEvent.page_full),fullyLoadedEvent.packager_size!=null&&typeof fullyLoadedEvent.packager_size=="number"&&(data.packager_size=fullyLoadedEvent.packager_size),fullyLoadedEvent.run_js_size!=null&&(data.run_js_size=fullyLoadedEvent.run_js_size)),data}var FIRST_PARTY_ASSETS=function(FIRST_PARTY_ASSETS2){return FIRST_PARTY_ASSETS2[FIRST_PARTY_ASSETS2.dynamic_js=0]="dynamic_js",FIRST_PARTY_ASSETS2[FIRST_PARTY_ASSETS2.early_js=1]="early_js",FIRST_PARTY_ASSETS2[FIRST_PARTY_ASSETS2.edit_js=2]="edit_js",FIRST_PARTY_ASSETS2[FIRST_PARTY_ASSETS2.run_debug_js=3]="run_debug_js",FIRST_PARTY_ASSETS2[FIRST_PARTY_ASSETS2.run_js=4]="run_js",FIRST_PARTY_ASSETS2[FIRST_PARTY_ASSETS2.static_js=5]="static_js",FIRST_PARTY_ASSETS2[FIRST_PARTY_ASSETS2.run_css=6]="run_css",FIRST_PARTY_ASSETS2}(FIRST_PARTY_ASSETS||{});function page_load_performance_metrics(fullyLoadedEvent,page_id){if(!configuration.page_speed_metrics_on)return;let{dns_time,redirect_time,tcp_time}=calculateNavigationTiming(),{third_party_plugin_count,third_party_plugin_js_execution_time_ms,third_party_plugin_code_string_length,hardcoded_plugin_count,hardcoded_plugins}=get_plugin_information(),timestamp=Date.now(),url=window.location.href,appname=_appquery.default.appname(),app_version=_appquery.default.app_version(),bundle_type=window.bubble_bundle_name,browser=getBrowserData(),user_agent;browser!=null&&browser.brands||(user_agent=window.navigator.userAgent);let{bubble_version,experimental_features,responsive_version,old_responsive_elements}=get_settings(page_id),tokenData={};(bundle_type==="run"||bundle_type==="run_debug")&&(tokenData.token=window.bubble_plp_token);let data=copyFullyLoaded(_objectSpread(_objectSpread({},tokenData),{},{timestamp,url,appname,app_version,bundle_type,internal_nav_explanation:internal_nav_explanation(),asset_info:get_asset_metrics(),dns_time,redirect_time,tcp_time,browser,user_agent,bubble_version,experimental_features,responsive_version,old_responsive_elements,third_party_plugin_count,third_party_plugin_js_execution_time_ms,third_party_plugin_code_string_length,hardcoded_plugin_count,hardcoded_plugins,json_info:window._bubble_page_load_data.json_info,element_counts:window._bubble_page_load_data.element_counts,element_instances_count:_rendering_perf.element_counts.element_instances.total}),fullyLoadedEvent);_lib.default.or_throw().location.post("server://user/m",data,err=>{err&&logger.log(err)})}function calculateNavigationTiming(){let dns_time,redirect_time,tcp_time;for(let entry of window.performance.getEntries()){let resourceTimingEntry=entry;if(!Number.isNaN(resourceTimingEntry.domainLookupEnd-resourceTimingEntry.domainLookupStart)){var _dns_time;(_dns_time=dns_time)!=null||(dns_time=0),dns_time+=resourceTimingEntry.domainLookupEnd-resourceTimingEntry.domainLookupStart}if(!Number.isNaN(resourceTimingEntry.redirectEnd-resourceTimingEntry.redirectStart)){var _redirect_time;(_redirect_time=redirect_time)!=null||(redirect_time=0),redirect_time+=resourceTimingEntry.redirectEnd-resourceTimingEntry.redirectStart}if(!Number.isNaN(resourceTimingEntry.connectEnd-resourceTimingEntry.connectStart)){var _tcp_time;(_tcp_time=tcp_time)!=null||(tcp_time=0),tcp_time+=resourceTimingEntry.connectEnd-resourceTimingEntry.connectStart}}return{dns_time,redirect_time,tcp_time}}function classify_resource(resource){let first_party=!1,file_type=resource.name.substring(resource.name.lastIndexOf(".")+1).toLowerCase();return resource.name.includes("package")&&(first_party=!0),{first_party,file_type}}function first_party_event(resource,temp_obj,fileName){if(Object.values(FIRST_PARTY_ASSETS).includes(fileName))temp_obj["".concat(fileName,"_uncompressed_size_bytes")]=resource.decodedBodySize,temp_obj["".concat(fileName,"_compressed_size_bytes")]=resource.encodedBodySize,resource.duration>=0&&(temp_obj["".concat(fileName,"_download_time_ms")]=resource.duration);else{var _temp_obj$other_asset;(_temp_obj$other_asset=temp_obj.other_assets_count)!=null||(temp_obj.other_assets_count=0),temp_obj.other_assets_count+=1}return temp_obj}function blocking_event(temp_obj,fileName){let js_timings=window._bubble_page_load_data.js_execution_timings;return temp_obj["".concat(fileName,"_start_execution_ms")]=js_timings["".concat(fileName,"_start_execution")],Number.isNaN(js_timings["".concat(fileName,"_end_execution")]-js_timings["".concat(fileName,"_start_execution")])||(temp_obj["".concat(fileName,"_execution_time_ms")]=js_timings["".concat(fileName,"_end_execution")]-js_timings["".concat(fileName,"_start_execution")]),temp_obj["pre_".concat(fileName,"_ms")]=js_timings["pre_".concat(fileName)],temp_obj["post_".concat(fileName,"_ms")]=js_timings["post_".concat(fileName)],temp_obj}function third_party_event(resource,temp_obj){if(temp_obj.third_party_assets_count+=1,resource.decodedBodySize){var _temp_obj$third_party;(_temp_obj$third_party=temp_obj.third_party_assets_uncompressed_size_bytes)!=null||(temp_obj.third_party_assets_uncompressed_size_bytes=0),temp_obj.third_party_assets_uncompressed_size_bytes+=resource.decodedBodySize}if(resource.encodedBodySize){var _temp_obj$third_party2;(_temp_obj$third_party2=temp_obj.third_party_assets_compressed_size_bytes)!=null||(temp_obj.third_party_assets_compressed_size_bytes=0),temp_obj.third_party_assets_compressed_size_bytes+=resource.encodedBodySize}return temp_obj}function get_asset_metrics(){let resources=window.performance.getEntriesByType("resource"),temp_obj={};for(let resource of resources){var _temp_obj$third_party3;let name=resource.name,perf_resource=resource;(_temp_obj$third_party3=temp_obj.third_party_assets_count)!=null||(temp_obj.third_party_assets_count=0);let classification=classify_resource(perf_resource);if(classification.first_party){let fileName=name.substring(name.lastIndexOf("/")+1,name.length).replace(".","_");first_party_event(perf_resource,temp_obj,fileName),classification.file_type==="js"&&blocking_event(temp_obj,fileName)}else third_party_event(perf_resource,temp_obj)}return temp_obj}function internal_nav_explanation(){let searchParams=new URLSearchParams(window.location.search),referrer_hostname=window.document.referrer.split("/")[2];if(!window.document.referrer||referrer_hostname!==window.location.hostname)return"NOT_INTERNAL_NAV";if(searchParams.get(internal_navigation.EXPERIMENT_PARAM)==="false"){searchParams.delete(internal_navigation.EXPERIMENT_PARAM);let url=_lib.default.or_throw().location.get_page();return url&&window.history.replaceState(null,"","".concat(url,"?").concat(searchParams.toString())),"RAN_PERFORMANCE_EXPERIMENT"}else{if(_lib.default.or_throw().location.get_pieces().use_site_path)return"UNKNOWN";if(referrer_hostname===window.location.hostname)return"SAME_APP"}}function getBrowserData(){let userAgentData=window.navigator.userAgentData;return userAgentData?{brands:"[".concat(userAgentData.brands.map(brand=>"".concat(brand.brand," ").concat(brand.version)).join(", "),"]"),platform:userAgentData.platform,mobile:userAgentData.mobile,language:window.navigator.language}:{language:window.navigator.language}}function get_settings(page_id){let responsive_version,old_responsive_elements,experimental_features={};for(let experiment in _editor.PUBLIC_ACTIVE_EXPERIMENTS)_appquery.default.has_feature_enabled(experiment)&&(experimental_features[experiment]=!0);if(page_id){let page=_appquery.default.get_page_by_name(page_id);responsive_version=page==null?void 0:page.get_responsive_version();let reusable_elements=_appquery.default.custom_definitions();for(let element of reusable_elements)element.get_responsive_version()===0&&(old_responsive_elements=!0)}return{bubble_version:window.bubble_version,experimental_features,responsive_version,old_responsive_elements}}function get_plugin_information(){let third_party_plugin_count,third_party_plugin_code_string_length;if(window.plugins!=null){third_party_plugin_count=Object.keys(window.plugins).length;for(let plugin in window._bubble_page_load_data.plugins_size){var _third_party_plugin_c;(_third_party_plugin_c=third_party_plugin_code_string_length)!=null||(third_party_plugin_code_string_length=0),third_party_plugin_code_string_length+=window._bubble_page_load_data.plugins_size[plugin]}}let third_party_plugin_js_execution_time_ms,code_timing,plugin_timings=_pluginservice.default.get_plugin_execution_time();for(let plugin in plugin_timings){var _code_timing;(_code_timing=code_timing)!=null||(code_timing=0),code_timing+=plugin_timings[plugin]}let js_timings=window._bubble_page_load_data.js_execution_timings;js_timings.plugin_js_end_execution&&js_timings.plugin_js_start_execution&&(third_party_plugin_js_execution_time_ms=js_timings.plugin_js_end_execution-js_timings.plugin_js_start_execution),code_timing&&third_party_plugin_js_execution_time_ms?third_party_plugin_js_execution_time_ms+=code_timing:code_timing&&(third_party_plugin_js_execution_time_ms=code_timing);let hardcoded_plugins,hardcoded_plugin_count;return window._bubble_page_load_data.hardcoded_plugins!=null&&(hardcoded_plugins=window._bubble_page_load_data.hardcoded_plugins,hardcoded_plugin_count=Object.keys(hardcoded_plugins).length),{third_party_plugin_count,third_party_plugin_js_execution_time_ms,third_party_plugin_code_string_length,hardcoded_plugin_count,hardcoded_plugins}}}});var require_box=__commonJS({"lib-browser-old/box.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_parse_float();var u=require_u2(),safe_require=require_safe_require(),box=exports;safe_require.safe_register("./box",box);box.left=(div,val)=>get_set(div,"left",val);box.top=(div,val)=>get_set(div,"top",val);box.offset_left=div=>div.offset().left;box.offset_top=div=>div.offset().top;box.right=div=>box.left(div)+box.width(div);box.bottom=div=>box.top(div)+box.height(div);box.width=(div,val)=>get_set(div,"width",val);box.height=(div,val)=>get_set(div,"height",val);box.inner_left=div=>box.left(div)+get_set(div,"border-left-width");box.inner_top=div=>box.top(div)+get_set(div,"border-top-width");box.inner_right=div=>box.right(div)-get_set(div,"border-right-width");box.inner_bottom=div=>box.bottom(div)-get_set(div,"border-bottom-width");box.inner_width=div=>box.inner_right(div)-box.inner_left(div);box.inner_height=div=>box.inner_bottom(div)-box.inner_top(div);box.offset_bottom=div=>box.offset_top(div)+box.height(div);box.offset_right=div=>box.offset_left(div)+box.width(div);box.min_width=div=>get_set(div,"border-left-width")+get_set(div,"border-right-width")+get_set(div,"padding-left")+get_set(div,"padding-right");box.min_height=div=>get_set(div,"border-top-width")+get_set(div,"border-bottom-width")+get_set(div,"padding-top")+get_set(div,"padding-bottom");box.get=(div,dim)=>exports[dim](div);box.set=(div,dim,val)=>exports[dim](div,val);box.get_dim=function(props){let res=properties_dim[create_key(props)];if(!res)throw new u.UnexpectedError("unrecognized: "+create_key(props));return res};box.dim_props=dim=>dim_properties[dim];box.transform_dim=function(dim,props){let new_props=u.extend({},dim_properties[dim],props);return box.get_dim(new_props)};var all_dims=["width","left","right","inner_left","inner_right","inner_width","height","top","bottom","inner_top","inner_bottom","inner_height"],dim_properties={},properties_dim={};function create_key(props){return props.axis+props.type+props.edge+props.rank}function set_prop(dim,prop,value){dim_properties[dim]||(dim_properties[dim]={}),dim_properties[dim][prop]=value}function contains(name,keys){for(let key of keys)if(name.indexOf(key)!==-1)return!0;return!1}for(let dim of all_dims)contains(dim,["width","left","right"])?set_prop(dim,"axis","x"):set_prop(dim,"axis","y"),contains(dim,["inner"])?set_prop(dim,"edge","inner"):set_prop(dim,"edge","outer"),contains(dim,["width","height"])?set_prop(dim,"rank","span"):contains(dim,["left","top"])?set_prop(dim,"rank","near"):set_prop(dim,"rank","far"),properties_dim[create_key(dim_properties[dim])]=dim;function get_set(div,prop,val){return val==null?(val=Math.round(parseFloat(div.css(prop))),isNaN(val)?0:val):div.css(prop,val+"px")}}});var require_initializer=__commonJS({"lib-browser-old/shared/initializer.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_error_cause();var initializer=exports;initializer.initialize_globals=function(){if(typeof window>"u")return;let to_define=["window","document","navigator"];for(let name of to_define){var _global2,_global$name;(_global$name=(_global2=window)[name])!=null||(_global2[name]=void 0)}};initializer.initialize=function(){Error.stackTraceLimit=1e3,initializer.initialize_globals()}}});var require_logging_medium=__commonJS({"lib-browser-old/client/logging_medium.js"(exports){"use strict";init_define_process_env();init_shim();require_es_regexp_exec();require_es_regexp_test();var Lib=require_lib(),async_state=require_async_state3(),b_object=require_b_object(),configuration=require_client_config2(),errors=require_errors(),mode_check=require_mode_check(),logging_utilities=require_logging2(),test_state=require_test_state(),uuid=require_uuid(),appquery=require_appquery(),logging_medium=exports,page_load_time=Date.now(),MAPPING={debug:"debug",verbose:"debug",info:"info",warn:"warn",error:"error",fatal:"error"},USER_TO_OWNER={user_error:"info",owner_warn:"warn",owner_error:"error"},messages_count={},total_messages=0,session_count=0,debugger_unexpected=!1,rate_limited=!1;function rl_message(){rate_limited||(rate_limited=!0,console.warn("Note: we are hiding further messages to avoid excess logging"))}logging_medium.fiber_wrapper=fn=>fn;logging_medium.log=function(level,message,data){var _messages_count$messa,_data$tags,_data,_data$code,_Lib$location,_Lib$location$my_loca;if((_messages_count$messa=messages_count[message])!=null||(messages_count[message]=0),messages_count[message]>=5){rl_message();return}if(total_messages>=20){rl_message();return}messages_count[message]++,total_messages++;let user_level=USER_TO_OWNER[(_data$tags=data.tags)==null?void 0:_data$tags.user_level];if((_data$code=(_data=data).code)!=null||(_data.code=uuid.UUID()),user_level||logging_utilities.level_gte(level,configuration.browser_console_log_level)){var _console$MAPPING$cons,_console$MAPPING$cons2,_navigator;let console_level=user_level!=null?user_level:level,log_fn=(_console$MAPPING$cons=(_console$MAPPING$cons2=console[MAPPING[console_level]])==null?void 0:_console$MAPPING$cons2.bind(console))!=null?_console$MAPPING$cons:console.log.bind(console),to_log;if(user_level){var _data$display;data.element_instance!=null?to_log="Element ".concat(data.element_instance.element.get_name()," - "):data.event?to_log="Event ".concat(data.event.display()," - "):data.action?to_log="Action ".concat(data.action.display()," - "):to_log="",data.prop_name&&(to_log+=data.prop_name+" "),to_log+=(_data$display=data.display)!=null?_data$display:message}else message!=null?(to_log=message,typeof data.stack=="string"&&(to_log=[to_log].concat(data.stack.split("\n").slice(1)).join("\n")+"\n")):to_log=data.stack;let data_to_log=b_object.extend({},data);delete data_to_log.stack,delete data_to_log.tags,delete data_to_log.display,/Bubble Tests/.test((_navigator=navigator)==null?void 0:_navigator.userAgent)&&(data_to_log.bubble_level=level),to_log[-1]!=="\n"&&(to_log+="\n"),log_fn(to_log,data_to_log)}if(logging_utilities.level_gte(level,"warn")&&test_state.all_page_errors.push({message,stack:data.stack,data,level}),Lib().workflow.debugger&&logging_utilities.level_gte(user_level,"warn")){var _data$action,_Lib$workflow$debugge;let debugger_message,type;if(user_level){var _data$display2;debugger_message=(_data$display2=data.display)!=null?_data$display2:message}else{if(debugger_unexpected)return;debugger_unexpected=!0,debugger_message="Sorry, we have encountered an unexpected error. Please <a href='https://bubble.io/support/report?app=".concat(appquery.appname(),"&fiber=").concat(data.code,'\' class="click-for-bug-report" target="_blank">click here to file a bug report</a>, including error code ').concat(data.code," and a step-by-step explanation of how to reproduce this issue.")}data.event?type="workflow":data.action?type="action":data.element_instance?type="element":logging_utilities.level_gte(user_level!=null?user_level:level,"error")?type="general":type="warning";let instance=(_data$action=data.action)!=null?_data$action:data.element_instance,{event}=data,{prop_name}=data,error={message:debugger_message};(_Lib$workflow$debugge=Lib().workflow.debugger)==null||_Lib$workflow$debugge.report_error({type,instance,event,prop_name,error})}if(data.server_generated||!logging_utilities.level_gte(level,"info"))return;data=errors.clean_args({args:data});let body={level,message,data,server_connection_problems:async_state.server_connection_problems,session_count,js_user_agent:window.navigator.userAgent,page_load_time,client_commit_sha:configuration.commit_sha,client_commit_timestamp:configuration.commit_timestamp,client_page_url:(_Lib$location=Lib().location)==null||(_Lib$location$my_loca=_Lib$location.my_location)==null?void 0:_Lib$location$my_loca.call(_Lib$location),mode:mode_check.is_edit_mode()?"edit":mode_check.is_plugin_edit_mode()?"plugin":"run"};logging_utilities.level_gte(level,"error")&&session_count++;function cb(err){err&&console.error(err)}Lib().location.request("server://bug/client_log","POST",body,cb,null,data.code)}}});var require_scheduledTasks=__commonJS({"lib-browser-old/client/scheduledTasks.js"(exports){"use strict";init_define_process_env();init_shim();var Lib=require_lib(),time_consts=require_time(),clientApm=require_clientApm(),scheduledTasks=exports,APM_FLUSH_INTERVAL=time_consts.SECOND_MS*2;scheduledTasks.start=function(){flushApmData()};function flushApmData(){let completedTransactions=clientApm.getCompletedTransactions();completedTransactions.length&&(Lib().location.post("server://user/apm",{completedTransactions,apm:!0}),clientApm.clearCompletedTransactions()),setTimeout(flushApmData,APM_FLUSH_INTERVAL)}}});var require_tab=__commonJS({"lib-browser-old/client/tab.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_includes();require_es_string_includes();require_es_array_sort();var j=1;exports.tab_container=instance=>{instance.wait_for_visible_lite(()=>{let focusable_children=[];for(let child of instance.children)(child.element.get_messages().includes("set_focus")||child.element.get_related_workflows("ButtonClicked").length)&&focusable_children.push(child);let children_on_page_to_process=focusable_children.filter(e=>!e.state("tab_index"));children_on_page_to_process.sort((a,b)=>a.element.get_top()-b.element.get_top());function in_line(line,child){return Math.max(...line.map(e=>e.element.get_top()+e.element.get_height()))>=child.element.get_top()}let all_lines=[],current_line=[];for(let child of children_on_page_to_process)current_line.length===0||in_line(current_line,child)?current_line.push(child):(all_lines.push(current_line),current_line=[child]);all_lines.push(current_line);for(let line of all_lines){line.sort((a,b)=>a.element.get_left()-b.element.get_left());for(let child of line)child.message("add_tab_index",j),j++}})}}});var require_containers2=__commonJS({"lib-browser-old/client/responsive_v0/containers.js"(exports){"use strict";init_define_process_env();init_shim();require_es_object_values();require_es_array_iterator();require_web_dom_collections_iterator();require_es_parse_int();var u=require_u2(),appquery=require_appquery(),events=require_events(),tab=require_tab(),lang=require_lang2(),Lib=require_lib(),responsive_v0_containers=exports,ResponsiveV1Container=null,OldContainer=class _OldContainer{constructor(owner_instance,container_canvas){var _this$info;if(this.owner_instance=owner_instance,this.container_canvas=container_canvas,this.container_canvas.css("box-sizing","border-box"),this.owner_instance){let{element}=this.owner_instance;this.info=u.json_deep_copy(element.get_responsive_data())}(_this$info=this.info)!=null||(this.info={}),this.is_initialized=u.MakeKey(null,"container initialized")}destroy(){var _this$owner_instance;(_this$owner_instance=this.owner_instance)==null||_this$owner_instance.destroy(),this.owner_instance=null}resize_width(){}add_to_instances(){}ready_key(){return this.is_initialized}get_canvas(){return this.container_canvas}get_owner(){return this.owner_instance}render(html){let canvas=$(html);return canvas.addClass("bubble-element"),canvas}recalculate(id){var _info$pushed_by;let info=this.info[id];(_info$pushed_by=info.pushed_by)!=null||(info.pushed_by=[]);let deltas=Object.values(info.pushed_by).map(pusher=>this.info[pusher].height_delta+this.info[pusher].top_delta),new_top_delta=Math.max(...deltas);new_top_delta!==info.top_delta&&(info.top_delta=new_top_delta,info.instance.canvas.css("top",info.top_delta+info.it),this.calculate_children(id),this.recalculate_stripe(id))}calculate_children(id){var _info$pushes;let info=this.info[id];if((_info$pushes=info.pushes)!=null||(info.pushes=[]),u.is_empty(info.pushes))this.recalculate_container(id);else for(let idx in info.pushes){let child=info.pushes[idx];this.recalculate(child)}}recalculate_container(id){let max_delta;for(let idx in this.info.container_bottoms){let element_id=this.info.container_bottoms[idx],info=this.info[element_id];max_delta==null?max_delta=info.height_delta+info.top_delta:max_delta=Math.max(max_delta,info.height_delta+info.top_delta)}this.owner_instance.supports_message("child_movement")&&this.owner_instance.message("child_movement",max_delta)}recalculate_stripe(id){if(!this.owner_instance.supports_message("movement_in_stripe")||this.info[id].pushes_stripe==null)return;let current_stripe=this.info[id].pushes_stripe,max_delta;for(let element_id in this.info){let info=this.info[element_id];info.pushes_stripe===current_stripe&&(max_delta==null?max_delta=info.height_delta+info.top_delta:max_delta=Math.max(max_delta,info.height_delta+info.top_delta))}this.owner_instance.message("movement_in_stripe",current_stripe,max_delta)}set_height(instance,height,options){var _options;(_options=options)!=null||(options={}),u.WaitFor(this.is_initialized,()=>{let id=instance.element_id();if(this.info[id].current_height===height)return;this.info[id].current_height=height,options.no_css_update||instance.canvas.css("height",height);let delta=height-this.info[id].ih;delta!==this.info[id].height_delta&&(this.info[id].height_delta=delta,this.calculate_children(id),this.recalculate_stripe(id))})}add(instance,force){let{element}=instance,id=element.id(),info=this.info[id];if(info==null){force&&instance.wait_for_visible_lite(()=>{let{style:style2}=instance.canvas[0];style2.boxSizing="border-box",style2.position="absolute",style2.zIndex=instance.element.get_zindex(),style2.left=instance.element.get_left()+"px",style2.top=instance.element.get_top()+"px",style2.width=instance.element.get_width()+"px",style2.height=instance.element.get_height()+"px"});return}u.extend(info,{current_height:info.ih,top_delta:0,height_delta:0,instance}),instance.wait_for_visible_lite(()=>{let{style:style2}=instance.canvas[0];return style2.boxSizing="border-box",style2.position="absolute",style2.zIndex=info.iz,style2.left=info.il+"px",style2.top=info.it+info.top_delta+"px",style2.width=info.iw+"px",style2.height=info.current_height+"px",instance.notify_width(info.iw)}),this.container_canvas.append(instance.canvas)}create_child(owner_instance,container_canvas){let{custom_definition}=owner_instance.element.E;if(custom_definition){let c;return custom_definition().get_responsive_version()>0?new ResponsiveV1Container(owner_instance,container_canvas):(custom_definition().use_responsive_algorithm()?c=new Container(owner_instance,container_canvas,owner_instance.element.get_responsive_data()):c=new _OldContainer(owner_instance,container_canvas),c.resize_width(u.real_inner_width(container_canvas)),c)}else return new _OldContainer(owner_instance,container_canvas)}initialize(){tab.tab_container(this.owner_instance),this.is_initialized.turn()}detach(instance){instance.canvas.detach()}},Container=class _Container extends events.EventEmitter{constructor(owner_instance,container_canvas,responsive_data,owner){var _this$elements,_this$boxes,_this$lines,_this$lines_length,_this$lines2;super(),this.owner_instance=owner_instance,this.container_canvas=container_canvas,this.owner=owner,this.container_canvas[0].style["box-sizing"]="border-box",this.owner_instance&&({elements:this.elements,boxes:this.boxes,lines:this.lines,lines_length:this.lines_length}=u.json_deep_copy(responsive_data!=null?responsive_data:{})),(_this$elements=this.elements)!=null||(this.elements={}),(_this$boxes=this.boxes)!=null||(this.boxes={}),(_this$lines=this.lines)!=null||(this.lines={}),(_this$lines_length=this.lines_length)!=null||(this.lines_length=0),this.instances={},this.instances_keys={},(_this$lines2=this.lines)!=null||(this.lines={}),this.child_containers=[],this.flow_created=u.MakeKey(null,"flow created")}destroy(){var _this$owner_instance2,_this$instances;this.destroyed=!0,(_this$owner_instance2=this.owner_instance)==null||_this$owner_instance2.destroy(),this.owner_instance=null;let object2=(_this$instances=this.instances)!=null?_this$instances:{};for(let k in object2)object2[k].destroy();this.instances=null;for(let container of this.child_containers)container.destroy();this.elements=this.boxes=this.lines=this.lines_length=this.instance_keys=this.flow_created=null}ready_key(){return this.flow_created}get_canvas(){return this.container_canvas}get_owner(){return this.owner_instance}render(html){let canvas=$(html);return canvas.addClass("bubble-element"),canvas}_show_line(idx){var _this$_lines,_this$_lines2,_this$_lines2$idx,_this$_num_lines;return(_this$_lines=this._lines)!=null||(this._lines={}),(_this$_lines2$idx=(_this$_lines2=this._lines)[idx])!=null||(_this$_lines2[idx]=u.div("bubble-r-line",this.container_canvas)),this._lines[idx].show(),this._num_lines=Math.max((_this$_num_lines=this._num_lines)!=null?_this$_num_lines:0,parseInt(idx)+1),this._lines[idx]}_hide_lines(idx){this.last_display_line=idx-1;for(let i=idx;i<this._num_lines;i++)this._lines[i].hide()}_get_box(box_id){var _this$_boxes;return(_this$_boxes=this._boxes)!=null||(this._boxes={}),this._boxes[box_id]||(this._boxes[box_id]=u.div("bubble-r-box"),this.recalculate_box_height(box_id),this._boxes[box_id][0].box_debugging_metadata=this.boxes[box_id]),this._boxes[box_id]}recalculate_box_height(box_id){let box=this.boxes[box_id],max_delta=null;for(let idx in box.bottoms){var _data$top_delta;let element_id=box.bottoms[idx],data=this.elements[element_id],element_delta=this._get_height_delta(element_id)+((_data$top_delta=data.top_delta)!=null?_data$top_delta:0);max_delta==null?max_delta=element_delta:max_delta=Math.max(max_delta,element_delta)}let new_height=max_delta+(box.ih-box.line_gap);if(new_height!==box.height){var _this$box_to_display_;box.height=new_height,this._get_box(box_id)[0].style.height=Math.max(new_height,0)+"px";let display_line=(_this$box_to_display_=this.box_to_display_line)==null?void 0:_this$box_to_display_[box_id];display_line&&this.update_display_line_height(display_line)}}update_display_line_height(display_line){var _this$_lines$display_;let line_element=(_this$_lines$display_=this._lines[display_line.idx])==null?void 0:_this$_lines$display_[0];line_element&&(line_element.style.height=Math.max(this.get_display_line_height(display_line),0)+"px")}_update_instance(id,fn){if(this.instances[id])this.instances[id].wait_for_visible_lite(fn);else{var _this$instances_keys,_this$instances_keys$;(_this$instances_keys$=(_this$instances_keys=this.instances_keys)[id])!=null||(_this$instances_keys[id]=u.MakeKey(null,"waiting for instance for "+id)),u.WaitFor(this.instances_keys[id],this._update_instance.bind(this,id,fn))}}_wait_for_instance_added(id,fn){if(this.instances[id])fn();else{var _this$instances_keys2,_this$instances_keys3;(_this$instances_keys3=(_this$instances_keys2=this.instances_keys)[id])!=null||(_this$instances_keys2[id]=u.MakeKey(null,"waiting for instance for "+id)),u.WaitFor(this.instances_keys[id],this._wait_for_instance_added.bind(this,id,fn))}}_set_element_width(id,width,left){let data=this.elements[id];data.width=width,data.left=left,this._update_instance(id,()=>{this.to_canvas(this.instances[id])[0].style.width=data.width+"px",this.to_canvas(this.instances[id])[0].style.left=data.left+"px",this.instances[id].notify_width(data.width)})}get_display_line_top(display_line){let top=0;for(let i=0;i<display_line.idx;i++){let dline=this.display_lines[i];top+=dline.top_margin,top+=this.get_display_line_height(dline)}return top+display_line.top_margin}get_display_line_height(display_line){return Math.max(...display_line.boxes.map(box=>box.height))}get_hidden_elements(){var _this$_visibility_rul;return[].concat((_this$_visibility_rul=this._visibility_rules)!=null?_this$_visibility_rul:[]).concat(...this.child_containers.map(c=>c.get_hidden_elements()))}get_all_instances(){let res=Object.values(this.instances);for(let child_container of this.child_containers)res.push(...child_container.get_all_instances());return res}get_element_box(element_id,need_instance){let container=this.search_for_element(element_id);if(!container)return null;if(need_instance)return container.instances[element_id];{let box_id=container.elements[element_id].box;return container.boxes[box_id]}}search_for_element(element_id){if(this.destroyed)return null;if(!this.elements[element_id]){for(let child_container of this.child_containers){let res=child_container.search_for_element(element_id);if(res!=null)return res}return null}return this}get_margin_info(element_id){var _container$owner_inst;let container=this.search_for_element(element_id);if(!container||container.elements[element_id].box==null)return null;if(((_container$owner_inst=container.owner_instance)==null?void 0:_container$owner_inst.element.type())==="RepeatingGroup"){var _container$child_cont;return(_container$child_cont=container.child_containers)==null?void 0:_container$child_cont[0].get_margin_info(element_id)}else return container.margin_debugging[container.elements[element_id].box]}resize_width(container_width){var _this$display_lines;if(this.container_width===container_width||this.destroyed)return;this.container_width=container_width,this._visibility_rules=[],this.margin_debugging={};let get_left_margin=(box,box_idx)=>{if(box_idx===0){let original_line=this.lines[box.line_idx],original_box=this.boxes[original_line.boxes[0]];return this.margin_debugging[box.box_id].left.from_element=original_box.leftmost,this.margin_debugging[box.box_id].left.from_dir="left",this.margin_debugging[box.box_id].left.original=original_box.left_margin,original_box.left_margin}else return this.margin_debugging[box.box_id].left.from_element=box.leftmost,this.margin_debugging[box.box_id].left.from_dir="left",this.margin_debugging[box.box_id].left.original=box.left_margin,box.left_margin},get_right_margin=box=>{let original_line=this.lines[box.line_idx],original_box=this.boxes[original_line.boxes[original_line.boxes_length-1]];return this.margin_debugging[box.box_id].right.from_element=original_box.rightmost,this.margin_debugging[box.box_id].right.from_dir="right",this.margin_debugging[box.box_id].right.original=original_box.right_margin,original_box.right_margin},should_show_element=data=>Lib().bubble_version()>=2&&this.owner_instance.get_static_property("fixed_width")?!0:data.rs==="<="&&container_width<=data.rsw?!1:!(data.rs===">"&&container_width>data.rsw);this.box_to_display_line={},this.display_lines=[];let min_width,d_line=null;for(let i=0;i<this.lines_length;i++){let line=this.lines[i];this.elements[this.boxes[line.boxes[0]].first].wtp||(d_line=null);for(let idx=0;idx<line.boxes_length;idx++){var _d_line$boxes$length,_d_line;let box_id=line.boxes[idx],box=this.boxes[box_id],box_min_width=0,max_width=-1/0,found_visible=!1;for(let idx2 in box.contains){let id=box.contains[idx2];if(should_show_element(this.elements[id])){found_visible=!0,box_min_width=Math.max(box_min_width,this.elements[id].mw);let{maxw}=this.elements[id];maxw!=null?(maxw=maxw/this.elements[id].iw*box.iw,max_width=Math.max(max_width,maxw)):max_width=1/0}}if(!found_visible){this._get_box(box.box_id).hide(),this._visibility_rules.push(...Object.values(box.contains));continue}isFinite(max_width)&&(box.max_width=max_width),box.min_width=Math.min(container_width,box_min_width);let new_idx=(_d_line$boxes$length=(_d_line=d_line)==null?void 0:_d_line.boxes.length)!=null?_d_line$boxes$length:0,requires=box.min_width;this.margin_debugging[box_id]={right:{},left:{}},box.align!=="right"||new_idx!==0&&d_line.boxes[new_idx-1].align!=="left"?(requires+=get_left_margin(box,new_idx),this.margin_debugging[box_id].left.break_first=!0):this.margin_debugging[box_id].left.break_first=!1,box.align!=="left"?(requires+=get_right_margin(box),this.margin_debugging[box_id].right.break_first=!0):this.margin_debugging[box_id].right.break_first=!1,d_line==null?(d_line={boxes:[box],top_margin:line.top_margin,idx:this.display_lines.length,topmost:line.topmost},this.display_lines.push(d_line),min_width=0):min_width+requires<=container_width?d_line.boxes.push(box):(d_line={boxes:[box],top_margin:line.top_margin,idx:this.display_lines.length,topmost:line.topmost},this.display_lines.push(d_line),min_width=0,new_idx=0),min_width+=box.min_width+get_left_margin(box,new_idx),this.box_to_display_line[box_id]=d_line}}let iterable=(_this$display_lines=this.display_lines)!=null?_this$display_lines:[],line_idx,collapse_margin_mode;for(line_idx=0;line_idx<iterable.length;line_idx++){var _line$boxes;let line=iterable[line_idx],preferred_width=0,fat=0,max_fat=0,margin=0,adjustable_margins=0;(_line$boxes=line.boxes)!=null||(line.boxes=[]);let is_left_margin_adjustable=(box,idx)=>{if(box.align==="left")return this.margin_debugging[box.box_id].left.fixed=box.contains[0],this.margin_debugging[box.box_id].left.fixed_dir="left",!1;let r_box=line.boxes[idx-1];return(r_box==null?void 0:r_box.align)==="right"?(this.margin_debugging[box.box_id].left.fixed=r_box.contains[0],this.margin_debugging[box.box_id].left.fixed_dir="right",!1):(this.margin_debugging[box.box_id].left.fixed=null,!0)};for(let idx=0;idx<line.boxes.length;idx++){let box=line.boxes[idx];fat+=box.iw-box.min_width,box.max_width?max_fat+=box.max_width-box.min_width:box.iw!==box.min_width&&(max_fat=1/0);let left_margin=get_left_margin(box,idx);if(preferred_width+=box.iw+left_margin,is_left_margin_adjustable(box,idx)&&(margin+=left_margin,adjustable_margins++),idx===line.boxes.length-1){let right_margin=get_right_margin(box);preferred_width+=right_margin,box.align!=="right"?(this.margin_debugging[box.box_id].right.fixed=null,margin+=right_margin,adjustable_margins++):(this.margin_debugging[box.box_id].right.fixed=box.contains[0],this.margin_debugging[box.box_id].right.fixed_dir="right")}}let shrink_amount=preferred_width-container_width,shrink_fraction;fat===0?shrink_fraction=1:(line.boxes.length===1&&line.boxes[0].collapse_margin!=null&&line.boxes[0].collapse_margin>=container_width?(collapse_margin_mode=!0,shrink_amount-=margin):collapse_margin_mode=!1,fat>=shrink_amount?fat-shrink_amount>max_fat?(shrink_fraction=max_fat/fat,shrink_amount+=max_fat-fat):(shrink_fraction=(fat-shrink_amount)/fat,shrink_amount=0):(shrink_fraction=0,shrink_amount-=fat));let margin_fraction;margin===0?margin_fraction=1:collapse_margin_mode?margin_fraction=0:(margin_fraction=(margin-shrink_amount)/margin,shrink_amount=0);let margin_adjustment=shrink_amount/-adjustable_margins,box_widths=new Array(line.boxes.length),extra=0,relative_speeds=0;for(let idx=0;idx<line.boxes.length;idx++){let box=line.boxes[idx],box_width=box.min_width+(box.iw-box.min_width)*shrink_fraction;box.max_width&&box_width>box.max_width?(extra+=box_width-box.max_width,box_widths[idx]=box.max_width):(relative_speeds+=box.iw-box.min_width,box_widths[idx]=box_width)}for(;extra>0;){let new_relative=0,extra_used=0;for(let idx=0;idx<line.boxes.length;idx++){let box=line.boxes[idx];if(!box.max_width||box_widths[idx]<box.max_width){let box_width=box_widths[idx]+extra*(box.iw-box.min_width)/relative_speeds;box.max_width&&box_width>box.max_width?(extra_used+=box.max_width-box_widths[idx],box_widths[idx]=box.max_width):(extra_used+=box_width-box_widths[idx],new_relative+=box.iw-box.min_width,box_widths[idx]=box_width)}}extra-=extra_used,extra<1&&(extra=0),relative_speeds=new_relative}let line_div=this._show_line(line_idx);line_div[0].style["margin-top"]=line.top_margin+"px";let box_right=0;for(let idx=0;idx<line.boxes.length;idx++){var _box$contains;let box=line.boxes[idx],box_div=this._get_box(box.box_id);box_div.show(),line_div[0].lastChild!==box_div[0]&&line_div.append(box_div);let left_margin;is_left_margin_adjustable(box,idx)?left_margin=get_left_margin(box,idx)*margin_fraction+margin_adjustment:left_margin=get_left_margin(box,idx);let box_width=box_widths[idx];box_div[0].style.left=box_right+left_margin+"px",box_right+=left_margin+box_width,box_div[0].style.width=box_width+"px";let element_fraction=box_width/box.iw;this.margin_debugging[box.box_id].left.actual=left_margin,idx===line.boxes.length-1&&(this.margin_debugging[box.box_id].right.actual=container_width-box_right),this.margin_debugging[box.box_id].left.collapsed=collapse_margin_mode&&this.margin_debugging[box.box_id].left.fixed_dir!=="left",this.margin_debugging[box.box_id].right.collapsed=collapse_margin_mode&&this.margin_debugging[box.box_id].right.fixed_dir!=="right";let stretched=margin_fraction>1||margin_adjustment>0,squeezed=margin_fraction<1||margin_adjustment<0;this.margin_debugging[box.box_id].left.stretched=stretched,this.margin_debugging[box.box_id].right.stretched=stretched,this.margin_debugging[box.box_id].left.squeezed=squeezed,this.margin_debugging[box.box_id].right.squeezed=squeezed,this.margin_debugging[box.box_id].left.things_to_break=line.boxes.length>1,this.margin_debugging[box.box_id].right.things_to_break=line.boxes.length>1,this.margin_debugging[box.box_id].top={actual:line.top_margin,from_element:line.topmost},idx>0&&(this.margin_debugging[line.boxes[idx-1].box_id].right=this.margin_debugging[box.box_id].left);let object2=(_box$contains=box.contains)!=null?_box$contains:{};for(let idx2 in object2){let id=object2[idx2],min_width2=Math.min(this.elements[id].mw,container_width),element_width=Math.max(min_width2,this.elements[id].iw*element_fraction);this.elements[id].maxw&&element_width>this.elements[id].maxw&&(element_width=this.elements[id].maxw);let total_margin=box_width-element_width,left;box.iw-this.elements[id].iw===0?left=total_margin/2:left=this.elements[id].il/(box.iw-this.elements[id].iw)*total_margin;let should_attach=should_show_element(this.elements[id]);if(should_attach&&!this.elements[id].is_attached){this.elements[id].is_attached=!0,this.calculate_children(id);let DEFAULT_CANVAS_APPEND=(parent,child)=>parent.append(child);this._wait_for_instance_added(id,()=>{var _instance$element$E$w;((_instance$element$E$w=this.instances[id].element.E.wrapped_canvas_append)!=null?_instance$element$E$w:DEFAULT_CANVAS_APPEND)(box_div,this.to_canvas(this.instances[id]))})}else this.elements[id].is_attached!==!1&&!should_attach&&(this.elements[id].is_attached=!1,this.calculate_children(id),this._wait_for_instance_added(id,()=>{this.to_canvas(this.instances[id]).detach()}));should_attach&&this._set_element_width(id,element_width,left),this.elements[id].is_attached||this._visibility_rules.push(id)}}this.update_display_line_height(line)}this._hide_lines(line_idx),this.recalculate_container(),this.flow_created.turn(),this.emit("resize_width",container_width)}recalculate_container(){u.WaitFor(this.flow_created,()=>{if(this.owner_instance.supports_message("child_movement")&&this.lines_length>0){let initial_bottom=this.lines[this.lines_length-1].bottom,total_height=0;for(let line of(_this$display_lines2=this.display_lines)!=null?_this$display_lines2:[]){var _this$display_lines2;let max_height=0;for(let box of line.boxes)max_height=Math.max(max_height,box.height);total_height+=max_height+line.top_margin}let delta=total_height-initial_bottom;this.owner_instance.message("child_movement",delta)}})}set_height(instance,height,options){var _options2,_this$elements$id;(_options2=options)!=null||(options={});let id=instance.element_id(),data=(_this$elements$id=this.elements[id])!=null?_this$elements$id:{};if(data.height===height)return;data.height=height,options.no_css_update||this._update_instance(id,()=>{this.to_canvas(instance)[0].style.height=data.height+"px"});let delta=height-data.ih;delta!==data.height_delta&&(data.height_delta=delta,this.calculate_children(id))}calculate_children(id){let data=this.elements[id];if(data==null){let display,element=appquery.by_id(id),element_name=element==null?void 0:element.display();if(element_name!=null){let root_name=element.root().display();display="Could not draw element ".concat(element_name," on ").concat(root_name,", please make some changes to it or recreate it in the editor and retry")}else display="Could not draw an element on the page, please ask the Bubble team for guidance";throw new u.OwnerError("Missing responsive index",{display,element_id:id,tags:{user_level:"owner_error"}})}if(!data.pushes)this.recalculate_box_height(data.box),this.recalculate_container();else for(let idx in data.pushes){let child=data.pushes[idx];this.recalculate(child)}}_get_height_delta(id){if(this.elements[id].is_attached){var _this$elements$id$hei;return(_this$elements$id$hei=this.elements[id].height_delta)!=null?_this$elements$id$hei:0}else{var _this$elements$id$ih;return(_this$elements$id$ih=-this.elements[id].ih)!=null?_this$elements$id$ih:0}}recalculate(id){let new_top_delta,data=this.elements[id];if(!data.pushed_by)new_top_delta=0;else{let deltas=Object.values(data.pushed_by).map(pusher=>{var _this$elements$pusher;return this._get_height_delta(pusher)+((_this$elements$pusher=this.elements[pusher].top_delta)!=null?_this$elements$pusher:0)});new_top_delta=Math.max(...deltas)}if(new_top_delta!==data.top_delta){data.top_delta=new_top_delta;let new_top=data.top_delta+data.it;data.top!==new_top&&(data.top=new_top,this._update_instance(id,()=>{this.to_canvas(this.instances[id])[0].style.top=data.top+"px"})),this.calculate_children(id)}}to_canvas(instance){return instance.canvas}add_to_instances(instance){var _this$elements2,_instance$element_id,_this$elements2$_inst;(_this$elements2$_inst=(_this$elements2=this.elements)[_instance$element_id=instance.element_id()])!=null||(_this$elements2[_instance$element_id]={}),this.instances[instance.element_id()]=instance}add(instance){let{element}=instance,canvas=this.to_canvas(instance);if(element instanceof lang.Root){this.container_canvas.append(canvas),canvas[0].style["z-index"]=2,canvas[0].style.position="absolute";return}let id=element.id(),data=this.elements[id];data!=null&&(this.instances[id]=instance,this.instances_keys[id]&&(this.instances_keys[id].turn(),this.instances_keys[id]=null),instance.wait_for_visible_lite(()=>{let{style:style2}=canvas[0];style2.position="absolute",style2.boxSizing="border-box",style2.zIndex=data.iz,data.height==null&&(data.height=data.ih,style2.height=data.height+"px"),data.width==null&&(data.width=data.iw,style2.width=data.width+"px"),data.left==null&&(data.left=data.il,style2.left=data.left+"px"),data.top==null&&(data.top=data.it,style2.top=data.top+"px")}))}create_child(owner_instance,container_canvas){let{custom_definition}=owner_instance.element.E;if(custom_definition)return custom_definition().get_responsive_version()>0?new ResponsiveV1Container(owner_instance,container_canvas):custom_definition().use_responsive_algorithm()?new _Container(owner_instance,container_canvas,owner_instance.element.get_responsive_data()):new OldContainer(owner_instance,container_canvas);{let c=new this.constructor(owner_instance,container_canvas,owner_instance.element.get_responsive_data(),this.owner);return this.child_containers.push(c),c}}initialize(){tab.tab_container(this.owner_instance)}detach(instance){this.to_canvas(instance).detach()}};responsive_v0_containers.Container=Container;responsive_v0_containers.OldContainer=OldContainer;responsive_v0_containers.set_responsive_container=function(responsive_container_ref){ResponsiveV1Container=responsive_container_ref}}});var require_ResponsiveContainer2=__commonJS({"lib-browser-old/shared/responsive/ResponsiveContainer.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();var u=require_u2(),Lib=require_lib(),responsive_css=require_responsive_css(),lang=require_lang2(),responsive_layout=require_responsive_layout(),element_eval=require_element_eval(),element_props=require_element_props(),containers=require_containers2();module.exports=class ResponsiveContainer{constructor(owner_instance,container_canvas){this.owner_instance=owner_instance,this.container_canvas=container_canvas,this._destroy_fns=[],this.instances={},this.element_autoruns={},this.child_containers=[],this.flow_created=u.MakeKey(null,"flow created"),this.dependency=u.Dependency(),this.owner_instance!=null&&this.container_canvas!=null&&(this.owner_instance.run_mode()&&this.handle_extra_wrapper(),this.container_canvas.addClass("bubble-r-container"),this.owner_instance.element.type()==="Page"&&u.is_debug_mode()&&(this.owner_instance.element.container_layout()==="fixed"?this.container_canvas.css("height",this.container_canvas.height()+300):this.container_canvas.css("padding-bottom",300)),this.autorun(()=>{let layout=this.layout();this.container_canvas.removeClass(responsive_layout.CONTAINER_CLASSES),this.container_canvas.addClass(layout.classes),this.container_canvas.css(this.get_container_props())}))}get_container_props(){let layout=this.layout(),props={};for(let field in layout.container_properties){let prop=layout.container_properties[field];props[prop]=element_eval.evaluate_property(this.owner_instance,field)}return responsive_css.container_properties(props)}destroy(){var _this$owner_instance;if(!this.destroyed){this.destroyed=!0,(_this$owner_instance=this.owner_instance)==null||_this$owner_instance.destroy(),this.owner_instance=null;for(let container of(_this$child_container=this.child_containers)!=null?_this$child_container:[]){var _this$child_container;container.destroy()}for(let fn of this._destroy_fns)fn();this._destroy_fns=void 0}}on_destroy(fn){this.destroyed?fn():this._destroy_fns.push(fn)}autorun(fn,cleanup){let ar=u.autorun(()=>{this.destroyed||fn()},cleanup);return this.on_destroy(()=>ar.destroy()),ar}handle_extra_wrapper(){this.owner_instance.element.should_add_extra_wrapper()&&(this.container_canvas.addClass("bubble-r-container-wrapper"),this.container_canvas=u.div("",this.container_canvas))}layout_type(){var _this$owner_instance$,_this$owner_instance2;return(_this$owner_instance$=(_this$owner_instance2=this.owner_instance)==null?void 0:_this$owner_instance2.element.container_layout())!=null?_this$owner_instance$:"fixed"}layout(){return responsive_layout.LAYOUT_PROPERTIES[this.layout_type()]}resize_width(){}add_to_instances(instance){this.instances[instance.element_id()]=instance}remove_from_instances(instance){delete this.instances[instance.element_id()]}ready_key(){return this.flow_created}get_canvas(){return this.container_canvas}get_owner(){return this.owner_instance}render(html){let canvas=$(html);return canvas.addClass("bubble-element"),canvas}to_canvas(instance){return instance.canvas}set_height(instance,height){instance.canvas.css("height",height)}get_width_properties(instance){let{element}=instance,is_fixed=this.layout_type()===responsive_layout.FIXED_LAYOUT;return{min_width:is_fixed?element.get_width():element_props.min_width_css(instance),max_width:is_fixed?element.get_width():element_props.max_width_css(instance),min_height:is_fixed?element.get_height():element_props.min_height_css(instance),max_height:is_fixed?element.get_height():element_props.max_height_css(instance),fit_width:element_props.is_fitting_width(instance),fit_height:element_props.is_fitting_height(instance),has_fixed_aspect_ratio:element.has_fixed_aspect_ratio()}}should_collapse(instance){return!instance.is_visible_me()&&!(instance.is_animating()&&instance._is_animating_me)}element_css(instance){let{element}=instance,layout=this.layout(),properties=this.get_width_properties(instance);for(let prop of responsive_css.margin_properties)properties[prop]=element_eval.evaluate_property(instance,prop);for(let field in layout.element_properties){let prop=layout.element_properties[field];properties[prop]=element_eval.evaluate_property(instance,field)}let css_to_apply=layout.css_func(properties);if(!element.E.uses_css_responsive){var _element$get_max_widt;css_to_apply["min-width"]=element.get_min_width(),css_to_apply["max-width"]=(_element$get_max_widt=element.get_max_width())!=null?_element$get_max_widt:"",instance.run_mode()?delete css_to_apply.height:(css_to_apply.width=element.get_width(),css_to_apply.height=element.get_height(),css_to_apply["flex-grow"]=0),css_to_apply["min-height"]="",css_to_apply["max-height"]=""}return css_to_apply}setup_element(instance){let canvas=this.to_canvas(instance),{element}=instance;instance.autorun(()=>{canvas.css("z-index",element.get_zindex())}),instance.autorun(()=>{this.autorun(()=>{canvas.css(responsive_css.element_reset),canvas.css(this.element_css(instance))}),this.autorun(()=>{instance.get_static_property("collapse_when_hidden")?this.autorun(()=>{this.should_collapse(instance)?canvas.hide():canvas.show()}).set_run_immediately(!0):canvas.show()})})}root_css(instance){var _element$root_max_wid,_element$root_max_hei;let{element}=instance;return{width:instance.run_mode()?"100%":Lib().visual_edit.root_width(),"min-width":element.root_min_width(),"max-width":(_element$root_max_wid=element.root_max_width())!=null?_element$root_max_wid:"","min-height":element.root_min_height(),"max-height":(_element$root_max_hei=element.root_max_height())!=null?_element$root_max_hei:""}}setup_root(instance){let canvas=this.to_canvas(instance);canvas.css({"z-index":2,position:"relative"}),this.autorun(()=>{canvas.css(this.root_css(instance))})}add(instance){let{element}=instance,canvas=this.to_canvas(instance);if(element instanceof lang.Root){this.autorun(()=>{this.setup_root(instance)}),this.container_canvas.append(canvas);return}else if(!element.added_to_container())return;let id=instance.element.id();this.instances[id]=instance,this.element_autoruns[id]=this.autorun(()=>{this.setup_element(instance)}),this.container_canvas.append(canvas)}create_child(owner_instance,container_canvas){let custom_definition=owner_instance.element.E.custom_definition;if(custom_definition)return custom_definition().get_responsive_version()>0?new ResponsiveContainer(owner_instance,container_canvas):custom_definition().use_responsive_algorithm()?new containers.Container(owner_instance,container_canvas,owner_instance.element.get_responsive_data()):new containers.OldContainer(owner_instance,container_canvas);{let c=new ResponsiveContainer(owner_instance,container_canvas);return this.child_containers.push(c),c}}initialize(){this.flow_created.turn()}detach(instance){this.to_canvas(instance).detach()}}}});var require_elementservice=__commonJS({"lib-browser-old/client/elementservice.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_object_values();var _web=(init_web(),__toCommonJS(web_exports)),u=require_u2(),Lib=require_lib(),appquery=require_appquery(),events=require_events(),epoch=require_epoch2(),epoch_consts=require_epoch(),{render:render2}=(init_web(),__toCommonJS(web_exports)),rendering_perf=require_rendering_perf(),{CSS_FLAG,ROOT_CLASS}=require_server_rendering(),{RenderElement}=require_RenderElement(),{checkNonDeferrable}=require_drawstate(),elements=require_elements2(),ResponsiveContainer=require_ResponsiveContainer2(),responsive_v0_containers=require_containers2(),elementservice=exports;elementservice.initialize=function(){responsive_v0_containers.set_responsive_container(ResponsiveContainer)};elementservice.ElementService=class extends events.EventEmitter{constructor(){super(),this.ready_key=u.MakeKey(null,"ElementService ready")}display(page){let responsive_version=page.get_responsive_version();epoch.addEpochLabels({responsive_version});let root_container;responsive_version>0?root_container=new ResponsiveContainer(null,$("body")):page.use_responsive_algorithm()?root_container=new responsive_v0_containers.Container(null,$("body")):root_container=new responsive_v0_containers.OldContainer(null,$("body")),checkNonDeferrable(page),page=elements.ElementInstance(page,elements.RUN),page.split_namespace(),page.register(null),this._page=page;let span=epoch_consts.SPANS.page_draw,draw_page=page2=>epoch.traceSpan(span.name,span.type,()=>{if((appquery.has_feature_enabled("react_upgrade")||appquery.get_public_setting("bubble_version")>=21||appquery.get_public_setting("bubble_version")===20&&page2.get_static_property("page_version_21_upgrade")||Lib().location.get_query().new_elements_rendering)&&typeof render2=="function")if(this.new_rendering=!0,getComputedStyle(document.body).getPropertyValue(CSS_FLAG)?window._bubble_watcher_cache!=null&&document.documentElement.classList.add(ROOT_CLASS):delete window._bubble_watcher_cache,responsive_version>0){root_container=new ResponsiveContainer(null),page2.set_containers(root_container);let cleanup=render2(()=>(0,_web.createComponent)(RenderElement,{instance:page2}),document.body);page2.on_destroy(cleanup)}else page2.create_skeleton(root_container);else page2.create_skeleton(root_container);page2.start_draw_tree(),page2.ensure_drawn()}),perf_options={deferred_drawing_enabled:!0},perf_labels=rendering_perf.measure_initial_draw(perf_options,()=>{draw_page(page)});epoch.addEpochLabels(perf_labels),setTimeout(()=>{this.ready_key.turn()})}_loading_key(entire_page){return entire_page?"_page_done_loading_entire":"_page_done_loading"}on_page_done_loading(entire_page,fn){let watcher=u.Watcher(()=>this.page_done_loading(entire_page));watcher.on_value(val=>{val&&(fn(),watcher.destroy())})}page_done_loading(entire_page){let key=this._loading_key(entire_page);return this[key]||(this[key]=u.Box(!1),this._check_if_page_is_done(entire_page,!0)),this[key]()}_check_if_page_is_done(entire_page,first_time){let is_finished=instance=>{let canvas=instance.get_canvas();if(!canvas||canvas.is(":hidden")||canvas.css("visibility")==="hidden"||!entire_page&&$(window).height()<canvas.offset().top)return null;for(let v of Object.values((_instance$_watchers=instance._watchers)!=null?_instance$_watchers:{})){var _instance$_watchers;let[err,ready,key]=v.get_current_status_array();if(!err&&!ready)return key}let has_children=instance.element.can_have_children();if(instance.is_ready&&!has_children)return null;let children_key=instance.get_children_drawn_key();if(!children_key.is_turned())return children_key;for(let child of instance.current_children){let key=is_finished(child);if(key)return key}return null},do_check=()=>{let key=is_finished(this._page);key==null?this[this._loading_key(entire_page)](!0):u.WaitFor(key,this._check_if_page_is_done.bind(this,entire_page))};first_time&&this.ready_key.is_turned()?do_check():u.WaitFor(this.ready_key,()=>{setTimeout(do_check,100)})}get_page(){return this._page}}}});var require_auth=__commonJS({"lib-browser-old/constants/auth.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.WRONG_PASSWORD=exports.WORKOS_AUTH_URL=exports.NO_SUCH_USER=exports.INVALID_LOGIN_CREDENTIALS=exports.EMPLOYEE_ACCESSING_ORGANIZATION_FREE_APP=void 0;var _safe_require=_interopRequireDefault(require_safe_require());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_safe_require.default.safe_register("./constants/auth",exports);var INVALID_LOGIN_CREDENTIALS="INVALID_LOGIN_CREDENTIALS";exports.INVALID_LOGIN_CREDENTIALS=INVALID_LOGIN_CREDENTIALS;var NO_SUCH_USER="NO_SUCH_USER";exports.NO_SUCH_USER=NO_SUCH_USER;var WRONG_PASSWORD="WRONG_PASSWORD";exports.WRONG_PASSWORD=WRONG_PASSWORD;var EMPLOYEE_ACCESSING_ORGANIZATION_FREE_APP="EMPLOYEE_ACCESSING_ORGANIZATION_FREE_APP";exports.EMPLOYEE_ACCESSING_ORGANIZATION_FREE_APP=EMPLOYEE_ACCESSING_ORGANIZATION_FREE_APP;var WORKOS_AUTH_URL="https://api.workos.com/sso";exports.WORKOS_AUTH_URL=WORKOS_AUTH_URL}});var require_plugin_loader=__commonJS({"lib-browser-old/core/plugin_loader.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.inject_dependencies=inject_dependencies;exports.load_plugin=load_plugin;exports.type_to_prefix=void 0;require_es_array_iterator();require_web_dom_collections_iterator();require_es_object_entries();require_es_string_starts_with();require_es_regexp_exec();require_es_string_split();var u=_interopRequireWildcard(require_u2()),safe_require=_interopRequireWildcard(require_safe_require()),plugin_strings=_interopRequireWildcard(require_plugin2()),service_type_parser=_interopRequireWildcard(require_service_type_parser()),plugin_getter=_interopRequireWildcard(require_plugin_getter()),_errors=require_errors();function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var all_plugins=null,by_type={element:{},event:{},action:{},btype:{},datasource:{}},type_to_prefix={element:"Element",event:"Event",action:"Action",btype:"Btype",datasource:"Datasource",module:"Module"};exports.type_to_prefix=type_to_prefix;var prefix_to_type={};for(let[type,prefix]of Object.entries(type_to_prefix))prefix_to_type[prefix]=type;function load_plugin(name,miss_okay,no_cache){var _miss_okay;if((_miss_okay=miss_okay)!=null||(miss_okay=!1),!all_plugins)throw new _errors.UnexpectedError("Loading a plugin before the loader was initialized");if(name.slice(0,7)===type_to_prefix.module+":")return load_module(name.slice(7));let p=all_plugins[name];if(!p){let[prefix,...rest]=name.split(":"),suffix=rest.join(":"),type=prefix_to_type[prefix];if(type){var _by_type$type;p=(_by_type$type=by_type[type])==null?void 0:_by_type$type[suffix],p&&(all_plugins[name]=p)}}if(!p){let el_prefix=type_to_prefix.element+":",act_prefix=type_to_prefix.action+":",evt_prefix=type_to_prefix.event+":";if(name.startsWith(el_prefix)){let element_type=name.split(el_prefix)[1],[plugin_name,element_name]=service_type_parser.get_plugin_and_type(element_type);if(element_name){var _plugin_getter$get_pl;p=(_plugin_getter$get_pl=plugin_getter.get_plugin(plugin_name))==null?void 0:_plugin_getter$get_pl.get_element(element_type,no_cache)}}else if(name.startsWith(act_prefix)){let action_type=name.split(act_prefix)[1],[plugin_name,action_name]=service_type_parser.get_plugin_and_type(action_type);if(action_name){var _plugin_getter$get_pl2;p=(_plugin_getter$get_pl2=plugin_getter.get_plugin(plugin_name))==null?void 0:_plugin_getter$get_pl2.get_action(action_type)}}else if(name.startsWith(evt_prefix)){let event_type=name.split(evt_prefix)[1],[plugin_name]=service_type_parser.get_plugin_and_type(event_type);if(event_type){var _plugin_getter$get_pl3;p=(_plugin_getter$get_pl3=plugin_getter.get_plugin(plugin_name))==null?void 0:_plugin_getter$get_pl3.get_event(event_type)}}}if(!p){if(miss_okay)return null;throw new u.UnexpectedError(plugin_strings.MISSING_PLUGIN+" "+name)}return p.plugin_retrieved_name=name,p}function inject_dependencies(_by_type){if(!all_plugins){by_type=_by_type,all_plugins={};for(let[type,core_module]of Object.entries(by_type)){let prefix=type_to_prefix[type];for(let[k,v]of Object.entries(core_module))all_plugins["".concat(prefix,":").concat(k)]=v}}}function load_module(name){return safe_require.safe_require("./optional/"+name)}}});var require_documentation_id_getter=__commonJS({"lib-browser-old/documentation_id_getter.js"(){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_includes();var u=require_u2()}});var require_generate_utilities=__commonJS({"lib-browser-old/core/core_btypes/utilities/generate_utilities.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_includes();require_es_regexp_exec();require_es_string_replace();require_es_array_iterator();require_web_dom_collections_iterator();require_es_string_includes();var u=require_u2(),appquery=require_appquery(),documentation_id_getter=require_documentation_id_getter(),btype_ids=require_btype_ids(),eval_consts=require_eval(),logger=require_logger(),slug=require_slug(),url_data=require_url_data(),btypes=require_btypes(),Lib=require_lib(),sample=require_sample(),hydrate2=require_hydrate(),list_utilities=require_list_utilities(),mode_check=require_mode_check(),postgres_constraints=require_postgres_constraints(),pluginservice=require_pluginservice(),application=require_application(),generate_utilities=exports;generate_utilities.add_basic_displays=function(definition){return"export_to_string"in definition||(definition.export_to_string=definition.runmode_display),"debugging_display"in definition||(definition.debugging_display=definition.runmode_display),definition};generate_utilities.build_simple=function(btype_name,btype_data){var _btype_data$is_simple,_btype_data$get_bubbl;let{messages}=btype_data,btype_id=btype_name;return btype_id==="bool"&&(btype_id="sys.bool"),["null","geographic_address","key_combination"].includes(btype_id)||(messages.is_not_contained_by_list=list_utilities.build_is_not_contained_by_list(btype_id)),delete btype_data.messages,btype_data.get_message_names=()=>Object.keys(messages),btype_data.get_message=name=>messages[name],btype_data.name=btype_name,(_btype_data$is_simple=btype_data.is_simple)!=null||(btype_data.is_simple=!0),(_btype_data$get_bubbl=btype_data.get_bubble_null)!=null||(btype_data.get_bubble_null=()=>null),generate_utilities.add_basic_displays(btype_data),btype_data};function _extract_id(a){if(typeof(a==null?void 0:a._id)=="function")return a._id();if(typeof(a==null?void 0:a.get)=="function"){let v=a.get();if(typeof(v==null?void 0:v.replace)=="function")return v.replace(eval_consts.HYDRATE_STRING,"")}else return}function custom_equals(a,b){return _extract_id(a)===_extract_id(b)}function add_documentation_ids(full_id,messages){let name=full_id==="user"?"user":"custom"}function generate_shared_messages(full_id){return{"Created By":{description:"'s Creator",ret_btype:"user",section:"Data Fields",is_lookup:!0},Slug:{description:"'s Slug",ret_btype:"text",section:"Data Fields",is_lookup:!0},equals:{description:" is ",ret_btype:"sys.bool",section:"Operators",arg_btype:full_id,fn(a,b){return custom_equals(a,b)},build_pg_constraint:postgres_constraints.equals,build_pg_r_constraint:postgres_constraints.equals,build_pg_relationship:postgres_constraints.equals_both},not_equals:{description:" is not ",ret_btype:"sys.bool",section:"Operators",arg_btype:full_id,fn(a,b){return!custom_equals(a,b)},build_pg_constraint:postgres_constraints.not_equals,build_pg_r_constraint:postgres_constraints.not_equals,build_pg_relationship:postgres_constraints.not_equals_both},is_empty:{description:" is empty",ret_btype:"sys.bool",section:"Other Operators",fn(a,b){var _a$exists;return!(a!=null&&(_a$exists=a.exists)!=null&&_a$exists.call(a))},build_pg_constraint:postgres_constraints.is_empty},is_not_empty:{description:" is not empty",section:"Other Operators",ret_btype:"sys.bool",fn(a,b){var _a$exists2,_a$exists3;return(_a$exists2=a==null||(_a$exists3=a.exists)==null?void 0:_a$exists3.call(a))!=null?_a$exists2:!1},build_pg_constraint:postgres_constraints.is_not_empty},slug_can_be:{description:" can have the slug value ",section:"Other Operators",ret_btype:"sys.bool",arg_btype:"text",fn(a,b){var _a$exists4;if(a!=null&&(_a$exists4=a.exists)!=null&&_a$exists4.call(a))return slug.is_slug_valid(Lib().appname(),Lib().app_version(),a._type(),b,a)}},slug_cannot_be:{description:" cannot have the slug value ",section:"Other Operators",ret_btype:"sys.bool",arg_btype:"text",fn(a,b){var _a$exists5;if(a!=null&&(_a$exists5=a.exists)!=null&&_a$exists5.call(a))return!slug.is_slug_valid(Lib().appname(),Lib().app_version(),a._type(),b,a)}},"Created Date":{description:"'s Creation Date",section:"Data Fields",ret_btype:"date",is_lookup:!0,privacy_condition_okay:!1},"Modified Date":{description:"'s Modified Date",section:"Data Fields",ret_btype:"date",is_lookup:!0,privacy_condition_okay:!1},_id:{description:"'s unique id",section:"Data Fields",public_for_plugins:!0,ret_btype:"text",fn(a,b){var _a$exists6;if(a!=null&&(_a$exists6=a.exists)!=null&&_a$exists6.call(a)){var _a$_id;return a==null||(_a$_id=a._id)==null?void 0:_a$_id.call(a)}else return""}},id_link:{ret_btype:"text",section:"Data Fields",field_names:{element_id:{}},spot_data:"SlidableAtom",description:"'s link",fn(a,b,properties){var _a$_id2;if(!(a==null||(_a$_id2=a._id)==null?void 0:_a$_id2.call(a)))return this.ret_btype_null();let page=appquery.element(properties.element_id);if(!page||page.name==null)return this.ret_btype_null();let readable_field=page.get_static_property("readable_field"),data_for_link=url_data.get_data_to_send(a,readable_field);return Lib().location.get_page_url(page.name()+"/"+data_for_link)}},convert_to_list:{description:":converted to list",section:"Other Operators",ret_btype:btype_ids.list_type(full_id),fn(a,b,properties){return a=btypes.get(full_id).cast(a),a==null?Lib().db_instance().static_list(full_id,[]):Lib().db_instance().static_list(full_id,[a])}}}}function generate_special_messages(additional_messages,remove_messages,full_id,skip_created_fields){let messages,message_order=[],special_messages={};if(additional_messages&&([messages,message_order]=additional_messages(),u.extend(special_messages,messages)),skip_created_fields||u.extend(special_messages,generate_shared_messages(full_id)),remove_messages)for(let msg_name of remove_messages())delete special_messages[msg_name];return add_documentation_ids(full_id,special_messages),{special_messages,message_order}}generate_utilities.create_custom_btype=function(full_id,node,additional_messages,remove_messages,skip_created_fields){let _generated_messages;function get_generated_messages(){return _generated_messages==null&&(_generated_messages=generate_special_messages(additional_messages,remove_messages,full_id,skip_created_fields)),_generated_messages}mode_check.on_client()&&get_generated_messages();function display(){if(!node.exists()&&btype_ids.is_custom_type(full_id))return"[missing type: ".concat(full_id.slice(7),"]");if(node.display()==null){var _node$name;return((_node$name=node.name)==null?void 0:_node$name.call(node))==="box_file"?"Box File":"[Type with missing display: ".concat(full_id.slice(7),"]")}return node.display()}let debugging_display=null;!node.exists()&&btype_ids.is_custom_type(full_id)&&(debugging_display=val=>"(Value is of an unknown type ".concat(display()," and cannot be displayed)"));function get_message(name){var _field_node$value,_btypes$get,_btypes$get$custom_ty,_btypes$get$custom_ty2,_field_node$value2,_ref;let special=get_generated_messages().special_messages[name];if(special)return special;let field_node=node.field(name);if(!field_node)return{description:"[missing: "+name+"]",ret_btype:"null",fn(){}};let deleted_type_helper="",type_list_agnostic=(_field_node$value=field_node.value())==null?void 0:_field_node$value.replace(/^list\./,"");type_list_agnostic&&(_btypes$get=btypes.get(type_list_agnostic))!=null&&(_btypes$get$custom_ty=_btypes$get.custom_type)!=null&&(_btypes$get$custom_ty2=_btypes$get$custom_ty.call(_btypes$get))!=null&&_btypes$get$custom_ty2.deleted()&&(deleted_type_helper=" (deleted)");let ret_btype=(_field_node$value2=field_node.value())!=null?_field_node$value2:"null";return{description:(_ref="'s "+field_node.display()+deleted_type_helper)!=null?_ref:name,section:"Data Fields",ret_btype,is_lookup:!0,delete_cb(){window.confirm("Delete field "+field_node.display()+"?")&&field_node.set_deleted(!0)}}}return{get_message_names(){let names=node.fields().filter(field=>!field.deleted()).map(field=>field.name());if(node.no_special_messages)return names;let{special_messages,message_order}=get_generated_messages();return["equals","not_equals",...names,...message_order.filter(name=>name.high_priority).map(name=>name.value),"Created By","Slug","Created Date","Modified Date","_id","id_link",...message_order.filter(name=>!name.high_priority).map(name=>name.value),"is_empty","is_not_empty","slug_can_be","slug_cannot_be","convert_to_list"].filter(msg=>names.includes(msg)||Object.keys(special_messages).includes(msg))},get_message,display,custom_type(){return node},equals:custom_equals,from_human(val){return this.JS_to_bubble(val)},get_sample(){return new sample.SampleObject(full_id)},get_bubble_null(){return null},storable:!0,bindable:!0,debugging_display,export_to_string(val,context){var _context$visited_fiel,_val$exists;if(!context.custom_use_primary_field)return full_id==="user"||val!=null&&val.exists()?val==null?void 0:val._id():"";if((_context$visited_fiel=context.visited_field_types)!=null||(context.visited_field_types=new Map),full_id==="user"){var _Lib$app_owners,_Lib;let db_instance=Lib().db_instance(appquery.appname(),appquery.app_version());if(val.id===db_instance.get_admin_user_id()||(_Lib$app_owners=(_Lib=Lib()).app_owners)!=null&&_Lib$app_owners.call(_Lib)[val.id])return"(App admin)"}if(!(val!=null&&(_val$exists=val.exists)!=null&&_val$exists.call(val)))return"(deleted thing)";let primary_field=context.get_primary_field(full_id),message=new btypes.Message(primary_field,get_message(primary_field),full_id),sub_object_btype=message.ret_btype();if(context.visited_field_types.get(full_id)){let top_level_field_type=context.visited_field_types.keys().next().value;return"(Circular reference between primary fields for ".concat(btypes.get(top_level_field_type).display()," and ").concat(btypes.get(full_id).display(),". Change primary fields)")}else return context.visited_field_types.set(full_id,!0),sub_object_btype.export_to_string(message.evaluate(val),context)},get_JS_object(val){if(val==null)return null;if(typeof val=="string")return u.starts_with(val,eval_consts.HYDRATE_STRING)&&(val=val.replace(eval_consts.HYDRATE_STRING,"")),val;let res={};for(let message_name of this.get_message_names())if(pluginservice.can_use_message(full_id,message_name)){let message=new btypes.Message(message_name,this.get_message(message_name),full_id),message_result=message.evaluate_without_cast(val);if(message_result){let ret_val=message.ret_btype();ret_val.is_missing()?res[message_name]=null:ret_val.custom_type()?res[message_name]=message_result._id():ret_val.is_list()&&ret_val.inner().custom_type()?res[message_name]=message_result.all().map(a=>a._id()):res[message_name]=btypes.get(ret_val).get_JS_object(message_result)}}return res._type=full_id,res},JS_to_bubble(id){return typeof id=="string"&&id!==""?Lib().db_instance().get(id):null},cast(val){return typeof(val==null?void 0:val.child)=="function"?val:typeof val=="string"&&u.starts_with(val,eval_consts.HYDRATE_STRING)?(logger.error("Got dehydrated object in cast; should probably be hydrated here",{val}),this.cast(hydrate2.rehydrate_tree(Lib().db_instance(),val))):null}}}}});var require_boolean_utilities=__commonJS({"lib-browser-old/core/core_btypes/utilities/boolean_utilities.js"(exports){"use strict";init_define_process_env();init_shim();var Lib=require_lib(),boolean_utilities=exports;boolean_utilities.format_boolean_message={section:"Other Operators",ret_btype:"text",arg_btype:null,fn(a,b,properties){if(a){var _properties$formattin;return(_properties$formattin=properties.formatting_for_true)!=null?_properties$formattin:""}else{var _properties$formattin2;return(_properties$formattin2=properties.formatting_for_false)!=null?_properties$formattin2:""}},spot_data:"SlidableAtom",description(node){return":formatted as text"},field_names:{formatting_for_true:{default:"yes"},formatting_for_false:{default:"no"}}};boolean_utilities.format_boolean_number_message={section:"Other Operators",ret_btype:"number",arg_btype:null,fn(a,b,properties){if(a){var _properties$formattin3;return(_properties$formattin3=properties.formatting_for_true)!=null?_properties$formattin3:0}else{var _properties$formattin4;return(_properties$formattin4=properties.formatting_for_false)!=null?_properties$formattin4:0}},spot_data:"SlidableAtom",description(node){return":formatted as number"},field_names:{formatting_for_true:{default:1},formatting_for_false:{default:0}}};boolean_utilities.to_bool=function(val){if(typeof val=="boolean")return val;if(typeof val=="string")switch(val=val.toLowerCase(),val){case"yes":case"true":return!0;case"no":case"false":return!1;default:return null}else return null};boolean_utilities.render_bool=function(val){return val=boolean_utilities.to_bool(val),val==null?"":val?Lib().get_text("BUILT_IN","YES"):Lib().get_text("BUILT_IN","NO")};boolean_utilities.bool_equals=(a,b)=>boolean_utilities.to_bool(a)===boolean_utilities.to_bool(b)}});var require_misc_utilities=__commonJS({"lib-browser-old/core/core_btypes/utilities/misc_utilities.js"(exports){"use strict";init_define_process_env();init_shim();require_es_regexp_exec();require_es_string_split();require_es_string_replace();require_es_array_includes();require_es_string_includes();require_es_array_iterator();require_web_dom_collections_iterator();var u=require_u2(),configuration=require_client_config2(),mode_check=require_mode_check(),b_string=require_b_string(),b_file_shared=require_b_file_shared(),postgres_constraints=require_postgres_constraints(),redis_consts=require_redis(),element_workflows=require_element_workflows(),btypes=require_btypes(),Lib=require_lib(),FrozenState=require_FrozenState(),page_state=require_page_state(),element_eval=require_element_eval(),misc_utilities=exports,fileupload;mode_check.on_server()&&(fileupload=__require("./../../../server/fileupload"));misc_utilities.generate_JS_to_bubble_error=function(type,val){throw new u.UnexpectedError("Expected a ".concat(type,", but got a ")+typeof val+" (original data: "+u.json_stringify(val,!0)+")")};misc_utilities.get_json_encode_msg=btype_name=>({description:":formatted as JSON-safe",section:"Other Operators",ret_btype:"text",fn(a){var _casted_a;let casted_a=btypes.get(btype_name).cast(a);return(_casted_a=casted_a)!=null||(casted_a=null),u.json_stringify(casted_a)}});misc_utilities.get_file_messages=function(val){return{is_empty:{description:" is empty",section:"Operators",ret_btype:"sys.bool",build_pg_constraint:postgres_constraints.is_empty,fn(a,b){return a==null||a===""}},is_not_empty:{description:" is not empty",section:"Operators",ret_btype:"sys.bool",build_pg_constraint:postgres_constraints.is_not_empty,fn(a,b){return a!=null&&a!==""}},file_name:{description:"'s file name",section:"Operators",ret_btype:"text",arg_btype:null,fn(a,b){if(!(a!=null&&a.split))return this.ret_btype_null();let splitted=a.split("/");return decodeURIComponent(splitted[splitted.length-1])}},url:{description:"'s URL",section:"Operators",ret_btype:"text",arg_btype:null,fn(a,b){return b_string.cast_to_string(a)}},saved_s3:{description:":saved to S3",section:"Other Operators",ret_btype:val,arg_btype:null,spot_data:"SlidableAtom",field_names:{file_name_override:{optional:!0}},filter_context(context){return context.owner_type==="Workflow"||context.owner_type==="BackendWorkflow"},fn(a,b,properties){if(a==null||!a.split)return this.ret_btype_null();if(a=a.replace("/../","/"),a.indexOf(configuration.user_file_url)!==-1||a.includes(b_file_shared.get_file_cdn_url(Lib().appname())))return a;if(!u.is_url(a))return this.ret_btype_null();if(a.indexOf("blob:")===0)return this.ret_btype_null();if(!mode_check.on_server()||mode_check.running_test())return a;let saved_val=Lib().KeyValueDB().get(redis_consts.INSTANCE_NAMES.SMALL,a);if(saved_val!=null)return saved_val;let filename;properties.file_name_override?filename=properties.file_name_override.split("/").pop():filename=a.split("/").pop();let data={file_url:a,filename,appname:Lib().appname(),app_version:Lib().app_version()},res=fileupload.upload_by_url(data);return Lib().KeyValueDB().put(redis_consts.INSTANCE_NAMES.SMALL,a,res,5*60),res}},to_base64:{description:":encoded in base64",section:"Other Operators",ret_btype:"text",arg_btype:null,filter_context(context){return context.owner_type==="Workflow"||context.owner_type==="BackendWorkflow"},fn(a,b){if(a==null||!a.split)return this.ret_btype_null();if(!mode_check.on_server())return this.ret_btype_null();if(a.slice(0,2)==="//"&&(a="http:"+a),a.indexOf("http")!==0)return this.ret_btype_null();let data=Lib().http_request({url:a,encoding:null}).block().body;return u.base64(data)}},not_equals:{description:" is not ",section:"Other Operators",ret_btype:"sys.bool",arg_btype:"date",no_composer(){return!0},fn(a,b){return a!==b}}}};var _cached_related_workflows={},_isnt_clickable_seen={};misc_utilities.add_basic_element_messages=function(states,messages,should_add_non_clickable){if(should_add_non_clickable){let get_related_workflows=function(instance){return _cached_related_workflows[instance.element_id()]||(_cached_related_workflows[instance.element_id()]=instance.element.get_related_workflows("ButtonClicked")),_cached_related_workflows[instance.element_id()]};u.extend(messages,{isnt_clickable:{description:" isn't clickable",section:"States",ret_btype:"boolean",fn(a,b){if(!a)return this.ret_btype_null();if(mode_check.on_server())return a.state("client_eval_isnt_clickable");function _eval(){if(element_eval.evaluate_property(a,"button_disabled"))return!0;{let ignore_event_condition=!1,unique_string=a.toUniqueString();_isnt_clickable_seen[unique_string]&&(delete _isnt_clickable_seen[unique_string],ignore_event_condition=!0),_isnt_clickable_seen[unique_string]=!0;let context={element:a,datasources:page_state.get_basic_datasources(a.element.root())},events=get_related_workflows(a),inputs_to_check=element_workflows.find_inputs_to_check(a,events,context,ignore_event_condition);for(let input_instance of inputs_to_check.input_instances)if(input_instance.element.get_states().includes("is_invalid")&&input_instance.state("is_invalid"))return!0;return!1}}let evaluation=_eval();if(!a.is_fake_instance){var _FrozenState$dehydrat,_FrozenState$dehydrat2;(_FrozenState$dehydrat=FrozenState.dehydrate_context)==null||(_FrozenState$dehydrat2=_FrozenState$dehydrat.save_to_state)==null||_FrozenState$dehydrat2.call(_FrozenState$dehydrat,a,"client_eval_isnt_clickable",evaluation)}return evaluation},filter_context(context){return context.owner_type==="State"||(context.owner_type==="Workflow"||context.owner_type==="BackendWorkflow")&&context.in_event_condition}}})}if(states.includes("is_link_disabled")&&u.extend(messages,{is_clickable:{description:" is clickable",section:"States",ret_btype:"sys.bool",fn(a,b){return!(a!=null&&a.state("link_disabled"))}},isnt_clickable:{description:" isn't clickable",section:"States",ret_btype:"sys.bool",fn(a,b){return a==null?void 0:a.state("link_disabled")}}}),states.includes("display_invalid")&&u.extend(messages,{is_valid:{description:" is valid",section:"States",ret_btype:"sys.bool",fn(a,b){return!(a!=null&&a.state("display_invalid"))}},isnt_valid:{description:" isn't valid",section:"States",ret_btype:"sys.bool",fn(a,b){return a==null?void 0:a.state("display_invalid")}}}),u.extend(messages,{get_width:{description:"'s width",section:"States",ret_btype:"number",fn(a,b){return a==null?void 0:a.state("current_width")}},get_height:{description:"'s height",section:"States",ret_btype:"number",fn(a,b){return a==null?void 0:a.state("current_height")}}}),states.includes("is_hovered")&&u.extend(messages,{is_hovered:{description:" is hovered",section:"States",ret_btype:"sys.bool",fn(a,b){return a==null?void 0:a.state("is_hovered")},filter_context(context){if(context.owner_type==="State")return!0;let events=["ConditionTrue","DoInterval","interactions-PageScrolled"];return context.owner_type==="Workflow"&&context.in_event_condition&&events.includes(context.owner_node.type())}},isnt_hovered:{description:" isn't hovered",section:"States",ret_btype:"sys.bool",fn(a,b){return!(a!=null&&a.state("is_hovered"))},filter_context(context){if(context.owner_type==="State")return!0;let events=["ConditionTrue","DoInterval","interactions-PageScrolled"];return context.owner_type==="Workflow"&&context.in_event_condition&&events.includes(context.owner_node.type())}},is_pressed:{description:" is pressed",section:"States",ret_btype:"sys.bool",fn(a,b){return a==null?void 0:a.state("is_pressed")},filter_context(context){return context.owner_type==="State"}},isnt_pressed:{description:" isn't pressed",section:"States",ret_btype:"sys.bool",fn(a,b){return!(a!=null&&a.state("is_pressed"))},filter_context(context){return context.owner_type==="State"}}}),states.includes("is_focused"))return u.extend(messages,{is_focused:{description:" is focused",section:"States",ret_btype:"sys.bool",fn(a,b){return a==null?void 0:a.state("is_focused")},filter_context(context){return context.owner_type==="State"}},isnt_focused:{description:" isn't focused",section:"States",ret_btype:"sys.bool",fn(a,b){return!(a!=null&&a.state("is_focused"))},filter_context(context){return context.owner_type==="State"}}})}}});var require_boolean=__commonJS({"lib-browser-old/core/core_btypes/plugins/boolean.js"(exports,module){"use strict";init_define_process_env();init_shim();var postgres_constraints=require_postgres_constraints(),Lib=require_lib(),{render_bool,bool_equals,to_bool,format_boolean_message,format_boolean_number_message}=require_boolean_utilities(),{build_simple}=require_generate_utilities(),{get_json_encode_msg,generate_JS_to_bubble_error}=require_misc_utilities(),{COMPOSER_INPUT_TYPES}=require_composer();module.exports=build_simple("boolean",{messages:{is_true:{description:" is yes",section:"Operators",ret_btype:"sys.bool",build_pg_constraint:postgres_constraints.is_true,fn(a,b){return to_bool(a)}},is_false:{description:" is no",section:"Operators",ret_btype:"sys.bool",build_pg_constraint:postgres_constraints.is_false,fn(a,b){return!to_bool(a)}},and_:{description:" and ",section:"Operators",no_composer:()=>!0,ret_btype:"sys.bool",arg_btype:"sys.bool",fn(a,b){return to_bool(a)&&to_bool(b)}},or_:{description:" or ",section:"Operators",no_composer:()=>!0,ret_btype:"sys.bool",arg_btype:"sys.bool",fn(a,b){return to_bool(a)||to_bool(b)}},format_boolean:format_boolean_message,format_boolean_number:format_boolean_number_message,format_json_encode:get_json_encode_msg("boolean")},display(){return"yes / no"},composer_input_type:COMPOSER_INPUT_TYPES.BOOLEAN,runmode_display:render_bool,export_to_string(val,context){return context.booleans_yes_no?render_bool(val):val!=null?val:!1},equals:bool_equals,get_sample(){return!0},from_human(val){if(typeof val=="string")switch(val.toLowerCase()){case Lib().get_text("BUILT_IN","YES").toLowerCase():return!0;case Lib().get_text("BUILT_IN","NO").toLowerCase():return!1;default:return to_bool(val)}else return to_bool(val)},cast(val){return to_bool(val)},get_JS_object(val){var _this$cast;return(_this$cast=this.cast(val))!=null?_this$cast:!1},JS_to_bubble(val){return val=this.cast(val),val===void 0&&generate_JS_to_bubble_error("boolean",val),val},convert_to_bubble_instance:to_bool,storable:!0,bindable:!1})}});var require_date=__commonJS({"lib-browser-old/core/core_btypes/plugins/date.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_symbol_description();require_es_error_cause();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_string_starts_with();require_es_array_iterator();require_web_dom_collections_iterator();function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var u=require_u2(),appquery=require_appquery(),postgres_constraints=require_postgres_constraints(),{build_simple}=require_generate_utilities(),{generate_JS_to_bubble_error,get_json_encode_msg}=require_misc_utilities(),b_date=require_b_date(),custom_tz_utilities=require_custom_tz_utilities(),{has_rounding_operator_timezone_controls_on}=require_timezone_override_settings(),mode_check=require_mode_check(),Lib=require_lib(),moment=u.require_moment();function date_rounded_down(_ref){let{date,properties,context}=_ref,tz;has_rounding_operator_timezone_controls_on()||mode_check.running_test()?tz=custom_tz_utilities.get_custom_tz({static_eval:prop=>properties[prop]}):tz=Lib().current_timezone();let m=b_date.to_moment(date,tz);return m.isValid()?m.clone().startOf(properties.component_to_extract).toDate():null}function date_equals(a,b){var _b_date$mk_date,_b_date$mk_date2;return((_b_date$mk_date=b_date.mk_date(a))==null?void 0:_b_date$mk_date.valueOf())===((_b_date$mk_date2=b_date.mk_date(b))==null?void 0:_b_date$mk_date2.valueOf())}module.exports=build_simple("date",{messages:{equals:{description:" is ",section:"Operators",ret_btype:"sys.bool",arg_btype:"date",no_composer:()=>!0,fn(a,b){return date_equals(a,b)},build_pg_constraint:postgres_constraints.equals,build_pg_r_constraint:postgres_constraints.equals,build_pg_relationship:postgres_constraints.equals_both},not_equals:{description:" is not ",section:"Operators",ret_btype:"sys.bool",arg_btype:"date",no_composer:()=>!0,fn(a,b){return!date_equals(a,b)},build_pg_constraint:postgres_constraints.not_equals,build_pg_r_constraint:postgres_constraints.not_equals,build_pg_relationship:postgres_constraints.not_equals_both},format_date:{section:"Operators",ret_btype:"text",arg_btype:null,field_names:_objectSpread({formatting_type:{default:"m/dd/yy"},custom_format:{default:"ddd, m/dd/yy, mmmm (mmm) dS, yyyy, h:MM tt, HH:MM:ss.L"}},custom_tz_utilities.custom_tz_field_names),spot_data:"SlidableAtom",description(node){var _node$property$raw;let properties={formatting_type:(_node$property$raw=node==null?void 0:node.property("formatting_type").raw())!=null?_node$property$raw:"m/dd/yy",custom_format:node==null?void 0:node.property("custom_format").raw()},rest;return properties?rest=" "+this.fn(new Date,void 0,properties):rest="...",":formatted as"+rest},fn(a,b,properties,_raw,context){let formatting_type=properties==null?void 0:properties.formatting_type;if(formatting_type==="custom"&&(formatting_type=properties.custom_format),a=b_date.mk_date(a),a){let tz=custom_tz_utilities.get_custom_tz({static_eval:prop=>properties[prop],not_overridden:!0}),tz_name;return tz&&moment.tz.zone(tz)?tz_name=tz:tz_name=moment.tz.guess(),formatting_type==="iso_date"?a.toISOString():u.format_date(a,formatting_type,Lib().get_text("BUILT_IN","DATE_FORMAT"),tz_name)}else return""}},greater_than:{description:" > ",section:"Operators",ret_btype:"sys.bool",arg_btype:"date",fn(a,b){return b_date.mk_date(a)>b_date.mk_date(b)}},less_than:{description:" < ",section:"Operators",ret_btype:"sys.bool",arg_btype:"date",fn(a,b){return b_date.mk_date(a)<b_date.mk_date(b)}},minus:{description:" - ",section:"Operators",ret_btype:"dateinterval",arg_btype:"date",fn(a,b){return b_date.mk_date(a)-b_date.mk_date(b)}},to_range:{description:"<- range ->",section:"Other Operators",arg_btype:"date",ret_btype:"date_range",fn(a,b){return a=b_date.mk_date(a),b=b_date.mk_date(b),!a||!b?[]:[b_date.mk_date(Math.min(a,b)),b_date.mk_date(Math.max(a,b))]}},max:{description:" <- max -> ",section:"Other Operators",ret_btype:"date",arg_btype:"date",fn(a,b){var _a,_a$getTime,_b,_b$getTime;return a=b_date.mk_date(a),b=b_date.mk_date(b),((_a=a)==null||(_a$getTime=_a.getTime)==null?void 0:_a$getTime.call(_a))>=((_b=b)==null||(_b$getTime=_b.getTime)==null?void 0:_b$getTime.call(_b))||!b?a:b}},min:{description:" <- min -> ",section:"Other Operators",ret_btype:"date",arg_btype:"date",fn(a,b){var _a2,_a2$getTime,_b2,_b2$getTime;return a=b_date.mk_date(a),b=b_date.mk_date(b),((_a2=a)==null||(_a2$getTime=_a2.getTime)==null?void 0:_a2$getTime.call(_a2))<=((_b2=b)==null||(_b2$getTime=_b2.getTime)==null?void 0:_b2$getTime.call(_b2))||!b?a:b}},plus_seconds:{description:"+ seconds: ",section:"Other Operators",ret_btype:"date",arg_btype:"number",fn(a,b,properties,_raw,context){return Lib().bv().date_code.plus_seconds(a,b,properties,_raw,context)}},plus_minutes:{description:"+ minutes: ",section:"Other Operators",ret_btype:"date",arg_btype:"number",fn(a,b,properties,_raw,context){return Lib().bv().date_code.plus_minutes(a,b,properties,_raw,context)}},plus_hours:{description:"+ hours: ",section:"Other Operators",ret_btype:"date",arg_btype:"number",fn(a,b,properties,_raw,context){return Lib().bv().date_code.plus_hours(a,b,properties,_raw,context)}},plus_days:{description:"+ days: ",section:"Other Operators",ret_btype:"date",arg_btype:"number",fn(a,b,properties,_raw,context){return Lib().bv().date_code.plus_days(a,b,properties,_raw,context)}},plus_months:{description:"+ months: ",section:"Other Operators",ret_btype:"date",arg_btype:"number",fn(a,b,properties,_raw,context){return Lib().bv().date_code.plus_months(a,b,properties,_raw,context)}},plus_years:{description:"+ years: ",section:"Other Operators",ret_btype:"date",arg_btype:"number",fn(a,b,properties,_raw,context){return Lib().bv().date_code.plus_years(a,b,properties,_raw,context)}},change_seconds:{description:" change seconds to ",section:"Other Operators",ret_btype:"date",arg_btype:"number",fn(a,b,properties,_raw,context){return Lib().bv().date_code.change_seconds(a,b,properties,_raw,context)}},change_minutes:{description:" change minutes to ",section:"Other Operators",ret_btype:"date",arg_btype:"number",fn(a,b,properties,_raw,context){return Lib().bv().date_code.change_minutes(a,b,properties,_raw,context)}},change_hours:{description:" change hours to ",section:"Other Operators",ret_btype:"date",arg_btype:"number",fn(a,b,properties,_raw,context){return Lib().bv().date_code.change_hours(a,b,properties,_raw,context)}},change_date:{description:" change date to ",section:"Other Operators",ret_btype:"date",arg_btype:"number",fn(a,b,properties,_raw,context){return Lib().bv().date_code.change_date(a,b,properties,_raw,context)}},change_month:{description:" change month to ",section:"Other Operators",ret_btype:"date",arg_btype:"number",fn(a,b,properties,_raw,context){return Lib().bv().date_code.change_month(a,b,properties,_raw,context)}},change_years:{description:" change years to ",section:"Other Operators",ret_btype:"date",arg_btype:"number",fn(a,b,properties,_raw,context){return Lib().bv().date_code.change_years(a,b,properties,_raw,context)}},extract_from_date:{ret_btype:"number",section:"Other Operators",field_names:_objectSpread({component_to_extract:{}},custom_tz_utilities.custom_tz_field_names),spot_data:"SlidableAtom",description(node){let component=node==null?void 0:node.property("component_to_extract"),rest;return component&&!component.is_empty()?rest=" "+component.get_static():rest="...",":extract"+rest},fn(a,b,properties,_raw,context){return Lib().bv().date_code.extract_from_date(a,b,properties,_raw,context)}},rounded_down:{ret_btype:"date",section:"Other Operators",field_names:u.extend({component_to_extract:{}},custom_tz_utilities.custom_tz_field_names),spot_data:"SlidableAtom",description(node){let component=node==null?void 0:node.property("component_to_extract"),rest;return component&&!component.is_empty()?rest=" "+component.get_static():rest="...",":rounded down to"+rest+" "},fn(a,b,properties,_raw,context){return date_rounded_down({date:a,properties,context})}},equals_rounded_down:{ret_btype:"sys.bool",section:"Other Operators",arg_btype:"date",field_names:u.extend({component_to_extract:{}},custom_tz_utilities.custom_tz_field_names),spot_data:"SlidableAtom",description(node){let component=node==null?void 0:node.property("component_to_extract"),rest;return component&&!component.is_empty()?rest=" "+component.get_static():rest="...","equals rounded down to ".concat(rest," ")},fn(a,b,properties,_raw,context){return a=date_rounded_down({date:a,properties,context}),b=date_rounded_down({date:b,properties,context}),date_equals(a,b)}},is_empty:{description:" is empty",section:"Other Operators",ret_btype:"sys.bool",build_pg_constraint:postgres_constraints.is_empty,fn(a,b){return a==null||a===""}},is_not_empty:{description:" is not empty",section:"Other Operators",ret_btype:"sys.bool",build_pg_constraint:postgres_constraints.is_not_empty,fn(a,b){return a!=null&&a!==""}},format_json_encode:get_json_encode_msg("date")},display(){return"date"},runmode_display(val,context){return u.format_date(b_date.mk_date(val),"mmm d, yyyy h:MM tt",null,Lib().current_timezone())},export_to_string(val,context){return!context.date_formatting||context.date_formatting==="spreadsheet_compatible"?u.format_date(b_date.mk_date(val),"mmm d, yyyy h:MM tt",null,Lib().current_timezone()):context.date_formatting==="universal"?b_date.mk_date(val):u.format_date(b_date.mk_date(val),context.date_formatting)},equals(a,b){var _b_date$mk_date3,_b_date$mk_date4;return((_b_date$mk_date3=b_date.mk_date(a))==null?void 0:_b_date$mk_date3.valueOf())===((_b_date$mk_date4=b_date.mk_date(b))==null?void 0:_b_date$mk_date4.valueOf())},get_sample(){return new Date},cast(val){return b_date.mk_date(val)},from_human(string,context){return string===""?this.get_bubble_null():b_date.mk_date(string,Lib().current_timezone())},get_JS_object(val){var _Lib$api_version,_Lib;return((_Lib$api_version=(_Lib=Lib()).api_version)==null?void 0:_Lib$api_version.call(_Lib))===1?val:b_date.mk_date(val)},JS_to_bubble(val){if(val==null)return this.get_bubble_null();let v=this.cast(val);return v||generate_JS_to_bubble_error("date",val),v},convert_to_bubble_instance:b_date.mk_date,can_sort:!0,storable:!0,bindable:!1,synonyms:["date_unix"]})}});var require_dateinterval=__commonJS({"lib-browser-old/core/core_btypes/plugins/dateinterval.js"(exports,module){"use strict";init_define_process_env();init_shim();var u=require_u2(),{build_simple}=require_generate_utilities(),{generate_JS_to_bubble_error}=require_misc_utilities(),b_number=require_b_number();module.exports=build_simple("dateinterval",{messages:{to_days:{description:"formatted as days",ret_btype:"number",section:"Other Operators",arg_btype:null,fn(a,b){return u.format_date_interval(a,"days")}},to_hours:{description:"formatted as hours",ret_btype:"number",section:"Other Operators",arg_btype:null,fn(a,b){return u.format_date_interval(a,"hours")}},to_minutes:{description:"formatted as minutes",ret_btype:"number",section:"Other Operators",arg_btype:null,fn(a,b){return u.format_date_interval(a,"minutes")}},to_seconds:{description:"formatted as seconds",ret_btype:"number",section:"Other Operators",arg_btype:null,fn(a,b){return u.format_date_interval(a,"seconds")}}},display(){return"date interval"},runmode_display:null,export_to_string(val){return u.print_date_interval(val)},debugging_display(val){return u.print_date_interval(val)},equals:b_number.num_equals,get_sample(){return 252e8},cast(val){return u.to_num(val)},get_JS_object(val){return this.cast(val)},JS_to_bubble(val){return val==null?this.get_bubble_null():(typeof val!="number"&&generate_JS_to_bubble_error("date interval",val),val)},storable:!0,bindable:!1})}});var require_range_utilities=__commonJS({"lib-browser-old/core/core_btypes/utilities/range_utilities.js"(exports){"use strict";init_define_process_env();init_shim();require_es_string_ends_with();require_es_symbol_description();var constraint_defs=require_constraint_defs(),btypes=require_btypes(),range_utilities=exports;range_utilities.get_array_from_range=function(a){return a==null?null:a.all?a.all():a.length===0?[]:[a[0],a[1]]};range_utilities.create_range_btype_messages=function(base_btype,to_num_fn,cast_fn){let full_btype=base_btype+"_range",m={equals:{description:" is ",ret_btype:"sys.bool",arg_btype:base_btype,no_composer:()=>!0,fn(a,b){return btypes.get(full_btype).equals(a,b)}},not_equals:{description:" is not ",ret_btype:"sys.bool",arg_btype:base_btype,no_composer:()=>!0,fn(a,b){return!btypes.get(full_btype).equals(a,b)}},min:{description:base_btype==="date"?":start":":min",ret_btype:base_btype,fn(a,b){if(a)return a=range_utilities.get_array_from_range(a),cast_fn(Math.min(to_num_fn(a[0]),to_num_fn(a[1])))}},max:{description:base_btype==="date"?":end":":max",ret_btype:base_btype,fn(a,b){if(a)return a=range_utilities.get_array_from_range(a),cast_fn(Math.max(to_num_fn(a[0]),to_num_fn(a[1])))}},average:{description:base_btype==="date"?":center":":average",ret_btype:base_btype,fn:(a,b)=>{if(a)return a=range_utilities.get_array_from_range(a),cast_fn((to_num_fn(a[0])+to_num_fn(a[1]))/2)}},is_empty:{description:" is empty",ret_btype:"sys.bool",fn(a,b){return a=range_utilities.get_array_from_range(a),a==null||a.length===0}},is_not_empty:{description:" is not empty",ret_btype:"sys.bool",fn(a,b){return a=range_utilities.get_array_from_range(a),a!=null&&a.length!==0}}},greater,smaller;base_btype==="date"?(smaller="before",greater="after"):(smaller="smaller than",greater="greater than");let range_constraints_data={range_contains:{description:" contains range "},range_contains_point:{description:" contains ".concat(base_btype," ")},range_contained_by:{description:" is contained by "},range_overlaps:{description:" overlaps with "},range_greater_than:{description:" is ".concat(greater," range ")},range_greater_than_point:{description:" is ".concat(greater," ").concat(base_btype," ")},range_less_than:{description:" is ".concat(smaller," range ")},range_less_than_point:{description:" is ".concat(smaller," ").concat(base_btype," ")}};for(let constraint_name in range_constraints_data){let constraint_data=range_constraints_data[constraint_name],is_point=constraint_name.endsWith("_point");m[constraint_name]={description:constraint_data.description,ret_btype:"sys.bool",arg_btype:is_point?base_btype:base_btype+"_range",fn:(a,b)=>{if(!a)return!1;a=range_utilities.get_array_from_range(a);function get_sorted_range(range){let x=to_num_fn(range==null?void 0:range[0]),y=to_num_fn(range==null?void 0:range[1]);return[Math.min(x,y),Math.max(x,y)]}let expected=get_sorted_range(a),actual;return is_point?actual=to_num_fn(b):(b=range_utilities.get_array_from_range(b),actual=get_sorted_range(b)),constraint_defs.all_search_constraints[constraint_name](actual,expected)}}}return m}}});var require_date_range=__commonJS({"lib-browser-old/core/core_btypes/plugins/date_range.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_json_stringify();require_es_array_sort();var u=require_u2(),{get_array_from_range,create_range_btype_messages}=require_range_utilities(),{build_simple}=require_generate_utilities(),{generate_JS_to_bubble_error}=require_misc_utilities(),Lib=require_lib(),b_date=require_b_date();function date_to_num(a){var _b_date$mk_date;return(_b_date$mk_date=b_date.mk_date(a))==null?void 0:_b_date$mk_date.getTime()}function format_for_debugging(date){return u.format_date(date,"mmm d, yyyy h:MM tt",null,Lib().current_timezone())}module.exports=build_simple("date_range",{messages:create_range_btype_messages("date",date_to_num,b_date.mk_date),display(){return"date range"},runmode_display:null,export_to_string(val){let[start,end]=this.cast(val);return JSON.stringify([format_for_debugging(start),format_for_debugging(end)])},debugging_display(val){let[start,end]=this.cast(val);return"("+format_for_debugging(start)+" -> "+format_for_debugging(end)+")"},equals(a,b){var _a,_a2,_b,_b2;a=get_array_from_range(a),b=get_array_from_range(b);let x=date_to_num(b_date.mk_date((_a=a)==null?void 0:_a[0])),y=date_to_num(b_date.mk_date((_a2=a)==null?void 0:_a2[1])),z=date_to_num(b_date.mk_date((_b=b)==null?void 0:_b[0])),t=date_to_num(b_date.mk_date((_b2=b)==null?void 0:_b2[1])),sorted_a=[x,y].sort(),sorted_b=[z,t].sort();return(sorted_a==null?void 0:sorted_a[0])===(sorted_b==null?void 0:sorted_b[0])&&(sorted_a==null?void 0:sorted_a[1])===(sorted_b==null?void 0:sorted_b[1])},get_sample(){let a=new Date,b=new Date().setDate(a.getDate()-2);return[a,b]},get_bubble_null(){return[]},cast(val){if(!val)return this.get_bubble_null();val=get_array_from_range(val);let a=date_to_num(b_date.mk_date(val[0])),b=date_to_num(b_date.mk_date(val[1]));return a==null||b==null?this.get_bubble_null():[b_date.mk_date(Math.min(a,b)),b_date.mk_date(Math.max(a,b))]},get_JS_object(val){var _Lib$api_version,_Lib;return val?((_Lib$api_version=(_Lib=Lib()).api_version)==null?void 0:_Lib$api_version.call(_Lib))===1?get_array_from_range(val):this.cast(val):null},JS_to_bubble(val){return val==null?this.get_bubble_null():((!Array.isArray(val)||b_date.mk_date(val[0])==null||b_date.mk_date(val[1])==null)&&generate_JS_to_bubble_error("date range",val),this.cast(val))},storable:!0,bindable:!1})}});var require_file=__commonJS({"lib-browser-old/core/core_btypes/plugins/file.js"(exports,module){"use strict";init_define_process_env();init_shim();var{build_simple}=require_generate_utilities(),{get_file_messages,generate_JS_to_bubble_error}=require_misc_utilities(),{COMPOSER_INPUT_TYPES}=require_composer(),b_string=require_b_string();module.exports=build_simple("file",{messages:get_file_messages("file"),display(){return"file"},equals(a,b){return a===b},get_sample(){return"file_name.png"},get_bubble_null(){return""},cast:b_string.cast_to_string,runmode_display:b_string.cast_to_string,get_JS_object(val){return val?b_string.cast_to_string(val):null},JS_to_bubble(val){return val?(typeof val!="string"&&generate_JS_to_bubble_error("file url as a string",val),val):this.get_bubble_null()},convert_to_bubble_instance:b_string.cast_to_string,composer_input_type:COMPOSER_INPUT_TYPES.TEXT,synonyms:["text","image"],storable:!0,bindable:!1,can_sort:!0})}});var require_geographic_address=__commonJS({"lib-browser-old/core/core_btypes/plugins/geographic_address.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_regexp_exec();require_es_string_replace();var u=require_u2(),mode_check=require_mode_check(),geolocation_consts=require_geolocation(),{build_simple}=require_generate_utilities(),{generate_JS_to_bubble_error}=require_misc_utilities(),Lib=require_lib(),b_location=require_b_location(),b_location_utils=require_b_location_utils(),location_lookups=require_location_lookups(),{COMPOSER_INPUT_TYPES}=require_composer(),empty_geo_address=null;function get_formatted_address(a){return a=b_location.ensure_valid_location(a),a?b_location.get_address(a):empty_geo_address}function get_latitude(a){return a=b_location.ensure_valid_location(a),a?a.lat:empty_geo_address}function get_longitude(a){return a=b_location.ensure_valid_location(a),a?a.lng:empty_geo_address}module.exports=build_simple("geographic_address",{display(){return"geographic address"},equals(a,b){return a===b||b_location.is_equal(a,b)},get_bubble_null(){return empty_geo_address},messages:{formatted_address:{description:"'s formatted address",section:"Operators",ret_btype:"text",fn:get_formatted_address},google_map_link:{description:"'s link to Google Maps",section:"Operators",ret_btype:"text",fn(a,b){if(a=b_location.ensure_valid_location(a),!a)return empty_geo_address;let BASE_MAPS_PLACE_URL="https://www.google.com/maps/place";if(a.placeId!=null)return"".concat(BASE_MAPS_PLACE_URL,"/?q=place_id:").concat(a.placeId);let coordinates="".concat(a.lat,",").concat(a.lng);if(a.address!=null){let address=a.address.split(" ").join("+").replace(",","");return"".concat(BASE_MAPS_PLACE_URL,"/").concat(address,"/@").concat(coordinates,",15z")}else return"".concat(BASE_MAPS_PLACE_URL,"/").concat(coordinates)}},distance_from:{ret_btype:"number",section:"Operators",arg_btype:null,field_names:{origin_address:{},unit:{default:"miles"}},spot_data:"SlidableAtom",description(node){let rest,origin_address=node==null?void 0:node.property("origin_address");return origin_address&&!origin_address.is_empty()?rest=" "+origin_address.get_tree_display():rest="..."," distance from"+rest},fn(a,b,properties){if(a=b_location.ensure_valid_location(a),!a||(properties.origin_address=b_location.ensure_valid_location(properties.origin_address),!properties.origin_address))return empty_geo_address;let origin_address_coordinates={lat:properties.origin_address.lat,lng:properties.origin_address.lng},actual_coordinates={lat:a.lat,lng:a.lng};return!a||!properties.origin_address?empty_geo_address:b_location_utils.geographic_distance(actual_coordinates,origin_address_coordinates,properties.unit)}},equals:{description:" is ",section:"Operators",ret_btype:"sys.bool",arg_btype:"text",fn(a,b){return b_location.is_equal(a,b)}},not_equals:{description:" is not ",section:"Operators",ret_btype:"sys.bool",arg_btype:"text",fn(a,b){return!b_location.is_equal(a,b)}},extract_from_address:{ret_btype:"text",section:"Other Operators",arg_btype:null,field_names:{component_to_extract:{}},spot_data:"SlidableAtom",description(node){let rest,component=node==null?void 0:node.property("component_to_extract");return component&&!component.is_empty()?rest=" "+component.get_static():rest="...",":extract"+rest},fn(a,b,properties){var _components$propertie;if(a=b_location.ensure_valid_location(a),!a)return empty_geo_address;let components=b_location.get_components(a);return(_components$propertie=components==null?void 0:components[properties.component_to_extract])!=null?_components$propertie:""}},latitude:{description:"'s latitude",section:"Other Operators",ret_btype:"number",fn:get_latitude},longitude:{description:"'s longitude",section:"Other Operators",ret_btype:"number",fn:get_longitude},timezone:{description:"'s time zone ID",section:"Other Operators",ret_btype:"text",fn(a,b){var _location_lookups$get;return a?((_location_lookups$get=location_lookups.get_timezone_for_location(a))==null?void 0:_location_lookups$get.timeZoneId)||"":empty_geo_address}},timezone_name:{description:"'s time zone name",section:"Other Operators",ret_btype:"text",fn(a,b){var _location_lookups$get2;return a=b_location.ensure_valid_location(a),a?((_location_lookups$get2=location_lookups.get_timezone_for_location(a))==null?void 0:_location_lookups$get2.timeZoneName)||"":empty_geo_address}},daysaving_offset:{description:"'s daylight saving time offset",section:"Other Operators",ret_btype:"number",fn(a,b){var _location_lookups$get3;return a=b_location.ensure_valid_location(a),a?(_location_lookups$get3=location_lookups.get_timezone_for_location(a))==null?void 0:_location_lookups$get3.dstOffset:empty_geo_address}},raw_offset:{description:"'s offset from UTC",section:"Other Operators",ret_btype:"number",fn(a,b){var _location_lookups$get4;if(a=b_location.ensure_valid_location(a),!a)return empty_geo_address;let r=(_location_lookups$get4=location_lookups.get_timezone_for_location(a))==null?void 0:_location_lookups$get4.rawOffset;return r?r/60:empty_geo_address}},is_empty:{description:" is empty",section:"Other Operators",ret_btype:"sys.bool",fn(a,b){return a==null||a===""}},is_not_empty:{description:" is not empty",section:"Other Operators",ret_btype:"sys.bool",fn(a,b){return a!=null&&a!==""}}},cast(val){var _val;return((_val=val)==null?void 0:_val.raw)!=null&&(val=val.raw()),typeof val=="function"&&(val=val()),b_location.from_address(val)},runmode_display(val){if(val){var _val2;return((_val2=val)==null?void 0:_val2.raw)!=null&&(val=val.raw()),b_location.get_address(val)}else return""},get_JS_object(val){var _Lib$api_version,_Lib;return val?((_Lib$api_version=(_Lib=Lib()).api_version)==null?void 0:_Lib$api_version.call(_Lib))===1?b_location.convert_to_old_format(val):{address:get_formatted_address(val),lat:get_latitude(val),lng:get_longitude(val)}:null},JS_to_bubble(val){if(val==null)return this.get_bubble_null();let r;if(typeof val=="string")r=()=>b_location.from_address(val);else if(typeof val=="object"){if(typeof val.address=="string")r=()=>b_location.from_address(val.address);else if(typeof val.lat=="number"&&typeof val.lng=="number"){if(u.to_num(val.lat)==null||u.to_num(val.lng)==null)return this.get_bubble_nul();r=()=>b_location.from_address({lat:val.lat,lng:val.lng})}else if(val.lat==null||val.lng==null)return this.get_bubble_null()}return r!=null?mode_check.on_server()?r():r:generate_JS_to_bubble_error("geographic address as either a string or an object with lat and lng",val)},get_sample(){return geolocation_consts.SAMPLE_VALUE},synonyms:["text"],composer_input_type:COMPOSER_INPUT_TYPES.GEOGRAPHIC_ADDRESS,can_sort:!1,storable:!0,bindable:!1})}});var require_image=__commonJS({"lib-browser-old/core/core_btypes/plugins/image.js"(exports,module){"use strict";init_define_process_env();init_shim();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_symbol_description();require_es_error_cause();function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var u=require_u2(),{build_simple}=require_generate_utilities(),{get_file_messages,generate_JS_to_bubble_error}=require_misc_utilities(),b_string=require_b_string(),Lib=require_lib(),imgix=require_imgix(),{COMPOSER_INPUT_TYPES}=require_composer();module.exports=build_simple("image",{messages:_objectSpread(_objectSpread({},get_file_messages("file")),{},{imgix_treatment:{ret_btype:"image",arg_btype:null,field_names:{auto_enhance:{},q:{default:75,optional:!0},fm:{optional:!0},extract_face:{default:!1},facepad:{default:!1},crop_to_fit:{default:!1},red_eye:{default:!1},blur:{default:!1},blur_level:{default:100},mask:{default:!1},pixel:{default:!1},pixel_level:{default:10},sepia:{default:!1},sepia_level:{default:50},mono:{default:!1},mono_level:{default:"#3498db"}},spot_data:"SlidableAtom",description(node){return":processed with Imgix"},fn(a,b,properties){return!a||typeof a!="string"?this.ret_btype_null():imgix.ignore_imgix_fn(a)?a:imgix.add_processing_options(a,properties)}}}),display(){return"image"},equals(a,b){return a===b},get_sample(){return"image_name.png"},get_bubble_null(){return""},cast:b_string.cast_to_string,runmode_display:b_string.cast_to_string,export_to_string(val,context){return!context.always_return_text&&val?u.img("img-preview",void 0,context.optimize_image(val,30,30)):b_string.cast_to_string(val)},get_JS_object(val){return val?b_string.cast_to_string(val):null},JS_to_bubble(val){return val==null?this.get_bubble_null():(typeof val!="string"&&generate_JS_to_bubble_error("image url as a string",val),val)},convert_to_bubble_instance:b_string.cast_to_string,composer_input_type:COMPOSER_INPUT_TYPES.TEXT,synonyms:["text"],storable:!0,bindable:!1})}});var require_key_combination=__commonJS({"lib-browser-old/core/core_btypes/plugins/key_combination.js"(exports,module){"use strict";init_define_process_env();init_shim();var{build_simple}=require_generate_utilities(),b_string=require_b_string(),{COMPOSER_INPUT_TYPES}=require_composer();module.exports=build_simple("key_combination",{messages:{equals:{description:" is ",ret_btype:"sys.bool",arg_btype:"text",fn(a,b){return a===b}}},display(){return"keyboard shortcut"},equals(a,b){return a===b},cast:b_string.cast_to_string,runmode_display:b_string.cast_to_string,get_sample(){return"Shift"},composer_input_type:COMPOSER_INPUT_TYPES.KEY_COMBINATION,synonyms:["text"]})}});var require_null=__commonJS({"lib-browser-old/core/core_btypes/plugins/null.js"(exports,module){"use strict";init_define_process_env();init_shim();var{build_simple}=require_generate_utilities();module.exports=build_simple("null",{messages:{},runmode_display:null,export_to_string(val){return""},debugging_display(val){return"(null)"},get_sample(){return null},equals(a,b){return a!=null==(b!=null)},cast(val){return val},display(){return""},get_JS_object(val){return null},JS_to_bubble(val){return null},storable:!1,bindable:!1,convert_to_bubble_instance(){return null}})}});var require_number_range=__commonJS({"lib-browser-old/core/core_btypes/plugins/number_range.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_json_stringify();require_es_array_sort();var u=require_u2(),{build_simple}=require_generate_utilities(),{generate_JS_to_bubble_error}=require_misc_utilities(),{get_array_from_range,create_range_btype_messages}=require_range_utilities();module.exports=build_simple("number_range",{messages:create_range_btype_messages("number",u.to_num,x=>x),display(){return"numeric range"},runmode_display:null,export_to_string(val){return JSON.stringify(this.cast(val))},debugging_display(val){return JSON.stringify(this.cast(val))},equals(a,b){var _a,_a$sort,_b,_b$sort;a=get_array_from_range(a),b=get_array_from_range(b);let sorted_a=(_a=a)==null||(_a$sort=_a.sort)==null?void 0:_a$sort.call(_a),sorted_b=(_b=b)==null||(_b$sort=_b.sort)==null?void 0:_b$sort.call(_b);return(sorted_a==null?void 0:sorted_a[0])===(sorted_b==null?void 0:sorted_b[0])&&(sorted_a==null?void 0:sorted_a[1])===(sorted_b==null?void 0:sorted_b[1])},get_sample(){return[1,30]},get_bubble_null(){return[]},cast(val){if(!val)return this.get_bubble_null();val=get_array_from_range(val);let a=u.to_num(val[0]),b=u.to_num(val[1]);return a==null||b==null?this.get_bubble_null():[Math.min(a,b),Math.max(a,b)]},get_JS_object(val){return val?this.cast(val):null},JS_to_bubble(val){return val?((!Array.isArray(val)||typeof val[0]!="number"||typeof val[1]!="number")&&generate_JS_to_bubble_error("number range",val),this.cast(val)):this.get_bubble_null()},storable:!0,bindable:!1})}});var require_currency=__commonJS({"lib-browser-old/constants/currency.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.legacy_currency_symbols=exports.currency_symbols=void 0;require_es_array_iterator();require_web_dom_collections_iterator();require_es_object_values();var legacy_currency_symbols={dollar:"$",euro:"\u20AC",pound:"\xA3",yen:"\xA5",rand:"R",naira:"\u20A6",won:"\u20A9",peso:"\u20B1",bgn:"\u041B\u0432"};exports.legacy_currency_symbols=legacy_currency_symbols;var suffix_currency_symbols=["\u0631.\u0633","\u062F.\u0625"],currency_symbols=[...Object.values(legacy_currency_symbols),...suffix_currency_symbols,"kr","\u20B9"];exports.currency_symbols=currency_symbols}});var require_numeric_format_utilities=__commonJS({"lib-browser-old/core/core_btypes/utilities/numeric_format_utilities.js"(exports){"use strict";init_define_process_env();init_shim();var currency_consts=require_currency(),Lib=require_lib(),safe_require=require_safe_require(),numeric_format_utilities=exports;safe_require.safe_register("./core/core_btypes/utilities/numeric_format_utilities",numeric_format_utilities);numeric_format_utilities.thousand_separators={comma:",",space:"Space",dot:"."};numeric_format_utilities.decimal_separators={point:".",comma:","};numeric_format_utilities.format_number_names={formatting_type:{default:"number",no_states:!0},decimal_place:{},decimal_separator:{default:"point"},thousand_separator:{},currency_symbol:{},negative_parenthese:{}}}});var require_number=__commonJS({"lib-browser-old/core/core_btypes/plugins/number.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_number_to_fixed();require_es_regexp_exec();require_es_string_replace();require_es_string_split();var u=require_u2(),currency_consts=require_currency(),postgres_constraints=require_postgres_constraints(),Lib=require_lib(),{format_number_names,format_number_fields,thousand_separators,decimal_separators}=require_numeric_format_utilities(),{build_simple}=require_generate_utilities(),{generate_JS_to_bubble_error}=require_misc_utilities(),b_number=require_b_number(),{COMPOSER_INPUT_TYPES}=require_composer(),node_eval=require_node_eval(),MAX_PRECISION=30,MIN_PRECISION=-30,MAX_NUMBER=1e30;function round(input_number,to_digits){let effective_input_number=Math.min(MAX_NUMBER,Math.max(-MAX_NUMBER,input_number)),effective_to_digits=Math.min(MAX_PRECISION,Math.max(MIN_PRECISION,to_digits));return Math.round(effective_input_number*Math.pow(10,effective_to_digits))/Math.pow(10,effective_to_digits)}module.exports=build_simple("number",{messages:{format_number:{ret_btype:"text",fn(a,b,properties){if(a=u.to_num(a),a==null)return this.ret_btype_null();let get_property=name=>properties[name];get_property("formatting_type")==="percentage"&&(a=a*100);let do_neg_parens=get_property("negative_parenthese")&&a<0,a_with_correct_sign=do_neg_parens?Math.abs(a):a,decimal_places=get_property("decimal_place"),formatted_a;decimal_places!=null?(decimal_places=Math.max(Math.min(decimal_places,100),0),formatted_a=a_with_correct_sign.toFixed(decimal_places)):formatted_a=u.dec_to_string(a_with_correct_sign);let decimal_separator=decimal_separators[get_property("decimal_separator")];if(formatted_a=formatted_a.replace(".",decimal_separator),get_property("thousand_separator")){let separator=thousand_separators[get_property("thousand_separator")];separator==="Space"&&(separator=" ");let splitted=formatted_a.split(decimal_separator);splitted[0]=u.add_thousand_sep(splitted[0],separator),formatted_a=splitted.join(decimal_separator)}if(get_property("formatting_type")==="percentage"&&(formatted_a=formatted_a+"%"),do_neg_parens&&(formatted_a="("+formatted_a+")"),get_property("formatting_type")==="currency"&&get_property("currency_symbol")){let symbol=get_property("currency_symbol"),override=currency_consts.legacy_currency_symbols[symbol];override&&(symbol=override),a<0&&!do_neg_parens?formatted_a="-"+symbol+formatted_a.replace("-",""):formatted_a=symbol+formatted_a}return formatted_a},spot_data:"SlidableAtom",description(node){let rest,properties=node_eval.evaluate_properties(node);return properties?rest=" "+this.fn("1028.58",void 0,properties):rest="...",":formatted as"+rest},field_names:format_number_names},equals:{description:" is ",section:"Operators",ret_btype:"sys.bool",arg_btype:"number",fn(a,b){return b_number.num_equals(a,b)},build_pg_constraint:postgres_constraints.equals,build_pg_r_constraint:postgres_constraints.equals,build_pg_relationship:postgres_constraints.equals_both},not_equals:{description:" is not ",section:"Operators",ret_btype:"sys.bool",arg_btype:"number",fn(a,b){return!b_number.num_equals(a,b)},build_pg_constraint:postgres_constraints.not_equals,build_pg_r_constraint:postgres_constraints.not_equals,build_pg_relationship:postgres_constraints.not_equals_both},greater_than:{description:" > ",section:"Operators",ret_btype:"sys.bool",arg_btype:"number",fn(a,b){return!b_number.num_equals(a,b)&&u.to_num(a)>u.to_num(b)}},greater_or_equal_than:{section:"Operators",description:" \u2265 ",ret_btype:"sys.bool",arg_btype:"number",fn(a,b){return b_number.num_equals(a,b)||u.to_num(a)>=u.to_num(b)}},less_than:{section:"Operators",description:" < ",ret_btype:"sys.bool",arg_btype:"number",fn(a,b){return!b_number.num_equals(a,b)&&u.to_num(a)<u.to_num(b)}},less_or_equal_than:{section:"Operators",description:" \u2264 ",ret_btype:"sys.bool",arg_btype:"number",fn(a,b){return b_number.num_equals(a,b)||u.to_num(a)<=u.to_num(b)}},plus:{description:" + ",section:"Operators",ret_btype:"number",arg_btype:"number",fn(a,b){return u.to_num(u.to_num(a)+u.to_num(b))}},minus:{description:" - ",section:"Operators",ret_btype:"number",arg_btype:"number",fn(a,b){return u.to_num(u.to_num(a)-u.to_num(b))}},times:{description:" * ",section:"Operators",ret_btype:"number",arg_btype:"number",fn(a,b){return u.to_num(u.to_num(a)*u.to_num(b))}},divide:{description:" / ",section:"Operators",ret_btype:"number",arg_btype:"number",fn(a,b){return u.to_num(u.to_num(a)/u.to_num(b))}},power:{description:" ^ ",section:"Operators",ret_btype:"number",arg_btype:"number",fn(a,b){return u.to_num(Math.pow(u.to_num(a),u.to_num(b)))}},round:{description:"rounded to ",section:"Operators",ret_btype:"number",arg_btype:"number",fn(a,b){return u.to_num(round(u.to_num(a),u.to_num(b)))},editor:{static:!0,default:1}},floor:{description:":floor ",section:"Operators",ret_btype:"number",fn(a,b){return Math.floor(u.to_num(a))}},ceil:{description:":ceiling ",section:"Operators",ret_btype:"number",fn(a,b){return Math.ceil(u.to_num(a))}},to_range:{description:"<- range ->",section:"Other Operators",arg_btype:"number",ret_btype:"number_range",fn(a,b){return a=u.to_num(a),b=u.to_num(b),a==null||b==null?[]:[Math.min(a,b),Math.max(a,b)]}},max:{description:" <- max -> ",section:"Other Operators",ret_btype:"number",arg_btype:"number",fn(a,b){return Math.max(u.to_num(a),u.to_num(b))}},min:{description:" <- min -> ",section:"Other Operators",ret_btype:"number",arg_btype:"number",fn(a,b){return Math.min(u.to_num(a),u.to_num(b))}},modulo:{description:" <- modulo -> ",section:"Other Operators",ret_btype:"number",arg_btype:"number",fn(a,b){return u.to_num(u.to_num(a)%u.to_num(b))}},is_empty:{description:" is empty",section:"Other Operators",ret_btype:"sys.bool",build_pg_constraint:postgres_constraints.is_empty,fn(a,b){return a==null||a===""}},is_not_empty:{description:" is not empty",section:"Other Operators",ret_btype:"sys.bool",build_pg_constraint:postgres_constraints.is_not_empty,fn(a,b){return a!=null&&a!==""}}},composer_input_type:COMPOSER_INPUT_TYPES.NUMBER,display(){return"number"},runmode_display(val){return val=u.to_num(val),val===null?"":Lib().locale().format_decimal(val)},export_to_string(val,context){return context.preserve_numbers?val:(val=u.to_num(val),val===null?"":Lib().locale().format_decimal(val))},equals:b_number.num_equals,get_sample(){return 42},cast(val){return u.to_num(val)},get_JS_object(val){return u.to_num(val)},JS_to_bubble(val){if(val==null)return this.get_bubble_null();let cast_val=u.to_num(val);return typeof cast_val!="number"&&generate_JS_to_bubble_error("number",val),cast_val},convert_to_bubble_instance:u.to_num,can_sort:!0,storable:!0,bindable:!1})}});var require_text=__commonJS({"lib-browser-old/core/core_btypes/plugins/text.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_includes();require_es_string_includes();require_es_regexp_to_string();require_es_regexp_exec();require_es_string_replace();require_es_string_trim();require_es_string_split();require_es_regexp_constructor();require_es_regexp_dot_all();require_es_string_match();var u=require_u2(),Lib=require_lib(),btypes=require_btypes(),btype_ids=require_btype_ids(),mode_check=require_mode_check(),input_mask=require_input_mask(),postgres_constraints=require_postgres_constraints(),{build_simple}=require_generate_utilities(),{generate_JS_to_bubble_error,get_json_encode_msg}=require_misc_utilities(),b_string=require_b_string(),{COMPOSER_INPUT_TYPES}=require_composer(),crypto,safe_regex;if(mode_check.on_server()){let r=__require;crypto=r("crypto"),safe_regex=r("../../../server/utility/safe_regex")}module.exports=build_simple("text",{messages:{equals:{description:" is ",section:"Operators",ret_btype:"sys.bool",arg_btype:"text",fn(a,b){return a===b},build_pg_constraint:postgres_constraints.equals,build_pg_r_constraint:postgres_constraints.equals,build_pg_relationship:postgres_constraints.equals_both},not_equals:{description:" is not ",section:"Operators",ret_btype:"sys.bool",arg_btype:"text",fn(a,b){return a!==b},build_pg_constraint:postgres_constraints.not_equals,build_pg_r_constraint:postgres_constraints.not_equals,build_pg_relationship:postgres_constraints.not_equals_both},contains:{description:" contains ",section:"Operators",ret_btype:"sys.bool",arg_btype:"text",fn(a,b){var _a$includes,_a$includes2;return(_a$includes=a==null||(_a$includes2=a.includes)==null?void 0:_a$includes2.call(a,b))!=null?_a$includes:!1}},not_contains:{description:" doesn't contain ",ret_btype:"sys.bool",section:"Operators",arg_btype:"text",fn(a,b){var _a$includes3,_a$includes4;return(_a$includes3=!(a!=null&&(_a$includes4=a.includes)!=null&&_a$includes4.call(a,b)))!=null?_a$includes3:!0}},is_empty:{description:" is empty",section:"Operators",ret_btype:"sys.bool",build_pg_constraint:postgres_constraints.is_empty,fn(a){return a==null||a===""}},is_not_empty:{description:" is not empty",section:"Operators",ret_btype:"sys.bool",build_pg_constraint:postgres_constraints.is_not_empty,fn(a,b){return a!=null&&a!==""}},to_capitalized_words:{description:":capitalized words",section:"Other Operators",ret_btype:"text",fn(a){var _u$toTitleCase$toStri,_u$toTitleCase;return(_u$toTitleCase$toStri=(_u$toTitleCase=u.toTitleCase(a,!0))==null?void 0:_u$toTitleCase.toString())!=null?_u$toTitleCase$toStri:this.ret_btype_null()}},to_uppercase:{description:":uppercase",section:"Other Operators",ret_btype:"text",fn(a){var _a$toUpperCase,_a$toUpperCase2;return(_a$toUpperCase=a==null||(_a$toUpperCase2=a.toUpperCase)==null?void 0:_a$toUpperCase2.call(a))!=null?_a$toUpperCase:this.ret_btype_null()}},to_lowercase:{description:":lowercase",section:"Other Operators",ret_btype:"text",fn(a){var _a$toLowerCase,_a$toLowerCase2;return(_a$toLowerCase=a==null||(_a$toLowerCase2=a.toLowerCase)==null?void 0:_a$toLowerCase2.call(a))!=null?_a$toLowerCase:this.ret_btype_null()}},format_text:{section:"Other Operators",ret_btype:"text",field_names:{formatting_type:{},replace_space:{default:!0},hmac_key:{},encode_b64:{}},spot_data:"SlidableAtom",description(node){let formatting_type=node==null?void 0:node.get_static_property("formatting_type"),rest;if(formatting_type!=null)switch(formatting_type){case"url_encode":rest=" URL";break;case"md5_hash":rest=" MD5 hash";break;case"hmac":rest=" HMAC SHA256 digest";break;case"hmac_sha1":rest=" HMAC SHA1 digest";break;default:rest=" "+input_mask.masks[formatting_type].caption}else rest="...";return":formatted as"+rest},fn(a,b,properties){let{formatting_type}=properties;if(a==null)return this.ret_btype_null();if(formatting_type==="us_phone"){let first_digit;if(a.length===11?(first_digit=a[0],a=a.slice(1)):first_digit=null,a.length===10){let res="("+a.slice(0,3)+") "+a.slice(3,6)+"-"+a.slice(6);return first_digit&&(res=first_digit+" "+res),res}else return a}else{if(formatting_type==="us_ssn")return a.length===9?a.slice(0,3)+"-"+a.slice(3,5)+"-"+a.slice(5):a;if(formatting_type==="url_encode")return properties.replace_space?encodeURIComponent(a.replace(/\s/g,"+")):encodeURIComponent(a);if(formatting_type==="md5_hash")return u.digest(a);if(["hmac","hmac_sha1"].includes(formatting_type)){let algo;if(!mode_check.on_server())return"HMAC Digest computation on the client";if(!properties.hmac_key)return"HMAC Secret missing";formatting_type==="hmac"?algo="SHA256":algo="SHA1";let hmac=crypto.createHmac(algo,properties.hmac_key).update(a);return properties.encode_b64?hmac.digest("base64"):hmac.digest("hex")}else return"unrecognized format type: "+formatting_type}}},use_text_as:{section:"Other Operators",ret_btype(_raw){var _raw2,_raw$P$data_type,_raw$P;return(_raw2=_raw)!=null||(_raw={}),(_raw$P$data_type=(_raw$P=_raw["%p"])==null?void 0:_raw$P.data_type)!=null?_raw$P$data_type:"text"},field_names:{data_type:{}},spot_data:"SlidableAtom",description(node){let rest,data_type=node==null?void 0:node.get_static_property("data_type");if(data_type!=null)switch(data_type){case"file":rest=" a file";break;case"image":rest=" an image";break;default:rest=" [invalid type]"}else rest="...";return":used as"+rest},fn(a,b,properties){var _btypes$get$cast,_btypes$get;return(_btypes$get$cast=(_btypes$get=btypes.get(properties.data_type))==null?void 0:_btypes$get.cast(a))!=null?_btypes$get$cast:a}},trimmed:{description:":trimmed",section:"Other Operators",ret_btype:"text",arg_btype:null,fn(a,b){var _a$trim,_a$trim2;return(_a$trim=a==null||(_a$trim2=a.trim)==null?void 0:_a$trim2.call(a))!=null?_a$trim:this.ret_btype_null()}},length:{description:":number of characters",section:"Other Operators",ret_btype:"number",arg_btype:null,fn(a,b){return a?a.length:0}},extract_from_text:{ret_btype:"text",section:"Other Operators",field_names:{text_type:{},component_to_extract:{}},spot_data:"SlidableAtom",description(node){let rest,component=node==null?void 0:node.property("component_to_extract");return component&&!component.is_empty()?rest=" "+component.get_static():rest="...",":extract"+rest},fn(a,b,properties){if(!a)return this.ret_btype_null();switch(properties.text_type){case"email":if(u.is_email(a))switch(properties.component_to_extract){case"domain":return a.split("@")[1];case"alias":return a.split("@")[0];case"top domain":{let splitted=a.split("@")[1].split("."),{length}=splitted;return splitted[length-2]+"."+splitted[length-1]}}else return this.ret_btype_null();break;default:return this.ret_btype_null()}}},convert_to_number:{description:":converted to number",section:"Other Operators",ret_btype:"number",arg_btype:null,fn(a){var _Lib$browser_locale;let invalid_removed=u.remove_invalid_from_num(b_string.cast_to_string(a)),parsed_float=((_Lib$browser_locale=Lib().browser_locale())!=null?_Lib$browser_locale:Lib().locale()).parse_float(invalid_removed);return u.to_num(parsed_float)}},split_by:{ret_btype:btype_ids.list_type("text"),section:"Other Operators",field_names:{separator:{}},spot_data:"SlidableAtom",description(node){let preview,separator=node==null?void 0:node.property("separator").get_tree_display();return separator?separator.length>5?preview=" (".concat(separator.slice(0,5),"\u2026)"):preview=" (".concat(separator,")"):preview="...",":split by"+preview},fn(a,b,properties){if(!a||a.split==null)return Lib().db_instance().static_list("text",[]);let{separator}=properties;return[void 0,null,""].includes(separator)?Lib().db_instance().static_list("text",a.split("\n")):Lib().db_instance().static_list("text",a.split(separator))}},find_replace:{ret_btype:"text",section:"Other Operators",field_names:{find:{},use_regex:{default:!1},replace:{optional:!0}},spot_data:"SlidableAtom",description:":find & replace",fn(a,b,properties){var _properties$replace;if(!a||a.split==null)return this.ret_btype_null();let{find}=properties;if([void 0,null,""].includes(find))return a;let replace=(_properties$replace=properties.replace)!=null?_properties$replace:"";if(properties.use_regex){let regex;try{regex=new RegExp(find,"g")}catch(err){throw new u.OwnerError("Bad regex format",{display:"Bad Regex format: "+err.message})}return mode_check.on_server()?safe_regex.replace({regex_string:find,string:a,replace_with:replace}):a.replace(regex,replace)}else return a.split(find).join(replace)}},extract_regex:{ret_btype:btype_ids.list_type("text"),section:"Other Operators",field_names:{regex:{}},spot_data:"SlidableAtom",description:":extract with Regex",fn(a,b,properties){if(!a||typeof a!="string"||[void 0,null,""].includes(properties.regex))return Lib().db_instance().static_list("text",[]);let regex;try{regex=new RegExp(properties.regex,"g")}catch(err){throw new u.OwnerError("Bad regex format",{display:"Bad Regex format: "+err.message})}let matches=mode_check.on_server()?safe_regex.match({regex_string:properties.regex,string:a}):a.match(regex);return Lib().db_instance().static_list("text",matches)}},append:{description:"append",section:"Other Operators",ret_btype:"text",arg_btype:"text",fn(a,b){return[a,b].map(s=>b_string.cast_to_string(s)).join("")}},defaulting_to:{description:"defaulting to ",section:"Other Operators",ret_btype:"text",arg_btype:"text",fn(a,b){return a||(b!=null?b:"")}},truncated:{description:"truncated to ",section:"Other Operators",ret_btype:"text",arg_btype:"number",fn(a,b){return typeof a!="string"?this.ret_btype_null():b?a.slice(0,u.to_num(b)):a}},truncated_right:{description:"truncated from end to ",section:"Other Operators",ret_btype:"text",arg_btype:"number",fn(a,b){if(typeof a!="string")return this.ret_btype_null();if(b){let start=a.length-u.to_num(b);return start<0&&(start=0),a.slice(start)}else return a}},format_json_encode:get_json_encode_msg("text")},display(){return"text"},equals(a,b){return a===b},get_sample(){return"Lorem ipsum..."},get_bubble_null(){return""},cast:b_string.cast_to_string,runmode_display:b_string.cast_to_string,export_to_string:b_string.cast_to_string,debugging_display:b_string.cast_to_string,get_JS_object(val){return val?b_string.cast_to_string(val):null},JS_to_bubble(val){return val==null?this.get_bubble_null():(typeof val!="string"&&generate_JS_to_bubble_error("string",val),val)},can_sort:!0,composer_input_type:COMPOSER_INPUT_TYPES.TEXT,convert_to_bubble_instance:b_string.cast_to_string,storable:!0,bindable:!1})}});var require_user=__commonJS({"lib-browser-old/core/core_btypes/plugins/user.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_includes();require_es_array_iterator();require_web_dom_collections_iterator();var u=require_u2(),b_fiber=require_b_fiber(),appquery=require_appquery(),services=require_services(),external=require_external(),services_editor_utils=require_editor_utils(),db_consts=require_db(),{create_custom_btype}=require_generate_utilities();function user_remove_messages(){return["Created By"]}function user_additional_messages(){let high_priority_messages=["email"],additional_messages={email:{description:"'s email",section:"Data Fields",ret_btype:"text",public_for_plugins:!0,fn(a,b){if(a){var _a$get_email,_a$get_email2;return(_a$get_email=(_a$get_email2=a.get_email)==null?void 0:_a$get_email2.call(a))!=null?_a$get_email:""}else return""}},logged_in:{description(node,options){var _options,_node$parent_expressi,_node$parent_expressi2,_node$parent_expressi3,_parent_node$type,_parent_node$json,_parent_node$json$raw,_parent_node$json$raw2;(_options=options)!=null||(options={});let{parent_node}=options,check_node_before_when_selection_made=(node==null||(_node$parent_expressi=node.parent_expression)==null||(_node$parent_expressi2=(_node$parent_expressi3=_node$parent_expressi.call(node)).type)==null?void 0:_node$parent_expressi2.call(_node$parent_expressi3))==="CurrentUser",check_node_before_in_dropdown_outside_privacy_rules=(parent_node==null||(_parent_node$type=parent_node.type)==null?void 0:_parent_node$type.call(parent_node))==="CurrentUser",privacy_rule_expression_root=parent_node==null||(_parent_node$json=parent_node.json)==null||(_parent_node$json$raw=_parent_node$json.raw)==null||(_parent_node$json$raw2=_parent_node$json$raw.call(_parent_node$json))==null?void 0:_parent_node$json$raw2.condition,check_node_before_in_dropdown_in_privacy_rules=!1;return privacy_rule_expression_root&&(privacy_rule_expression_root.next!=null?check_node_before_in_dropdown_in_privacy_rules=get_last_node_in_privacy_rule(privacy_rule_expression_root)==="CurrentUser":check_node_before_in_dropdown_in_privacy_rules=privacy_rule_expression_root.type==="CurrentUser"),check_node_before_when_selection_made||check_node_before_in_dropdown_outside_privacy_rules||check_node_before_in_dropdown_in_privacy_rules?" is logged in":" has an account"},section:"Other Operators",ret_btype:"sys.bool",fn(a,b){if(a){var _a$is_logged_in;return(_a$is_logged_in=a.is_logged_in)==null?void 0:_a$is_logged_in.call(a)}else return this.ret_btype_null()},is_lookup:"user_signed_up"},not_logged_in:{description(node,options){var _options2,_node$parent_expressi4,_node$parent_expressi5,_node$parent_expressi6,_parent_node$type2;(_options2=options)!=null||(options={});let{parent_node}=options,check_node_before_when_selection_made=(node==null||(_node$parent_expressi4=node.parent_expression)==null||(_node$parent_expressi5=(_node$parent_expressi6=_node$parent_expressi4.call(node)).type)==null?void 0:_node$parent_expressi5.call(_node$parent_expressi6))==="CurrentUser",check_node_before_in_dropdown_outside_privacy_rules=(parent_node==null||(_parent_node$type2=parent_node.type)==null?void 0:_parent_node$type2.call(parent_node))==="CurrentUser";return check_node_before_when_selection_made||check_node_before_in_dropdown_outside_privacy_rules?" is logged out":" doesn't have an account"},section:"Other Operators",ret_btype:"sys.bool",fn(a,b){if(a){var _a$is_logged_in2;return!((_a$is_logged_in2=a.is_logged_in)!=null&&_a$is_logged_in2.call(a))}else return this.ret_btype_null()}}};function get_last_node_in_privacy_rule(top_node){var _node_iterator$args,_node_iterator$args2;let node_iterator=top_node;for(;node_iterator.next!=null;)node_iterator=node_iterator.next;return((_node_iterator$args=node_iterator.args)==null?void 0:_node_iterator$args.next)!=null?get_last_node_in_privacy_rule(node_iterator.args):((_node_iterator$args2=node_iterator.args)==null?void 0:_node_iterator$args2.type)!=null?node_iterator.args.type:null}function add_oauth_message(call_name,call,hidden){var _ref,_call$fields;additional_messages[call_name]={ret_btype:call.get_value_id(),hidden,no_composer(parent_node){return parent_node.type()!=="CurrentUser"&&call.is_reflective},fn:external.make_call_fn(call),field_names:u.extend({},call.parameters,{element_id:{}}),description:(_ref="'s "+call.display())!=null?_ref:u.toTitleCase(call_name),section:"Data Fields"},high_priority_messages.push(call_name)}b_fiber.optional_pause();let user_calls=services.get_user_calls();for(let call_name in user_calls){let call=user_calls[call_name];add_oauth_message(call_name,call),b_fiber.optional_pause("add_oauth_message "+call_name)}return u.extend(additional_messages,{email_confirmed:{description:"'s email confirmed",ret_btype:"boolean",section:"Data Fields",fn(a,b){if(a){var _a$child;return[!0,"true"].includes((_a$child=a.child)==null?void 0:_a$child.call(a,"authentication").child("email").child("email_confirmed").get())}else return this.ret_btype_null()}},uses_pw:{description:" uses password",ret_btype:"boolean",section:"Other Operators",fn(a,b){if(a){var _a$child2;return((_a$child2=a.child)==null?void 0:_a$child2.call(a,"authentication").child("email").child("email").get())!=null}else return this.ret_btype_null()}},uses_2fa:{description:" uses 2FA",ret_btype:"boolean",section:"Other Operators",no_composer:()=>!appquery.get_public_setting("twofa_auth"),fn(a,b){if(!a||a._id()===db_consts.NO_USER)return this.ret_btype_null();var _a$child3,_a$child3$call,_a$child3$call$child,_a$child3$call$child$;return((_a$child3=a.child)==null||(_a$child3$call=_a$child3.call(a,"authentication"))==null||(_a$child3$call$child=_a$child3$call.child("2fa"))==null||(_a$child3$call$child$=_a$child3$call$child.child("uses_2fa"))==null?void 0:_a$child3$call$child$.get())==="true"}},has_2fa_backup:{description:" has 2FA backup codes",ret_btype:"boolean",section:"Other Operators",no_composer:()=>!appquery.get_public_setting("twofa_auth"),fn(a,b){if(!a||a._id()===db_consts.NO_USER)return this.ret_btype_null();var _a$child4,_a$child4$call,_a$child4$call$child,_a$child4$call$child$;return((_a$child4=a.child)==null||(_a$child4$call=_a$child4.call(a,"authentication"))==null||(_a$child4$call$child=_a$child4$call.child("2fa"))==null||(_a$child4$call$child$=_a$child4$call$child.child("has_codes"))==null?void 0:_a$child4$call$child$.get())==="true"}},is_using_cookies:{description:" is using cookies",ret_btype:"boolean",section:"Other Operators",no_composer:()=>!appquery.get_public_setting("cookie_opt_in"),fn(a,b){if(a){var _a$_id;return((_a$_id=a._id)==null?void 0:_a$_id.call(a))!==db_consts.NO_USER}else return this.ret_btype_null()}}}),[additional_messages,[...high_priority_messages.map(value=>({value,high_priority:!0})),{value:"email_confirmed",high_priority:!1},{value:"logged_in",high_priority:!1},{value:"not_logged_in",high_priority:!1},{value:"uses_pw",high_priority:!1},{value:"uses_2fa",high_priority:!1},{value:"has_2fa_backup",high_priority:!1},{value:"is_using_cookies",high_priority:!1}]]}module.exports=function(){let node=appquery.custom_type("user");return create_custom_btype("user",node,user_additional_messages,user_remove_messages,!1)}}});var require_api_wf_data=__commonJS({"lib-browser-old/core/core_btypes/providers/api_wf_data.js"(exports,module){"use strict";init_define_process_env();init_shim();var appquery=require_appquery();module.exports={get(id){let event_id=id.split(".")[0],event=appquery.workflow_item(event_id);return event!=null&&event.exists()?event.get_value()[id]:null},list(){return[]},display(){return"API Event data"}}}});var require_api=__commonJS({"lib-browser-old/core/core_btypes/providers/api.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_regexp_exec();require_es_string_replace();var services=require_services(),plugin_getter=require_plugin_getter();module.exports={get(api_reference){var _plugin_getter$get_pl;let plugin_name=api_reference.split(".")[0],btype_name=api_reference.split(".").slice(1).join(".");return(_plugin_getter$get_pl=plugin_getter.get_plugin(plugin_name))==null?void 0:_plugin_getter$get_pl.get_values()[btype_name]},list(){return services.get_value_ids().map(id=>id.replace("api.",""))},display(){return"external data"}}}});var require_custom2=__commonJS({"lib-browser-old/core/core_btypes/providers/custom.js"(exports,module){"use strict";init_define_process_env();init_shim();var u=require_u2(),btype_ids=require_btype_ids(),appquery=require_appquery(),{create_custom_btype}=require_generate_utilities();module.exports={get(id){if(!id)throw new u.UnexpectedError("custom btype created without id.  Namespace: custom");let node=appquery.custom_type(id),full_id=btype_ids.custom_type(id);return create_custom_btype(full_id,node)},list(){return appquery.custom_types(void 0,void 0,!0).filter(type=>type.id()!=="user").map(type=>type.id())},display(){return"custom type"}}}});var require_element=__commonJS({"lib-browser-old/core/core_btypes/providers/element.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();var u=require_u2(),appquery=require_appquery(),btype_ids=require_btype_ids(),{add_basic_element_messages}=require_misc_utilities(),event_element_mapping=require_event_element_mapping();module.exports={get(element_id){let element=appquery.element(element_id),messages={};if(element!=null&&element.exists()){let states=element.get_states();element.add_specific_messages(messages),add_basic_element_messages(states,messages,event_element_mapping.has_event("ButtonClicked",element.type())),u.extend(messages,{is_visible:{description:" is visible",section:"States",ret_btype:"sys.bool",fn(a,b){return a==null?void 0:a.is_visible()},filter_context(context){return context.owner_type==="State"||(context.owner_type==="Workflow"||context.owner_type==="BackendWorkflow")&&context.in_event_condition}},isnt_visible:{description:" isn't visible",section:"States",ret_btype:"sys.bool",fn(a){return!(a!=null&&a.is_visible())},filter_context(context){return context.owner_type==="State"||(context.owner_type==="Workflow"||context.owner_type==="BackendWorkflow")&&context.in_event_condition}}});for(let custom_state of element.element_custom_states())messages[custom_state.name()]={description:"'s "+custom_state.display(),section:"Custom States",ret_btype:custom_state.value(),fn(a){var _a$state;return a==null?this.ret_btype().get_bubble_null():this.ret_btype().cast((_a$state=a.state(custom_state.name()))!=null?_a$state:custom_state.default_val())},delete_cb(){if(window.confirm("Delete custom state ".concat(custom_state.display(),"?")))return custom_state.delete()}}}for(let message_name in messages){let message=messages[message_name];btype_ids.is_custom_type(message_name)?message.documentation_id="Documentation.Elements.GeneralConcepts.States.CustomStates":message.documentation_id="Documentation.Elements.GeneralConcepts.States."+message_name}return{display(){return"element"},get_message_names(){return Object.keys(messages)},get_message(name){return messages[name]},cast(val){return val},get_bubble_null(){return null},storable:!1,bindable:!1}},list(){return[]},display(){return"element"}}}});var require_core_ds_field_names=__commonJS({"lib-browser-old/core/core_datasources/utilities/core_ds_field_names.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.sorting_field_names=exports.constraints_field_names=void 0;var safe_require=_interopRequireWildcard(require_safe_require());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}safe_require.safe_register("./core/core_datasources/utilities/core_ds_field_names",exports);var constraints_field_names={constraints:{}};exports.constraints_field_names=constraints_field_names;var sorting_field_names={sort_field:{},dynamic_sort_field:{},geo_reference:{},descending:{optional:!0},additional_sort_fields:{optional:!0}};exports.sorting_field_names=sorting_field_names}});var require_core_ds_editor_utilities=__commonJS({"lib-browser-old/core/core_datasources/utilities/core_ds_editor_utilities.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_includes();require_es_string_includes();require_es_array_iterator();require_web_dom_collections_iterator();require_es_object_values();var core_ds_db_ops_utilities=require_core_ds_db_ops_utilities(),core_ds_editor_utilities=module.exports}});var require_list=__commonJS({"lib-browser-old/core/core_btypes/providers/list.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_object_get_own_property_descriptors();require_es_array_iterator();require_web_dom_collections_iterator();require_es_object_from_entries();require_es_array_includes();require_es_symbol_description();require_es_object_values();require_es_string_includes();require_es_array_reduce();require_es_array_sort();require_es_object_entries();require_web_dom_collections_for_each();require_es_error_cause();function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var u=require_u2(),logger=require_logger(),incremental=require_incremental(),db_consts=require_db(),special_keys=require_special_keys(),postgres_constraints=require_postgres_constraints(),list_utilities=require_list_utilities(),core_consts=require_core(),db_values=require_db_values(),eval_consts=require_eval(),btype_ids=require_btype_ids(),db_utils=require_db_utils(),TransformList=require_TransformList().default,IntersectList=require_IntersectList().default,ConcatList=require_ConcatList().default,UniqueList=require_UniqueList().default,SortedList=require_SortedList().default,btypes=require_btypes(),Lib=require_lib(),sample=require_sample(),shrink=require_shrink(),lang=require_lang2(),evaluate=require_evaluate(),decaf=require_decaf(),core_ds_field_names=require_core_ds_field_names(),core_ds_editor_utilities=require_core_ds_editor_utilities(),core_ds_db_ops_utilities=require_core_ds_db_ops_utilities(),lang_consts=require_lang(),{S}=shrink,COMPARISON_OPERATORS=["greater_or_equal_than","greater_than","less_or_equal_than","less_than","not_equals","equals"];function _join_using(render_fn,val,separator){var _val$all,_val$all2;let pieces=((_val$all=val==null||(_val$all2=val.all)==null?void 0:_val$all2.call(val))!=null?_val$all:[]).map(item=>(incremental.optional_pause_tick(10),render_fn(item)));return separator==="line_break"&&(separator="\n"),pieces.join(separator)}function get_messages(btype){let btype_id=btype.id(),allowed_messages=null,all_messages=_objectSpread(_objectSpread({[lang_consts.LIST_OPERATOR_NAMES.Count]:{description:":count",section:"Operators",can_be_cached:!0,ret_btype:"number",fn:(a,b,properties,_raw,context,options)=>count_fn(a,b,properties,_raw,options),message_cache_id:_ref=>{let{raw}=_ref;return count_message_cache_id(raw)}},[lang_consts.LIST_OPERATOR_NAMES.Contains]:{description:" contains ",section:"Operators",ret_btype:"sys.bool",arg_btype:btype_id,build_pg_constraint:postgres_constraints.contains,build_pg_r_constraint:postgres_constraints.in,build_pg_relationship:postgres_constraints.contains_both,fn:(a,b)=>{var _a$contains;return a?(_a$contains=a.contains)==null?void 0:_a$contains.call(a,b,btype):!1}},[lang_consts.LIST_OPERATOR_NAMES.NotContains]:{description:" doesn't contain ",section:"Operators",ret_btype:"sys.bool",arg_btype:btype_id,build_pg_constraint:postgres_constraints.not_contains,build_pg_r_constraint:postgres_constraints.not_in,build_pg_relationship:postgres_constraints.not_contains_both,fn:(a,b)=>{var _a$contains2;return a?!((_a$contains2=a.contains)!=null&&_a$contains2.call(a,b,btype)):!0}},[lang_consts.LIST_OPERATOR_NAMES.FirstElement]:{description:":first item",section:"Operators",ret_btype:btype_id,fn(a){var _a$get_children$;return a!=null&&a.get_children?(_a$get_children$=a.get_children(0,1)[0])!=null?_a$get_children$:this.ret_btype_null():this.ret_btype_null()}},[lang_consts.LIST_OPERATOR_NAMES.LastElement]:{description:":last item",section:"Operators",ret_btype:btype_id,fn(a){var _a$get_children$2;if(!(a!=null&&a.get_children))return this.ret_btype_null();let list_length=a.length();return list_length?(_a$get_children$2=a.get_children(list_length-1,1)[0])!=null?_a$get_children$2:this.ret_btype_null():this.ret_btype_null()}},[lang_consts.LIST_OPERATOR_NAMES.RandomElement]:{description:":random item",section:"Operators",ret_btype:btype_id,fn(a,b,properties,_raw,context){var _a$get_children$3;if(!(a!=null&&a.get_children)||!a.length())return this.ret_btype_null();let length=a.length(),get_random;context!=null&&context.random_generator?get_random=max=>context.random_generator.random(0,length):get_random=max=>Math.random()*length;let random_number=Math.floor(get_random());return(_a$get_children$3=a.get_children(random_number,1)[0])!=null?_a$get_children$3:this.ret_btype_null()}},[lang_consts.LIST_OPERATOR_NAMES.SpecificItem]:{description:":item #",section:"Operators",ret_btype:btype_id,arg_btype:"number",fn(a,b,properties,_raw){var _a$get_children$4;if(!(a!=null&&a.get_children)||!b||b<1)return this.ret_btype_null();let offset=Math.ceil(b-1);return offset!==b-1&&logger.verbose("user trying to offset list from decimal value",{b,b_string:String(b),_raw}),(_a$get_children$4=a.get_children(offset,1)[0])!=null?_a$get_children$4:this.ret_btype_null()}},[lang_consts.LIST_OPERATOR_NAMES.LimitTo]:{description:":items until #",section:"Operators",ret_btype:btype_ids.list_type(btype_id),arg_btype:"number",fn(a,b,properties,_raw){if(!(a!=null&&a.get_children)||b==null)return Lib().db_instance().static_list(btype_id,[]);let capped_at=Math.floor(b);return capped_at!==b&&logger.verbose("user trying to cap list at decimal value",{b,b_string:String(b),_raw}),a.capped(capped_at)}},[lang_consts.LIST_OPERATOR_NAMES.ListFrom]:{section:"Operators",description:":items from #",ret_btype:btype_ids.list_type(btype_id),arg_btype:"number",fn(a,b,properties,_raw){if(!(a!=null&&a.get_children)||b==null)return Lib().db_instance().static_list(btype_id,[]);let offset=Math.ceil(b-1);return offset!==b-1&&logger.verbose("user trying to offset list from decimal value",{b,b_string:String(b),_raw}),a.offset(offset)}},[lang_consts.LIST_OPERATOR_NAMES.ContainsList]:{description:" contains list ",section:"Operators",ret_btype:"sys.bool",arg_btype:btype_ids.list_type(btype_id),fn:(a,b)=>{for(let item of(_b$all=b==null||(_b$all2=b.all)==null?void 0:_b$all2.call(b))!=null?_b$all:[]){var _b$all,_b$all2,_a$contains3;if(!(a!=null&&(_a$contains3=a.contains)!=null&&_a$contains3.call(a,item,btype)))return!1}return!0}},[lang_consts.LIST_OPERATOR_NAMES.Join]:{description:" join with ",section:"Operators",ret_btype:"text",arg_btype:"text",should_include:btype.has_runmode_display(),fn:(a,b)=>(db_values.registry.is(a,db_values.LIST_WRAPPER)||(a=Lib().db_instance().static_list(btype_id,[])),_join_using(el=>btype.runmode_display(el),a,b)),editor:{static:!0,default:", "}},[lang_consts.LIST_OPERATOR_NAMES.Sum]:{description:":sum",section:"Operators",can_be_cached:!0,ret_btype:"number",should_include:btype.matches("number"),fn:(a,b,properties,_raw,context,options)=>(db_values.registry.is(a,db_values.LIST_WRAPPER)||(a=Lib().db_instance().static_list(btype_id,[])),a.sum(options))},[lang_consts.LIST_OPERATOR_NAMES.Product]:{description:":product",section:"Operators",can_be_cached:!0,ret_btype:"number",should_include:btype.matches("number"),fn:(a,b,properties,_raw,context,options)=>(db_values.registry.is(a,db_values.LIST_WRAPPER)||(a=Lib().db_instance().static_list(btype_id,[])),a.product(options))},[lang_consts.LIST_OPERATOR_NAMES.Average]:{description:":average",section:"Operators",can_be_cached:!0,should_include:btype.matches("number")||btype.matches("date"),ret_btype:btype.matches("number")?"number":"date",fn:(a,b,properties,_raw,context,options)=>{db_values.registry.is(a,db_values.LIST_WRAPPER)||(a=Lib().db_instance().static_list(btype_id,[0]));let average=a.average(options);return average!=null?average:a.length()===0?0:average}},[lang_consts.LIST_OPERATOR_NAMES.Median]:{description:":median",section:"Operators",can_be_cached:!0,should_include:btype.matches("number")||btype.matches("date"),ret_btype:btype.matches("number")?"number":"date",fn:(a,b,properties,_raw,context,options)=>{db_values.registry.is(a,db_values.LIST_WRAPPER)||(a=Lib().db_instance().static_list(btype_id,[0]));let median=a.median(options);return median!=null?median:a.length()===0?0:median}},[lang_consts.LIST_OPERATOR_NAMES.Min]:{description:":min",section:"Operators",can_be_cached:!0,should_include:btype.matches("number")||btype.matches("date"),ret_btype:btype.matches("number")?"number":"date",fn:(a,b,properties,_raw,context,options)=>{db_values.registry.is(a,db_values.LIST_WRAPPER)||(a=Lib().db_instance().static_list(btype_id,[0]));let min=a.min(options);return min!=null?min:a.length()===0?0:min}},[lang_consts.LIST_OPERATOR_NAMES.Max]:{description:":max",section:"Operators",can_be_cached:!0,should_include:btype.matches("number")||btype.matches("date"),ret_btype:btype.matches("number")?"number":"date",fn:(a,b,properties,_raw,context,options)=>{db_values.registry.is(a,db_values.LIST_WRAPPER)||(a=Lib().db_instance().static_list(btype_id,[0]));let max=a.max(options);return max!=null?max:a.length()===0?0:max}}},Object.fromEntries(btype.get_messages().filter(message=>{let UNSUPPORTED_RETURN_TYPES=["function","object"],null_or_empty=[null,[]];return!message.M.arg_btype&&(!UNSUPPORTED_RETURN_TYPES.includes(typeof message.M.ret_btype)||null_or_empty.includes(typeof message.M.ret_btype))}).map(message=>{let HIDDEN_MESSAGE_NAMES={convert_to_list:!0},LIST_MAP_DESCRIPTION_PREFIX=":each item",no_composer=()=>HIDDEN_MESSAGE_NAMES[message.name()],calculated_ret_btype;btype_ids.is_list(message.M.ret_btype)?calculated_ret_btype=message.M.ret_btype:calculated_ret_btype=btype_ids.list_type(message.M.ret_btype);let resulting_message={description(node,options){var _options,_options$parent_node;if((_options=options)!=null||(options={}),options.for_consumer===core_consts.DROPDOWN_DESCRIPTION_CONTEXT)return LIST_MAP_DESCRIPTION_PREFIX+message.description(node);let parent_node=(_options$parent_node=options.parent_node)!=null?_options$parent_node:node==null?void 0:node.prior();return parent_node instanceof lang.DataSource||!(parent_node!=null&&parent_node.prior().get_value().is_list())?LIST_MAP_DESCRIPTION_PREFIX+message.description(node):message.description(node)},ret_btype:calculated_ret_btype,spot_data:message.M.spot_data,description_for_sliding_palette:message.M.description_for_sliding_palette,field_names:message.M.field_names,section:message.M.section,fields:message.M.fields,compound_message:!0,no_composer,arg_btype:null,fn:(a,b,properties,_raw)=>{db_values.registry.is(a,db_values.LIST_WRAPPER)||(a=Lib().db_instance().static_list(btype_id,[]));let transformed_list=new TransformList(a,{value_id:btype_id,message:message.name(),properties,_raw,arg:b});return btype_ids.is_list(message.M.ret_btype)&&(transformed_list=transformed_list.flatten()),transformed_list}};return[message.name(),resulting_message]}))),{},{[lang_consts.LIST_OPERATOR_NAMES.PlusElement]:{description:":plus item ",ret_btype:btype_ids.list_type(btype_id),section:"Other Operators",arg_btype:btype_id,fn(a,b){return db_values.registry.is(a,db_values.LIST_WRAPPER)||(a=Lib().db_instance().static_list(btype_id,[])),b=btype.cast(b),b==null?b=Lib().db_instance().static_list(btype_id,[]):b=Lib().db_instance().static_list(btype_id,[b]),new UniqueList(new ConcatList(Lib().db_instance().static_list(btype_ids.list_type(btype_id),[a,b])))}},[lang_consts.LIST_OPERATOR_NAMES.MinusElement]:{description:":minus item ",section:"Other Operators",should_include:btype_id!=="geographic_address",ret_btype:btype_ids.list_type(btype_id),arg_btype:btype_id,fn(a,b){if(db_values.registry.is(a,db_values.LIST_WRAPPER)||(a=Lib().db_instance().static_list(btype_id,[])),b=btype.cast(b),b==null)return a;let constraint;if(b._id!=null)constraint=[{key:special_keys.UNIQUE_ID,constraint_type:"not equal",value:b._id()}];else{let has_not_equals=!btype.get_message("not_equals").is_not_found(),is_uid=typeof b=="string"&&btype.plugin.uid_field!=null;if(!has_not_equals&&!is_uid)throw new u.UnexpectedError("minus_element called on a btype that doesn't have not_equals: "+btype_id);constraint=[{key:special_keys.ADVANCED_SEARCH_CONSTRAINT,value:{"%x":"InjectedValue","%n":{"%nm":"not_equals","%a":b,"%x":"Message"}},self:has_not_equals?btype_id:"text"}]}return a.filter(constraint)}},[lang_consts.LIST_OPERATOR_NAMES.MinusList]:{description:":minus list ",section:"Other Operators",should_include:btype_id!=="geographic_address",ret_btype:btype_ids.list_type(btype_id),arg_btype:btype_ids.list_type(btype_id),fn(prev,arg){return prev=list_utilities.process_list_arg(btype_id,prev),arg=list_utilities.process_list_arg(btype_id,arg),prev.minus_list(arg)}},[lang_consts.LIST_OPERATOR_NAMES.MergedWith]:{description:" merged with ",section:"Other Operators",ret_btype:btype_ids.list_type(btype_id),arg_btype:btype_ids.list_type(btype_id),fn(a,b){return db_values.registry.is(a,db_values.LIST_WRAPPER)||(a=Lib().db_instance().static_list(btype_id,[])),db_values.registry.is(b,db_values.LIST_WRAPPER)||(b=Lib().db_instance().static_list(btype_id,[])),new UniqueList(new ConcatList(Lib().db_instance().static_list(btype_ids.list_type(btype_id),[a,b])))}},[lang_consts.LIST_OPERATOR_NAMES.IntersectWith]:{description:" intersect with ",section:"Other Operators",ret_btype:btype_ids.list_type(btype_id),arg_btype:btype_ids.list_type(btype_id),fn(a,b){return db_values.registry.is(a,db_values.LIST_WRAPPER)||(a=Lib().db_instance().static_list(btype_id,[])),db_values.registry.is(b,db_values.LIST_WRAPPER)||(b=Lib().db_instance().static_list(btype_id,[])),new IntersectList(Lib().db_instance().static_list(btype_ids.list_type(btype_id),[a,b]))}},[lang_consts.LIST_OPERATOR_NAMES.GroupBy]:{should_include:btype.matches(btypes.compound),ret_btype(_raw){var _raw2;(_raw2=_raw)!=null||(_raw={}),_raw=u.json_deep_copy(_raw);for(let i of["groupings","aggregations"])for(let thing_key in(_raw$P=_raw["%p"])==null?void 0:_raw$P[i]){var _raw$P,_raw$P2;let data=(_raw$P2=_raw["%p"])==null?void 0:_raw$P2[i][thing_key];for(let k in data)data[k]["%x"]==="Empty"&&delete data[k];u.is_empty(data)&&delete _raw["%p"][i][thing_key]}try{var _raw$P3;let list=this.fn(void 0,void 0,(_raw$P3=_raw["%p"])!=null?_raw$P3:{});return btype_ids.list_type(list.get_item_btype_id())}catch(_unused){return"list.null"}},field_names:{groupings:{},aggregations:{}},spot_data:"SlidableAtom",description(node){var _node$property$raw;return node==null?":group by... ":":grouped by "+Object.values((_node$property$raw=node.property("groupings").raw())!=null?_node$property$raw:{}).map(grouping=>grouping.message).map(msg_name=>btype.get_message(msg_name).description(void 0,!0)).join(", ")},section:"Other Operators",fn(a,b,properties,_raw){db_values.registry.is(a,db_values.LIST_WRAPPER)||(a=Lib().db_instance().static_list(btype_id,[]));for(let grouping of decaf.object_values(properties.groupings))db_consts.CALENDAR_GROUPINGS.includes(grouping.fn)?(grouping.timezone_string=Lib().current_timezone(),typeof grouping.start!="number"&&!(grouping.start instanceof Date)&&(grouping.end!=null?grouping.start=grouping.end-1:grouping.start=Date.now()),(typeof grouping.interval!="number"||grouping.interval<1)&&(grouping.interval=1)):grouping.fn==="bucket"&&typeof grouping.start!="number"&&(grouping.start=0,(typeof grouping.interval!="number"||grouping.interval<=0)&&(grouping.interval=1));let agg_list=decaf.object_values(properties.aggregations);for(let aggregation of agg_list)db_utils.can_aggregate_on(aggregation.fn,btype_id).includes(aggregation.message)||delete aggregation.message;let allowed_groupings=db_utils.can_group_on(btype_id),data={groupings:decaf.object_values(properties.groupings).filter(grouping=>allowed_groupings.includes(grouping.message)),aggregations:agg_list};return a.group_by(data)}},[lang_consts.LIST_OPERATOR_NAMES.Filtered]:{ret_btype:btype_ids.list_type(btype_id),field_names:u.extend({ignore_empty_constraints:{}},core_ds_field_names.constraints_field_names,core_ds_field_names.sorting_field_names),spot_data:"SlidableAtom",description:":filtered",section:"Other Operators",fn(a,b,properties,_raw,context){db_values.registry.is(a,db_values.LIST_WRAPPER)||(a=Lib().db_instance().static_list(btype_id,[])),properties.type_to_find=btype_id;let null_not_dropped=!properties.ignore_empty_constraints,constraints=decaf.object_values(properties.constraints).map((constraint,idx)=>{if(constraint.key===special_keys.ADVANCED_SEARCH_CONSTRAINT){let constraint_raw=_raw[S.properties][S.constraints][idx][S.value];constraint.value=evaluate.reduce(constraint_raw,context),btype.matches(btypes.compound)||(constraint.self=btype_id)}return constraint});return a.filter(constraints,null_not_dropped).sort(core_ds_db_ops_utilities.get_sorts_list(properties))},no_frozen_state:!0,properties_for_pre_evaluation(_ref2){let{_properties}=_ref2;if(!(_properties!=null&&_properties[S.constraints]))return _properties;let resulting_properties=u.extend({},_properties);resulting_properties[S.constraints]={};for(let index in _properties[S.constraints]){let constraint=_properties[S.constraints][index];constraint!=null&&(typeof constraint!="object"?resulting_properties[S.constraints][index]=constraint:(resulting_properties[S.constraints][index]=u.extend({},constraint),constraint[S.key]===special_keys.ADVANCED_SEARCH_CONSTRAINT&&(resulting_properties[S.constraints][index][S.value]=null)))}return resulting_properties}},[lang_consts.LIST_OPERATOR_NAMES.Sorted]:{should_include:btype.matches(btypes.compound)||btype.option_set()!=null||btype.can_sort(),ret_btype:btype_ids.list_type(btype_id),field_names:btype.matches(btypes.compound)||btype.option_set()!=null?_objectSpread({},core_ds_field_names.sorting_field_names):{random:{},descending:{optional:!0}},spot_data:"SlidableAtom",description(node){let sort_field=node==null?void 0:node.property("sort_field").raw(),result=":sorted";if(sort_field===special_keys.DYNAMIC_SORTING_FIELD)result+=" by dynamic field";else if(sort_field===special_keys.RANDOM_SORTING)result+=" randomly";else if(sort_field){var _sort_field_fancy;let val=btypes.get(btype_id),sort_field_fancy;if(val.custom_type()!=null)sort_field_fancy=val.custom_type().field(sort_field).display();else if(val.option_set()!=null)sort_field_fancy=val.option_set().attribute(sort_field).display();else{var _val$get_message,_val$get_message$desc;sort_field_fancy=(_val$get_message=val.get_message(sort_field))==null||(_val$get_message$desc=_val$get_message.description)==null?void 0:_val$get_message$desc.call(_val$get_message,void 0,!0)}result+=" by "+((_sort_field_fancy=sort_field_fancy)!=null?_sort_field_fancy:sort_field)}return result},section:"Other Operators",fn(a,b,properties){if(Array.isArray(a))a=list_utilities.array_to_static_list(btype_id,a);else if(!a||!a.all)return Lib().db_instance().static_list(btype_id,[]);if(btype.matches(btypes.compound)||btype.option_set()!=null){properties.type_to_find=btype_id;let sorts_list=core_ds_db_ops_utilities.get_sorts_list(properties);return new SortedList(a,{sorts_list})}else{var _properties2;return(_properties2=properties)!=null||(properties={}),properties.sorts_list=[{sort_field:properties.random?special_keys.RANDOM_SORTING:void 0,descending:properties.descending,self:!0}],new SortedList(a,properties)}}},[lang_consts.LIST_OPERATOR_NAMES.RankedBy]:{should_include:btype.matches(btypes.compound)||btype.option_set()!=null,ret_btype:btype_ids.list_type(btype_id),field_names:{target_item:{},method:{}},spot_data:"SlidableAtom",description(node){let target_item=node==null?void 0:node.property("target_item"),method=node==null?void 0:node.get_static_property("method"),message=":ranked by";return method?(message+=" ",method==="similar"?message+="numerical similarity to ":method==="different"&&(message+="numerical difference from "),target_item!=null&&target_item.exists()?message+=target_item.get_tree_display():message+="..."):message+="...",message},section:"Other Operators",fn(a,b,properties){var _a$all,_a$all2;let results=(_a$all=a==null||(_a$all2=a.all)==null?void 0:_a$all2.call(a))!=null?_a$all:[];if(db_values.registry.is(a,db_values.LIST_WRAPPER)&&a.get_item_btype_id()!==btype_id)return[];let option_set=btypes.get(btype_id).option_set();if(properties.target_item!=null&&(option_set||properties.target_item.child)){let score=function(item){if(item==null||option_set==null&&!item.child)return 1/0;let ret=0;for(let message of messages){var _option_set$value$att,_item$child;let name=message.name(),diff=(_option_set$value$att=option_set==null?void 0:option_set.value(item).attr(name))!=null?_option_set$value$att:item==null||(_item$child=item.child)==null?void 0:_item$child.call(item,name).get();if(diff!=null)ret+=Math.pow(target[name]-diff,2);else return 1/0}return ret},messages=btypes.get(btype_id).get_messages().filter(message=>message.ret_btype().matches("number")),target={};for(let message of messages){let name=message.name();option_set?target[name]=option_set.value(properties.target_item).attr(name):target[name]=properties.target_item.child(name).get()}let modifier=properties.method==="different"?-1:1;results.sort((a2,b2)=>(score(a2)-score(b2))*modifier)}return Lib().db_instance().static_list(btype_id,results)}},[lang_consts.LIST_OPERATOR_NAMES.Unique]:{description:":unique elements",section:"Other Operators",ret_btype:btype_ids.list_type(btype_id),fn(a,b){return db_values.registry.is(a,db_values.LIST_WRAPPER)||(a=Lib().db_instance().static_list(btype_id,[])),new UniqueList(a)}},[lang_consts.LIST_OPERATOR_NAMES.ApproximateCount]:{description:":approximate count",section:"Other Operators",can_be_cached:!0,ret_btype:"number",fn:(a,b,properties,_raw,context,options)=>count_fn(a,b,properties,_raw,u.extend({should_approx:!0},options)),message_cache_id:_ref3=>{let{raw}=_ref3;return count_message_cache_id(raw)}},[lang_consts.LIST_OPERATOR_NAMES.CachedAggregation]:{description(node){let operation=node==null?void 0:node.get_static_property("operation");return":cached "+(operation!=null?operation:"aggregation")},section:"Other Operators",field_names:{operation:{}},spot_data:"SlidableAtom",ret_btype:function(message_raw){var _allowed_messages$mes,_message_raw$S$proper,_ref4;let ret=(_allowed_messages$mes=allowed_messages[message_raw==null||(_message_raw$S$proper=message_raw[S.properties])==null?void 0:_message_raw$S$proper.operation])==null?void 0:_allowed_messages$mes.ret_btype;return(_ref4=typeof ret=="function"?ret():ret)!=null?_ref4:"null"},fn(a,b,properties,_raw,context){var _allowed_messages$ope;let operation=properties.operation;return(_allowed_messages$ope=allowed_messages[operation])==null?void 0:_allowed_messages$ope.fn(a,b,properties,_raw,context,{cacheable:!0})},message_cache_id:_ref8=>{var _allowed_messages$pro,_allowed_messages$pro2;let{raw,properties}=_ref8;return(_allowed_messages$pro=allowed_messages[properties.operation])==null||(_allowed_messages$pro2=_allowed_messages$pro.message_cache_id)==null?void 0:_allowed_messages$pro2.call(_allowed_messages$pro,{raw})}},[lang_consts.LIST_OPERATOR_NAMES.FormatAsText]:{description:":format as text",section:"Other Operators",spot_data:"SlidableAtom",ret_btype:"text",field_names:{content:{prop_type:eval_consts.EVAL_TYPE.thunk},delimiter:{prop_type:eval_consts.EVAL_TYPE.thunk}},fn(a,b,properties,_raw,context){if(!(a!=null&&a.get_children)||!a.length()||_raw==null)return this.ret_btype_null();let formatted_text="",list_length=a.length();return a.all().forEach((item,idx)=>{var _a$get_item_btype_id,_raw$S$properties;let new_context=u.extend({},context);new_context.datasources=u.extend({},new_context.datasources),new_context.datasources.injected_value=()=>item;let type=(_a$get_item_btype_id=a.get_item_btype_id())!=null?_a$get_item_btype_id:"text";new_context.datasources.injected_value_btype=()=>type;let eval_content=properties.content(new_context),raw_delimiter=(_raw$S$properties=_raw[S.properties])==null?void 0:_raw$S$properties.delimiter,eval_delimiter;idx===list_length-1||!raw_delimiter?eval_delimiter="":eval_delimiter=properties.delimiter(new_context),formatted_text+=eval_content+eval_delimiter}),formatted_text},no_frozen_state:!0},[lang_consts.LIST_OPERATOR_NAMES.MakeStatic]:{description:":make static ",section:"Other Operators",ret_btype:btype_ids.list_type(btype_id),fn(a,b){return(!db_values.registry.is(a,db_values.LIST_WRAPPER)||!btypes.get(a.get_item_btype_id()).matches(btype_id))&&(a=Lib().db_instance().static_list(btype_id,[])),Lib().db_instance().static_list(btype_id,a.all())}}}),message_list=Object.entries(all_messages).filter(_ref9=>{var _message$should_inclu;let[_,message]=_ref9;return(_message$should_inclu=message.should_include)!=null?_message$should_inclu:!0});return message_list.forEach(_ref10=>{let[message_name,message]=_ref10;message.compound_message||(message.documentation_id="Documentation.Data.Messages.list."+message_name),delete message.should_include}),allowed_messages=Object.fromEntries(message_list),allowed_messages}module.exports={list(){},display(){return"list"},get(btype_id){let btype=btypes.get(btype_id),runmode_display=null;btype.has_runmode_display()&&(runmode_display=val=>_join_using(el=>btype.runmode_display(el),val,", "));let export_to_string=null;btype.has_export_to_string()&&(export_to_string=function(val,context){var _val$all3,_val$all4;return context.always_return_text=!0,((_val$all3=val==null||(_val$all4=val.all)==null?void 0:_val$all4.call(val))!=null?_val$all3:[]).map(item=>{let visited_fields_copy=new Map(context.visited_field_types),context_copy=u.extend({},context,{visited_field_types:visited_fields_copy});return btype.export_to_string(item,context_copy)}).join(" , ")});let debugging_display=null;btype.has_debugging_display()&&(debugging_display=val=>_join_using(el=>btype.debugging_display(el),val,", "));let m=get_messages(btype);return{get_message_names:()=>Object.keys(m),get_message(name){return m[name]},display(){var _display;let display=btype.display();return((_display=display)==null?void 0:_display.slice(-1))==="s"?display+="es":display+="s","List of "+display},inner(){return btype},is_list:!0,equals(a,b){return!1},get_sample(){return new sample.SampleList(btype_id)},get_bubble_null:list_utilities.list_get_bubble_null,cast(v){return list_utilities.cast_to_list(btype_id,v)},storable:!1,bindable:!1,runmode_display,export_to_string,debugging_display,get_JS_object(val){let raw;return Array.isArray(val)?raw=val:(val==null?void 0:val.all)!=null?raw=val.all():raw=[],raw.map(a=>btype.get_JS_object(a))},JS_to_bubble(val){let res=[];for(let v of decaf.array_from(val)){incremental.optional_pause_tick(10);let bubble_v=btype.JS_to_bubble(v);bubble_v!=null&&res.push(bubble_v)}return Lib().db_instance().static_list(btype_id,res)}}}};function count_fn(a,b,properties,_raw,options){var _raw$N,_a$length;if(typeof(a==null?void 0:a.length)!="function")return 0;let next_message=_raw==null||(_raw$N=_raw["%n"])==null?void 0:_raw$N["%nm"];if(COMPARISON_OPERATORS.includes(next_message)){var _raw$N2;let btype_to_compare_to=(_raw$N2=_raw["%n"])==null?void 0:_raw$N2["%a"];if(typeof btype_to_compare_to=="number"){let result=a==null?void 0:a["length_"+next_message](btype_to_compare_to,options),comparison_offsets={greater_than:{true:1,false:-1},greater_or_equal_than:{true:1,false:-1},less_than:{true:-1,false:1},less_or_equal_than:{true:-1,false:1},equals:{true:0,false:-1},not_equals:{true:-1,false:0}};return result?btype_to_compare_to+comparison_offsets[next_message].true:btype_to_compare_to+comparison_offsets[next_message].false}}return(_a$length=a.length(options))!=null?_a$length:0}function count_message_cache_id(raw){let next=raw["%n"],next_name=next==null?void 0:next["%nm"],next_args=next==null?void 0:next["%a"];return COMPARISON_OPERATORS.includes(next_name)&&typeof next_args=="number"?"".concat(next_args,"_").concat(next_name):""}}});var require_option_sets2=__commonJS({"lib-browser-old/option_sets.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_includes();require_es_string_includes();require_es_regexp_exec();require_es_string_replace();require_es_regexp_test();var appquery=require_appquery(),app_json_consts=require_app_json(),btype_ids=require_btype_ids();exports.get_safe_id=function(display,options){var _options,_options$reserved,_options$exists;(_options=options)!=null||(options={});let reserved=(_options$reserved=options.reserved)!=null?_options$reserved:[],existence=(_options$exists=options.exists)!=null?_options$exists:()=>!1,base=get_safe_base(display);function test_id(id){return app_json_consts.PROTECTED_KEYS.has(id)||app_json_consts.BUBBLE_RESERVED_KEYS.has(id)?!0:reserved.includes(id)||existence(id)}let result=base,num=0;for(;test_id(result);)result=base+num,num++;return result};function get_safe_base(display){let base=display.replace(/[^a-zA-Z0-9]/g,"_").toLowerCase();return/^\d+$/.test(base)?"".concat(base,"_"):base}exports.sort_options_fn=(a,b)=>a.sort_factor()-b.sort_factor();exports.sort_attributes_fn=function(a,b){var _a$display,_b$display;return((_a$display=a.display())==null?void 0:_a$display.toLowerCase())<((_b$display=b.display())==null?void 0:_b$display.toLowerCase())?-1:1};exports.sort_types_fn=function(a,b){var _a$display2,_b$display2;return((_a$display2=a.display())==null?void 0:_a$display2.toLowerCase())<((_b$display2=b.display())==null?void 0:_b$display2.toLowerCase())?-1:1}}});var require_option=__commonJS({"lib-browser-old/core/core_btypes/providers/option.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_object_entries();require_es_array_iterator();require_web_dom_collections_iterator();var u=require_u2(),appquery=require_appquery(),documentation_id_getter=require_documentation_id_getter(),btype_ids=require_btype_ids(),postgres_constraints=require_postgres_constraints(),logger=require_logger(),list_utilities=require_list_utilities(),option_sets=require_option_sets2(),btypes=require_btypes(),Lib=require_lib();function create_option_set(id){if(!id)throw new u.UnexpectedError("custom option set created without id.");let full_id=btype_ids.option_set_type(id),node=appquery.option_set(id);return _create_option_set_btype(full_id,node)}function _create_option_set_btype(full_id,node){let special_messages={};return u.extend(special_messages,{display:{description:"'s Display",section:"Attributes",public_for_plugins:!0,ret_btype:"text",fn(a,b){var _node$value$display,_node$value;return a&&(_node$value$display=(_node$value=node.value(a))==null?void 0:_node$value.display())!=null?_node$value$display:""}},equals:{description:" is ",ret_btype:"sys.bool",section:"Operators",arg_btype:full_id,fn(a,b){return option_equals(a,b)},build_pg_constraint:postgres_constraints.equals,build_pg_r_constraint:postgres_constraints.equals,build_pg_relationship:postgres_constraints.equals_both},not_equals:{description:" is not ",section:"Operators",ret_btype:"sys.bool",arg_btype:full_id,fn(a,b){return!option_equals(a,b)},build_pg_constraint:postgres_constraints.not_equals,build_pg_r_constraint:postgres_constraints.not_equals,build_pg_relationship:postgres_constraints.not_equals_both},is_empty:{description:" is empty",section:"Operators",ret_btype:"sys.bool",fn(a,b){return!a},build_pg_constraint:postgres_constraints.is_empty},is_not_empty:{description:" is not empty",section:"Operators",ret_btype:"sys.bool",fn(a,b){return!!a},build_pg_constraint:postgres_constraints.is_not_empty},defaulting_to:{description:":defaulting to ",section:"Operators",ret_btype:full_id,arg_btype:full_id,fn(a,b){return a||b}},is_not_contained_by_list:list_utilities.build_is_not_contained_by_list(full_id),convert_to_list:{description:":converted to list",section:"Operators",ret_btype:btype_ids.list_type(full_id),fn(a,b,properties){return a=btypes.get(full_id).cast(a),a==null||a===""?Lib().db_instance().static_list(full_id,[]):Lib().db_instance().static_list(full_id,[a])}}}),{get_message_names(){let special_names=Object.entries(special_messages).filter(_ref=>{let[name,message]=_ref;return!message.hidden&&name!=="display"}).map(_ref2=>{let[name,_]=_ref2;return name});return["display",...node.attributes().filter(attr=>!attr.deleted()).map(attr=>attr.name()),...special_names]},get_message(name){var _attr_node$value,_ref3;let special=special_messages[name];if(special)return special;let attr_node=node.attribute(name);if(!attr_node)return{description:"[missing: "+name+"]",ret_btype:"null",fn(){}};let ret_btype_id=(_attr_node$value=attr_node.value())!=null?_attr_node$value:"null",bubble_null_set=!1,bubble_null=null;return{description:(_ref3="'s "+attr_node.display())!=null?_ref3:name,section:"Attributes",ret_btype:ret_btype_id,public_for_plugins:!0,fn(a,b){var _node$value2,_node$value2$attr;let results=(_node$value2=node.value(a))==null||(_node$value2$attr=_node$value2.attr)==null?void 0:_node$value2$attr.call(_node$value2,name);if(btype_ids.is_list(ret_btype_id)){let inner_btype_id=btype_ids.list_element_type(ret_btype_id);return Lib().db_instance().static_list(inner_btype_id,results!=null?results:[])}let ret_btype_object=btypes.get(ret_btype_id);return ret_btype_object?results!=null?ret_btype_object.cast(results):(bubble_null_set||(bubble_null=ret_btype_object.get_bubble_null(),bubble_null_set=!0),bubble_null):(logger.owner_error("Missing field on option set",{display:"Missing field in Option Set used for dynamic property"}),results!=null?results:null)},delete_cb(){if(window.confirm("Delete attribute "+attr_node.display()+"?"))return attr_node.set_deleted(!0)}}},display(){return node.display()},debugging_display(val){if(val=this.cast(val),val){var _full_btype$deleted,_full_btype$display;let full_btype=node.value(val);if(full_btype!=null&&(_full_btype$deleted=full_btype.deleted)!=null&&_full_btype$deleted.call(full_btype))return'(Deleted Option with ID: "'.concat(val,'")');if(full_btype!=null&&(_full_btype$display=full_btype.display)!=null&&_full_btype$display.call(full_btype)){var _full_btype$display2;return full_btype==null||(_full_btype$display2=full_btype.display)==null?void 0:_full_btype$display2.call(full_btype)}else return'(Option with invalid id "'.concat(val,'" for option set "').concat(node.display(),'")')}else return""},option_set(){return node},is_option_set:!0,equals:option_equals,from_human(val){return this.JS_to_bubble(val)},get_sample(){var _node$values$0$name,_node$values$;return(_node$values$0$name=(_node$values$=node.values()[0])==null?void 0:_node$values$.name())!=null?_node$values$0$name:null},get_bubble_null(){return null},storable:!0,bindable:!1,export_to_string(val,context){let sub_btype=node.value(val);return sub_btype!=null&&sub_btype.deleted()&&context.option_show_if_deleted?"(deleted option)":sub_btype==null?void 0:sub_btype.display()},get_JS_object(val){var _node$value$display2,_node$value3,_node$value3$display;return typeof val!="string"||val===""?null:(_node$value$display2=(_node$value3=node.value(val))==null||(_node$value3$display=_node$value3.display)==null?void 0:_node$value3$display.call(_node$value3))!=null?_node$value$display2:null},JS_to_bubble(id){if(typeof id!="string"||id==="")return null;for(let val of node.values())if(val.display()===id&&!val.deleted())return val.id();return null},cast(val){if(val==null)return null;if(typeof val=="string"){var _node$value4;return(_node$value4=node.value(val))!=null&&_node$value4.exists()?val:option_sets.get_safe_id(val,{reserved:node.reserved_values()})}else return null}}}module.exports={get:create_option_set,list(){return appquery.option_sets(void 0,!0).map(optset=>optset.name())},display(){return"option set"}};function option_equals(a,b){return a===b}}});var require_struct=__commonJS({"lib-browser-old/core/core_btypes/providers/struct.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_json_stringify();var u=require_u2(),{generate_JS_to_bubble_error}=require_misc_utilities(),list_utilities=require_list_utilities(),hydrate2=require_hydrate(),StaticObject=require_StaticObject().default,btypes=require_btypes(),Lib=require_lib(),decaf=require_decaf();module.exports={list(){},display(){return"struct"},get(string_def){let{caption,definition}=JSON.parse(u.base64decode(string_def)),my_btype_id="struct."+string_def;if(typeof definition!="object")throw new u.UnexpectedError("Bad struct val: "+string_def);let reverse={};for(let k in definition){let v=definition[k];reverse[v[0]]=k}return{get_message_names(){return decaf.object_keys(definition)},get_message(name){var _ref,_definition$name,_definition$name$,_definition$name2;return{description:(_ref="'s "+((_definition$name=definition[name])==null?void 0:_definition$name[0]))!=null?_ref:"[Missing: "+name,section:"Field Data",ret_btype:(_definition$name$=(_definition$name2=definition[name])==null?void 0:_definition$name2[1])!=null?_definition$name$:"null",is_lookup:!0}},display(){return caption},equals(a,b){for(let k in definition){let v=definition[k],ak=a.child(k).get(),bk=b.child(k).get();if(!btypes.get(v[1]).equals(ak,bk))return!1}return!0},is_not_contained_by_list:list_utilities.build_is_not_contained_by_list(my_btype_id),get_sample(){let res={};for(let k in definition){let v=definition[k];res[k]=btypes.get(v[1]).get_sample()}return new StaticObject(res,null,my_btype_id)},get_bubble_null(){return null},cast(val){if(typeof val!="object"||!val)return this.get_bubble_null();if(typeof val.raw=="function")return val.value_id===my_btype_id?val:new StaticObject(val,val.db,my_btype_id);try{return new StaticObject(JSON.parse(JSON.stringify(val)),null,my_btype_id)}catch(error){return this.get_bubble_null()}},storable:!1,bindable:!0,is_aggregate:caption==="Grouping",get_JS_object(val){if(typeof(val==null?void 0:val.raw)!="function")return null;let raw=val.raw();if(typeof raw!="object")return null;let result={};for(let k in definition){let v=definition[k],rehydrated=hydrate2.rehydrate_tree(Lib().db_instance(),raw[k]);result[v[0]]=btypes.get(v[1]).get_JS_object(rehydrated)}return result},JS_to_bubble(val){if(val==null)return this.get_bubble_null();typeof val!="object"&&generate_JS_to_bubble_error(this.display(),val);let result={};for(let k in val){let v=val[k];if(!definition[k])throw new u.UnexpectedError("the key "+k+" is not part of the btype definition");result[k]=btypes.get(definition[k][1]).JS_to_bubble(v)}return new StaticObject(result,null,my_btype_id)}}}}}});var require_style2=__commonJS({"lib-browser-old/core/core_btypes/providers/style.js"(exports,module){"use strict";init_define_process_env();init_shim();var{add_basic_element_messages}=require_misc_utilities(),element_registry=require_element_registry(),event_element_mapping=require_event_element_mapping();module.exports={get(element_type){let messages={},element_object=element_registry.get_element_object(element_type);element_object!=null&&add_basic_element_messages(element_object.get_states(),messages,event_element_mapping.has_event("ButtonClicked",element_type));for(let message_name in messages){let message=messages[message_name];message.documentation_id="Documentation.Elements.GeneralConcepts.States."+message_name}return{display(){return"style"},get_message_names(){return Object.keys(messages)},get_message(name){return messages[name]},cast(val){return val},storable:!1,bindable:!1}},list(){return[]},display(){return"style"}}}});var require_sys=__commonJS({"lib-browser-old/core/core_btypes/providers/sys.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_json_stringify();require_es_string_trim();var u=require_u2(),postgres_constraints=require_postgres_constraints(),b_string=require_b_string(),StaticObject=require_StaticObject().default,{render_bool,bool_equals,to_bool,format_boolean_message,format_boolean_number_message}=require_boolean_utilities(),{build_simple}=require_generate_utilities(),{COMPOSER_INPUT_TYPES}=require_composer();module.exports={get(id){if(id==="error")return build_simple(id,{messages:{code:{description:"'s code",section:"Data Fields",ret_btype:"text",fn(a,b){return a==null?void 0:a.child("code").get()}},message:{description:"'s message",section:"Data Fields",ret_btype:"text",fn(a,b){return a==null?void 0:a.child("message").get()}}},display(){return"Error"},runmode_display(a){return a==null?void 0:a.child("message").get()},equals(){return!1},storable:!1,bindable:!1,get_sample(){return new StaticObject({code:"SAMPLE",message:"THIS IS A SAMPLE"},null,"sys.error")},convert_to_bubble_instance(val){return val},cast(val){return val}});if(id==="json")return build_simple(id,{display(){return"json"},runmode_display(json){return JSON.stringify(json)},equals(a,b){return JSON.stringify(a)===JSON.stringify(b)},storable:!1,bindable:!1,get_sample(){return{}},cast(x){return x},messages:{}});if(id==="bool")return build_simple(id,{messages:{and_:{description:" and ",section:"Operators",ret_btype:"sys.bool",arg_btype:"sys.bool",fn(a,b){return to_bool(a)&&to_bool(b)},can_shortcircuit_args(a){var _to_bool;return((_to_bool=to_bool(a))!=null?_to_bool:!1)===!1}},or_:{description:" or ",section:"Operators",ret_btype:"sys.bool",arg_btype:"sys.bool",fn(a,b){return to_bool(a)||to_bool(b)},can_shortcircuit_args(a){return to_bool(a)===!0}},format_boolean:format_boolean_message,format_boolean_number:format_boolean_number_message},display(){return"yes / no"},composer_input_type:COMPOSER_INPUT_TYPES.BOOLEAN,runmode_display:render_bool,export_to_string(val,context){return context.booleans_yes_no?render_bool(val):val!=null?val:!1},equals:bool_equals,storable:!1,bindable:!1,synonyms:["boolean"],get_sample(){return!0},convert_to_bubble_instance:to_bool,cast(val){return to_bool(val)},get_JS_object(val){var _this$cast;return(_this$cast=this.cast(val))!=null?_this$cast:!1}});if(id==="uid")return build_simple(id,{display(){return"unique identifier"},composer_input_type:COMPOSER_INPUT_TYPES.TEXT,equals(a,b){return a===b},storable:!1,bindable:!1,synonyms:["text"],get_sample(){return"asdf234sdz"},cast:b_string.cast_to_string,runmode_display:b_string.cast_to_string,messages:{equals:{description:" is ",section:"Operators",ret_btype:"sys.bool",arg_btype:"text",fn(a,b){return a===b},build_pg_constraint:postgres_constraints.equals,build_pg_r_constraint:postgres_constraints.equals,build_pg_relationship:postgres_constraints.equals_both},not_equals:{description:" is not ",section:"Operators",ret_btype:"sys.bool",arg_btype:"text",fn(a,b){return a!==b},build_pg_constraint:postgres_constraints.not_equals,build_pg_r_constraint:postgres_constraints.not_equals,build_pg_relationship:postgres_constraints.not_equals_both},is_empty:{description:" is empty",section:"Operators",ret_btype:"sys.bool",build_pg_constraint:postgres_constraints.is_empty,fn(a,b){return a==null||a===""}},is_not_empty:{description:" is not empty",section:"Operators",ret_btype:"sys.bool",build_pg_constraint:postgres_constraints.is_not_empty,fn(a,b){return a!=null&&a!==""}},trimmed:{description:":trimmed",section:"Other Operators",ret_btype:"text",arg_btype:null,fn(a,b){var _a$trim;return a==null||(_a$trim=a.trim)==null?void 0:_a$trim.call(a)}},length:{description:":number of characters",section:"Other Operators",ret_btype:"number",arg_btype:null,fn(a,b){return a?a.length:0}},truncated:{description:"truncated to ",section:"Other Operators",ret_btype:"text",arg_btype:"number",fn(a,b){return typeof a!="string"?this.ret_btype_null():b?a.slice(0,u.to_num(b)):a}},truncated_right:{description:"truncated from end to ",section:"Other Operators",ret_btype:"text",arg_btype:"number",fn(a,b){if(typeof a!="string")return this.ret_btype_null();if(b){let start=a.length-u.to_num(b);return start<0&&(start=0),a.slice(start)}else return a}}}})},list(){return[]},display(){return"sys"}}}});var require_core_btypes=__commonJS({"lib-browser-old/core/core_btypes/index.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();var builtins=require_builtins(),btypes_registry=require_btypes_registry(),generate_utilities=require_generate_utilities(),core_btypes=exports;core_btypes.plugins={};core_btypes.plugins.boolean=require_boolean();core_btypes.plugins.date=require_date();core_btypes.plugins.dateinterval=require_dateinterval();core_btypes.plugins.date_range=require_date_range();core_btypes.plugins.file=require_file();core_btypes.plugins.geographic_address=require_geographic_address();core_btypes.plugins.image=require_image();core_btypes.plugins.key_combination=require_key_combination();core_btypes.plugins.null=require_null();core_btypes.plugins.number_range=require_number_range();core_btypes.plugins.number=require_number();core_btypes.plugins.text=require_text();core_btypes.plugins.user=require_user();core_btypes.providers={};core_btypes.providers.api_wf_data=require_api_wf_data();core_btypes.providers.api=require_api();core_btypes.providers.custom=require_custom2();core_btypes.providers.element=require_element();core_btypes.providers.list=require_list();core_btypes.providers.option=require_option();core_btypes.providers.struct=require_struct();core_btypes.providers.style=require_style2();core_btypes.providers.sys=require_sys();for(let special_type of builtins.SPECIAL_TYPES){let name=special_type.name(),fn=()=>generate_utilities.create_custom_btype(name,special_type,void 0,void 0,!0);fn.dont_list=!0,core_btypes.plugins[name]=fn}var _plugins_sort_order=["text","number","number_range","null","date","date_range","dateinterval","boolean","file","image","geographic_address","key_combination","user",...builtins.SPECIAL_TYPES.map(v=>v.name())],_providers_sort_order=["sys","element","style","struct","list","custom","api","api_wf_data","option"];core_btypes.all={};for(let plugin_name of _plugins_sort_order)btypes_registry.plugins.add(plugin_name,core_btypes.plugins[plugin_name]),core_btypes.all[plugin_name]=core_btypes.plugins[plugin_name];for(let provider_name of _providers_sort_order)btypes_registry.providers.add(provider_name,core_btypes.providers[provider_name]),core_btypes.all[provider_name]=core_btypes.providers[provider_name]}});var require_get_param_from_url=__commonJS({"lib-browser-old/core/core_datasources/page/get_param_from_url.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_object_values();var Lib=require_lib(),btype_ids=require_btype_ids(),logger=require_logger();module.exports={field_names:{parameter_name:{},type:{default:"parameter"},value:{default:"text"}},get_value(static_property){let value=static_property("value");return static_property("type")==="path_segment"?btype_ids.list_type(value):value},get_runmode_value(_raw){var _raw$P$V,_raw$P,_raw$P2;let value=(_raw$P$V=(_raw$P=_raw["%p"])==null?void 0:_raw$P["%v"])!=null?_raw$P$V:"text";return((_raw$P2=_raw["%p"])==null?void 0:_raw$P2["%x"])==="path_segment"?btype_ids.list_type(value):value},evaluate(properties,context,ret_btype){if(context!=null&&context.__investigate_post_changed_page_url_reads){var _context$element,_context$element$id;logger.warn("url data read after a change page",{properties,element:(_context$element=context.element)==null||(_context$element$id=_context$element.id)==null?void 0:_context$element$id.call(_context$element)}),delete context.__investigate_post_changed_page_url_reads}Lib().pageparam._dependency.register();let r;properties.type==="path"?r=Lib().location.get_pieces().path[1]:properties.type==="path_segment"?r=Lib().location.get_pieces().path:r=Lib().location.get_query()[properties.parameter_name];function recursive_convert(value,x){if(value.custom_type()!=null)return typeof x!="string"||!x?value.get_bubble_null():Lib().db_instance().get(x);if(value.option_set()!=null)return value.from_human(x);if(value.is_list()){let res=Array.isArray(x)?x.map(e=>recursive_convert(value.inner(),e)):[];return Lib().db_instance().static_list(value.inner().id(),res)}else return value.cast(x)}return recursive_convert(ret_btype,r)},get_unique_string(properties,element_instance){}}}});var require_current_user=__commonJS({"lib-browser-old/core/core_datasources/general/current_user.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var state_keys=_interopRequireWildcard(require_state_keys());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var exported={field_names:{},light_evaluation:!0,allowed_when_restricted:!1,allowed_on_element:!0,allowed_on_workflow:!0,allowed_on_backend:!0,allowed_on_privacy_role:!0,allowed_in_style_conditionals:()=>!0,fields(static_property){return[]},get_value(static_property){return"user"},get_unique_string(properties,element_instance){return state_keys.CurrentUser()},display(){return"Current User"},context_key:"current_user",evaluate(properties,context,value){var _context$datasources$,_context$datasources;return value.cast((_context$datasources$=(_context$datasources=context.datasources).current_user)==null?void 0:_context$datasources$.call(_context$datasources,properties,context))},get_runmode_value(){return"user"}},_default=exported;exports.default=_default}});var require_page_data=__commonJS({"lib-browser-old/core/core_datasources/page/page_data.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_includes();require_es_string_includes();var b_string=require_b_string(),page_state=require_page_state(),state_keys=require_state_keys();module.exports={field_names:{name:{}},get_value(static_property){var _page_state$get_page_;return(_page_state$get_page_=page_state.get_page_data_type(static_property("name")))!=null?_page_state$get_page_:"null"},context_key:"page_data",evaluate(properties,context,value){var _context$datasources$,_context$datasources;return value.cast((_context$datasources$=(_context$datasources=context.datasources).page_data)==null?void 0:_context$datasources$.call(_context$datasources,properties,context))},get_runmode_value(_raw,context,properties){var _context$datasources$2,_context$datasources$3,_context$datasources2;return(_context$datasources$2=(_context$datasources$3=(_context$datasources2=context.datasources).page_data_btype)==null?void 0:_context$datasources$3.call(_context$datasources2,properties,context))!=null?_context$datasources$2:"null"},get_unique_string(properties,element_instance){return state_keys.PageData(properties.name)}}}});var require_this_element=__commonJS({"lib-browser-old/core/core_datasources/elements/this_element.js"(exports,module){"use strict";init_define_process_env();init_shim();var btypes=require_btypes(),state_keys=require_state_keys(),Lib=require_lib();module.exports={field_names:{},light_evaluation:!1,allowed_when_restricted:!1,allowed_on_element:!0,allowed_on_workflow:!0,allowed_on_backend:!1,allowed_in_style_conditionals:()=>!0,additional_context_filter(raw_data_source,context){var _raw_data_source$prop;if(((_raw_data_source$prop=raw_data_source.properties)==null?void 0:_raw_data_source$prop.element_id)==null)return context.owner_type==="State";var _context$owner_node$c;return context.owner_type==="Workflow"&&((_context$owner_node$c=context.owner_node.context_element())==null?void 0:_context$owner_node$c.id())===raw_data_source.properties.element_id},get_unique_string(){return state_keys.ThisElement()},get_value(static_property,datasource){var _datasource$context_e5,_datasource$context_e6,_datasource$context_e7;return btypes.get((_datasource$context_e5=(_datasource$context_e6=(_datasource$context_e7=datasource.context_element()).get_value_id)==null?void 0:_datasource$context_e6.call(_datasource$context_e7))!=null?_datasource$context_e5:"null")},evaluate(properties,context,ret_btype){var _Lib$is_api,_Lib;return(_Lib$is_api=(_Lib=Lib()).is_api)!=null&&_Lib$is_api.call(_Lib)?ret_btype.get_bubble_null():context.element},get_runmode_value(_raw,context){var _context$element$elem,_context$element$elem2,_context$element$elem3;return(_context$element$elem=(_context$element$elem2=(_context$element$elem3=context.element.element).get_value_id)==null?void 0:_context$element$elem2.call(_context$element$elem3))!=null?_context$element$elem:"null"}}}});var require_current_page_item=__commonJS({"lib-browser-old/core/core_datasources/page/current_page_item.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_includes();var btypes=require_btypes(),state_keys=require_state_keys();function get_current_page_item_btype(node){var _node$owner$root$get_,_node$owner$root,_node$owner,_node$owner$root$call;return btypes.get((_node$owner$root$get_=(_node$owner$root=(_node$owner=node.owner).root)==null||(_node$owner$root$call=_node$owner$root.call(_node$owner))==null?void 0:_node$owner$root$call.get_static_property("page_item_type"))!=null?_node$owner$root$get_:"null")}module.exports={field_names:{},context_key:"current_page_item",evaluate(properties,context,value){var _context$datasources$,_context$datasources;return value.cast((_context$datasources$=(_context$datasources=context.datasources).current_page_item)==null?void 0:_context$datasources$.call(_context$datasources,properties,context))},get_runmode_value(_raw,context,properties){var _context$datasources$2,_context$datasources$3,_context$datasources2;return(_context$datasources$2=(_context$datasources$3=(_context$datasources2=context.datasources).current_page_item_btype)==null?void 0:_context$datasources$3.call(_context$datasources2,properties,context))!=null?_context$datasources$2:"null"},get_value(static_property,datasource){return get_current_page_item_btype(datasource)},get_unique_string(properties,element_instance){return state_keys.CurrentPageItem()}}}});var require_current_workflow_item=__commonJS({"lib-browser-old/core/core_datasources/workflows/current_workflow_item.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_includes();var btypes=require_btypes(),core_consts=require_core(),appquery=require_appquery(),logger=require_logger();function get_event_param_btype(event,current_key){var _event$get_custom_par,_event$get_custom_par2;let parameters=(_event$get_custom_par=event==null||(_event$get_custom_par2=event.get_custom_parameters)==null?void 0:_event$get_custom_par2.call(event))!=null?_event$get_custom_par:[];for(let{param_id,btype_id}of parameters)if(param_id===current_key)return btype_id;return"null"}function get_wf_item_btype_with_backup(event,current_key){if(["OnError","OnPageError"].includes(event==null?void 0:event.type()))return"sys.error";let btype_id=get_event_param_btype(event,current_key);if(btype_id==="null"){var _event$get_static_pro;btype_id=(_event$get_static_pro=event==null?void 0:event.get_static_property("custom_event_data_type"))!=null?_event$get_static_pro:"null"}return btype_id}module.exports={field_names:{param_id:{default:core_consts.LEGACY_PARAM_ID}},get_value(static_property,datasource){var _datasource$owner$eve,_datasource$owner;let event=(_datasource$owner$eve=(_datasource$owner=datasource.owner).event)==null?void 0:_datasource$owner$eve.call(_datasource$owner),param_id=static_property("param_id");return btypes.get(get_wf_item_btype_with_backup(event,param_id))},evaluate(properties,context,ret_btype){var _context$datasources$,_context$datasources;return ret_btype.cast((_context$datasources$=(_context$datasources=context.datasources).get_wf_param)==null?void 0:_context$datasources$.call(_context$datasources,properties))},get_runmode_value(_raw,context,properties){var _context$event;if(!context.event_id&&!context.event)return"null";context.event||logger.verbose("Missing event!!",{event_id:context.event_id});let event=(_context$event=context.event)!=null?_context$event:appquery.workflow_item(context.event_id);return get_wf_item_btype_with_backup(event,properties.param_id)},get_unique_string(properties,element_instance){}}}});var require_current_data_item=__commonJS({"lib-browser-old/core/core_datasources/workflows/current_data_item.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_includes();var btypes=require_btypes();module.exports={field_names:{},get_value(static_property,datasource){var _datasource$owner$eve,_datasource$owner,_btype_id;let event=(_datasource$owner$eve=(_datasource$owner=datasource.owner).event)==null?void 0:_datasource$owner$eve.call(_datasource$owner),btype_id=event?["OnError","OnPageError"].includes(event.type())?"sys.error":event.get_static_property("data_trigger_type"):void 0;return(_btype_id=btype_id)!=null||(btype_id="null"),btypes.get(btype_id)},context_key:"current_data_item",evaluate(properties,context,value){var _context$datasources$,_context$datasources;return value.cast((_context$datasources$=(_context$datasources=context.datasources).current_data_item)==null?void 0:_context$datasources$.call(_context$datasources,properties,context))},get_runmode_value(_raw,context,properties){var _context$datasources$2,_context$datasources$3,_context$datasources2;return(_context$datasources$2=(_context$datasources$3=(_context$datasources2=context.datasources).current_data_item_btype)==null?void 0:_context$datasources$3.call(_context$datasources2,properties,context))!=null?_context$datasources$2:"null"},get_unique_string(){}}}});var require_old_data_item=__commonJS({"lib-browser-old/core/core_datasources/workflows/old_data_item.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_includes();var btypes=require_btypes();module.exports={field_names:{},get_value(static_property,datasource){var _datasource$owner$eve,_datasource$owner;let event=(_datasource$owner$eve=(_datasource$owner=datasource.owner).event)==null?void 0:_datasource$owner$eve.call(_datasource$owner),value_id=event?["OnError","OnPageError"].includes(event.type())?"sys.error":event.get_static_property("data_trigger_type"):void 0;return btypes.get(value_id!=null?value_id:"null")},context_key:"old_data_item",evaluate(properties,context,value){var _context$datasources$,_context$datasources;return value.cast((_context$datasources$=(_context$datasources=context.datasources).old_data_item)==null?void 0:_context$datasources$.call(_context$datasources,properties,context))},get_runmode_value(_raw,context,properties){var _context$datasources$2,_context$datasources$3,_context$datasources2;return(_context$datasources$2=(_context$datasources$3=(_context$datasources2=context.datasources).old_data_item_btype)==null?void 0:_context$datasources$3.call(_context$datasources2,properties,context))!=null?_context$datasources$2:"null"},get_unique_string(properties,element_instance){}}}});var require_api_event_parameter=__commonJS({"lib-browser-old/core/core_datasources/workflows/api_event_parameter.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();var state_keys=require_state_keys(),appquery=require_appquery();function get_event_param_btype(event,current_key){var _event$get_custom_par,_event$get_custom_par2;let parameters=(_event$get_custom_par=event==null||(_event$get_custom_par2=event.get_custom_parameters)==null?void 0:_event$get_custom_par2.call(event))!=null?_event$get_custom_par:[];for(let{param_id,btype_id}of parameters)if(param_id===current_key)return btype_id;return"null"}module.exports={field_names:{param_id:{},key:{}},get_value(static_property,datasource){var _static_property,_datasource$owner$eve,_datasource$owner;let current_key=(_static_property=static_property("param_id"))!=null?_static_property:static_property("key"),event=(_datasource$owner$eve=(_datasource$owner=datasource.owner).event)==null?void 0:_datasource$owner$eve.call(_datasource$owner);return get_event_param_btype(event,current_key)},evaluate(properties,context,ret_btype){var _properties$param_id,_context$call_paramet;let param_id=(_properties$param_id=properties.param_id)!=null?_properties$param_id:properties.key,pre_cast=(_context$call_paramet=context.call_parameters)==null?void 0:_context$call_paramet[param_id];return ret_btype.cast(pre_cast)},get_runmode_value(_raw,context,properties){var _properties$param_id2;if(!context.event_id)return"null";let event=appquery.workflow_item(context.event_id),param_id=(_properties$param_id2=properties.param_id)!=null?_properties$param_id2:properties.key;return get_event_param_btype(event,param_id)},get_unique_string(properties,element_instance){var _properties$param_id3;return state_keys.APIEventParameter((_properties$param_id3=properties.param_id)!=null?_properties$param_id3:properties.key)}}}});var require_search=__commonJS({"lib-browser-old/core/core_datasources/db/search.js"(exports,module){"use strict";init_define_process_env();init_shim();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_array_iterator();require_web_dom_collections_iterator();require_es_symbol_description();require_es_error_cause();function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var core_ds_field_names=require_core_ds_field_names(),core_ds_editor_utilities=require_core_ds_editor_utilities(),core_ds_db_ops_utilities=require_core_ds_db_ops_utilities(),btypes=require_btypes(),Lib=require_lib(),special_keys=require_special_keys(),state_keys=require_state_keys(),btype_ids=require_btype_ids();function search_value_from_type_to_find(to_find){return to_find?btype_ids.list_type(to_find):"null"}module.exports={field_names:_objectSpread(_objectSpread({type_to_find:{},ignore_empty_constraints:{}},core_ds_field_names.constraints_field_names),core_ds_field_names.sorting_field_names),get_value(static_property){return search_value_from_type_to_find(static_property("type_to_find"))},get_runmode_value(_raw,context,properties){return search_value_from_type_to_find(properties.type_to_find)},get_unique_string(properties,element_instance){let{type_to_find,constraints}=properties;return state_keys.Search(type_to_find,constraints,core_ds_db_ops_utilities.get_sorts_list(properties,!0))},evaluate(properties,context,ret_btype){let{type_to_find,constraints,ignore_empty_constraints}=properties;if(Lib().is_edit_mode())return ret_btype.get_bubble_null();let null_not_dropped=!ignore_empty_constraints,processed_constraints=Lib().bv().resolve_constraints(constraints,null_not_dropped),custom_type=btypes.get(type_to_find).custom_type();if(!(custom_type!=null&&custom_type.exists()))return ret_btype.get_bubble_null();processed_constraints=processed_constraints.filter(c=>core_ds_db_ops_utilities.is_field_okay(c.key,type_to_find));let sorts_list=core_ds_db_ops_utilities.get_sorts_list(properties,!0),searched_id=null;for(let c of processed_constraints){if(c.key===special_keys.UNIQUE_ID&&c.constraint_type==="equals"){if(searched_id==null)searched_id=c.value;else if(searched_id!==c.value)return ret_btype.get_bubble_null()}if(c.constraint_type==="return_empty_set")return Lib().db_instance().static_list(type_to_find,[])}if(searched_id==null||typeof searched_id!="string"||searched_id==="")return Lib().db_instance().find(type_to_find,processed_constraints,sorts_list);{var _thing$_type;let thing=Lib().db_instance().get(searched_id);return!thing.exists()||((_thing$_type=thing._type)==null?void 0:_thing$_type.call(thing))!==type_to_find?ret_btype.get_bubble_null():Lib().db_instance().static_list(type_to_find,[thing]).filter(processed_constraints)}}}}});var require_option_value=__commonJS({"lib-browser-old/core/core_datasources/literals/option_value.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_sort();require_es_array_iterator();require_web_dom_collections_iterator();var Lib=require_lib(),btypes=require_btypes(),option_sets_consts=require_option_sets(),option_sets=require_option_sets2(),btype_ids=require_btype_ids();module.exports={field_names:{option_set:{},option_value:{}},get_value(static_property){let option_set=static_property("option_set");return option_set!=null?static_property("option_value")===option_sets_consts.ALL_OPTIONS?btype_ids.list_type(option_set):option_set:"null"},get_runmode_value(_raw,context,properties){let{option_set}=properties;return option_set!=null?properties.option_value===option_sets_consts.ALL_OPTIONS?btype_ids.list_type(option_set):option_set:"null"},get_unique_string(properties,element_instance){return null},evaluate(properties,context,ret_btype){if(properties.option_value===option_sets_consts.ALL_OPTIONS){let option_set=btypes.get(properties.option_set).option_set();if(option_set!=null&&option_set.exists()){let option_btypes=option_set.values().sort(option_sets.sort_options_fn).filter(value=>!value.deleted()).map(value=>value.name());return Lib().db_instance().static_list(properties.option_set,option_btypes)}else if(properties.option_value===option_sets_consts.ALL_OPTIONS)return Lib().db_instance().static_list(properties.option_set,[])}return properties.option_value}}}});var require_arbitrary_text=__commonJS({"lib-browser-old/core/core_datasources/literals/arbitrary_text.js"(exports,module){"use strict";init_define_process_env();init_shim();var state_keys=require_state_keys();module.exports={field_names:{arbitrary_text:{}},get_value(){return"text"},get_runmode_value(_raw,context,properties){return"text"},get_unique_string(properties,element_instance){return state_keys.ArbitraryText(properties)},evaluate(properties,context,ret_btype){var _properties$arbitrary;return(_properties$arbitrary=properties.arbitrary_text)!=null?_properties$arbitrary:""}}}});var require_arbitrary_datetime=__commonJS({"lib-browser-old/core/core_datasources/literals/arbitrary_datetime.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports={field_names:{parsed_date:{}},get_value(static_property){return"date"},get_runmode_value(_raw,context,properties){return"date"},get_unique_string(properties,element_instance){},evaluate(properties,context,ret_btype){return ret_btype.cast(properties.parsed_date)}}}});var require_one_optionvalue=__commonJS({"lib-browser-old/core/core_datasources/literals/one_optionvalue.js"(exports,module){"use strict";init_define_process_env();init_shim();var btypes=require_btypes(),{is_option_set}=require_btype_ids();module.exports={field_names:{option_set:{},option_value:{}},get_value(static_property){let option_set=static_property("option_set");return option_set!=null?option_set:"null"},get_runmode_value(_raw,context,properties){let{option_set}=properties;return option_set!=null?option_set:"null"},get_unique_string(){return null},evaluate(properties){return properties.option_value}}}});var require_all_optionvalue=__commonJS({"lib-browser-old/core/core_datasources/literals/all_optionvalue.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_sort();require_es_array_iterator();require_web_dom_collections_iterator();var btypes=require_btypes(),Lib=require_lib(),option_sets=require_option_sets2(),btype_ids=require_btype_ids();module.exports={field_names:{option_set:{}},get_value(static_property){let option_set=static_property("option_set");return option_set!=null?btype_ids.list_type(option_set):"null"},get_runmode_value(_raw,context,properties){let{option_set}=properties;return option_set!=null?btype_ids.list_type(option_set):"null"},get_unique_string(properties,element_instance){return null},evaluate(properties,context,ret_btype){let option_set=btypes.get(properties.option_set).option_set();return option_set!=null&&option_set.exists()?Lib().db_instance().static_list(properties.option_set,option_set.values().sort(option_sets.sort_options_fn).filter(value=>!value.deleted()).map(value=>value.name())):null}}}});var require_primitive_literal=__commonJS({"lib-browser-old/core/core_datasources/literals/primitive_literal.js"(exports,module){"use strict";init_define_process_env();init_shim();var btypes=require_btypes();module.exports={field_names:{btype:{},value:{}},get_value(static_property){return static_property("btype")},get_runmode_value(_raw){return _raw.btype},get_unique_string(properties){return String(properties.value)},evaluate(properties){return properties.value}}}});var require_core_ds_api_utilities=__commonJS({"lib-browser-old/core/core_datasources/utilities/core_ds_api_utilities.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.get_api_value_from_provider=get_api_value_from_provider;exports.get_call=get_call;var plugin_getter=_interopRequireWildcard(require_plugin_getter());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function get_call(provider){var _plugin_getter$get_pl;if(!provider)return;let plugin_name=provider.split(".")[0],call_name=provider.split(".").slice(1).join(".");return(_plugin_getter$get_pl=plugin_getter.get_plugin(plugin_name))==null?void 0:_plugin_getter$get_pl.get_call(call_name)}function get_api_value_from_provider(provider){let call=get_call(provider);return call?call.get_value_id():"null"}}});var require_get_data_from_api=__commonJS({"lib-browser-old/core/core_datasources/db/get_data_from_api.js"(exports,module){"use strict";init_define_process_env();init_shim();var core_ds_db_ops_utilities=require_core_ds_db_ops_utilities(),core_ds_api_utilities=require_core_ds_api_utilities(),services_editor_utils=require_editor_utils(),lang=require_lang2(),Lib=require_lib(),state_keys=require_state_keys();module.exports={field_names:lang.DETECT_FIELD_NAMES,evaluate(properties,context,ret_btype,_raw){let call=core_ds_api_utilities.get_call(properties.provider);if(!call||context.responsive_mode)return ret_btype.get_bubble_null();if(call.is_authenticated()){let result=call.execute(null,properties,null,_raw,context);return core_ds_db_ops_utilities.convert_api_call_to_db_object(result,call)}},get_value(static_property){return core_ds_api_utilities.get_api_value_from_provider(static_property("provider"))},get_runmode_value(_raw,context,properties){return core_ds_api_utilities.get_api_value_from_provider(properties.provider)},get_unique_string(properties,element_instance){return state_keys.GetDataFromAPI(properties)}}}});var require_get_mouse_data=__commonJS({"lib-browser-old/core/core_datasources/general/get_mouse_data.js"(exports,module){"use strict";init_define_process_env();init_shim();var core_ds_db_ops_utilities=require_core_ds_db_ops_utilities(),core_ds_api_utilities=require_core_ds_api_utilities(),is_installed=require_is_installed();module.exports={field_names:{},evaluate(properties,context,ret_btype,_raw){let call=core_ds_api_utilities.get_call("interactions.get_mouse_data");if(!call)return ret_btype.get_bubble_null();if(call.is_authenticated()){let result=call.execute(null,properties,null,_raw,context);return core_ds_db_ops_utilities.convert_api_call_to_db_object(result,call)}},get_value(){return core_ds_api_utilities.get_api_value_from_provider("interactions.get_mouse_data")},get_runmode_value(){return core_ds_api_utilities.get_api_value_from_provider("interactions.get_mouse_data")},get_unique_string(properties,element_instance){}}}});var require_element_parent=__commonJS({"lib-browser-old/core/core_datasources/elements/element_parent.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_includes();require_es_string_includes();var core_ds_element_utilities=require_core_ds_element_utilities(),state_keys=require_state_keys();module.exports={field_names:{},get_runmode_value(_raw,context){return core_ds_element_utilities.context_parent_value(context.element.element)},evaluate(properties,context,ret_btype){let targ=core_ds_element_utilities.get_runtime_parent(context);return targ?ret_btype.cast(targ.state("group_data")):ret_btype.get_bubble_null()},get_value(static_property,datasource){return core_ds_element_utilities.element_parent_value(static_property,datasource)},get_unique_string(properties,element_instance){return state_keys.ElementParent()}}}});var require_current_cells_index=__commonJS({"lib-browser-old/core/core_datasources/elements/current_cells_index.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_includes();require_es_string_includes();var core_ds_element_utilities=require_core_ds_element_utilities(),state_keys=require_state_keys();module.exports={field_names:{},get_value(){return"number"},get_runmode_value(){return"number"},evaluate(properties,context,ret_btype){let targ=core_ds_element_utilities.get_runtime_parent(context);if(targ){for(var _targ$state,_targ2;targ!=null&&targ.element.type()!=="GroupItem";){var _targ$parent,_targ;targ=(_targ$parent=(_targ=targ).parent)==null?void 0:_targ$parent.call(_targ)}return(_targ$state=(_targ2=targ)==null?void 0:_targ2.state("cell_index"))!=null?_targ$state:ret_btype.get_bubble_null()}else return ret_btype.get_bubble_null()},get_unique_string(){return state_keys.CurrentCellsIndex()},check_for_errors(static_property,datasource){let context_element=datasource.context_element();if(context_element.parents==null||context_element.parents("RepeatingGroup").length===0&&context_element.parents("TableCrossAxis").length===0)return"You are trying to get the cell index, but this is not in the context of a repeating group"}}}});var require_previous_step=__commonJS({"lib-browser-old/core/core_datasources/workflows/previous_step.js"(exports,module){"use strict";init_define_process_env();init_shim();var appquery=require_appquery(),state_keys=require_state_keys();function get_action(static_property,datasource){let action=appquery.action(static_property("action_id"));if(!action||!action.exists())return null;let next_action=action.next();for(;next_action;){if(datasource.owner.id()===next_action.id())return action;next_action=next_action.next()}return null}module.exports={field_names:{action_id:{}},light_evaluation:!1,allowed_when_restricted:!1,allowed_on_element:!1,allowed_on_workflow:!0,allowed_on_backend:!0,get_required_visible_id(raw_data_source){return raw_data_source.properties.action_id},get_runmode_value(_raw,context,properties){let{action_id}=properties;return context.frozen_state.get(this.get_unique_string({action_id})+"_value")},evaluate(properties,context,ret_btype){var _context$frozen_state;return(_context$frozen_state=context.frozen_state.get(this.get_unique_string(properties)))!=null?_context$frozen_state:ret_btype.get_bubble_null()},get_value(static_property,datasource){var _get_action$return_va,_get_action;return(_get_action$return_va=(_get_action=get_action(static_property,datasource))==null?void 0:_get_action.return_value())!=null?_get_action$return_va:"null"},get_unique_string(properties){return state_keys.PreviousStep(properties.action_id)}}}});var require_get_element=__commonJS({"lib-browser-old/core/core_datasources/elements/get_element.js"(exports,module){"use strict";init_define_process_env();init_shim();var appquery=require_appquery(),core_ds_element_utilities=require_core_ds_element_utilities();function get_element(static_property,datasource){var _datasource$context_e,_datasource$context_e2,_datasource$context_e3,_element$root;let element=appquery.element(static_property("element_id"));return(_datasource$context_e=datasource.context_element())!=null&&(_datasource$context_e2=_datasource$context_e.root)!=null&&(_datasource$context_e3=_datasource$context_e2.call(_datasource$context_e))!=null&&_datasource$context_e3.id()&&(element==null||(_element$root=element.root())==null?void 0:_element$root.id())!==datasource.context_element().root().id()||!core_ds_element_utilities.is_element_visible(element,datasource.context_element())?null:element}module.exports={field_names:{element_id:{}},get_value(static_property,datasource){var _get_element;let id=(_get_element=get_element(static_property,datasource))==null?void 0:_get_element.id();return id?"element."+id:"null"},get_runmode_value(_raw,context,properties){var _context$element$find,_context$element;let element_instance=(_context$element$find=(_context$element=context.element).find_instance_by_id)==null?void 0:_context$element$find.call(_context$element,properties.element_id);return element_instance==null?"null":element_instance.element.get_value_id()},evaluate(properties,context,ret_btype){var _context$element$find2,_context$element$find3,_context$element2;return(_context$element$find2=(_context$element$find3=(_context$element2=context.element).find_instance_by_id)==null?void 0:_context$element$find3.call(_context$element2,properties.element_id))!=null?_context$element$find2:ret_btype.get_bubble_null()},get_unique_string(properties,element_instance){return null}}}});var require_element_ancestor=__commonJS({"lib-browser-old/core/core_datasources/elements/element_ancestor.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_includes();require_es_string_includes();var btypes=require_btypes(),state_keys=require_state_keys(),core_ds_element_utilities=require_core_ds_element_utilities();module.exports={field_names:{fetch_data:{},ancestor_type:{}},_get_value_type(element){var _element$get_static_p;return btypes.get((_element$get_static_p=element==null?void 0:element.get_static_property("group_type"))!=null?_element$get_static_p:"null")},get_value(static_property,datasource){var _element$get_value_id,_element$get_value_id2;let element=core_ds_element_utilities.get_ancestor_element(static_property("ancestor_type"),datasource);return static_property("fetch_data")?(element==null?void 0:element.type())==="TableCrossAxis"?this._get_value_type(element.parent()):this._get_value_type(element):btypes.get((_element$get_value_id=element==null||(_element$get_value_id2=element.get_value_id)==null?void 0:_element$get_value_id2.call(element))!=null?_element$get_value_id:"null")},get_runmode_value(_raw,context,properties){var _element_ancestor$ele,_element_ancestor$ele2;let element_instance=context.element;if(properties.fetch_data){var _value_instance$get_s;let type=properties.ancestor_type!=="TableCrossAxis"?properties.ancestor_type:"Table",value_instance=core_ds_element_utilities.get_runmode_element_ancestor_instance(type,element_instance);return(_value_instance$get_s=value_instance==null?void 0:value_instance.get_static_property("group_type"))!=null?_value_instance$get_s:null}let element_ancestor=core_ds_element_utilities.get_runmode_element_ancestor_instance(properties.ancestor_type,element_instance);return(_element_ancestor$ele=element_ancestor==null||(_element_ancestor$ele2=element_ancestor.element)==null?void 0:_element_ancestor$ele2.get_value_id())!=null?_element_ancestor$ele:null},evaluate(properties,context,ret_btype){let target_instance=context.element;if(properties.fetch_data){for(var _target_instance$stat,_target_instance2;target_instance!=null&&target_instance.element.type()!=="GroupItem";){var _target_instance$pare,_target_instance;target_instance=(_target_instance$pare=(_target_instance=target_instance).parent)==null?void 0:_target_instance$pare.call(_target_instance)}return(_target_instance$stat=(_target_instance2=target_instance)==null?void 0:_target_instance2.state("group_data"))!=null?_target_instance$stat:ret_btype.get_bubble_null()}return target_instance=core_ds_element_utilities.get_runmode_element_ancestor_instance(properties.ancestor_type,context.element),target_instance||ret_btype.get_bubble_null()},get_unique_string(properties,element_instance){return state_keys.ElementAncestor()+properties.ancestor_type}}}});var require_dehydrated=__commonJS({"lib-browser-old/core/core_datasources/db/dehydrated.js"(exports,module){"use strict";init_define_process_env();init_shim();var hydrate2=require_hydrate(),Lib=require_lib();module.exports={field_names:{val:{},value_id:{}},get_value(static_property){return static_property("value_id")},get_runmode_value(_raw,context,properties){let{value_id}=properties;return value_id},evaluate(properties,context,ret_btype){return ret_btype.cast(hydrate2.rehydrate_tree(Lib().db_instance(),properties.val))},get_unique_string(){return null}}}});var require_injected_value=__commonJS({"lib-browser-old/core/core_datasources/db/injected_value.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_includes();var logger=require_logger();function _extract_value_from_parent(datasource){let expressions_with_injected_value=["filtered","format_as_text"],parent=datasource;for(;(_parent=parent)!=null&&_parent.exists()&&parent.path().indexOf(".")!==-1;){var _parent;if(parent.json.name()==="properties"){var _next_parent$name;let next_parent=parent.parent_expression();if(expressions_with_injected_value.includes(next_parent==null||(_next_parent$name=next_parent.name)==null?void 0:_next_parent$name.call(next_parent)))return next_parent.parent_expression().get_value().inner()}parent=parent.parent_expression()}return null}module.exports={field_names:{},get_value(static_property,datasource){var _extract_value_from_p,_datasource$owner,_datasource$owner$E$g,_datasource$owner2,_datasource$owner2$E,_datasource$owner2$E$;let btype=(_extract_value_from_p=_extract_value_from_parent(datasource))==null?void 0:_extract_value_from_p.id();if(btype)return btype;if(typeof(datasource==null||(_datasource$owner=datasource.owner)==null?void 0:_datasource$owner.get_injected_value)=="function"){let owner_btype=datasource.owner.get_injected_value(datasource);if(owner_btype)return owner_btype}return(_datasource$owner$E$g=datasource==null||(_datasource$owner2=datasource.owner)==null||(_datasource$owner2$E=_datasource$owner2.E)==null||(_datasource$owner2$E$=_datasource$owner2$E.get_injected_value)==null?void 0:_datasource$owner2$E$.call(_datasource$owner2$E,datasource.owner))!=null?_datasource$owner$E$g:"null"},context_key:"injected_value",evaluate(properties,context,value){return typeof context.datasources.injected_value!="function"?(logger.info("non-null injected_value passed through",{injected_value_string:String(context.datasources.injected_value)}),value.cast(null)):value.cast(context.datasources.injected_value(properties,context))},get_runmode_value(_raw,context,properties){var _context$datasources$,_context$datasources$2,_context$datasources;return(_context$datasources$=(_context$datasources$2=(_context$datasources=context.datasources).injected_value_btype)==null?void 0:_context$datasources$2.call(_context$datasources,properties,context))!=null?_context$datasources$:"null"},get_unique_string(properties,element_instance){return null}}}});var require_core_formulas=__commonJS({"lib-browser-old/core/core_formulas.js"(exports){"use strict";init_define_process_env();init_shim();var u=require_u2(),b_fiber=require_b_fiber(),logger=require_logger(),core_constants=require_core(),btype_ids=require_btype_ids(),core_formulas=exports;core_formulas.list_of_formulas={};core_formulas.all={};function add(name,data){core_formulas[name]=data,core_formulas.list_of_formulas[name]=data.display,core_formulas.all[name]=data}add("PMT",{display:"Loan Payment",fields:{rate:{content_format:"percentage"},nper:{},pv:{}},evaluate(_ref){let{rate,nper,pv}=_ref,fv=0,type=0;if(rate===0)return u.to_num(-(pv+fv)/nper);let pvif=Math.pow(1+rate,nper),pmt=rate/(pvif-1)*-(pv*pvif+fv);return type===1&&(pmt/=1+rate),u.to_num(pmt)},testing:{properties:{rate:.1,nper:10,pv:1e3},result:-162.74539488251153}});add("CoordToAddress",{display:"Coordinates to Address",fields:{latitude:{},longitude:{}},ret_btype:"geographic_address",evaluate(val){return{lat:val.latitude,lng:val.longitude}},testing:{ignore:!0}});add("RandomString",{display:"Generate random string",fields:{length:{default:6,caption:"Length of characters"},letters:{default:!0,editor:"Checkbox",caption:"Use letters"},non_cap:{default:!0,editor:"Checkbox",caption:"Use non capitalized letters"},numbers:{default:!1,editor:"Checkbox",caption:"Use numbers"},special_chars:{default:!1,editor:"Checkbox",caption:"Use special characters"}},ret_btype:"text",evaluate(val,context){if(!val)return"";if(context.is_in_partial)return"not available in debugger";let{length,letters,non_cap,numbers,special_chars}=val,possible_chars="";letters&&(possible_chars+="ASDFGHJKLZXCVBNMQWERTYUIOP"),non_cap&&(possible_chars+="qwertyuiopasdfghjklzxcvbnm"),numbers&&(possible_chars+="1234567890"),special_chars&&(possible_chars+="{}[];:/<>?_+~!@#");let get_random;context!=null&&context.random_generator?get_random=max=>context.random_generator.random(0,max):get_random=max=>Math.random()*max;let res="";length>core_constants.SLOW_RANDOM_LENGTH&&logger.owner_warn("Probably slow random generation",{display:"Generating a random string > 100,000 characters can slow down workflows and time out, consider using a smaller random string"});for(let i=0;i<Math.abs(length);i++)i%1e3===0&&b_fiber.optional_pause(),res+=possible_chars.charAt(Math.floor(get_random(possible_chars.length)));return res},testing:{ignore:!0}});add("SumProduct",{display:"Calculate sumproduct",fields:{list_1:{value:btype_ids.list_type("number"),caption:"List 1"},list_2:{value:btype_ids.list_type("number"),caption:"List 2"}},evaluate(val,context){if(!val)return 0;let _get_list=a=>{var _a$all,_a$all2;return(_a$all=a==null||(_a$all2=a.all)==null?void 0:_a$all2.call(a))!=null?_a$all:a},list_1=_get_list(val.list_1),list_2=_get_list(val.list_2);if(!(list_1!=null&&list_1.length)||!(list_2!=null&&list_2.length))return 0;let min_length=Math.min(list_1.length,list_2.length),res=0;for(let a=0;a<min_length;a++)res+=list_1[a]*list_2[a];return res},testing:{ignore:!0}})}});var require_formulas_datasource=__commonJS({"lib-browser-old/core/core_datasources/formulas/formulas_datasource.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();var{S}=require_shrink(),generic_actions_utilities=require_generic_actions_utilities(),core_formulas=require_core_formulas(),Lib=require_lib(),lang=require_lang2(),decaf=require_decaf();module.exports={get_value(static_property){var _core_formulas$formul,_core_formulas$formul2;let formula=static_property("formula_type");return(_core_formulas$formul=(_core_formulas$formul2=core_formulas[formula])==null?void 0:_core_formulas$formul2.ret_btype)!=null?_core_formulas$formul:"number"},field_names:lang.DETECT_FIELD_NAMES,get_runmode_value(_raw,context,properties){var _core_formulas$formul3,_core_formulas$formul4;let formula=properties.formula_type;return(_core_formulas$formul3=(_core_formulas$formul4=core_formulas[formula])==null?void 0:_core_formulas$formul4.ret_btype)!=null?_core_formulas$formul3:"number"},get_unique_string(properties,element_instance){},evaluate(properties,context,ret_btype){var _formula_data$evaluat;let formula_data=core_formulas[properties.formula_type];return(_formula_data$evaluat=formula_data==null?void 0:formula_data.evaluate(properties,context))!=null?_formula_data$evaluat:ret_btype.get_bubble_null()}}}});var require_app_setting=__commonJS({"lib-browser-old/core/core_datasources/general/app_setting.js"(){"use strict";init_define_process_env();init_shim();var b_object=require_b_object(),apps_utilities=require_apps_utilities(),appquery=require_appquery()}});var require_app_text=__commonJS({"lib-browser-old/core/core_datasources/general/app_text.js"(exports,module){"use strict";init_define_process_env();init_shim();var Lib=require_lib(),appquery=require_appquery(),{SETTINGS_TAB}=require_css();module.exports={field_names:{text_id:{},information:{}},get_value(static_property){return"text"},get_runmode_value(_raw,context,properties){return"text"},get_unique_string(properties,element_instance){},evaluate(properties,context,ret_btype){var _Lib$get_text;return properties.text_id&&(_Lib$get_text=Lib().get_text("USER_TEXTS",properties.text_id))!=null?_Lib$get_text:ret_btype.get_bubble_null()}}}});var require_breakpoint=__commonJS({"lib-browser-old/core/core_datasources/general/breakpoint.js"(exports,module){"use strict";init_define_process_env();init_shim();var appquery=require_appquery();module.exports={field_names:{breakpoint_id:{}},get_value(static_property,datasource){return this.breakpoint_in_app(static_property,datasource)?"number":"null"},get_runmode_value(_raw){return"number"},evaluate(properties,context,ret_btype){var _breakpoint$size;let breakpoint=appquery.app_breakpoints()[properties.breakpoint_id];return(_breakpoint$size=breakpoint==null?void 0:breakpoint.size)!=null?_breakpoint$size:ret_btype.get_bubble_null()},get_unique_string(properties,element_instance){}}}});var require_default_breakpoint=__commonJS({"lib-browser-old/core/core_datasources/general/default_breakpoint.js"(exports,module){"use strict";init_define_process_env();init_shim();module.exports={field_names:{},get_value(static_property,datasource){return"number"},get_runmode_value(_raw){return"number"},evaluate(properties,context,ret_btype){var _context$element,_context$element$elem,_context$element$elem2;return(_context$element=context.element)==null||(_context$element$elem=_context$element.element)==null||(_context$element$elem2=_context$element$elem.root())==null?void 0:_context$element$elem2.get_static_property("default_width")},get_unique_string(properties,element_instance){}}}});var require_core_datasources=__commonJS({"lib-browser-old/core/core_datasources/index.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});Object.defineProperty(exports,"APIEventParameter",{enumerable:!0,get:function(){return _api_event_parameter.default}});Object.defineProperty(exports,"AllOptionValue",{enumerable:!0,get:function(){return _all_optionvalue.default}});Object.defineProperty(exports,"AppSetting",{enumerable:!0,get:function(){return _app_setting.default}});Object.defineProperty(exports,"AppText",{enumerable:!0,get:function(){return _app_text.default}});Object.defineProperty(exports,"ArbitraryText",{enumerable:!0,get:function(){return _arbitrary_text.default}});Object.defineProperty(exports,"Breakpoint",{enumerable:!0,get:function(){return _breakpoint.default}});Object.defineProperty(exports,"CurrentCellsIndex",{enumerable:!0,get:function(){return _current_cells_index.default}});Object.defineProperty(exports,"CurrentDataItem",{enumerable:!0,get:function(){return _current_data_item.default}});Object.defineProperty(exports,"CurrentPageItem",{enumerable:!0,get:function(){return _current_page_item.default}});Object.defineProperty(exports,"CurrentUser",{enumerable:!0,get:function(){return _current_user.default}});Object.defineProperty(exports,"CurrentWorkflowItem",{enumerable:!0,get:function(){return _current_workflow_item.default}});Object.defineProperty(exports,"DateTime",{enumerable:!0,get:function(){return _arbitrary_datetime.default}});Object.defineProperty(exports,"DefaultBreakpoint",{enumerable:!0,get:function(){return _default_breakpoint.default}});Object.defineProperty(exports,"Dehydrated",{enumerable:!0,get:function(){return _dehydrated.default}});Object.defineProperty(exports,"ElementAncestor",{enumerable:!0,get:function(){return _element_ancestor.default}});Object.defineProperty(exports,"ElementParent",{enumerable:!0,get:function(){return _element_parent.default}});Object.defineProperty(exports,"Formulas",{enumerable:!0,get:function(){return _formulas_datasource.default}});Object.defineProperty(exports,"GetDataFromAPI",{enumerable:!0,get:function(){return _get_data_from_api.default}});Object.defineProperty(exports,"GetElement",{enumerable:!0,get:function(){return _get_element.default}});Object.defineProperty(exports,"GetMouseData",{enumerable:!0,get:function(){return _get_mouse_data.default}});Object.defineProperty(exports,"GetParamFromUrl",{enumerable:!0,get:function(){return _get_param_from_url.default}});Object.defineProperty(exports,"InjectedValue",{enumerable:!0,get:function(){return _injected_value.default}});Object.defineProperty(exports,"OldDataItem",{enumerable:!0,get:function(){return _old_data_item.default}});Object.defineProperty(exports,"OneOptionValue",{enumerable:!0,get:function(){return _one_optionvalue.default}});Object.defineProperty(exports,"OptionValue",{enumerable:!0,get:function(){return _option_value.default}});Object.defineProperty(exports,"PageData",{enumerable:!0,get:function(){return _page_data.default}});Object.defineProperty(exports,"PreviousStep",{enumerable:!0,get:function(){return _previous_step.default}});Object.defineProperty(exports,"PrimitiveLiteral",{enumerable:!0,get:function(){return _primitive_literal.default}});Object.defineProperty(exports,"Search",{enumerable:!0,get:function(){return _search.default}});Object.defineProperty(exports,"ThisElement",{enumerable:!0,get:function(){return _this_element.default}});var safe_require=_interopRequireWildcard(require_safe_require()),_get_param_from_url=_interopRequireDefault(require_get_param_from_url()),_current_user=_interopRequireDefault(require_current_user()),_page_data=_interopRequireDefault(require_page_data()),_this_element=_interopRequireDefault(require_this_element()),_current_page_item=_interopRequireDefault(require_current_page_item()),_current_workflow_item=_interopRequireDefault(require_current_workflow_item()),_current_data_item=_interopRequireDefault(require_current_data_item()),_old_data_item=_interopRequireDefault(require_old_data_item()),_api_event_parameter=_interopRequireDefault(require_api_event_parameter()),_search=_interopRequireDefault(require_search()),_option_value=_interopRequireDefault(require_option_value()),_arbitrary_text=_interopRequireDefault(require_arbitrary_text()),_arbitrary_datetime=_interopRequireDefault(require_arbitrary_datetime()),_one_optionvalue=_interopRequireDefault(require_one_optionvalue()),_all_optionvalue=_interopRequireDefault(require_all_optionvalue()),_primitive_literal=_interopRequireDefault(require_primitive_literal()),_get_data_from_api=_interopRequireDefault(require_get_data_from_api()),_get_mouse_data=_interopRequireDefault(require_get_mouse_data()),_element_parent=_interopRequireDefault(require_element_parent()),_current_cells_index=_interopRequireDefault(require_current_cells_index()),_previous_step=_interopRequireDefault(require_previous_step()),_get_element=_interopRequireDefault(require_get_element()),_element_ancestor=_interopRequireDefault(require_element_ancestor()),_dehydrated=_interopRequireDefault(require_dehydrated()),_injected_value=_interopRequireDefault(require_injected_value()),_formulas_datasource=_interopRequireDefault(require_formulas_datasource()),_app_setting=_interopRequireDefault(require_app_setting()),_app_text=_interopRequireDefault(require_app_text()),_breakpoint=_interopRequireDefault(require_breakpoint()),_default_breakpoint=_interopRequireDefault(require_default_breakpoint());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}safe_require.safe_register("./core/core_datasources",exports)}});var require_plugin_initializer=__commonJS({"lib-browser-old/core/plugin_initializer.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();var safe_require=require_safe_require(),plugin_loader=require_plugin_loader(),plugin_initializer=exports,SERVER_SIDE_OPTIONAL_SERVICES=["algolia_search_engine"];plugin_initializer.initialize=function(){let element_registry=require_element_registry(),core_events=require_core_events(),core_actions=require_core_actions(),core_btypes=require_core_btypes(),core_datasources=require_core_datasources();if(typeof window>"u"||window===null)for(let optional_service of SERVER_SIDE_OPTIONAL_SERVICES)safe_require.safe_require("./optional/services/".concat(optional_service));let by_type={element:element_registry.registered_elements,event:core_events,action:core_actions,btype:core_btypes.all,datasource:core_datasources};plugin_loader.inject_dependencies(by_type)}}});var require_registration=__commonJS({"lib-browser-old/db/values/registration.js"(exports){"use strict";init_define_process_env();init_shim();var registry=require_registry2(),value_types=require_value_types(),db=require_db2(),Dynamic2=require_Dynamic(),StaticNode=require_StaticNode().default,StaticObject=require_StaticObject().default,ListWrapper=require_ListWrapper(),NodeBase=require_NodeBase().default,StaticList=require_StaticList().default,TransformList=require_TransformList().default,ConcatList=require_ConcatList().default,IntersectList=require_IntersectList().default,UniqueList=require_UniqueList().default,SortedList=require_SortedList().default,NodeList=require_NodeList2().default,ClientDBNode=require_ClientDBNode().default,ClientDBObject=require_ClientDBObject(),registration=exports;db.ClientDBNode=ClientDBNode;registration.register_values=function(){registry.add(value_types.DYNAMIC,Dynamic2),registry.add(value_types.LIST_WRAPPER,ListWrapper),registry.add(value_types.NODE_BASE,NodeBase),registry.add(value_types.STATIC_NODE,StaticNode),registry.add(value_types.STATIC_OBJECT,StaticObject),registry.add(value_types.STATIC_LIST,StaticList),registry.add(value_types.TRANSFORM_LIST,TransformList),registry.add(value_types.CONCAT_LIST,ConcatList),registry.add(value_types.INTERSECT_LIST,IntersectList),registry.add(value_types.UNIQUE_LIST,UniqueList),registry.add(value_types.SORTED_LIST,SortedList),registry.add(value_types.NODE_LIST,NodeList),registry.add(value_types.CLIENT_DB_NODE,ClientDBNode),registry.add(value_types.CLIENT_DB_OBJECT,ClientDBObject)}}});var require_client_core=__commonJS({"lib-browser-old/geolocation/client/client_core.js"(exports){"use strict";init_define_process_env();init_shim();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_json_stringify();require_es_symbol_description();require_es_error_cause();function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var b_async=require_b_async3(),b_object=require_b_object(),google_maps=require_google_maps(),b_location_utils=require_b_location_utils(),logger=require_logger(),core=require_core2(),moment=require_b_date().require_moment(),client_core=exports,address_timezone_keys={},tz_cache={};function make_tz_cache_key(data){return data=_objectSpread({},data),data.timestamp=moment(data.timestamp*1e3).utc().startOf("day").valueOf(),JSON.stringify(data)}function request_timezone_impl(data){let hash=make_tz_cache_key(data);return address_timezone_keys[hash]||(address_timezone_keys[hash]=b_async.MakeKey(null,"address_timezone_key"),google_maps.proxy_geolocation_request(data,hash,(res,_hash)=>{(res==null?void 0:res.status)==="OK"?tz_cache[_hash]=res:logger.error("Timezone fetching issue",{res}),address_timezone_keys[_hash].turn()})),b_async.ensure_ready(address_timezone_keys[hash]),tz_cache[hash]}var places_autocomplete_cache={};function request_autocomplete_impl(request,cb){let location_hash,{input,types,location:location2,radius}=request;b_location_utils.is_b_location(location2)&&radius?location_hash=location2.lat+","+location2.lng:location_hash=null;let hash=input+radius+location_hash;if(places_autocomplete_cache[hash]){cb(places_autocomplete_cache[hash]);return}if(google_maps.using_bubble_key())google_maps.proxy_geolocation_request({input,types,radius,location:location_hash,request_type:"autocomplete"},hash,(results,_hash)=>{!results||results.status!=="OK"?cb([]):(places_autocomplete_cache[_hash]=results.predictions,cb(results.predictions))});else{var _google,_google$maps,_google$maps$places;(typeof google>"u"||((_google=google)==null||(_google$maps=_google.maps)==null||(_google$maps$places=_google$maps.places)==null?void 0:_google$maps$places.AutocompleteService)==null)&&google_maps.load_google_map_api(),b_async.WaitFor(google_maps.load_google_map_api(),()=>{let AutocompleteService=new window.google.maps.places.AutocompleteService,data={input,types};location_hash&&b_object.extend(data,{location:new google.maps.LatLng(location2),radius}),AutocompleteService.getQueryPredictions(data,(results,status)=>{status===google.maps.places.PlacesServiceStatus.OK?(places_autocomplete_cache[hash]=results,cb(results)):cb([])})})}}var address_localization_keys={};function request_geocode_impl(data,raw_response_to_obj,result_cb,extra_args){let hash=b_object.json_stringify(data),{alert_on_failure,throw_not_ready}=extra_args;if(!address_localization_keys[hash]){let fail_cb=function(status,_hash,_alert_on_failure){result_cb(null),address_localization_keys[_hash].turn(),_alert_on_failure&&alert("There was an error converting the address "+_hash+" into a geographic location. Error message: "+status)},success_cb=function(result,_hash){result_cb(raw_response_to_obj(result)),address_localization_keys[_hash].turn()};if(address_localization_keys[hash]=b_async.MakeKey(null,"address_localization_keys"),google_maps.using_bubble_key())google_maps.proxy_geolocation_request(data,hash,(response,_hash)=>{!response||response.status!=="OK"?fail_cb(response==null?void 0:response.status,_hash,alert_on_failure):success_cb(response.results[0],_hash)});else{var _google2,_google2$maps;(typeof google>"u"||((_google2=google)==null||(_google2$maps=_google2.maps)==null?void 0:_google2$maps.Geocoder)==null)&&google_maps.load_google_map_api(),b_async.WaitFor(google_maps.load_google_map_api(),()=>{let geocoder=new window.google.maps.Geocoder,MAX_RETRIES=5,retries=MAX_RETRIES;function call_api(_hash,_retries){let data_to_send;data.place_id!=null?data_to_send={placeId:data.place_id}:data.address!=null?data_to_send={address:data.address}:data.lat!=null&&data.lng!=null&&(data_to_send={latLng:new window.google.maps.LatLng(data.lat,data.lng)});let CALLBACK_NOT_FIRED_FALLBACK_AFTER_MS=5e3,missing_callback_failure_handled=!1,timeout_id=setTimeout(()=>{logger.owner_error("Probably invalid Geocoding API key",{display:"Geocoding Service: cannot connect to the service, please check the Geocode API key"}),missing_callback_failure_handled=!0,fail_cb(google.maps.GeocoderStatus.REQUEST_DENIED,hash,alert_on_failure)},CALLBACK_NOT_FIRED_FALLBACK_AFTER_MS);geocoder.geocode(data_to_send,(results,status)=>{if(clearTimeout(timeout_id),!missing_callback_failure_handled)if(status===google.maps.GeocoderStatus.OK)success_cb(results[0],_hash);else if(status===google.maps.GeocoderStatus.OVER_QUERY_LIMIT&&_retries>0){let retries_remaining=_retries-1;setTimeout(()=>{call_api(_hash,retries_remaining)},(MAX_RETRIES-retries_remaining)*(MAX_RETRIES-retries_remaining)*1e3)}else status===google.maps.GeocoderStatus.REQUEST_DENIED&&logger.owner_error("Unauthorized Geocoding API key",{display:"Geocoding Service: This API project is not authorized to use this API.  For more information on authentication and Google Maps JavaScript API services check https://developers.google.com/maps/documentation/javascript/get-api-key"}),fail_cb(status,_hash,alert_on_failure)})}call_api(hash,retries)})}}b_async.ensure_ready(address_localization_keys[hash],!throw_not_ready)}client_core.init=()=>{core.init("client",{request_timezone:request_timezone_impl,request_geocode:request_geocode_impl,request_autocomplete:request_autocomplete_impl,localization_hasher:b_object.json_stringify})}}});var require_payment_converter=__commonJS({"lib-browser-old/shared/payment_converter.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.is_zero_decimal_currency=exports.get_service_corrected_amount=exports.get_bubble_corrected_amount=void 0;require_es_parse_int();require_es_number_to_fixed();require_es_parse_float();require_es_array_includes();var _safe_require=_interopRequireDefault(require_safe_require()),errors=_interopRequireWildcard(require_errors()),_lib=_interopRequireDefault(require_lib());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_safe_require.default.safe_register("./shared/payment_converter",exports);function stripe_amount(amount,in_cents){return parseInt(in_cents?(100*amount).toFixed():amount.toFixed())}function bubble_amount(amount,in_cents){return in_cents?parseFloat(String(amount/100)):parseInt(amount.toFixed())}var bubble_to_service_amount={stripe(bubble_amount2,currency,only_after_bv14){if(bubble_amount2==null)return null;let currency_stored_in_cents;return only_after_bv14&&_lib.default.or_throw().bubble_version()<14?currency_stored_in_cents=!0:currency_stored_in_cents=!is_zero_decimal_currency(currency),stripe_amount(bubble_amount2,currency_stored_in_cents)},braintree(bubble_amount2){return parseFloat(bubble_amount2.toFixed(2))}},get_service_corrected_amount=function(_ref){let{service_name,bubble_amount:bubble_amount2,currency,only_after_bv14}=_ref;if(bubble_to_service_amount[service_name]==null)throw new errors.UnexpectedError("unsupported service",{service_name});return bubble_to_service_amount[service_name](bubble_amount2,currency,only_after_bv14)};exports.get_service_corrected_amount=get_service_corrected_amount;var get_bubble_corrected_amount=function(amount,currency,only_after_bv14){if(amount==null)return null;let currency_stored_in_cents;return only_after_bv14&&_lib.default.or_throw().bubble_version()<14?currency_stored_in_cents=!0:currency_stored_in_cents=!is_zero_decimal_currency(currency),bubble_amount(amount,currency_stored_in_cents)};exports.get_bubble_corrected_amount=get_bubble_corrected_amount;var is_zero_decimal_currency=function(currency){return currency==null?!1:["BIF","CLP","DJF","GNF","JPY","KMF","KRW","MGA","PYG","RWF","UGX","VND","VUV","XAF","XOF","XPF"].includes(currency.toUpperCase())};exports.is_zero_decimal_currency=is_zero_decimal_currency}});var require_Locale=__commonJS({"lib-browser-old/u/shared/Locale.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_number_to_fixed();require_es_regexp_to_string();require_es_regexp_exec();require_es_string_replace();require_es_parse_float();require_es_string_trim();require_es_array_includes();var errors=require_errors(),b_string=require_b_string(),b_number=require_b_number(),mode_check=require_mode_check(),MAX_FORMATTED_DECIMALS=20,LOCALE_CACHE={posix:{},ietf:{}};function cached(flavor,code,fn){if(mode_check.on_server())return fn();let hit=LOCALE_CACHE[flavor][code];return hit!=null?hit:LOCALE_CACHE[flavor][code]=fn()}module.exports=class Locale{constructor(locale_code){let{posix_code,ietf_code}=locale_code;if(this.posix_code=posix_code,this.ietf_code=ietf_code,this.posix_code&&this.ietf_code)throw new errors.UnexpectedError("Can't provide two codes for a Locale");if(this.posix_code)this.ietf_code=Locale.posix_to_ietf(this.posix_code);else if(this.ietf_code)this.posix_code=Locale.ietf_to_posix(this.ietf_code);else throw new errors.UnexpectedError("Must provide a code to construct a Locale")}static from_posix(posix_code){return cached("posix",posix_code,()=>new Locale({posix_code}))}static from_ietf(ietf_code){return cached("ietf",ietf_code,()=>new Locale({ietf_code}))}static posix_to_ietf(posix){let[lang,variant]=posix.split("_");return lang&&variant?"".concat(lang,"-").concat(variant.toUpperCase()):lang}static ietf_to_posix(ietf){let[lang,variant]=ietf.split("-");return lang&&variant?"".concat(lang,"_").concat(variant.toLowerCase()):lang}get_regional_separators(){if(this.decimal_separator==null||this.group_separator==null||this.decimal_digits==null){let numberString=this.format_number(1111111111111111e-7),one_char=numberString[0];for(let i=numberString.length-1;i>=0;i--){let char=numberString.charAt(i);if(char!==one_char){this.decimal_separator=char,this.decimal_digits=numberString.length-i-1;break}}for(let i=0;i<numberString.length;i++){let char=numberString.charAt(i);if(char!=="1"&&char!==this.decimal_separator){this.group_separator=char;break}this.group_separator=""}}return{decimal_separator:this.decimal_separator,group_separator:this.group_separator,decimal_digits:this.decimal_digits}}format_number(val,decimal_places){let number_format,options;if(decimal_places!=null&&(decimal_places=Math.max(0,Math.min(MAX_FORMATTED_DECIMALS,decimal_places))),typeof Intl>"u"||Intl===null)return decimal_places!=null?val.toFixed(decimal_places):val.toString();decimal_places!=null?options={maximumFractionDigits:decimal_places,minimumFractionDigits:decimal_places}:options={maximumFractionDigits:MAX_FORMATTED_DECIMALS};try{number_format=new Intl.NumberFormat(this.ietf_code+"-u-nu-latn",options)}catch(error){number_format=new Intl.NumberFormat(this.ietf_code,options)}return number_format.format(val)}format_decimal(val){let{decimal_separator}=this.get_regional_separators();return b_number.dec_to_string(val).replace(".",decimal_separator)}parse_float(str){if(typeof str!="string")return parseFloat(str);str=str.trim();let{decimal_separator,group_separator}=infer_separators_from_number(str,this.get_regional_separators());group_separator!=null&&group_separator.charCodeAt(0)===160&&(str=b_string.replace_all(str,group_separator," "),group_separator=" ");let common_separators=[",","."," "];for(let sep of common_separators)if(sep!==decimal_separator&&sep!==group_separator&&b_string.safe_contains(str,sep))return NaN;let decimal_found=!1;for(let i=str.length-1;i>=0;i--){let char=str.charAt(i);if(decimal_found){if(char===decimal_separator)return NaN}else(char===group_separator||char===decimal_separator)&&(decimal_found=!0)}return str=b_string.replace_all(str,group_separator,""),decimal_separator!=="."&&(str=b_string.replace_all(str,decimal_separator,".")),parseFloat(str)}};function interpret_separators(str){let interpreted_decimal_separator=null,interpreted_group_separator=null,common_separators=[",","."],decimal_idx=str.length-1;for(;decimal_idx>=0;){let char=str.charAt(decimal_idx);if(common_separators.includes(char)){interpreted_decimal_separator=char;break}decimal_idx-=1}for(let i=0;i<decimal_idx;i++){let char=str.charAt(i);if(char===interpreted_decimal_separator){interpreted_group_separator=char,interpreted_decimal_separator=null;break}else if(common_separators.includes(char)){interpreted_group_separator=char;break}interpreted_group_separator=null}return{interpreted_decimal_separator,interpreted_group_separator}}function is_group_valid(str,separator){if(str.charAt(0)===separator)return!1;let previous_instance_idx=null,current_char_idx=0;for(;current_char_idx<str.length;){if(str.charAt(current_char_idx)!==separator){current_char_idx+=1;continue}if(previous_instance_idx==null&&current_char_idx>3||previous_instance_idx!=null&&current_char_idx-previous_instance_idx!==4)return!1;previous_instance_idx=current_char_idx,current_char_idx+=1}return!(previous_instance_idx==null||current_char_idx-previous_instance_idx!==4)}function infer_separators_from_number(str,regional_separators){let{decimal_separator,group_separator}=regional_separators,lang_decimal_separator=decimal_separator,lang_group_separator=group_separator,{interpreted_decimal_separator,interpreted_group_separator}=interpret_separators(str);return interpreted_decimal_separator!=null&&interpreted_group_separator!=null?{decimal_separator:interpreted_decimal_separator,group_separator:interpreted_group_separator}:interpreted_decimal_separator==null&&interpreted_group_separator==null?{decimal_separator:lang_decimal_separator,group_separator:lang_group_separator}:is_group_valid(str,interpreted_group_separator)?{decimal_separator:interpreted_decimal_separator,group_separator:interpreted_group_separator}:is_group_valid(str,lang_group_separator)&&interpreted_decimal_separator===lang_group_separator?{decimal_separator:lang_decimal_separator,group_separator:lang_group_separator}:{decimal_separator:interpreted_decimal_separator,group_separator:null}}}});var require_pageparamservice=__commonJS({"lib-browser-old/client/pageparamservice.js"(exports,module){"use strict";init_define_process_env();init_shim();var Lib=require_lib(),u=require_u2(),page_thing_utils=require_page_thing_utils();module.exports=class{constructor(){this._dependency=u.Dependency()}invalidate(){u.on_phonegap()||(Lib().location.base_url=document.location.href),Lib().workflow.announce_event("PageLoaded"),this._dependency.invalidate()}get(){if(page_thing_utils.get_page_thing_id(Lib().location)!=null?this.exists=!0:this.exists=!1,this._dependency.register(),this.exists)return page_thing_utils.get_page_thing(Lib().location);var _Lib$element,_Lib$element$get_page,_Lib$element$get_page2;return((_Lib$element=Lib().element)==null||(_Lib$element$get_page=_Lib$element.get_page())==null||(_Lib$element$get_page2=_Lib$element$get_page.element)==null?void 0:_Lib$element$get_page2.get_static_property("page_item_type"))!=null&&console.log("warning: no id specified.  this page expects an id"),null}}}});var require_ResumedElementInstance=__commonJS({"lib-browser-old/lang/elements/ResumedElementInstance.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.ResumedElementInstance=void 0;var _appquery=_interopRequireDefault(require_appquery());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ResumedElementInstance=class{constructor(instance_id,_element_id){this.element=void 0,this.instance_id=instance_id,this._element_id=_element_id,this.element=(0,_appquery.default)().element(this._element_id)}dehydrate(){return this.instance_id}element_id(){return this._element_id}find_instance_by_id(element_id){return null}};exports.ResumedElementInstance=ResumedElementInstance}});var require_json_reloader=__commonJS({"lib-browser-old/client/json_reloader.js"(exports){"use strict";init_define_process_env();init_shim();require_es_weak_map();Object.defineProperty(exports,"__esModule",{value:!0});exports.watchChanges=watchChanges;require_es_array_iterator();require_web_dom_collections_iterator();require_es_regexp_exec();require_es_string_replace();var _notifier_topics=require_notifier_topics(),notifier_client=_interopRequireWildcard(require_client()),_lib=_interopRequireDefault(require_lib()),_appquery=_interopRequireDefault(require_appquery()),_locations=require_locations(),_client_config=_interopRequireDefault(require_client_config2()),logger=_interopRequireWildcard(require_logger()),_u=require_u2();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function watchChanges(handler,badRevision){let forcedRefresh=!1,changePromise=null;function getChanges(){if(forcedRefresh){badRevision();return}changePromise=_lib.default.or_throw().location.post("server://user/app_changes",{last_change:_appquery.default.last_change()}).then(res=>{if(changePromise=null,!(res!=null&&res.length))return;if(res.some(change=>change.action==="overwrite")){forcedRefresh=!0,badRevision();return}let byPath=new Map;for(let{path,data}of res){let joined=path.join(".");if(byPath.has(joined))byPath.set(joined,{path,data});else{let found=!1,toRemove=[];for(let[p,toWrite]of byPath.entries())if(p.indexOf(joined+".")===0)toRemove.push(p);else if(joined.indexOf(p+".")===0){found=!0;let pieces=joined.replace(p+".","").split(".");(toWrite.data==null||typeof toWrite.data!="object")&&(toWrite.data={});let targ=toWrite.data;for(let piece of pieces.slice(0,pieces.length-1))(targ[piece]==null||typeof targ[piece]!="object")&&(targ[piece]={}),targ=targ[piece];targ[pieces[pieces.length-1]]=data}for(let p of toRemove)byPath.delete(p);found||byPath.set(joined,{path,data})}}for(let{path,data}of byPath.values())if(handler!=null&&!handler.can_process(path,data)){forcedRefresh=!0,badRevision();return}let{last_change,last_change_date}=res[res.length-1];_appquery.default.app().json.child("last_change").set(String(last_change)),_appquery.default.app().json.child("last_change_date").set(last_change_date);for(let{path,data}of byPath.values())_appquery.default.app().json.by_path(path.join("."))._set(data),handler!=null&&handler.process(path,data)},err=>{changePromise=null,logger.error((0,_u.ensure_bubble_error)(err)),forcedRefresh=!0,badRevision()})}function scheduleChanges(){changePromise!=null?changePromise.then(getChanges):getChanges()}notifier_client.watch([_notifier_topics.LastChangeTopic,_lib.default.or_throw().appname(),_lib.default.or_throw().app_version()],()=>_appquery.default.app().json.child("last_change_as_of").get(),_ref=>{let{message}=_ref;if(message!=null&&message!==_appquery.default.last_change()){if(handler!=null&&!forcedRefresh){scheduleChanges();return}console.log("PLEASE REFRESH:","last change",message,_appquery.default.last_change()),badRevision()}}),notifier_client.watch([_locations.BREAKING_REVISION_TOPIC],()=>_client_config.default.breaking_revision,_ref2=>{let{version}=_ref2;version!=null&&version!==_client_config.default.breaking_revision&&(console.log("BREAKING REVISION:","breaking revision",version,_client_config.default.breaking_revision),badRevision())})}}});var require_workflowengine=__commonJS({"lib-browser-old/client/workflowengine.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_weak_map();require_es_array_includes();require_es_array_iterator();require_web_dom_collections_iterator();require_web_immediate();require_es_json_stringify();require_es_string_includes();require_es_error_cause();require_es_regexp_exec();require_es_string_search();require_es_string_match();var _events=require_events(),u=_interopRequireWildcard(require_u2()),hydrate2=_interopRequireWildcard(require_hydrate()),mode_check=_interopRequireWildcard(require_mode_check()),url=_interopRequireWildcard(require_url()),configuration=_interopRequireWildcard(require_client_config2()),db_consts=_interopRequireWildcard(require_db()),core_ds_workflow_utilities=_interopRequireWildcard(require_core_ds_workflow_utilities()),node_eval=_interopRequireWildcard(require_node_eval()),_FrozenState=_interopRequireDefault(require_FrozenState()),page_state=_interopRequireWildcard(require_page_state()),logger=_interopRequireWildcard(require_logger()),_lib=_interopRequireDefault(require_lib()),_appquery=_interopRequireDefault(require_appquery()),expressions=_interopRequireWildcard(require_expressions()),locations=_interopRequireWildcard(require_locations2()),_status_bar=_interopRequireDefault(require_status_bar()),_loggable=require_loggable(),_ResumedElementInstance=require_ResumedElementInstance(),json_reloader=_interopRequireWildcard(require_json_reloader());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var WorkflowEngine=class{constructor(){this.debugger=void 0,this.bad_revision=void 0,this._global=void 0,this._initialized=void 0,this.open_server_actions=void 0,this.all_sent_to_server=void 0,this.all_client_completed=void 0,this.all_server_completed=void 0,this.everything_completed=void 0,this.debug_queue=void 0,this.disabled=void 0,this.warn_on_page_change=void 0,this.about_to_change_page=void 0,this.page_context_id=void 0,this.db_limit_reached=void 0,this.app_limit_reached=void 0,this._debugger_waiting=void 0,this._current_debug_run=void 0,this._was_debugging=void 0,this._global=new _events.EventEmitter,this._initialized=u.MakeKey(void 0,"workflow engine initialized"),this.open_server_actions=[],this.all_sent_to_server=u.MakeKeyList(),this.all_client_completed=u.MakeKeyList(),this.all_server_completed=u.MakeKeyList(),this.everything_completed=u.MakeKeyList([this.all_client_completed,this.all_server_completed]),this.debug_queue=[],this.disabled=u.Box(!1),this.about_to_change_page=!1,this.page_context_id=0,mode_check.running_test()||setTimeout(()=>{if((0,_lib.default)()&&!_lib.default.or_throw().is_edit_mode()&&(typeof window<"u"&&window!==null&&!["tour","learn"].includes(_lib.default.or_throw().appname())&&(window.onbeforeunload=()=>{if(this.warn_on_page_change&&!this.about_to_change_page&&!this.can_change_page())return _lib.default.or_throw().get_text("CORE","STILL_CHANGING")}),typeof window<"u"&&window!==null)){if(locations.is_hardcode(_lib.default.or_throw().appname(),_lib.default.or_throw().app_version()))return;u.on_react_native()||json_reloader.watchChanges(null,()=>this.show_bad_revision())}},1e3)}everything_done_key(){return this.everything_completed}can_change_page(){return this.all_client_completed.is_turned()&&this.all_sent_to_server.is_turned()}prompt_to_leave_page(){return!!(!this.warn_on_page_change||this.about_to_change_page||this.can_change_page()||window.confirm(_lib.default.or_throw().get_text("CORE","NAVIGATION_CONFIRMATION")))}show_bad_revision(){if(u.on_react_native()||this.bad_revision)return;this.bad_revision=!0;let bad_rev_div=u.div("bad-revision",$("body"));u.on_phonegap()||u.is_on_mobile_or_tablet()?(bad_rev_div.html(_lib.default.or_throw().get_text("CORE","BAD_REVISION_PHONE")),bad_rev_div.css("font-size","16px")):bad_rev_div.append(_lib.default.or_throw().get_text("CORE","BAD_REVISION")),bad_rev_div.on("click",()=>{u.on_phonegap()&&navigator.splashscreen.show(),window.location.reload(!0)})}show_db_limit_reached(){if(this.db_limit_reached)return;this.db_limit_reached=!0;let db_limit_reached_div=u.div("db-limit-reached",$("body"));db_limit_reached_div.append(_lib.default.or_throw().get_text("CORE","DB_LIMIT_REACHED")),u.is_debug_mode()&&(db_limit_reached_div.css("cursor","pointer"),db_limit_reached_div.on("click",()=>{let settings_tab_link=(0,_appquery.default)().get_editor_link()+"&tab=tabs-6&subtab=Plan";window.open(settings_tab_link)}))}show_app_limit_reached(){if(this.app_limit_reached)return;this.app_limit_reached=!0;let app_limit_reached_div=u.div("app-limit-reached",$("body"));app_limit_reached_div.append(_lib.default.or_throw().get_text("CORE","APP_LIMIT_REACHED")),u.is_debug_mode()&&(app_limit_reached_div.css("cursor","pointer"),app_limit_reached_div.on("click",()=>{let settings_tab_link=(0,_appquery.default)().get_editor_link()+"&tab=tabs-6&subtab=Plan";window.open(settings_tab_link)}))}toggle(){this.disabled(!this.disabled())}set_debugger(debugger1){this.debugger=debugger1}debug(item,properties_promise,context){if(this.debugger==null||item.get_static_property("workflow_disabled"))return u.Promise(!0);let promise=u.Promise(null,"waiting for debugger to finish with "+item.id()),next=()=>{promise.resolve(void 0),this._debugger_send_next_item(!0)};return this.debug_queue.push({item,context,next,properties_promise}),this._debugger_send_next_item(),promise}_debugger_send_next_item(ready){if(ready&&(this._debugger_waiting=!1),this._debugger_waiting)return;let entry;if(this._current_debug_run==null)entry=this.debug_queue.shift();else{entry=null;for(let e of this.debug_queue)if(e.context.run_id===this._current_debug_run){entry=e,u.array_remove(this.debug_queue,entry);break}}if(entry!=null){this._debugger_waiting=!0,this._was_debugging=!0;let{item,context,next,properties_promise}=entry;this._current_debug_run=context.run_id,properties_promise.callback((err,properties)=>{if(err)this._debugger_waiting=!1,next();else{let partial=expressions.make_partial_expression_evaluator(context);this.debugger.highlight(item,properties,partial,context,next)}})}}debug_done(run_id){this._current_debug_run===run_id&&(this._current_debug_run=null),setImmediate(()=>{if(this.debug_queue.length===0&&this._was_debugging&&!this._debugger_waiting){var _this$debugger;(_this$debugger=this.debugger)==null||_this$debugger.all_finished(()=>this.debug_queue.length===0&&!this._debugger_waiting),this._was_debugging=!1}else this._debugger_send_next_item()})}announce_event(event_name){this._global.emit(event_name)}on_event(event_name,callback){this._global.setMaxListeners(200),this._global.on(event_name,callback)}off_event(event_name,callback){this._global.removeListener(event_name,callback)}abort_server_calls(){return this.bad_revision?new u.UserError("BAD_REVISION"):this.db_limit_reached?new u.UserError("DB_LIMIT_REACHED"):this.app_limit_reached?new u.UserError("APP_LIMIT_REACHED"):null}run_workflows(context,events,warn_on_page_change){var _context$datasources;let promise=u.Promise(null,"running workflows");if((_context$datasources=context.datasources)!=null||(context.datasources=page_state.get_basic_datasources(context.element.element.root())),context.page_context_id=this.page_context_id,!context.element)throw new u.UnexpectedError("context must contain an element");context.frozen_state||new _FrozenState.default(context);let frozen_key=this.all_sent_to_server.make(30,"freezing workflows"),workflows_started=this.all_client_completed.make(30,"starting workflows");if(warn_on_page_change){this.warn_on_page_change=!0;let try_turn_off_warning=()=>{this.can_change_page()?this.warn_on_page_change=!1:u.WaitFor(this.all_client_completed,this.all_sent_to_server,()=>{setTimeout(try_turn_off_warning,100)})};try_turn_off_warning()}return context.frozen_state.freeze_workflows(events,err=>{if(err)frozen_key.turn(),workflows_started.turn(),promise.reject(err);else{let events_and_contexts=events.map(event=>({event,context:this.create_context(context,event)}));promise.resolve(this.should_events_run(events_and_contexts).then(filtered=>this.refreeze_states(filtered).then(filtered2=>{try{filtered2=this.filter_invalid_states(filtered2),this._start_workflows_on_server(filtered2),frozen_key.turn();let workflow_results=u.Promise(!0);for(let entry of filtered2)workflow_results=workflow_results.then(()=>this._run_workflow(entry.context,entry.event));return workflow_results.then(()=>filtered2.map(entry=>entry.event))}finally{frozen_key.turn(),workflows_started.turn()}}),err2=>(frozen_key.turn(),err2)))}}),promise}cancel_all_workflows(){this.page_context_id+=1,_status_bar.default.force_done()}filter_invalid_states(filtered){let results=[];for(let{event,context}of filtered)if(context.frozen_state.has_invalid_state()){let err=new u.OwnerError("Cannot run workflow -- relies on invalid inputs");this.report_error(err,context)}else results.push({event,context});return results}refreeze_states(filtered){let promises=[];for(let{event,context}of filtered){let promise=u.Promise(null,"refreezing");promises.push(promise),context.frozen_state.freeze_workflows([event],err=>{err?promise.reject(err):promise.resolve({event,context})})}return u.promise_array(promises)}_start_workflows_on_server(events_and_contexts){let needs_call=[],abort_err=this.abort_server_calls();for(let{context,event}of events_and_contexts){if(!u.cookies_enabled()&&this.uses_cookies(event))throw new u.UserError(null,"Oops! Your browser seems to have cookies disabled. Make sure cookies are enabled.");if(this.uses_server(event)){if(abort_err)throw abort_err;needs_call.push({context,item:event}),context.is_running_on_server=!0}else context.server_completion_promise=u.Promise(!0),context.server_initiation_promise=u.Promise(!0)}this.start_server_call(needs_call)}start_server_call(items_and_contexts){if(items_and_contexts.length===0)return;for(let call_info of items_and_contexts)call_info.context.server_initiation_promise=u.Promise(null,"server call initiated for "+call_info.item.id()),call_info.context.server_completion_promise=u.Promise(null,"server call completed for "+call_info.item.id()),call_info.server_call_id=u.UUID(),call_info.context.server_call_id=call_info.server_call_id,call_info.context.server_call_context="",call_info.context.server_initiation_promise.callback(err=>{err&&call_info.context.server_completion_promise.reject(err)}),this.all_server_completed.add_promise(call_info.context.server_completion_promise);let initiated_key=this.all_sent_to_server.make(30,"start_server_call");u.run_once(30,()=>{let no_user_data,current_user=_lib.default.or_throw().current_user(),current_user_id=current_user._id();current_user_id===db_consts.NO_USER?no_user_data=current_user.raw():no_user_data=void 0;let data={wait_for:u.json_deep_copy(this.open_server_actions),app_last_change:(0,_appquery.default)().last_change(),client_breaking_revision:configuration.breaking_revision,calls:[],timezone_offset:new Date().getTimezoneOffset(),timezone_string:_lib.default.or_throw().current_timezone(),user_id:current_user_id,no_user_data};for(let{context,item,send_to_server,server_call_id}of items_and_contexts)data.calls.push({client_state:context.frozen_state.get_client_state(),run_id:context.run_id,server_call_id,item_id:item.id(),element_id:context.element.element_id(),additional_parameters:send_to_server,uid_generator:context.uid_generator,random_seed:context.random_seed,current_date_time:page_state.get_page_data("Current Date/Time",context).getTime(),current_wf_params:core_ds_workflow_utilities.dehydrate_wf_params(context,value=>hydrate2.dehydrate_tree(value))});return data},(err,data)=>{if(err){for(let{context}of items_and_contexts)context.server_completion_promise.reject(err),context.server_initiation_promise.reject(err);initiated_key.turn();return}_lib.default.or_throw().location.post("server://workflow/start",data).callback((err2,res)=>{err2?err2.message==="BAD_REVISION"?(console.log("PLEASE REFRESH:","workflow",JSON.stringify(data)),this.show_bad_revision()):err2.message==="DB_LIMIT_REACHED"?this.show_db_limit_reached():err2.message==="APP_LIMIT_REACHED"?this.show_app_limit_reached():logger.log(err2):_lib.default.or_throw().db_instance().ensure_object_updates(res.object_updates);for(let{context,server_call_id}of items_and_contexts)if(err2)context.server_completion_promise.reject(err2);else{res=res;let outcome=res[server_call_id];outcome?outcome.outcome==="error"?(err2=u.errors.from_json_client(outcome.error),context.server_completion_promise.reject(err2)):outcome.outcome==="event_failed"?context.server_completion_promise.reject(new u.UserError(null,"We weren't able to complete your action.  Please try again...")):outcome.outcome==="redirect"?(context.server_completion_promise.resolve(outcome),this.wait_for_safe(context,()=>document.location.href=outcome.next_url)):outcome.outcome!=="success"?context.server_completion_promise.reject(new u.UnexpectedError("non-success workflow outcome: "+JSON.stringify(outcome))):context.server_completion_promise.resolve(outcome):context.server_completion_promise.reject(new u.UnexpectedError("missing outcome",{res:(0,_loggable.to_loggable)(res),server_call_id}))}}),setTimeout(()=>initiated_key.turn(),200);for(let{context,server_call_id}of items_and_contexts){context.server_initiation_promise.resolve(void 0);let done=()=>{this.open_server_actions=this.open_server_actions.filter(action=>action.server_call_id!==server_call_id)};context.server_completion_promise.callback(done),setTimeout(()=>{let old=this.open_server_actions;if(done(),old.length!==this.open_server_actions.length){let promise_state=context.server_completion_promise.inspect().state,removed=old.filter(entry=>!this.open_server_actions.includes(entry));logger.error("MANUALLY REMOVING SERVER_CALL_ID",{server_call_id,removed,promise_state})}},5*60*1e3)}})}should_events_run(events_and_contexts){let promises=[];for(let{event,context}of events_and_contexts){let promise=u.Promise(null,"should event run: "+event.id());promises.push(promise),u.run_once(30,()=>this.should_workflow_run(context,event),(err,should_run)=>{err?promise.reject(err):should_run?promise.resolve(!0):promise.resolve(this.debug(event,u.Promise(null),context).then(()=>(this.debug_done(context.run_id),!1)))})}return u.promise_array(promises).then(event_results=>{let filtered=[];for(let idx=0;idx<event_results.length;idx++)event_results[idx]&&filtered.push(events_and_contexts[idx]);return filtered})}_run_workflow(context,event){if(this.disabled()||context.page_context_id<this.page_context_id)return u.Promise(!0);let client_promise=this.debug(event,u.Promise(null),context).then(()=>this.run_subsequent_actions(context,event));this.all_client_completed.add_promise(client_promise);let result_promise=client_promise.then(()=>context.server_initiation_promise);return this.add_error_handling(context,result_promise),result_promise}create_context(base_context,event){var _base_context$uid_gen,_base_context$random_,_base_context$datasou,_base_context$run_id;let seed=u.get_random_seed(),uid_generator=(_base_context$uid_gen=base_context.uid_generator)!=null?_base_context$uid_gen:{timestamp:Date.now(),seed},random_seed=(_base_context$random_=base_context.random_seed)!=null?_base_context$random_:Math.random(),_log=[],context=u.extend({},base_context,{inputs_must_be_valid:!0,datasources:(_base_context$datasou=base_context.datasources)!=null?_base_context$datasou:page_state.get_basic_datasources(base_context.element.element.root()),event,uid_generator,UUID_SEED:u.get_uuid_seed(uid_generator),random_seed,random_generator:new u.Random(random_seed),log:msg=>_log.push(msg),dump_log:()=>_log,run_id:(_base_context$run_id=base_context.run_id)!=null?_base_context$run_id:u.UUID(),get_server_outcome:(item,cb)=>context.server_completion_promise.callback((err,res)=>{if(context.server_workflow_completed=!0,err)cb(err);else{res=res;let{return_value,random_interations,UUID_iterations}=res.step_results[item.id()];UUID_iterations&&UUID_iterations!==context.UUID_SEED.iterations&&(context.UUID_SEED=u.get_uuid_seed({seed:context.UUID_SEED.seed,timestamp:context.UUID_SEED.timestamp,iterations:UUID_iterations})),random_interations&&random_interations!==context.random_generator.iterations&&(context.random_generator=new u.Random(context.random_generator.seed,random_interations)),cb(null,hydrate2.rehydrate_tree(_lib.default.or_throw().db_instance(),return_value))}}),update_from_action:function(item,properties_promise,result){var _this$original_contex;return((_this$original_contex=this.original_context)!=null?_this$original_contex:this).server_workflow_completed&&item.can_fall_back_to_server()?this._fetch_updates(item).then(updates=>{for(let key in updates){let v=updates[key];v.x?this.frozen_state.clear(key):this.frozen_state.set(key,v.v)}return null}):this.frozen_state.update_from_action(item,result,properties_promise,this)},_fetch_updates:item=>context.server_completion_promise.then(res=>{var _state_changes$item$i;let rehydrated=hydrate2.rehydrate_tree(_lib.default.or_throw().db_instance(),(_state_changes$item$i=res.state_changes[item.id()])!=null?_state_changes$item$i:{});return rehydrated==null&&logger.error("unexpected null _fetch_updates result",{res:(0,_loggable.to_loggable)(res),item_id:item.id()}),rehydrated!=null?rehydrated:{}})});return delete context.frozen_state,base_context.frozen_state.clone(context),context}resume_action(context,item){let promise=u.Promise(null,"Resuming "+item.id());return context.log("about to resume "+item.type()+" "+item.id()),item.resume(context,(err,result)=>{if(err)promise.reject(err);else{context.log("successfully resumed "+item.type()+" with result "+String(result));let properties_promise=node_eval.evaluate_action_clientside(item,context);promise.resolve(context.update_from_action(item,properties_promise,result).then(()=>this.run_subsequent_actions(context,item)))}}),promise}run_subsequent_actions(context,item){if(context.page_context_id<this.page_context_id)return u.Promise(!0);let next=item.next();if(next==null)return context.log("workflow is finished"),u.Promise(!0);let properties_promise=node_eval.evaluate_action_clientside(next,context);return this.debug(next,properties_promise,context).then(()=>{var _ref;let promise=u.Promise(null,(_ref="Running action "+(next==null?void 0:next.id()))!=null?_ref:"<done>");return context.log("about to run "+next.type()+" "+next.id()),["TriggerCustomEvent","TriggerCustomEventFromReusable"].includes(next.type())?promise.resolve(this.start_custom_workflow(context,next)):next.run(context,properties_promise,(err,result)=>{err?err==="aborted"?promise.resolve(void 0):promise.reject(err):(context.log("successfully ran "+next.type()+" "+next.id()+" with result "+String(result)),context.update_from_action(next,properties_promise,result).callback(err2=>{if(err2){promise.reject(err2);return}if(next.requires_server()&&context.server_completion_promise.inspect().state==="pending"){if(!context.server_call_id)throw new Error("could not find our server call");let action_id=context.server_call_context+next.id();this.open_server_actions.push({server_call_id:context.server_call_id,action_id})}next.type()==="DisplayGroupData"?setTimeout(()=>{promise.resolve(this.run_subsequent_actions(context,next))},0):promise.resolve(this.run_subsequent_actions(context,next))}))}),promise})}start_custom_workflow(context,to_run){let custom_event=(0,_appquery.default)().event(to_run.get_static_property("custom_event")),continuation_promise=()=>this.run_subsequent_actions(context,to_run);return node_eval.evaluate_wf_properties(to_run,context).then(properties=>{let custom_context,should_run;if(!properties.condition)should_run=u.Promise(!1);else{var _context$original_con;let call_args=core_ds_workflow_utilities.wf_params_from_properties(properties);if(custom_context=core_ds_workflow_utilities.build_duplicate_per_item_context(context,call_args),custom_context.event=custom_event,context._previously_run_custom_events?custom_context._previously_run_custom_events=u.extend({},context._previously_run_custom_events):custom_context._previously_run_custom_events={},custom_context._previously_run_custom_events[to_run.id()])throw new u.OwnerError("Circular custom workflow -- custom workflows cannot call themselves (either directly or indirectly)");custom_context._previously_run_custom_events[to_run.id()]=!0,custom_context.original_context=(_context$original_con=context.original_context)!=null?_context$original_con:context,to_run.type()==="TriggerCustomEventFromReusable"?custom_context.element=context.element.find_instance_by_id(to_run.get_static_property("element_id")):custom_context.element=context.element.find_instance_by_id(to_run.root().id()),custom_context.server_call_context+=to_run.id()+".",custom_context.get_server_outcome=(item,cb)=>context.get_server_outcome(to_run,(err,_res)=>{if(custom_context.server_workflow_completed=!0,err){cb(err);return}let res=_res;if(!(item.id()in res)){err=new u.UnexpectedError("Error Getting Server Outcome",{outcome_for:item.id(),have_outcomes:Object.keys(res)}),cb(err);return}let{return_value,random_interations,UUID_iterations}=res[item.id()];UUID_iterations&&UUID_iterations!==context.UUID_SEED.iterations&&(context.UUID_SEED=u.get_uuid_seed({seed:context.UUID_SEED.seed,timestamp:context.UUID_SEED.timestamp,iterations:UUID_iterations})),random_interations&&random_interations!==context.random_generator.iterations&&(context.random_generator=new u.Random(context.random_generator.seed,random_interations)),cb(null,return_value)}),custom_context._fetch_updates=item=>context._fetch_updates(to_run).then(res=>res[item.id()]),should_run=u.run_once(30,()=>this.should_workflow_run(custom_context,custom_event))}return should_run.then(should_run2=>should_run2?this._run_workflow(custom_context,custom_event).then(continuation_promise):continuation_promise())})}_uses(event,thing){for(let action of event.actions())if(action["requires_".concat(thing)]())return!0;return!1}uses_server(event){return this._uses(event,"server")}uses_cookies(event){return this._uses(event,"cookies")}should_workflow_run(context,event){var _context$log,_context$log2;(_context$log=context.log)==null||_context$log.call(context,"in should_workflow run for "+event.id());let res=node_eval.evaluate_event_condition(event,context);return(_context$log2=context.log)==null||_context$log2.call(context,"should_workflow_run: "+String(res)),res}add_error_handling(context,promise){return promise.callback(err=>{if(this.debug_done(context.run_id),err)return this.report_error(err,context)})}report_error(err,context){u.ensure_bubble_error(err).extend({event:(0,_loggable.to_loggable)(context.event),element_instance:(0,_loggable.to_loggable)(context==null?void 0:context.element),log:context==null?void 0:context.dump_log()}),logger.log(err)}wait_for_server(cb){this.all_server_completed.is_turned()?cb():u.WaitFor(this.all_server_completed,()=>{setTimeout(()=>{this.wait_for_server(cb)},10)})}wait_for_safe(context,cb){this.debug_done(context.run_id),this.all_sent_to_server.is_turned()&&this.all_server_completed.is_turned()?(this.about_to_change_page=!0,cb()):u.WaitFor(this.all_sent_to_server,this.all_server_completed,()=>{setTimeout(()=>{this.wait_for_safe(context,cb)},100)})}initialize(){let parsed=url.parse(_lib.default.or_throw().location.base_url,!0),resume_key=parsed.query.resume;if(resume_key){delete parsed.query.resume;let clean_query={};for(let k in parsed.query){let v=parsed.query[k];v!=null&&(clean_query[k]=v)}parsed.query=clean_query,delete parsed.search,_lib.default.or_throw().location.set_url_without_refresh({url:url.format(parsed)}),this.resume(resume_key)}this._initialized.turn()}initialize_key(){return this._initialized}resume_uses_server(to_resume,server_workflow_terminated){return server_workflow_terminated||to_resume.terminate_server_workflow()}make_resume_key(context,to_resume,server_workflow_terminated){if(to_resume.next()!=null||this.resume_uses_server(to_resume,server_workflow_terminated)){let current_wf_params=core_ds_workflow_utilities.dehydrate_wf_params(context,value=>(value==null?void 0:value.dehydrate)!=null?value.dehydrate():value),promise_state=context.server_completion_promise.inspect(),server_outcome_value;promise_state.state!=="fulfilled"?logger.warn("bad server outcome before navigation",promise_state):server_outcome_value=promise_state.value;let resume_data={element_instance:context.element.dehydrate(),element_id:context.element.element_id(),current_wf_params,to_resume:to_resume.id(),frozen_state:context.frozen_state.serialize(),run_id:context.run_id,server_workflow_terminated,uid_generator:context.uid_generator,server_outcome_value};resume_data.uid_generator!=null&&(resume_data.uid_generator.iterations=context.UUID_SEED.iterations);let resume_key=context.run_id;return u.local_storage_put(resume_key,resume_data,!0),resume_key}else return}resume(resume_key,send_to_server){let resume_data=u.local_data_retrieve(resume_key);if(!resume_data)return logger.error("Could not resume workflow, was not able to retrieve data",{resume_key}),u.Promise(!1);let to_resume=(0,_appquery.default)().action(resume_data.to_resume),promise=u.Promise(null,"finished resuming workflow");return u.run_once(30,()=>{_lib.default.or_throw().app_language();let cur=resume_data.element_instance,prefix="",group_item_regex=/(.*?:[a-zA-Z]+)_group_item_.*?_(\d+):/,match=cur.match(group_item_regex);for(;match!=null;){let repeating_instance=hydrate2.rehydrate_tree(_lib.default.or_throw().db_instance(),prefix+match[1]),repeating_index=match[2];repeating_instance.message("draw_till",repeating_index);let layout=repeating_instance.repeating_layout_type==="Table"?repeating_instance.parent().table_element_layout:repeating_instance.repeating_group_layout;layout.raw_list_data(),u.ensure_ready(layout.finished_loading_switch),cur=cur.substring(match[0].length),prefix+=match[0],match=cur.match(group_item_regex)}return{element:hydrate2.rehydrate_tree(_lib.default.or_throw().db_instance(),resume_data.element_instance)}},(err,res)=>{if(err){promise.reject(err);return}let{element}=res;element||(element=new _ResumedElementInstance.ResumedElementInstance(resume_data.element_instance,resume_data.element_id));let base_context={element,run_id:resume_data.run_id,uid_generator:resume_data.uid_generator},frozen_state=_FrozenState.default.deserialize(base_context,resume_data.frozen_state);base_context.frozen_state=frozen_state;let context=this.create_context(base_context,to_resume.event());context.datasources.get_wf_param=core_ds_workflow_utilities.generate_wf_param_datasource(resume_data.current_wf_params),context.log("resuming workflow at action "+to_resume.id()+" "+to_resume.type()),this.resume_uses_server(to_resume,resume_data.server_workflow_terminated)?this.start_server_call([{context,item:to_resume,send_to_server}]):(context.server_completion_promise=u.Promise(resume_data.server_outcome_value),context.server_initiation_promise=u.Promise(!0));let client_promise=this.resume_action(context,to_resume);promise.resolve(client_promise.then(()=>context.server_initiation_promise)),this.add_error_handling(context,promise)}),promise}};module.exports=WorkflowEngine}});var require_latest2=__commonJS({"lib-browser-old/bv/latest.js"(exports){"use strict";init_define_process_env();init_shim();var b_date=require_b_date(),bv=exports;bv.date_code=b_date.date_math;var text_elements=require_text_elements2();bv.apply_dynamic_properties_text=text_elements.apply_dynamic_properties_text;var core_ds_db_ops_utilities=require_core_ds_db_ops_utilities();bv.resolve_constraints=core_ds_db_ops_utilities.resolve_constraints;bv.s3_get=(s3_bucket_api,path,appname)=>s3_bucket_api.get_redirect({path,appname});bv.fileupload_too_large=size=>!1;var auth_consts=require_auth();bv.NO_SUCH_USER=auth_consts.INVALID_LOGIN_CREDENTIALS;bv.WRONG_PASSWORD=auth_consts.INVALID_LOGIN_CREDENTIALS;bv.wrong_password_msg="We didn\u2019t find an account with those login credentials";bv.throw_on_failed_pwd_reset=!1;var runmode_consts=require_runmode();bv.MAX_POPUP_ZINDEX=runmode_consts.MAX_POPUP_ZINDEX}});var require_bubble_version=__commonJS({"lib-browser-old/bv/bubble_version.js"(exports){"use strict";init_define_process_env();init_shim();var u=require_u2(),bubble_version=exports;bubble_version.LATEST_VERSION=27;var _versions=null;bubble_version.get_bv=function(version){return _versions||init(),_versions[version]};var _all_version_messages=null;bubble_version.get_all_version_messages=function(){if(!_all_version_messages){let x=[];for(let i=0;i<=bubble_version.LATEST_VERSION;i++){let bv_obj=_get_bv(i);x.push({id:i,message:bv_obj.message,link:bv_obj.link,date:bv_obj.date})}_all_version_messages=x}return _all_version_messages};var r=__require,_raw={};bubble_version.register=function(num,data){_raw[num]=data};function _get_bv(i){var _raw$i;return(_raw$i=_raw[i])!=null?_raw$i:r("./"+String(i))}function init(){let start;if(u.on_client()){var _window$bubble_versio;start=(_window$bubble_versio=window.bubble_version)!=null?_window$bubble_versio:bubble_version.LATEST_VERSION}else start=0;let processing=require_latest2(),obj={};for(let i=bubble_version.LATEST_VERSION;i>=start;i--)processing=obj[i]=u.extend({},processing,_get_bv(i));_versions=obj}}});var require_editor_settings=__commonJS({"lib-browser-old/editor/editor_settings.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_es_weak_map();require_web_dom_collections_iterator();Object.defineProperty(exports,"__esModule",{value:!0});exports.get_setting=get_setting;exports.write=write;require_es_json_stringify();var u=_interopRequireWildcard(require_u2());function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var defaults={show_short_videos:!1,show_long_property_editor:{status:!0,manually_changed:!1},snap_mode:"edge",show_grid:!1,show_gutter:!0,show_lines:!0,grid_step:60,grid_color:"rgba(210, 210, 210, 0.50)",gutter_step:20,gutter_color:"rgba(210, 210, 210, 0.20)",start_gutter:!0,show_borders:!1,border_color:"rgba(220, 220, 220)",xray_mode:!1,lock_propeditor:!1,show_visual_indicators:!0,show_distances:!0,distance_color:"rgba(255, 0, 0)",only_show_hidden:!0,show_release:!0,show_collaboration_arrows:!0,no_thumbnails:!1,dark_mode:!1},setting_boxes={},KEY_NAME="bubble_editor_settings";function get_cookie(){var _u$readCookie;let raw=u.json_parse((_u$readCookie=u.readCookie(KEY_NAME))!=null?_u$readCookie:"{}",!0);return typeof raw!="object"&&(raw={},u.eraseCookie(KEY_NAME)),raw}function get_stored_settings(){let from_storage=window.localStorage.getItem(KEY_NAME);if(from_storage)return JSON.parse(from_storage);let data=get_cookie();return save_stored_settings(data),u.eraseCookie(KEY_NAME),data}function save_stored_settings(data){window.localStorage.setItem(KEY_NAME,JSON.stringify(data))}var read=function(setting_name){var _data$setting_name,_setting_boxes$settin;if(defaults[setting_name]==null)throw new u.UnexpectedError("Missing default for editor settings "+setting_name);let val=(_data$setting_name=get_stored_settings()[setting_name])!=null?_data$setting_name:defaults[setting_name];return(_setting_boxes$settin=setting_boxes[setting_name])!=null||(setting_boxes[setting_name]=u.Box(val)),val};function write(setting_name,val){var _setting_boxes$settin2;let data=get_stored_settings();data[setting_name]=val,save_stored_settings(data),(_setting_boxes$settin2=setting_boxes[setting_name])==null||_setting_boxes$settin2.call(setting_boxes,val!=null?val:defaults[setting_name])}function get_setting(setting_name){return setting_boxes[setting_name]==null&&read(setting_name),setting_boxes[setting_name]()}}});var require_custom_elements2=__commonJS({"lib-browser-old/core/core_elements/custom_elements.js"(exports){"use strict";init_define_process_env();init_shim();require_es_symbol_description();require_es_error_cause();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_object_values();require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_includes();require_es_string_includes();function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var u=require_u2(),decaf=require_decaf(),json=require_app_json2(),logger=require_logger(),nodes=require_nodes(),ElementInstance=require_ElementInstance(),ServerElementInstance=require_ServerElementInstance(),Transition2=require_Transition(),element_eval=require_element_eval(),element_props=require_element_props(),group_utils=require_groups2(),{ON_ELEMENT,CUSTOM_PROP_IDENTIFIER}=require_custom_elements(),property_applications=require_property_applications(),element_visibility=require_element_visibility(),element_meta_actions=require_element_meta_actions(),popups=require_popups(),floating_groups=require_floating_groups(),groups=require_groups2(),shared_fields=require_shared_fields(),{allow_overrides_check}=require_allow_overrides_check(),{FirstLetterCapitalize}=require_b_string(),btype_ids=require_btype_ids(),evaluate=require_evaluate(),shrink=require_shrink(),Lib=require_lib(),appquery=require_appquery(),editor_settings=require_editor_settings(),LiveExpression=require_LiveExpression(),custom_elements=exports,MissingDef={missing:!0,get_static_property(){},get_default(){},events(){return[]},property(name){return nodes.new_expression(json.EmptyJSON(appquery.app().json,null,"property on missing def"),this)},id(){return"missing"},can_have_children(){return!1},toUniqueString(){return"MissingDef"},get_style_if_exists(){},element_custom_states(){return[]},element_custom_state(){return null},add_specific_messages(){},get_responsive_version(){return 0},raw(){return{}}};function CustomMissing(id){return{get_html(){return"<div>Deleted reusable element</div>"},initialize(){},get_messages(){return[]},get_states(){return[]},get_private_messages(){return[]},can_have_children(){return!1},is_visible_on_page_load(){return!0},add_specific_messages(){},property_applications:[]}}function CustomDefinition(element){let custom_id=element.property("custom_id").get_static(),def=element.app().custom_definition(custom_id);return def!=null&&def.exists()?def:MissingDef}function BasePlugin(element,def){var _def,_def$property$get_sta;if((_def=def)!=null||(def=CustomDefinition(element)),def.missing)return CustomMissing(element.property("custom_id").get_static());let type=(_def$property$get_sta=def.property("element_type").get_static())!=null?_def$property$get_sta:"Group";return Lib().load_plugin(Lib().plugin_prefixes.element+type)}function custom_exists_according_to_derived(element){let custom_id=element.json.child("properties").child("custom_id").get(),custom_by_name=Lib().derived("CustomByName").content();return decaf.object_values(custom_by_name).some(id_and_path=>id_and_path.id===custom_id)}function load_custom(element){var _definition$property$,_definition$property;let definition=CustomDefinition(element),base=BasePlugin(element,definition);definition.missing&&custom_exists_according_to_derived(element)&&logger.error("custom element exists but not found while rendering. possible id_to_path issue",{custom_id:element.json.child("properties").child("custom_id").get(),id_to_path_keys:Lib().app().json.child("_index").child("id_to_path").child_names(),element_definitions_keys:Lib().app().json.child("element_definitions").child_names(),app_json_asset_generation_fiber_id:Lib().app().json.child("generation_fiber_id").get()});let element_type=definition.property("element_type").get_static(),isnt_popup=element_type!=="Popup",is_floating_group=element_type==="FloatingGroup",is_group=element_type==="Group",field_names={data_source:{},edit_custom_definition:{only_edit_mode:!0},min_width:{default:30,no_states:!0},fixed_width:{no_states:!0,default:!1},responsive_alignment:{default:"center",no_states:!0},use_max_width:{no_states:!0,default:!1},max_width:{default:100,optional:!0,no_states:!0},collapse_margin:{default:0,optional:!0,no_states:!0},delete_element:{no_states:!0,only_edit_mode:!0},select_parent:{no_states:!0,only_edit_mode:!0},reveal_in_tree:{no_states:!0,only_edit_mode:!0},lock_in_editor:{no_states:!0,only_edit_mode:!0}},custom_params_array=Object.values((_definition$property$=(_definition$property=definition.property("parameters"))==null?void 0:_definition$property.raw())!=null?_definition$property$:{});for(let custom_param of custom_params_array)field_names=_objectSpread(_objectSpread({},field_names),{},{["".concat(CUSTOM_PROP_IDENTIFIER).concat(custom_param.param_id)]:{no_states:!1,only_edit_mode:!0,optional:custom_param.optional}});isnt_popup?u.extend(field_names,new property_applications.PositionOnly().field_names,element_visibility.visibility_field_names,new property_applications.Dimensions().field_names,{use_max_width:{no_states:!0,default:!1},max_width:{optional:!0,no_states:!0,default:100},collapse_margin:{default:375,optional:!0,no_states:!0}}):u.extend(field_names,popups.greyout_field_names,new property_applications.ShortDimensions().field_names),is_floating_group&&u.extend(field_names,floating_groups.floating_field_names),u.extend(field_names,new property_applications.ResponsiveElement(element).field_names),is_group&&u.extend(field_names,groups.group_field_names);let Plugin={base_name:base.plugin_retrieved_name,property_transformer(element2,property){return function(name){return ON_ELEMENT.includes(name)?["height","width"].includes(name)&&element2.not_resizable()?definition.property(name):property(name):element2.get_styleable_properties()[name]&&definition.get_style_if_exists()&&(!allow_overrides_check(element2,name,definition.field_names())||definition.property(name).raw()==null)?definition.get_style().property(name):definition.property(name)}},get_static_property_transformer(element2,get_static_property){return function(name,suppress_warning){if(ON_ELEMENT.includes(name))if(["height","width"].includes(name)){if(element2.not_resizable())return definition.get_static_property(name,suppress_warning);var _get_static_property;return(_get_static_property=get_static_property(name,suppress_warning))!=null?_get_static_property:definition.get_static_property(name,suppress_warning)}else return get_static_property(name,suppress_warning);return element2.get_styleable_properties()[name]&&definition.get_style_if_exists()&&(!allow_overrides_check(element2,name,definition.field_names())||definition.property(name).raw()==null)?definition.get_style().get_static_property(name,suppress_warning):definition.get_static_property(name,suppress_warning)}},get_style_if_exists_transformer(){return()=>definition.get_style_if_exists()},default_transformer(element2,get_default){return function(name){return ON_ELEMENT.includes(name)?get_default(name):element2.get_styleable_properties()[name]&&definition.get_style_if_exists()&&(!allow_overrides_check(element2,name,definition.field_names())||definition.property(name).raw()==null)?definition.get_style().get_default(name):definition.get_default(name)}},states_transformer(element2){return()=>{var _definition$states,_definition$states2;return(_definition$states=(_definition$states2=definition.states)==null?void 0:_definition$states2.call(definition))!=null?_definition$states:[]}},primary_field(element2){},field_names,styleable_properties:{greyout_color:!1,greyout_blur:!1},property_applications:base==null?void 0:base.property_applications,custom_states(){var _definition$states3,_definition$states4;return(_definition$states3=(_definition$states4=definition.states)==null?void 0:_definition$states4.call(definition))!=null?_definition$states3:nodes.enhance_array([])},element_custom_states(){return definition.element_custom_states()},element_custom_state(name){return definition.element_custom_state(name)},get_default(){},transition(prop_name){let element_transition=element.json.child("transitions").child(prop_name);if(element_transition.exists())return new Transition2(element_transition,element);let definition_transition=definition.transition(prop_name);if(definition_transition)return definition_transition;let style2=definition.get_style_if_exists();if(style2)return style2.transition(prop_name)},get_messages(element2){return base.get_messages(element2)},get_states(element2){return base.get_states(element2)},add_specific_messages(messages,element2){for(let property of Object.values((_element$E$custom_def=(_element$E$custom_def2=element2.E.custom_definition())==null||(_element$E$custom_def3=_element$E$custom_def2.property("parameters"))==null?void 0:_element$E$custom_def3.raw())!=null?_element$E$custom_def:{})){var _element$E$custom_def,_element$E$custom_def2,_element$E$custom_def3,_property$btype_id;let ret_btype=(_property$btype_id=property.btype_id)!=null?_property$btype_id:property.editor_type==="Checkbox"?"boolean":"text";property.is_list&&(ret_btype=btype_ids.list_type(ret_btype)),u.extend(messages,{["".concat(CUSTOM_PROP_IDENTIFIER).concat(property.param_id)]:{description:"'s "+property.param_name,section:"Properties",ret_btype,fn(a){return a.state("".concat(CUSTOM_PROP_IDENTIFIER).concat(property.param_id))},filter_context(context){let parent=context.node,custom_param_name="";for(;parent!=null;){if(parent.node_name().includes(CUSTOM_PROP_IDENTIFIER)){custom_param_name=parent.node_name();break}parent=parent.parent_expression()}return custom_param_name!=="param_".concat(property.param_id)},filter_context_new(context){return context.custom_param_name!=="param_".concat(property.param_id)}}})}return base.add_specific_messages(messages,element2)},get_state_value(element2,name){return base.get_state_value(element2,name)},get_private_messages(element2){return base.get_private_messages(element2)},mandatory_sections(element2){return["GroupType","Background"]},get_html(instance){return base.get_html(instance)},is_popup(element2){return!isnt_popup},not_max_adjustable:base.not_max_adjustable,property_supports_states:!0,property_supports_transitions:!1,can_copy_style:!1,uses_css_responsive:definition.get_responsive_version()>0,can_fit_width:isnt_popup,can_fit_height:!0,solid_component:definition.get_responsive_version()>0?base.solid_component:void 0,use_legacy_in_editor:!0,edit_fallback_component:base.solid_component,register(instance){var _base$register;if(!instance.is_self_nested_custom()){if(instance.split_namespace(),instance.add_to_namespace(instance,definition.id()),instance.run_mode()){u.WaitFor(instance.can_register_workflows(),()=>instance.register_workflows(definition.events()));for(let property of Object.values((_element$E$custom_def4=(_element$E$custom_def5=element.E.custom_definition())==null||(_element$E$custom_def6=_element$E$custom_def5.property("parameters"))==null?void 0:_element$E$custom_def6.raw())!=null?_element$E$custom_def4:{})){var _element$E$custom_def4,_element$E$custom_def5,_element$E$custom_def6;let check_for_circulars;instance.state("".concat(CUSTOM_PROP_IDENTIFIER).concat(property.param_id),instance2=>{if(check_for_circulars)return logger.owner_error("Property ".concat(property.param_name," contains circular reference"),{element_instance:instance2,prop_name:"".concat(CUSTOM_PROP_IDENTIFIER).concat(property.param_id)}),null;try{var _element_eval$evaluat;check_for_circulars=!0;let context=instance2.prop_eval_context();return(_element_eval$evaluat=element_eval.evaluate_property(instance2,"".concat(CUSTOM_PROP_IDENTIFIER).concat(property.param_id)))!=null?_element_eval$evaluat:evaluate.evaluate(shrink.shrink_object(property.default_value),context)[0]}finally{check_for_circulars=!1}})}}(_base$register=base.register)==null||_base$register.call(base,instance)}},register_children(instance){instance.is_self_nested_custom()||!base.can_have_children()||(base.register_children?base.register_children(instance):instance._default_register_children(definition.elements()))},can_defer_drawing(instance){var _base$can_defer_drawi,_base$can_defer_drawi2;return(_base$can_defer_drawi=(_base$can_defer_drawi2=base.can_defer_drawing)==null?void 0:_base$can_defer_drawi2.call(base,instance))!=null?_base$can_defer_drawi:!1},initialize(instance){if(base.initialize(instance),instance.responsive_mode()||instance.run_mode()){var _instance$element$roo;definition.get_responsive_version()>0&&((_instance$element$roo=instance.element.root())==null?void 0:_instance$element$roo.get_responsive_version())<1&&(instance.canvas.css({height:"max-content","grid-template-rows":"max-content"}),instance.element.added_to_container()&&instance.autorun(()=>{let height=instance.current_height();instance.set_height(height,{no_css_update:!0}),instance.canvas.css("height","max-content")}))}if(instance.is_self_nested_custom()){instance.canvas.text("This is a circular Reusable Element... Reusable Elements cannot contain themselves (or other Reusable Elements that contain them).");return}},can_have_children(element2){return base.can_have_children(element2)},get_children_canvas(instance){return base.get_children_canvas(instance)},create_server_children(instance){let container=instance.container.create_child(instance);u.incremental_for_each(definition.elements(),element2=>{element2.exists()&&instance.children.push(new ServerElementInstance(element2))}),instance.child_container=container},attach_to_body(instance){var _base$attach_to_body;return(_base$attach_to_body=base.attach_to_body)==null?void 0:_base$attach_to_body.call(base,instance)},goes_on_document(element2){var _base$goes_on_documen,_base$goes_on_documen2;return(_base$goes_on_documen=(_base$goes_on_documen2=base.goes_on_document)==null?void 0:_base$goes_on_documen2.call(base,element2))!=null?_base$goes_on_documen:!1},goes_on_document_for_drawing(element2){var _base$goes_on_documen3,_base$goes_on_documen4;return(_base$goes_on_documen3=(_base$goes_on_documen4=base.goes_on_document_for_drawing)==null?void 0:_base$goes_on_documen4.call(base,element2))!=null?_base$goes_on_documen3:this.goes_on_document(element2)},no_edit_draw_children(){return!0},is_visible_on_page_load(element2){return base.is_visible_on_page_load(element2)},not_resizable(element2){var _element$root2,_definition$use_respo;return!((_element$root2=element2.root())!=null&&_element$root2.use_responsive_algorithm())||!((_definition$use_respo=definition.use_responsive_algorithm)!=null&&_definition$use_respo.call(definition))?!0:definition.get_responsive_version()>0&&definition.container_layout()==="fixed"},not_draggable(element2){var _base$not_draggable,_base$not_draggable2;return(_base$not_draggable=(_base$not_draggable2=base.not_draggable)==null?void 0:_base$not_draggable2.call(base,element2))!=null?_base$not_draggable:!1},modal(element2){var _base$modal;return(_base$modal=base.modal)==null?void 0:_base$modal.call(base,element2)},get_definition_workflows(element2){return definition.events()},get_visible_workflows(element2){return nodes.enhance_array([...element2.parents().events(),...this.get_definition_workflows(element2)])},get_related_workflows(element2){return function(event_type){let page_workflows=element2.parents().events(),definition_workflows=definition.events(),relevant_to_id=id=>event=>event.element_id()===id&&event.type()===event_type;return nodes.enhance_array([...page_workflows.filter(relevant_to_id(element2.id())),...definition_workflows.filter(relevant_to_id(definition.id()))])}},custom_definition(){return definition}};return base.can_animate&&(Plugin.can_animate=()=>base.can_animate(element)),base.position_canvas&&(Plugin.position_canvas=base.position_canvas),base.do_show&&(Plugin.do_show=base.do_show),base.do_hide&&(Plugin.do_hide=base.do_hide),base.notify_width&&(Plugin.notify_width=base.notify_width),base.get_min_width&&definition.use_responsive_algorithm()&&(Plugin.get_min_width=base.get_min_width),base.uses_inset_instead_of_margin&&(Plugin.uses_inset_instead_of_margin=!0),Plugin}custom_elements.load_custom=u.autorun_cache(load_custom);custom_elements.CustomDefinition=CustomDefinition}});var require_default_lib=__commonJS({"lib-browser-old/lib/default_lib.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_includes();require_es_array_iterator();require_web_dom_collections_iterator();require_web_url();require_web_url_search_params();require_es_object_entries();require_es_regexp_to_string();require_es_parse_int();require_es_regexp_exec();require_es_regexp_test();require_es_promise();var seedrandom=require_seedrandom2(),b_async=require_b_async3(),b_fiber=require_b_fiber(),b_string=require_b_string(),b_object=require_b_object(),errors=require_errors(),mode_check=require_mode_check(),incremental=require_incremental(),Locale=require_Locale(),logger=require_logger(),time_consts=require_time(),b_date=require_b_date(),lib_factory=require_lib_factory(),retryable=require_retryable(),plugin_loader=require_plugin_loader(),PageParamService=require_pageparamservice(),WorkflowEngine=require_workflowengine(),languages=require_languages(),Lib=require_lib(),bubble_version=require_bubble_version(),custom_elements=require_custom_elements2(),default_lib=exports,moment=b_date.require_moment(),CANT_DEEP_COPY=["body","custom_form","formData","custom_retry_handler","__original_request"],DEFAULT_REQUEST_TIMEOUT=3e4;function pre_process_request(req){var _req,_req$method,_req2,_req2$timeout;let no_deep_copy={},deep_copy={};for(let key in req){let value=req[key];CANT_DEEP_COPY.includes(key)?no_deep_copy[key]=value:deep_copy[key]=value}req=b_object.json_deep_copy(deep_copy);for(let k in no_deep_copy){let v=no_deep_copy[k];req[k]=v}return(_req$method=(_req=req).method)!=null||(_req.method="get"),(_req2$timeout=(_req2=req).timeout)!=null||(_req2.timeout=DEFAULT_REQUEST_TIMEOUT),req.gzip=!0,req}function do_request_client(req){return $.ajax(req)}function http_request_client(req){return b_async.Promise(req).then(req2=>{var _req3,_req3$dataType;req2=pre_process_request(req2);let my_promise=b_async.Promise(null,"default_lib.http_request "+req2.url);if(req2.type=req2.method.toUpperCase(),delete req2.method,(_req3$dataType=(_req3=req2).dataType)!=null||(_req3.dataType="jsonp"),req2.data!=null){var _req$headers,_req$type;let content_type=(_req$headers=req2.headers)==null?void 0:_req$headers["Content-Type"],non_json_content_type=content_type!=null&&!b_string.starts_with(content_type,"application/json");if(!["GET","HEAD"].includes((_req$type=req2.type)!=null?_req$type:"GET")&&!non_json_content_type){var _req4,_req4$headers,_req$headers2,_ContentType,_req$headers2$_Conten;(_req4$headers=(_req4=req2).headers)!=null||(_req4.headers={}),(_req$headers2$_Conten=(_req$headers2=req2.headers)[_ContentType="Content-Type"])!=null||(_req$headers2[_ContentType]="application/json"),req2.processData=!1,req2.data=b_object.json_stringify(req2.data)}}else if(req2.body!=null)req2.data=req2.body,req2.contentType=!1,req2.processData=!1,delete req2.body;else if(req2.formData){req2.contentType=!1,req2.processData=!1;let form_data=new FormData;for(let key in req2.formData){let value=req2.formData[key];form_data.append(key,value)}req2.data=form_data,delete req2.formData}if(req2.qs){let url=new URL(req2.url);for(let[key,value]of Object.entries(req2.qs))url.searchParams.append(key,value);req2.url=url.toString(),delete req2.qs}let ajax_request=do_request_client(req2);return ajax_request.done((data,textStatus,jqXHR)=>my_promise.resolve({statusCode:jqXHR.status,body:b_object.json_stringify(data)})),ajax_request.fail((jqXHR,textStatus,errorThrown)=>{var _jqXHR$responseText;return my_promise.resolve({statusCode:jqXHR.status,body:(_jqXHR$responseText=jqXHR.responseText)!=null?_jqXHR$responseText:errorThrown})}),my_promise})}default_lib.get=function(){let plugin_prefixes={};for(let k in plugin_loader.type_to_prefix){let v=plugin_loader.type_to_prefix[k];plugin_prefixes[k]=v+":"}return{bubble_version(){var _ref,_window$bubble_versio,_window;return(_ref=(_window$bubble_versio=(_window=window)==null?void 0:_window.bubble_version)!=null?_window$bubble_versio:this.app().get_public_setting("bubble_version"))!=null?_ref:0},bv(){return bubble_version.get_bv(this.bubble_version())},load_plugin:plugin_loader.load_plugin,plugin_prefixes,load_custom:custom_elements.load_custom,current_timezone(){return moment.tz.guess()},log:logger.log,workflow:new WorkflowEngine,pageparam:new PageParamService,app_language:languages.app_language,get_text:languages.get_text,locale(){return Locale.from_posix(Lib().app_language())},browser_locale(){var _navigator;if(((_navigator=navigator)==null?void 0:_navigator.language)!=null)return Locale.from_ietf(navigator.language)},test_prod:!1,ip:"",app_indicator(appname_or_indicator,app_version,temp_db){var _appname_or_indicator,_appname_or_indicator2,_appname_or_indicator3;if(typeof appname_or_indicator=="string"||appname_or_indicator==null){var _this$appname;return{appname:appname_or_indicator!=null?appname_or_indicator:(_this$appname=this.appname)==null?void 0:_this$appname.call(this),app_version:app_version!=null?app_version:this.app_version(),temp_db:temp_db!=null?temp_db:this.temp_db()}}return(_appname_or_indicator=appname_or_indicator.appname)!=null||(appname_or_indicator.appname=domain_editor.get_appname_from_domain(appname_or_indicator.domain)),(_appname_or_indicator2=appname_or_indicator.app_version)!=null||(appname_or_indicator.app_version=this.app_version()),(_appname_or_indicator3=appname_or_indicator.temp_db)!=null||(appname_or_indicator.temp_db=this.temp_db()),appname_or_indicator},temp_db:null,http_request(req){return mode_check.on_server()?http_request_server(req):http_request_client(req)},experiment(name,num_groups){let current_user=this.current_user();if(!current_user)return-1;let uid=current_user._id(),rng=seedrandom(name+uid);return Math.floor(rng()*num_groups)}}};default_lib.register=function(){lib_factory.getLibFactory().registerLibCreator("default",default_lib.get)}}});var require_client_initializer=__commonJS({"lib-browser-old/client/client_initializer.js"(exports){"use strict";init_define_process_env();init_shim();var initializer=require_initializer(),logger=require_logger(),logging_medium=require_logging_medium(),scheduled_tasks=require_scheduledTasks(),safe_require=require_safe_require(),elementservice=require_elementservice(),client_initializer=exports;require_external();require_auth();var plugin_initializer=require_plugin_initializer(),db_registration=require_registration(),client_geolocation=require_client_core();require_payment_converter();require_decaf();var default_lib=require_default_lib();client_initializer.initialize=function(){if(initializer.initialize(),default_lib.register(),polyfill_browsers(),typeof window<"u"){let moment=require_moment_timezone_min();safe_require.safe_register("moment",moment)}logger.register_logger(logging_medium),scheduled_tasks.start(),plugin_initializer.initialize(),db_registration.register_values(),client_geolocation.init(),elementservice.initialize()};function polyfill_browsers(){var _Math$log;(_Math$log=Math.log2)!=null||(Math.log2=x=>Math.log(x)*Math.LOG2E)}}});var require_http=__commonJS({"lib-browser-old/constants/http.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.HttpStatusCode=exports.HttpHeaderName=void 0;var HttpStatusCode=function(HttpStatusCode2){return HttpStatusCode2[HttpStatusCode2.TooManyRequests=429]="TooManyRequests",HttpStatusCode2[HttpStatusCode2.BadGateway=502]="BadGateway",HttpStatusCode2[HttpStatusCode2.ServiceUnavailable=503]="ServiceUnavailable",HttpStatusCode2[HttpStatusCode2.GatewayTimeout=504]="GatewayTimeout",HttpStatusCode2[HttpStatusCode2.ServerError=500]="ServerError",HttpStatusCode2[HttpStatusCode2.UserSideNetworkError_0=0]="UserSideNetworkError_0",HttpStatusCode2[HttpStatusCode2.UserSideNetworkError_12017=12017]="UserSideNetworkError_12017",HttpStatusCode2}({});exports.HttpStatusCode=HttpStatusCode;var HttpHeaderName=function(HttpHeaderName2){return HttpHeaderName2.RetryAfter="Retry-After",HttpHeaderName2}({});exports.HttpHeaderName=HttpHeaderName}});var require_locationservice=__commonJS({"lib-browser-old/client/locationservice.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();require_es_string_trim();require_es_string_starts_with();require_es_json_stringify();require_es_parse_int();require_es_array_includes();require_es_string_includes();var _window,async_state=require_async_state3(),locations=require_locations2(),Lib=require_lib(),logger=require_logger(),mode_check=require_mode_check(),autorun=require_autorun3(),b_async=require_b_async3(),b_object=require_b_object(),errors=require_errors(),uuid=require_uuid(),analytics=require_analytics(),client_storage=require_client_storage(),client_db=require_client_db(),configuration=require_client_config2(),{HttpStatusCode,HttpHeaderName}=require_http(),{SECOND_MS}=require_time(),request_cache={},_bubble_page_load_id=(_window=window)==null?void 0:_window.bubble_page_load_id,URIS_THAT_UPDATE_UID={"server://workflow/start":!0,"server://user/hi":!0};function _can_return_updated_uid(uri){return URIS_THAT_UPDATE_UID[uri]}function _save_session_uid(res){res!=null&&(window.bubble_session_uid=res.bubble_session_uid)}function _save_cookies_for_phonegap(request){if(mode_check.on_phonegap()||mode_check.on_react_native()){let cookies_string=request.getResponseHeader("Set-Cookie");if(cookies_string){let processed_list=[],splitted_array=cookies_string.split(","),entry=splitted_array[0],i=0;for(;entry;)entry=splitted_array[i],entry.indexOf("expires=")!==-1&&(entry=entry+","+splitted_array[i+1],i++),processed_list.push(entry),i++,entry=splitted_array[i];for(let cookie of processed_list){let splitted=cookie.split("="),name=splitted[0].trim(),val=splitted[1].split(";")[0];client_storage.createCookie(name,val)}}}}module.exports=class extends locations.Location{constructor(base_url,options){var _window2,_window2$addEventList,_window3,_window3$addEventList;super(base_url,options),this.open_requests=b_async.MakeKeyList(),this.online_box=autorun.Box(!0),this.can_reach_server=autorun.Box(!0),(_window2=window)==null||(_window2$addEventList=_window2.addEventListener)==null||_window2$addEventList.call(_window2,"online",()=>{this.online_box(!0)}),(_window3=window)==null||(_window3$addEventList=_window3.addEventListener)==null||_window3$addEventList.call(_window3,"offline",()=>{this.online_box(!1)})}is_online(){return this.online_box()&&this.can_reach_server()}load(){logger.error("Deprecated call to locationservice.load"),Lib().workflow.announce_event("PageLoaded"),Lib().user.ready()}change_page(page,query,hash){document.location.href=this.get_page_url(page,query,hash)}reload_page(){return document.location.reload()}set_url_without_refresh(_ref){let{url,push_state}=_ref;push_state?window.history.pushState({},document.title,url):window.history.replaceState({},document.title,url),this.base_url=url}get(uri,cb){return this.request(uri,"get",null,cb)}post(uri,data,cb){return this.request(uri,"post",data,cb)}put(uri,data,cb){return this.request(uri,"put",data,cb)}delete(uri,cb){return this.request(uri,"delete",null,cb)}request(uri,method,data,cb,timeout,fiber_id,start_time){var _timeout,_start_time,_fiber_id,_request_data$xhrFiel,_request_data$headers;if((_timeout=timeout)!=null||(timeout=500),(_start_time=start_time)!=null||(start_time=Date.now()),Date.now()-start_time>configuration.REQUEST_TTL*2/3)throw new errors.OwnerError("Could not reach server");let promise=b_async.Promise(null,method+" "+uri);(_fiber_id=fiber_id)!=null||(fiber_id=uuid.UUID()),cb&&promise.callback(cb);let original_uri=uri;uri=uri.toLowerCase();let is_bubble=!1,is_meta=!1;if(uri.indexOf("server://")!==-1)uri=this.get_server_base()+uri.split("server://")[1],is_bubble=!0;else if(uri.indexOf("meta://")!==-1){let options={};document.location.href.startsWith(Lib().location.get_base_for_meta())||(options.protocol="HTTPS:"),uri=this.get_base_for_meta(options)+"/"+uri.split("meta://")[1],is_bubble=!0,is_meta=!0}else uri.indexOf("bubble:")===0?(is_bubble=!0,uri=uri.slice(7)):(is_bubble=!1,logger.warn('Using Lib().location.request to hit a non-Bubble server. Use Lib().http_request instead! If this actually is bubble, prefix url with "server://"',{uri}));let request_data={processData:!1,type:method,dataType:"json"};if((_request_data$xhrFiel=request_data.xhrFields)!=null||(request_data.xhrFields={}),(_request_data$headers=request_data.headers)!=null||(request_data.headers={}),(is_meta||mode_check.on_phonegap())&&(request_data.xhrFields.withCredentials=!0),mode_check.on_phonegap()){var _data;(_data=data)!=null||(data={}),data.headers_for_phonegap=Lib().location.base_url}if(method!=="get"&&method!=="delete"){try{var _data2;request_data.data=JSON.stringify((_data2=data)!=null?_data2:{})}catch(err){var _data3;let new_data={},object2=(_data3=data)!=null?_data3:{};for(let k in object2){let v=object2[k];try{new_data[k]=JSON.stringify(v)}catch(inner_err){}}request_data.data=JSON.stringify(new_data)}request_data.contentType="application/json",request_data.headers["cache-control"]="no-cache"}if(is_bubble){var _window4,_window4$read_url,_bubble_page_load_id2;let appname=(_window4=window)==null||(_window4$read_url=_window4.read_url)==null?void 0:_window4$read_url.call(_window4).app_id;mode_check.is_edit_mode()&&appname?request_data.headers["X-Bubble-Appname"]=appname:mode_check.is_plugin_edit_mode()&&(request_data.headers["X-Bubble-Appname"]="meta"),request_data.headers["X-Bubble-Breaking-Revision"]=configuration.breaking_revision,request_data.headers["X-Bubble-R"]=encodeURI(this.base_url),(_bubble_page_load_id2=_bubble_page_load_id)!=null||(_bubble_page_load_id=uuid.LUID()),request_data.headers["X-Bubble-PL"]=_bubble_page_load_id;let active_epoch=client_storage.get_active_epoch();active_epoch&&(request_data.headers["X-Bubble-Epoch-ID"]=active_epoch.id,request_data.headers["X-Bubble-Epoch-Name"]=active_epoch.name),request_data.headers["X-Bubble-Fiber-ID"]=fiber_id;let utm_data=analytics.package_utm_data();utm_data&&(request_data.headers["X-Bubble-UTM-Data"]=utm_data)}let request=$.ajax(uri,request_data);return request.done((res,_,xhr)=>{if(is_bubble&&(async_state.server_connection_problems=!1,this.can_reach_server(!0)),window.start_debugger!=null&&Lib().workflow.debugger!=null){let num=parseInt(xhr.getResponseHeader("X-Bubble-Capacity-Limit"));isNaN(num)||Lib().workflow.debugger.report_capacity_if_exposed_by_plan(num),Lib().workflow.debugger.get_request_size(uri)}return _save_cookies_for_phonegap(request),_can_return_updated_uid(original_uri)&&_save_session_uid(res),client_storage.rebuild_cookies(),client_db.recheck_uid(()=>promise.resolve(res),original_uri)}),request.fail((xhr,text_status,err_string)=>{var _xhr$responseText,_xhr$responseText$ind;let bubble_change_page_header=xhr.getResponseHeader("x-bubble-change-page");if(bubble_change_page_header){let full_url=document.location.href,additional_query_params={referrer:encodeURIComponent(full_url)},query_params=b_object.extend({},Lib().location.get_query(),additional_query_params);this.change_page(bubble_change_page_header,query_params);return}if(_save_cookies_for_phonegap(request),client_storage.rebuild_cookies(),client_db.recheck_uid(),is_bubble&&(xhr.status>=400&&xhr.status<=599?(async_state.server_connection_problems=!1,this.can_reach_server(!0)):(async_state.server_connection_problems=!0,this.can_reach_server(!1))),should_retry(xhr,is_bubble)){xhr.status===HttpStatusCode.UserSideNetworkError_0&&err_string!=null&&logger.warn(new errors.UnexpectedError("Bad request not sent",{status:err_string}));let retry_after_millisecond=get_retry_after_millisecond(xhr,timeout);setTimeout(()=>promise.resolve(this.request(original_uri,method,data,null,retry_after_millisecond*2,fiber_id,start_time)),retry_after_millisecond);return}if((((_xhr$responseText=xhr.responseText)==null||(_xhr$responseText$ind=_xhr$responseText.indexOf)==null?void 0:_xhr$responseText$ind.call(_xhr$responseText,"Chrome Data Compression Proxy"))!==-1||[12019,524].includes(xhr.status))&&timeout<2e3){setTimeout(()=>promise.resolve(this.request(original_uri,method,data,null,timeout*2,fiber_id,start_time)),timeout);return}if(!is_bubble){let response;try{response=b_object.json_parse(xhr.responseText)}catch(error1){response=xhr.responseText}promise.reject(new errors.UnexpectedError(response));return}promise.reject(this.response_to_error(xhr,{uri,request_data,method,fiber_id}))}),this.open_requests.add_key(promise.ready_key()),promise}response_to_error(xhr,data){let{uri,request_data,method,fiber_id}=data!=null?data:{},body=null;if(xhr.responseText&&xhr.getResponseHeader("Content-Type")==="application/json")try{body=JSON.parse(xhr.responseText)}catch(error1){}let headers_string=xhr.getAllResponseHeaders();if(body==null||!body.error_class)return new errors.UnexpectedError("unexpected server response",{statusCode:xhr.status,response_body:xhr.responseText,uri,request_data,method,headers_string,code:fiber_id});let error=errors.from_json_client(body);return error instanceof errors.UnexpectedError&&error.extend({uri,request_data,method}),error}request_synchronous(uri,method,data){var _request_cache$hash;function handle_complete_request(_ref2){let{response,error,cache_status:cache_status2,current_version}=_ref2;cache_status2.version===current_version&&(cache_status2.response=response,cache_status2.error=error,cache_status2.keys.map(key=>key.turn()),cache_status2.version+=1,cache_status2.state="complete")}let hash=b_object.json_stringify({uri,method,data});(_request_cache$hash=request_cache[hash])!=null||(request_cache[hash]={state:"invalidated",version:0});let cache_status=request_cache[hash];if(cache_status.state==="invalidated"){var _cache_status$keys;let current_version=cache_status.version;cache_status.state="pending",(_cache_status$keys=cache_status.keys)!=null||(cache_status.keys=[]),cache_status.keys.push(b_async.MakeKey(null,"request_synchronous "+uri)),this.request(uri,method,data).then(response=>{handle_complete_request({response,cache_status,current_version})},error=>{handle_complete_request({error,cache_status,current_version})})}if(b_async.ensure_ready(cache_status.keys[cache_status.keys.length-1]),cache_status.error)throw cache_status.error;return cache_status.response}wipe_request_cache(uri,method,data){let hash=b_object.json_stringify({uri,method,data});request_cache[hash]!=null&&(request_cache[hash].state="invalidated",request_cache[hash].version+=1,delete request_cache[hash].response,delete request_cache[hash].error)}};var should_retry=(xhr,is_bubble)=>[HttpStatusCode.TooManyRequests,HttpStatusCode.ServiceUnavailable,HttpStatusCode.UserSideNetworkError_0,HttpStatusCode.UserSideNetworkError_12017].includes(xhr.status)||is_bubble&&[HttpStatusCode.BadGateway,HttpStatusCode.GatewayTimeout].includes(xhr.status),get_retry_after_millisecond=(xhr,timeout)=>{let retry_after=xhr.getResponseHeader(HttpHeaderName.RetryAfter);if(retry_after){let retry_after_seconds=Number(retry_after);if(Number.isFinite(retry_after_seconds))return retry_after_seconds*SECOND_MS;{let delta=new Date(retry_after).getTime()-Date.now();if(delta>=0)return delta}}return timeout}}});var require_get_error_message=__commonJS({"lib-browser-old/services/shared/utilities/get_error_message.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.get_error_message=get_error_message;var _client_config=_interopRequireDefault(require_client_config2());function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function get_error_message(data,actual_id){var _data$caption,_data$caption2,_data$caption3,_data$caption4;switch(data.forbidden){case"NOT_PAID":return"The plugin "+((_data$caption=data.caption)!=null?_data$caption:actual_id)+" is published under a commercial license and this app does not have a subscription. Please subscribe in the editor.";case"BLOCKED":return"The plugin "+((_data$caption2=data.caption)!=null?_data$caption2:actual_id)+" is blocked by Bubble.";case"NOT_AUTHORIZED":return"The plugin "+((_data$caption3=data.caption)!=null?_data$caption3:actual_id)+" is published under a private license and this app is not authorized.";case"NOT_TEST_APP":return"The plugin "+((_data$caption4=data.caption)!=null?_data$caption4:actual_id)+" is in test mode and the current app is not the registered test app.";case"ISSUE":{var _data$caption5;let display="The plugin "+((_data$caption5=data.caption)!=null?_data$caption5:actual_id)+" could not be retrieved for this app. ";return _client_config.default.is_dedicated?display+="Please upgrade your Dedicated Cluster and try again.":display+="Please make sure it exists.",display}}}}});var require_pluginservice_getter=__commonJS({"lib-browser-old/services/client/runmode/pluginservice_getter.js"(exports,module){"use strict";init_define_process_env();init_shim();var u=require_u2(),client_config=require_client_config2(),logger=require_logger(),pluginservice=require_pluginservice(),{get_error_message}=require_get_error_message(),_reported_bubble_no_third_party_plugin_once=!1,_shown_warning=!1,TESTING_PLUGIN_WARN_MSG="Using plugins in testing mode can considerably slow down your application as they are not cached. You should only use a test app to test plugins.",TESTING_PLUGIN_WARN_DEDICATED_MSG="Testing plugins should not be done with an application in a dedicated cluster. Please test your plugin with an app on the main cluster.";module.exports=function(plugin_id,actual_id,version){var _window,_window$plugins;let data=(_window=window)==null||(_window$plugins=_window.plugins)==null?void 0:_window$plugins[actual_id];if(typeof data=="string"&&(data=u.json_parse(data)),pluginLoadingDisabled(data)){reportPluginsDisabled(actual_id,data);return}return version==="current"&&(_shown_warning||(logger.owner_warn(TESTING_PLUGIN_WARN_MSG),client_config.is_dedicated&&logger.owner_warn(TESTING_PLUGIN_WARN_DEDICATED_MSG),_shown_warning=!0)),new pluginservice.ThirdPartyPluginWrapper(actual_id,version,data)};function pluginLoadingDisabled(data){return data==null||u.is_empty(data)||data.forbidden}function reportPluginsDisabled(actual_id,data){if(data==null)if(window.bubble_no_third_party_plugin){if(_reported_bubble_no_third_party_plugin_once)return;logger.owner_warn("Community plugins are not loaded in safe mode."),_reported_bubble_no_third_party_plugin_once=!0}else logger.owner_error("Plugin could not be loaded",{display:"The plugin ".concat(actual_id," could not be loaded. Please check it exists.")});else data.forbidden&&logger.owner_error(data.forbidden,{display:get_error_message(data,actual_id)})}}});var require_run_derived=__commonJS({"lib-browser-old/client/run_derived.js"(exports){"use strict";init_define_process_env();init_shim();require_es_json_stringify();var u=require_u2(),run_derived=exports;run_derived.get=function(function_name){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];let key=JSON.stringify({function_name,args});if(window.bubble_run_derived[key])return new RunDerived(window.bubble_run_derived[key]);throw new u.UnexpectedError("Derived not included in package",{function_name,args})};var RunDerived=class{constructor(_content){this._content=_content}content(){return this._content}set_app(app){}}}});var require_assert=__commonJS({"lib-browser-old/assert.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_error_cause();var safe_require=require_safe_require(),assert=module.exports;safe_require.safe_register("./assert",assert);assert.assert=assert_fn;assert.fail=fail;function assert_fn(bool,msg){console.log("Asserting true: ".concat(bool)),bool||fail(msg!=null?msg:"expected true, got: "+bool)}function fail(msg){throw new Error(msg)}}});var require_testing=__commonJS({"lib-browser-old/test_utilities/testing.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_json_stringify();require_es_array_iterator();require_web_dom_collections_iterator();require_es_array_includes();require_es_string_includes();var u=require_u2(),assert=require_assert(),test_state=require_test_state(),safe_require=require_safe_require(),status_bar=require_status_bar(),webfonts=require_webfonts(),deep_equal=require_fast_deep_equal(),domain_utilities=require_domain_utilities(),testing=module.exports;safe_require.safe_register("./test_utilities/testing",testing);var Lib=safe_require.safe_require("./lib");if(u.on_server()){let r=__require;u.extend(testing,r("./test_lib"))}var server_running_key;typeof window<"u"&&window!==null&&(window.testing=testing,server_running_key=u.MakeSwitch(null,"server_running_key"),server_running_key.turn_on(),$(document).ajaxStart(()=>server_running_key.turn_off()),$(document).ajaxStop(()=>server_running_key.turn_on()));testing.initialize=function(){let everything_ready=u.MakeKeyList([Lib().workflow.everything_done_key(),server_running_key,Lib().location.open_requests,u.scheduled_key,u.no_outstanding_run_once,status_bar.no_status_bar,webfonts.active_key]);window.everything_ready=()=>everything_ready,window.wait_for_everything=cb=>setTimeout(()=>everything_ready.is_turned()?cb():window.wait_for_everything(cb),100)};testing.fail=assert.fail;testing.assert=assert.assert;testing.assert_equals=function(expected,actual,msg){console.log("Asserting equals: ".concat(expected,", ").concat(actual)),expected!==actual&&testing.fail(msg!=null?msg:"expected:\n".concat(expected,"\nbut got:\n").concat(actual))};testing.assert_deep_equals=function(expected,actual,msg){deep_equal(expected,actual)||testing.fail(msg!=null?msg:"expected:\n".concat(JSON.stringify(expected),"\nbut got:\n").concat(JSON.stringify(actual)))};testing.assert_set_equals=function(expected,actual,base_msg){console.log("Asserting set equals: [".concat(expected.join(", "),"], [").concat(actual.join(", "),"]"));let missing=[];for(let item of expected)actual.includes(item)||missing.push(item);let extra=[];for(let item of actual)expected.includes(item)||extra.push(item);if(missing.length!==0||extra.length!==0){let msg=(base_msg!=null?base_msg:"Sets are not equal")+"\n";msg+="Expected: "+expected.join(", ")+"\n",msg+="Got: "+actual.join(", ")+"\n",missing.length!==0&&(msg+="Missing Items: "+missing.join(", ")+"\n"),extra.length!==0&&(msg+="Extra Items: "+extra.join(", ")+"\n"),testing.fail(msg)}};testing.assert_contains=function(expected,actual,msg){console.log("Asserting contains: ".concat(expected,", ").concat(actual)),actual.indexOf(expected)===-1&&testing.fail(msg!=null?msg:"expected it to contain ".concat(expected," but got ").concat(actual))};testing.assert_error=function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];let adjustedLength=Math.max(args.length,1),error_class=args.slice(0,adjustedLength-1),fn=args[adjustedLength-1];console.log("asserting there is an error...");let no_error=!1;try{fn(),no_error=!0}catch(err){if(error_class[0]&&!(err instanceof error_class[0])){var _err$constructor;console.log(err.stack),testing.fail("Expected an instance of ".concat(error_class[0].prototype.error_class," but got ").concat(err==null||(_err$constructor=err.constructor)==null?void 0:_err$constructor.name))}return err}no_error&&testing.fail("Expected an error but did not get one")};testing.wait_for=function(condition,cb){let wait_for=arguments.length>2&&arguments[2]!==void 0?arguments[2]:3e4,interval=setInterval(()=>{condition()&&(clearInterval(interval),clearTimeout(timeout),cb())},500),timeout=setTimeout(()=>{throw clearInterval(interval),new u.UnexpectedError("Timed out after 30 seconds of waiting for: "+condition)},wait_for)};testing.set_domain=function(domain){testing.DOMAIN=domain;let proto=domain_utilities.is_host_aws(domain)?"http":"https";testing.DOMAIN_PREFIX="".concat(proto,"://").concat(testing.DOMAIN,"/"),testing.DOMAIN_PREFIX_DIRECT="".concat(proto,"://").concat(testing.DOMAIN)};var _log=[];testing.log=msg=>_log.push(msg);testing.get_log=function(){let ret=_log;return _log=[],ret};function check_for_errors(){if(test_state.all_page_errors.length>0){var _err$stacktrace;let err=test_state.all_page_errors[0];return test_state.all_page_errors=[],(_err$stacktrace=err.stacktrace)!=null?_err$stacktrace:JSON.stringify(err)}return null}var my_interval=null;function set_global_handler(cb){clearInterval(my_interval),my_interval=setInterval(()=>{let err=check_for_errors();err&&(cb(err),clearInterval(my_interval))},1e3)}testing.SimpleTest=class{constructor(_name,fn,setup){this._name=_name,this.fn=fn,this.setup=setup}name(){return this._name}run(cb){set_global_handler(cb);try{return this.fn(err=>cb(err!=null?err:check_for_errors()))}catch(error){return cb(error)}}}}});var require_userservice=__commonJS({"lib-browser-old/client/userservice.js"(exports,module){"use strict";init_define_process_env();init_shim();require_es_regexp_exec();require_es_string_replace();require_es_string_search();var u=require_u2(),evts=require_events(),url=require_url(),Lib=require_lib(),logger=require_logger(),client_db=require_client_db(),db=require_db2(),db_consts=require_db(),core_events=require_core_events(),{ERROR_SOURCES}=require_workflow();typeof window<"u"&&window!==null&&(window.authenticate_as=user_id=>Lib().location.post("server://user/auth_as/"+user_id,{},(err,res)=>{err?console.log("Authentication failed"):(console.log("Authentication succeeded.  Refreshing..."),setTimeout(()=>window.document.location.reload(),1e3))}));module.exports=class extends evts.EventEmitter{constructor(){super(),this.ready_key=u.MakeKey(null,"user_service"),this.has_changed_flag=!1,this.heartbeat_interval=null}initialize(){let heartbeat=()=>{this.heartbeat_interval=setInterval(()=>Lib().location.post("server://user/hi",null),3e5)};this.heartbeat_interval==null&&Lib().location.post("server://user/hi",null,heartbeat),u.Watcher(()=>{var _Lib$pageparam$get,_Lib$pageparam$get$_i;let user=client_db.current_user(),logged_in=user.is_logged_in(),id=user._id(),page_param=(_Lib$pageparam$get=Lib().pageparam.get())==null||(_Lib$pageparam$get$_i=_Lib$pageparam$get._id)==null?void 0:_Lib$pageparam$get$_i.call(_Lib$pageparam$get);return logged_in+"_"+id+"_"+page_param}).on_value(v=>{let logged_in=client_db.current_user().is_logged_in();Lib().current_user()._id()!==db_consts.NO_USER&&(db.wipe_no_user(),this.emit("cookie_opt_in"));let{on_login}=Lib().location.get_query();if(logged_in&&on_login){this.has_changed_flag=!0,Lib().workflow.about_to_change_page=!0;let redirect_to=Lib().location.get_server_base()+"api/1.1/util/rr/"+on_login;window.location.replace(redirect_to)}logged_in?Lib().workflow.announce_event("LoggedIn"):Lib().workflow.announce_event("LoggedOut")})}on_cookie_opt_in(cb){Lib().current_user()._id()!==db_consts.NO_USER?cb():this.once("cookie_opt_in",cb)}is_cookie_opt_in(){return Lib().current_user()._id()!==db_consts.NO_USER}has_changed(){if(Lib().current_user().is_logged_in())return this.has_changed_flag}ready(){logger.error("Deprecated call to userservice.ready"),this.ready_key.turn()}on_page_load_for_confirmation_email(){$(document).ready(()=>{let parsed_url=url.parse(Lib().location.base_url,!0),transmitted_data=parsed_url.query;transmitted_data.confirmation_email&&Lib().location.post("server://user/confirm_email",{confirmation_email_id:transmitted_data.confirmation_email}).then(()=>{Lib().current_user().flush(),delete transmitted_data.confirmation_email,delete parsed_url.search,delete parsed_url.hash,Lib().location.set_url_without_refresh({url:url.format(parsed_url)})},err=>{core_events.handle_uncaught_error({original_error:err,caught_from:ERROR_SOURCES.GENERAL_WORKFLOW,cb(err2){err2&&window.alert(logger.human_friendly(err2))}})})})}}}});var require_set_up_page=__commonJS({"lib-browser-old/client/set_up_page.js"(exports){"use strict";init_define_process_env();init_shim();require_es_regexp_exec();require_es_string_search();var u=require_u2();require_btypes();require_box();var appquery=require_appquery(),apps_utilities=require_apps_utilities(),client_db=require_client_db(),client_initializer=require_client_initializer(),ddg=require_ddg(),domain_utilities=require_domain_utilities(),elementservice=require_elementservice(),lang=require_lang2(),Lib=require_lib(),LocationService=require_locationservice(),logger=require_logger(),moment=require_b_date().require_moment(),plugin_getter=require_plugin_getter(),pluginservice_getter=require_pluginservice_getter(),run_derived=require_run_derived(),testing=require_testing(),url_lib=require_url(),UserService=require_userservice(),webfonts=require_webfonts(),page_set_up=exports;page_set_up.make_document_ready=make_document_ready;page_set_up.initialize_tests=initialize_tests;page_set_up.validate_temp_db=validate_temp_db;page_set_up.set_up_debugger=set_up_debugger;page_set_up.set_webfonts_key=set_webfonts_key;page_set_up.create_lib=create_lib;function make_document_ready(){typeof document<"u"&&document!==null&&(window.document_ready_key=u.MakeKey(null,"window.document_ready_key"),$(()=>window.document_ready_key.turn()),client_initializer.initialize(),logger.install_browser_error_handler({Lib}),plugin_getter.initialize(pluginservice_getter),validate_temp_db())}function create_location_service(){let location2;if(u.on_phonegap()){if(!window.web_url_equivalent_for_phonegap)throw new u.UnexpectedError("missing web_url_equivalent_for_phonegap for phonegap app. Should be set in index.html when generating the phonegap build");location2=new LocationService(window.web_url_equivalent_for_phonegap)}else location2=new LocationService(document.location.href,{normalizeUnicode:!0});return location2}function create_lib(app,page_id){let p=u.json_parse(window._p);return{app:lang.make_run_app(app,app._id,app.app_version),is_edit_mode:!1,appname(){return app._id},app_version(){return app.app_version},db_instance:client_db.instance,current_user:client_db.current_user,ddg:ddg.instance(page_id),location:create_location_service(),user:new UserService,element:new elementservice.ElementService,ignore_privacy_rules(){return!1},app_plan(){return p},derived:run_derived.get,current_timezone(){return appquery.has_advanced_feature_enabled("timezone_controls_page")?appquery.get_page_by_name(page_id).get_page_timezone():moment.tz.guess()}}}function set_up_debugger(){if(url_lib.parse(document.location.href,!0).query.debug_mode)if(window.start_debugger!=null)window.start_debugger();else{let parsed=url_lib.parse(document.location.href,!0);delete parsed.query.debug_mode,delete parsed.search,Lib().location.set_url_without_refresh({url:url_lib.format(parsed)})}}function set_webfonts_key(){u.WaitFor(webfonts.active_key,webfonts.fontface_key,()=>{var _window$performance,_window$performance$m;(_window$performance=window.performance)==null||(_window$performance$m=_window$performance.mark)==null||_window$performance$m.call(_window$performance,"webfonts active")})}function initialize_tests(){testing.initialize(),apps_utilities.is_test(Lib().appname())&&Lib().load_plugin(Lib().plugin_prefixes.module+"runmode_tests").initialize()}function validate_temp_db(){let parsed=url_lib.parse(document.location.href,!0);u.readCookie("temp_db")&&(domain_utilities.is_hostname_bubble(parsed.host)?u.eraseCookie("temp_db"):console.log("TEMP DB IS SET!!!"))}}});var require_seo_runner=__commonJS({"lib-browser-old/client/seo_runner.js"(exports){"use strict";init_define_process_env();init_shim();require_es_array_iterator();require_web_dom_collections_iterator();var u=require_u2(),Lib=require_lib(),logger=require_logger(),seo_runner=exports;seo_runner.snapshot_page_when_stable=function(){let cancelled=!1;return setTimeout(()=>{u.WaitFor(Lib.or_throw().workflow.everything_done_key(),()=>{cancelled||seo_runner.do_it()})},3e3),function(){cancelled=!0}};seo_runner.do_it=function(){u.on_phonegap()||u.run_once(30,()=>Lib().current_user().is_logged_in(),(err,is_logged_in)=>{if(err){logger.log(err);return}is_logged_in||Lib().location.post("server://frg",{action:"ask",url:document.location.href}).then(result=>{if(result){let html=document.documentElement.outerHTML,[first,second]=html.split('<meta charset="utf-8">');html=first+'<script type="text/javascript">window.dont_call_page_display = true;<\/script><meta charset="utf-8">'+second,Lib().location.post("server://frg",{action:"set",html,url:document.location.href})}})})}}});var require_StateMachine=__commonJS({"lib-browser-old/u/shared/StateMachine.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.StateMachine=void 0;require_web_dom_collections_for_each();require_web_queue_microtask();require_es_array_iterator();require_web_dom_collections_iterator();var _errors=require_errors(),StateMachine=class{constructor(){this.currentState=void 0,this.inTransition=!1,this.exitCallbacks=void 0}start(){var _states$initialState,_states$initialState$,_states$initialState$2;if(this.currentState)throw new _errors.UnexpectedError("State machine already started",{currentState:this.currentState});let{initialState,states}=this.definition;return this.currentState=initialState,(_states$initialState=states[initialState])==null||(_states$initialState$=_states$initialState.actions)==null||(_states$initialState$2=_states$initialState$.onEnter)==null||_states$initialState$2.call(this),this}transition(eventLike){var _states$this$currentS,_states$this$currentS2,_currentStateDefiniti,_currentStateDefiniti2,_this$exitCallbacks,_eventDefinition$acti,_targetStateDefinitio,_targetStateDefinitio2,_targetStateDefinitio3;let event=typeof eventLike=="object"?eventLike:{type:eventLike};if(!this.currentState)throw new _errors.UnexpectedError("State machine not started",{eventType:event.type});if(this.inTransition)throw new _errors.UnexpectedError("State machine already transitioning",{currentState:this.currentState,eventType:event.type});let{states,onTransition}=this.definition,eventDefinition=(_states$this$currentS=states[this.currentState])==null||(_states$this$currentS2=_states$this$currentS.events)==null?void 0:_states$this$currentS2[event.type];if(!eventDefinition)throw new _errors.UnexpectedError("Invalid state machine transition",{currentState:this.currentState,eventType:event.type});this.inTransition=!0;let targetState=eventDefinition.target,targetStateDefinition=states[targetState],currentStateDefinition=states[this.currentState];currentStateDefinition==null||(_currentStateDefiniti=currentStateDefinition.actions)==null||(_currentStateDefiniti2=_currentStateDefiniti.onExit)==null||_currentStateDefiniti2.call(this),(_this$exitCallbacks=this.exitCallbacks)==null||_this$exitCallbacks.forEach(cb=>cb()),this.exitCallbacks=void 0,eventDefinition==null||(_eventDefinition$acti=eventDefinition.action)==null||_eventDefinition$acti.call(this,event);let previousState=this.currentState;this.currentState=targetState,onTransition==null||onTransition.call(this,previousState,targetState,event),targetStateDefinition==null||(_targetStateDefinitio=targetStateDefinition.actions)==null||(_targetStateDefinitio2=_targetStateDefinitio.onEnter)==null||_targetStateDefinitio2.call(this),this.inTransition=!1,targetStateDefinition!=null&&(_targetStateDefinitio3=targetStateDefinition.events)!=null&&_targetStateDefinitio3.always&&this.transition({type:"always"})}queueTransition(eventLike){queueMicrotask(()=>this.transition(eventLike))}onceExit(fn){var _this$exitCallbacks2;(_this$exitCallbacks2=this.exitCallbacks)!=null||(this.exitCallbacks=[]),this.exitCallbacks.push(fn)}ifStateUnchanged(fn){let cancelled=!1;return this.onceExit(()=>{cancelled=!0}),function(){return cancelled?void 0:fn(...arguments)}}delayedTransition(eventLike){return this.ifStateUnchanged(()=>{this.queueTransition(eventLike)})}canTransition(event){if(!this.currentState||this.inTransition)return!1;{var _this$definition$stat,_this$definition$stat2;let eventType=event.type;return((_this$definition$stat=this.definition.states[this.currentState])==null||(_this$definition$stat2=_this$definition$stat.events)==null?void 0:_this$definition$stat2[eventType])!=null}}};exports.StateMachine=StateMachine}});var require_browser_markers=__commonJS({"lib-browser-old/client/metrics/browser_markers.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.enabled=void 0;exports.startMeasure=startMeasure;var _window,_window$performance,_window2,_window2$performance,enabled=((_window=window)==null||(_window$performance=_window.performance)==null?void 0:_window$performance.measure)!=null&&((_window2=window)==null||(_window2$performance=_window2.performance)==null?void 0:_window2$performance.mark)!=null;exports.enabled=enabled;function startMeasure(name){if(!enabled)return()=>{};let startMark=mark("".concat(name,"_start"));return function(detail){let endMark=mark("".concat(name,"_end"));typeof(startMark==null?void 0:startMark.startTime)!="number"||typeof(endMark==null?void 0:endMark.startTime)!="number"||measure(name,{start:startMark.startTime,end:endMark.startTime,detail})}}function mark(name,options){try{return performance.mark(name,options)}catch(error){return}}function measure(name,options){try{return performance.measure(name,options)}catch(error){return}}}});var require_Loader=__commonJS({"lib-browser-old/client/Loader.js"(exports){"use strict";init_define_process_env();init_shim();Object.defineProperty(exports,"__esModule",{value:!0});exports.LoadingStatus=exports.LoadCoordinator=exports.AssetLoaderType=exports.AssetLoader=void 0;require_es_promise();require_es_array_iterator();require_web_dom_collections_iterator();var _errors=require_errors();function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self2=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self2,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}var LoadingStatus=function(LoadingStatus2){return LoadingStatus2.NOT_LOADED="NOT_LOADED",LoadingStatus2.LOADING="LOADING",LoadingStatus2.LOADED="LOADED",LoadingStatus2.LOAD_FAILED="LOAD_FAILED",LoadingStatus2}({});exports.LoadingStatus=LoadingStatus;var AssetLoaderType=function(AssetLoaderType2){return AssetLoaderType2.PRE_LOADED_JS="PRE_LOADED_JS",AssetLoaderType2.URL_LOAD_JS="URL_LOAD_JS",AssetLoaderType2.CSS="CSS",AssetLoaderType2}({});exports.AssetLoaderType=AssetLoaderType;var AssetLoader=class{};exports.AssetLoader=AssetLoader;var PreloadedJSAssetLoader=class extends AssetLoader{loadAsset(_assetIdentifier){return _asyncToGenerator(function*(){var _window$preloaded;let asset={lineItems:Object.keys((_window$preloaded=window.preloaded)!=null?_window$preloaded:{})};return yield Promise.resolve(asset)})()}},URLloadJSAssetLoader=class extends AssetLoader{loadAsset(url){return _asyncToGenerator(function*(){return yield new Promise((resolve,reject)=>{let script=document.createElement("script");script.src=url,script.crossOrigin="anonymous",script.async=!0,script.charset="utf-8",document.head.appendChild(script),script.addEventListener("load",()=>resolve({lineItems:[]})),script.addEventListener("error",e=>reject(e.error))})})()}},CSSAssetLoader=class extends AssetLoader{loadAsset(url){return _asyncToGenerator(function*(){return yield new Promise((resolve,reject)=>{let link=document.createElement("link");link.rel="stylesheet",link.href=url,link.addEventListener("load",()=>resolve({lineItems:[]})),link.addEventListener("error",e=>reject(e.error)),document.head.appendChild(link)})})()}},LoadCoordinator=class{constructor(){this.lineItemsStatus=void 0,this.assetsStatus=void 0,this.loaderMap=void 0,this.lineItemsStatus=new Map,this.assetsStatus=new Map,this.loaderMap=new Map([[AssetLoaderType.PRE_LOADED_JS,new PreloadedJSAssetLoader],[AssetLoaderType.URL_LOAD_JS,new URLloadJSAssetLoader],[AssetLoaderType.CSS,new CSSAssetLoader]])}getAssetStatus(assetIdentifier){let status=this.assetsStatus.get(assetIdentifier);return status||(this.assetsStatus.set(assetIdentifier,LoadingStatus.NOT_LOADED),LoadingStatus.NOT_LOADED)}loadAsset(assetIdentifier){var _this=this;return _asyncToGenerator(function*(){let{type,id}=assetIdentifier,assetLoader=_this.loaderMap.get(type);if(assetLoader==null)throw new _errors.UnexpectedError("Unknown assetIdentifier type",{});_this.assetsStatus.set(id,LoadingStatus.LOADING);try{let asset=yield assetLoader.loadAsset(assetIdentifier.id);return _this.assetsStatus.set(id,LoadingStatus.LOADED),asset}catch(err){throw _this.assetsStatus.set(id,LoadingStatus.LOAD_FAILED),err}})()}};exports.LoadCoordinator=LoadCoordinator}});var require_window=__commonJS({"lib-browser-old/window.js"(){"use strict";init_define_process_env();init_shim();require_es_symbol_description();require_es_error_cause();require_web_dom_collections_for_each();require_es_object_get_own_property_descriptors();require_es_weak_map();require_es_array_iterator();require_web_dom_collections_iterator();require_es_object_assign();require_es_promise();require_es_string_ends_with();var u=_interopRequireWildcard(require_u2()),_appquery=_interopRequireDefault(require_appquery()),banner=_interopRequireWildcard(require_bubble_banner()),ddg=_interopRequireWildcard(require_ddg()),_DefaultLib=require_DefaultLib(),epoch_consts=_interopRequireWildcard(require_epoch()),_lib=_interopRequireDefault(require_lib()),oauth=_interopRequireWildcard(require_oauth()),page_load=_interopRequireWildcard(require_page_load()),page_load_performance=_interopRequireWildcard(require_page_load_performance()),set_up_page=_interopRequireWildcard(require_set_up_page()),seo_runner=_interopRequireWildcard(require_seo_runner()),slug=_interopRequireWildcard(require_slug()),webfonts=_interopRequireWildcard(require_webfonts()),_StateMachine=require_StateMachine(),_browser_markers=require_browser_markers(),_Loader=require_Loader(),_internal_navigation=require_internal_navigation();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self2=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self2,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function ownKeys2(object2,enumerableOnly){var keys=Object.keys(object2);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object2);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object2,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys2(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key=="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(typeof res!="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}require_btypes();require_box();var loadCoordinator=new _Loader.LoadCoordinator,internal_navigation_events={navigate_to:{target:"NAVIGATE_PRELOADING",action(_ref){let{target_page_id,navigation_cb}=_ref;this.target_page_id=target_page_id,this.navigation_cb=navigation_cb}}},PageStateMachine=class extends _StateMachine.StateMachine{constructor(){super(...arguments),this.page_id=void 0,this.target_page_id=void 0,this.navigation_cb=void 0,this.finalize_state_measure=void 0,this.definition={initialState:"WAIT_FOR_DISPLAY_PAGE_CALL",onTransition:(previousState,nextState)=>{var _this$finalize_state_;previousState==="DONE"&&(this.finalize_state_measure=void 0),(_this$finalize_state_=this.finalize_state_measure)==null||_this$finalize_state_.call(this),this.finalize_state_measure=(0,_browser_markers.startMeasure)(nextState)},states:{WAIT_FOR_DISPLAY_PAGE_CALL:{actions:{onEnter(){set_up_page.make_document_ready()}},events:{display_page_called:{target:"WAIT_FOR_DOCUMENT_READY",action(event){var _window$Lib_post_load,_window;let{page_id,app}=event;this.page_id=page_id,window.Lib=_lib.default;let l=_DefaultLib.DefaultLib.get();Object.assign(l,set_up_page.create_lib(app,page_id)),_lib.default.set_global_lib(l),(_window$Lib_post_load=(_window=window).Lib_post_load)==null||_window$Lib_post_load.call(_window),set_up_page.initialize_tests()}}}},WAIT_FOR_DOCUMENT_READY:{actions:{onEnter(){let next=window.dont_call_page_display?"document_is_ready_dont_display_page":"document_is_ready_display_page";u.WaitFor(window.document_ready_key,this.delayedTransition(next))}},events:{document_is_ready_display_page:{target:"RENDER_PAGE"},document_is_ready_dont_display_page:{target:"DONE"}}},RENDER_PAGE:{actions:{onEnter(){page_load.render_start(epoch_consts.EPOCHS.load_runmode.name);let page_id=this.page_id,page;page_id&&(page=_appquery.default.get_page_by_name(page_id)),ddg.optimizations.prefetchData(),set_up_page.set_webfonts_key(),set_up_page.set_up_debugger(),_lib.default.or_throw().element.display(page),slug.create_slug_watcher(),page_load.render_end(),u.stop_count(),(0,_internal_navigation.add_popstate_handler)(),_lib.default.or_throw().element.on_page_done_loading(!1,()=>page_load_performance.page_load_performance_metrics(page_load.fully_loaded(),this.page_id))}},events:{always:{target:"WAIT_FOR_USER_OAUTH"}}},WAIT_FOR_USER_OAUTH:{actions:{onEnter(){oauth.onload(this.delayedTransition("user_successful_oauth"))}},events:{user_successful_oauth:{target:"START_PAGE_LOAD_WORKFLOWS"}}},START_PAGE_LOAD_WORKFLOWS:{actions:{onEnter(){let lib=_lib.default.or_throw();lib.workflow.initialize(),lib.workflow.announce_event("PageLoaded"),lib.user.initialize(),lib.user.on_page_load_for_confirmation_email()}},events:{always:{target:"WAIT_FOR_WEBFONTS"}}},WAIT_FOR_WEBFONTS:{actions:{onEnter(){u.WaitFor(webfonts.active_key,webfonts.fontface_key,this.delayedTransition("webfonts_ready"))}},events:_objectSpread(_objectSpread({},internal_navigation_events),{},{webfonts_ready:{target:"LOAD_ELEMENTS"}})},LOAD_ELEMENTS:{actions:{onEnter(){var _u$page_is_loaded;(_u$page_is_loaded=u.page_is_loaded)==null||_u$page_is_loaded.call(u),banner.add_bubble_marketing(this.page_id),_lib.default.or_throw().element.on_page_done_loading(!1,this.delayedTransition("elements_done_loading"))}},events:_objectSpread(_objectSpread({},internal_navigation_events),{},{elements_done_loading:{target:"DONE"}})},DONE:{actions:{onEnter(){let cancel_seo_runner=seo_runner.snapshot_page_when_stable();this.onceExit(cancel_seo_runner)}},events:_objectSpread({},internal_navigation_events)},NAVIGATE_PRELOADING:{actions:{onEnter(){let finished=this.delayedTransition("preloading_finished");if(!this.target_page_id)throw new u.UnexpectedError("No target page ID set for NAVIGATE_PRELOADING state");let target_page_url=_lib.default.or_throw().location.get_page_url(this.target_page_id);fetch(target_page_url,{headers:{Accept:"application/json"}}).then(function(){var _ref2=_asyncToGenerator(function*(response){let data=yield response.json(),page_js_identifier={id:data.assets.js.find(asset=>asset.endsWith("page.js")),type:_Loader.AssetLoaderType.URL_LOAD_JS},css_identifier={id:data.assets.css.find(asset=>asset.endsWith("run.css")),type:_Loader.AssetLoaderType.CSS};yield Promise.all([loadCoordinator.loadAsset(page_js_identifier),loadCoordinator.loadAsset(css_identifier)]),_lib.default.or_throw().app().json.reset_children(),_lib.default.or_throw().app().json.clear_smart_cache(),finished()});return function(_x){return _ref2.apply(this,arguments)}}()).catch(error=>{throw new u.UnexpectedError("Error fetching page manifest",error)})}},events:_objectSpread(_objectSpread({},internal_navigation_events),{},{preloading_finished:{target:"NAVIGATE_UNLOADING"}})},NAVIGATE_UNLOADING:{actions:{onEnter(){(0,_internal_navigation.unload_page)(),this.page_id=this.target_page_id,this.navigation_cb&&this.navigation_cb(),this.target_page_id=void 0,this.navigation_cb=void 0}},events:{always:{target:"RENDER_PAGE"}}}}}}};if(typeof window<"u"&&window!==null){let stateMachine=new PageStateMachine;stateMachine.start(),window.display_page=function(app,page_id){let PreloadedAssetIdentifier={id:page_id!=null?page_id:"",type:_Loader.AssetLoaderType.PRE_LOADED_JS};loadCoordinator.loadAsset(PreloadedAssetIdentifier).then(()=>{stateMachine.transition({type:"display_page_called",app,page_id}),(0,_internal_navigation.push_initial_browser_state)(page_id)})},window.switch_page=function(target_page_id,navigation_cb){let event={type:"navigate_to",target_page_id,navigation_cb};return stateMachine.canTransition(event)?(stateMachine.transition(event),!0):!1}}}});var require__6=__commonJS({"lib-browser-old/bv/27.js"(exports){"use strict";init_define_process_env();init_shim();var bv=exports;bv.message="Data Triggers initiated by autobinding inherit timezone information from the browser";bv.link="https://forum.bubble.io/t/upgrade-to-bubble-version-27-data-triggers-initiated-by-autobinding-inherit-timezone-information-from-the-browser/289117";bv.date=1697740086364;require_bubble_version().register(27,bv)}});init_define_process_env();init_shim();init_define_process_env();init_shim();require_all_elements();require_window();var import__=__toESM(require__6());})();
/*! VelocityJS.org (1.4.0). (C) 2014 Julian Shapiro. MIT @license: en.wikipedia.org/wiki/MIT_License */
/*! VelocityJS.org jQuery Shim (1.0.1). (C) 2014 The jQuery Foundation. MIT @license: en.wikipedia.org/wiki/MIT_License. */
/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */
/*! Bundled license information:

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

punycode/punycode.js:
  (*! https://mths.be/punycode v1.3.2 by @mathias *)

moment/moment.js:
  (*! moment.js *)
  (*! version : 2.29.4 *)
  (*! authors : Tim Wood, Iskren Chernev, Moment.js contributors *)
  (*! license : MIT *)
  (*! momentjs.com *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

crypto-js/ripemd160.js:
  (** @preserve
  	(c) 2012 by Cédric Mesnil. All rights reserved.
  
  	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
  
  	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
  	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
  
  	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  	*)

crypto-js/mode-ctr-gladman.js:
  (** @preserve
   * Counter block mode compatible with  Dr Brian Gladman fileenc.c
   * derived from CryptoJS.mode.CTR
   * Jan Hruby jhruby.web@gmail.com
   *)
*/
window._bubble_page_load_data.js_execution_timings.run_end_execution = Date.now();
